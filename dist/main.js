/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var e={277:(e,t,n)=>{n.d(t,{A:()=>m});var r=n(354),i=n.n(r),s=n(314),o=n.n(s),a=n(417),c=n.n(a),u=new URL(n(42),n.b),l=new URL(n(591),n.b),h=new URL(n(619),n.b),d=o()(i()),f=c()(u),p=c()(l),g=c()(h);d.push([e.id,`@font-face{font-family:"Sunday";src:url(${f})}*{margin:0;padding:0;box-sizing:border-box;font-size:24px;font-family:"Sunday"}body,main,.user-container,.sticky-note,.add,.sign-up-form,.log-in-form,label,.inputs,.submit-buttons{display:flex}body{height:100vh;width:100%;flex-direction:column;justify-content:center;background-color:#cbffcb}main{height:100vh;width:100%;justify-content:center;align-items:center;position:relative}main .sign-up-form,main .log-in-form{position:absolute;flex-direction:column;justify-content:center;align-items:center;height:-moz-fit-content;height:fit-content;width:320px;padding:20px 30px 20px 30px;border:2px solid #ef7a85;box-shadow:7px 7px #ef7a85;background-color:#ffcfd1;z-index:1;gap:20px}main .sign-up-form .inputs{flex-direction:column;width:100%}main .sign-up-form .inputs label{font-size:.85em;text-align:center;flex-direction:column;align-items:center;gap:5px}main .sign-up-form .inputs label input{height:35px;width:280px;padding:10px 0 10px 0}main .sign-up-form #sign-up-btn{padding:10px;border:none;position:relative;background-color:#cfc;box-shadow:4px 4px #71c971}main .sign-up-form #sign-up-btn:hover:before{content:"";position:absolute;top:0;right:-6px;border-top:13px solid #ffcfd1;border-right:13px solid #519251;width:3px;transform:rotate(90deg)}main .sign-up-form #sign-up-btn:hover{cursor:pointer;text-decoration:underline;padding:15px;margin:-5px;background-color:#71c971;box-shadow:4px 4px #519251}main .sign-up-form .sign-up-later-btn{padding:10px;border:none;position:relative;background-color:#f99584;box-shadow:4px 4px #ef7a85}main .sign-up-form .sign-up-later-btn:hover:before{content:"";position:absolute;top:0;right:-6px;border-top:13px solid #ffcfd1;border-right:13px solid #ad5962;width:3px;transform:rotate(90deg)}main .sign-up-form .sign-up-later-btn:hover{cursor:pointer;text-decoration:underline;padding:15px;margin:-5px;background-color:#ef7a85;box-shadow:4px 4px #ad5962}main .log-in-form label{font-size:.85em;text-align:center;flex-direction:column;align-items:center;gap:5px}main .log-in-form label input{height:35px;width:280px;padding:10px 0 10px 0}main .log-in-form .log-in-form-btn{padding:10px;border:none;position:relative;background-color:#cfc;box-shadow:4px 4px #71c971}main .log-in-form .log-in-form-btn:hover:before{content:"";position:absolute;top:0;right:-6px;border-top:13px solid #ffcfd1;border-right:13px solid #519251;width:3px;transform:rotate(90deg)}main .log-in-form .log-in-form-btn:hover{cursor:pointer;text-decoration:underline;padding:15px;margin:-5px;background-color:#71c971;box-shadow:4px 4px #519251}.content-container{background:url(${p}) no-repeat center center/contain;padding:55px;position:relative;display:flex}.content-container .user-auth-container{position:absolute;top:-40px;left:150px}.content-container .user-auth-container .log-out{position:absolute;left:85px;top:0;width:100px}.content-container .user-auth-container button{background-color:rgba(0,0,0,0);border:none}.content-container .user-auth-container button:hover{cursor:pointer;text-decoration:underline}.user-container{position:absolute;top:-60px;left:-100px;height:180px;width:240px;background:url(${g}) no-repeat center center/contain;justify-content:center;align-items:center;transform:rotate(-30deg);z-index:1;padding:10px}.user-container h1{text-decoration:underline;font-size:2em}.add-note-container{position:absolute;top:0px;right:-40px;background-color:#ffcfd1;box-shadow:4px 4px #ef7a85;padding:10px;transform:rotate(25deg)}.add-note-container:hover{text-decoration:underline;cursor:pointer;background-color:#ef7a85;box-shadow:4px 4px #cc606b}.add-note-container:hover:before{content:"";position:absolute;top:0;right:-6px;border-top:15px solid #cbffcb;border-right:14.5px solid #cc606b;width:3px;transform:rotate(90deg)}.sticky-notes-container{display:grid;grid-template-columns:repeat(6, 210px);grid-template-rows:repeat(3, 190px);row-gap:10px;-moz-column-gap:8px;column-gap:8px}.sticky-note{position:relative;flex-direction:column;height:190px;width:190px;background-color:#ffcfd1;padding:14px;letter-spacing:1px;box-shadow:4px 4px #ef7a85;border:2px solid #ef7a85;gap:3px}.sticky-note #delete-btn{background-color:red;box-shadow:3px 3px #8d0000;border:none;border-radius:100%;width:20px;height:20px;align-self:center;margin-top:-10px}.sticky-note #delete-btn:hover{cursor:pointer;background-color:#8d0000;box-shadow:3px 3px #300}.sticky-note .sticky-title{font-size:.7em;text-align:center}.sticky-note .sticky-description{font-size:.67em;margin-top:8px;word-wrap:break-word;overflow:scroll}.sticky-note .sticky-date{position:absolute;font-size:.5em;bottom:4px;right:4px}.add{position:absolute;margin-left:auto;margin-right:auto;left:0;right:0;flex-direction:column;justify-content:center;align-items:center;gap:15px;height:-moz-fit-content;height:fit-content;width:360px;padding:20px 30px 20px 30px;border:2px solid #ef7a85;box-shadow:7px 7px #ef7a85;background-color:#ffcfd1;z-index:1}.add .inputs{flex-direction:column;gap:10px}.add .inputs label{font-size:.85em;text-align:center;flex-direction:column;align-items:center;gap:5px}.add .inputs label input{height:50px;width:280px;padding:10px}.add .inputs textarea{padding:5px;font-size:1em;resize:none}.add .inputs #date{background-color:#fff;text-align:center;font-size:1em;height:45px}.invisible{display:none}.submit-buttons{width:100%;justify-content:space-between}.submit-buttons #pin-it-btn,.submit-buttons #maybe-later-btn{padding:10px;border:none;position:relative}.submit-buttons #pin-it-btn:hover:before,.submit-buttons #maybe-later-btn:hover:before{content:"";position:absolute;top:0;right:-6px;border-top:13px solid #ffcfd1;border-right:13px solid #519251;width:3px;transform:rotate(90deg)}.submit-buttons #pin-it-btn:hover,.submit-buttons #maybe-later-btn:hover{cursor:pointer;text-decoration:underline;padding:15px;margin:-5px}.submit-buttons #pin-it-btn{background-color:#cfc;box-shadow:4px 4px #71c971}.submit-buttons #pin-it-btn:hover{background-color:#71c971;box-shadow:4px 4px #519251}.submit-buttons #maybe-later-btn{background-color:#f99584;box-shadow:4px 4px #ef7a85}.submit-buttons #maybe-later-btn:hover:before{content:"";position:absolute;top:0;right:-6px;border-right:13px solid #ad5962;width:3px;transform:rotate(90deg)}.submit-buttons #maybe-later-btn:hover{background-color:#ef7a85;box-shadow:4px 4px #ad5962}hr{border:none;height:1px;background-color:#000}footer{padding:25px;font-size:1.2em;text-align:center}footer .fa-github{color:#000;border:none;text-decoration:none}footer .fa-github:hover{cursor:pointer;color:rgba(0,0,0,.5)}`,"",{version:3,sources:["webpack://./src/styles.css"],names:[],mappings:"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",sourcesContent:['@font-face {\n  font-family: "Sunday";\n  src: url("./font/The Sunday.otf");\n}\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n  font-size: 24px;\n  font-family: "Sunday";\n}\n\nbody, main, .user-container, .sticky-note, .add, .sign-up-form, .log-in-form, label, .inputs, .submit-buttons {\n  display: flex;\n}\n\nbody {\n  height: 100vh;\n  width: 100%;\n  flex-direction: column;\n  justify-content: center;\n  background-color: #cbffcb;\n}\n\nmain {\n  height: 100vh;\n  width: 100%;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n}\nmain .sign-up-form, main .log-in-form {\n  position: absolute;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  height: -moz-fit-content;\n  height: fit-content;\n  width: 320px;\n  padding: 20px 30px 20px 30px;\n  border: 2px solid #EF7A85;\n  box-shadow: 7px 7px #EF7A85;\n  background-color: #ffcfd1;\n  z-index: 1;\n  gap: 20px;\n}\nmain .sign-up-form .inputs {\n  flex-direction: column;\n  width: 100%;\n}\nmain .sign-up-form .inputs label {\n  font-size: 0.85em;\n  text-align: center;\n  flex-direction: column;\n  align-items: center;\n  gap: 5px;\n}\nmain .sign-up-form .inputs label input {\n  height: 35px;\n  width: 280px;\n  padding: 10px 0 10px 0;\n}\nmain .sign-up-form #sign-up-btn {\n  padding: 10px;\n  border: none;\n  position: relative;\n  background-color: #CCFFCC;\n  box-shadow: 4px 4px #71c971;\n}\nmain .sign-up-form #sign-up-btn:hover:before {\n  content: "";\n  position: absolute;\n  top: 0;\n  right: -6px;\n  border-top: 13px solid #ffcfd1;\n  border-right: 13px solid #519251;\n  width: 3px;\n  transform: rotate(90deg);\n}\nmain .sign-up-form #sign-up-btn:hover {\n  cursor: pointer;\n  text-decoration: underline;\n  padding: 15px;\n  margin: -5px;\n  background-color: #71c971;\n  box-shadow: 4px 4px #519251;\n}\nmain .sign-up-form .sign-up-later-btn {\n  padding: 10px;\n  border: none;\n  position: relative;\n  background-color: #f99584;\n  box-shadow: 4px 4px #EF7A85;\n}\nmain .sign-up-form .sign-up-later-btn:hover:before {\n  content: "";\n  position: absolute;\n  top: 0;\n  right: -6px;\n  border-top: 13px solid #ffcfd1;\n  border-right: 13px solid #ad5962;\n  width: 3px;\n  transform: rotate(90deg);\n}\nmain .sign-up-form .sign-up-later-btn:hover {\n  cursor: pointer;\n  text-decoration: underline;\n  padding: 15px;\n  margin: -5px;\n  background-color: #EF7A85;\n  box-shadow: 4px 4px #ad5962;\n}\nmain .log-in-form label {\n  font-size: 0.85em;\n  text-align: center;\n  flex-direction: column;\n  align-items: center;\n  gap: 5px;\n}\nmain .log-in-form label input {\n  height: 35px;\n  width: 280px;\n  padding: 10px 0 10px 0;\n}\nmain .log-in-form .log-in-form-btn {\n  padding: 10px;\n  border: none;\n  position: relative;\n  background-color: #CCFFCC;\n  box-shadow: 4px 4px #71c971;\n}\nmain .log-in-form .log-in-form-btn:hover:before {\n  content: "";\n  position: absolute;\n  top: 0;\n  right: -6px;\n  border-top: 13px solid #ffcfd1;\n  border-right: 13px solid #519251;\n  width: 3px;\n  transform: rotate(90deg);\n}\nmain .log-in-form .log-in-form-btn:hover {\n  cursor: pointer;\n  text-decoration: underline;\n  padding: 15px;\n  margin: -5px;\n  background-color: #71c971;\n  box-shadow: 4px 4px #519251;\n}\n\n.content-container {\n  background: url("./imgs/corkboard.jpg") no-repeat center center/contain;\n  padding: 55px;\n  position: relative;\n  display: flex;\n}\n.content-container .user-auth-container {\n  position: absolute;\n  top: -40px;\n  left: 150px;\n}\n.content-container .user-auth-container .log-out {\n  position: absolute;\n  left: 85px;\n  top: 0;\n  width: 100px;\n}\n.content-container .user-auth-container button {\n  background-color: transparent;\n  border: none;\n}\n.content-container .user-auth-container button:hover {\n  cursor: pointer;\n  text-decoration: underline;\n}\n\n.user-container {\n  position: absolute;\n  top: -60px;\n  left: -100px;\n  height: 180px;\n  width: 240px;\n  background: url("./imgs/stripped paper.png") no-repeat center center/contain;\n  justify-content: center;\n  align-items: center;\n  transform: rotate(-30deg);\n  z-index: 1;\n  padding: 10px;\n}\n.user-container h1 {\n  text-decoration: underline;\n  font-size: 2em;\n}\n\n.add-note-container {\n  position: absolute;\n  top: 0px;\n  right: -40px;\n  background-color: #ffcfd1;\n  box-shadow: 4px 4px #EF7A85;\n  padding: 10px;\n  transform: rotate(25deg);\n}\n.add-note-container:hover {\n  text-decoration: underline;\n  cursor: pointer;\n  background-color: #EF7A85;\n  box-shadow: 4px 4px #cc606b;\n}\n.add-note-container:hover:before {\n  content: "";\n  position: absolute;\n  top: 0;\n  right: -6px;\n  border-top: 15px solid #cbffcb;\n  border-right: 14.5px solid #cc606b;\n  width: 3px;\n  transform: rotate(90deg);\n}\n\n.sticky-notes-container {\n  display: grid;\n  grid-template-columns: repeat(6, 210px);\n  grid-template-rows: repeat(3, 190px);\n  row-gap: 10px;\n  -moz-column-gap: 8px;\n       column-gap: 8px;\n}\n\n.sticky-note {\n  position: relative;\n  flex-direction: column;\n  height: 190px;\n  width: 190px;\n  background-color: #ffcfd1;\n  padding: 14px;\n  letter-spacing: 1px;\n  box-shadow: 4px 4px #EF7A85;\n  border: 2px solid #EF7A85;\n  gap: 3px;\n}\n.sticky-note #delete-btn {\n  background-color: red;\n  box-shadow: 3px 3px #8d0000;\n  border: none;\n  border-radius: 100%;\n  width: 20px;\n  height: 20px;\n  align-self: center;\n  margin-top: -10px;\n}\n.sticky-note #delete-btn:hover {\n  cursor: pointer;\n  background-color: #8d0000;\n  box-shadow: 3px 3px #330000;\n}\n.sticky-note .sticky-title {\n  font-size: 0.7em;\n  text-align: center;\n}\n.sticky-note .sticky-description {\n  font-size: 0.67em;\n  margin-top: 8px;\n  word-wrap: break-word;\n  overflow: scroll;\n}\n.sticky-note .sticky-date {\n  position: absolute;\n  font-size: 0.5em;\n  bottom: 4px;\n  right: 4px;\n}\n\n.add {\n  position: absolute;\n  margin-left: auto;\n  margin-right: auto;\n  left: 0;\n  right: 0;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  gap: 15px;\n  height: -moz-fit-content;\n  height: fit-content;\n  width: 360px;\n  padding: 20px 30px 20px 30px;\n  border: 2px solid #EF7A85;\n  box-shadow: 7px 7px #EF7A85;\n  background-color: #ffcfd1;\n  z-index: 1;\n}\n.add .inputs {\n  flex-direction: column;\n  gap: 10px;\n}\n.add .inputs label {\n  font-size: 0.85em;\n  text-align: center;\n  flex-direction: column;\n  align-items: center;\n  gap: 5px;\n}\n.add .inputs label input {\n  height: 50px;\n  width: 280px;\n  padding: 10px;\n}\n.add .inputs textarea {\n  padding: 5px;\n  font-size: 1em;\n  resize: none;\n}\n.add .inputs #date {\n  background-color: white;\n  text-align: center;\n  font-size: 1em;\n  height: 45px;\n}\n\n.invisible {\n  display: none;\n}\n\n.submit-buttons {\n  width: 100%;\n  justify-content: space-between;\n}\n.submit-buttons #pin-it-btn, .submit-buttons #maybe-later-btn {\n  padding: 10px;\n  border: none;\n  position: relative;\n}\n.submit-buttons #pin-it-btn:hover:before, .submit-buttons #maybe-later-btn:hover:before {\n  content: "";\n  position: absolute;\n  top: 0;\n  right: -6px;\n  border-top: 13px solid #ffcfd1;\n  border-right: 13px solid #519251;\n  width: 3px;\n  transform: rotate(90deg);\n}\n.submit-buttons #pin-it-btn:hover, .submit-buttons #maybe-later-btn:hover {\n  cursor: pointer;\n  text-decoration: underline;\n  padding: 15px;\n  margin: -5px;\n}\n.submit-buttons #pin-it-btn {\n  background-color: #CCFFCC;\n  box-shadow: 4px 4px #71c971;\n}\n.submit-buttons #pin-it-btn:hover {\n  background-color: #71c971;\n  box-shadow: 4px 4px #519251;\n}\n.submit-buttons #maybe-later-btn {\n  background-color: #f99584;\n  box-shadow: 4px 4px #EF7A85;\n}\n.submit-buttons #maybe-later-btn:hover:before {\n  content: "";\n  position: absolute;\n  top: 0;\n  right: -6px;\n  border-right: 13px solid #ad5962;\n  width: 3px;\n  transform: rotate(90deg);\n}\n.submit-buttons #maybe-later-btn:hover {\n  background-color: #EF7A85;\n  box-shadow: 4px 4px #ad5962;\n}\n\nhr {\n  border: none;\n  height: 1px;\n  background-color: black;\n}\n\nfooter {\n  padding: 25px;\n  font-size: 1.2em;\n  text-align: center;\n}\nfooter .fa-github {\n  color: black;\n  border: none;\n  text-decoration: none;\n}\nfooter .fa-github:hover {\n  cursor: pointer;\n  color: rgba(0, 0, 0, 0.5);\n}/*# sourceMappingURL=styles.css.map */'],sourceRoot:""}]);const m=d},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,i,s){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(o[c]=!0)}for(var u=0;u<e.length;u++){var l=[].concat(e[u]);r&&o[l[0]]||(void 0!==s&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=s),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),i&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=i):l[4]="".concat(i)),t.push(l))}},t}},417:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},354:e=>{e.exports=function(e){var t=e[1],n=e[3];if(!n)return t;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),s="/*# ".concat(i," */");return[t].concat([s]).join("\n")}return[t].join("\n")}},72:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var s={},o=[],a=0;a<e.length;a++){var c=e[a],u=r.base?c[0]+r.base:c[0],l=s[u]||0,h="".concat(u," ").concat(l);s[u]=l+1;var d=n(h),f={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==d)t[d].references++,t[d].updater(f);else{var p=i(f,r);r.byIndex=a,t.splice(a,0,{identifier:h,updater:p,references:1})}o.push(h)}return o}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var s=r(e=e||[],i=i||{});return function(e){e=e||[];for(var o=0;o<s.length;o++){var a=n(s[o]);t[a].references--}for(var c=r(e,i),u=0;u<s.length;u++){var l=n(s[u]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}s=c}}},659:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},42:(e,t,n)=>{e.exports=n.p+"250d3d7d988ca03c896f.otf"},591:(e,t,n)=>{e.exports=n.p+"37ba7b97b787337ddeb5.jpg"},619:(e,t,n)=>{e.exports=n.p+"1c224135b933d6de3ee1.png"}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={id:r,exports:{}};return e[r](s,s.exports,n),s.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var i=r.length-1;i>-1&&(!e||!/^http(s?):/.test(e));)e=r[i--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.b=document.baseURI||self.location.href,n.nc=void 0;const r={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function i(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const s={date:i({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:i({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:i({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},o={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function a(e){return(t,n)=>{let r;if("formatting"===(n?.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,i=n?.width?String(n.width):t;r=e.formattingValues[i]||e.formattingValues[t]}else{const t=e.defaultWidth,i=n?.width?String(n.width):e.defaultWidth;r=e.values[i]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}const c={ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:a({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:a({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:a({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:a({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:a({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function u(e){return(t,n={})=>{const r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(i);if(!s)return null;const o=s[0],a=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(a)?function(e){for(let t=0;t<e.length;t++)if(e[t].test(o))return t}(a):function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&e[t].test(o))return t}(a);let u;return u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u,{value:u,rest:t.slice(o.length)}}}const l={ordinalNumber:(h={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},(e,t={})=>{const n=e.match(h.matchPattern);if(!n)return null;const r=n[0],i=e.match(h.parsePattern);if(!i)return null;let s=h.valueCallback?h.valueCallback(i[0]):i[0];return s=t.valueCallback?t.valueCallback(s):s,{value:s,rest:e.slice(r.length)}}),era:u({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:u({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:u({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:u({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:u({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};var h;const d={code:"en-US",formatDistance:(e,t,n)=>{let i;const s=r[e];return i="string"==typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i},formatLong:s,formatRelative:(e,t,n,r)=>o[e],localize:c,match:l,options:{weekStartsOn:0,firstWeekContainsDate:1}};let f={};function p(){return f}Math.pow(10,8);const g=6048e5,m=864e5;function y(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new e.constructor(+e):"number"==typeof e||"[object Number]"===t||"string"==typeof e||"[object String]"===t?new Date(e):new Date(NaN)}function A(e){const t=y(e);return t.setHours(0,0,0,0),t}function v(e){const t=y(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function w(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function b(e){const t=y(e);return function(e,t){const n=A(e),r=A(t),i=+n-v(n),s=+r-v(r);return Math.round((i-s)/m)}(t,function(e){const t=y(e),n=w(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}(t))+1}function C(e,t){const n=p(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=y(e),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function E(e){return C(e,{weekStartsOn:1})}function _(e){const t=y(e),n=t.getFullYear(),r=w(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=E(r),s=w(e,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const o=E(s);return t.getTime()>=i.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function T(e){const t=y(e),n=+E(t)-+function(e){const t=_(e),n=w(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),E(n)}(t);return Math.round(n/g)+1}function I(e,t){const n=y(e),r=n.getFullYear(),i=p(),s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,o=w(e,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const a=C(o,t),c=w(e,0);c.setFullYear(r,0,s),c.setHours(0,0,0,0);const u=C(c,t);return n.getTime()>=a.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function S(e,t){const n=y(e),r=+C(n,t)-+function(e,t){const n=p(),r=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,i=I(e,t),s=w(e,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),C(s,t)}(n,t);return Math.round(r/g)+1}function k(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const x={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return k("yy"===t?r%100:r,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):k(n+1,2)},d:(e,t)=>k(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>k(e.getHours()%12||12,t.length),H:(e,t)=>k(e.getHours(),t.length),m:(e,t)=>k(e.getMinutes(),t.length),s:(e,t)=>k(e.getSeconds(),t.length),S(e,t){const n=t.length,r=e.getMilliseconds();return k(Math.trunc(r*Math.pow(10,n-3)),t.length)}},N={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),r=t>0?t:1-t;return n.ordinalNumber(r,{unit:"year"})}return x.y(e,t)},Y:function(e,t,n,r){const i=I(e,r),s=i>0?i:1-i;return"YY"===t?k(s%100,2):"Yo"===t?n.ordinalNumber(s,{unit:"year"}):k(s,t.length)},R:function(e,t){return k(_(e),t.length)},u:function(e,t){return k(e.getFullYear(),t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return k(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return k(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return x.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return k(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const i=S(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):k(i,t.length)},I:function(e,t,n){const r=T(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):k(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):x.d(e,t)},D:function(e,t,n){const r=b(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):k(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return k(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return k(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return k(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let i;switch(i=12===r?"noon":0===r?"midnight":r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let i;switch(i=r>=17?"evening":r>=12?"afternoon":r>=4?"morning":"night",t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return x.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):x.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):k(r,t.length)},k:function(e,t,n){let r=e.getHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):k(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):x.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):x.s(e,t)},S:function(e,t){return x.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return R(r);case"XXXX":case"XX":return P(r);default:return P(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return R(r);case"xxxx":case"xx":return P(r);default:return P(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+D(r,":");default:return"GMT"+P(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+D(r,":");default:return"GMT"+P(r,":")}},t:function(e,t,n){return k(Math.trunc(e.getTime()/1e3),t.length)},T:function(e,t,n){return k(e.getTime(),t.length)}};function D(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Math.trunc(r/60),s=r%60;return 0===s?n+String(i):n+String(i)+t+k(s,2)}function R(e,t){return e%60==0?(e>0?"-":"+")+k(Math.abs(e)/60,2):P(e,t)}function P(e,t=""){const n=e>0?"-":"+",r=Math.abs(e);return n+k(Math.trunc(r/60),2)+t+k(r%60,2)}const O=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},L=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},M={p:L,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return O(e,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;default:s=t.dateTime({width:"full"})}return s.replace("{{date}}",O(r,t)).replace("{{time}}",L(i,t))}},F=/^D+$/,U=/^Y+$/,V=["D","DD","YY","YYYY"];function B(e){if(!(t=e,t instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t)||"number"==typeof e))return!1;var t;const n=y(e);return!isNaN(Number(n))}const j=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,q=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,z=/^'([^]*?)'?$/,$=/''/g,H=/[a-zA-Z]/;function W(e,t,n){const r=p(),i=n?.locale??r.locale??d,s=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,o=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=y(e);if(!B(a))throw new RangeError("Invalid time value");let c=t.match(q).map((e=>{const t=e[0];return"p"===t||"P"===t?(0,M[t])(e,i.formatLong):e})).join("").match(j).map((e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:K(e)};if(N[t])return{isToken:!0,value:e};if(t.match(H))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}}));i.localize.preprocessor&&(c=i.localize.preprocessor(a,c));const u={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return c.map((r=>{if(!r.isToken)return r.value;const s=r.value;return(!n?.useAdditionalWeekYearTokens&&function(e){return U.test(e)}(s)||!n?.useAdditionalDayOfYearTokens&&function(e){return F.test(e)}(s))&&function(e,t,n){const r=function(e,t,n){const r="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,n);if(console.warn(r),V.includes(e))throw new RangeError(r)}(s,t,String(e)),(0,N[s[0]])(a,s,i.localize,u)})).join("")}function K(e){const t=e.match(z);return t?t[1].replace($,"'"):e}var G=n(72),Q=n.n(G),Y=n(825),X=n.n(Y),J=n(659),Z=n.n(J),ee=n(56),te=n.n(ee),ne=n(540),re=n.n(ne),ie=n(113),se=n.n(ie),oe=n(277),ae={};ae.styleTagTransform=se(),ae.setAttributes=te(),ae.insert=Z().bind(null,"head"),ae.domAPI=X(),ae.insertStyleElement=re(),Q()(oe.A,ae),oe.A&&oe.A.locals&&oe.A.locals;const ce=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ue={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const i=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,c=a?e[t+2]:0,u=i>>2,l=(3&i)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),r.push(n[u],n[l],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ce(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const i=n[e.charAt(t++)],s=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const a=t<e.length?n[e.charAt(t)]:64;if(++t,null==i||null==s||null==o||null==a)throw new le;const c=i<<2|s>>4;if(r.push(c),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class le extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const he=function(e){return function(e){const t=ce(e);return ue.encodeByteArray(t,!0)}(e).replace(/\./g,"")},de=function(e){try{return ue.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},fe=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&de(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},pe=e=>{var t,n;return null===(n=null===(t=fe())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},ge=()=>{var e;return null===(e=fe())||void 0===e?void 0:e.config},me=e=>{var t;return null===(t=fe())||void 0===t?void 0:t[`_${e}`]};class ye{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Ae(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}class ve extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,ve.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,we.prototype.create)}}class we{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(be,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new ve(r,o,n)}}const be=/\{\$([^}]+)}/g;function Ce(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Ee(n)&&Ee(s)){if(!Ce(n,s))return!1}else if(n!==s)return!1}for(const e of r)if(!n.includes(e))return!1;return!0}function Ee(e){return null!==e&&"object"==typeof e}function _e(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Te(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function Ie(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Se{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e){if("object"!=typeof e||null===e)return!1;for(const t of["next","error","complete"])if(t in e&&"function"==typeof e[t])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=ke),void 0===r.error&&(r.error=ke),void 0===r.complete&&(r.complete=ke);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function ke(){}function xe(e){return e&&e._delegate?e._delegate:e}class Ne{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const De="[DEFAULT]";class Re{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new ye;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:De})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=De){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=De){return this.instances.has(e)}getOptions(e=De){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===De?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var r;return n||null}normalizeInstanceIdentifier(e=De){return this.component?this.component.multipleInstances?e:De:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Pe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Re(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Oe=[];var Le;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Le||(Le={}));const Me={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},Fe=Le.INFO,Ue={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},Ve=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=Ue[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class Be{constructor(e){this.name=e,this._logLevel=Fe,this._logHandler=Ve,this._userLogHandler=null,Oe.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?Me[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const je=(e,t)=>t.some((t=>e instanceof t));let qe,ze;const $e=new WeakMap,He=new WeakMap,We=new WeakMap,Ke=new WeakMap,Ge=new WeakMap;let Qe={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return He.get(e);if("objectStoreNames"===t)return e.objectStoreNames||We.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xe(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Ye(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ze||(ze=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(Je(this),e),Xe($e.get(this))}:function(...e){return Xe(t.apply(Je(this),e))}:function(e,...n){const r=t.call(Je(this),e,...n);return We.set(r,e.sort?e.sort():[e]),Xe(r)}:(e instanceof IDBTransaction&&function(e){if(He.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));He.set(e,t)}(e),je(e,qe||(qe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Qe):e);var t}function Xe(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Xe(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&$e.set(t,e)})).catch((()=>{})),Ge.set(t,e),t}(e);if(Ke.has(e))return Ke.get(e);const t=Ye(e);return t!==e&&(Ke.set(e,t),Ge.set(t,e)),t}const Je=e=>Ge.get(e),Ze=["get","getKey","getAll","getAllKeys","count"],et=["put","add","delete","clear"],tt=new Map;function nt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(tt.get(t))return tt.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=et.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Ze.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,i?"readwrite":"readonly");let o=s.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&s.done]))[0]};return tt.set(t,s),s}var rt;rt=Qe,Qe={...rt,get:(e,t,n)=>nt(e,t)||rt.get(e,t,n),has:(e,t)=>!!nt(e,t)||rt.has(e,t)};class it{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const st="@firebase/app",ot="0.10.7",at=new Be("@firebase/app"),ct="@firebase/app-compat",ut="@firebase/analytics-compat",lt="@firebase/analytics",ht="@firebase/app-check-compat",dt="@firebase/app-check",ft="@firebase/auth",pt="@firebase/auth-compat",gt="@firebase/database",mt="@firebase/database-compat",yt="@firebase/functions",At="@firebase/functions-compat",vt="@firebase/installations",wt="@firebase/installations-compat",bt="@firebase/messaging",Ct="@firebase/messaging-compat",Et="@firebase/performance",_t="@firebase/performance-compat",Tt="@firebase/remote-config",It="@firebase/remote-config-compat",St="@firebase/storage",kt="@firebase/storage-compat",xt="@firebase/firestore",Nt="@firebase/vertexai-preview",Dt="@firebase/firestore-compat",Rt="firebase",Pt="[DEFAULT]",Ot={[st]:"fire-core",[ct]:"fire-core-compat",[lt]:"fire-analytics",[ut]:"fire-analytics-compat",[dt]:"fire-app-check",[ht]:"fire-app-check-compat",[ft]:"fire-auth",[pt]:"fire-auth-compat",[gt]:"fire-rtdb",[mt]:"fire-rtdb-compat",[yt]:"fire-fn",[At]:"fire-fn-compat",[vt]:"fire-iid",[wt]:"fire-iid-compat",[bt]:"fire-fcm",[Ct]:"fire-fcm-compat",[Et]:"fire-perf",[_t]:"fire-perf-compat",[Tt]:"fire-rc",[It]:"fire-rc-compat",[St]:"fire-gcs",[kt]:"fire-gcs-compat",[xt]:"fire-fst",[Dt]:"fire-fst-compat",[Nt]:"fire-vertex","fire-js":"fire-js",[Rt]:"fire-js-all"},Lt=new Map,Mt=new Map,Ft=new Map;function Ut(e,t){try{e.container.addComponent(t)}catch(n){at.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Vt(e){const t=e.name;if(Ft.has(t))return at.debug(`There were multiple attempts to register component ${t}.`),!1;Ft.set(t,e);for(const t of Lt.values())Ut(t,e);for(const t of Mt.values())Ut(t,e);return!0}function Bt(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function jt(e){return void 0!==e.settings}const qt=new we("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class zt{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ne("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qt.create("app-deleted",{appName:this._name})}}const $t="10.12.4";function Ht(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const r=Object.assign({name:Pt,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!=typeof i||!i)throw qt.create("bad-app-name",{appName:String(i)});if(n||(n=ge()),!n)throw qt.create("no-options");const s=Lt.get(i);if(s){if(Ce(n,s.options)&&Ce(r,s.config))return s;throw qt.create("duplicate-app",{appName:i})}const o=new Pe(i);for(const e of Ft.values())o.addComponent(e);const a=new zt(n,r,o);return Lt.set(i,a),a}function Wt(e=Pt){const t=Lt.get(e);if(!t&&e===Pt&&ge())return Ht();if(!t)throw qt.create("no-app",{appName:e});return t}function Kt(e,t,n){var r;let i=null!==(r=Ot[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void at.warn(e.join(" "))}Vt(new Ne(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const Gt="firebase-heartbeat-database",Qt=1,Yt="firebase-heartbeat-store";let Xt=null;function Jt(){return Xt||(Xt=function(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=Xe(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(Xe(o.result),e.oldVersion,e.newVersion,Xe(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(Gt,Qt,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Yt)}catch(e){console.warn(e)}}}).catch((e=>{throw qt.create("idb-open",{originalErrorMessage:e.message})}))),Xt}async function Zt(e,t){try{const n=(await Jt()).transaction(Yt,"readwrite"),r=n.objectStore(Yt);await r.put(t,en(e)),await n.done}catch(e){if(e instanceof ve)at.warn(e.message);else{const t=qt.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});at.warn(t.message)}}}function en(e){return`${e.name}!${e.options.appId}`}class tn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new rn(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=nn();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=nn(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),sn(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),sn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=he(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function nn(){return(new Date).toISOString().substring(0,10)}class rn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(e){return!1}}()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Jt()).transaction(Yt),n=await t.objectStore(Yt).get(en(e));return await t.done,n}catch(e){if(e instanceof ve)at.warn(e.message);else{const t=qt.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});at.warn(t.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Zt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Zt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function sn(e){return he(JSON.stringify({version:2,heartbeats:e})).length}Vt(new Ne("platform-logger",(e=>new it(e)),"PRIVATE")),Vt(new Ne("heartbeat",(e=>new tn(e)),"PRIVATE")),Kt(st,ot,""),Kt(st,ot,"esm2017"),Kt("fire-js",""),Kt("firebase","10.12.4","app");var on,an,cn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},un={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"==typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e){var t=i;return Object.prototype.hasOwnProperty.call(t,e)?t[e]:t[e]=function(e){return new r([0|e],0>e?-1:0)}(e)}(e):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),c=s(1),u=s(16777216);function l(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(c)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function g(e,t){this.g=e,this.h=t}function m(e,t){if(l(t))throw Error("division by zero");if(l(e))return new g(a,a);if(h(e))return t=m(d(e),t),new g(d(t.g),d(t.h));if(h(t))return t=m(e,d(t)),new g(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=c,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=A(n,1),s=A(r,1);for(r=A(r,2),n=A(n,2);!l(r);){var u=s.add(r);0>=u.l(e)&&(i=i.add(n),s=u),r=A(r,1),n=A(n,1)}return t=f(e,i.j(t)),new g(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),u=(s=o(n)).j(t);h(u)||0<u.l(e);)u=(s=o(n-=r)).j(t);l(s)&&(s=c),i=i.add(s),e=f(e,u)}return new g(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function A(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(l(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=m(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(l(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:l(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(l(this)||l(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(u)&&0>e.l(u))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var c=this.i(i)>>>16,f=65535&this.i(i),g=e.i(s)>>>16,m=65535&e.i(s);n[2*i+2*s]+=f*m,p(n,2*i+2*s),n[2*i+2*s+1]+=c*m,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*g,p(n,2*i+2*s+1),n[2*i+2*s+2]+=c*g,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return m(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,an=un.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var c=Math.min(8,t.length-s),u=parseInt(t.substring(s,s+c),n);8>c?(c=o(Math.pow(n,c)),i=i.j(c).add(o(u))):i=(i=i.j(r)).add(o(u))}return i},on=un.Integer=r}).apply(void 0!==cn?cn:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var ln,hn,dn,fn,pn,gn,mn,yn,An,vn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},wn={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof vn&&vn];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(0,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function c(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function u(e,t,n){return(u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:c).apply(null,arguments)}function l(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let t=1;t<arguments.length;t++){const n=arguments[t];if(s(n)){const t=e.length||0,r=n.length||0;e.length=t+r;for(let i=0;i<r;i++)e[t+i]=n[i]}else e.push(n)}}function p(e){return/^[\s\xa0]*$/.test(e)}function g(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function m(e){return m[" "](e),e}m[" "]=function(){};var y=!(-1==g().indexOf("Gecko")||-1!=g().toLowerCase().indexOf("webkit")&&-1==g().indexOf("Edge")||-1!=g().indexOf("Trident")||-1!=g().indexOf("MSIE")||-1!=g().indexOf("Edge"));function A(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function v(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function C(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function E(e){i.setTimeout((()=>{throw e}),0)}function _(){var e=x;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var T=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new I),(e=>e.reset()));class I{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let S,k=!1,x=new class{constructor(){this.h=this.g=null}add(e,t){const n=T.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},N=()=>{const e=i.Promise.resolve(void 0);S=()=>{e.then(D)}};var D=()=>{for(var e;e=_();){try{e.h.call(e.g)}catch(e){E(e)}var t=T;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}k=!1};function R(){this.s=this.s,this.C=this.C}function P(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},P.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(e){}return e}();function L(e,t){if(P.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{m(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:M[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&L.aa.h.call(this)}}h(L,P);var M={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),U=0;function V(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++U,this.da=this.fa=!1}function B(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function j(e){this.src=e,this.g={},this.h=0}function q(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(B(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function z(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}j.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=z(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new V(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var $="closure_lm_"+(1e6*Math.random()|0),H={};function W(e,t,n,r,i){if(r&&r.once)return G(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);return null}return n=te(n),e&&e[F]?e.K(t,n,o(r)?!!r.capture:!!r,i):K(e,t,n,!1,r,i)}function K(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,c=Z(e);if(c||(e[$]=c=new j(e)),(n=c.add(t,n,r,a,s)).proxy)return n;if(r=function(){const e=J;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)O||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(X(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function G(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)G(e,t[s],n,r,i);return null}return n=te(n),e&&e[F]?e.L(t,n,o(r)?!!r.capture:!!r,i):K(e,t,n,!0,r,i)}function Q(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=te(n),e&&e[F]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=z(s=e.g[t],n,r,i))&&(B(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=z(t,n,r,i)),(n=-1<e?t[e]:null)&&Y(n))}function Y(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[F])q(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(X(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(q(n,e),0==n.h&&(n.src=null,t[$]=null)):B(e)}}}function X(e){return e in H?H[e]:H[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new L(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Y(e),e=n.call(r,t)}return e}function Z(e){return(e=e[$])instanceof j?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"==typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){R.call(this),this.i=new j(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"==typeof t)t=new P(t,e);else if(t instanceof P)t.target=t.target||e;else{var i=t;b(t=new P(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ie(o,r,!0,t)&&i}if(i=ie(o=t.g=e,r,!0,t)&&i,i=ie(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(o=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,c=o.ha||o.src;o.fa&&q(e.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"==typeof e)n&&(e=u(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=u(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function oe(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,oe(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,R),ne.prototype[F]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Q(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)B(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends R{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ce(e){R.call(this),this.h=e,this.g={}}h(ce,R);var ue=[];function le(e){A(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Y(e)}),e),e.g={}}ce.prototype.N=function(){ce.aa.N.call(this),le(this)},ce.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=i.JSON.stringify,de=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function ge(e){return e.h||(e.h=e.i())}function me(){}pe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ae(){P.call(this,"d")}function ve(){P.call(this,"c")}h(Ae,P),h(ve,P);var we={},be=null;function Ce(){return be=be||new ne}function Ee(e){P.call(this,we.La,e)}function _e(e){const t=Ce();re(t,new Ee(t))}function Te(e,t){P.call(this,we.STAT_EVENT,e),this.stat=t}function Ie(e){const t=Ce();re(t,new Te(t,e))}function Se(e,t){P.call(this,we.Ma,e),this.size=t}function ke(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function xe(){this.g=!0}function Ne(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return he(n)}catch(e){return t}}(e,n)+(r?" "+r:"")}))}we.La="serverreachability",h(Ee,P),we.STAT_EVENT="statevent",h(Te,P),we.Ma="timingevent",h(Se,P),xe.prototype.xa=function(){this.g=!1},xe.prototype.info=function(){};var De,Re={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Oe(){}function Le(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new ce(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Me}function Me(){this.i=null,this.g="",this.h=!1}h(Oe,pe),Oe.prototype.g=function(){return new XMLHttpRequest},Oe.prototype.i=function(){return{}},De=new Oe;var Fe={},Ue={};function Ve(e,t,n){e.L=1,e.v=ht(ot(t)),e.m=n,e.P=!0,Be(e,null)}function Be(e,t){e.F=Date.now(),ze(e),e.A=ot(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Tt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Me,e.g=_n(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(u(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ue[0]=i.toString()),i=ue);for(var s=0;s<i.length;s++){var o=W(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?v(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),_e(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+u+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function je(e){return!!e.g&&"GET"==e.u&&2!=e.L&&e.j.Ca}function qe(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ue:(n=Number(t.substring(n,r)),isNaN(n)?Fe:(r+=1)+n>t.length?Ue:(t=t.slice(r,r+n),e.C=r+n,t))}function ze(e){e.S=Date.now()+e.I,$e(e,e.I)}function $e(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=ke(u(e.ba,e),t)}function He(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function We(e){0==e.j.G||e.J||cn(e.j,e)}function Ke(e){He(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,le(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ge(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Yt(n)}rn(n),Ie(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=ke(u(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(e){}n.ca=void 0}}else bn(n,11)}else if((e.K||n.g==e)&&an(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.T=u[0],u=u[1],2==n.G)if("c"==u[0]){n.K=u[1],n.ia=u[2];const t=u[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=u[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const l=u[5];null!=l&&"number"==typeof l&&0<l&&(r=1.5*l,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,lt(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=En(r,r.J?r.ia:null,r.W),o.K){tt(r.h,o);var a=o,c=r.L;c&&(a.I=c),a.B&&(He(a),ze(a)),r.g=o}else nn(r);0<n.i.length&&Jt(n)}else"stop"!=u[0]&&"close"!=u[0]||bn(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?bn(n,7):Qt(n):"noop"!=u[0]&&n.l&&n.l.ta(u),n.v=0)}_e()}catch(e){}}Le.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Ht(e)?t.j():this.Y(e)},Le.prototype.Y=function(e){try{if(e==this.g)e:{const d=Ht(this.g);var t=this.g.Ba();if(this.g.Z(),!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Wt(this.g)))){this.J||4!=d||7==t||_e(),He(this);var n=this.g.Z();this.X=n;t:if(je(this)){var r=Wt(this.g);e="";var s=r.length,o=4==Ht(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ke(this),We(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var c,u=this.g;if((c=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(c)){var l=c;break t}}l=null}if(!(n=l)){this.o=!1,this.s=3,Ie(12),Ke(this),We(this);break e}Ne(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ge(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=qe(this,a),e==Ue){4==d&&(this.s=4,Ie(14),n=!1),Ne(this.i,this.l,null,"[Incomplete Response]");break}if(e==Fe){this.s=4,Ie(15),Ne(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Ne(this.i,this.l,e,null),Ge(this,e)}if(je(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,Ie(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),sn(h),h.M=!0,Ie(11))}}else Ne(this.i,this.l,a,"[Invalid Chunked Response]"),Ke(this),We(this)}else Ne(this.i,this.l,a,null),Ge(this,a);4==d&&Ke(this),this.o&&!this.J&&(4==d?cn(this.j,this):(this.o=!1,ze(this)))}else(function(e){const t={};e=(e.g&&2<=Ht(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=C(e[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Ie(12)):(this.s=0,Ie(13)),Ke(this),We(this)}}}catch(e){}},Le.prototype.cancel=function(){this.J=!0,Ke(this)},Le.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(_e(),Ie(17)),Ke(this),this.s=2,We(this)):$e(this,this.S-e)};var Qe=class{constructor(e,t){this.g=e,this.map=t}};function Ye(e){this.l=e||10,e=i.PerformanceNavigationTiming?0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(s(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Ye.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,ct(this,e.s),this.l=e.l;var t=e.i,n=new bt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ut(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),ct(this,t[4]),this.l=dt(t[5]||"",!0),ut(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new bt(null,this.h))}function ot(e){return new st(e)}function at(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ct(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ut(e,t,n){t instanceof bt?(e.i=t,function(e,t){t&&!e.j&&(Ct(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Et(this,t),Tt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,vt)),e.i=new bt(t,e.h))}function lt(e,t,n){e.i.set(t,n)}function ht(e){return lt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,mt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,mt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?At:yt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,wt)),e.join("")};var gt,mt=/[#\/\?@]/g,yt=/[#\?:]/g,At=/[#\?]/g,vt=/[#\?@]/g,wt=/#/g;function bt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ct(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Et(e,t){Ct(e),t=It(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function _t(e,t){return Ct(e),t=It(e,t),e.g.has(t)}function Tt(e,t,n){Et(e,t),0<n.length&&(e.i=null,e.g.set(It(e,t),d(n)),e.h+=n.length)}function It(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function St(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(e){}}function kt(){this.g=new fe}function xt(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;o(e)&&(i=he(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function Nt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Dt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Rt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Pt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Ot(e)}function Ot(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Lt(e){let t="";return A(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Mt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Lt(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):lt(e,t,n))}function Ft(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=bt.prototype).add=function(e,t){Ct(this),this.i=null,e=It(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Ct(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){Ct(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){Ct(this);let t=[];if("string"==typeof e)_t(this,e)&&(t=t.concat(this.g.get(It(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Ct(this),this.i=null,_t(this,e=It(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},h(Nt,pe),Nt.prototype.g=function(){return new Dt(this.l,this.j)},Nt.prototype.i=(gt={},function(){return gt}),h(Dt,ne),(e=Dt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Ot(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ot(this)),this.g&&(this.readyState=3,Ot(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Pt(this):Ot(this),3==this.readyState&&Rt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Pt(this))},e.Qa=function(e){this.g&&(this.response=e,Pt(this))},e.ga=function(){this.g&&Pt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Dt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Ft,ne);var Ut=/^https?$/i,Vt=["POST","PUT"];function Bt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,jt(e),zt(e)}function jt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function qt(e){if(e.h&&void 0!==r&&(!e.v[1]||4!=Ht(e)||2!=e.Z()))if(e.u&&4==Ht(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==Ht(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(it)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!Ut.test(o?o.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<Ht(e)?e.g.statusText:""}catch(e){a=""}e.l=a+" ["+e.Z()+"]",jt(e)}}finally{zt(e)}}}function zt(e,t){if(e.g){$t(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function $t(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Ht(e){return e.g?e.g.readyState:0}function Wt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Kt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Gt(e){this.Aa=0,this.i=[],this.j=new xe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Kt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Kt("baseRetryDelayMs",5e3,e),this.cb=Kt("retryDelaySeedMs",1e4,e),this.Wa=Kt("forwardChannelMaxRetries",2,e),this.wa=Kt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ye(e&&e.concurrentRequestLimit),this.Da=new kt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Qt(e){if(Xt(e),3==e.G){var t=e.U++,n=ot(e.I);if(lt(n,"SID",e.K),lt(n,"RID",t),lt(n,"TYPE","terminate"),en(e,n),(t=new Le(e,e.j,t)).L=2,t.v=ht(ot(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(e){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=_n(t.j,null),t.g.ea(t.v)),t.F=Date.now(),ze(t)}Cn(e)}function Yt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Xt(e){Yt(e),e.u&&(i.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"==typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Jt(e){if(!Xe(e.h)&&!e.s){e.s=!0;var t=e.Ga;S||N(),k||(S(),k=!0),x.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=ot(e.I);lt(r,"SID",e.K),lt(r,"RID",n),lt(r,"AID",e.T),en(e,r),e.m&&e.o&&Mt(r,e.m,e.o),n=new Le(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ve(n,r,t)}function en(e,t){e.H&&A(e.H,(function(e,n){lt(t,n,e)})),e.l&&rt({},(function(e,n){lt(t,n,e)}))}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?u(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{xt(a,e,"req"+n+"_")}catch(e){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;S||N(),k||(S(),k=!0),x.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v||(e.Y++,e.u=ke(u(e.Fa,e),un(e,e.v)),e.v++,0))}function sn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function on(e){e.g=new Le(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);lt(t,"RID","rpc"),lt(t,"SID",e.K),lt(t,"AID",e.T),lt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&lt(t,"TO",e.ja),lt(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Mt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ht(ot(t)),n.m=null,n.P=!0,Be(n,e)}function an(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function cn(e,t){var n=null;if(e.g==t){an(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Ce(),new Se(r,n)),Jt(e)}else nn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0)||(e.s?(e.i=t.D.concat(e.i),0):1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa)||(e.s=ke(u(e.Ga,e,t),un(e,e.B)),e.B++,0)))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:bn(e,5);break;case 4:bn(e,10);break;case 3:bn(e,6);break;default:bn(e,2)}}function un(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function bn(e,t){if(e.j.info("Error code "+t),2==t){var n=u(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),ht(r),t?function(e,t){const n=new xe;if(i.Image){const r=new Image;r.onload=l(St,n,"TestLoadImage: loaded",!0,t,r),r.onerror=l(St,n,"TestLoadImage: error",!1,t,r),r.onabort=l(St,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=l(St,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new xe;const n=new AbortController,r=setTimeout((()=>{n.abort(),St(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?St(0,0,!0,t):St(0,0,!1,t)})).catch((()=>{clearTimeout(r),St(0,0,!1,t)}))}(r.toString(),n)}else Ie(2);e.G=0,e.l&&e.l.sa(t),Cn(e),Xt(e)}function Cn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function En(e,t,n){var r=n instanceof st?ot(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ct(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);r&&at(o,r),t&&(o.g=t),s&&ct(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&lt(r,n,t),lt(r,"VER",e.la),en(e,r),r}function _n(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Ft(new Nt({eb:n})):new Ft(e.pa)).Ha(e.J),t}function Tn(){}function In(){}function Sn(e,t){ne.call(this),this.g=new Gt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new Nn(this)}function kn(e){Ae.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function xn(){ve.call(this),this.status=1}function Nn(e){this.g=e}(e=Ft.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():De.g(),this.v=this.o?ge(this.o):ge(De),this.g.onreadystatechange=u(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(e){return void Bt(this,e)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Vt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[e,t]of n)this.g.setRequestHeader(e,t);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$t(this),this.u=!0,this.g.send(e),this.u=!1}catch(e){Bt(this,e)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),zt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zt(this,!0)),Ft.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?qt(this):this.bb())},e.bb=function(){qt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Ht(this)?this.g.status:-1}catch(e){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(e=Gt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ie(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=En(this,null,this.W),Jt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Le(this,this.j,e);let s=this.o;if(this.S&&(s?(s=v(s),b(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,i,t),lt(n=ot(this.I),"RID",e),lt(n,"CVER",22),this.D&&lt(n,"X-HTTP-Session-Id",this.D),en(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Lt(s)))+"&"+t:this.m&&Mt(n,this.m,s)),et(this.h,i),this.Ua&&lt(n,"TYPE","init"),this.P?(lt(n,"$req",t),lt(n,"SID","null"),i.T=!0,Ve(i,n,null)):Ve(i,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Xe(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,on(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=ke(u(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ie(10),Yt(this),on(this))},e.Za=function(){null!=this.C&&(this.C=null,Yt(this),rn(this),Ie(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ie(2)):(this.j.info("Failed to ping google.com"),Ie(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=Tn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},In.prototype.g=function(e,t){return new Sn(e,t)},h(Sn,ne),Sn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Sn.prototype.close=function(){Qt(this.g)},Sn.prototype.o=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new Qe(t.Ya++,e)),3==t.G&&Jt(t)},Sn.prototype.N=function(){this.g.l=null,delete this.j,Qt(this.g),delete this.g,Sn.aa.N.call(this)},h(kn,Ae),h(xn,ve),h(Nn,Tn),Nn.prototype.ua=function(){re(this.g,"a")},Nn.prototype.ta=function(e){re(this.g,new kn(e))},Nn.prototype.sa=function(e){re(this.g,new xn)},Nn.prototype.ra=function(){re(this.g,"b")},In.prototype.createWebChannel=In.prototype.g,Sn.prototype.send=Sn.prototype.o,Sn.prototype.open=Sn.prototype.m,Sn.prototype.close=Sn.prototype.close,An=wn.createWebChannelTransport=function(){return new In},yn=wn.getStatEventTarget=function(){return Ce()},mn=wn.Event=we,gn=wn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Re.NO_ERROR=0,Re.TIMEOUT=8,Re.HTTP_ERROR=6,pn=wn.ErrorCode=Re,Pe.COMPLETE="complete",fn=wn.EventType=Pe,me.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,dn=wn.WebChannel=me,hn=wn.FetchXmlHttpFactory=Nt,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,ln=wn.XhrIo=Ft}).apply(void 0!==vn?vn:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});const bn="@firebase/firestore";class Cn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Cn.UNAUTHENTICATED=new Cn(null),Cn.GOOGLE_CREDENTIALS=new Cn("google-credentials-uid"),Cn.FIRST_PARTY=new Cn("first-party-uid"),Cn.MOCK_USER=new Cn("mock-user");let En="10.12.3";const _n=new Be("@firebase/firestore");function Tn(){return _n.logLevel}function In(e,...t){if(_n.logLevel<=Le.DEBUG){const n=t.map(xn);_n.debug(`Firestore (${En}): ${e}`,...n)}}function Sn(e,...t){if(_n.logLevel<=Le.ERROR){const n=t.map(xn);_n.error(`Firestore (${En}): ${e}`,...n)}}function kn(e,...t){if(_n.logLevel<=Le.WARN){const n=t.map(xn);_n.warn(`Firestore (${En}): ${e}`,...n)}}function xn(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Nn(e="Unexpected state"){const t=`FIRESTORE (${En}) INTERNAL ASSERTION FAILED: `+e;throw Sn(t),new Error(t)}function Dn(e,t){e||Nn()}function Rn(e,t){return e}const Pn={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class On extends ve{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ln{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Mn{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Fn{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Cn.UNAUTHENTICATED)))}shutdown(){}}class Un{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Vn{constructor(e){this.t=e,this.currentUser=Cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Ln;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Ln,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{In("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(In("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Ln)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(In("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Dn("string"==typeof t.accessToken),new Mn(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Dn(null===e||"string"==typeof e),new Cn(e)}}class Bn{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Cn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class jn{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Bn(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Cn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class qn{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zn{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&In("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,In("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{In("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):In("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Dn("string"==typeof e.token),this.R=e.token,new qn(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function $n(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}class Hn{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=$n(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Wn(e,t){return e<t?-1:e>t?1:0}function Kn(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}class Gn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new On(Pn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new On(Pn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new On(Pn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new On(Pn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Gn.fromMillis(Date.now())}static fromDate(e){return Gn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Gn(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Wn(this.nanoseconds,e.nanoseconds):Wn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Qn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Qn(e)}static min(){return new Qn(new Gn(0,0))}static max(){return new Qn(new Gn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Yn{constructor(e,t,n){void 0===t?t=0:t>e.length&&Nn(),void 0===n?n=e.length-t:n>e.length-t&&Nn(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Yn.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Yn?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Xn extends Yn{construct(e,t,n){return new Xn(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new On(Pn.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new Xn(t)}static emptyPath(){return new Xn([])}}const Jn=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zn extends Yn{construct(e,t,n){return new Zn(e,t,n)}static isValidIdentifier(e){return Jn.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Zn(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new On(Pn.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new On(Pn.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new On(Pn.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new On(Pn.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zn(t)}static emptyPath(){return new Zn([])}}class er{constructor(e){this.path=e}static fromPath(e){return new er(Xn.fromString(e))}static fromName(e){return new er(Xn.fromString(e).popFirst(5))}static empty(){return new er(Xn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Xn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Xn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new er(new Xn(e.slice()))}}function tr(e){return new nr(e.readTime,e.key,-1)}class nr{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new nr(Qn.min(),er.empty(),-1)}static max(){return new nr(Qn.max(),er.empty(),-1)}}function rr(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=er.comparator(e.documentKey,t.documentKey),0!==n?n:Wn(e.largestBatchId,t.largestBatchId))}const ir="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sr{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function or(e){if(e.code!==Pn.FAILED_PRECONDITION||e.message!==ir)throw e;In("LocalStore","Unexpectedly lost primary lease")}class ar{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Nn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ar(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ar?t:ar.resolve(t)}catch(e){return ar.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ar.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ar.reject(t)}static resolve(e){return new ar(((t,n)=>{t(e)}))}static reject(e){return new ar(((t,n)=>{n(e)}))}static waitFor(e){return new ar(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=ar.resolve(!1);for(const n of e)t=t.next((e=>e?ar.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new ar(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const c=a;t(e[c]).next((e=>{s[c]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new ar(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function cr(e){return"IndexedDbTransactionError"===e.name}class ur{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function lr(e){return null==e}function hr(e){return 0===e&&1/e==-1/0}ur.oe=-1;function dr(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function fr(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function pr(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class gr{constructor(e,t){this.comparator=e,this.root=t||yr.EMPTY}insert(e,t){return new gr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,yr.BLACK,null,null))}remove(e){return new gr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mr(this.root,e,this.comparator,!1)}getReverseIterator(){return new mr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mr(this.root,e,this.comparator,!0)}}class mr{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yr{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:yr.RED,this.left=null!=r?r:yr.EMPTY,this.right=null!=i?i:yr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new yr(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return yr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return yr.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Nn();if(this.right.isRed())throw Nn();const e=this.left.check();if(e!==this.right.check())throw Nn();return e+(this.isRed()?0:1)}}yr.EMPTY=null,yr.RED=!0,yr.BLACK=!1,yr.EMPTY=new class{constructor(){this.size=0}get key(){throw Nn()}get value(){throw Nn()}get color(){throw Nn()}get left(){throw Nn()}get right(){throw Nn()}copy(e,t,n,r,i){return this}insert(e,t,n){return new yr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ar{constructor(e){this.comparator=e,this.data=new gr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new vr(this.data.getIterator())}getIteratorFrom(e){return new vr(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Ar))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ar(this.comparator);return t.data=e,t}}class vr{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class wr{constructor(e){this.fields=e,e.sort(Zn.comparator)}static empty(){return new wr([])}unionWith(e){let t=new Ar(Zn.comparator);for(const e of this.fields)t=t.add(e);for(const n of e)t=t.add(n);return new wr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Kn(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class br extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Cr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new br("Invalid base64 string: "+e):e}}(e);return new Cr(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Cr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Wn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Cr.EMPTY_BYTE_STRING=new Cr("");const Er=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _r(e){if(Dn(!!e),"string"==typeof e){let t=0;const n=Er.exec(e);if(Dn(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Tr(e.seconds),nanos:Tr(e.nanos)}}function Tr(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Ir(e){return"string"==typeof e?Cr.fromBase64String(e):Cr.fromUint8Array(e)}function Sr(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function kr(e){const t=e.mapValue.fields.__previous_value__;return Sr(t)?kr(t):t}function xr(e){const t=_r(e.mapValue.fields.__local_write_time__.timestampValue);return new Gn(t.seconds,t.nanos)}class Nr{constructor(e,t,n,r,i,s,o,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class Dr{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Dr("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Dr&&e.projectId===this.projectId&&e.database===this.database}}const Rr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Pr(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Sr(e)?4:Wr(e)?9007199254740991:10:Nn()}function Or(e,t){if(e===t)return!0;const n=Pr(e);if(n!==Pr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return xr(e).isEqual(xr(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=_r(e.timestampValue),r=_r(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Ir(e.bytesValue).isEqual(Ir(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Tr(e.geoPointValue.latitude)===Tr(t.geoPointValue.latitude)&&Tr(e.geoPointValue.longitude)===Tr(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Tr(e.integerValue)===Tr(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Tr(e.doubleValue),r=Tr(t.doubleValue);return n===r?hr(n)===hr(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Kn(e.arrayValue.values||[],t.arrayValue.values||[],Or);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(dr(n)!==dr(r))return!1;for(const e in n)if(n.hasOwnProperty(e)&&(void 0===r[e]||!Or(n[e],r[e])))return!1;return!0}(e,t);default:return Nn()}}function Lr(e,t){return void 0!==(e.values||[]).find((e=>Or(e,t)))}function Mr(e,t){if(e===t)return 0;const n=Pr(e),r=Pr(t);if(n!==r)return Wn(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Wn(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Tr(e.integerValue||e.doubleValue),r=Tr(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Fr(e.timestampValue,t.timestampValue);case 4:return Fr(xr(e),xr(t));case 5:return Wn(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Ir(e),r=Ir(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let e=0;e<n.length&&e<r.length;e++){const t=Wn(n[e],r[e]);if(0!==t)return t}return Wn(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Wn(Tr(e.latitude),Tr(t.latitude));return 0!==n?n:Wn(Tr(e.longitude),Tr(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){const t=Mr(n[e],r[e]);if(t)return t}return Wn(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Rr.mapValue&&t===Rr.mapValue)return 0;if(e===Rr.mapValue)return 1;if(t===Rr.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let e=0;e<r.length&&e<s.length;++e){const t=Wn(r[e],s[e]);if(0!==t)return t;const o=Mr(n[r[e]],i[s[e]]);if(0!==o)return o}return Wn(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Nn()}}function Fr(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Wn(e,t);const n=_r(e),r=_r(t),i=Wn(n.seconds,r.seconds);return 0!==i?i:Wn(n.nanos,r.nanos)}function Ur(e){return Vr(e)}function Vr(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=_r(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Ir(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return er.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Vr(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Vr(e.fields[i])}`;return n+"}"}(e.mapValue):Nn()}function Br(e){return!!e&&"integerValue"in e}function jr(e){return!!e&&"arrayValue"in e}function qr(e){return!!e&&"nullValue"in e}function zr(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function $r(e){return!!e&&"mapValue"in e}function Hr(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return fr(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Hr(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Hr(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Wr(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class Kr{constructor(e){this.value=e}static empty(){return new Kr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!$r(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hr(t)}setAll(e){let t=Zn.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Hr(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());$r(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Or(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];$r(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){fr(t,((t,n)=>e[t]=n));for(const t of n)delete e[t]}clone(){return new Kr(Hr(this.value))}}function Gr(e){const t=[];return fr(e.fields,((e,n)=>{const r=new Zn([e]);if($r(n)){const e=Gr(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new wr(t)}class Qr{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Qr(e,0,Qn.min(),Qn.min(),Qn.min(),Kr.empty(),0)}static newFoundDocument(e,t,n,r){return new Qr(e,1,t,Qn.min(),n,r,0)}static newNoDocument(e,t){return new Qr(e,2,t,Qn.min(),Qn.min(),Kr.empty(),0)}static newUnknownDocument(e,t){return new Qr(e,3,t,Qn.min(),Qn.min(),Kr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Qn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Qn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Qr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Yr{constructor(e,t){this.position=e,this.inclusive=t}}function Xr(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?er.comparator(er.fromName(o.referenceValue),n.key):Mr(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Jr(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Or(e.position[n],t.position[n]))return!1;return!0}class Zr{constructor(e,t="asc"){this.field=e,this.dir=t}}function ei(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class ti{}class ni extends ti{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new ui(e,t,n):"array-contains"===t?new fi(e,n):"in"===t?new pi(e,n):"not-in"===t?new gi(e,n):"array-contains-any"===t?new mi(e,n):new ni(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new li(e,n):new hi(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Mr(t,this.value)):null!==t&&Pr(this.value)===Pr(t)&&this.matchesComparison(Mr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Nn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ri extends ti{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new ri(e,t)}matches(e){return ii(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ii(e){return"and"===e.op}function si(e){return function(e){for(const t of e.filters)if(t instanceof ri)return!1;return!0}(e)&&ii(e)}function oi(e){if(e instanceof ni)return e.field.canonicalString()+e.op.toString()+Ur(e.value);if(si(e))return e.filters.map((e=>oi(e))).join(",");{const t=e.filters.map((e=>oi(e))).join(",");return`${e.op}(${t})`}}function ai(e,t){return e instanceof ni?function(e,t){return t instanceof ni&&e.op===t.op&&e.field.isEqual(t.field)&&Or(e.value,t.value)}(e,t):e instanceof ri?function(e,t){return t instanceof ri&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&ai(n,t.filters[r])),!0)}(e,t):void Nn()}function ci(e){return e instanceof ni?function(e){return`${e.field.canonicalString()} ${e.op} ${Ur(e.value)}`}(e):e instanceof ri?function(e){return e.op.toString()+" {"+e.getFilters().map(ci).join(" ,")+"}"}(e):"Filter"}class ui extends ni{constructor(e,t,n){super(e,t,n),this.key=er.fromName(n.referenceValue)}matches(e){const t=er.comparator(e.key,this.key);return this.matchesComparison(t)}}class li extends ni{constructor(e,t){super(e,"in",t),this.keys=di(0,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class hi extends ni{constructor(e,t){super(e,"not-in",t),this.keys=di(0,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function di(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>er.fromName(e.referenceValue)))}class fi extends ni{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return jr(t)&&Lr(t.arrayValue,this.value)}}class pi extends ni{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Lr(this.value.arrayValue,t)}}class gi extends ni{constructor(e,t){super(e,"not-in",t)}matches(e){if(Lr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Lr(this.value.arrayValue,t)}}class mi extends ni{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!jr(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Lr(this.value.arrayValue,e)))}}class yi{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ue=null}}function Ai(e,t=null,n=[],r=[],i=null,s=null,o=null){return new yi(e,t,n,r,i,s,o)}function vi(e){const t=Rn(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>oi(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),lr(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Ur(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Ur(e))).join(",")),t.ue=e}return t.ue}function wi(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ei(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!ai(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Jr(e.startAt,t.startAt)&&Jr(e.endAt,t.endAt)}function bi(e){return er.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Ci{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Ei(e){return new Ci(e)}function _i(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Ti(e){const t=Rn(e);if(null===t.ce){t.ce=[];const e=new Set;for(const n of t.explicitOrderBy)t.ce.push(n),e.add(n.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Ar(Zn.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new Zr(r,n))})),e.has(Zn.keyField().canonicalString())||t.ce.push(new Zr(Zn.keyField(),n))}return t.ce}function Ii(e){const t=Rn(e);return t.le||(t.le=function(e,t){if("F"===e.limitType)return Ai(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Zr(e.field,t)}));const n=e.endAt?new Yr(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Yr(e.startAt.position,e.startAt.inclusive):null;return Ai(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}(t,Ti(e))),t.le}function Si(e,t,n){return new Ci(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ki(e,t){return wi(Ii(e),Ii(t))&&e.limitType===t.limitType}function xi(e){return`${vi(Ii(e))}|lt:${e.limitType}`}function Ni(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>ci(e))).join(", ")}]`),lr(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Ur(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Ur(e))).join(",")),`Target(${t})`}(Ii(e))}; limitType=${e.limitType})`}function Di(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):er.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Ti(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Xr(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ti(e),t)||e.endAt&&!function(e,t,n){const r=Xr(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ti(e),t))}(e,t)}function Ri(e){return(t,n)=>{let r=!1;for(const i of Ti(e)){const e=Pi(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Pi(e,t,n){const r=e.field.isKeyField()?er.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Mr(r,i):Nn()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Nn()}}class Oi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[t,r]of n)if(this.equalsFn(t,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){fr(this.inner,((t,n)=>{for(const[t,r]of n)e(t,r)}))}isEmpty(){return pr(this.inner)}size(){return this.innerSize}}const Li=new gr(er.comparator);function Mi(){return Li}const Fi=new gr(er.comparator);function Ui(...e){let t=Fi;for(const n of e)t=t.insert(n.key,n);return t}function Vi(e){let t=Fi;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Bi(){return qi()}function ji(){return qi()}function qi(){return new Oi((e=>e.toString()),((e,t)=>e.isEqual(t)))}const zi=new gr(er.comparator),$i=new Ar(er.comparator);function Hi(...e){let t=$i;for(const n of e)t=t.add(n);return t}const Wi=new Ar(Wn);function Ki(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hr(t)?"-0":t}}function Gi(e){return{integerValue:""+e}}function Qi(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!hr(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}(t)?Gi(t):Ki(e,t)}class Yi{constructor(){this._=void 0}}function Xi(e,t,n){return e instanceof es?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Sr(t)&&(t=kr(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof ts?ns(e,t):e instanceof rs?is(e,t):function(e,t){const n=Zi(e,t),r=os(n)+os(e.Pe);return Br(n)&&Br(e.Pe)?Gi(r):Ki(e.serializer,r)}(e,t)}function Ji(e,t,n){return e instanceof ts?ns(e,t):e instanceof rs?is(e,t):n}function Zi(e,t){return e instanceof ss?function(e){return Br(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class es extends Yi{}class ts extends Yi{constructor(e){super(),this.elements=e}}function ns(e,t){const n=as(t);for(const t of e.elements)n.some((e=>Or(e,t)))||n.push(t);return{arrayValue:{values:n}}}class rs extends Yi{constructor(e){super(),this.elements=e}}function is(e,t){let n=as(t);for(const t of e.elements)n=n.filter((e=>!Or(e,t)));return{arrayValue:{values:n}}}class ss extends Yi{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function os(e){return Tr(e.integerValue||e.doubleValue)}function as(e){return jr(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class cs{constructor(e,t){this.version=e,this.transformResults=t}}class us{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new us}static exists(e){return new us(void 0,e)}static updateTime(e){return new us(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ls(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class hs{}function ds(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Cs(e.key,us.none()):new ys(e.key,e.data,us.none());{const n=e.data,r=Kr.empty();let i=new Ar(Zn.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new As(e.key,r,new wr(i.toArray()),us.none())}}function fs(e,t,n){e instanceof ys?function(e,t,n){const r=e.value.clone(),i=ws(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof As?function(e,t,n){if(!ls(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=ws(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(vs(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function ps(e,t,n,r){return e instanceof ys?function(e,t,n,r){if(!ls(e.precondition,t))return n;const i=e.value.clone(),s=bs(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof As?function(e,t,n,r){if(!ls(e.precondition,t))return n;const i=bs(e.fieldTransforms,r,t),s=t.data;return s.setAll(vs(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return ls(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function gs(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Zi(r.transform,e||null);null!=i&&(null===n&&(n=Kr.empty()),n.set(r.field,i))}return n||null}function ms(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Kn(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof ts&&t instanceof ts||e instanceof rs&&t instanceof rs?Kn(e.elements,t.elements,Or):e instanceof ss&&t instanceof ss?Or(e.Pe,t.Pe):e instanceof es&&t instanceof es}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class ys extends hs{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class As extends hs{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function vs(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function ws(e,t,n){const r=new Map;Dn(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Ji(o,a,n[i]))}return r}function bs(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Xi(e,s,t))}return r}class Cs extends hs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Es extends hs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class _s{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){const r=this.mutations[t];r.key.isEqual(e.key)&&fs(r,e,n[t])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=ps(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=ps(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=ji();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=ds(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Qn.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Hi())}isEqual(e){return this.batchId===e.batchId&&Kn(this.mutations,e.mutations,((e,t)=>ms(e,t)))&&Kn(this.baseMutations,e.baseMutations,((e,t)=>ms(e,t)))}}class Ts{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Dn(e.mutations.length===n.length);let r=zi;const i=e.mutations;for(let e=0;e<i.length;e++)r=r.insert(i[e].key,n[e].version);return new Ts(e,t,n,r)}}class Is{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ss{constructor(e,t){this.count=e,this.unchangedNames=t}}var ks,xs;function Ns(e){if(void 0===e)return Sn("GRPC error has no .code"),Pn.UNKNOWN;switch(e){case ks.OK:return Pn.OK;case ks.CANCELLED:return Pn.CANCELLED;case ks.UNKNOWN:return Pn.UNKNOWN;case ks.DEADLINE_EXCEEDED:return Pn.DEADLINE_EXCEEDED;case ks.RESOURCE_EXHAUSTED:return Pn.RESOURCE_EXHAUSTED;case ks.INTERNAL:return Pn.INTERNAL;case ks.UNAVAILABLE:return Pn.UNAVAILABLE;case ks.UNAUTHENTICATED:return Pn.UNAUTHENTICATED;case ks.INVALID_ARGUMENT:return Pn.INVALID_ARGUMENT;case ks.NOT_FOUND:return Pn.NOT_FOUND;case ks.ALREADY_EXISTS:return Pn.ALREADY_EXISTS;case ks.PERMISSION_DENIED:return Pn.PERMISSION_DENIED;case ks.FAILED_PRECONDITION:return Pn.FAILED_PRECONDITION;case ks.ABORTED:return Pn.ABORTED;case ks.OUT_OF_RANGE:return Pn.OUT_OF_RANGE;case ks.UNIMPLEMENTED:return Pn.UNIMPLEMENTED;case ks.DATA_LOSS:return Pn.DATA_LOSS;default:return Nn()}}(xs=ks||(ks={}))[xs.OK=0]="OK",xs[xs.CANCELLED=1]="CANCELLED",xs[xs.UNKNOWN=2]="UNKNOWN",xs[xs.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xs[xs.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xs[xs.NOT_FOUND=5]="NOT_FOUND",xs[xs.ALREADY_EXISTS=6]="ALREADY_EXISTS",xs[xs.PERMISSION_DENIED=7]="PERMISSION_DENIED",xs[xs.UNAUTHENTICATED=16]="UNAUTHENTICATED",xs[xs.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xs[xs.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xs[xs.ABORTED=10]="ABORTED",xs[xs.OUT_OF_RANGE=11]="OUT_OF_RANGE",xs[xs.UNIMPLEMENTED=12]="UNIMPLEMENTED",xs[xs.INTERNAL=13]="INTERNAL",xs[xs.UNAVAILABLE=14]="UNAVAILABLE",xs[xs.DATA_LOSS=15]="DATA_LOSS";const Ds=new on([4294967295,4294967295],0);function Rs(e){const t=(new TextEncoder).encode(e),n=new an;return n.update(t),new Uint8Array(n.digest())}function Ps(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new on([n,r],0),new on([i,s],0)]}class Os{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Ls(`Invalid padding: ${t}`);if(n<0)throw new Ls(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Ls(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Ls(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=on.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(on.fromNumber(n)));return 1===r.compare(Ds)&&(r=new on([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Rs(e),[n,r]=Ps(t);for(let e=0;e<this.hashCount;e++){const t=this.Ee(n,r,e);if(!this.de(t))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Os(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Ie)return;const t=Rs(e),[n,r]=Ps(t);for(let e=0;e<this.hashCount;e++){const t=this.Ee(n,r,e);this.Ae(t)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Ls extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ms{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Fs.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Ms(Qn.min(),r,new gr(Wn),Mi(),Hi())}}class Fs{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Fs(n,t,Hi(),Hi(),Hi())}}class Us{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class Vs{constructor(e,t){this.targetId=e,this.me=t}}class Bs{constructor(e,t,n=Cr.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class js{constructor(){this.fe=0,this.ge=$s(),this.pe=Cr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Hi(),t=Hi(),n=Hi();return this.ge.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Nn()}})),new Fs(this.pe,this.ye,e,t,n)}ve(){this.we=!1,this.ge=$s()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Dn(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class qs{constructor(e){this.Le=e,this.Be=new Map,this.ke=Mi(),this.qe=zs(),this.Qe=new gr(Wn)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:Nn()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(bi(i))if(0===n){const e=new er(i.path);this.Ue(t,e,Qr.newNoDocument(e,Qn.min()))}else Dn(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Ir(n).toUint8Array()}catch(e){if(e instanceof br)return kn("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new Os(s,r,i)}catch(e){return kn(e instanceof Ls?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Ie?null:o}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.tt(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.Ue(t,n,null),r++)})),r}rt(e){const t=new Map;this.Be.forEach(((n,r)=>{const i=this.Je(r);if(i){if(n.current&&bi(i.target)){const t=new er(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,Qr.newNoDocument(t,e))}n.be&&(t.set(r,n.Ce()),n.ve())}}));let n=Hi();this.qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const r=new Ms(e,t,this.Qe,this.ke,n);return this.ke=Mi(),this.qe=zs(),this.Qe=new gr(Wn),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new js,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ar(Wn),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||In("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new js),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function zs(){return new gr(er.comparator)}function $s(){return new gr(er.comparator)}const Hs={asc:"ASCENDING",desc:"DESCENDING"},Ws={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ks={and:"AND",or:"OR"};class Gs{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Qs(e,t){return e.useProto3Json||lr(t)?t:{value:t}}function Ys(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Xs(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Js(e,t){return Ys(e,t.toTimestamp())}function Zs(e){return Dn(!!e),Qn.fromTimestamp(function(e){const t=_r(e);return new Gn(t.seconds,t.nanos)}(e))}function eo(e,t){return to(e,t).canonicalString()}function to(e,t){const n=function(e){return new Xn(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function no(e){const t=Xn.fromString(e);return Dn(bo(t)),t}function ro(e,t){return eo(e.databaseId,t.path)}function io(e,t){const n=no(t);if(n.get(1)!==e.databaseId.projectId)throw new On(Pn.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new On(Pn.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new er(ao(n))}function so(e,t){return eo(e.databaseId,t)}function oo(e){return new Xn(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ao(e){return Dn(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function co(e,t,n){return{name:ro(e,t),fields:n.value.mapValue.fields}}function uo(e,t){return{documents:[so(e,t.path)]}}function lo(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=so(e,i);const s=function(e){if(0!==e.length)return vo(ri.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:yo(e.field),direction:po(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Qs(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function ho(e){let t=function(e){const t=no(e);return 4===t.length?Xn.emptyPath():ao(t)}(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Dn(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=fo(e);return t instanceof ri&&si(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new Zr(Ao(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,lr(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new Yr(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new Yr(n,t)}(n.endAt)),function(e,t,n,r,i,s,o,a){return new Ci(e,t,n,r,i,s,o,a)}(t,i,o,s,a,"F",c,u)}function fo(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Ao(e.unaryFilter.field);return ni.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Ao(e.unaryFilter.field);return ni.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ao(e.unaryFilter.field);return ni.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Ao(e.unaryFilter.field);return ni.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Nn()}}(e):void 0!==e.fieldFilter?function(e){return ni.create(Ao(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Nn()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return ri.create(e.compositeFilter.filters.map((e=>fo(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Nn()}}(e.compositeFilter.op))}(e):Nn()}function po(e){return Hs[e]}function go(e){return Ws[e]}function mo(e){return Ks[e]}function yo(e){return{fieldPath:e.canonicalString()}}function Ao(e){return Zn.fromServerFormat(e.fieldPath)}function vo(e){return e instanceof ni?function(e){if("=="===e.op){if(zr(e.value))return{unaryFilter:{field:yo(e.field),op:"IS_NAN"}};if(qr(e.value))return{unaryFilter:{field:yo(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(zr(e.value))return{unaryFilter:{field:yo(e.field),op:"IS_NOT_NAN"}};if(qr(e.value))return{unaryFilter:{field:yo(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yo(e.field),op:go(e.op),value:e.value}}}(e):e instanceof ri?function(e){const t=e.getFilters().map((e=>vo(e)));return 1===t.length?t[0]:{compositeFilter:{op:mo(e.op),filters:t}}}(e):Nn()}function wo(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function bo(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Co{constructor(e,t,n,r,i=Qn.min(),s=Qn.min(),o=Cr.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Co(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Co(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Eo{constructor(e){this.ct=e}}function _o(e){const t=ho({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Si(t,t.limit,"L"):t}class To{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Tr(e.integerValue));else if("doubleValue"in e){const n=Tr(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),hr(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Et(t,20),"string"==typeof n&&(n=_r(n)),t.At(`${n.seconds||""}`),t.dt(n.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Ir(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?Wr(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Nn()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const e of Object.keys(n))this.Rt(e,t),this.It(n[e],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const e of n)this.It(e,t)}gt(e,t){this.Et(t,37),er.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}To.bt=new To;class Io{constructor(){this._n=new So}addToCollectionParentIndex(e,t){return this._n.add(t),ar.resolve()}getCollectionParents(e,t){return ar.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return ar.resolve()}deleteFieldIndex(e,t){return ar.resolve()}deleteAllFieldIndexes(e){return ar.resolve()}createTargetIndexes(e,t){return ar.resolve()}getDocumentsMatchingTarget(e,t){return ar.resolve(null)}getIndexType(e,t){return ar.resolve(0)}getFieldIndexes(e,t){return ar.resolve([])}getNextCollectionGroupToUpdate(e){return ar.resolve(null)}getMinOffset(e,t){return ar.resolve(nr.min())}getMinOffsetFromCollectionGroup(e,t){return ar.resolve(nr.min())}updateCollectionGroup(e,t,n){return ar.resolve()}updateIndexEntries(e,t){return ar.resolve()}}class So{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ar(Xn.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Ar(Xn.comparator)).toArray()}}new Uint8Array(0);class ko{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new ko(e,ko.DEFAULT_COLLECTION_PERCENTILE,ko.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}ko.DEFAULT_COLLECTION_PERCENTILE=10,ko.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ko.DEFAULT=new ko(41943040,ko.DEFAULT_COLLECTION_PERCENTILE,ko.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ko.DISABLED=new ko(-1,0,0);class xo{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new xo(0)}static Ln(){return new xo(-1)}}class No{constructor(){this.changes=new Oi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Qr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?ar.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Do{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Ro{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&ps(n.mutation,e,wr.empty(),Gn.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Hi()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=Hi()){const r=Bi();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Ui();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Bi();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Hi())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Mi();const s=qi(),o=qi();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof As)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),ps(o.mutation,t,o.mutation.getFieldMask(),Gn.now())):s.set(t.key,wr.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new Do(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=qi();let r=new gr(((e,t)=>e-t)),i=Hi();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||wr.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Hi()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,c=r.value,u=ji();c.forEach((e=>{if(!i.has(e)){const r=ds(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,u))}return ar.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return er.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):function(e){return null!==e.collectionGroup}(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):ar.resolve(Bi());let o=-1,a=i;return s.next((t=>ar.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?ar.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Hi()))).next((e=>({batchId:o,changes:Vi(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new er(t)).next((e=>{let t=Ui();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Ui();return this.indexManager.getCollectionParents(e,i).next((o=>ar.forEach(o,(o=>{const a=function(e,t){return new Ci(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Qr.newInvalidDocument(r)))}));let n=Ui();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&ps(s.mutation,r,wr.empty(),Gn.now()),Di(t,r)&&(n=n.insert(e,r))})),n}))}}class Po{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return ar.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Zs(e.createTime)}}(t)),ar.resolve()}getNamedQuery(e,t){return ar.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:_o(e.bundledQuery),readTime:Zs(e.readTime)}}(t)),ar.resolve()}}class Oo{constructor(){this.overlays=new gr(er.comparator),this.hr=new Map}getOverlay(e,t){return ar.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Bi();return ar.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),ar.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),ar.resolve()}getOverlaysForCollection(e,t,n){const r=Bi(),i=t.length+1,s=new er(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return ar.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new gr(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Bi(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Bi(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return ar.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Is(t,n));let i=this.hr.get(t);void 0===i&&(i=Hi(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class Lo{constructor(){this.Pr=new Ar(Mo.Ir),this.Tr=new Ar(Mo.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new Mo(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new Mo(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new er(new Xn([])),n=new Mo(t,e),r=new Mo(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new er(new Xn([])),n=new Mo(t,e),r=new Mo(t,e+1);let i=Hi();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Mo(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Mo{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return er.comparator(e.key,t.key)||Wn(e.pr,t.pr)}static Er(e,t){return Wn(e.pr,t.pr)||er.comparator(e.key,t.key)}}class Fo{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Ar(Mo.Ir)}checkEmpty(e){return ar.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new _s(i,t,n,r);this.mutationQueue.push(s);for(const t of r)this.wr=this.wr.add(new Mo(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return ar.resolve(s)}lookupMutationBatch(e,t){return ar.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return ar.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ar.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return ar.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Mo(t,0),r=new Mo(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),ar.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ar(Wn);return t.forEach((e=>{const t=new Mo(e,0),r=new Mo(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),ar.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;er.isDocumentKey(i)||(i=i.child(""));const s=new Mo(new er(i),0);let o=new Ar(Wn);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.pr)),!0)}),s),ar.resolve(this.Dr(o))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Dn(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return ar.forEach(t.mutations,(r=>{const i=new Mo(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new Mo(t,0),r=this.wr.firstAfterOrEqual(n);return ar.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ar.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Uo{constructor(e){this.vr=e,this.docs=new gr(er.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ar.resolve(n?n.document.mutableCopy():Qr.newInvalidDocument(t))}getEntries(e,t){let n=Mi();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Qr.newInvalidDocument(e))})),ar.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Mi();const s=t.path,o=new er(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||rr(tr(o),n)<=0||(r.has(o.key)||Di(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return ar.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Nn()}Fr(e,t){return ar.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Vo(this)}getSize(e){return ar.resolve(this.size)}}class Vo extends No{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),ar.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class Bo{constructor(e){this.persistence=e,this.Mr=new Oi((e=>vi(e)),wi),this.lastRemoteSnapshotVersion=Qn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Lo,this.targetCount=0,this.Lr=xo.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),ar.resolve()}getLastRemoteSnapshotVersion(e){return ar.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ar.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),ar.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),ar.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new xo(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,ar.resolve()}updateTargetData(e,t){return this.qn(t),ar.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,ar.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Mr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),ar.waitFor(i).next((()=>r))}getTargetCount(e){return ar.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return ar.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),ar.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),ar.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),ar.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return ar.resolve(n)}containsKey(e,t){return ar.resolve(this.Nr.containsKey(t))}}class jo{constructor(e,t){this.Br={},this.overlays={},this.kr=new ur(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Bo(this),this.indexManager=new Io,this.remoteDocumentCache=function(e){return new Uo(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new Eo(t),this.$r=new Po(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Oo,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new Fo(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){In("MemoryPersistence","Starting transaction:",e);const r=new qo(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return ar.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class qo extends sr{constructor(e){super(),this.currentSequenceNumber=e}}class zo{constructor(e){this.persistence=e,this.zr=new Lo,this.jr=null}static Hr(e){return new zo(e)}get Jr(){if(this.jr)return this.jr;throw Nn()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),ar.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),ar.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),ar.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ar.forEach(this.Jr,(n=>{const r=er.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,Qn.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return ar.or([()=>ar.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class $o{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=Hi(),r=Hi();for(const e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:r=r.add(e.doc.key)}return new $o(e,t.fromCache,n,r)}}class Ho{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Wo{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=!function(){var e;const t=null===(e=fe())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}()&&navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")?8:function(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}(Ae())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Ho;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(Tn()<=Le.DEBUG&&In("QueryEngine","SDK will not create cache indexes for query:",Ni(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),ar.resolve()):(Tn()<=Le.DEBUG&&In("QueryEngine","Query:",Ni(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(Tn()<=Le.DEBUG&&In("QueryEngine","The SDK decides to create cache indexes for query:",Ni(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ii(t))):ar.resolve())}ji(e,t){if(_i(t))return ar.resolve(null);let n=Ii(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Si(t,null,"F"),n=Ii(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Hi(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Zi(t,r);return this.Xi(t,s,i,n.readTime)?this.ji(e,Si(t,null,"F")):this.es(e,s,t,n)}))))})))))}Hi(e,t,n,r){return _i(t)||r.isEqual(Qn.min())?ar.resolve(null):this.zi.getDocuments(e,n).next((i=>{const s=this.Zi(t,i);return this.Xi(t,s,n,r)?ar.resolve(null):(Tn()<=Le.DEBUG&&In("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ni(t)),this.es(e,s,t,function(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Qn.fromTimestamp(1e9===r?new Gn(n+1,0):new Gn(n,r));return new nr(i,er.empty(),t)}(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new Ar(Ri(e));return t.forEach(((t,r)=>{Di(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return Tn()<=Le.DEBUG&&In("QueryEngine","Using full collection scan to execute query:",Ni(t)),this.zi.getDocumentsMatchingQuery(e,t,nr.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Ko{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new gr(Wn),this.rs=new Oi((e=>vi(e)),wi),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ro(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}async function Go(e,t){const n=Rn(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=Hi();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({us:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function Qo(e){const t=Rn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function Yo(e,t){const n=Rn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}async function Xo(e,t,n){const r=Rn(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!cr(e))throw e;In("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function Jo(e,t,n){const r=Rn(e);let i=Qn.min(),s=Hi();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Rn(e),i=r.rs.get(n);return void 0!==i?ar.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,Ii(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:Qn.min(),n?s:Hi()))).next((e=>(function(e,t,n){let r=e.ss.get(t)||Qn.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}(r,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,hs:s})))))}class Zo{constructor(){this.activeTargetIds=Wi}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ea{constructor(){this.no=new Zo,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Zo,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ta{io(e){}shutdown(){}}class na{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){In("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){In("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let ra=null;function ia(){return null===ra?ra=268435456+Math.round(2147483648*Math.random()):ra++,"0x"+ra.toString(16)}const sa={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class oa{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const aa="WebChannelConnection";class ca extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.wo=t+"://"+e.host,this.So=`projects/${n}/databases/${r}`,this.bo="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get Do(){return!1}Co(e,t,n,r,i){const s=ia(),o=this.vo(e,t.toUriEncodedString());In("RestConnection",`Sending RPC '${e}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(a,r,i),this.Mo(e,o,a,n).then((t=>(In("RestConnection",`Received RPC '${e}' ${s}: `,t),t)),(t=>{throw kn("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t}))}xo(e,t,n,r,i,s){return this.Co(e,t,n,r,i)}Fo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+En,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}vo(e,t){const n=sa[e];return`${this.wo}/v1/${t}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,n,r){const i=ia();return new Promise(((s,o)=>{const a=new ln;a.setWithCredentials(!0),a.listenOnce(fn.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case pn.NO_ERROR:const t=a.getResponseJson();In(aa,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case pn.TIMEOUT:In(aa,`RPC '${e}' ${i} timed out`),o(new On(Pn.DEADLINE_EXCEEDED,"Request time out"));break;case pn.HTTP_ERROR:const n=a.getStatus();if(In(aa,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Pn).indexOf(t)>=0?t:Pn.UNKNOWN}(t.status);o(new On(e,t.message))}else o(new On(Pn.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new On(Pn.UNAVAILABLE,"Connection failed."));break;default:Nn()}}finally{In(aa,`RPC '${e}' ${i} completed.`)}}));const c=JSON.stringify(r);In(aa,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",c,n,15)}))}Oo(e,t,n){const r=ia(),i=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=An(),o=yn(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.xmlHttpFactory=new hn({})),this.Fo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const u=i.join("");In(aa,`Creating RPC '${e}' stream ${r}: ${u}`,a);const l=s.createWebChannel(u,a);let h=!1,d=!1;const f=new oa({lo:t=>{d?In(aa,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(In(aa,`Opening RPC '${e}' stream ${r} transport.`),l.open(),h=!0),In(aa,`RPC '${e}' stream ${r} sending:`,t),l.send(t))},ho:()=>l.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(l,dn.EventType.OPEN,(()=>{d||(In(aa,`RPC '${e}' stream ${r} transport opened.`),f.mo())})),p(l,dn.EventType.CLOSE,(()=>{d||(d=!0,In(aa,`RPC '${e}' stream ${r} transport closed`),f.po())})),p(l,dn.EventType.ERROR,(t=>{d||(d=!0,kn(aa,`RPC '${e}' stream ${r} transport errored:`,t),f.po(new On(Pn.UNAVAILABLE,"The operation could not be completed")))})),p(l,dn.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Dn(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){In(aa,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=ks[e];if(void 0!==t)return Ns(t)}(t),i=o.message;void 0===n&&(n=Pn.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.po(new On(n,i)),l.close()}else In(aa,`RPC '${e}' stream ${r} received:`,i),f.yo(i)}})),p(o,mn.STAT_EVENT,(t=>{t.stat===gn.PROXY?In(aa,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===gn.NOPROXY&&In(aa,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{f.fo()}),0),f}}function ua(){return"undefined"!=typeof document?document:null}function la(e){return new Gs(e,!0)}class ha{constructor(e,t,n=1e3,r=1.5,i=6e4){this.oi=e,this.timerId=t,this.No=n,this.Lo=r,this.Bo=i,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),n=Math.max(0,Date.now()-this.Qo),r=Math.max(0,t-n);r>0&&In("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Qo=Date.now(),e()))),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class da{constructor(e,t,n,r,i,s,o,a){this.oi=e,this.Go=n,this.zo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new ha(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,(()=>this.r_())))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,t){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,4!==e?this.Yo.reset():t&&t.code===Pn.RESOURCE_EXHAUSTED?(Sn(t.toString()),Sn("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):t&&t.code===Pn.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(t)}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.jo===t&&this.u_(e,n)}),(t=>{e((()=>{const e=new On(Pn.UNKNOWN,"Fetching auth token failed: "+t.message);return this.c_(e)}))}))}u_(e,t){const n=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po((()=>{n((()=>this.listener.Po()))})),this.stream.To((()=>{n((()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,(()=>(this.Xo()&&(this.state=3),Promise.resolve()))),this.listener.To())))})),this.stream.Ao((e=>{n((()=>this.c_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}e_(){this.state=5,this.Yo.$o((async()=>{this.state=0,this.start()}))}c_(e){return In("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget((()=>this.jo===e?t():(In("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class fa extends da{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Nn()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Dn(void 0===t||"string"==typeof t),Cr.fromBase64String(t||"")):(Dn(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Cr.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Pn.UNKNOWN:Ns(e.code);return new On(t,e.message||"")}(o);n=new Bs(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=io(e,r.document.name),s=Zs(r.document.updateTime),o=r.document.createTime?Zs(r.document.createTime):Qn.min(),a=new Kr({mapValue:{fields:r.document.fields}}),c=Qr.newFoundDocument(i,s,o,a),u=r.targetIds||[],l=r.removedTargetIds||[];n=new Us(u,l,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=io(e,r.document),s=r.readTime?Zs(r.readTime):Qn.min(),o=Qr.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Us([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=io(e,r.document),s=r.removedTargetIds||[];n=new Us([],s,i,null)}else{if(!("filter"in t))return Nn();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Ss(r,i),o=e.targetId;n=new Vs(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Qn.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Qn.min():t.readTime?Zs(t.readTime):Qn.min()}(e);return this.listener.h_(t,n)}P_(e){const t={};t.database=oo(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=bi(r)?{documents:uo(e,r)}:{query:lo(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Xs(e,t.resumeToken);const r=Qs(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Qn.min())>0){n.readTime=Ys(e,t.snapshotVersion.toTimestamp());const r=Qs(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Nn()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.i_(t)}I_(e){const t={};t.database=oo(this.serializer),t.removeTarget=e,this.i_(t)}}class pa extends da{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(Dn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=function(e,t){return e&&e.length>0?(Dn(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Zs(e.updateTime):Zs(t);return n.isEqual(Qn.min())&&(n=Zs(t)),new cs(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Zs(e.commitTime);return this.listener.A_(n,t)}return Dn(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=oo(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>function(e,t){let n;if(t instanceof ys)n={update:co(e,t.key,t.value)};else if(t instanceof Cs)n={delete:ro(e,t.key)};else if(t instanceof As)n={update:co(e,t.key,t.data),updateMask:wo(t.fieldMask)};else{if(!(t instanceof Es))return Nn();n={verify:ro(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof es)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ts)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof rs)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ss)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw Nn()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Js(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Nn()}(e,t.precondition)),n}(this.serializer,e)))};this.i_(t)}}class ga extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new On(Pn.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,n,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.connection.Co(e,to(t,n),r,i,s))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Pn.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new On(Pn.UNKNOWN,e.toString())}))}xo(e,t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.xo(e,to(t,n),r,s,o,i))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Pn.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new On(Pn.UNKNOWN,e.toString())}))}terminate(){this.m_=!0,this.connection.terminate()}}class ma{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve()))))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Sn(t),this.y_=!1):In("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class ya{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=i,this.O_.io((e=>{n.enqueueAndForget((async()=>{Ia(this)&&(In("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Rn(e);t.M_.add(4),await va(t),t.N_.set("Unknown"),t.M_.delete(4),await Aa(t)}(this))}))})),this.N_=new ma(n,r)}}async function Aa(e){if(Ia(e))for(const t of e.x_)await t(!0)}async function va(e){for(const t of e.x_)await t(!1)}function wa(e,t){const n=Rn(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),Ta(n)?_a(n):$a(n).Xo()&&Ca(n,t))}function ba(e,t){const n=Rn(e),r=$a(n);n.F_.delete(t),r.Xo()&&Ea(n,t),0===n.F_.size&&(r.Xo()?r.n_():Ia(n)&&n.N_.set("Unknown"))}function Ca(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Qn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}$a(e).P_(t)}function Ea(e,t){e.L_.xe(t),$a(e).I_(t)}function _a(e){e.L_=new qs({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),$a(e).start(),e.N_.w_()}function Ta(e){return Ia(e)&&!$a(e).Zo()&&e.F_.size>0}function Ia(e){return 0===Rn(e).M_.size}function Sa(e){e.L_=void 0}async function ka(e){e.N_.set("Online")}async function xa(e){e.F_.forEach(((t,n)=>{Ca(e,t)}))}async function Na(e,t){Sa(e),Ta(e)?(e.N_.D_(t),_a(e)):e.N_.set("Unknown")}async function Da(e,t,n){if(e.N_.set("Online"),t instanceof Bs&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.F_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.F_.delete(r),e.L_.removeTarget(r))}(e,t)}catch(n){In("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Ra(e,n)}else if(t instanceof Us?e.L_.Ke(t):t instanceof Vs?e.L_.He(t):e.L_.We(t),!n.isEqual(Qn.min()))try{const t=await Qo(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.L_.rt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.F_.get(r);i&&e.F_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.F_.get(t);if(!r)return;e.F_.set(t,r.withResumeToken(Cr.EMPTY_BYTE_STRING,r.snapshotVersion)),Ea(e,t);const i=new Co(r.target,t,n,r.sequenceNumber);Ca(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){In("RemoteStore","Failed to raise snapshot:",t),await Ra(e,t)}}async function Ra(e,t,n){if(!cr(t))throw t;e.M_.add(1),await va(e),e.N_.set("Offline"),n||(n=()=>Qo(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{In("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await Aa(e)}))}function Pa(e,t){return t().catch((n=>Ra(e,n,t)))}async function Oa(e){const t=Rn(e),n=Ha(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;La(t);)try{const e=await Yo(t.localStore,r);if(null===e){0===t.v_.length&&n.n_();break}r=e.batchId,Ma(t,e)}catch(e){await Ra(t,e)}Fa(t)&&Ua(t)}function La(e){return Ia(e)&&e.v_.length<10}function Ma(e,t){e.v_.push(t);const n=Ha(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function Fa(e){return Ia(e)&&!Ha(e).Zo()&&e.v_.length>0}function Ua(e){Ha(e).start()}async function Va(e){Ha(e).V_()}async function Ba(e){const t=Ha(e);for(const n of e.v_)t.d_(n.mutations)}async function ja(e,t,n){const r=e.v_.shift(),i=Ts.from(r,t,n);await Pa(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Oa(e)}async function qa(e,t){t&&Ha(e).E_&&await async function(e,t){if(function(e){return function(e){switch(e){default:return Nn();case Pn.CANCELLED:case Pn.UNKNOWN:case Pn.DEADLINE_EXCEEDED:case Pn.RESOURCE_EXHAUSTED:case Pn.INTERNAL:case Pn.UNAVAILABLE:case Pn.UNAUTHENTICATED:return!1;case Pn.INVALID_ARGUMENT:case Pn.NOT_FOUND:case Pn.ALREADY_EXISTS:case Pn.PERMISSION_DENIED:case Pn.FAILED_PRECONDITION:case Pn.ABORTED:case Pn.OUT_OF_RANGE:case Pn.UNIMPLEMENTED:case Pn.DATA_LOSS:return!0}}(e)&&e!==Pn.ABORTED}(t.code)){const n=e.v_.shift();Ha(e).t_(),await Pa(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Oa(e)}}(e,t),Fa(e)&&Ua(e)}async function za(e,t){const n=Rn(e);n.asyncQueue.verifyOperationInProgress(),In("RemoteStore","RemoteStore received new credentials");const r=Ia(n);n.M_.add(3),await va(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await Aa(n)}function $a(e){return e.B_||(e.B_=function(e,t,n){const r=Rn(e);return r.f_(),new fa(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:ka.bind(null,e),To:xa.bind(null,e),Ao:Na.bind(null,e),h_:Da.bind(null,e)}),e.x_.push((async t=>{t?(e.B_.t_(),Ta(e)?_a(e):e.N_.set("Unknown")):(await e.B_.stop(),Sa(e))}))),e.B_}function Ha(e){return e.k_||(e.k_=function(e,t,n){const r=Rn(e);return r.f_(),new pa(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:Va.bind(null,e),Ao:qa.bind(null,e),R_:Ba.bind(null,e),A_:ja.bind(null,e)}),e.x_.push((async t=>{t?(e.k_.t_(),await Oa(e)):(await e.k_.stop(),e.v_.length>0&&(In("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))}))),e.k_}class Wa{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Ln,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Wa(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new On(Pn.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ka(e,t){if(Sn("AsyncQueue",`${t}: ${e}`),cr(e))return new On(Pn.UNAVAILABLE,`${t}: ${e}`);throw e}class Ga{constructor(e){this.comparator=e?(t,n)=>e(t,n)||er.comparator(t.key,n.key):(e,t)=>er.comparator(e.key,t.key),this.keyedMap=Ui(),this.sortedSet=new gr(this.comparator)}static emptySet(e){return new Ga(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ga))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Ga;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Qa{constructor(){this.q_=new gr(er.comparator)}track(e){const t=e.doc.key,n=this.q_.get(t);n?0!==e.type&&3===n.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==n.type?this.q_=this.q_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.q_=this.q_.remove(t):1===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):Nn():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Ya{constructor(e,t,n,r,i,s,o,a,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new Ya(e,t,Ga.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ki(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}}class Xa{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some((e=>e.G_()))}}class Ja{constructor(){this.queries=new Oi((e=>xi(e)),ki),this.onlineState="Unknown",this.z_=new Set}}async function Za(e,t){const n=Rn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new Xa,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Ka(e,`Initialization of query '${Ni(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&nc(n)}function ec(e,t){const n=Rn(e);let r=!1;for(const e of t){const t=e.query,i=n.queries.get(t);if(i){for(const t of i.U_)t.H_(e)&&(r=!0);i.K_=e}}r&&nc(n)}function tc(e,t,n){const r=Rn(e),i=r.queries.get(t);if(i)for(const e of i.U_)e.onError(n);r.queries.delete(t)}function nc(e){e.z_.forEach((e=>{e.next()}))}var rc,ic;(ic=rc||(rc={})).J_="default",ic.Cache="cache";class sc{constructor(e,t,n){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=n||{}}H_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Ya(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache)return!0;if(!this.G_())return!0;const n="Offline"!==t;return(!this.options.ra||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){if(e.docChanges.length>0)return!0;const t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}na(e){e=Ya.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==rc.Cache}}class oc{constructor(e){this.key=e}}class ac{constructor(e){this.key=e}}class cc{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Hi(),this.mutatedKeys=Hi(),this.Ia=Ri(e),this.Ta=new Ga(this.Ia)}get Ea(){return this.la}da(e,t){const n=t?t.Aa:new Qa,r=t?t.Ta:this.Ta;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const u=r.get(e),l=Di(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let f=!1;u&&l?u.data.isEqual(l.data)?h!==d&&(n.track({type:3,doc:l}),f=!0):this.Ra(u,l)||(n.track({type:2,doc:l}),f=!0,(a&&this.Ia(l,a)>0||c&&this.Ia(l,c)<0)&&(o=!0)):!u&&l?(n.track({type:0,doc:l}),f=!0):u&&!l&&(n.track({type:1,doc:u}),f=!0,(a||c)&&(o=!0)),f&&(l?(s=s.add(l),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ta:s,Aa:n,Xi:o,mutatedKeys:i}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const s=e.Aa.Q_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Nn()}};return n(e)-n(t)}(e.type,t.type)||this.Ia(e.doc,t.doc))),this.Va(n),r=null!=r&&r;const o=t&&!r?this.ma():[],a=0===this.Pa.size&&this.current&&!r?1:0,c=a!==this.ha;return this.ha=a,0!==s.length||c?{snapshot:new Ya(this.query,e.Ta,i,s,e.mutatedKeys,0===a,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),fa:o}:{fa:o}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Qa,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach((e=>this.la=this.la.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.la=this.la.delete(e))),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=Hi(),this.Ta.forEach((e=>{this.ga(e.key)&&(this.Pa=this.Pa.add(e.key))}));const t=[];return e.forEach((e=>{this.Pa.has(e)||t.push(new ac(e))})),this.Pa.forEach((n=>{e.has(n)||t.push(new oc(n))})),t}pa(e){this.la=e.hs,this.Pa=Hi();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return Ya.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class uc{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class lc{constructor(e){this.key=e,this.wa=!1}}class hc{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new Oi((e=>xi(e)),ki),this.Da=new Map,this.Ca=new Set,this.va=new gr(er.comparator),this.Fa=new Map,this.Ma=new Lo,this.xa={},this.Oa=new Map,this.Na=xo.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}async function dc(e,t,n=!0){const r=Rc(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await pc(r,t,n,!0),i}async function fc(e,t){const n=Rc(e);await pc(n,t,!0,!1)}async function pc(e,t,n,r){const i=await function(e,t){const n=Rn(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,ar.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new Co(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}(e.localStore,Ii(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await async function(e,t,n,r,i){e.Ba=(t,n,r)=>async function(e,t,n,r){let i=t.view.da(n);i.Xi&&(i=await Jo(e.localStore,t.query,!1).then((({documents:e})=>t.view.da(e,i))));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Ic(e,t.targetId,a.fa),a.snapshot}(e,t,n,r);const s=await Jo(e.localStore,t,!0),o=new cc(t,s.hs),a=o.da(s.documents),c=Fs.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=o.applyChanges(a,e.isPrimaryClient,c);Ic(e,n,u.fa);const l=new uc(t,n,o);return e.ba.set(t,l),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),u.snapshot}(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&wa(e.remoteStore,i),a}async function gc(e,t,n){const r=Rn(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter((e=>!ki(e,t)))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Xo(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ba(r.remoteStore,i.targetId),_c(r,i.targetId)})).catch(or)):(_c(r,i.targetId),await Xo(r.localStore,i.targetId,!0))}async function mc(e,t){const n=Rn(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ba(n.remoteStore,r.targetId))}async function yc(e,t){const n=Rn(e);try{const e=await function(e,t){const n=Rn(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const o=[];t.targetChanges.forEach(((s,a)=>{const c=i.get(a);if(!c)return;o.push(n.Qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,s.addedDocuments,a))));let u=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(Cr.EMPTY_BYTE_STRING,Qn.min()).withLastLimboFreeSnapshotVersion(Qn.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,u,s)&&o.push(n.Qr.updateTargetData(e,u))}));let a=Mi(),c=Hi();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(function(e,t,n){let r=Hi(),i=Hi();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Mi();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Qn.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):In("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:r,ls:i}}))}(e,s,t.documentUpdates).next((e=>{a=e.cs,c=e.ls}))),!r.isEqual(Qn.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return ar.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,c))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Fa.get(t);r&&(Dn(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.wa=!0:e.modifiedDocuments.size>0?Dn(r.wa):e.removedDocuments.size>0&&(Dn(r.wa),r.wa=!1))})),await xc(n,e,t)}catch(e){await or(e)}}function Ac(e,t,n){const r=Rn(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ba.forEach(((n,r)=>{const i=r.view.j_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Rn(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const e of n.U_)e.j_(t)&&(r=!0)})),r&&nc(n)}(r.eventManager,t),e.length&&r.Sa.h_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function vc(e,t,n){const r=Rn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let e=new gr(er.comparator);e=e.insert(s,Qr.newNoDocument(s,Qn.min()));const n=Hi().add(s),i=new Ms(Qn.min(),new Map,new gr(Wn),e,n);await yc(r,i),r.va=r.va.remove(s),r.Fa.delete(t),kc(r)}else await Xo(r.localStore,t,!1).then((()=>_c(r,t,n))).catch(or)}async function wc(e,t){const n=Rn(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Rn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=ar.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Dn(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Hi();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Ec(n,r,null),Cc(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await xc(n,e)}catch(e){await or(e)}}async function bc(e,t,n){const r=Rn(e);try{const e=await function(e,t){const n=Rn(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Dn(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Ec(r,t,n),Cc(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await xc(r,e)}catch(n){await or(n)}}function Cc(e,t){(e.Oa.get(t)||[]).forEach((e=>{e.resolve()})),e.Oa.delete(t)}function Ec(e,t,n){const r=Rn(e);let i=r.xa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function _c(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach((t=>{e.Ma.containsKey(t)||Tc(e,t)}))}function Tc(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);null!==n&&(ba(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),kc(e))}function Ic(e,t,n){for(const r of n)r instanceof oc?(e.Ma.addReference(r.key,t),Sc(e,r)):r instanceof ac?(In("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||Tc(e,r.key)):Nn()}function Sc(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(In("SyncEngine","New document in limbo: "+n),e.Ca.add(r),kc(e))}function kc(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new er(Xn.fromString(t)),r=e.Na.next();e.Fa.set(r,new lc(n)),e.va=e.va.insert(n,r),wa(e.remoteStore,new Co(Ii(Ei(n.path)),r,"TargetPurposeLimboResolution",ur.oe))}}async function xc(e,t,n){const r=Rn(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach(((e,a)=>{o.push(r.Ba(a,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=$o.Ki(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.Sa.h_(i),await async function(e,t){const n=Rn(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>ar.forEach(t,(t=>ar.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>ar.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!cr(e))throw e;In("LocalStore","Failed to update sequence numbers: "+e)}for(const e of t){const t=e.targetId;if(!e.fromCache){const e=n.ns.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(t,i)}}}(r.localStore,s))}async function Nc(e,t){const n=Rn(e);if(!n.currentUser.isEqual(t)){In("SyncEngine","User change. New user:",t.toKey());const e=await Go(n.localStore,t);n.currentUser=t,function(e){e.Oa.forEach((e=>{e.forEach((e=>{e.reject(new On(Pn.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Oa.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await xc(n,e.us)}}function Dc(e,t){const n=Rn(e),r=n.Fa.get(t);if(r&&r.wa)return Hi().add(r.key);{let e=Hi();const r=n.Da.get(t);if(!r)return e;for(const t of r){const r=n.ba.get(t);e=e.unionWith(r.view.Ea)}return e}}function Rc(e){const t=Rn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=yc.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Dc.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=vc.bind(null,t),t.Sa.h_=ec.bind(null,t.eventManager),t.Sa.ka=tc.bind(null,t.eventManager),t}function Pc(e){const t=Rn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=wc.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=bc.bind(null,t),t}class Oc{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=la(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function(e,t,n,r){return new Ko(e,t,n,r)}(this.persistence,new Wo,e.initialUser,this.serializer)}createPersistence(e){return new jo(zo.Hr,this.serializer)}createSharedClientState(e){return new ea}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Lc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Ac(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Nc.bind(null,this.syncEngine),await async function(e,t){const n=Rn(e);t?(n.M_.delete(2),await Aa(n)):t||(n.M_.add(2),await va(n),n.N_.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Ja}createDatastore(e){const t=la(e.databaseInfo.databaseId),n=function(e){return new ca(e)}(e.databaseInfo);return function(e,t,n,r){return new ga(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new ya(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Ac(this.syncEngine,e,0)),na.D()?new na:new ta)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new hc(e,t,n,r,i,s);return o&&(a.La=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=Rn(e);In("RemoteStore","RemoteStore shutting down."),t.M_.add(5),await va(t),t.O_.shutdown(),t.N_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}class Mc{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Sn("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class Fc{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Cn.UNAUTHENTICATED,this.clientId=Hn.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{In("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(In("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new On(Pn.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ln;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Ka(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Uc(e,t){e.asyncQueue.verifyOperationInProgress(),In("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Go(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Vc(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){In("FirestoreClient","Using user provided OfflineComponentProvider");try{await Uc(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Pn.FAILED_PRECONDITION||e.code===Pn.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;kn("Error using user provided cache. Falling back to memory cache: "+n),await Uc(e,new Oc)}}else In("FirestoreClient","Using default OfflineComponentProvider"),await Uc(e,new Oc);return e._offlineComponents}(e);In("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>za(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>za(t.remoteStore,n))),e._onlineComponents=t}async function Bc(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(In("FirestoreClient","Using user provided OnlineComponentProvider"),await Vc(e,e._uninitializedComponentsProvider._online)):(In("FirestoreClient","Using default OnlineComponentProvider"),await Vc(e,new Lc))),e._onlineComponents}async function jc(e){const t=await Bc(e),n=t.eventManager;return n.onListen=dc.bind(null,t.syncEngine),n.onUnlisten=gc.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=fc.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=mc.bind(null,t.syncEngine),n}function qc(e,t,n={}){const r=new Ln;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Mc({next:s=>{t.enqueueAndForget((()=>async function(e,t){const n=Rn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.U_.indexOf(t);e>=0&&(s.U_.splice(e,1),0===s.U_.length?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new On(Pn.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new On(Pn.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new sc(Ei(n.path),s,{includeMetadataChanges:!0,ra:!0});return Za(e,o)}(await jc(e),e.asyncQueue,t,n,r))),r.promise}function zc(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const $c=new Map;function Hc(e,t,n){if(!n)throw new On(Pn.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Wc(e){if(!er.isDocumentKey(e))throw new On(Pn.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Kc(e){if(er.isDocumentKey(e))throw new On(Pn.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Gc(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Nn()}function Qc(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new On(Pn.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Gc(e);throw new On(Pn.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class Yc{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new On(Pn.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new On(Pn.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new On(Pn.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")})(0,e.experimentalForceLongPolling,0,e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zc(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new On(Pn.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new On(Pn.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new On(Pn.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xc{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yc({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new On(Pn.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new On(Pn.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yc(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Fn;switch(e.type){case"firstParty":return new jn(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new On(Pn.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=$c.get(e);t&&(In("ComponentProvider","Removing Datastore"),$c.delete(e),t.terminate())}(this),Promise.resolve()}}class Jc{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Jc(this.firestore,e,this._query)}}class Zc{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new eu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zc(this.firestore,e,this._key)}}class eu extends Jc{constructor(e,t,n){super(e,t,Ei(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zc(this.firestore,null,new er(e))}withConverter(e){return new eu(this.firestore,e,this._path)}}function tu(e,t,...n){if(e=xe(e),Hc("collection","path",t),e instanceof Xc){const r=Xn.fromString(t,...n);return Kc(r),new eu(e,null,r)}{if(!(e instanceof Zc||e instanceof eu))throw new On(Pn.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Xn.fromString(t,...n));return Kc(r),new eu(e.firestore,null,r)}}function nu(e,t,...n){if(e=xe(e),1===arguments.length&&(t=Hn.newId()),Hc("doc","path",t),e instanceof Xc){const r=Xn.fromString(t,...n);return Wc(r),new Zc(e,null,new er(r))}{if(!(e instanceof Zc||e instanceof eu))throw new On(Pn.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Xn.fromString(t,...n));return Wc(r),new Zc(e.firestore,e instanceof eu?e.converter:null,new er(r))}}class ru{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new ha(this,"async_queue_retry"),this.hu=()=>{const e=ua();e&&In("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Yo.Wo()};const e=ua();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=ua();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise((()=>{}));const t=new Ln;return this.Iu((()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.su.push(e),this.Tu())))}async Tu(){if(0!==this.su.length){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!cr(e))throw e;In("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o((()=>this.Tu()))}}Iu(e){const t=this.iu.then((()=>(this.uu=!0,e().catch((e=>{this.au=e,this.uu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Sn("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.uu=!1,e))))));return this.iu=t,t}enqueueAfterDelay(e,t,n){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const r=Wa.createAndSchedule(this,e,t,n,(e=>this.Eu(e)));return this._u.push(r),r}Pu(){this.au&&Nn()}verifyOperationInProgress(){}async du(){let e;do{e=this.iu,await e}while(e!==this.iu)}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then((()=>{this._u.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()}))}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function iu(e){return function(e){if("object"!=typeof e||null===e)return!1;const t=e;for(const e of["next","error","complete"])if(e in t&&"function"==typeof t[e])return!0;return!1}(e)}class su extends Xc{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new ru,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||cu(this),this._firestoreClient.terminate()}}function ou(e,t){const n="string"==typeof e?e:t||"(default)",r=Bt("object"==typeof e?e:Wt(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(()=>{const e=pe("firestore");if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),n]:[e.substring(0,t),n]})();e&&function(e,t,n,r={}){var i;const s=(e=Qc(e,Xc))._getSettings(),o=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&kn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Cn.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[he(JSON.stringify({alg:"none",type:"JWT"})),he(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new On(Pn.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Cn(s)}e._authCredentials=new Un(new Mn(t,n))}}(r,...e)}return r}function au(e){return e._firestoreClient||cu(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function cu(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Nr(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,zc(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Fc(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}class uu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new uu(Cr.fromBase64String(e))}catch(e){throw new On(Pn.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new uu(Cr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class lu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new On(Pn.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class hu{constructor(e){this._methodName=e}}class du{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new On(Pn.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new On(Pn.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Wn(this._lat,e._lat)||Wn(this._long,e._long)}}const fu=/^__.*__$/;class pu{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new As(e,this.data,this.fieldMask,t,this.fieldTransforms):new ys(e,this.data,t,this.fieldTransforms)}}class gu{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new As(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function mu(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Nn()}}class yu{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.mu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new yu(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.wu(e),r}Su(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return xu(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(mu(this.fu)&&fu.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class Au{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||la(e)}Fu(e,t,n,r=!1){return new yu({fu:e,methodName:t,vu:n,path:Zn.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vu(e){const t=e._freezeSettings(),n=la(e._databaseId);return new Au(e._databaseId,!!t.ignoreUndefinedProperties,n)}function wu(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);Tu("Data must be an object, but it was:",o,r);const a=Eu(r,o);let c,u;if(s.merge)c=new wr(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Iu(t,r,n);if(!o.contains(i))throw new On(Pn.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Nu(e,i)||e.push(i)}c=new wr(e),u=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,u=o.fieldTransforms;return new pu(new Kr(a),c,u)}class bu extends hu{_toFieldTransform(e){if(2!==e.fu)throw 1===e.fu?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bu}}function Cu(e,t){if(_u(e=xe(e)))return Tu("Unsupported field value:",t,e),Eu(e,t);if(e instanceof hu)return function(e,t){if(!mu(t.fu))throw t.Du(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Du(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&4!==t.fu)throw t.Du("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Cu(i,t.bu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=xe(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Qi(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Gn.fromDate(e);return{timestampValue:Ys(t.serializer,n)}}if(e instanceof Gn){const n=new Gn(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ys(t.serializer,n)}}if(e instanceof du)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof uu)return{bytesValue:Xs(t.serializer,e._byteString)};if(e instanceof Zc){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Du(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:eo(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Du(`Unsupported field value: ${Gc(e)}`)}(e,t)}function Eu(e,t){const n={};return pr(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):fr(e,((e,r)=>{const i=Cu(r,t.pu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function _u(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Gn||e instanceof du||e instanceof uu||e instanceof Zc||e instanceof hu)}function Tu(e,t,n){if(!_u(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Gc(n);throw"an object"===r?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function Iu(e,t,n){if((t=xe(t))instanceof lu)return t._internalPath;if("string"==typeof t)return ku(e,t);throw xu("Field path arguments must be of type string or ",e,!1,void 0,n)}const Su=new RegExp("[~\\*/\\[\\]]");function ku(e,t,n){if(t.search(Su)>=0)throw xu(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new lu(...t.split("."))._internalPath}catch(r){throw xu(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function xu(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new On(Pn.INVALID_ARGUMENT,a+e+c)}function Nu(e,t){return e.some((e=>e.isEqual(t)))}class Du{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Zc(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ru(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Pu("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Ru extends Du{data(){return super.data()}}function Pu(e,t){return"string"==typeof t?ku(e,t):t instanceof lu?t._internalPath:t._delegate._internalPath}class Ou{convertValue(e,t="none"){switch(Pr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ir(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Nn()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return fr(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new du(Tr(e.latitude),Tr(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=kr(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(xr(e));default:return null}}convertTimestamp(e){const t=_r(e);return new Gn(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Xn.fromString(e);Dn(bo(n));const r=new Dr(n.get(1),n.get(3)),i=new er(n.popFirst(5));return r.isEqual(t)||Sn(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function Lu(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Mu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fu extends Du{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Uu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Pu("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Uu extends Fu{data(e={}){return super.data(e)}}class Vu{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Mu(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Uu(this._firestore,this._userDataWriter,n.key,n,new Mu(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new On(Pn.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Uu(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Mu(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Uu(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Mu(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Bu(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Bu(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Nn()}}class ju extends Ou{constructor(e){super(),this.firestore=e}convertBytes(e){return new uu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zc(this.firestore,null,t)}}function qu(e,t,n,...r){e=Qc(e,Zc);const i=Qc(e.firestore,su),s=vu(i);let o;return o="string"==typeof(t=xe(t))||t instanceof lu?function(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[Iu(t,r,n)],c=[i];if(s.length%2!=0)throw new On(Pn.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<s.length;e+=2)a.push(Iu(t,s[e])),c.push(s[e+1]);const u=[],l=Kr.empty();for(let e=a.length-1;e>=0;--e)if(!Nu(u,a[e])){const t=a[e];let n=c[e];n=xe(n);const r=o.Su(t);if(n instanceof bu)u.push(t);else{const e=Cu(n,r);null!=e&&(u.push(t),l.set(t,e))}}const h=new wr(u);return new gu(l,h,o.fieldTransforms)}(s,"updateDoc",e._key,t,n,r):function(e,t,n,r){const i=e.Fu(1,t,n);Tu("Data must be an object, but it was:",i,r);const s=[],o=Kr.empty();fr(r,((e,r)=>{const a=ku(t,e,n);r=xe(r);const c=i.Su(a);if(r instanceof bu)s.push(a);else{const e=Cu(r,c);null!=e&&(s.push(a),o.set(a,e))}}));const a=new wr(s);return new gu(o,a,i.fieldTransforms)}(s,"updateDoc",e._key,t),zu(i,[o.toMutation(e._key,us.exists(!0))])}function zu(e,t){return function(e,t){const n=new Ln;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Pc(e);try{const e=await function(e,t){const n=Rn(e),r=Gn.now(),i=t.reduce(((e,t)=>e.add(t.key)),Hi());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Mi(),c=Hi();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=gs(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new As(e.key,t,Gr(t.value.mapValue),us.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:Vi(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.xa[e.currentUser.toKey()];r||(r=new gr(Wn)),r=r.insert(t,n),e.xa[e.currentUser.toKey()]=r}(r,e.batchId,n),await xc(r,e.changes),await Oa(r.remoteStore)}catch(e){const t=Ka(e,"Failed to persist write");n.reject(t)}}(await function(e){return Bc(e).then((e=>e.syncEngine))}(e),t,n))),n.promise}(au(e),t)}function $u(e,t,n){const r=n.docs.get(t._key),i=new ju(e);return new Fu(e,i,t._key,r,new Mu(n.hasPendingWrites,n.fromCache),t.converter)}function Hu(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}new WeakMap,function(e,t=!0){!function(e){En=e}($t),Vt(new Ne("firestore",((e,{instanceIdentifier:n,options:r})=>{const i=e.getProvider("app").getImmediate(),s=new su(new Vn(e.getProvider("auth-internal")),new zn(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new On(Pn.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dr(e.options.projectId,t)}(i,n),i);return r=Object.assign({useFetchStreams:t},r),s._setSettings(r),s}),"PUBLIC").setMultipleInstances(!0)),Kt(bn,"4.6.4",e),Kt(bn,"4.6.4","esm2017")}(),Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;const Wu=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ku=new we("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Gu=new Be("@firebase/auth");function Qu(e,...t){Gu.logLevel<=Le.ERROR&&Gu.error(`Auth (${$t}): ${e}`,...t)}function Yu(e,...t){throw el(e,...t)}function Xu(e,...t){return el(e,...t)}function Ju(e,t,n){const r=Object.assign(Object.assign({},Wu()),{[t]:n});return new we("auth","Firebase",r).create(t,{appName:e.name})}function Zu(e){return Ju(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function el(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return Ku.create(e,...t)}function tl(e,t,...n){if(!e)throw el(t,...n)}function nl(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Qu(t),new Error(t)}function rl(e,t){e||nl(t)}function il(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function sl(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function ol(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===sl()||"https:"===sl()||function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class al{constructor(e,t){this.shortDelay=e,this.longDelay=t,rl(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ae())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return ol()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function cl(e,t){rl(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class ul{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void nl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void nl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void nl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ll={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},hl=new al(3e4,6e4);function dl(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function fl(e,t,n,r,i={}){return pl(e,i,(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=_e(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),ul.fetch()(ml(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function pl(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},ll),t);try{const t=new Al(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw vl(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw vl(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw vl(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw vl(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Ju(e,a,o);Yu(e,a)}}catch(t){if(t instanceof ve)throw t;Yu(e,"network-request-failed",{message:String(t)})}}async function gl(e,t,n,r,i={}){const s=await fl(e,t,n,r,i);return"mfaPendingCredential"in s&&Yu(e,"multi-factor-auth-required",{_serverResponse:s}),s}function ml(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?cl(e.config,i):`${e.config.apiScheme}://${i}`}function yl(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Al{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Xu(this.auth,"network-request-failed"))),hl.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function vl(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Xu(e,t,r);return i.customData._tokenResponse=n,i}function wl(e){return void 0!==e&&void 0!==e.enterprise}class bl{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return yl(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Cl(e,t){return fl(e,"POST","/v1/accounts:lookup",t)}function El(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function _l(e){return 1e3*Number(e)}function Tl(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Qu("JWT malformed, contained fewer than 3 sections"),null;try{const e=de(n);return e?JSON.parse(e):(Qu("Failed to decode base64 JWT payload"),null)}catch(e){return Qu("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}function Il(e){const t=Tl(e);return tl(t,"internal-error"),tl(void 0!==t.exp,"internal-error"),tl(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Sl(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof ve&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class kl{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class xl{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=El(this.lastLoginAt),this.creationTime=El(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Nl(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Sl(e,Cl(n,{idToken:r}));tl(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?Dl(s.providerUserInfo):[],a=(c=e.providerData,u=o,[...c.filter((e=>!u.some((t=>t.providerId===e.providerId)))),...u]);var c,u;const l=e.isAnonymous,h=!(e.email&&s.passwordHash||(null==a?void 0:a.length)),d=!!l&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new xl(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function Dl(e){return e.map((e=>{var{providerId:t}=e,n=Hu(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class Rl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){tl(e.idToken,"internal-error"),tl(void 0!==e.idToken,"internal-error"),tl(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):Il(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){tl(0!==e.length,"internal-error");const t=Il(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(tl(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await pl(e,{},(async()=>{const n=_e({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=ml(e,r,"/v1/token",`key=${i}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",ul.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Rl;return n&&(tl("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(tl("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(tl("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Rl,this.toJSON())}_performRefresh(){return nl("not implemented")}}function Pl(e,t){tl("string"==typeof e||void 0===e,"internal-error",{appName:t})}class Ol{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Hu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new kl(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new xl(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Sl(this,this.stsTokenManager.getToken(this.auth,e));return tl(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=xe(e),r=await n.getIdToken(t),i=Tl(r);tl(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:El(_l(i.auth_time)),issuedAtTime:El(_l(i.iat)),expirationTime:El(_l(i.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=xe(e);await Nl(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(tl(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ol(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){tl(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Nl(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jt(this.auth.app))return Promise.reject(Zu(this.auth));const e=await this.getIdToken();return await Sl(this,async function(e,t){return fl(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,c,u;const l=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(c=t.createdAt)&&void 0!==c?c:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:A,emailVerified:v,isAnonymous:w,providerData:b,stsTokenManager:C}=t;tl(A&&C,e,"internal-error");const E=Rl.fromJSON(this.name,C);tl("string"==typeof A,e,"internal-error"),Pl(l,e.name),Pl(h,e.name),tl("boolean"==typeof v,e,"internal-error"),tl("boolean"==typeof w,e,"internal-error"),Pl(d,e.name),Pl(f,e.name),Pl(p,e.name),Pl(g,e.name),Pl(m,e.name),Pl(y,e.name);const _=new Ol({uid:A,auth:e,email:h,emailVerified:v,displayName:l,isAnonymous:w,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:E,createdAt:m,lastLoginAt:y});return b&&Array.isArray(b)&&(_.providerData=b.map((e=>Object.assign({},e)))),g&&(_._redirectEventId=g),_}static async _fromIdTokenResponse(e,t,n=!1){const r=new Rl;r.updateFromServerResponse(t);const i=new Ol({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Nl(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];tl(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Dl(r.providerUserInfo):[],s=!(r.email&&r.passwordHash||(null==i?void 0:i.length)),o=new Rl;o.updateFromIdToken(n);const a=new Ol({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new xl(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash||(null==i?void 0:i.length))};return Object.assign(a,c),a}}const Ll=new Map;function Ml(e){rl(e instanceof Function,"Expected a class definition");let t=Ll.get(e);return t?(rl(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ll.set(e,t),t)}class Fl{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Fl.type="NONE";const Ul=Fl;function Vl(e,t,n){return`firebase:${e}:${t}:${n}`}class Bl{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Vl(this.userKey,r.apiKey,i),this.fullPersistenceKey=Vl("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ol._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Bl(Ml(Ul),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Ml(Ul);const s=Vl(n,e.config.apiKey,e.name);let o=null;for(const n of t)try{const t=await n._get(s);if(t){const r=Ol._fromJSON(e,t);n!==i&&(o=r),i=n;break}}catch(e){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(e){}}))),new Bl(i,e,n)):new Bl(i,e,n)}}function jl(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Hl(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ql(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Kl(t))return"Blackberry";if(Gl(t))return"Webos";if(zl(t))return"Safari";if((t.includes("chrome/")||$l(t))&&!t.includes("edge/"))return"Chrome";if(Wl(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function ql(e=Ae()){return/firefox\//i.test(e)}function zl(e=Ae()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function $l(e=Ae()){return/crios\//i.test(e)}function Hl(e=Ae()){return/iemobile/i.test(e)}function Wl(e=Ae()){return/android/i.test(e)}function Kl(e=Ae()){return/blackberry/i.test(e)}function Gl(e=Ae()){return/webos/i.test(e)}function Ql(e=Ae()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Yl(e=Ae()){return Ql(e)||Wl(e)||Gl(e)||Kl(e)||/windows phone/i.test(e)||Hl(e)}function Xl(e,t=[]){let n;switch(e){case"Browser":n=jl(Ae());break;case"Worker":n=`${jl(Ae())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${$t}/${r}`}class Jl{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(e){r(e)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(const e of t)try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==e?void 0:e.message})}}}class Zl{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class eh{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nh(this),this.idTokenSubscription=new nh(this),this.beforeStateQueue=new Jl(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ku,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ml(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Bl.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Cl(this,{idToken:e}),n=await Ol._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(jt(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null==r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null==o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(e){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(e)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return tl(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Nl(e)}catch(e){if("auth/network-request-failed"!==(null==e?void 0:e.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jt(this.app))return Promise.reject(Zu(this));const t=e?xe(e):null;return t&&tl(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&tl(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return jt(this.app)?Promise.reject(Zu(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jt(this.app)?Promise.reject(Zu(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(Ml(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e,t={}){return fl(e,"GET","/v2/passwordPolicy",dl(e,t))}(this),t=new Zl(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new we("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return fl(e,"POST","/v2/accounts:revokeToken",dl(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ml(e)||this._popupRedirectResolver;tl(t,this,"argument-error"),this.redirectPersistenceManager=await Bl.create(this,[Ml(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(tl(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"==typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return tl(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Xl(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){Gu.logLevel<=Le.WARN&&Gu.warn(`Auth (${$t}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function th(e){return xe(e)}class nh{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e){const t=new Se(e,void 0);return t.subscribe.bind(t)}((e=>this.observer=e))}get next(){return tl(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let rh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ih(e){return rh.loadJS(e)}function sh(e){return`__${e}${Math.floor(1e6*Math.random())}`}class oh{constructor(e){this.type="recaptcha-enterprise",this.auth=th(e)}async verify(e="verify",t=!1){function n(t,n,r){const i=window.grecaptcha;wl(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{(async function(e,t){return fl(e,"GET","/v2/recaptchaConfig",dl(e,t))})(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new bl(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&wl(window.grecaptcha))n(i,e,r);else{if("undefined"==typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=rh.recaptchaEnterpriseScript;0!==t.length&&(t+=i),ih(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function ah(e,t,n,r=!1){const i=new oh(e);let s;try{s=await i.verify(n)}catch(e){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function ch(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await ah(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await ah(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function uh(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function lh(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class hh{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return nl("not implemented")}_getIdTokenResponse(e){return nl("not implemented")}_linkToIdToken(e,t){return nl("not implemented")}_getReauthenticationResolver(e){return nl("not implemented")}}async function dh(e,t){return fl(e,"POST","/v1/accounts:signUp",t)}async function fh(e,t){return gl(e,"POST","/v1/accounts:signInWithPassword",dl(e,t))}class ph extends hh{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new ph(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new ph(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return ch(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",fh);case"emailLink":return async function(e,t){return gl(e,"POST","/v1/accounts:signInWithEmailLink",dl(e,t))}(e,{email:this._email,oobCode:this._password});default:Yu(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return ch(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",dh);case"emailLink":return async function(e,t){return gl(e,"POST","/v1/accounts:signInWithEmailLink",dl(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Yu(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function gh(e,t){return gl(e,"POST","/v1/accounts:signInWithIdp",dl(e,t))}class mh extends hh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new mh(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Yu("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Hu(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new mh(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return gh(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,gh(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,gh(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=_e(t)}return e}}const yh={USER_NOT_FOUND:"user-not-found"};class Ah extends hh{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ah({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ah({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return gl(e,"POST","/v1/accounts:signInWithPhoneNumber",dl(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await gl(e,"POST","/v1/accounts:signInWithPhoneNumber",dl(e,t));if(n.temporaryProof)throw vl(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return gl(e,"POST","/v1/accounts:signInWithPhoneNumber",dl(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),yh)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Ah({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class vh{constructor(e){var t,n,r,i,s,o;const a=Te(Ie(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,u=null!==(n=a.oobCode)&&void 0!==n?n:null,l=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);tl(c&&u&&l,"argument-error"),this.apiKey=c,this.operation=l,this.code=u,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=Te(Ie(e)).link,n=t?Te(Ie(t)).deep_link_id:null,r=Te(Ie(e)).deep_link_id;return(r?Te(Ie(r)).link:null)||r||n||t||e}(e);try{return new vh(t)}catch(e){return null}}}class wh{constructor(){this.providerId=wh.PROVIDER_ID}static credential(e,t){return ph._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=vh.parseLink(t);return tl(n,"argument-error"),ph._fromEmailAndCode(e,n.code,n.tenantId)}}wh.PROVIDER_ID="password",wh.EMAIL_PASSWORD_SIGN_IN_METHOD="password",wh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class bh{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ch extends bh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Eh extends Ch{constructor(){super("facebook.com")}static credential(e){return mh._fromParams({providerId:Eh.PROVIDER_ID,signInMethod:Eh.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Eh.credentialFromTaggedObject(e)}static credentialFromError(e){return Eh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Eh.credential(e.oauthAccessToken)}catch(e){return null}}}Eh.FACEBOOK_SIGN_IN_METHOD="facebook.com",Eh.PROVIDER_ID="facebook.com";class _h extends Ch{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return mh._fromParams({providerId:_h.PROVIDER_ID,signInMethod:_h.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return _h.credentialFromTaggedObject(e)}static credentialFromError(e){return _h.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return _h.credential(t,n)}catch(e){return null}}}_h.GOOGLE_SIGN_IN_METHOD="google.com",_h.PROVIDER_ID="google.com";class Th extends Ch{constructor(){super("github.com")}static credential(e){return mh._fromParams({providerId:Th.PROVIDER_ID,signInMethod:Th.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Th.credentialFromTaggedObject(e)}static credentialFromError(e){return Th.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Th.credential(e.oauthAccessToken)}catch(e){return null}}}Th.GITHUB_SIGN_IN_METHOD="github.com",Th.PROVIDER_ID="github.com";class Ih extends Ch{constructor(){super("twitter.com")}static credential(e,t){return mh._fromParams({providerId:Ih.PROVIDER_ID,signInMethod:Ih.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ih.credentialFromTaggedObject(e)}static credentialFromError(e){return Ih.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Ih.credential(t,n)}catch(e){return null}}}async function Sh(e,t){return gl(e,"POST","/v1/accounts:signUp",dl(e,t))}Ih.TWITTER_SIGN_IN_METHOD="twitter.com",Ih.PROVIDER_ID="twitter.com";class kh{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await Ol._fromIdTokenResponse(e,n,r),s=xh(n);return new kh({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=xh(n);return new kh({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function xh(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Nh extends ve{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Nh.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Nh(e,t,n,r)}}function Dh(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Nh._fromErrorAndOperation(e,n,t,r);throw n}))}async function Rh(e,t,n=!1){if(jt(e.app))return Promise.reject(Zu(e));const r="signIn",i=await Dh(e,r,t),s=await kh._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Ph(e){const t=th(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}new WeakMap;const Oh="__sak";class Lh{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Oh,"1"),this.storage.removeItem(Oh),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Mh extends Lh{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Ae();return zl(e)||Ql(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Yl(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);!function(){const e=Ae();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()||10!==document.documentMode||i===e.newValue||e.newValue===e.oldValue?r():setTimeout(r,10)}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Mh.type="LOCAL";const Fh=Mh;class Uh extends Lh{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Uh.type="SESSION";const Vh=Uh;class Bh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Bh(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function jh(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}Bh.receivers=[];class qh{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const c=jh("",20);r.port1.start();const u=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(u),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function zh(){return window}function $h(){return void 0!==zh().WorkerGlobalScope&&"function"==typeof zh().importScripts}const Hh="firebaseLocalStorageDb",Wh="firebaseLocalStorage",Kh="fbase_key";class Gh{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Qh(e,t){return e.transaction([Wh],t?"readwrite":"readonly").objectStore(Wh)}function Yh(){const e=indexedDB.open(Hh,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Wh,{keyPath:Kh})}catch(e){n(e)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Wh)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Hh);return new Gh(e).toPromise()}(),t(await Yh()))}))}))}async function Xh(e,t,n){const r=Qh(e,!0).put({[Kh]:t,value:n});return new Gh(r).toPromise()}function Jh(e,t){const n=Qh(e,!0).delete(t);return new Gh(n).toPromise()}class Zh{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Yh()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $h()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bh._getInstance($h()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new qh(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yh();return await Xh(e,Oh,"1"),await Jh(e,Oh),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Xh(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Qh(e,!1).get(t),r=await new Gh(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Jh(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Qh(e,!1).getAll();return new Gh(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Zh.type="LOCAL";const ed=Zh;sh("rcb"),new al(3e4,6e4);class td{constructor(e){this.providerId=td.PROVIDER_ID,this.auth=th(e)}verifyPhoneNumber(e,t){return async function(e,t,n){var r;const i=await n.verify();try{let s;if(tl("string"==typeof i,e,"argument-error"),tl("recaptcha"===n.type,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){tl("enroll"===t.type,e,"internal-error");const n=await function(e,t){return fl(e,"POST","/v2/accounts/mfaEnrollment:start",dl(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{tl("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;tl(n,e,"missing-multi-factor-info");const o=await function(e,t){return fl(e,"POST","/v2/accounts/mfaSignIn:start",dl(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return fl(e,"POST","/v1/accounts:sendVerificationCode",dl(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}(this.auth,e,xe(t))}static credential(e,t){return Ah._fromVerification(e,t)}static credentialFromResult(e){const t=e;return td.credentialFromTaggedObject(t)}static credentialFromError(e){return td.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?Ah._fromTokenResponse(t,n):null}}td.PROVIDER_ID="phone",td.PHONE_SIGN_IN_METHOD="phone";class nd extends hh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return gh(e,this._buildIdpRequest())}_linkToIdToken(e,t){return gh(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return gh(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function rd(e){return Rh(e.auth,new nd(e),e.bypassAuthState)}function id(e){const{auth:t,user:n}=e;return tl(n,t,"internal-error"),async function(e,t,n=!1){const{auth:r}=e;if(jt(r.app))return Promise.reject(Zu(r));const i="reauthenticate";try{const s=await Sl(e,Dh(r,i,t,e),n);tl(s.idToken,r,"internal-error");const o=Tl(s.idToken);tl(o,r,"internal-error");const{sub:a}=o;return tl(e.uid===a,r,"user-mismatch"),kh._forOperation(e,i,s)}catch(e){throw"auth/user-not-found"===(null==e?void 0:e.code)&&Yu(r,"user-mismatch"),e}}(n,new nd(e),e.bypassAuthState)}async function sd(e){const{auth:t,user:n}=e;return tl(n,t,"internal-error"),async function(e,t,n=!1){const r=await Sl(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return kh._forOperation(e,"link",r)}(n,new nd(e),e.bypassAuthState)}class od{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rd;case"linkViaPopup":case"linkViaRedirect":return sd;case"reauthViaPopup":case"reauthViaRedirect":return id;default:Yu(this.auth,"internal-error")}}resolve(e){rl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){rl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ad=new al(2e3,1e4);class cd extends od{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,cd.currentPopupAction&&cd.currentPopupAction.cancel(),cd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return tl(e,this.auth,"internal-error"),e}async onExecution(){rl(1===this.filter.length,"Popup operations only handle one event");const e=jh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Xu(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Xu(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,cd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Xu(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,ad.get())};e()}}cd.currentPopupAction=null;const ud="pendingRedirect",ld=new Map;class hd extends od{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=ld.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return Vl(ud,e.config.apiKey,e.name)}(t),r=function(e){return Ml(e._redirectPersistence)}(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}ld.set(this.auth._key(),e)}return this.bypassAuthState||ld.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function dd(e,t){ld.set(e._key(),t)}async function fd(e,t,n=!1){if(jt(e.app))return Promise.reject(Zu(e));const r=th(e),i=function(e,t){return t?Ml(t):(tl(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}(r,t),s=new hd(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class pd{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return md(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!md(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Xu(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(gd(e))}saveEventToCache(e){this.cachedEventUids.add(gd(e)),this.lastProcessedEventTime=Date.now()}}function gd(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function md({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}const yd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ad=/^https?/;function vd(e){const t=il(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Ad.test(n))return!1;if(yd.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const wd=new al(3e4,6e4);function bd(){const e=zh().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}function Cd(e){return new Promise(((t,n)=>{var r,i,s;function o(){bd(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{bd(),n(Xu(e,"network-request-failed"))},timeout:wd.get()})}if(null===(i=null===(r=zh().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=zh().gapi)||void 0===s?void 0:s.load)){const t=sh("iframefcb");return zh()[t]=()=>{gapi.load?o():n(Xu(e,"network-request-failed"))},ih(`${rh.gapiScript}?onload=${t}`).catch((e=>n(e)))}o()}})).catch((e=>{throw Ed=null,e}))}let Ed=null;const _d=new al(5e3,15e3),Td="__/auth/iframe",Id="emulator/auth/iframe",Sd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xd(e){const t=e.config;tl(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?cl(t,Id):`https://${e.config.authDomain}/${Td}`,r={apiKey:t.apiKey,appName:e.name,v:$t},i=kd.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${_e(r).slice(1)}`}const Nd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Dd{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}const Rd=encodeURIComponent("fac");async function Pd(e,t,n,r,i,s){tl(e.config.authDomain,e,"auth-domain-config-required"),tl(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:$t,eventId:i};if(t instanceof bh){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Ch){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const e of Object.keys(a))void 0===a[e]&&delete a[e];const c=await e._getAppCheckToken(),u=c?`#${Rd}=${encodeURIComponent(c)}`:"";return`${function({config:e}){return e.emulator?cl(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${_e(a).slice(1)}${u}`}const Od="webStorageSupport",Ld=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Vh,this._completeRedirectFn=fd,this._overrideRedirectResult=dd}async _openPopup(e,t,n,r){var i;return rl(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()"),function(e,t,n,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},Nd),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Ae().toLowerCase();n&&(a=$l(u)?"_blank":n),ql(u)&&(t=t||"http://localhost",c.scrollbars="yes");const l=Object.entries(c).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=Ae()){var t;return Ql(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(u)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Dd(null);const h=window.open(t||"",a,l);tl(h,e,"popup-blocked");try{h.focus()}catch(e){}return new Dd(h)}(e,await Pd(e,t,n,il(),r),jh())}async _openRedirect(e,t,n,r){return await this._originValidation(e),i=await Pd(e,t,n,il(),r),zh().location.href=i,new Promise((()=>{}));var i}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(rl(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await function(e){return Ed=Ed||Cd(e),Ed}(e),n=zh().gapi;return tl(n,e,"internal-error"),t.open({where:document.body,url:xd(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Sd,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Xu(e,"network-request-failed"),s=zh().setTimeout((()=>{r(i)}),_d.get());function o(){zh().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}(e),n=new pd(e);return t.register("authEvent",(t=>(tl(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:n.onEvent(t.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Od,{type:Od},(n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r[Od];void 0!==i&&t(!!i),Yu(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return fl(e,"GET","/v1/projects",t)}(e);for(const e of t)try{if(vd(e))return}catch(e){}Yu(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Yl()||zl()||Ql()}};var Md="@firebase/auth",Fd="1.7.5";class Ud{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){tl(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Vd=me("authIdTokenMaxAge")||300;let Bd=null;var jd;rh={loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");var i,s;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Xu("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(s=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==s?s:document).appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},jd="Browser",Vt(new Ne("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=n.options;tl(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const a={apiKey:s,authDomain:o,clientPlatform:jd,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xl(jd)},c=new eh(n,r,i,a);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ml);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(c,t),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Vt(new Ne("auth-internal",(e=>(e=>new Ud(e))(th(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Kt(Md,Fd,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(jd)),Kt(Md,Fd,"esm2017");const qd=document.querySelector(".user-container h1"),zd=document.querySelector(".sticky-notes-container"),$d=document.querySelector(".add-note-container"),Hd=document.querySelector(".add"),Wd=document.querySelector(".sign-up"),Kd=document.querySelector(".sign-up-form"),Gd=document.querySelector(".sign-up-later-btn"),Qd=document.querySelector(".log-in-form"),Yd=document.querySelector(".log-in"),Xd=document.querySelector(".log-out"),Jd=document.querySelector("label input"),Zd=document.querySelector("label textarea"),ef=[Jd,Zd],tf=document.querySelector(".date-element"),nf=document.getElementById("maybe-later-btn");Ht({apiKey:"AIzaSyAI-DheX8imePx6Nr27yutHquK4EI42kxg",authDomain:"fir-tutorial-fb9ff.firebaseapp.com",projectId:"fir-tutorial-fb9ff",storageBucket:"fir-tutorial-fb9ff.appspot.com",messagingSenderId:"386305329607",appId:"1:386305329607:web:e4c062f3d859752183b1e2"});const rf=ou(),sf=function(e=Wt()){const t=Bt(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Bt(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Ce(n.getOptions(),null!=t?t:{}))return e;Yu(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Ld,persistence:[ed,Fh,Vh]}),r=me("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Vd)return;const r=null==t?void 0:t.token;Bd!==r&&(Bd=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){xe(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e){xe(e).onIdTokenChanged((e=>t(e)),void 0,void 0)}(n)}}var i;const s=pe("auth");return s&&function(e,t,n){const r=th(e);tl(r._canInitEmulator,r,"emulator-config-failed"),tl(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),s=uh(t),{host:o,port:a}=function(e){const t=uh(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:lh(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:lh(t)}}}(t),c=null===a?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(n,`http://${s}`),n}();let of;Wd.addEventListener("click",(()=>{uf()})),Kd.addEventListener("submit",(e=>{e.preventDefault();const t=Kd.email.value,n=Kd.password.value,r=Kd.username.value;(async function(e,t,n){if(jt(e.app))return Promise.reject(Zu(e));const r=th(e),i=ch(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Sh),s=await i.catch((t=>{throw"auth/password-does-not-meet-requirements"===t.code&&Ph(e),t})),o=await kh._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o})(sf,t,n).then((e=>{let n=e.user.uid;const i={id:n,email:t,username:r};(function(e,t,n){e=Qc(e,Zc);const r=Qc(e.firestore,su),i=Lu(e.converter,t,n);return zu(r,[wu(vu(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,us.none())])})(nu(ou(),"users",n),i).then((()=>{})).catch((e=>console.log(e.message))),Kd.reset()})).catch((e=>console.log(e.message))),uf()})),Gd.addEventListener("click",(e=>{e.preventDefault(),uf()})),Yd.addEventListener("click",(()=>{Qd.classList.contains("invisible")?Qd.classList.remove("invisible"):Qd.classList.add("invisible"),Hd.classList.add("invisible"),Kd.classList.add("invisible")}));const af=(e,t)=>{const n=document.createElement("div");n.classList.add("sticky-note"),n.style.transform=`rotate(${ff()}deg)`;const r=document.createElement("button");r.id="delete-btn";const i=document.createElement("div");i.classList.add("sticky-title"),i.textContent=e.title;const s=document.createElement("div");s.classList.add("sticky-description"),s.textContent="- "+e.description;const o=document.createElement("div");o.classList.add("sticky-date"),o.textContent=hf(e.date),n.append(r,i,s,o);const a=nu(rf,"pins",t);return i.addEventListener("click",(e=>{e.target.setAttribute("contenteditable","true")})),i.addEventListener("keydown",(e=>{"Enter"===e.key&&qu(a,{title:e.target.textContent})})),s.addEventListener("click",(e=>{e.target.setAttribute("contenteditable","true");const t=e.target.textContent.split(" ");t.shift(),e.target.textContent=t})),s.addEventListener("keydown",(e=>{"Enter"===e.key&&qu(a,{description:e.target.textContent})})),r.addEventListener("click",(()=>{var e;(e=nu(ou(),"users",of,"pins",t),zu(Qc(e.firestore,su),[new Cs(e._key,us.none())])).then((()=>{})).catch((e=>console.log(e.message)))})),n};function cf(){Hd.classList.contains("invisible")?Hd.classList.remove("invisible"):Hd.classList.add("invisible"),Kd.classList.add("invisible"),Qd.classList.add("invisible")}function uf(){Kd.classList.contains("invisible")?Kd.classList.remove("invisible"):Kd.classList.add("invisible"),Hd.classList.add("invisible"),Qd.classList.add("invisible")}function lf(){ef.forEach((e=>{e.value=""}))}$d.addEventListener("click",(()=>{cf(),lf(),df(),Jd.focus()})),Hd.addEventListener("submit",(e=>{e.preventDefault();const t=sf.currentUser.uid;(function(e,t){const n=Qc(e.firestore,su),r=nu(e),i=Lu(e.converter,t);return zu(n,[wu(vu(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,us.exists(!1))]).then((()=>r))})(tu(ou(),"users",t,"pins"),{title:Hd.title.value,description:Hd.description.value,date:W(new Date(Hd.date.value),"MMM dd yyyy")}).then((()=>{lf()})).catch((e=>console.log(e.message))),cf()})),nf.addEventListener("click",(e=>{e.preventDefault(),cf()})),Xd.addEventListener("click",(()=>{(function(e){return xe(e).signOut()})(sf).then((()=>{zd.textContent="",Yd.classList.remove("invisible"),Xd.classList.add("invisible"),qd.textContent="User?"})).catch((e=>console.log(e.message)))})),Qd.addEventListener("submit",(e=>{e.preventDefault();const t=Qd.email.value,n=Qd.password.value;(function(e,t,n){return jt(e.app)?Promise.reject(Zu(e)):async function(e,t){return Rh(th(e),t)}(xe(e),wh.credential(t,n)).catch((async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&Ph(e),t}))})(sf,t,n).then((()=>{Xd.classList.remove("invisible"),Yd.classList.add("invisible")})).catch((e=>console.log(e.message))),Qd.classList.add("invisible")}));const hf=e=>{if(""!==e)return"Complete by "+W(new Date(e),"MMM dd yyyy")},df=()=>{const e=W((new Date).toDateString().split(" ").join("/"),"yyyy-MM-dd");tf.value=`${e.toString()}`},ff=()=>{const e=Math.ceil(-12),t=Math.floor(12);return Math.floor(Math.random()*(t-e))+e};!function(e,t){xe(e).onAuthStateChanged(t,void 0,void 0)}(sf,(e=>{if(!e)return Xd.classList.add("invisible");Yd.classList.add("invisible"),Xd.classList.remove("invisible"),of=sf.currentUser.uid,function(e){e=Qc(e,Zc);const t=Qc(e.firestore,su);return qc(au(t),e._key).then((n=>$u(t,e,n)))}(nu(rf,"users",of)).then((e=>{let t=e.data().username;qd.textContent=t})),function(e,...t){var n,r,i;e=xe(e);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof t[o]||iu(t[o])||(s=t[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(iu(t[o])){const e=t[o];t[o]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[o+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[o+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let c,u,l;if(e instanceof Zc)u=Qc(e.firestore,su),l=Ei(e._key.path),c={next:n=>{t[o]&&t[o]($u(u,e,n))},error:t[o+1],complete:t[o+2]};else{const n=Qc(e,Jc);u=Qc(n.firestore,su),l=n._query;const r=new ju(u);c={next:e=>{t[o]&&t[o](new Vu(u,r,n,e))},error:t[o+1],complete:t[o+2]},function(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new On(Pn.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(e._query)}!function(e,t,n,r){const i=new Mc(r),s=new sc(t,i,n);e.asyncQueue.enqueueAndForget((async()=>Za(await jc(e),s)))}(au(u),l,a,c)}(tu(rf,"users",of,"pins"),(e=>{zd.textContent="",e.docs.forEach((e=>{zd.appendChild(af(e.data(),e.id))}))}))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEdBQUcsRUFFL0N3WCxNQUFPckcsRUFBRWxQLEVBQUksR0FDYnFhLFNBQVVuTCxFQUFFbFAsRUFBSSxJQXhrQ3hCLFNBQTREakMsR0FDNUQsR0FBSSxNQUE2QkEsRUFBRWk2QyxXQUFhLElBQU1qNkMsRUFBRWc2QyxnQkFBZ0J2K0MsT0FBUSxNQUFNLElBQUlzckMsR0FBZS9YLEdBQUU0WCxjQUFlLHlFQUM5SCxDQXVrQ1cwcEUsQ0FBbUR0d0csRUFBRW93RSxPQUM1RCxFQUNPLFNBQXlDcHdFLEVBQUdtUixFQUFHeFAsRUFBR3N0QixHQUNyRCxNQUFNdHpCLEVBQUksSUFBSTB3RSxHQUF3QnA5QyxHQUFJeGdCLEVBQUksSUFBSXc1RCxHQUF3QjkyRCxFQUFHeFYsRUFBR2dHLEdBQ3pFM0IsRUFBRThoRSxXQUFXM0Msa0JBQWlCLFNBQWFtSSxTQUFtQ3NHLEdBQTBCNXRFLEdBQUl5TyxJQUl2SCxDQU5PLENBTUxpbEUsR0FBMEJya0UsR0FBSWMsRUFBRytKLEVBQUdwWSxFQUMxQyxDR2owb0JFeXVHLENBRGU1L0IsR0FBV3BsRCxHQUFJLFFBQVNxYyxHQUFhLFNBQ2hDK2dDLElBQ2xCaWpDLEdBQW1Cd0QsWUFBYyxHQUNqQ3ptQyxFQUFTalgsS0FBSzMyQyxTQUFTNjZDLElBQ3JCZzJDLEdBQW1CenJHLFlBQVkydUcsR0FBb0JsNUMsRUFBSXQ0RCxPQUFRczRELEVBQUk5NkQsSUFBSSxHQUN2RSxHQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9tZS8uL3NyYy9zdHlsZXMuY3NzIiwid2VicGFjazovL2RvbWUvLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzIiwid2VicGFjazovL2RvbWUvLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvZ2V0VXJsLmpzIiwid2VicGFjazovL2RvbWUvLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvc291cmNlTWFwcy5qcyIsIndlYnBhY2s6Ly9kb21lLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzIiwid2VicGFjazovL2RvbWUvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRCeVNlbGVjdG9yLmpzIiwid2VicGFjazovL2RvbWUvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vZG9tZS8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3NldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlcy5qcyIsIndlYnBhY2s6Ly9kb21lLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVEb21BUEkuanMiLCJ3ZWJwYWNrOi8vZG9tZS8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlVGFnVHJhbnNmb3JtLmpzIiwid2VicGFjazovL2RvbWUvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vZG9tZS93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly9kb21lL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9kb21lL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vZG9tZS93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2RvbWUvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vZG9tZS93ZWJwYWNrL3J1bnRpbWUvanNvbnAgY2h1bmsgbG9hZGluZyIsIndlYnBhY2s6Ly9kb21lL3dlYnBhY2svcnVudGltZS9ub25jZSIsIndlYnBhY2s6Ly9kb21lLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2xvY2FsZS9lbi1VUy9fbGliL2Zvcm1hdERpc3RhbmNlLm1qcyIsIndlYnBhY2s6Ly9kb21lLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2xvY2FsZS9fbGliL2J1aWxkRm9ybWF0TG9uZ0ZuLm1qcyIsIndlYnBhY2s6Ly9kb21lLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2xvY2FsZS9lbi1VUy9fbGliL2Zvcm1hdExvbmcubWpzIiwid2VicGFjazovL2RvbWUvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvbG9jYWxlL2VuLVVTL19saWIvZm9ybWF0UmVsYXRpdmUubWpzIiwid2VicGFjazovL2RvbWUvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvbG9jYWxlL19saWIvYnVpbGRMb2NhbGl6ZUZuLm1qcyIsIndlYnBhY2s6Ly9kb21lLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2xvY2FsZS9lbi1VUy9fbGliL2xvY2FsaXplLm1qcyIsIndlYnBhY2s6Ly9kb21lLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2xvY2FsZS9fbGliL2J1aWxkTWF0Y2hGbi5tanMiLCJ3ZWJwYWNrOi8vZG9tZS8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9sb2NhbGUvZW4tVVMvX2xpYi9tYXRjaC5tanMiLCJ3ZWJwYWNrOi8vZG9tZS8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9sb2NhbGUvX2xpYi9idWlsZE1hdGNoUGF0dGVybkZuLm1qcyIsIndlYnBhY2s6Ly9kb21lLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2xvY2FsZS9lbi1VUy5tanMiLCJ3ZWJwYWNrOi8vZG9tZS8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9fbGliL2RlZmF1bHRPcHRpb25zLm1qcyIsIndlYnBhY2s6Ly9kb21lLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2NvbnN0YW50cy5tanMiLCJ3ZWJwYWNrOi8vZG9tZS8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy90b0RhdGUubWpzIiwid2VicGFjazovL2RvbWUvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvc3RhcnRPZkRheS5tanMiLCJ3ZWJwYWNrOi8vZG9tZS8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9fbGliL2dldFRpbWV6b25lT2Zmc2V0SW5NaWxsaXNlY29uZHMubWpzIiwid2VicGFjazovL2RvbWUvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvY29uc3RydWN0RnJvbS5tanMiLCJ3ZWJwYWNrOi8vZG9tZS8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9nZXREYXlPZlllYXIubWpzIiwid2VicGFjazovL2RvbWUvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZGlmZmVyZW5jZUluQ2FsZW5kYXJEYXlzLm1qcyIsIndlYnBhY2s6Ly9kb21lLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL3N0YXJ0T2ZZZWFyLm1qcyIsIndlYnBhY2s6Ly9kb21lLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL3N0YXJ0T2ZXZWVrLm1qcyIsIndlYnBhY2s6Ly9kb21lLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL3N0YXJ0T2ZJU09XZWVrLm1qcyIsIndlYnBhY2s6Ly9kb21lLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2dldElTT1dlZWtZZWFyLm1qcyIsIndlYnBhY2s6Ly9kb21lLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2dldElTT1dlZWsubWpzIiwid2VicGFjazovL2RvbWUvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvc3RhcnRPZklTT1dlZWtZZWFyLm1qcyIsIndlYnBhY2s6Ly9kb21lLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2dldFdlZWtZZWFyLm1qcyIsIndlYnBhY2s6Ly9kb21lLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2dldFdlZWsubWpzIiwid2VicGFjazovL2RvbWUvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvc3RhcnRPZldlZWtZZWFyLm1qcyIsIndlYnBhY2s6Ly9kb21lLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL19saWIvYWRkTGVhZGluZ1plcm9zLm1qcyIsIndlYnBhY2s6Ly9kb21lLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL19saWIvZm9ybWF0L2xpZ2h0Rm9ybWF0dGVycy5tanMiLCJ3ZWJwYWNrOi8vZG9tZS8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9fbGliL2Zvcm1hdC9mb3JtYXR0ZXJzLm1qcyIsIndlYnBhY2s6Ly9kb21lLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL19saWIvZm9ybWF0L2xvbmdGb3JtYXR0ZXJzLm1qcyIsIndlYnBhY2s6Ly9kb21lLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL19saWIvcHJvdGVjdGVkVG9rZW5zLm1qcyIsIndlYnBhY2s6Ly9kb21lLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2lzVmFsaWQubWpzIiwid2VicGFjazovL2RvbWUvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvaXNEYXRlLm1qcyIsIndlYnBhY2s6Ly9kb21lLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2Zvcm1hdC5tanMiLCJ3ZWJwYWNrOi8vZG9tZS8uL3NyYy9zdHlsZXMuY3NzPzIzZGUiLCJ3ZWJwYWNrOi8vZG9tZS8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvdXRpbC9kaXN0L2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vZG9tZS8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvY29tcG9uZW50L2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vZG9tZS8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvbG9nZ2VyL2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vZG9tZS8uL25vZGVfbW9kdWxlcy9pZGIvYnVpbGQvd3JhcC1pZGItdmFsdWUuanMiLCJ3ZWJwYWNrOi8vZG9tZS8uL25vZGVfbW9kdWxlcy9pZGIvYnVpbGQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vZG9tZS8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvYXBwL2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vZG9tZS8uL25vZGVfbW9kdWxlcy9maXJlYmFzZS9hcHAvZGlzdC9lc20vaW5kZXguZXNtLmpzIiwid2VicGFjazovL2RvbWUvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3dlYmNoYW5uZWwtd3JhcHBlci9kaXN0L2Jsb29tLWJsb2IvZXNtL2Jsb29tX2Jsb2JfZXMyMDE4LmpzIiwid2VicGFjazovL2RvbWUvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3dlYmNoYW5uZWwtd3JhcHBlci9kaXN0L3dlYmNoYW5uZWwtYmxvYi9lc20vd2ViY2hhbm5lbF9ibG9iX2VzMjAxOC5qcyIsIndlYnBhY2s6Ly9kb21lLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9maXJlc3RvcmUvZGlzdC9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL2RvbWUvLi9ub2RlX21vZHVsZXMvdHNsaWIvdHNsaWIuZXM2Lm1qcyIsIndlYnBhY2s6Ly9kb21lLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9hdXRoL2Rpc3QvZXNtMjAxNy9pbmRleC01NDczODEzNi5qcyIsIndlYnBhY2s6Ly9kb21lLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEltcG9ydHNcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fIGZyb20gXCIuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvc291cmNlTWFwcy5qc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyBmcm9tIFwiLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfR0VUX1VSTF9JTVBPUlRfX18gZnJvbSBcIi4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9nZXRVcmwuanNcIjtcbnZhciBfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMF9fXyA9IG5ldyBVUkwoXCIuL2ZvbnQvVGhlIFN1bmRheS5vdGZcIiwgaW1wb3J0Lm1ldGEudXJsKTtcbnZhciBfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMV9fXyA9IG5ldyBVUkwoXCIuL2ltZ3MvY29ya2JvYXJkLmpwZ1wiLCBpbXBvcnQubWV0YS51cmwpO1xudmFyIF9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8yX19fID0gbmV3IFVSTChcIi4vaW1ncy9zdHJpcHBlZCBwYXBlci5wbmdcIiwgaW1wb3J0Lm1ldGEudXJsKTtcbnZhciBfX19DU1NfTE9BREVSX0VYUE9SVF9fXyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fKTtcbnZhciBfX19DU1NfTE9BREVSX1VSTF9SRVBMQUNFTUVOVF8wX19fID0gX19fQ1NTX0xPQURFUl9HRVRfVVJMX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMF9fXyk7XG52YXIgX19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMV9fXyA9IF9fX0NTU19MT0FERVJfR0VUX1VSTF9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzFfX18pO1xudmFyIF9fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzJfX18gPSBfX19DU1NfTE9BREVSX0dFVF9VUkxfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8yX19fKTtcbi8vIE1vZHVsZVxuX19fQ1NTX0xPQURFUl9FWFBPUlRfX18ucHVzaChbbW9kdWxlLmlkLCBgQGZvbnQtZmFjZXtmb250LWZhbWlseTpcIlN1bmRheVwiO3NyYzp1cmwoJHtfX19DU1NfTE9BREVSX1VSTF9SRVBMQUNFTUVOVF8wX19ffSl9KnttYXJnaW46MDtwYWRkaW5nOjA7Ym94LXNpemluZzpib3JkZXItYm94O2ZvbnQtc2l6ZToyNHB4O2ZvbnQtZmFtaWx5OlwiU3VuZGF5XCJ9Ym9keSxtYWluLC51c2VyLWNvbnRhaW5lciwuc3RpY2t5LW5vdGUsLmFkZCwuc2lnbi11cC1mb3JtLC5sb2ctaW4tZm9ybSxsYWJlbCwuaW5wdXRzLC5zdWJtaXQtYnV0dG9uc3tkaXNwbGF5OmZsZXh9Ym9keXtoZWlnaHQ6MTAwdmg7d2lkdGg6MTAwJTtmbGV4LWRpcmVjdGlvbjpjb2x1bW47anVzdGlmeS1jb250ZW50OmNlbnRlcjtiYWNrZ3JvdW5kLWNvbG9yOiNjYmZmY2J9bWFpbntoZWlnaHQ6MTAwdmg7d2lkdGg6MTAwJTtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2FsaWduLWl0ZW1zOmNlbnRlcjtwb3NpdGlvbjpyZWxhdGl2ZX1tYWluIC5zaWduLXVwLWZvcm0sbWFpbiAubG9nLWluLWZvcm17cG9zaXRpb246YWJzb2x1dGU7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2p1c3RpZnktY29udGVudDpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyO2hlaWdodDotbW96LWZpdC1jb250ZW50O2hlaWdodDpmaXQtY29udGVudDt3aWR0aDozMjBweDtwYWRkaW5nOjIwcHggMzBweCAyMHB4IDMwcHg7Ym9yZGVyOjJweCBzb2xpZCAjZWY3YTg1O2JveC1zaGFkb3c6N3B4IDdweCAjZWY3YTg1O2JhY2tncm91bmQtY29sb3I6I2ZmY2ZkMTt6LWluZGV4OjE7Z2FwOjIwcHh9bWFpbiAuc2lnbi11cC1mb3JtIC5pbnB1dHN7ZmxleC1kaXJlY3Rpb246Y29sdW1uO3dpZHRoOjEwMCV9bWFpbiAuc2lnbi11cC1mb3JtIC5pbnB1dHMgbGFiZWx7Zm9udC1zaXplOi44NWVtO3RleHQtYWxpZ246Y2VudGVyO2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjVweH1tYWluIC5zaWduLXVwLWZvcm0gLmlucHV0cyBsYWJlbCBpbnB1dHtoZWlnaHQ6MzVweDt3aWR0aDoyODBweDtwYWRkaW5nOjEwcHggMCAxMHB4IDB9bWFpbiAuc2lnbi11cC1mb3JtICNzaWduLXVwLWJ0bntwYWRkaW5nOjEwcHg7Ym9yZGVyOm5vbmU7cG9zaXRpb246cmVsYXRpdmU7YmFja2dyb3VuZC1jb2xvcjojY2ZjO2JveC1zaGFkb3c6NHB4IDRweCAjNzFjOTcxfW1haW4gLnNpZ24tdXAtZm9ybSAjc2lnbi11cC1idG46aG92ZXI6YmVmb3Jle2NvbnRlbnQ6XCJcIjtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtyaWdodDotNnB4O2JvcmRlci10b3A6MTNweCBzb2xpZCAjZmZjZmQxO2JvcmRlci1yaWdodDoxM3B4IHNvbGlkICM1MTkyNTE7d2lkdGg6M3B4O3RyYW5zZm9ybTpyb3RhdGUoOTBkZWcpfW1haW4gLnNpZ24tdXAtZm9ybSAjc2lnbi11cC1idG46aG92ZXJ7Y3Vyc29yOnBvaW50ZXI7dGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZTtwYWRkaW5nOjE1cHg7bWFyZ2luOi01cHg7YmFja2dyb3VuZC1jb2xvcjojNzFjOTcxO2JveC1zaGFkb3c6NHB4IDRweCAjNTE5MjUxfW1haW4gLnNpZ24tdXAtZm9ybSAuc2lnbi11cC1sYXRlci1idG57cGFkZGluZzoxMHB4O2JvcmRlcjpub25lO3Bvc2l0aW9uOnJlbGF0aXZlO2JhY2tncm91bmQtY29sb3I6I2Y5OTU4NDtib3gtc2hhZG93OjRweCA0cHggI2VmN2E4NX1tYWluIC5zaWduLXVwLWZvcm0gLnNpZ24tdXAtbGF0ZXItYnRuOmhvdmVyOmJlZm9yZXtjb250ZW50OlwiXCI7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7cmlnaHQ6LTZweDtib3JkZXItdG9wOjEzcHggc29saWQgI2ZmY2ZkMTtib3JkZXItcmlnaHQ6MTNweCBzb2xpZCAjYWQ1OTYyO3dpZHRoOjNweDt0cmFuc2Zvcm06cm90YXRlKDkwZGVnKX1tYWluIC5zaWduLXVwLWZvcm0gLnNpZ24tdXAtbGF0ZXItYnRuOmhvdmVye2N1cnNvcjpwb2ludGVyO3RleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmU7cGFkZGluZzoxNXB4O21hcmdpbjotNXB4O2JhY2tncm91bmQtY29sb3I6I2VmN2E4NTtib3gtc2hhZG93OjRweCA0cHggI2FkNTk2Mn1tYWluIC5sb2ctaW4tZm9ybSBsYWJlbHtmb250LXNpemU6Ljg1ZW07dGV4dC1hbGlnbjpjZW50ZXI7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6NXB4fW1haW4gLmxvZy1pbi1mb3JtIGxhYmVsIGlucHV0e2hlaWdodDozNXB4O3dpZHRoOjI4MHB4O3BhZGRpbmc6MTBweCAwIDEwcHggMH1tYWluIC5sb2ctaW4tZm9ybSAubG9nLWluLWZvcm0tYnRue3BhZGRpbmc6MTBweDtib3JkZXI6bm9uZTtwb3NpdGlvbjpyZWxhdGl2ZTtiYWNrZ3JvdW5kLWNvbG9yOiNjZmM7Ym94LXNoYWRvdzo0cHggNHB4ICM3MWM5NzF9bWFpbiAubG9nLWluLWZvcm0gLmxvZy1pbi1mb3JtLWJ0bjpob3ZlcjpiZWZvcmV7Y29udGVudDpcIlwiO3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO3JpZ2h0Oi02cHg7Ym9yZGVyLXRvcDoxM3B4IHNvbGlkICNmZmNmZDE7Ym9yZGVyLXJpZ2h0OjEzcHggc29saWQgIzUxOTI1MTt3aWR0aDozcHg7dHJhbnNmb3JtOnJvdGF0ZSg5MGRlZyl9bWFpbiAubG9nLWluLWZvcm0gLmxvZy1pbi1mb3JtLWJ0bjpob3ZlcntjdXJzb3I6cG9pbnRlcjt0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lO3BhZGRpbmc6MTVweDttYXJnaW46LTVweDtiYWNrZ3JvdW5kLWNvbG9yOiM3MWM5NzE7Ym94LXNoYWRvdzo0cHggNHB4ICM1MTkyNTF9LmNvbnRlbnQtY29udGFpbmVye2JhY2tncm91bmQ6dXJsKCR7X19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMV9fX30pIG5vLXJlcGVhdCBjZW50ZXIgY2VudGVyL2NvbnRhaW47cGFkZGluZzo1NXB4O3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6ZmxleH0uY29udGVudC1jb250YWluZXIgLnVzZXItYXV0aC1jb250YWluZXJ7cG9zaXRpb246YWJzb2x1dGU7dG9wOi00MHB4O2xlZnQ6MTUwcHh9LmNvbnRlbnQtY29udGFpbmVyIC51c2VyLWF1dGgtY29udGFpbmVyIC5sb2ctb3V0e3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6ODVweDt0b3A6MDt3aWR0aDoxMDBweH0uY29udGVudC1jb250YWluZXIgLnVzZXItYXV0aC1jb250YWluZXIgYnV0dG9ue2JhY2tncm91bmQtY29sb3I6cmdiYSgwLDAsMCwwKTtib3JkZXI6bm9uZX0uY29udGVudC1jb250YWluZXIgLnVzZXItYXV0aC1jb250YWluZXIgYnV0dG9uOmhvdmVye2N1cnNvcjpwb2ludGVyO3RleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmV9LnVzZXItY29udGFpbmVye3Bvc2l0aW9uOmFic29sdXRlO3RvcDotNjBweDtsZWZ0Oi0xMDBweDtoZWlnaHQ6MTgwcHg7d2lkdGg6MjQwcHg7YmFja2dyb3VuZDp1cmwoJHtfX19DU1NfTE9BREVSX1VSTF9SRVBMQUNFTUVOVF8yX19ffSkgbm8tcmVwZWF0IGNlbnRlciBjZW50ZXIvY29udGFpbjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2FsaWduLWl0ZW1zOmNlbnRlcjt0cmFuc2Zvcm06cm90YXRlKC0zMGRlZyk7ei1pbmRleDoxO3BhZGRpbmc6MTBweH0udXNlci1jb250YWluZXIgaDF7dGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZTtmb250LXNpemU6MmVtfS5hZGQtbm90ZS1jb250YWluZXJ7cG9zaXRpb246YWJzb2x1dGU7dG9wOjBweDtyaWdodDotNDBweDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmNmZDE7Ym94LXNoYWRvdzo0cHggNHB4ICNlZjdhODU7cGFkZGluZzoxMHB4O3RyYW5zZm9ybTpyb3RhdGUoMjVkZWcpfS5hZGQtbm90ZS1jb250YWluZXI6aG92ZXJ7dGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZTtjdXJzb3I6cG9pbnRlcjtiYWNrZ3JvdW5kLWNvbG9yOiNlZjdhODU7Ym94LXNoYWRvdzo0cHggNHB4ICNjYzYwNmJ9LmFkZC1ub3RlLWNvbnRhaW5lcjpob3ZlcjpiZWZvcmV7Y29udGVudDpcIlwiO3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO3JpZ2h0Oi02cHg7Ym9yZGVyLXRvcDoxNXB4IHNvbGlkICNjYmZmY2I7Ym9yZGVyLXJpZ2h0OjE0LjVweCBzb2xpZCAjY2M2MDZiO3dpZHRoOjNweDt0cmFuc2Zvcm06cm90YXRlKDkwZGVnKX0uc3RpY2t5LW5vdGVzLWNvbnRhaW5lcntkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOnJlcGVhdCg2LCAyMTBweCk7Z3JpZC10ZW1wbGF0ZS1yb3dzOnJlcGVhdCgzLCAxOTBweCk7cm93LWdhcDoxMHB4Oy1tb3otY29sdW1uLWdhcDo4cHg7Y29sdW1uLWdhcDo4cHh9LnN0aWNreS1ub3Rle3Bvc2l0aW9uOnJlbGF0aXZlO2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtoZWlnaHQ6MTkwcHg7d2lkdGg6MTkwcHg7YmFja2dyb3VuZC1jb2xvcjojZmZjZmQxO3BhZGRpbmc6MTRweDtsZXR0ZXItc3BhY2luZzoxcHg7Ym94LXNoYWRvdzo0cHggNHB4ICNlZjdhODU7Ym9yZGVyOjJweCBzb2xpZCAjZWY3YTg1O2dhcDozcHh9LnN0aWNreS1ub3RlICNkZWxldGUtYnRue2JhY2tncm91bmQtY29sb3I6cmVkO2JveC1zaGFkb3c6M3B4IDNweCAjOGQwMDAwO2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6MTAwJTt3aWR0aDoyMHB4O2hlaWdodDoyMHB4O2FsaWduLXNlbGY6Y2VudGVyO21hcmdpbi10b3A6LTEwcHh9LnN0aWNreS1ub3RlICNkZWxldGUtYnRuOmhvdmVye2N1cnNvcjpwb2ludGVyO2JhY2tncm91bmQtY29sb3I6IzhkMDAwMDtib3gtc2hhZG93OjNweCAzcHggIzMwMH0uc3RpY2t5LW5vdGUgLnN0aWNreS10aXRsZXtmb250LXNpemU6LjdlbTt0ZXh0LWFsaWduOmNlbnRlcn0uc3RpY2t5LW5vdGUgLnN0aWNreS1kZXNjcmlwdGlvbntmb250LXNpemU6LjY3ZW07bWFyZ2luLXRvcDo4cHg7d29yZC13cmFwOmJyZWFrLXdvcmQ7b3ZlcmZsb3c6c2Nyb2xsfS5zdGlja3ktbm90ZSAuc3RpY2t5LWRhdGV7cG9zaXRpb246YWJzb2x1dGU7Zm9udC1zaXplOi41ZW07Ym90dG9tOjRweDtyaWdodDo0cHh9LmFkZHtwb3NpdGlvbjphYnNvbHV0ZTttYXJnaW4tbGVmdDphdXRvO21hcmdpbi1yaWdodDphdXRvO2xlZnQ6MDtyaWdodDowO2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6MTVweDtoZWlnaHQ6LW1vei1maXQtY29udGVudDtoZWlnaHQ6Zml0LWNvbnRlbnQ7d2lkdGg6MzYwcHg7cGFkZGluZzoyMHB4IDMwcHggMjBweCAzMHB4O2JvcmRlcjoycHggc29saWQgI2VmN2E4NTtib3gtc2hhZG93OjdweCA3cHggI2VmN2E4NTtiYWNrZ3JvdW5kLWNvbG9yOiNmZmNmZDE7ei1pbmRleDoxfS5hZGQgLmlucHV0c3tmbGV4LWRpcmVjdGlvbjpjb2x1bW47Z2FwOjEwcHh9LmFkZCAuaW5wdXRzIGxhYmVse2ZvbnQtc2l6ZTouODVlbTt0ZXh0LWFsaWduOmNlbnRlcjtmbGV4LWRpcmVjdGlvbjpjb2x1bW47YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo1cHh9LmFkZCAuaW5wdXRzIGxhYmVsIGlucHV0e2hlaWdodDo1MHB4O3dpZHRoOjI4MHB4O3BhZGRpbmc6MTBweH0uYWRkIC5pbnB1dHMgdGV4dGFyZWF7cGFkZGluZzo1cHg7Zm9udC1zaXplOjFlbTtyZXNpemU6bm9uZX0uYWRkIC5pbnB1dHMgI2RhdGV7YmFja2dyb3VuZC1jb2xvcjojZmZmO3RleHQtYWxpZ246Y2VudGVyO2ZvbnQtc2l6ZToxZW07aGVpZ2h0OjQ1cHh9LmludmlzaWJsZXtkaXNwbGF5Om5vbmV9LnN1Ym1pdC1idXR0b25ze3dpZHRoOjEwMCU7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW59LnN1Ym1pdC1idXR0b25zICNwaW4taXQtYnRuLC5zdWJtaXQtYnV0dG9ucyAjbWF5YmUtbGF0ZXItYnRue3BhZGRpbmc6MTBweDtib3JkZXI6bm9uZTtwb3NpdGlvbjpyZWxhdGl2ZX0uc3VibWl0LWJ1dHRvbnMgI3Bpbi1pdC1idG46aG92ZXI6YmVmb3JlLC5zdWJtaXQtYnV0dG9ucyAjbWF5YmUtbGF0ZXItYnRuOmhvdmVyOmJlZm9yZXtjb250ZW50OlwiXCI7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7cmlnaHQ6LTZweDtib3JkZXItdG9wOjEzcHggc29saWQgI2ZmY2ZkMTtib3JkZXItcmlnaHQ6MTNweCBzb2xpZCAjNTE5MjUxO3dpZHRoOjNweDt0cmFuc2Zvcm06cm90YXRlKDkwZGVnKX0uc3VibWl0LWJ1dHRvbnMgI3Bpbi1pdC1idG46aG92ZXIsLnN1Ym1pdC1idXR0b25zICNtYXliZS1sYXRlci1idG46aG92ZXJ7Y3Vyc29yOnBvaW50ZXI7dGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZTtwYWRkaW5nOjE1cHg7bWFyZ2luOi01cHh9LnN1Ym1pdC1idXR0b25zICNwaW4taXQtYnRue2JhY2tncm91bmQtY29sb3I6I2NmYztib3gtc2hhZG93OjRweCA0cHggIzcxYzk3MX0uc3VibWl0LWJ1dHRvbnMgI3Bpbi1pdC1idG46aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojNzFjOTcxO2JveC1zaGFkb3c6NHB4IDRweCAjNTE5MjUxfS5zdWJtaXQtYnV0dG9ucyAjbWF5YmUtbGF0ZXItYnRue2JhY2tncm91bmQtY29sb3I6I2Y5OTU4NDtib3gtc2hhZG93OjRweCA0cHggI2VmN2E4NX0uc3VibWl0LWJ1dHRvbnMgI21heWJlLWxhdGVyLWJ0bjpob3ZlcjpiZWZvcmV7Y29udGVudDpcIlwiO3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO3JpZ2h0Oi02cHg7Ym9yZGVyLXJpZ2h0OjEzcHggc29saWQgI2FkNTk2Mjt3aWR0aDozcHg7dHJhbnNmb3JtOnJvdGF0ZSg5MGRlZyl9LnN1Ym1pdC1idXR0b25zICNtYXliZS1sYXRlci1idG46aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojZWY3YTg1O2JveC1zaGFkb3c6NHB4IDRweCAjYWQ1OTYyfWhye2JvcmRlcjpub25lO2hlaWdodDoxcHg7YmFja2dyb3VuZC1jb2xvcjojMDAwfWZvb3RlcntwYWRkaW5nOjI1cHg7Zm9udC1zaXplOjEuMmVtO3RleHQtYWxpZ246Y2VudGVyfWZvb3RlciAuZmEtZ2l0aHVie2NvbG9yOiMwMDA7Ym9yZGVyOm5vbmU7dGV4dC1kZWNvcmF0aW9uOm5vbmV9Zm9vdGVyIC5mYS1naXRodWI6aG92ZXJ7Y3Vyc29yOnBvaW50ZXI7Y29sb3I6cmdiYSgwLDAsMCwuNSl9YCwgXCJcIix7XCJ2ZXJzaW9uXCI6MyxcInNvdXJjZXNcIjpbXCJ3ZWJwYWNrOi8vLi9zcmMvc3R5bGVzLmNzc1wiXSxcIm5hbWVzXCI6W10sXCJtYXBwaW5nc1wiOlwiQUFBQSxXQUNFLG9CQUFBLENBQ0EsMkNBQUEsQ0FFRixFQUNFLFFBQUEsQ0FDQSxTQUFBLENBQ0EscUJBQUEsQ0FDQSxjQUFBLENBQ0Esb0JBQUEsQ0FHRixxR0FDRSxZQUFBLENBR0YsS0FDRSxZQUFBLENBQ0EsVUFBQSxDQUNBLHFCQUFBLENBQ0Esc0JBQUEsQ0FDQSx3QkFBQSxDQUdGLEtBQ0UsWUFBQSxDQUNBLFVBQUEsQ0FDQSxzQkFBQSxDQUNBLGtCQUFBLENBQ0EsaUJBQUEsQ0FFRixxQ0FDRSxpQkFBQSxDQUNBLHFCQUFBLENBQ0Esc0JBQUEsQ0FDQSxrQkFBQSxDQUNBLHVCQUFBLENBQ0Esa0JBQUEsQ0FDQSxXQUFBLENBQ0EsMkJBQUEsQ0FDQSx3QkFBQSxDQUNBLDBCQUFBLENBQ0Esd0JBQUEsQ0FDQSxTQUFBLENBQ0EsUUFBQSxDQUVGLDJCQUNFLHFCQUFBLENBQ0EsVUFBQSxDQUVGLGlDQUNFLGVBQUEsQ0FDQSxpQkFBQSxDQUNBLHFCQUFBLENBQ0Esa0JBQUEsQ0FDQSxPQUFBLENBRUYsdUNBQ0UsV0FBQSxDQUNBLFdBQUEsQ0FDQSxxQkFBQSxDQUVGLGdDQUNFLFlBQUEsQ0FDQSxXQUFBLENBQ0EsaUJBQUEsQ0FDQSxxQkFBQSxDQUNBLDBCQUFBLENBRUYsNkNBQ0UsVUFBQSxDQUNBLGlCQUFBLENBQ0EsS0FBQSxDQUNBLFVBQUEsQ0FDQSw2QkFBQSxDQUNBLCtCQUFBLENBQ0EsU0FBQSxDQUNBLHVCQUFBLENBRUYsc0NBQ0UsY0FBQSxDQUNBLHlCQUFBLENBQ0Es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QUEsQ0FDQSxrQkFBQSxDQUNBLE9BQUEsQ0FFRix5QkFDRSxXQUFBLENBQ0EsV0FBQSxDQUNBLFlBQUEsQ0FFRixzQkFDRSxXQUFBLENBQ0EsYUFBQSxDQUNBLFdBQUEsQ0FFRixtQkFDRSxxQkFBQSxDQUNBLGlCQUFBLENBQ0EsYUFBQSxDQUNBLFdBQUEsQ0FHRixXQUNFLFlBQUEsQ0FHRixnQkFDRSxVQUFBLENBQ0EsNkJBQUEsQ0FFRiw2REFDRSxZQUFBLENBQ0EsV0FBQSxDQUNBLGlCQUFBLENBRUYsdUZBQ0UsVUFBQSxDQUNBLGlCQUFBLENBQ0EsS0FBQSxDQUNBLFVBQUEsQ0FDQSw2QkFBQSxDQUNBLCtCQUFBLENBQ0EsU0FBQSxDQUNBLHVCQUFBLENBRUYseUVBQ0UsY0FBQSxDQUNBLHlCQUFBLENBQ0EsWUFBQSxDQUNBLFdBQUEsQ0FFRiw0QkFDRSxxQkFBQSxDQUNBLDBCQUFBLENBRUYsa0NBQ0Usd0JBQUEsQ0FDQSwwQkFBQSxDQUVGLGlDQUNFLHdCQUFBLENBQ0EsMEJBQUEsQ0FFRiw4Q0FDRSxVQUFBLENBQ0EsaUJBQUEsQ0FDQSxLQUFBLENBQ0EsVUFBQSxDQUNBLCtCQUFBLENBQ0EsU0FBQSxDQUNBLHVCQUFBLENBRUYsdUNBQ0Usd0JBQUEsQ0FDQSwwQkFBQSxDQUdGLEdBQ0UsV0FBQSxDQUNBLFVBQUEsQ0FDQSxxQkFBQSxDQUdGLE9BQ0UsWUFBQSxDQUNBLGVBQUEsQ0FDQSxpQkFBQSxDQUVGLGtCQUNFLFVBQUEsQ0FDQSxXQUFBLENBQ0Esb0JBQUEsQ0FFRix3QkFDRSxjQUFBLENBQ0Esb0JBQUFcIixcInNvdXJjZXNDb250ZW50XCI6W1wiQGZvbnQtZmFjZSB7XFxuICBmb250LWZhbWlseTogXFxcIlN1bmRheVxcXCI7XFxuICBzcmM6IHVybChcXFwiLi9mb250L1RoZSBTdW5kYXkub3RmXFxcIik7XFxufVxcbioge1xcbiAgbWFyZ2luOiAwO1xcbiAgcGFkZGluZzogMDtcXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxuICBmb250LXNpemU6IDI0cHg7XFxuICBmb250LWZhbWlseTogXFxcIlN1bmRheVxcXCI7XFxufVxcblxcbmJvZHksIG1haW4sIC51c2VyLWNvbnRhaW5lciwgLnN0aWNreS1ub3RlLCAuYWRkLCAuc2lnbi11cC1mb3JtLCAubG9nLWluLWZvcm0sIGxhYmVsLCAuaW5wdXRzLCAuc3VibWl0LWJ1dHRvbnMge1xcbiAgZGlzcGxheTogZmxleDtcXG59XFxuXFxuYm9keSB7XFxuICBoZWlnaHQ6IDEwMHZoO1xcbiAgd2lkdGg6IDEwMCU7XFxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjY2JmZmNiO1xcbn1cXG5cXG5tYWluIHtcXG4gIGhlaWdodDogMTAwdmg7XFxuICB3aWR0aDogMTAwJTtcXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG59XFxubWFpbiAuc2lnbi11cC1mb3JtLCBtYWluIC5sb2ctaW4tZm9ybSB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xcbiAgaGVpZ2h0OiAtbW96LWZpdC1jb250ZW50O1xcbiAgaGVpZ2h0OiBmaXQtY29udGVudDtcXG4gIHdpZHRoOiAzMjBweDtcXG4gIHBhZGRpbmc6IDIwcHggMzBweCAyMHB4IDMwcHg7XFxuICBib3JkZXI6IDJweCBzb2xpZCAjRUY3QTg1O1xcbiAgYm94LXNoYWRvdzogN3B4IDdweCAjRUY3QTg1O1xcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmY2ZkMTtcXG4gIHotaW5kZXg6IDE7XFxuICBnYXA6IDIwcHg7XFxufVxcbm1haW4gLnNpZ24tdXAtZm9ybSAuaW5wdXRzIHtcXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XFxuICB3aWR0aDogMTAwJTtcXG59XFxubWFpbiAuc2lnbi11cC1mb3JtIC5pbnB1dHMgbGFiZWwge1xcbiAgZm9udC1zaXplOiAwLjg1ZW07XFxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXG4gIGdhcDogNXB4O1xcbn1cXG5tYWluIC5zaWduLXVwLWZvcm0gLmlucHV0cyBsYWJlbCBpbnB1dCB7XFxuICBoZWlnaHQ6IDM1cHg7XFxuICB3aWR0aDogMjgwcHg7XFxuICBwYWRkaW5nOiAxMHB4IDAgMTBweCAwO1xcbn1cXG5tYWluIC5zaWduLXVwLWZvcm0gI3NpZ24tdXAtYnRuIHtcXG4gIHBhZGRpbmc6IDEwcHg7XFxuICBib3JkZXI6IG5vbmU7XFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjQ0NGRkNDO1xcbiAgYm94LXNoYWRvdzogNHB4IDRweCAjNzFjOTcxO1xcbn1cXG5tYWluIC5zaWduLXVwLWZvcm0gI3NpZ24tdXAtYnRuOmhvdmVyOmJlZm9yZSB7XFxuICBjb250ZW50OiBcXFwiXFxcIjtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIHRvcDogMDtcXG4gIHJpZ2h0OiAtNnB4O1xcbiAgYm9yZGVyLXRvcDogMTNweCBzb2xpZCAjZmZjZmQxO1xcbiAgYm9yZGVyLXJpZ2h0OiAxM3B4IHNvbGlkICM1MTkyNTE7XFxuICB3aWR0aDogM3B4O1xcbiAgdHJhbnNmb3JtOiByb3RhdGUoOTBkZWcpO1xcbn1cXG5tYWluIC5zaWduLXVwLWZvcm0gI3NpZ24tdXAtYnRuOmhvdmVyIHtcXG4gIGN1cnNvcjogcG9pbnRlcjtcXG4gIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lO1xcbiAgcGFkZGluZzogMTVweDtcXG4gIG1hcmdpbjogLTVweDtcXG4gIGJhY2tncm91bmQtY29sb3I6ICM3MWM5NzE7XFxuICBib3gtc2hhZG93OiA0cHggNHB4ICM1MTkyNTE7XFxufVxcbm1haW4gLnNpZ24tdXAtZm9ybSAuc2lnbi11cC1sYXRlci1idG4ge1xcbiAgcGFkZGluZzogMTBweDtcXG4gIGJvcmRlcjogbm9uZTtcXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gIGJhY2tncm91bmQtY29sb3I6ICNmOTk1ODQ7XFxuICBib3gtc2hhZG93OiA0cHggNHB4ICNFRjdBODU7XFxufVxcbm1haW4gLnNpZ24tdXAtZm9ybSAuc2lnbi11cC1sYXRlci1idG46aG92ZXI6YmVmb3JlIHtcXG4gIGNvbnRlbnQ6IFxcXCJcXFwiO1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgdG9wOiAwO1xcbiAgcmlnaHQ6IC02cHg7XFxuICBib3JkZXItdG9wOiAxM3B4IHNvbGlkICNmZmNmZDE7XFxuICBib3JkZXItcmlnaHQ6IDEzcHggc29saWQgI2FkNTk2MjtcXG4gIHdpZHRoOiAzcHg7XFxuICB0cmFuc2Zvcm06IHJvdGF0ZSg5MGRlZyk7XFxufVxcbm1haW4gLnNpZ24tdXAtZm9ybSAuc2lnbi11cC1sYXRlci1idG46aG92ZXIge1xcbiAgY3Vyc29yOiBwb2ludGVyO1xcbiAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XFxuICBwYWRkaW5nOiAxNXB4O1xcbiAgbWFyZ2luOiAtNXB4O1xcbiAgYmFja2dyb3VuZC1jb2xvcjogI0VGN0E4NTtcXG4gIGJveC1zaGFkb3c6IDRweCA0cHggI2FkNTk2MjtcXG59XFxubWFpbiAubG9nLWluLWZvcm0gbGFiZWwge1xcbiAgZm9udC1zaXplOiAwLjg1ZW07XFxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXG4gIGdhcDogNXB4O1xcbn1cXG5tYWluIC5sb2ctaW4tZm9ybSBsYWJlbCBpbnB1dCB7XFxuICBoZWlnaHQ6IDM1cHg7XFxuICB3aWR0aDogMjgwcHg7XFxuICBwYWRkaW5nOiAxMHB4IDAgMTBweCAwO1xcbn1cXG5tYWluIC5sb2ctaW4tZm9ybSAubG9nLWluLWZvcm0tYnRuIHtcXG4gIHBhZGRpbmc6IDEwcHg7XFxuICBib3JkZXI6IG5vbmU7XFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjQ0NGRkNDO1xcbiAgYm94LXNoYWRvdzogNHB4IDRweCAjNzFjOTcxO1xcbn1cXG5tYWluIC5sb2ctaW4tZm9ybSAubG9nLWluLWZvcm0tYnRuOmhvdmVyOmJlZm9yZSB7XFxuICBjb250ZW50OiBcXFwiXFxcIjtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIHRvcDogMDtcXG4gIHJpZ2h0OiAtNnB4O1xcbiAgYm9yZGVyLXRvcDogMTNweCBzb2xpZCAjZmZjZmQxO1xcbiAgYm9yZGVyLXJpZ2h0OiAxM3B4IHNvbGlkICM1MTkyNTE7XFxuICB3aWR0aDogM3B4O1xcbiAgdHJhbnNmb3JtOiByb3RhdGUoOTBkZWcpO1xcbn1cXG5tYWluIC5sb2ctaW4tZm9ybSAubG9nLWluLWZvcm0tYnRuOmhvdmVyIHtcXG4gIGN1cnNvcjogcG9pbnRlcjtcXG4gIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lO1xcbiAgcGFkZGluZzogMTVweDtcXG4gIG1hcmdpbjogLTVweDtcXG4gIGJhY2tncm91bmQtY29sb3I6ICM3MWM5NzE7XFxuICBib3gtc2hhZG93OiA0cHggNHB4ICM1MTkyNTE7XFxufVxcblxcbi5jb250ZW50LWNvbnRhaW5lciB7XFxuICBiYWNrZ3JvdW5kOiB1cmwoXFxcIi4vaW1ncy9jb3JrYm9hcmQuanBnXFxcIikgbm8tcmVwZWF0IGNlbnRlciBjZW50ZXIvY29udGFpbjtcXG4gIHBhZGRpbmc6IDU1cHg7XFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuICBkaXNwbGF5OiBmbGV4O1xcbn1cXG4uY29udGVudC1jb250YWluZXIgLnVzZXItYXV0aC1jb250YWluZXIge1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgdG9wOiAtNDBweDtcXG4gIGxlZnQ6IDE1MHB4O1xcbn1cXG4uY29udGVudC1jb250YWluZXIgLnVzZXItYXV0aC1jb250YWluZXIgLmxvZy1vdXQge1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgbGVmdDogODVweDtcXG4gIHRvcDogMDtcXG4gIHdpZHRoOiAxMDBweDtcXG59XFxuLmNvbnRlbnQtY29udGFpbmVyIC51c2VyLWF1dGgtY29udGFpbmVyIGJ1dHRvbiB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcXG4gIGJvcmRlcjogbm9uZTtcXG59XFxuLmNvbnRlbnQtY29udGFpbmVyIC51c2VyLWF1dGgtY29udGFpbmVyIGJ1dHRvbjpob3ZlciB7XFxuICBjdXJzb3I6IHBvaW50ZXI7XFxuICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcXG59XFxuXFxuLnVzZXItY29udGFpbmVyIHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIHRvcDogLTYwcHg7XFxuICBsZWZ0OiAtMTAwcHg7XFxuICBoZWlnaHQ6IDE4MHB4O1xcbiAgd2lkdGg6IDI0MHB4O1xcbiAgYmFja2dyb3VuZDogdXJsKFxcXCIuL2ltZ3Mvc3RyaXBwZWQgcGFwZXIucG5nXFxcIikgbm8tcmVwZWF0IGNlbnRlciBjZW50ZXIvY29udGFpbjtcXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXG4gIHRyYW5zZm9ybTogcm90YXRlKC0zMGRlZyk7XFxuICB6LWluZGV4OiAxO1xcbiAgcGFkZGluZzogMTBweDtcXG59XFxuLnVzZXItY29udGFpbmVyIGgxIHtcXG4gIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lO1xcbiAgZm9udC1zaXplOiAyZW07XFxufVxcblxcbi5hZGQtbm90ZS1jb250YWluZXIge1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgdG9wOiAwcHg7XFxuICByaWdodDogLTQwcHg7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZjZmQxO1xcbiAgYm94LXNoYWRvdzogNHB4IDRweCAjRUY3QTg1O1xcbiAgcGFkZGluZzogMTBweDtcXG4gIHRyYW5zZm9ybTogcm90YXRlKDI1ZGVnKTtcXG59XFxuLmFkZC1ub3RlLWNvbnRhaW5lcjpob3ZlciB7XFxuICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcXG4gIGN1cnNvcjogcG9pbnRlcjtcXG4gIGJhY2tncm91bmQtY29sb3I6ICNFRjdBODU7XFxuICBib3gtc2hhZG93OiA0cHggNHB4ICNjYzYwNmI7XFxufVxcbi5hZGQtbm90ZS1jb250YWluZXI6aG92ZXI6YmVmb3JlIHtcXG4gIGNvbnRlbnQ6IFxcXCJcXFwiO1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgdG9wOiAwO1xcbiAgcmlnaHQ6IC02cHg7XFxuICBib3JkZXItdG9wOiAxNXB4IHNvbGlkICNjYmZmY2I7XFxuICBib3JkZXItcmlnaHQ6IDE0LjVweCBzb2xpZCAjY2M2MDZiO1xcbiAgd2lkdGg6IDNweDtcXG4gIHRyYW5zZm9ybTogcm90YXRlKDkwZGVnKTtcXG59XFxuXFxuLnN0aWNreS1ub3Rlcy1jb250YWluZXIge1xcbiAgZGlzcGxheTogZ3JpZDtcXG4gIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KDYsIDIxMHB4KTtcXG4gIGdyaWQtdGVtcGxhdGUtcm93czogcmVwZWF0KDMsIDE5MHB4KTtcXG4gIHJvdy1nYXA6IDEwcHg7XFxuICAtbW96LWNvbHVtbi1nYXA6IDhweDtcXG4gICAgICAgY29sdW1uLWdhcDogOHB4O1xcbn1cXG5cXG4uc3RpY2t5LW5vdGUge1xcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXG4gIGhlaWdodDogMTkwcHg7XFxuICB3aWR0aDogMTkwcHg7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZjZmQxO1xcbiAgcGFkZGluZzogMTRweDtcXG4gIGxldHRlci1zcGFjaW5nOiAxcHg7XFxuICBib3gtc2hhZG93OiA0cHggNHB4ICNFRjdBODU7XFxuICBib3JkZXI6IDJweCBzb2xpZCAjRUY3QTg1O1xcbiAgZ2FwOiAzcHg7XFxufVxcbi5zdGlja3ktbm90ZSAjZGVsZXRlLWJ0biB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZWQ7XFxuICBib3gtc2hhZG93OiAzcHggM3B4ICM4ZDAwMDA7XFxuICBib3JkZXI6IG5vbmU7XFxuICBib3JkZXItcmFkaXVzOiAxMDAlO1xcbiAgd2lkdGg6IDIwcHg7XFxuICBoZWlnaHQ6IDIwcHg7XFxuICBhbGlnbi1zZWxmOiBjZW50ZXI7XFxuICBtYXJnaW4tdG9wOiAtMTBweDtcXG59XFxuLnN0aWNreS1ub3RlICNkZWxldGUtYnRuOmhvdmVyIHtcXG4gIGN1cnNvcjogcG9pbnRlcjtcXG4gIGJhY2tncm91bmQtY29sb3I6ICM4ZDAwMDA7XFxuICBib3gtc2hhZG93OiAzcHggM3B4ICMzMzAwMDA7XFxufVxcbi5zdGlja3ktbm90ZSAuc3RpY2t5LXRpdGxlIHtcXG4gIGZvbnQtc2l6ZTogMC43ZW07XFxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxufVxcbi5zdGlja3ktbm90ZSAuc3RpY2t5LWRlc2NyaXB0aW9uIHtcXG4gIGZvbnQtc2l6ZTogMC42N2VtO1xcbiAgbWFyZ2luLXRvcDogOHB4O1xcbiAgd29yZC13cmFwOiBicmVhay13b3JkO1xcbiAgb3ZlcmZsb3c6IHNjcm9sbDtcXG59XFxuLnN0aWNreS1ub3RlIC5zdGlja3ktZGF0ZSB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICBmb250LXNpemU6IDAuNWVtO1xcbiAgYm90dG9tOiA0cHg7XFxuICByaWdodDogNHB4O1xcbn1cXG5cXG4uYWRkIHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIG1hcmdpbi1sZWZ0OiBhdXRvO1xcbiAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xcbiAgbGVmdDogMDtcXG4gIHJpZ2h0OiAwO1xcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXG4gIGdhcDogMTVweDtcXG4gIGhlaWdodDogLW1vei1maXQtY29udGVudDtcXG4gIGhlaWdodDogZml0LWNvbnRlbnQ7XFxuICB3aWR0aDogMzYwcHg7XFxuICBwYWRkaW5nOiAyMHB4IDMwcHggMjBweCAzMHB4O1xcbiAgYm9yZGVyOiAycHggc29saWQgI0VGN0E4NTtcXG4gIGJveC1zaGFkb3c6IDdweCA3cHggI0VGN0E4NTtcXG4gIGJhY2tncm91bmQtY29sb3I6ICNmZmNmZDE7XFxuICB6LWluZGV4OiAxO1xcbn1cXG4uYWRkIC5pbnB1dHMge1xcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXG4gIGdhcDogMTBweDtcXG59XFxuLmFkZCAuaW5wdXRzIGxhYmVsIHtcXG4gIGZvbnQtc2l6ZTogMC44NWVtO1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxuICBnYXA6IDVweDtcXG59XFxuLmFkZCAuaW5wdXRzIGxhYmVsIGlucHV0IHtcXG4gIGhlaWdodDogNTBweDtcXG4gIHdpZHRoOiAyODBweDtcXG4gIHBhZGRpbmc6IDEwcHg7XFxufVxcbi5hZGQgLmlucHV0cyB0ZXh0YXJlYSB7XFxuICBwYWRkaW5nOiA1cHg7XFxuICBmb250LXNpemU6IDFlbTtcXG4gIHJlc2l6ZTogbm9uZTtcXG59XFxuLmFkZCAuaW5wdXRzICNkYXRlIHtcXG4gIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgZm9udC1zaXplOiAxZW07XFxuICBoZWlnaHQ6IDQ1cHg7XFxufVxcblxcbi5pbnZpc2libGUge1xcbiAgZGlzcGxheTogbm9uZTtcXG59XFxuXFxuLnN1Ym1pdC1idXR0b25zIHtcXG4gIHdpZHRoOiAxMDAlO1xcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xcbn1cXG4uc3VibWl0LWJ1dHRvbnMgI3Bpbi1pdC1idG4sIC5zdWJtaXQtYnV0dG9ucyAjbWF5YmUtbGF0ZXItYnRuIHtcXG4gIHBhZGRpbmc6IDEwcHg7XFxuICBib3JkZXI6IG5vbmU7XFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxufVxcbi5zdWJtaXQtYnV0dG9ucyAjcGluLWl0LWJ0bjpob3ZlcjpiZWZvcmUsIC5zdWJtaXQtYnV0dG9ucyAjbWF5YmUtbGF0ZXItYnRuOmhvdmVyOmJlZm9yZSB7XFxuICBjb250ZW50OiBcXFwiXFxcIjtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIHRvcDogMDtcXG4gIHJpZ2h0OiAtNnB4O1xcbiAgYm9yZGVyLXRvcDogMTNweCBzb2xpZCAjZmZjZmQxO1xcbiAgYm9yZGVyLXJpZ2h0OiAxM3B4IHNvbGlkICM1MTkyNTE7XFxuICB3aWR0aDogM3B4O1xcbiAgdHJhbnNmb3JtOiByb3RhdGUoOTBkZWcpO1xcbn1cXG4uc3VibWl0LWJ1dHRvbnMgI3Bpbi1pdC1idG46aG92ZXIsIC5zdWJtaXQtYnV0dG9ucyAjbWF5YmUtbGF0ZXItYnRuOmhvdmVyIHtcXG4gIGN1cnNvcjogcG9pbnRlcjtcXG4gIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lO1xcbiAgcGFkZGluZzogMTVweDtcXG4gIG1hcmdpbjogLTVweDtcXG59XFxuLnN1Ym1pdC1idXR0b25zICNwaW4taXQtYnRuIHtcXG4gIGJhY2tncm91bmQtY29sb3I6ICNDQ0ZGQ0M7XFxuICBib3gtc2hhZG93OiA0cHggNHB4ICM3MWM5NzE7XFxufVxcbi5zdWJtaXQtYnV0dG9ucyAjcGluLWl0LWJ0bjpob3ZlciB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNzFjOTcxO1xcbiAgYm94LXNoYWRvdzogNHB4IDRweCAjNTE5MjUxO1xcbn1cXG4uc3VibWl0LWJ1dHRvbnMgI21heWJlLWxhdGVyLWJ0biB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjk5NTg0O1xcbiAgYm94LXNoYWRvdzogNHB4IDRweCAjRUY3QTg1O1xcbn1cXG4uc3VibWl0LWJ1dHRvbnMgI21heWJlLWxhdGVyLWJ0bjpob3ZlcjpiZWZvcmUge1xcbiAgY29udGVudDogXFxcIlxcXCI7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICB0b3A6IDA7XFxuICByaWdodDogLTZweDtcXG4gIGJvcmRlci1yaWdodDogMTNweCBzb2xpZCAjYWQ1OTYyO1xcbiAgd2lkdGg6IDNweDtcXG4gIHRyYW5zZm9ybTogcm90YXRlKDkwZGVnKTtcXG59XFxuLnN1Ym1pdC1idXR0b25zICNtYXliZS1sYXRlci1idG46aG92ZXIge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogI0VGN0E4NTtcXG4gIGJveC1zaGFkb3c6IDRweCA0cHggI2FkNTk2MjtcXG59XFxuXFxuaHIge1xcbiAgYm9yZGVyOiBub25lO1xcbiAgaGVpZ2h0OiAxcHg7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiBibGFjaztcXG59XFxuXFxuZm9vdGVyIHtcXG4gIHBhZGRpbmc6IDI1cHg7XFxuICBmb250LXNpemU6IDEuMmVtO1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbn1cXG5mb290ZXIgLmZhLWdpdGh1YiB7XFxuICBjb2xvcjogYmxhY2s7XFxuICBib3JkZXI6IG5vbmU7XFxuICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XFxufVxcbmZvb3RlciAuZmEtZ2l0aHViOmhvdmVyIHtcXG4gIGN1cnNvcjogcG9pbnRlcjtcXG4gIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNSk7XFxufS8qIyBzb3VyY2VNYXBwaW5nVVJMPXN0eWxlcy5jc3MubWFwICovXCJdLFwic291cmNlUm9vdFwiOlwiXCJ9XSk7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBfX19DU1NfTE9BREVSX0VYUE9SVF9fXztcbiIsIlwidXNlIHN0cmljdFwiO1xuXG4vKlxuICBNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuICBBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY3NzV2l0aE1hcHBpbmdUb1N0cmluZykge1xuICB2YXIgbGlzdCA9IFtdO1xuXG4gIC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcbiAgbGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgdmFyIGNvbnRlbnQgPSBcIlwiO1xuICAgICAgdmFyIG5lZWRMYXllciA9IHR5cGVvZiBpdGVtWzVdICE9PSBcInVuZGVmaW5lZFwiO1xuICAgICAgaWYgKGl0ZW1bNF0pIHtcbiAgICAgICAgY29udGVudCArPSBcIkBzdXBwb3J0cyAoXCIuY29uY2F0KGl0ZW1bNF0sIFwiKSB7XCIpO1xuICAgICAgfVxuICAgICAgaWYgKGl0ZW1bMl0pIHtcbiAgICAgICAgY29udGVudCArPSBcIkBtZWRpYSBcIi5jb25jYXQoaXRlbVsyXSwgXCIge1wiKTtcbiAgICAgIH1cbiAgICAgIGlmIChuZWVkTGF5ZXIpIHtcbiAgICAgICAgY29udGVudCArPSBcIkBsYXllclwiLmNvbmNhdChpdGVtWzVdLmxlbmd0aCA+IDAgPyBcIiBcIi5jb25jYXQoaXRlbVs1XSkgOiBcIlwiLCBcIiB7XCIpO1xuICAgICAgfVxuICAgICAgY29udGVudCArPSBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0pO1xuICAgICAgaWYgKG5lZWRMYXllcikge1xuICAgICAgICBjb250ZW50ICs9IFwifVwiO1xuICAgICAgfVxuICAgICAgaWYgKGl0ZW1bMl0pIHtcbiAgICAgICAgY29udGVudCArPSBcIn1cIjtcbiAgICAgIH1cbiAgICAgIGlmIChpdGVtWzRdKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJ9XCI7XG4gICAgICB9XG4gICAgICByZXR1cm4gY29udGVudDtcbiAgICB9KS5qb2luKFwiXCIpO1xuICB9O1xuXG4gIC8vIGltcG9ydCBhIGxpc3Qgb2YgbW9kdWxlcyBpbnRvIHRoZSBsaXN0XG4gIGxpc3QuaSA9IGZ1bmN0aW9uIGkobW9kdWxlcywgbWVkaWEsIGRlZHVwZSwgc3VwcG9ydHMsIGxheWVyKSB7XG4gICAgaWYgKHR5cGVvZiBtb2R1bGVzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCB1bmRlZmluZWRdXTtcbiAgICB9XG4gICAgdmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcbiAgICBpZiAoZGVkdXBlKSB7XG4gICAgICBmb3IgKHZhciBrID0gMDsgayA8IHRoaXMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgdmFyIGlkID0gdGhpc1trXVswXTtcbiAgICAgICAgaWYgKGlkICE9IG51bGwpIHtcbiAgICAgICAgICBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2lkXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZm9yICh2YXIgX2sgPSAwOyBfayA8IG1vZHVsZXMubGVuZ3RoOyBfaysrKSB7XG4gICAgICB2YXIgaXRlbSA9IFtdLmNvbmNhdChtb2R1bGVzW19rXSk7XG4gICAgICBpZiAoZGVkdXBlICYmIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaXRlbVswXV0pIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGxheWVyICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgaXRlbVs1XSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIGl0ZW1bNV0gPSBsYXllcjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtWzFdID0gXCJAbGF5ZXJcIi5jb25jYXQoaXRlbVs1XS5sZW5ndGggPiAwID8gXCIgXCIuY29uY2F0KGl0ZW1bNV0pIDogXCJcIiwgXCIge1wiKS5jb25jYXQoaXRlbVsxXSwgXCJ9XCIpO1xuICAgICAgICAgIGl0ZW1bNV0gPSBsYXllcjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKG1lZGlhKSB7XG4gICAgICAgIGlmICghaXRlbVsyXSkge1xuICAgICAgICAgIGl0ZW1bMl0gPSBtZWRpYTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtWzFdID0gXCJAbWVkaWEgXCIuY29uY2F0KGl0ZW1bMl0sIFwiIHtcIikuY29uY2F0KGl0ZW1bMV0sIFwifVwiKTtcbiAgICAgICAgICBpdGVtWzJdID0gbWVkaWE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChzdXBwb3J0cykge1xuICAgICAgICBpZiAoIWl0ZW1bNF0pIHtcbiAgICAgICAgICBpdGVtWzRdID0gXCJcIi5jb25jYXQoc3VwcG9ydHMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1bMV0gPSBcIkBzdXBwb3J0cyAoXCIuY29uY2F0KGl0ZW1bNF0sIFwiKSB7XCIpLmNvbmNhdChpdGVtWzFdLCBcIn1cIik7XG4gICAgICAgICAgaXRlbVs0XSA9IHN1cHBvcnRzO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsaXN0LnB1c2goaXRlbSk7XG4gICAgfVxuICB9O1xuICByZXR1cm4gbGlzdDtcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHVybCwgb3B0aW9ucykge1xuICBpZiAoIW9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0ge307XG4gIH1cbiAgaWYgKCF1cmwpIHtcbiAgICByZXR1cm4gdXJsO1xuICB9XG4gIHVybCA9IFN0cmluZyh1cmwuX19lc01vZHVsZSA/IHVybC5kZWZhdWx0IDogdXJsKTtcblxuICAvLyBJZiB1cmwgaXMgYWxyZWFkeSB3cmFwcGVkIGluIHF1b3RlcywgcmVtb3ZlIHRoZW1cbiAgaWYgKC9eWydcIl0uKlsnXCJdJC8udGVzdCh1cmwpKSB7XG4gICAgdXJsID0gdXJsLnNsaWNlKDEsIC0xKTtcbiAgfVxuICBpZiAob3B0aW9ucy5oYXNoKSB7XG4gICAgdXJsICs9IG9wdGlvbnMuaGFzaDtcbiAgfVxuXG4gIC8vIFNob3VsZCB1cmwgYmUgd3JhcHBlZD9cbiAgLy8gU2VlIGh0dHBzOi8vZHJhZnRzLmNzc3dnLm9yZy9jc3MtdmFsdWVzLTMvI3VybHNcbiAgaWYgKC9bXCInKCkgXFx0XFxuXXwoJTIwKS8udGVzdCh1cmwpIHx8IG9wdGlvbnMubmVlZFF1b3Rlcykge1xuICAgIHJldHVybiBcIlxcXCJcIi5jb25jYXQodXJsLnJlcGxhY2UoL1wiL2csICdcXFxcXCInKS5yZXBsYWNlKC9cXG4vZywgXCJcXFxcblwiKSwgXCJcXFwiXCIpO1xuICB9XG4gIHJldHVybiB1cmw7XG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gIHZhciBjb250ZW50ID0gaXRlbVsxXTtcbiAgdmFyIGNzc01hcHBpbmcgPSBpdGVtWzNdO1xuICBpZiAoIWNzc01hcHBpbmcpIHtcbiAgICByZXR1cm4gY29udGVudDtcbiAgfVxuICBpZiAodHlwZW9mIGJ0b2EgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHZhciBiYXNlNjQgPSBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShjc3NNYXBwaW5nKSkpKTtcbiAgICB2YXIgZGF0YSA9IFwic291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsXCIuY29uY2F0KGJhc2U2NCk7XG4gICAgdmFyIHNvdXJjZU1hcHBpbmcgPSBcIi8qIyBcIi5jb25jYXQoZGF0YSwgXCIgKi9cIik7XG4gICAgcmV0dXJuIFtjb250ZW50XS5jb25jYXQoW3NvdXJjZU1hcHBpbmddKS5qb2luKFwiXFxuXCIpO1xuICB9XG4gIHJldHVybiBbY29udGVudF0uam9pbihcIlxcblwiKTtcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBzdHlsZXNJbkRPTSA9IFtdO1xuZnVuY3Rpb24gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcikge1xuICB2YXIgcmVzdWx0ID0gLTE7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzSW5ET00ubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoc3R5bGVzSW5ET01baV0uaWRlbnRpZmllciA9PT0gaWRlbnRpZmllcikge1xuICAgICAgcmVzdWx0ID0gaTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpIHtcbiAgdmFyIGlkQ291bnRNYXAgPSB7fTtcbiAgdmFyIGlkZW50aWZpZXJzID0gW107XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gbGlzdFtpXTtcbiAgICB2YXIgaWQgPSBvcHRpb25zLmJhc2UgPyBpdGVtWzBdICsgb3B0aW9ucy5iYXNlIDogaXRlbVswXTtcbiAgICB2YXIgY291bnQgPSBpZENvdW50TWFwW2lkXSB8fCAwO1xuICAgIHZhciBpZGVudGlmaWVyID0gXCJcIi5jb25jYXQoaWQsIFwiIFwiKS5jb25jYXQoY291bnQpO1xuICAgIGlkQ291bnRNYXBbaWRdID0gY291bnQgKyAxO1xuICAgIHZhciBpbmRleEJ5SWRlbnRpZmllciA9IGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgIHZhciBvYmogPSB7XG4gICAgICBjc3M6IGl0ZW1bMV0sXG4gICAgICBtZWRpYTogaXRlbVsyXSxcbiAgICAgIHNvdXJjZU1hcDogaXRlbVszXSxcbiAgICAgIHN1cHBvcnRzOiBpdGVtWzRdLFxuICAgICAgbGF5ZXI6IGl0ZW1bNV1cbiAgICB9O1xuICAgIGlmIChpbmRleEJ5SWRlbnRpZmllciAhPT0gLTEpIHtcbiAgICAgIHN0eWxlc0luRE9NW2luZGV4QnlJZGVudGlmaWVyXS5yZWZlcmVuY2VzKys7XG4gICAgICBzdHlsZXNJbkRPTVtpbmRleEJ5SWRlbnRpZmllcl0udXBkYXRlcihvYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgdXBkYXRlciA9IGFkZEVsZW1lbnRTdHlsZShvYmosIG9wdGlvbnMpO1xuICAgICAgb3B0aW9ucy5ieUluZGV4ID0gaTtcbiAgICAgIHN0eWxlc0luRE9NLnNwbGljZShpLCAwLCB7XG4gICAgICAgIGlkZW50aWZpZXI6IGlkZW50aWZpZXIsXG4gICAgICAgIHVwZGF0ZXI6IHVwZGF0ZXIsXG4gICAgICAgIHJlZmVyZW5jZXM6IDFcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZGVudGlmaWVycy5wdXNoKGlkZW50aWZpZXIpO1xuICB9XG4gIHJldHVybiBpZGVudGlmaWVycztcbn1cbmZ1bmN0aW9uIGFkZEVsZW1lbnRTdHlsZShvYmosIG9wdGlvbnMpIHtcbiAgdmFyIGFwaSA9IG9wdGlvbnMuZG9tQVBJKG9wdGlvbnMpO1xuICBhcGkudXBkYXRlKG9iaik7XG4gIHZhciB1cGRhdGVyID0gZnVuY3Rpb24gdXBkYXRlcihuZXdPYmopIHtcbiAgICBpZiAobmV3T2JqKSB7XG4gICAgICBpZiAobmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJiBuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJiBuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwICYmIG5ld09iai5zdXBwb3J0cyA9PT0gb2JqLnN1cHBvcnRzICYmIG5ld09iai5sYXllciA9PT0gb2JqLmxheWVyKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGFwaS51cGRhdGUob2JqID0gbmV3T2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXBpLnJlbW92ZSgpO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIHVwZGF0ZXI7XG59XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChsaXN0LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICBsaXN0ID0gbGlzdCB8fCBbXTtcbiAgdmFyIGxhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZShuZXdMaXN0KSB7XG4gICAgbmV3TGlzdCA9IG5ld0xpc3QgfHwgW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpZGVudGlmaWVyID0gbGFzdElkZW50aWZpZXJzW2ldO1xuICAgICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgICBzdHlsZXNJbkRPTVtpbmRleF0ucmVmZXJlbmNlcy0tO1xuICAgIH1cbiAgICB2YXIgbmV3TGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKG5ld0xpc3QsIG9wdGlvbnMpO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgX2lkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbX2ldO1xuICAgICAgdmFyIF9pbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKF9pZGVudGlmaWVyKTtcbiAgICAgIGlmIChzdHlsZXNJbkRPTVtfaW5kZXhdLnJlZmVyZW5jZXMgPT09IDApIHtcbiAgICAgICAgc3R5bGVzSW5ET01bX2luZGV4XS51cGRhdGVyKCk7XG4gICAgICAgIHN0eWxlc0luRE9NLnNwbGljZShfaW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH1cbiAgICBsYXN0SWRlbnRpZmllcnMgPSBuZXdMYXN0SWRlbnRpZmllcnM7XG4gIH07XG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgbWVtbyA9IHt9O1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIGdldFRhcmdldCh0YXJnZXQpIHtcbiAgaWYgKHR5cGVvZiBtZW1vW3RhcmdldF0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB2YXIgc3R5bGVUYXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCk7XG5cbiAgICAvLyBTcGVjaWFsIGNhc2UgdG8gcmV0dXJuIGhlYWQgb2YgaWZyYW1lIGluc3RlYWQgb2YgaWZyYW1lIGl0c2VsZlxuICAgIGlmICh3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQgJiYgc3R5bGVUYXJnZXQgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFRoaXMgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgYWNjZXNzIHRvIGlmcmFtZSBpcyBibG9ja2VkXG4gICAgICAgIC8vIGR1ZSB0byBjcm9zcy1vcmlnaW4gcmVzdHJpY3Rpb25zXG4gICAgICAgIHN0eWxlVGFyZ2V0ID0gc3R5bGVUYXJnZXQuY29udGVudERvY3VtZW50LmhlYWQ7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBuZXh0XG4gICAgICAgIHN0eWxlVGFyZ2V0ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gICAgbWVtb1t0YXJnZXRdID0gc3R5bGVUYXJnZXQ7XG4gIH1cbiAgcmV0dXJuIG1lbW9bdGFyZ2V0XTtcbn1cblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBpbnNlcnRCeVNlbGVjdG9yKGluc2VydCwgc3R5bGUpIHtcbiAgdmFyIHRhcmdldCA9IGdldFRhcmdldChpbnNlcnQpO1xuICBpZiAoIXRhcmdldCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkbid0IGZpbmQgYSBzdHlsZSB0YXJnZXQuIFRoaXMgcHJvYmFibHkgbWVhbnMgdGhhdCB0aGUgdmFsdWUgZm9yIHRoZSAnaW5zZXJ0JyBwYXJhbWV0ZXIgaXMgaW52YWxpZC5cIik7XG4gIH1cbiAgdGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcbn1cbm1vZHVsZS5leHBvcnRzID0gaW5zZXJ0QnlTZWxlY3RvcjsiLCJcInVzZSBzdHJpY3RcIjtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykge1xuICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgb3B0aW9ucy5zZXRBdHRyaWJ1dGVzKGVsZW1lbnQsIG9wdGlvbnMuYXR0cmlidXRlcyk7XG4gIG9wdGlvbnMuaW5zZXJ0KGVsZW1lbnQsIG9wdGlvbnMub3B0aW9ucyk7XG4gIHJldHVybiBlbGVtZW50O1xufVxubW9kdWxlLmV4cG9ydHMgPSBpbnNlcnRTdHlsZUVsZW1lbnQ7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gc2V0QXR0cmlidXRlc1dpdGhvdXRBdHRyaWJ1dGVzKHN0eWxlRWxlbWVudCkge1xuICB2YXIgbm9uY2UgPSB0eXBlb2YgX193ZWJwYWNrX25vbmNlX18gIT09IFwidW5kZWZpbmVkXCIgPyBfX3dlYnBhY2tfbm9uY2VfXyA6IG51bGw7XG4gIGlmIChub25jZSkge1xuICAgIHN0eWxlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJub25jZVwiLCBub25jZSk7XG4gIH1cbn1cbm1vZHVsZS5leHBvcnRzID0gc2V0QXR0cmlidXRlc1dpdGhvdXRBdHRyaWJ1dGVzOyIsIlwidXNlIHN0cmljdFwiO1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIGFwcGx5KHN0eWxlRWxlbWVudCwgb3B0aW9ucywgb2JqKSB7XG4gIHZhciBjc3MgPSBcIlwiO1xuICBpZiAob2JqLnN1cHBvcnRzKSB7XG4gICAgY3NzICs9IFwiQHN1cHBvcnRzIChcIi5jb25jYXQob2JqLnN1cHBvcnRzLCBcIikge1wiKTtcbiAgfVxuICBpZiAob2JqLm1lZGlhKSB7XG4gICAgY3NzICs9IFwiQG1lZGlhIFwiLmNvbmNhdChvYmoubWVkaWEsIFwiIHtcIik7XG4gIH1cbiAgdmFyIG5lZWRMYXllciA9IHR5cGVvZiBvYmoubGF5ZXIgIT09IFwidW5kZWZpbmVkXCI7XG4gIGlmIChuZWVkTGF5ZXIpIHtcbiAgICBjc3MgKz0gXCJAbGF5ZXJcIi5jb25jYXQob2JqLmxheWVyLmxlbmd0aCA+IDAgPyBcIiBcIi5jb25jYXQob2JqLmxheWVyKSA6IFwiXCIsIFwiIHtcIik7XG4gIH1cbiAgY3NzICs9IG9iai5jc3M7XG4gIGlmIChuZWVkTGF5ZXIpIHtcbiAgICBjc3MgKz0gXCJ9XCI7XG4gIH1cbiAgaWYgKG9iai5tZWRpYSkge1xuICAgIGNzcyArPSBcIn1cIjtcbiAgfVxuICBpZiAob2JqLnN1cHBvcnRzKSB7XG4gICAgY3NzICs9IFwifVwiO1xuICB9XG4gIHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuICBpZiAoc291cmNlTWFwICYmIHR5cGVvZiBidG9hICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgY3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIi5jb25jYXQoYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSwgXCIgKi9cIik7XG4gIH1cblxuICAvLyBGb3Igb2xkIElFXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cbiAgb3B0aW9ucy5zdHlsZVRhZ1RyYW5zZm9ybShjc3MsIHN0eWxlRWxlbWVudCwgb3B0aW9ucy5vcHRpb25zKTtcbn1cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZUVsZW1lbnQpIHtcbiAgLy8gaXN0YW5idWwgaWdub3JlIGlmXG4gIGlmIChzdHlsZUVsZW1lbnQucGFyZW50Tm9kZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBzdHlsZUVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQpO1xufVxuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIGRvbUFQSShvcHRpb25zKSB7XG4gIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoKSB7fSxcbiAgICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge31cbiAgICB9O1xuICB9XG4gIHZhciBzdHlsZUVsZW1lbnQgPSBvcHRpb25zLmluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKTtcbiAgcmV0dXJuIHtcbiAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShvYmopIHtcbiAgICAgIGFwcGx5KHN0eWxlRWxlbWVudCwgb3B0aW9ucywgb2JqKTtcbiAgICB9LFxuICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgICAgcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCk7XG4gICAgfVxuICB9O1xufVxubW9kdWxlLmV4cG9ydHMgPSBkb21BUEk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gc3R5bGVUYWdUcmFuc2Zvcm0oY3NzLCBzdHlsZUVsZW1lbnQpIHtcbiAgaWYgKHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcbiAgfSBlbHNlIHtcbiAgICB3aGlsZSAoc3R5bGVFbGVtZW50LmZpcnN0Q2hpbGQpIHtcbiAgICAgIHN0eWxlRWxlbWVudC5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gICAgfVxuICAgIHN0eWxlRWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcbiAgfVxufVxubW9kdWxlLmV4cG9ydHMgPSBzdHlsZVRhZ1RyYW5zZm9ybTsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdGlkOiBtb2R1bGVJZCxcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbl9fd2VicGFja19yZXF1aXJlX18ubSA9IF9fd2VicGFja19tb2R1bGVzX187XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwidmFyIHNjcmlwdFVybDtcbmlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLmcuaW1wb3J0U2NyaXB0cykgc2NyaXB0VXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmxvY2F0aW9uICsgXCJcIjtcbnZhciBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5kb2N1bWVudDtcbmlmICghc2NyaXB0VXJsICYmIGRvY3VtZW50KSB7XG5cdGlmIChkb2N1bWVudC5jdXJyZW50U2NyaXB0KVxuXHRcdHNjcmlwdFVybCA9IGRvY3VtZW50LmN1cnJlbnRTY3JpcHQuc3JjO1xuXHRpZiAoIXNjcmlwdFVybCkge1xuXHRcdHZhciBzY3JpcHRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIik7XG5cdFx0aWYoc2NyaXB0cy5sZW5ndGgpIHtcblx0XHRcdHZhciBpID0gc2NyaXB0cy5sZW5ndGggLSAxO1xuXHRcdFx0d2hpbGUgKGkgPiAtMSAmJiAoIXNjcmlwdFVybCB8fCAhL15odHRwKHM/KTovLnRlc3Qoc2NyaXB0VXJsKSkpIHNjcmlwdFVybCA9IHNjcmlwdHNbaS0tXS5zcmM7XG5cdFx0fVxuXHR9XG59XG4vLyBXaGVuIHN1cHBvcnRpbmcgYnJvd3NlcnMgd2hlcmUgYW4gYXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCB5b3UgbXVzdCBzcGVjaWZ5IGFuIG91dHB1dC5wdWJsaWNQYXRoIG1hbnVhbGx5IHZpYSBjb25maWd1cmF0aW9uXG4vLyBvciBwYXNzIGFuIGVtcHR5IHN0cmluZyAoXCJcIikgYW5kIHNldCB0aGUgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gdmFyaWFibGUgZnJvbSB5b3VyIGNvZGUgdG8gdXNlIHlvdXIgb3duIGxvZ2ljLlxuaWYgKCFzY3JpcHRVcmwpIHRocm93IG5ldyBFcnJvcihcIkF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyXCIpO1xuc2NyaXB0VXJsID0gc2NyaXB0VXJsLnJlcGxhY2UoLyMuKiQvLCBcIlwiKS5yZXBsYWNlKC9cXD8uKiQvLCBcIlwiKS5yZXBsYWNlKC9cXC9bXlxcL10rJC8sIFwiL1wiKTtcbl9fd2VicGFja19yZXF1aXJlX18ucCA9IHNjcmlwdFVybDsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmIgPSBkb2N1bWVudC5iYXNlVVJJIHx8IHNlbGYubG9jYXRpb24uaHJlZjtcblxuLy8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3Ncbi8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuLy8gW3Jlc29sdmUsIHJlamVjdCwgUHJvbWlzZV0gPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG52YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuXHQ3OTI6IDBcbn07XG5cbi8vIG5vIGNodW5rIG9uIGRlbWFuZCBsb2FkaW5nXG5cbi8vIG5vIHByZWZldGNoaW5nXG5cbi8vIG5vIHByZWxvYWRlZFxuXG4vLyBubyBITVJcblxuLy8gbm8gSE1SIG1hbmlmZXN0XG5cbi8vIG5vIG9uIGNodW5rcyBsb2FkZWRcblxuLy8gbm8ganNvbnAgZnVuY3Rpb24iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm5jID0gdW5kZWZpbmVkOyIsImNvbnN0IGZvcm1hdERpc3RhbmNlTG9jYWxlID0ge1xuICBsZXNzVGhhblhTZWNvbmRzOiB7XG4gICAgb25lOiBcImxlc3MgdGhhbiBhIHNlY29uZFwiLFxuICAgIG90aGVyOiBcImxlc3MgdGhhbiB7e2NvdW50fX0gc2Vjb25kc1wiLFxuICB9LFxuXG4gIHhTZWNvbmRzOiB7XG4gICAgb25lOiBcIjEgc2Vjb25kXCIsXG4gICAgb3RoZXI6IFwie3tjb3VudH19IHNlY29uZHNcIixcbiAgfSxcblxuICBoYWxmQU1pbnV0ZTogXCJoYWxmIGEgbWludXRlXCIsXG5cbiAgbGVzc1RoYW5YTWludXRlczoge1xuICAgIG9uZTogXCJsZXNzIHRoYW4gYSBtaW51dGVcIixcbiAgICBvdGhlcjogXCJsZXNzIHRoYW4ge3tjb3VudH19IG1pbnV0ZXNcIixcbiAgfSxcblxuICB4TWludXRlczoge1xuICAgIG9uZTogXCIxIG1pbnV0ZVwiLFxuICAgIG90aGVyOiBcInt7Y291bnR9fSBtaW51dGVzXCIsXG4gIH0sXG5cbiAgYWJvdXRYSG91cnM6IHtcbiAgICBvbmU6IFwiYWJvdXQgMSBob3VyXCIsXG4gICAgb3RoZXI6IFwiYWJvdXQge3tjb3VudH19IGhvdXJzXCIsXG4gIH0sXG5cbiAgeEhvdXJzOiB7XG4gICAgb25lOiBcIjEgaG91clwiLFxuICAgIG90aGVyOiBcInt7Y291bnR9fSBob3Vyc1wiLFxuICB9LFxuXG4gIHhEYXlzOiB7XG4gICAgb25lOiBcIjEgZGF5XCIsXG4gICAgb3RoZXI6IFwie3tjb3VudH19IGRheXNcIixcbiAgfSxcblxuICBhYm91dFhXZWVrczoge1xuICAgIG9uZTogXCJhYm91dCAxIHdlZWtcIixcbiAgICBvdGhlcjogXCJhYm91dCB7e2NvdW50fX0gd2Vla3NcIixcbiAgfSxcblxuICB4V2Vla3M6IHtcbiAgICBvbmU6IFwiMSB3ZWVrXCIsXG4gICAgb3RoZXI6IFwie3tjb3VudH19IHdlZWtzXCIsXG4gIH0sXG5cbiAgYWJvdXRYTW9udGhzOiB7XG4gICAgb25lOiBcImFib3V0IDEgbW9udGhcIixcbiAgICBvdGhlcjogXCJhYm91dCB7e2NvdW50fX0gbW9udGhzXCIsXG4gIH0sXG5cbiAgeE1vbnRoczoge1xuICAgIG9uZTogXCIxIG1vbnRoXCIsXG4gICAgb3RoZXI6IFwie3tjb3VudH19IG1vbnRoc1wiLFxuICB9LFxuXG4gIGFib3V0WFllYXJzOiB7XG4gICAgb25lOiBcImFib3V0IDEgeWVhclwiLFxuICAgIG90aGVyOiBcImFib3V0IHt7Y291bnR9fSB5ZWFyc1wiLFxuICB9LFxuXG4gIHhZZWFyczoge1xuICAgIG9uZTogXCIxIHllYXJcIixcbiAgICBvdGhlcjogXCJ7e2NvdW50fX0geWVhcnNcIixcbiAgfSxcblxuICBvdmVyWFllYXJzOiB7XG4gICAgb25lOiBcIm92ZXIgMSB5ZWFyXCIsXG4gICAgb3RoZXI6IFwib3ZlciB7e2NvdW50fX0geWVhcnNcIixcbiAgfSxcblxuICBhbG1vc3RYWWVhcnM6IHtcbiAgICBvbmU6IFwiYWxtb3N0IDEgeWVhclwiLFxuICAgIG90aGVyOiBcImFsbW9zdCB7e2NvdW50fX0geWVhcnNcIixcbiAgfSxcbn07XG5cbmV4cG9ydCBjb25zdCBmb3JtYXREaXN0YW5jZSA9ICh0b2tlbiwgY291bnQsIG9wdGlvbnMpID0+IHtcbiAgbGV0IHJlc3VsdDtcblxuICBjb25zdCB0b2tlblZhbHVlID0gZm9ybWF0RGlzdGFuY2VMb2NhbGVbdG9rZW5dO1xuICBpZiAodHlwZW9mIHRva2VuVmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXN1bHQgPSB0b2tlblZhbHVlO1xuICB9IGVsc2UgaWYgKGNvdW50ID09PSAxKSB7XG4gICAgcmVzdWx0ID0gdG9rZW5WYWx1ZS5vbmU7XG4gIH0gZWxzZSB7XG4gICAgcmVzdWx0ID0gdG9rZW5WYWx1ZS5vdGhlci5yZXBsYWNlKFwie3tjb3VudH19XCIsIGNvdW50LnRvU3RyaW5nKCkpO1xuICB9XG5cbiAgaWYgKG9wdGlvbnM/LmFkZFN1ZmZpeCkge1xuICAgIGlmIChvcHRpb25zLmNvbXBhcmlzb24gJiYgb3B0aW9ucy5jb21wYXJpc29uID4gMCkge1xuICAgICAgcmV0dXJuIFwiaW4gXCIgKyByZXN1bHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiByZXN1bHQgKyBcIiBhZ29cIjtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufTtcbiIsImV4cG9ydCBmdW5jdGlvbiBidWlsZEZvcm1hdExvbmdGbihhcmdzKSB7XG4gIHJldHVybiAob3B0aW9ucyA9IHt9KSA9PiB7XG4gICAgLy8gVE9ETzogUmVtb3ZlIFN0cmluZygpXG4gICAgY29uc3Qgd2lkdGggPSBvcHRpb25zLndpZHRoID8gU3RyaW5nKG9wdGlvbnMud2lkdGgpIDogYXJncy5kZWZhdWx0V2lkdGg7XG4gICAgY29uc3QgZm9ybWF0ID0gYXJncy5mb3JtYXRzW3dpZHRoXSB8fCBhcmdzLmZvcm1hdHNbYXJncy5kZWZhdWx0V2lkdGhdO1xuICAgIHJldHVybiBmb3JtYXQ7XG4gIH07XG59XG4iLCJpbXBvcnQgeyBidWlsZEZvcm1hdExvbmdGbiB9IGZyb20gXCIuLi8uLi9fbGliL2J1aWxkRm9ybWF0TG9uZ0ZuLm1qc1wiO1xuXG5jb25zdCBkYXRlRm9ybWF0cyA9IHtcbiAgZnVsbDogXCJFRUVFLCBNTU1NIGRvLCB5XCIsXG4gIGxvbmc6IFwiTU1NTSBkbywgeVwiLFxuICBtZWRpdW06IFwiTU1NIGQsIHlcIixcbiAgc2hvcnQ6IFwiTU0vZGQveXl5eVwiLFxufTtcblxuY29uc3QgdGltZUZvcm1hdHMgPSB7XG4gIGZ1bGw6IFwiaDptbTpzcyBhIHp6enpcIixcbiAgbG9uZzogXCJoOm1tOnNzIGEgelwiLFxuICBtZWRpdW06IFwiaDptbTpzcyBhXCIsXG4gIHNob3J0OiBcImg6bW0gYVwiLFxufTtcblxuY29uc3QgZGF0ZVRpbWVGb3JtYXRzID0ge1xuICBmdWxsOiBcInt7ZGF0ZX19ICdhdCcge3t0aW1lfX1cIixcbiAgbG9uZzogXCJ7e2RhdGV9fSAnYXQnIHt7dGltZX19XCIsXG4gIG1lZGl1bTogXCJ7e2RhdGV9fSwge3t0aW1lfX1cIixcbiAgc2hvcnQ6IFwie3tkYXRlfX0sIHt7dGltZX19XCIsXG59O1xuXG5leHBvcnQgY29uc3QgZm9ybWF0TG9uZyA9IHtcbiAgZGF0ZTogYnVpbGRGb3JtYXRMb25nRm4oe1xuICAgIGZvcm1hdHM6IGRhdGVGb3JtYXRzLFxuICAgIGRlZmF1bHRXaWR0aDogXCJmdWxsXCIsXG4gIH0pLFxuXG4gIHRpbWU6IGJ1aWxkRm9ybWF0TG9uZ0ZuKHtcbiAgICBmb3JtYXRzOiB0aW1lRm9ybWF0cyxcbiAgICBkZWZhdWx0V2lkdGg6IFwiZnVsbFwiLFxuICB9KSxcblxuICBkYXRlVGltZTogYnVpbGRGb3JtYXRMb25nRm4oe1xuICAgIGZvcm1hdHM6IGRhdGVUaW1lRm9ybWF0cyxcbiAgICBkZWZhdWx0V2lkdGg6IFwiZnVsbFwiLFxuICB9KSxcbn07XG4iLCJjb25zdCBmb3JtYXRSZWxhdGl2ZUxvY2FsZSA9IHtcbiAgbGFzdFdlZWs6IFwiJ2xhc3QnIGVlZWUgJ2F0JyBwXCIsXG4gIHllc3RlcmRheTogXCIneWVzdGVyZGF5IGF0JyBwXCIsXG4gIHRvZGF5OiBcIid0b2RheSBhdCcgcFwiLFxuICB0b21vcnJvdzogXCIndG9tb3Jyb3cgYXQnIHBcIixcbiAgbmV4dFdlZWs6IFwiZWVlZSAnYXQnIHBcIixcbiAgb3RoZXI6IFwiUFwiLFxufTtcblxuZXhwb3J0IGNvbnN0IGZvcm1hdFJlbGF0aXZlID0gKHRva2VuLCBfZGF0ZSwgX2Jhc2VEYXRlLCBfb3B0aW9ucykgPT5cbiAgZm9ybWF0UmVsYXRpdmVMb2NhbGVbdG9rZW5dO1xuIiwiLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cblxuLyoqXG4gKiBUaGUgbG9jYWxpemUgZnVuY3Rpb24gYXJndW1lbnQgY2FsbGJhY2sgd2hpY2ggYWxsb3dzIHRvIGNvbnZlcnQgcmF3IHZhbHVlIHRvXG4gKiB0aGUgYWN0dWFsIHR5cGUuXG4gKlxuICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIGNvbnZlcnRcbiAqXG4gKiBAcmV0dXJucyBUaGUgY29udmVydGVkIHZhbHVlXG4gKi9cblxuLyoqXG4gKiBUaGUgbWFwIG9mIGxvY2FsaXplZCB2YWx1ZXMgZm9yIGVhY2ggd2lkdGguXG4gKi9cblxuLyoqXG4gKiBUaGUgaW5kZXggdHlwZSBvZiB0aGUgbG9jYWxlIHVuaXQgdmFsdWUuIEl0IHR5cGVzIGNvbnZlcnNpb24gb2YgdW5pdHMgb2ZcbiAqIHZhbHVlcyB0aGF0IGRvbid0IHN0YXJ0IGF0IDAgKGkuZS4gcXVhcnRlcnMpLlxuICovXG5cbi8qKlxuICogQ29udmVydHMgdGhlIHVuaXQgdmFsdWUgdG8gdGhlIHR1cGxlIG9mIHZhbHVlcy5cbiAqL1xuXG4vKipcbiAqIFRoZSB0dXBsZSBvZiBsb2NhbGl6ZWQgZXJhIHZhbHVlcy4gVGhlIGZpcnN0IGVsZW1lbnQgcmVwcmVzZW50cyBCQyxcbiAqIHRoZSBzZWNvbmQgZWxlbWVudCByZXByZXNlbnRzIEFELlxuICovXG5cbi8qKlxuICogVGhlIHR1cGxlIG9mIGxvY2FsaXplZCBxdWFydGVyIHZhbHVlcy4gVGhlIGZpcnN0IGVsZW1lbnQgcmVwcmVzZW50cyBRMS5cbiAqL1xuXG4vKipcbiAqIFRoZSB0dXBsZSBvZiBsb2NhbGl6ZWQgZGF5IHZhbHVlcy4gVGhlIGZpcnN0IGVsZW1lbnQgcmVwcmVzZW50cyBTdW5kYXkuXG4gKi9cblxuLyoqXG4gKiBUaGUgdHVwbGUgb2YgbG9jYWxpemVkIG1vbnRoIHZhbHVlcy4gVGhlIGZpcnN0IGVsZW1lbnQgcmVwcmVzZW50cyBKYW51YXJ5LlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBidWlsZExvY2FsaXplRm4oYXJncykge1xuICByZXR1cm4gKHZhbHVlLCBvcHRpb25zKSA9PiB7XG4gICAgY29uc3QgY29udGV4dCA9IG9wdGlvbnM/LmNvbnRleHQgPyBTdHJpbmcob3B0aW9ucy5jb250ZXh0KSA6IFwic3RhbmRhbG9uZVwiO1xuXG4gICAgbGV0IHZhbHVlc0FycmF5O1xuICAgIGlmIChjb250ZXh0ID09PSBcImZvcm1hdHRpbmdcIiAmJiBhcmdzLmZvcm1hdHRpbmdWYWx1ZXMpIHtcbiAgICAgIGNvbnN0IGRlZmF1bHRXaWR0aCA9IGFyZ3MuZGVmYXVsdEZvcm1hdHRpbmdXaWR0aCB8fCBhcmdzLmRlZmF1bHRXaWR0aDtcbiAgICAgIGNvbnN0IHdpZHRoID0gb3B0aW9ucz8ud2lkdGggPyBTdHJpbmcob3B0aW9ucy53aWR0aCkgOiBkZWZhdWx0V2lkdGg7XG5cbiAgICAgIHZhbHVlc0FycmF5ID1cbiAgICAgICAgYXJncy5mb3JtYXR0aW5nVmFsdWVzW3dpZHRoXSB8fCBhcmdzLmZvcm1hdHRpbmdWYWx1ZXNbZGVmYXVsdFdpZHRoXTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZGVmYXVsdFdpZHRoID0gYXJncy5kZWZhdWx0V2lkdGg7XG4gICAgICBjb25zdCB3aWR0aCA9IG9wdGlvbnM/LndpZHRoID8gU3RyaW5nKG9wdGlvbnMud2lkdGgpIDogYXJncy5kZWZhdWx0V2lkdGg7XG5cbiAgICAgIHZhbHVlc0FycmF5ID0gYXJncy52YWx1ZXNbd2lkdGhdIHx8IGFyZ3MudmFsdWVzW2RlZmF1bHRXaWR0aF07XG4gICAgfVxuICAgIGNvbnN0IGluZGV4ID0gYXJncy5hcmd1bWVudENhbGxiYWNrID8gYXJncy5hcmd1bWVudENhbGxiYWNrKHZhbHVlKSA6IHZhbHVlO1xuXG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciAtIEZvciBzb21lIHJlYXNvbiBUeXBlU2NyaXB0IGp1c3QgZG9uJ3Qgd2FudCB0byBtYXRjaCBpdCwgbm8gbWF0dGVyIGhvdyBoYXJkIHdlIHRyeS4gSSBjaGFsbGVuZ2UgeW91IHRvIHRyeSB0byByZW1vdmUgaXQhXG4gICAgcmV0dXJuIHZhbHVlc0FycmF5W2luZGV4XTtcbiAgfTtcbn1cbiIsImltcG9ydCB7IGJ1aWxkTG9jYWxpemVGbiB9IGZyb20gXCIuLi8uLi9fbGliL2J1aWxkTG9jYWxpemVGbi5tanNcIjtcblxuY29uc3QgZXJhVmFsdWVzID0ge1xuICBuYXJyb3c6IFtcIkJcIiwgXCJBXCJdLFxuICBhYmJyZXZpYXRlZDogW1wiQkNcIiwgXCJBRFwiXSxcbiAgd2lkZTogW1wiQmVmb3JlIENocmlzdFwiLCBcIkFubm8gRG9taW5pXCJdLFxufTtcblxuY29uc3QgcXVhcnRlclZhbHVlcyA9IHtcbiAgbmFycm93OiBbXCIxXCIsIFwiMlwiLCBcIjNcIiwgXCI0XCJdLFxuICBhYmJyZXZpYXRlZDogW1wiUTFcIiwgXCJRMlwiLCBcIlEzXCIsIFwiUTRcIl0sXG4gIHdpZGU6IFtcIjFzdCBxdWFydGVyXCIsIFwiMm5kIHF1YXJ0ZXJcIiwgXCIzcmQgcXVhcnRlclwiLCBcIjR0aCBxdWFydGVyXCJdLFxufTtcblxuLy8gTm90ZTogaW4gRW5nbGlzaCwgdGhlIG5hbWVzIG9mIGRheXMgb2YgdGhlIHdlZWsgYW5kIG1vbnRocyBhcmUgY2FwaXRhbGl6ZWQuXG4vLyBJZiB5b3UgYXJlIG1ha2luZyBhIG5ldyBsb2NhbGUgYmFzZWQgb24gdGhpcyBvbmUsIGNoZWNrIGlmIHRoZSBzYW1lIGlzIHRydWUgZm9yIHRoZSBsYW5ndWFnZSB5b3UncmUgd29ya2luZyBvbi5cbi8vIEdlbmVyYWxseSwgZm9ybWF0dGVkIGRhdGVzIHNob3VsZCBsb29rIGxpa2UgdGhleSBhcmUgaW4gdGhlIG1pZGRsZSBvZiBhIHNlbnRlbmNlLFxuLy8gZS5nLiBpbiBTcGFuaXNoIGxhbmd1YWdlIHRoZSB3ZWVrZGF5cyBhbmQgbW9udGhzIHNob3VsZCBiZSBpbiB0aGUgbG93ZXJjYXNlLlxuY29uc3QgbW9udGhWYWx1ZXMgPSB7XG4gIG5hcnJvdzogW1wiSlwiLCBcIkZcIiwgXCJNXCIsIFwiQVwiLCBcIk1cIiwgXCJKXCIsIFwiSlwiLCBcIkFcIiwgXCJTXCIsIFwiT1wiLCBcIk5cIiwgXCJEXCJdLFxuICBhYmJyZXZpYXRlZDogW1xuICAgIFwiSmFuXCIsXG4gICAgXCJGZWJcIixcbiAgICBcIk1hclwiLFxuICAgIFwiQXByXCIsXG4gICAgXCJNYXlcIixcbiAgICBcIkp1blwiLFxuICAgIFwiSnVsXCIsXG4gICAgXCJBdWdcIixcbiAgICBcIlNlcFwiLFxuICAgIFwiT2N0XCIsXG4gICAgXCJOb3ZcIixcbiAgICBcIkRlY1wiLFxuICBdLFxuXG4gIHdpZGU6IFtcbiAgICBcIkphbnVhcnlcIixcbiAgICBcIkZlYnJ1YXJ5XCIsXG4gICAgXCJNYXJjaFwiLFxuICAgIFwiQXByaWxcIixcbiAgICBcIk1heVwiLFxuICAgIFwiSnVuZVwiLFxuICAgIFwiSnVseVwiLFxuICAgIFwiQXVndXN0XCIsXG4gICAgXCJTZXB0ZW1iZXJcIixcbiAgICBcIk9jdG9iZXJcIixcbiAgICBcIk5vdmVtYmVyXCIsXG4gICAgXCJEZWNlbWJlclwiLFxuICBdLFxufTtcblxuY29uc3QgZGF5VmFsdWVzID0ge1xuICBuYXJyb3c6IFtcIlNcIiwgXCJNXCIsIFwiVFwiLCBcIldcIiwgXCJUXCIsIFwiRlwiLCBcIlNcIl0sXG4gIHNob3J0OiBbXCJTdVwiLCBcIk1vXCIsIFwiVHVcIiwgXCJXZVwiLCBcIlRoXCIsIFwiRnJcIiwgXCJTYVwiXSxcbiAgYWJicmV2aWF0ZWQ6IFtcIlN1blwiLCBcIk1vblwiLCBcIlR1ZVwiLCBcIldlZFwiLCBcIlRodVwiLCBcIkZyaVwiLCBcIlNhdFwiXSxcbiAgd2lkZTogW1xuICAgIFwiU3VuZGF5XCIsXG4gICAgXCJNb25kYXlcIixcbiAgICBcIlR1ZXNkYXlcIixcbiAgICBcIldlZG5lc2RheVwiLFxuICAgIFwiVGh1cnNkYXlcIixcbiAgICBcIkZyaWRheVwiLFxuICAgIFwiU2F0dXJkYXlcIixcbiAgXSxcbn07XG5cbmNvbnN0IGRheVBlcmlvZFZhbHVlcyA9IHtcbiAgbmFycm93OiB7XG4gICAgYW06IFwiYVwiLFxuICAgIHBtOiBcInBcIixcbiAgICBtaWRuaWdodDogXCJtaVwiLFxuICAgIG5vb246IFwiblwiLFxuICAgIG1vcm5pbmc6IFwibW9ybmluZ1wiLFxuICAgIGFmdGVybm9vbjogXCJhZnRlcm5vb25cIixcbiAgICBldmVuaW5nOiBcImV2ZW5pbmdcIixcbiAgICBuaWdodDogXCJuaWdodFwiLFxuICB9LFxuICBhYmJyZXZpYXRlZDoge1xuICAgIGFtOiBcIkFNXCIsXG4gICAgcG06IFwiUE1cIixcbiAgICBtaWRuaWdodDogXCJtaWRuaWdodFwiLFxuICAgIG5vb246IFwibm9vblwiLFxuICAgIG1vcm5pbmc6IFwibW9ybmluZ1wiLFxuICAgIGFmdGVybm9vbjogXCJhZnRlcm5vb25cIixcbiAgICBldmVuaW5nOiBcImV2ZW5pbmdcIixcbiAgICBuaWdodDogXCJuaWdodFwiLFxuICB9LFxuICB3aWRlOiB7XG4gICAgYW06IFwiYS5tLlwiLFxuICAgIHBtOiBcInAubS5cIixcbiAgICBtaWRuaWdodDogXCJtaWRuaWdodFwiLFxuICAgIG5vb246IFwibm9vblwiLFxuICAgIG1vcm5pbmc6IFwibW9ybmluZ1wiLFxuICAgIGFmdGVybm9vbjogXCJhZnRlcm5vb25cIixcbiAgICBldmVuaW5nOiBcImV2ZW5pbmdcIixcbiAgICBuaWdodDogXCJuaWdodFwiLFxuICB9LFxufTtcblxuY29uc3QgZm9ybWF0dGluZ0RheVBlcmlvZFZhbHVlcyA9IHtcbiAgbmFycm93OiB7XG4gICAgYW06IFwiYVwiLFxuICAgIHBtOiBcInBcIixcbiAgICBtaWRuaWdodDogXCJtaVwiLFxuICAgIG5vb246IFwiblwiLFxuICAgIG1vcm5pbmc6IFwiaW4gdGhlIG1vcm5pbmdcIixcbiAgICBhZnRlcm5vb246IFwiaW4gdGhlIGFmdGVybm9vblwiLFxuICAgIGV2ZW5pbmc6IFwiaW4gdGhlIGV2ZW5pbmdcIixcbiAgICBuaWdodDogXCJhdCBuaWdodFwiLFxuICB9LFxuICBhYmJyZXZpYXRlZDoge1xuICAgIGFtOiBcIkFNXCIsXG4gICAgcG06IFwiUE1cIixcbiAgICBtaWRuaWdodDogXCJtaWRuaWdodFwiLFxuICAgIG5vb246IFwibm9vblwiLFxuICAgIG1vcm5pbmc6IFwiaW4gdGhlIG1vcm5pbmdcIixcbiAgICBhZnRlcm5vb246IFwiaW4gdGhlIGFmdGVybm9vblwiLFxuICAgIGV2ZW5pbmc6IFwiaW4gdGhlIGV2ZW5pbmdcIixcbiAgICBuaWdodDogXCJhdCBuaWdodFwiLFxuICB9LFxuICB3aWRlOiB7XG4gICAgYW06IFwiYS5tLlwiLFxuICAgIHBtOiBcInAubS5cIixcbiAgICBtaWRuaWdodDogXCJtaWRuaWdodFwiLFxuICAgIG5vb246IFwibm9vblwiLFxuICAgIG1vcm5pbmc6IFwiaW4gdGhlIG1vcm5pbmdcIixcbiAgICBhZnRlcm5vb246IFwiaW4gdGhlIGFmdGVybm9vblwiLFxuICAgIGV2ZW5pbmc6IFwiaW4gdGhlIGV2ZW5pbmdcIixcbiAgICBuaWdodDogXCJhdCBuaWdodFwiLFxuICB9LFxufTtcblxuY29uc3Qgb3JkaW5hbE51bWJlciA9IChkaXJ0eU51bWJlciwgX29wdGlvbnMpID0+IHtcbiAgY29uc3QgbnVtYmVyID0gTnVtYmVyKGRpcnR5TnVtYmVyKTtcblxuICAvLyBJZiBvcmRpbmFsIG51bWJlcnMgZGVwZW5kIG9uIGNvbnRleHQsIGZvciBleGFtcGxlLFxuICAvLyBpZiB0aGV5IGFyZSBkaWZmZXJlbnQgZm9yIGRpZmZlcmVudCBncmFtbWF0aWNhbCBnZW5kZXJzLFxuICAvLyB1c2UgYG9wdGlvbnMudW5pdGAuXG4gIC8vXG4gIC8vIGB1bml0YCBjYW4gYmUgJ3llYXInLCAncXVhcnRlcicsICdtb250aCcsICd3ZWVrJywgJ2RhdGUnLCAnZGF5T2ZZZWFyJyxcbiAgLy8gJ2RheScsICdob3VyJywgJ21pbnV0ZScsICdzZWNvbmQnLlxuXG4gIGNvbnN0IHJlbTEwMCA9IG51bWJlciAlIDEwMDtcbiAgaWYgKHJlbTEwMCA+IDIwIHx8IHJlbTEwMCA8IDEwKSB7XG4gICAgc3dpdGNoIChyZW0xMDAgJSAxMCkge1xuICAgICAgY2FzZSAxOlxuICAgICAgICByZXR1cm4gbnVtYmVyICsgXCJzdFwiO1xuICAgICAgY2FzZSAyOlxuICAgICAgICByZXR1cm4gbnVtYmVyICsgXCJuZFwiO1xuICAgICAgY2FzZSAzOlxuICAgICAgICByZXR1cm4gbnVtYmVyICsgXCJyZFwiO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVtYmVyICsgXCJ0aFwiO1xufTtcblxuZXhwb3J0IGNvbnN0IGxvY2FsaXplID0ge1xuICBvcmRpbmFsTnVtYmVyLFxuXG4gIGVyYTogYnVpbGRMb2NhbGl6ZUZuKHtcbiAgICB2YWx1ZXM6IGVyYVZhbHVlcyxcbiAgICBkZWZhdWx0V2lkdGg6IFwid2lkZVwiLFxuICB9KSxcblxuICBxdWFydGVyOiBidWlsZExvY2FsaXplRm4oe1xuICAgIHZhbHVlczogcXVhcnRlclZhbHVlcyxcbiAgICBkZWZhdWx0V2lkdGg6IFwid2lkZVwiLFxuICAgIGFyZ3VtZW50Q2FsbGJhY2s6IChxdWFydGVyKSA9PiBxdWFydGVyIC0gMSxcbiAgfSksXG5cbiAgbW9udGg6IGJ1aWxkTG9jYWxpemVGbih7XG4gICAgdmFsdWVzOiBtb250aFZhbHVlcyxcbiAgICBkZWZhdWx0V2lkdGg6IFwid2lkZVwiLFxuICB9KSxcblxuICBkYXk6IGJ1aWxkTG9jYWxpemVGbih7XG4gICAgdmFsdWVzOiBkYXlWYWx1ZXMsXG4gICAgZGVmYXVsdFdpZHRoOiBcIndpZGVcIixcbiAgfSksXG5cbiAgZGF5UGVyaW9kOiBidWlsZExvY2FsaXplRm4oe1xuICAgIHZhbHVlczogZGF5UGVyaW9kVmFsdWVzLFxuICAgIGRlZmF1bHRXaWR0aDogXCJ3aWRlXCIsXG4gICAgZm9ybWF0dGluZ1ZhbHVlczogZm9ybWF0dGluZ0RheVBlcmlvZFZhbHVlcyxcbiAgICBkZWZhdWx0Rm9ybWF0dGluZ1dpZHRoOiBcIndpZGVcIixcbiAgfSksXG59O1xuIiwiZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkTWF0Y2hGbihhcmdzKSB7XG4gIHJldHVybiAoc3RyaW5nLCBvcHRpb25zID0ge30pID0+IHtcbiAgICBjb25zdCB3aWR0aCA9IG9wdGlvbnMud2lkdGg7XG5cbiAgICBjb25zdCBtYXRjaFBhdHRlcm4gPVxuICAgICAgKHdpZHRoICYmIGFyZ3MubWF0Y2hQYXR0ZXJuc1t3aWR0aF0pIHx8XG4gICAgICBhcmdzLm1hdGNoUGF0dGVybnNbYXJncy5kZWZhdWx0TWF0Y2hXaWR0aF07XG4gICAgY29uc3QgbWF0Y2hSZXN1bHQgPSBzdHJpbmcubWF0Y2gobWF0Y2hQYXR0ZXJuKTtcblxuICAgIGlmICghbWF0Y2hSZXN1bHQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBtYXRjaGVkU3RyaW5nID0gbWF0Y2hSZXN1bHRbMF07XG5cbiAgICBjb25zdCBwYXJzZVBhdHRlcm5zID1cbiAgICAgICh3aWR0aCAmJiBhcmdzLnBhcnNlUGF0dGVybnNbd2lkdGhdKSB8fFxuICAgICAgYXJncy5wYXJzZVBhdHRlcm5zW2FyZ3MuZGVmYXVsdFBhcnNlV2lkdGhdO1xuXG4gICAgY29uc3Qga2V5ID0gQXJyYXkuaXNBcnJheShwYXJzZVBhdHRlcm5zKVxuICAgICAgPyBmaW5kSW5kZXgocGFyc2VQYXR0ZXJucywgKHBhdHRlcm4pID0+IHBhdHRlcm4udGVzdChtYXRjaGVkU3RyaW5nKSlcbiAgICAgIDogLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkgLS0gSSBjaGFsbGFuZ2UgeW91IHRvIGZpeCB0aGUgdHlwZVxuICAgICAgICBmaW5kS2V5KHBhcnNlUGF0dGVybnMsIChwYXR0ZXJuKSA9PiBwYXR0ZXJuLnRlc3QobWF0Y2hlZFN0cmluZykpO1xuXG4gICAgbGV0IHZhbHVlO1xuXG4gICAgdmFsdWUgPSBhcmdzLnZhbHVlQ2FsbGJhY2sgPyBhcmdzLnZhbHVlQ2FsbGJhY2soa2V5KSA6IGtleTtcbiAgICB2YWx1ZSA9IG9wdGlvbnMudmFsdWVDYWxsYmFja1xuICAgICAgPyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSAtLSBJIGNoYWxsYW5nZSB5b3UgdG8gZml4IHRoZSB0eXBlXG4gICAgICAgIG9wdGlvbnMudmFsdWVDYWxsYmFjayh2YWx1ZSlcbiAgICAgIDogdmFsdWU7XG5cbiAgICBjb25zdCByZXN0ID0gc3RyaW5nLnNsaWNlKG1hdGNoZWRTdHJpbmcubGVuZ3RoKTtcblxuICAgIHJldHVybiB7IHZhbHVlLCByZXN0IH07XG4gIH07XG59XG5cbmZ1bmN0aW9uIGZpbmRLZXkob2JqZWN0LCBwcmVkaWNhdGUpIHtcbiAgZm9yIChjb25zdCBrZXkgaW4gb2JqZWN0KSB7XG4gICAgaWYgKFxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSAmJlxuICAgICAgcHJlZGljYXRlKG9iamVjdFtrZXldKVxuICAgICkge1xuICAgICAgcmV0dXJuIGtleTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gZmluZEluZGV4KGFycmF5LCBwcmVkaWNhdGUpIHtcbiAgZm9yIChsZXQga2V5ID0gMDsga2V5IDwgYXJyYXkubGVuZ3RoOyBrZXkrKykge1xuICAgIGlmIChwcmVkaWNhdGUoYXJyYXlba2V5XSkpIHtcbiAgICAgIHJldHVybiBrZXk7XG4gICAgfVxuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG4iLCJpbXBvcnQgeyBidWlsZE1hdGNoRm4gfSBmcm9tIFwiLi4vLi4vX2xpYi9idWlsZE1hdGNoRm4ubWpzXCI7XG5pbXBvcnQgeyBidWlsZE1hdGNoUGF0dGVybkZuIH0gZnJvbSBcIi4uLy4uL19saWIvYnVpbGRNYXRjaFBhdHRlcm5Gbi5tanNcIjtcblxuY29uc3QgbWF0Y2hPcmRpbmFsTnVtYmVyUGF0dGVybiA9IC9eKFxcZCspKHRofHN0fG5kfHJkKT8vaTtcbmNvbnN0IHBhcnNlT3JkaW5hbE51bWJlclBhdHRlcm4gPSAvXFxkKy9pO1xuXG5jb25zdCBtYXRjaEVyYVBhdHRlcm5zID0ge1xuICBuYXJyb3c6IC9eKGJ8YSkvaSxcbiAgYWJicmV2aWF0ZWQ6IC9eKGJcXC4/XFxzP2NcXC4/fGJcXC4/XFxzP2NcXC4/XFxzP2VcXC4/fGFcXC4/XFxzP2RcXC4/fGNcXC4/XFxzP2VcXC4/KS9pLFxuICB3aWRlOiAvXihiZWZvcmUgY2hyaXN0fGJlZm9yZSBjb21tb24gZXJhfGFubm8gZG9taW5pfGNvbW1vbiBlcmEpL2ksXG59O1xuY29uc3QgcGFyc2VFcmFQYXR0ZXJucyA9IHtcbiAgYW55OiBbL15iL2ksIC9eKGF8YykvaV0sXG59O1xuXG5jb25zdCBtYXRjaFF1YXJ0ZXJQYXR0ZXJucyA9IHtcbiAgbmFycm93OiAvXlsxMjM0XS9pLFxuICBhYmJyZXZpYXRlZDogL15xWzEyMzRdL2ksXG4gIHdpZGU6IC9eWzEyMzRdKHRofHN0fG5kfHJkKT8gcXVhcnRlci9pLFxufTtcbmNvbnN0IHBhcnNlUXVhcnRlclBhdHRlcm5zID0ge1xuICBhbnk6IFsvMS9pLCAvMi9pLCAvMy9pLCAvNC9pXSxcbn07XG5cbmNvbnN0IG1hdGNoTW9udGhQYXR0ZXJucyA9IHtcbiAgbmFycm93OiAvXltqZm1hc29uZF0vaSxcbiAgYWJicmV2aWF0ZWQ6IC9eKGphbnxmZWJ8bWFyfGFwcnxtYXl8anVufGp1bHxhdWd8c2VwfG9jdHxub3Z8ZGVjKS9pLFxuICB3aWRlOiAvXihqYW51YXJ5fGZlYnJ1YXJ5fG1hcmNofGFwcmlsfG1heXxqdW5lfGp1bHl8YXVndXN0fHNlcHRlbWJlcnxvY3RvYmVyfG5vdmVtYmVyfGRlY2VtYmVyKS9pLFxufTtcbmNvbnN0IHBhcnNlTW9udGhQYXR0ZXJucyA9IHtcbiAgbmFycm93OiBbXG4gICAgL15qL2ksXG4gICAgL15mL2ksXG4gICAgL15tL2ksXG4gICAgL15hL2ksXG4gICAgL15tL2ksXG4gICAgL15qL2ksXG4gICAgL15qL2ksXG4gICAgL15hL2ksXG4gICAgL15zL2ksXG4gICAgL15vL2ksXG4gICAgL15uL2ksXG4gICAgL15kL2ksXG4gIF0sXG5cbiAgYW55OiBbXG4gICAgL15qYS9pLFxuICAgIC9eZi9pLFxuICAgIC9ebWFyL2ksXG4gICAgL15hcC9pLFxuICAgIC9ebWF5L2ksXG4gICAgL15qdW4vaSxcbiAgICAvXmp1bC9pLFxuICAgIC9eYXUvaSxcbiAgICAvXnMvaSxcbiAgICAvXm8vaSxcbiAgICAvXm4vaSxcbiAgICAvXmQvaSxcbiAgXSxcbn07XG5cbmNvbnN0IG1hdGNoRGF5UGF0dGVybnMgPSB7XG4gIG5hcnJvdzogL15bc210d2ZdL2ksXG4gIHNob3J0OiAvXihzdXxtb3x0dXx3ZXx0aHxmcnxzYSkvaSxcbiAgYWJicmV2aWF0ZWQ6IC9eKHN1bnxtb258dHVlfHdlZHx0aHV8ZnJpfHNhdCkvaSxcbiAgd2lkZTogL14oc3VuZGF5fG1vbmRheXx0dWVzZGF5fHdlZG5lc2RheXx0aHVyc2RheXxmcmlkYXl8c2F0dXJkYXkpL2ksXG59O1xuY29uc3QgcGFyc2VEYXlQYXR0ZXJucyA9IHtcbiAgbmFycm93OiBbL15zL2ksIC9ebS9pLCAvXnQvaSwgL153L2ksIC9edC9pLCAvXmYvaSwgL15zL2ldLFxuICBhbnk6IFsvXnN1L2ksIC9ebS9pLCAvXnR1L2ksIC9edy9pLCAvXnRoL2ksIC9eZi9pLCAvXnNhL2ldLFxufTtcblxuY29uc3QgbWF0Y2hEYXlQZXJpb2RQYXR0ZXJucyA9IHtcbiAgbmFycm93OiAvXihhfHB8bWl8bnwoaW4gdGhlfGF0KSAobW9ybmluZ3xhZnRlcm5vb258ZXZlbmluZ3xuaWdodCkpL2ksXG4gIGFueTogL14oW2FwXVxcLj9cXHM/bVxcLj98bWlkbmlnaHR8bm9vbnwoaW4gdGhlfGF0KSAobW9ybmluZ3xhZnRlcm5vb258ZXZlbmluZ3xuaWdodCkpL2ksXG59O1xuY29uc3QgcGFyc2VEYXlQZXJpb2RQYXR0ZXJucyA9IHtcbiAgYW55OiB7XG4gICAgYW06IC9eYS9pLFxuICAgIHBtOiAvXnAvaSxcbiAgICBtaWRuaWdodDogL15taS9pLFxuICAgIG5vb246IC9ebm8vaSxcbiAgICBtb3JuaW5nOiAvbW9ybmluZy9pLFxuICAgIGFmdGVybm9vbjogL2FmdGVybm9vbi9pLFxuICAgIGV2ZW5pbmc6IC9ldmVuaW5nL2ksXG4gICAgbmlnaHQ6IC9uaWdodC9pLFxuICB9LFxufTtcblxuZXhwb3J0IGNvbnN0IG1hdGNoID0ge1xuICBvcmRpbmFsTnVtYmVyOiBidWlsZE1hdGNoUGF0dGVybkZuKHtcbiAgICBtYXRjaFBhdHRlcm46IG1hdGNoT3JkaW5hbE51bWJlclBhdHRlcm4sXG4gICAgcGFyc2VQYXR0ZXJuOiBwYXJzZU9yZGluYWxOdW1iZXJQYXR0ZXJuLFxuICAgIHZhbHVlQ2FsbGJhY2s6ICh2YWx1ZSkgPT4gcGFyc2VJbnQodmFsdWUsIDEwKSxcbiAgfSksXG5cbiAgZXJhOiBidWlsZE1hdGNoRm4oe1xuICAgIG1hdGNoUGF0dGVybnM6IG1hdGNoRXJhUGF0dGVybnMsXG4gICAgZGVmYXVsdE1hdGNoV2lkdGg6IFwid2lkZVwiLFxuICAgIHBhcnNlUGF0dGVybnM6IHBhcnNlRXJhUGF0dGVybnMsXG4gICAgZGVmYXVsdFBhcnNlV2lkdGg6IFwiYW55XCIsXG4gIH0pLFxuXG4gIHF1YXJ0ZXI6IGJ1aWxkTWF0Y2hGbih7XG4gICAgbWF0Y2hQYXR0ZXJuczogbWF0Y2hRdWFydGVyUGF0dGVybnMsXG4gICAgZGVmYXVsdE1hdGNoV2lkdGg6IFwid2lkZVwiLFxuICAgIHBhcnNlUGF0dGVybnM6IHBhcnNlUXVhcnRlclBhdHRlcm5zLFxuICAgIGRlZmF1bHRQYXJzZVdpZHRoOiBcImFueVwiLFxuICAgIHZhbHVlQ2FsbGJhY2s6IChpbmRleCkgPT4gaW5kZXggKyAxLFxuICB9KSxcblxuICBtb250aDogYnVpbGRNYXRjaEZuKHtcbiAgICBtYXRjaFBhdHRlcm5zOiBtYXRjaE1vbnRoUGF0dGVybnMsXG4gICAgZGVmYXVsdE1hdGNoV2lkdGg6IFwid2lkZVwiLFxuICAgIHBhcnNlUGF0dGVybnM6IHBhcnNlTW9udGhQYXR0ZXJucyxcbiAgICBkZWZhdWx0UGFyc2VXaWR0aDogXCJhbnlcIixcbiAgfSksXG5cbiAgZGF5OiBidWlsZE1hdGNoRm4oe1xuICAgIG1hdGNoUGF0dGVybnM6IG1hdGNoRGF5UGF0dGVybnMsXG4gICAgZGVmYXVsdE1hdGNoV2lkdGg6IFwid2lkZVwiLFxuICAgIHBhcnNlUGF0dGVybnM6IHBhcnNlRGF5UGF0dGVybnMsXG4gICAgZGVmYXVsdFBhcnNlV2lkdGg6IFwiYW55XCIsXG4gIH0pLFxuXG4gIGRheVBlcmlvZDogYnVpbGRNYXRjaEZuKHtcbiAgICBtYXRjaFBhdHRlcm5zOiBtYXRjaERheVBlcmlvZFBhdHRlcm5zLFxuICAgIGRlZmF1bHRNYXRjaFdpZHRoOiBcImFueVwiLFxuICAgIHBhcnNlUGF0dGVybnM6IHBhcnNlRGF5UGVyaW9kUGF0dGVybnMsXG4gICAgZGVmYXVsdFBhcnNlV2lkdGg6IFwiYW55XCIsXG4gIH0pLFxufTtcbiIsImV4cG9ydCBmdW5jdGlvbiBidWlsZE1hdGNoUGF0dGVybkZuKGFyZ3MpIHtcbiAgcmV0dXJuIChzdHJpbmcsIG9wdGlvbnMgPSB7fSkgPT4ge1xuICAgIGNvbnN0IG1hdGNoUmVzdWx0ID0gc3RyaW5nLm1hdGNoKGFyZ3MubWF0Y2hQYXR0ZXJuKTtcbiAgICBpZiAoIW1hdGNoUmVzdWx0KSByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBtYXRjaGVkU3RyaW5nID0gbWF0Y2hSZXN1bHRbMF07XG5cbiAgICBjb25zdCBwYXJzZVJlc3VsdCA9IHN0cmluZy5tYXRjaChhcmdzLnBhcnNlUGF0dGVybik7XG4gICAgaWYgKCFwYXJzZVJlc3VsdCkgcmV0dXJuIG51bGw7XG4gICAgbGV0IHZhbHVlID0gYXJncy52YWx1ZUNhbGxiYWNrXG4gICAgICA/IGFyZ3MudmFsdWVDYWxsYmFjayhwYXJzZVJlc3VsdFswXSlcbiAgICAgIDogcGFyc2VSZXN1bHRbMF07XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSAtLSBJIGNoYWxsYW5nZSB5b3UgdG8gZml4IHRoZSB0eXBlXG4gICAgdmFsdWUgPSBvcHRpb25zLnZhbHVlQ2FsbGJhY2sgPyBvcHRpb25zLnZhbHVlQ2FsbGJhY2sodmFsdWUpIDogdmFsdWU7XG5cbiAgICBjb25zdCByZXN0ID0gc3RyaW5nLnNsaWNlKG1hdGNoZWRTdHJpbmcubGVuZ3RoKTtcblxuICAgIHJldHVybiB7IHZhbHVlLCByZXN0IH07XG4gIH07XG59XG4iLCJpbXBvcnQgeyBmb3JtYXREaXN0YW5jZSB9IGZyb20gXCIuL2VuLVVTL19saWIvZm9ybWF0RGlzdGFuY2UubWpzXCI7XG5pbXBvcnQgeyBmb3JtYXRMb25nIH0gZnJvbSBcIi4vZW4tVVMvX2xpYi9mb3JtYXRMb25nLm1qc1wiO1xuaW1wb3J0IHsgZm9ybWF0UmVsYXRpdmUgfSBmcm9tIFwiLi9lbi1VUy9fbGliL2Zvcm1hdFJlbGF0aXZlLm1qc1wiO1xuaW1wb3J0IHsgbG9jYWxpemUgfSBmcm9tIFwiLi9lbi1VUy9fbGliL2xvY2FsaXplLm1qc1wiO1xuaW1wb3J0IHsgbWF0Y2ggfSBmcm9tIFwiLi9lbi1VUy9fbGliL21hdGNoLm1qc1wiO1xuXG4vKipcbiAqIEBjYXRlZ29yeSBMb2NhbGVzXG4gKiBAc3VtbWFyeSBFbmdsaXNoIGxvY2FsZSAoVW5pdGVkIFN0YXRlcykuXG4gKiBAbGFuZ3VhZ2UgRW5nbGlzaFxuICogQGlzby02MzktMiBlbmdcbiAqIEBhdXRob3IgU2FzaGEgS29zcyBbQGtvc3Nub2NvcnBdKGh0dHBzOi8vZ2l0aHViLmNvbS9rb3Nzbm9jb3JwKVxuICogQGF1dGhvciBMZXNoYSBLb3NzIFtAbGVzaGFrb3NzXShodHRwczovL2dpdGh1Yi5jb20vbGVzaGFrb3NzKVxuICovXG5leHBvcnQgY29uc3QgZW5VUyA9IHtcbiAgY29kZTogXCJlbi1VU1wiLFxuICBmb3JtYXREaXN0YW5jZTogZm9ybWF0RGlzdGFuY2UsXG4gIGZvcm1hdExvbmc6IGZvcm1hdExvbmcsXG4gIGZvcm1hdFJlbGF0aXZlOiBmb3JtYXRSZWxhdGl2ZSxcbiAgbG9jYWxpemU6IGxvY2FsaXplLFxuICBtYXRjaDogbWF0Y2gsXG4gIG9wdGlvbnM6IHtcbiAgICB3ZWVrU3RhcnRzT246IDAgLyogU3VuZGF5ICovLFxuICAgIGZpcnN0V2Vla0NvbnRhaW5zRGF0ZTogMSxcbiAgfSxcbn07XG5cbi8vIEZhbGxiYWNrIGZvciBtb2R1bGFyaXplZCBpbXBvcnRzOlxuZXhwb3J0IGRlZmF1bHQgZW5VUztcbiIsImxldCBkZWZhdWx0T3B0aW9ucyA9IHt9O1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdE9wdGlvbnMoKSB7XG4gIHJldHVybiBkZWZhdWx0T3B0aW9ucztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldERlZmF1bHRPcHRpb25zKG5ld09wdGlvbnMpIHtcbiAgZGVmYXVsdE9wdGlvbnMgPSBuZXdPcHRpb25zO1xufVxuIiwiLyoqXG4gKiBAbW9kdWxlIGNvbnN0YW50c1xuICogQHN1bW1hcnkgVXNlZnVsIGNvbnN0YW50c1xuICogQGRlc2NyaXB0aW9uXG4gKiBDb2xsZWN0aW9uIG9mIHVzZWZ1bCBkYXRlIGNvbnN0YW50cy5cbiAqXG4gKiBUaGUgY29uc3RhbnRzIGNvdWxkIGJlIGltcG9ydGVkIGZyb20gYGRhdGUtZm5zL2NvbnN0YW50c2A6XG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IG1heFRpbWUsIG1pblRpbWUgfSBmcm9tIFwiLi9jb25zdGFudHMvZGF0ZS1mbnMvY29uc3RhbnRzXCI7XG4gKlxuICogZnVuY3Rpb24gaXNBbGxvd2VkVGltZSh0aW1lKSB7XG4gKiAgIHJldHVybiB0aW1lIDw9IG1heFRpbWUgJiYgdGltZSA+PSBtaW5UaW1lO1xuICogfVxuICogYGBgXG4gKi9cblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIGRheXNJbldlZWtcbiAqIEBzdW1tYXJ5IERheXMgaW4gMSB3ZWVrLlxuICovXG5leHBvcnQgY29uc3QgZGF5c0luV2VlayA9IDc7XG5cbi8qKlxuICogQGNvbnN0YW50XG4gKiBAbmFtZSBkYXlzSW5ZZWFyXG4gKiBAc3VtbWFyeSBEYXlzIGluIDEgeWVhci5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEhvdyBtYW55IGRheXMgaW4gYSB5ZWFyLlxuICpcbiAqIE9uZSB5ZWFycyBlcXVhbHMgMzY1LjI0MjUgZGF5cyBhY2NvcmRpbmcgdG8gdGhlIGZvcm11bGE6XG4gKlxuICogPiBMZWFwIHllYXIgb2NjdXJlcyBldmVyeSA0IHllYXJzLCBleGNlcHQgZm9yIHllYXJzIHRoYXQgYXJlIGRpdmlzYWJsZSBieSAxMDAgYW5kIG5vdCBkaXZpc2FibGUgYnkgNDAwLlxuICogPiAxIG1lYW4geWVhciA9ICgzNjUrMS80LTEvMTAwKzEvNDAwKSBkYXlzID0gMzY1LjI0MjUgZGF5c1xuICovXG5leHBvcnQgY29uc3QgZGF5c0luWWVhciA9IDM2NS4yNDI1O1xuXG4vKipcbiAqIEBjb25zdGFudFxuICogQG5hbWUgbWF4VGltZVxuICogQHN1bW1hcnkgTWF4aW11bSBhbGxvd2VkIHRpbWUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IG1heFRpbWUgfSBmcm9tIFwiLi9jb25zdGFudHMvZGF0ZS1mbnMvY29uc3RhbnRzXCI7XG4gKlxuICogY29uc3QgaXNWYWxpZCA9IDg2NDAwMDAwMDAwMDAwMDEgPD0gbWF4VGltZTtcbiAqIC8vPT4gZmFsc2VcbiAqXG4gKiBuZXcgRGF0ZSg4NjQwMDAwMDAwMDAwMDAxKTtcbiAqIC8vPT4gSW52YWxpZCBEYXRlXG4gKi9cbmV4cG9ydCBjb25zdCBtYXhUaW1lID0gTWF0aC5wb3coMTAsIDgpICogMjQgKiA2MCAqIDYwICogMTAwMDtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIG1pblRpbWVcbiAqIEBzdW1tYXJ5IE1pbmltdW0gYWxsb3dlZCB0aW1lLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBtaW5UaW1lIH0gZnJvbSBcIi4vY29uc3RhbnRzL2RhdGUtZm5zL2NvbnN0YW50c1wiO1xuICpcbiAqIGNvbnN0IGlzVmFsaWQgPSAtODY0MDAwMDAwMDAwMDAwMSA+PSBtaW5UaW1lO1xuICogLy89PiBmYWxzZVxuICpcbiAqIG5ldyBEYXRlKC04NjQwMDAwMDAwMDAwMDAxKVxuICogLy89PiBJbnZhbGlkIERhdGVcbiAqL1xuZXhwb3J0IGNvbnN0IG1pblRpbWUgPSAtbWF4VGltZTtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIG1pbGxpc2Vjb25kc0luV2Vla1xuICogQHN1bW1hcnkgTWlsbGlzZWNvbmRzIGluIDEgd2Vlay5cbiAqL1xuZXhwb3J0IGNvbnN0IG1pbGxpc2Vjb25kc0luV2VlayA9IDYwNDgwMDAwMDtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIG1pbGxpc2Vjb25kc0luRGF5XG4gKiBAc3VtbWFyeSBNaWxsaXNlY29uZHMgaW4gMSBkYXkuXG4gKi9cbmV4cG9ydCBjb25zdCBtaWxsaXNlY29uZHNJbkRheSA9IDg2NDAwMDAwO1xuXG4vKipcbiAqIEBjb25zdGFudFxuICogQG5hbWUgbWlsbGlzZWNvbmRzSW5NaW51dGVcbiAqIEBzdW1tYXJ5IE1pbGxpc2Vjb25kcyBpbiAxIG1pbnV0ZVxuICovXG5leHBvcnQgY29uc3QgbWlsbGlzZWNvbmRzSW5NaW51dGUgPSA2MDAwMDtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIG1pbGxpc2Vjb25kc0luSG91clxuICogQHN1bW1hcnkgTWlsbGlzZWNvbmRzIGluIDEgaG91clxuICovXG5leHBvcnQgY29uc3QgbWlsbGlzZWNvbmRzSW5Ib3VyID0gMzYwMDAwMDtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIG1pbGxpc2Vjb25kc0luU2Vjb25kXG4gKiBAc3VtbWFyeSBNaWxsaXNlY29uZHMgaW4gMSBzZWNvbmRcbiAqL1xuZXhwb3J0IGNvbnN0IG1pbGxpc2Vjb25kc0luU2Vjb25kID0gMTAwMDtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIG1pbnV0ZXNJblllYXJcbiAqIEBzdW1tYXJ5IE1pbnV0ZXMgaW4gMSB5ZWFyLlxuICovXG5leHBvcnQgY29uc3QgbWludXRlc0luWWVhciA9IDUyNTYwMDtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIG1pbnV0ZXNJbk1vbnRoXG4gKiBAc3VtbWFyeSBNaW51dGVzIGluIDEgbW9udGguXG4gKi9cbmV4cG9ydCBjb25zdCBtaW51dGVzSW5Nb250aCA9IDQzMjAwO1xuXG4vKipcbiAqIEBjb25zdGFudFxuICogQG5hbWUgbWludXRlc0luRGF5XG4gKiBAc3VtbWFyeSBNaW51dGVzIGluIDEgZGF5LlxuICovXG5leHBvcnQgY29uc3QgbWludXRlc0luRGF5ID0gMTQ0MDtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIG1pbnV0ZXNJbkhvdXJcbiAqIEBzdW1tYXJ5IE1pbnV0ZXMgaW4gMSBob3VyLlxuICovXG5leHBvcnQgY29uc3QgbWludXRlc0luSG91ciA9IDYwO1xuXG4vKipcbiAqIEBjb25zdGFudFxuICogQG5hbWUgbW9udGhzSW5RdWFydGVyXG4gKiBAc3VtbWFyeSBNb250aHMgaW4gMSBxdWFydGVyLlxuICovXG5leHBvcnQgY29uc3QgbW9udGhzSW5RdWFydGVyID0gMztcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIG1vbnRoc0luWWVhclxuICogQHN1bW1hcnkgTW9udGhzIGluIDEgeWVhci5cbiAqL1xuZXhwb3J0IGNvbnN0IG1vbnRoc0luWWVhciA9IDEyO1xuXG4vKipcbiAqIEBjb25zdGFudFxuICogQG5hbWUgcXVhcnRlcnNJblllYXJcbiAqIEBzdW1tYXJ5IFF1YXJ0ZXJzIGluIDEgeWVhclxuICovXG5leHBvcnQgY29uc3QgcXVhcnRlcnNJblllYXIgPSA0O1xuXG4vKipcbiAqIEBjb25zdGFudFxuICogQG5hbWUgc2Vjb25kc0luSG91clxuICogQHN1bW1hcnkgU2Vjb25kcyBpbiAxIGhvdXIuXG4gKi9cbmV4cG9ydCBjb25zdCBzZWNvbmRzSW5Ib3VyID0gMzYwMDtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIHNlY29uZHNJbk1pbnV0ZVxuICogQHN1bW1hcnkgU2Vjb25kcyBpbiAxIG1pbnV0ZS5cbiAqL1xuZXhwb3J0IGNvbnN0IHNlY29uZHNJbk1pbnV0ZSA9IDYwO1xuXG4vKipcbiAqIEBjb25zdGFudFxuICogQG5hbWUgc2Vjb25kc0luRGF5XG4gKiBAc3VtbWFyeSBTZWNvbmRzIGluIDEgZGF5LlxuICovXG5leHBvcnQgY29uc3Qgc2Vjb25kc0luRGF5ID0gc2Vjb25kc0luSG91ciAqIDI0O1xuXG4vKipcbiAqIEBjb25zdGFudFxuICogQG5hbWUgc2Vjb25kc0luV2Vla1xuICogQHN1bW1hcnkgU2Vjb25kcyBpbiAxIHdlZWsuXG4gKi9cbmV4cG9ydCBjb25zdCBzZWNvbmRzSW5XZWVrID0gc2Vjb25kc0luRGF5ICogNztcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIHNlY29uZHNJblllYXJcbiAqIEBzdW1tYXJ5IFNlY29uZHMgaW4gMSB5ZWFyLlxuICovXG5leHBvcnQgY29uc3Qgc2Vjb25kc0luWWVhciA9IHNlY29uZHNJbkRheSAqIGRheXNJblllYXI7XG5cbi8qKlxuICogQGNvbnN0YW50XG4gKiBAbmFtZSBzZWNvbmRzSW5Nb250aFxuICogQHN1bW1hcnkgU2Vjb25kcyBpbiAxIG1vbnRoXG4gKi9cbmV4cG9ydCBjb25zdCBzZWNvbmRzSW5Nb250aCA9IHNlY29uZHNJblllYXIgLyAxMjtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIHNlY29uZHNJblF1YXJ0ZXJcbiAqIEBzdW1tYXJ5IFNlY29uZHMgaW4gMSBxdWFydGVyLlxuICovXG5leHBvcnQgY29uc3Qgc2Vjb25kc0luUXVhcnRlciA9IHNlY29uZHNJbk1vbnRoICogMztcbiIsIi8qKlxuICogQG5hbWUgdG9EYXRlXG4gKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IENvbnZlcnQgdGhlIGdpdmVuIGFyZ3VtZW50IHRvIGFuIGluc3RhbmNlIG9mIERhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDb252ZXJ0IHRoZSBnaXZlbiBhcmd1bWVudCB0byBhbiBpbnN0YW5jZSBvZiBEYXRlLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBhbiBpbnN0YW5jZSBvZiBEYXRlLCB0aGUgZnVuY3Rpb24gcmV0dXJucyBpdHMgY2xvbmUuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIGEgbnVtYmVyLCBpdCBpcyB0cmVhdGVkIGFzIGEgdGltZXN0YW1wLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBub25lIG9mIHRoZSBhYm92ZSwgdGhlIGZ1bmN0aW9uIHJldHVybnMgSW52YWxpZCBEYXRlLlxuICpcbiAqICoqTm90ZSoqOiAqYWxsKiBEYXRlIGFyZ3VtZW50cyBwYXNzZWQgdG8gYW55ICpkYXRlLWZucyogZnVuY3Rpb24gaXMgcHJvY2Vzc2VkIGJ5IGB0b0RhdGVgLlxuICpcbiAqIEB0eXBlUGFyYW0gRGF0ZVR5cGUgLSBUaGUgYERhdGVgIHR5cGUsIHRoZSBmdW5jdGlvbiBvcGVyYXRlcyBvbi4gR2V0cyBpbmZlcnJlZCBmcm9tIHBhc3NlZCBhcmd1bWVudHMuIEFsbG93cyB0byB1c2UgZXh0ZW5zaW9ucyBsaWtlIFtgVVRDRGF0ZWBdKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy91dGMpLlxuICpcbiAqIEBwYXJhbSBhcmd1bWVudCAtIFRoZSB2YWx1ZSB0byBjb252ZXJ0XG4gKlxuICogQHJldHVybnMgVGhlIHBhcnNlZCBkYXRlIGluIHRoZSBsb2NhbCB0aW1lIHpvbmVcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQ2xvbmUgdGhlIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSB0b0RhdGUobmV3IERhdGUoMjAxNCwgMSwgMTEsIDExLCAzMCwgMzApKVxuICogLy89PiBUdWUgRmViIDExIDIwMTQgMTE6MzA6MzBcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQ29udmVydCB0aGUgdGltZXN0YW1wIHRvIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSB0b0RhdGUoMTM5MjA5ODQzMDAwMClcbiAqIC8vPT4gVHVlIEZlYiAxMSAyMDE0IDExOjMwOjMwXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0RhdGUoYXJndW1lbnQpIHtcbiAgY29uc3QgYXJnU3RyID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFyZ3VtZW50KTtcblxuICAvLyBDbG9uZSB0aGUgZGF0ZVxuICBpZiAoXG4gICAgYXJndW1lbnQgaW5zdGFuY2VvZiBEYXRlIHx8XG4gICAgKHR5cGVvZiBhcmd1bWVudCA9PT0gXCJvYmplY3RcIiAmJiBhcmdTdHIgPT09IFwiW29iamVjdCBEYXRlXVwiKVxuICApIHtcbiAgICAvLyBQcmV2ZW50IHRoZSBkYXRlIHRvIGxvc2UgdGhlIG1pbGxpc2Vjb25kcyB3aGVuIHBhc3NlZCB0byBuZXcgRGF0ZSgpIGluIElFMTBcbiAgICByZXR1cm4gbmV3IGFyZ3VtZW50LmNvbnN0cnVjdG9yKCthcmd1bWVudCk7XG4gIH0gZWxzZSBpZiAoXG4gICAgdHlwZW9mIGFyZ3VtZW50ID09PSBcIm51bWJlclwiIHx8XG4gICAgYXJnU3RyID09PSBcIltvYmplY3QgTnVtYmVyXVwiIHx8XG4gICAgdHlwZW9mIGFyZ3VtZW50ID09PSBcInN0cmluZ1wiIHx8XG4gICAgYXJnU3RyID09PSBcIltvYmplY3QgU3RyaW5nXVwiXG4gICkge1xuICAgIC8vIFRPRE86IENhbiB3ZSBnZXQgcmlkIG9mIGFzP1xuICAgIHJldHVybiBuZXcgRGF0ZShhcmd1bWVudCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gVE9ETzogQ2FuIHdlIGdldCByaWQgb2YgYXM/XG4gICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gIH1cbn1cblxuLy8gRmFsbGJhY2sgZm9yIG1vZHVsYXJpemVkIGltcG9ydHM6XG5leHBvcnQgZGVmYXVsdCB0b0RhdGU7XG4iLCJpbXBvcnQgeyB0b0RhdGUgfSBmcm9tIFwiLi90b0RhdGUubWpzXCI7XG5cbi8qKlxuICogQG5hbWUgc3RhcnRPZkRheVxuICogQGNhdGVnb3J5IERheSBIZWxwZXJzXG4gKiBAc3VtbWFyeSBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgZGF5IGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybiB0aGUgc3RhcnQgb2YgYSBkYXkgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICogVGhlIHJlc3VsdCB3aWxsIGJlIGluIHRoZSBsb2NhbCB0aW1lem9uZS5cbiAqXG4gKiBAdHlwZVBhcmFtIERhdGVUeXBlIC0gVGhlIGBEYXRlYCB0eXBlLCB0aGUgZnVuY3Rpb24gb3BlcmF0ZXMgb24uIEdldHMgaW5mZXJyZWQgZnJvbSBwYXNzZWQgYXJndW1lbnRzLiBBbGxvd3MgdG8gdXNlIGV4dGVuc2lvbnMgbGlrZSBbYFVUQ0RhdGVgXShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvdXRjKS5cbiAqXG4gKiBAcGFyYW0gZGF0ZSAtIFRoZSBvcmlnaW5hbCBkYXRlXG4gKlxuICogQHJldHVybnMgVGhlIHN0YXJ0IG9mIGEgZGF5XG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFRoZSBzdGFydCBvZiBhIGRheSBmb3IgMiBTZXB0ZW1iZXIgMjAxNCAxMTo1NTowMDpcbiAqIGNvbnN0IHJlc3VsdCA9IHN0YXJ0T2ZEYXkobmV3IERhdGUoMjAxNCwgOCwgMiwgMTEsIDU1LCAwKSlcbiAqIC8vPT4gVHVlIFNlcCAwMiAyMDE0IDAwOjAwOjAwXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdGFydE9mRGF5KGRhdGUpIHtcbiAgY29uc3QgX2RhdGUgPSB0b0RhdGUoZGF0ZSk7XG4gIF9kYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICByZXR1cm4gX2RhdGU7XG59XG5cbi8vIEZhbGxiYWNrIGZvciBtb2R1bGFyaXplZCBpbXBvcnRzOlxuZXhwb3J0IGRlZmF1bHQgc3RhcnRPZkRheTtcbiIsImltcG9ydCB7IHRvRGF0ZSB9IGZyb20gXCIuLi90b0RhdGUubWpzXCI7XG5cbi8qKlxuICogR29vZ2xlIENocm9tZSBhcyBvZiA2Ny4wLjMzOTYuODcgaW50cm9kdWNlZCB0aW1lem9uZXMgd2l0aCBvZmZzZXQgdGhhdCBpbmNsdWRlcyBzZWNvbmRzLlxuICogVGhleSB1c3VhbGx5IGFwcGVhciBmb3IgZGF0ZXMgdGhhdCBkZW5vdGUgdGltZSBiZWZvcmUgdGhlIHRpbWV6b25lcyB3ZXJlIGludHJvZHVjZWRcbiAqIChlLmcuIGZvciAnRXVyb3BlL1ByYWd1ZScgdGltZXpvbmUgdGhlIG9mZnNldCBpcyBHTVQrMDA6NTc6NDQgYmVmb3JlIDEgT2N0b2JlciAxODkxXG4gKiBhbmQgR01UKzAxOjAwOjAwIGFmdGVyIHRoYXQgZGF0ZSlcbiAqXG4gKiBEYXRlI2dldFRpbWV6b25lT2Zmc2V0IHJldHVybnMgdGhlIG9mZnNldCBpbiBtaW51dGVzIGFuZCB3b3VsZCByZXR1cm4gNTcgZm9yIHRoZSBleGFtcGxlIGFib3ZlLFxuICogd2hpY2ggd291bGQgbGVhZCB0byBpbmNvcnJlY3QgY2FsY3VsYXRpb25zLlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gcmV0dXJucyB0aGUgdGltZXpvbmUgb2Zmc2V0IGluIG1pbGxpc2Vjb25kcyB0aGF0IHRha2VzIHNlY29uZHMgaW4gYWNjb3VudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRpbWV6b25lT2Zmc2V0SW5NaWxsaXNlY29uZHMoZGF0ZSkge1xuICBjb25zdCBfZGF0ZSA9IHRvRGF0ZShkYXRlKTtcbiAgY29uc3QgdXRjRGF0ZSA9IG5ldyBEYXRlKFxuICAgIERhdGUuVVRDKFxuICAgICAgX2RhdGUuZ2V0RnVsbFllYXIoKSxcbiAgICAgIF9kYXRlLmdldE1vbnRoKCksXG4gICAgICBfZGF0ZS5nZXREYXRlKCksXG4gICAgICBfZGF0ZS5nZXRIb3VycygpLFxuICAgICAgX2RhdGUuZ2V0TWludXRlcygpLFxuICAgICAgX2RhdGUuZ2V0U2Vjb25kcygpLFxuICAgICAgX2RhdGUuZ2V0TWlsbGlzZWNvbmRzKCksXG4gICAgKSxcbiAgKTtcbiAgdXRjRGF0ZS5zZXRVVENGdWxsWWVhcihfZGF0ZS5nZXRGdWxsWWVhcigpKTtcbiAgcmV0dXJuICtkYXRlIC0gK3V0Y0RhdGU7XG59XG4iLCIvKipcbiAqIEBuYW1lIGNvbnN0cnVjdEZyb21cbiAqIEBjYXRlZ29yeSBHZW5lcmljIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IENvbnN0cnVjdHMgYSBkYXRlIHVzaW5nIHRoZSByZWZlcmVuY2UgZGF0ZSBhbmQgdGhlIHZhbHVlXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgZnVuY3Rpb24gY29uc3RydWN0cyBhIG5ldyBkYXRlIHVzaW5nIHRoZSBjb25zdHJ1Y3RvciBmcm9tIHRoZSByZWZlcmVuY2VcbiAqIGRhdGUgYW5kIHRoZSBnaXZlbiB2YWx1ZS4gSXQgaGVscHMgdG8gYnVpbGQgZ2VuZXJpYyBmdW5jdGlvbnMgdGhhdCBhY2NlcHRcbiAqIGRhdGUgZXh0ZW5zaW9ucy5cbiAqXG4gKiBJdCBkZWZhdWx0cyB0byBgRGF0ZWAgaWYgdGhlIHBhc3NlZCByZWZlcmVuY2UgZGF0ZSBpcyBhIG51bWJlciBvciBhIHN0cmluZy5cbiAqXG4gKiBAdHlwZVBhcmFtIERhdGVUeXBlIC0gVGhlIGBEYXRlYCB0eXBlLCB0aGUgZnVuY3Rpb24gb3BlcmF0ZXMgb24uIEdldHMgaW5mZXJyZWQgZnJvbSBwYXNzZWQgYXJndW1lbnRzLiBBbGxvd3MgdG8gdXNlIGV4dGVuc2lvbnMgbGlrZSBbYFVUQ0RhdGVgXShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvdXRjKS5cbiAqXG4gKiBAcGFyYW0gZGF0ZSAtIFRoZSByZWZlcmVuY2UgZGF0ZSB0byB0YWtlIGNvbnN0cnVjdG9yIGZyb21cbiAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSB0byBjcmVhdGUgdGhlIGRhdGVcbiAqXG4gKiBAcmV0dXJucyBEYXRlIGluaXRpYWxpemVkIHVzaW5nIHRoZSBnaXZlbiBkYXRlIGFuZCB2YWx1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBjb25zdHJ1Y3RGcm9tIH0gZnJvbSAnZGF0ZS1mbnMnXG4gKlxuICogLy8gQSBmdW5jdGlvbiB0aGF0IGNsb25lcyBhIGRhdGUgcHJlc2VydmluZyB0aGUgb3JpZ2luYWwgdHlwZVxuICogZnVuY3Rpb24gY2xvbmVEYXRlPERhdGVUeXBlIGV4dGVuZHMgRGF0ZShkYXRlOiBEYXRlVHlwZSk6IERhdGVUeXBlIHtcbiAqICAgcmV0dXJuIGNvbnN0cnVjdEZyb20oXG4gKiAgICAgZGF0ZSwgLy8gVXNlIGNvbnRydXN0b3IgZnJvbSB0aGUgZ2l2ZW4gZGF0ZVxuICogICAgIGRhdGUuZ2V0VGltZSgpIC8vIFVzZSB0aGUgZGF0ZSB2YWx1ZSB0byBjcmVhdGUgYSBuZXcgZGF0ZVxuICogICApXG4gKiB9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb25zdHJ1Y3RGcm9tKGRhdGUsIHZhbHVlKSB7XG4gIGlmIChkYXRlIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgIHJldHVybiBuZXcgZGF0ZS5jb25zdHJ1Y3Rvcih2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKHZhbHVlKTtcbiAgfVxufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IGNvbnN0cnVjdEZyb207XG4iLCJpbXBvcnQgeyBkaWZmZXJlbmNlSW5DYWxlbmRhckRheXMgfSBmcm9tIFwiLi9kaWZmZXJlbmNlSW5DYWxlbmRhckRheXMubWpzXCI7XG5pbXBvcnQgeyBzdGFydE9mWWVhciB9IGZyb20gXCIuL3N0YXJ0T2ZZZWFyLm1qc1wiO1xuaW1wb3J0IHsgdG9EYXRlIH0gZnJvbSBcIi4vdG9EYXRlLm1qc1wiO1xuXG4vKipcbiAqIEBuYW1lIGdldERheU9mWWVhclxuICogQGNhdGVnb3J5IERheSBIZWxwZXJzXG4gKiBAc3VtbWFyeSBHZXQgdGhlIGRheSBvZiB0aGUgeWVhciBvZiB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEdldCB0aGUgZGF5IG9mIHRoZSB5ZWFyIG9mIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIEB0eXBlUGFyYW0gRGF0ZVR5cGUgLSBUaGUgYERhdGVgIHR5cGUsIHRoZSBmdW5jdGlvbiBvcGVyYXRlcyBvbi4gR2V0cyBpbmZlcnJlZCBmcm9tIHBhc3NlZCBhcmd1bWVudHMuIEFsbG93cyB0byB1c2UgZXh0ZW5zaW9ucyBsaWtlIFtgVVRDRGF0ZWBdKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy91dGMpLlxuICpcbiAqIEBwYXJhbSBkYXRlIC0gVGhlIGdpdmVuIGRhdGVcbiAqXG4gKiBAcmV0dXJucyBUaGUgZGF5IG9mIHllYXJcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gV2hpY2ggZGF5IG9mIHRoZSB5ZWFyIGlzIDIgSnVseSAyMDE0P1xuICogY29uc3QgcmVzdWx0ID0gZ2V0RGF5T2ZZZWFyKG5ldyBEYXRlKDIwMTQsIDYsIDIpKVxuICogLy89PiAxODNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldERheU9mWWVhcihkYXRlKSB7XG4gIGNvbnN0IF9kYXRlID0gdG9EYXRlKGRhdGUpO1xuICBjb25zdCBkaWZmID0gZGlmZmVyZW5jZUluQ2FsZW5kYXJEYXlzKF9kYXRlLCBzdGFydE9mWWVhcihfZGF0ZSkpO1xuICBjb25zdCBkYXlPZlllYXIgPSBkaWZmICsgMTtcbiAgcmV0dXJuIGRheU9mWWVhcjtcbn1cblxuLy8gRmFsbGJhY2sgZm9yIG1vZHVsYXJpemVkIGltcG9ydHM6XG5leHBvcnQgZGVmYXVsdCBnZXREYXlPZlllYXI7XG4iLCJpbXBvcnQgeyBtaWxsaXNlY29uZHNJbkRheSB9IGZyb20gXCIuL2NvbnN0YW50cy5tanNcIjtcbmltcG9ydCB7IHN0YXJ0T2ZEYXkgfSBmcm9tIFwiLi9zdGFydE9mRGF5Lm1qc1wiO1xuaW1wb3J0IHsgZ2V0VGltZXpvbmVPZmZzZXRJbk1pbGxpc2Vjb25kcyB9IGZyb20gXCIuL19saWIvZ2V0VGltZXpvbmVPZmZzZXRJbk1pbGxpc2Vjb25kcy5tanNcIjtcblxuLyoqXG4gKiBAbmFtZSBkaWZmZXJlbmNlSW5DYWxlbmRhckRheXNcbiAqIEBjYXRlZ29yeSBEYXkgSGVscGVyc1xuICogQHN1bW1hcnkgR2V0IHRoZSBudW1iZXIgb2YgY2FsZW5kYXIgZGF5cyBiZXR3ZWVuIHRoZSBnaXZlbiBkYXRlcy5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEdldCB0aGUgbnVtYmVyIG9mIGNhbGVuZGFyIGRheXMgYmV0d2VlbiB0aGUgZ2l2ZW4gZGF0ZXMuIFRoaXMgbWVhbnMgdGhhdCB0aGUgdGltZXMgYXJlIHJlbW92ZWRcbiAqIGZyb20gdGhlIGRhdGVzIGFuZCB0aGVuIHRoZSBkaWZmZXJlbmNlIGluIGRheXMgaXMgY2FsY3VsYXRlZC5cbiAqXG4gKiBAdHlwZVBhcmFtIERhdGVUeXBlIC0gVGhlIGBEYXRlYCB0eXBlLCB0aGUgZnVuY3Rpb24gb3BlcmF0ZXMgb24uIEdldHMgaW5mZXJyZWQgZnJvbSBwYXNzZWQgYXJndW1lbnRzLiBBbGxvd3MgdG8gdXNlIGV4dGVuc2lvbnMgbGlrZSBbYFVUQ0RhdGVgXShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvdXRjKS5cbiAqXG4gKiBAcGFyYW0gZGF0ZUxlZnQgLSBUaGUgbGF0ZXIgZGF0ZVxuICogQHBhcmFtIGRhdGVSaWdodCAtIFRoZSBlYXJsaWVyIGRhdGVcbiAqXG4gKiBAcmV0dXJucyBUaGUgbnVtYmVyIG9mIGNhbGVuZGFyIGRheXNcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSG93IG1hbnkgY2FsZW5kYXIgZGF5cyBhcmUgYmV0d2VlblxuICogLy8gMiBKdWx5IDIwMTEgMjM6MDA6MDAgYW5kIDIgSnVseSAyMDEyIDAwOjAwOjAwP1xuICogY29uc3QgcmVzdWx0ID0gZGlmZmVyZW5jZUluQ2FsZW5kYXJEYXlzKFxuICogICBuZXcgRGF0ZSgyMDEyLCA2LCAyLCAwLCAwKSxcbiAqICAgbmV3IERhdGUoMjAxMSwgNiwgMiwgMjMsIDApXG4gKiApXG4gKiAvLz0+IDM2NlxuICogLy8gSG93IG1hbnkgY2FsZW5kYXIgZGF5cyBhcmUgYmV0d2VlblxuICogLy8gMiBKdWx5IDIwMTEgMjM6NTk6MDAgYW5kIDMgSnVseSAyMDExIDAwOjAxOjAwP1xuICogY29uc3QgcmVzdWx0ID0gZGlmZmVyZW5jZUluQ2FsZW5kYXJEYXlzKFxuICogICBuZXcgRGF0ZSgyMDExLCA2LCAzLCAwLCAxKSxcbiAqICAgbmV3IERhdGUoMjAxMSwgNiwgMiwgMjMsIDU5KVxuICogKVxuICogLy89PiAxXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaWZmZXJlbmNlSW5DYWxlbmRhckRheXMoZGF0ZUxlZnQsIGRhdGVSaWdodCkge1xuICBjb25zdCBzdGFydE9mRGF5TGVmdCA9IHN0YXJ0T2ZEYXkoZGF0ZUxlZnQpO1xuICBjb25zdCBzdGFydE9mRGF5UmlnaHQgPSBzdGFydE9mRGF5KGRhdGVSaWdodCk7XG5cbiAgY29uc3QgdGltZXN0YW1wTGVmdCA9XG4gICAgK3N0YXJ0T2ZEYXlMZWZ0IC0gZ2V0VGltZXpvbmVPZmZzZXRJbk1pbGxpc2Vjb25kcyhzdGFydE9mRGF5TGVmdCk7XG4gIGNvbnN0IHRpbWVzdGFtcFJpZ2h0ID1cbiAgICArc3RhcnRPZkRheVJpZ2h0IC0gZ2V0VGltZXpvbmVPZmZzZXRJbk1pbGxpc2Vjb25kcyhzdGFydE9mRGF5UmlnaHQpO1xuXG4gIC8vIFJvdW5kIHRoZSBudW1iZXIgb2YgZGF5cyB0byB0aGUgbmVhcmVzdCBpbnRlZ2VyIGJlY2F1c2UgdGhlIG51bWJlciBvZlxuICAvLyBtaWxsaXNlY29uZHMgaW4gYSBkYXkgaXMgbm90IGNvbnN0YW50IChlLmcuIGl0J3MgZGlmZmVyZW50IGluIHRoZSB3ZWVrIG9mXG4gIC8vIHRoZSBkYXlsaWdodCBzYXZpbmcgdGltZSBjbG9jayBzaGlmdCkuXG4gIHJldHVybiBNYXRoLnJvdW5kKCh0aW1lc3RhbXBMZWZ0IC0gdGltZXN0YW1wUmlnaHQpIC8gbWlsbGlzZWNvbmRzSW5EYXkpO1xufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IGRpZmZlcmVuY2VJbkNhbGVuZGFyRGF5cztcbiIsImltcG9ydCB7IHRvRGF0ZSB9IGZyb20gXCIuL3RvRGF0ZS5tanNcIjtcbmltcG9ydCB7IGNvbnN0cnVjdEZyb20gfSBmcm9tIFwiLi9jb25zdHJ1Y3RGcm9tLm1qc1wiO1xuXG4vKipcbiAqIEBuYW1lIHN0YXJ0T2ZZZWFyXG4gKiBAY2F0ZWdvcnkgWWVhciBIZWxwZXJzXG4gKiBAc3VtbWFyeSBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgeWVhciBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgeWVhciBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKiBUaGUgcmVzdWx0IHdpbGwgYmUgaW4gdGhlIGxvY2FsIHRpbWV6b25lLlxuICpcbiAqIEB0eXBlUGFyYW0gRGF0ZVR5cGUgLSBUaGUgYERhdGVgIHR5cGUsIHRoZSBmdW5jdGlvbiBvcGVyYXRlcyBvbi4gR2V0cyBpbmZlcnJlZCBmcm9tIHBhc3NlZCBhcmd1bWVudHMuIEFsbG93cyB0byB1c2UgZXh0ZW5zaW9ucyBsaWtlIFtgVVRDRGF0ZWBdKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy91dGMpLlxuICpcbiAqIEBwYXJhbSBkYXRlIC0gVGhlIG9yaWdpbmFsIGRhdGVcbiAqXG4gKiBAcmV0dXJucyBUaGUgc3RhcnQgb2YgYSB5ZWFyXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFRoZSBzdGFydCBvZiBhIHllYXIgZm9yIDIgU2VwdGVtYmVyIDIwMTQgMTE6NTU6MDA6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mWWVhcihuZXcgRGF0ZSgyMDE0LCA4LCAyLCAxMSwgNTUsIDAwKSlcbiAqIC8vPT4gV2VkIEphbiAwMSAyMDE0IDAwOjAwOjAwXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdGFydE9mWWVhcihkYXRlKSB7XG4gIGNvbnN0IGNsZWFuRGF0ZSA9IHRvRGF0ZShkYXRlKTtcbiAgY29uc3QgX2RhdGUgPSBjb25zdHJ1Y3RGcm9tKGRhdGUsIDApO1xuICBfZGF0ZS5zZXRGdWxsWWVhcihjbGVhbkRhdGUuZ2V0RnVsbFllYXIoKSwgMCwgMSk7XG4gIF9kYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICByZXR1cm4gX2RhdGU7XG59XG5cbi8vIEZhbGxiYWNrIGZvciBtb2R1bGFyaXplZCBpbXBvcnRzOlxuZXhwb3J0IGRlZmF1bHQgc3RhcnRPZlllYXI7XG4iLCJpbXBvcnQgeyB0b0RhdGUgfSBmcm9tIFwiLi90b0RhdGUubWpzXCI7XG5pbXBvcnQgeyBnZXREZWZhdWx0T3B0aW9ucyB9IGZyb20gXCIuL19saWIvZGVmYXVsdE9wdGlvbnMubWpzXCI7XG5cbi8qKlxuICogVGhlIHtAbGluayBzdGFydE9mV2Vla30gZnVuY3Rpb24gb3B0aW9ucy5cbiAqL1xuXG4vKipcbiAqIEBuYW1lIHN0YXJ0T2ZXZWVrXG4gKiBAY2F0ZWdvcnkgV2VlayBIZWxwZXJzXG4gKiBAc3VtbWFyeSBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgd2VlayBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgd2VlayBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKiBUaGUgcmVzdWx0IHdpbGwgYmUgaW4gdGhlIGxvY2FsIHRpbWV6b25lLlxuICpcbiAqIEB0eXBlUGFyYW0gRGF0ZVR5cGUgLSBUaGUgYERhdGVgIHR5cGUsIHRoZSBmdW5jdGlvbiBvcGVyYXRlcyBvbi4gR2V0cyBpbmZlcnJlZCBmcm9tIHBhc3NlZCBhcmd1bWVudHMuIEFsbG93cyB0byB1c2UgZXh0ZW5zaW9ucyBsaWtlIFtgVVRDRGF0ZWBdKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy91dGMpLlxuICpcbiAqIEBwYXJhbSBkYXRlIC0gVGhlIG9yaWdpbmFsIGRhdGVcbiAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb2JqZWN0IHdpdGggb3B0aW9uc1xuICpcbiAqIEByZXR1cm5zIFRoZSBzdGFydCBvZiBhIHdlZWtcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gVGhlIHN0YXJ0IG9mIGEgd2VlayBmb3IgMiBTZXB0ZW1iZXIgMjAxNCAxMTo1NTowMDpcbiAqIGNvbnN0IHJlc3VsdCA9IHN0YXJ0T2ZXZWVrKG5ldyBEYXRlKDIwMTQsIDgsIDIsIDExLCA1NSwgMCkpXG4gKiAvLz0+IFN1biBBdWcgMzEgMjAxNCAwMDowMDowMFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBJZiB0aGUgd2VlayBzdGFydHMgb24gTW9uZGF5LCB0aGUgc3RhcnQgb2YgdGhlIHdlZWsgZm9yIDIgU2VwdGVtYmVyIDIwMTQgMTE6NTU6MDA6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mV2VlayhuZXcgRGF0ZSgyMDE0LCA4LCAyLCAxMSwgNTUsIDApLCB7IHdlZWtTdGFydHNPbjogMSB9KVxuICogLy89PiBNb24gU2VwIDAxIDIwMTQgMDA6MDA6MDBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0T2ZXZWVrKGRhdGUsIG9wdGlvbnMpIHtcbiAgY29uc3QgZGVmYXVsdE9wdGlvbnMgPSBnZXREZWZhdWx0T3B0aW9ucygpO1xuICBjb25zdCB3ZWVrU3RhcnRzT24gPVxuICAgIG9wdGlvbnM/LndlZWtTdGFydHNPbiA/P1xuICAgIG9wdGlvbnM/LmxvY2FsZT8ub3B0aW9ucz8ud2Vla1N0YXJ0c09uID8/XG4gICAgZGVmYXVsdE9wdGlvbnMud2Vla1N0YXJ0c09uID8/XG4gICAgZGVmYXVsdE9wdGlvbnMubG9jYWxlPy5vcHRpb25zPy53ZWVrU3RhcnRzT24gPz9cbiAgICAwO1xuXG4gIGNvbnN0IF9kYXRlID0gdG9EYXRlKGRhdGUpO1xuICBjb25zdCBkYXkgPSBfZGF0ZS5nZXREYXkoKTtcbiAgY29uc3QgZGlmZiA9IChkYXkgPCB3ZWVrU3RhcnRzT24gPyA3IDogMCkgKyBkYXkgLSB3ZWVrU3RhcnRzT247XG5cbiAgX2RhdGUuc2V0RGF0ZShfZGF0ZS5nZXREYXRlKCkgLSBkaWZmKTtcbiAgX2RhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gIHJldHVybiBfZGF0ZTtcbn1cblxuLy8gRmFsbGJhY2sgZm9yIG1vZHVsYXJpemVkIGltcG9ydHM6XG5leHBvcnQgZGVmYXVsdCBzdGFydE9mV2VlaztcbiIsImltcG9ydCB7IHN0YXJ0T2ZXZWVrIH0gZnJvbSBcIi4vc3RhcnRPZldlZWsubWpzXCI7XG5cbi8qKlxuICogQG5hbWUgc3RhcnRPZklTT1dlZWtcbiAqIEBjYXRlZ29yeSBJU08gV2VlayBIZWxwZXJzXG4gKiBAc3VtbWFyeSBSZXR1cm4gdGhlIHN0YXJ0IG9mIGFuIElTTyB3ZWVrIGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybiB0aGUgc3RhcnQgb2YgYW4gSVNPIHdlZWsgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICogVGhlIHJlc3VsdCB3aWxsIGJlIGluIHRoZSBsb2NhbCB0aW1lem9uZS5cbiAqXG4gKiBJU08gd2Vlay1udW1iZXJpbmcgeWVhcjogaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fd2Vla19kYXRlXG4gKlxuICogQHR5cGVQYXJhbSBEYXRlVHlwZSAtIFRoZSBgRGF0ZWAgdHlwZSwgdGhlIGZ1bmN0aW9uIG9wZXJhdGVzIG9uLiBHZXRzIGluZmVycmVkIGZyb20gcGFzc2VkIGFyZ3VtZW50cy4gQWxsb3dzIHRvIHVzZSBleHRlbnNpb25zIGxpa2UgW2BVVENEYXRlYF0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL3V0YykuXG4gKlxuICogQHBhcmFtIGRhdGUgLSBUaGUgb3JpZ2luYWwgZGF0ZVxuICpcbiAqIEByZXR1cm5zIFRoZSBzdGFydCBvZiBhbiBJU08gd2Vla1xuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBUaGUgc3RhcnQgb2YgYW4gSVNPIHdlZWsgZm9yIDIgU2VwdGVtYmVyIDIwMTQgMTE6NTU6MDA6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mSVNPV2VlayhuZXcgRGF0ZSgyMDE0LCA4LCAyLCAxMSwgNTUsIDApKVxuICogLy89PiBNb24gU2VwIDAxIDIwMTQgMDA6MDA6MDBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0T2ZJU09XZWVrKGRhdGUpIHtcbiAgcmV0dXJuIHN0YXJ0T2ZXZWVrKGRhdGUsIHsgd2Vla1N0YXJ0c09uOiAxIH0pO1xufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IHN0YXJ0T2ZJU09XZWVrO1xuIiwiaW1wb3J0IHsgY29uc3RydWN0RnJvbSB9IGZyb20gXCIuL2NvbnN0cnVjdEZyb20ubWpzXCI7XG5pbXBvcnQgeyBzdGFydE9mSVNPV2VlayB9IGZyb20gXCIuL3N0YXJ0T2ZJU09XZWVrLm1qc1wiO1xuaW1wb3J0IHsgdG9EYXRlIH0gZnJvbSBcIi4vdG9EYXRlLm1qc1wiO1xuXG4vKipcbiAqIEBuYW1lIGdldElTT1dlZWtZZWFyXG4gKiBAY2F0ZWdvcnkgSVNPIFdlZWstTnVtYmVyaW5nIFllYXIgSGVscGVyc1xuICogQHN1bW1hcnkgR2V0IHRoZSBJU08gd2Vlay1udW1iZXJpbmcgeWVhciBvZiB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEdldCB0aGUgSVNPIHdlZWstbnVtYmVyaW5nIHllYXIgb2YgdGhlIGdpdmVuIGRhdGUsXG4gKiB3aGljaCBhbHdheXMgc3RhcnRzIDMgZGF5cyBiZWZvcmUgdGhlIHllYXIncyBmaXJzdCBUaHVyc2RheS5cbiAqXG4gKiBJU08gd2Vlay1udW1iZXJpbmcgeWVhcjogaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fd2Vla19kYXRlXG4gKlxuICogQHR5cGVQYXJhbSBEYXRlVHlwZSAtIFRoZSBgRGF0ZWAgdHlwZSwgdGhlIGZ1bmN0aW9uIG9wZXJhdGVzIG9uLiBHZXRzIGluZmVycmVkIGZyb20gcGFzc2VkIGFyZ3VtZW50cy4gQWxsb3dzIHRvIHVzZSBleHRlbnNpb25zIGxpa2UgW2BVVENEYXRlYF0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL3V0YykuXG4gKlxuICogQHBhcmFtIGRhdGUgLSBUaGUgZ2l2ZW4gZGF0ZVxuICpcbiAqIEByZXR1cm5zIFRoZSBJU08gd2Vlay1udW1iZXJpbmcgeWVhclxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBXaGljaCBJU08td2VlayBudW1iZXJpbmcgeWVhciBpcyAyIEphbnVhcnkgMjAwNT9cbiAqIGNvbnN0IHJlc3VsdCA9IGdldElTT1dlZWtZZWFyKG5ldyBEYXRlKDIwMDUsIDAsIDIpKVxuICogLy89PiAyMDA0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRJU09XZWVrWWVhcihkYXRlKSB7XG4gIGNvbnN0IF9kYXRlID0gdG9EYXRlKGRhdGUpO1xuICBjb25zdCB5ZWFyID0gX2RhdGUuZ2V0RnVsbFllYXIoKTtcblxuICBjb25zdCBmb3VydGhPZkphbnVhcnlPZk5leHRZZWFyID0gY29uc3RydWN0RnJvbShkYXRlLCAwKTtcbiAgZm91cnRoT2ZKYW51YXJ5T2ZOZXh0WWVhci5zZXRGdWxsWWVhcih5ZWFyICsgMSwgMCwgNCk7XG4gIGZvdXJ0aE9mSmFudWFyeU9mTmV4dFllYXIuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gIGNvbnN0IHN0YXJ0T2ZOZXh0WWVhciA9IHN0YXJ0T2ZJU09XZWVrKGZvdXJ0aE9mSmFudWFyeU9mTmV4dFllYXIpO1xuXG4gIGNvbnN0IGZvdXJ0aE9mSmFudWFyeU9mVGhpc1llYXIgPSBjb25zdHJ1Y3RGcm9tKGRhdGUsIDApO1xuICBmb3VydGhPZkphbnVhcnlPZlRoaXNZZWFyLnNldEZ1bGxZZWFyKHllYXIsIDAsIDQpO1xuICBmb3VydGhPZkphbnVhcnlPZlRoaXNZZWFyLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICBjb25zdCBzdGFydE9mVGhpc1llYXIgPSBzdGFydE9mSVNPV2Vlayhmb3VydGhPZkphbnVhcnlPZlRoaXNZZWFyKTtcblxuICBpZiAoX2RhdGUuZ2V0VGltZSgpID49IHN0YXJ0T2ZOZXh0WWVhci5nZXRUaW1lKCkpIHtcbiAgICByZXR1cm4geWVhciArIDE7XG4gIH0gZWxzZSBpZiAoX2RhdGUuZ2V0VGltZSgpID49IHN0YXJ0T2ZUaGlzWWVhci5nZXRUaW1lKCkpIHtcbiAgICByZXR1cm4geWVhcjtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4geWVhciAtIDE7XG4gIH1cbn1cblxuLy8gRmFsbGJhY2sgZm9yIG1vZHVsYXJpemVkIGltcG9ydHM6XG5leHBvcnQgZGVmYXVsdCBnZXRJU09XZWVrWWVhcjtcbiIsImltcG9ydCB7IG1pbGxpc2Vjb25kc0luV2VlayB9IGZyb20gXCIuL2NvbnN0YW50cy5tanNcIjtcbmltcG9ydCB7IHN0YXJ0T2ZJU09XZWVrIH0gZnJvbSBcIi4vc3RhcnRPZklTT1dlZWsubWpzXCI7XG5pbXBvcnQgeyBzdGFydE9mSVNPV2Vla1llYXIgfSBmcm9tIFwiLi9zdGFydE9mSVNPV2Vla1llYXIubWpzXCI7XG5pbXBvcnQgeyB0b0RhdGUgfSBmcm9tIFwiLi90b0RhdGUubWpzXCI7XG5cbi8qKlxuICogQG5hbWUgZ2V0SVNPV2Vla1xuICogQGNhdGVnb3J5IElTTyBXZWVrIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IEdldCB0aGUgSVNPIHdlZWsgb2YgdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBHZXQgdGhlIElTTyB3ZWVrIG9mIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyOiBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT193ZWVrX2RhdGVcbiAqXG4gKiBAdHlwZVBhcmFtIERhdGVUeXBlIC0gVGhlIGBEYXRlYCB0eXBlLCB0aGUgZnVuY3Rpb24gb3BlcmF0ZXMgb24uIEdldHMgaW5mZXJyZWQgZnJvbSBwYXNzZWQgYXJndW1lbnRzLiBBbGxvd3MgdG8gdXNlIGV4dGVuc2lvbnMgbGlrZSBbYFVUQ0RhdGVgXShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvdXRjKS5cbiAqXG4gKiBAcGFyYW0gZGF0ZSAtIFRoZSBnaXZlbiBkYXRlXG4gKlxuICogQHJldHVybnMgVGhlIElTTyB3ZWVrXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFdoaWNoIHdlZWsgb2YgdGhlIElTTy13ZWVrIG51bWJlcmluZyB5ZWFyIGlzIDIgSmFudWFyeSAyMDA1P1xuICogY29uc3QgcmVzdWx0ID0gZ2V0SVNPV2VlayhuZXcgRGF0ZSgyMDA1LCAwLCAyKSlcbiAqIC8vPT4gNTNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldElTT1dlZWsoZGF0ZSkge1xuICBjb25zdCBfZGF0ZSA9IHRvRGF0ZShkYXRlKTtcbiAgY29uc3QgZGlmZiA9ICtzdGFydE9mSVNPV2VlayhfZGF0ZSkgLSArc3RhcnRPZklTT1dlZWtZZWFyKF9kYXRlKTtcblxuICAvLyBSb3VuZCB0aGUgbnVtYmVyIG9mIHdlZWtzIHRvIHRoZSBuZWFyZXN0IGludGVnZXIgYmVjYXVzZSB0aGUgbnVtYmVyIG9mXG4gIC8vIG1pbGxpc2Vjb25kcyBpbiBhIHdlZWsgaXMgbm90IGNvbnN0YW50IChlLmcuIGl0J3MgZGlmZmVyZW50IGluIHRoZSB3ZWVrIG9mXG4gIC8vIHRoZSBkYXlsaWdodCBzYXZpbmcgdGltZSBjbG9jayBzaGlmdCkuXG4gIHJldHVybiBNYXRoLnJvdW5kKGRpZmYgLyBtaWxsaXNlY29uZHNJbldlZWspICsgMTtcbn1cblxuLy8gRmFsbGJhY2sgZm9yIG1vZHVsYXJpemVkIGltcG9ydHM6XG5leHBvcnQgZGVmYXVsdCBnZXRJU09XZWVrO1xuIiwiaW1wb3J0IHsgZ2V0SVNPV2Vla1llYXIgfSBmcm9tIFwiLi9nZXRJU09XZWVrWWVhci5tanNcIjtcbmltcG9ydCB7IHN0YXJ0T2ZJU09XZWVrIH0gZnJvbSBcIi4vc3RhcnRPZklTT1dlZWsubWpzXCI7XG5pbXBvcnQgeyBjb25zdHJ1Y3RGcm9tIH0gZnJvbSBcIi4vY29uc3RydWN0RnJvbS5tanNcIjtcblxuLyoqXG4gKiBAbmFtZSBzdGFydE9mSVNPV2Vla1llYXJcbiAqIEBjYXRlZ29yeSBJU08gV2Vlay1OdW1iZXJpbmcgWWVhciBIZWxwZXJzXG4gKiBAc3VtbWFyeSBSZXR1cm4gdGhlIHN0YXJ0IG9mIGFuIElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyIGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybiB0aGUgc3RhcnQgb2YgYW4gSVNPIHdlZWstbnVtYmVyaW5nIHllYXIsXG4gKiB3aGljaCBhbHdheXMgc3RhcnRzIDMgZGF5cyBiZWZvcmUgdGhlIHllYXIncyBmaXJzdCBUaHVyc2RheS5cbiAqIFRoZSByZXN1bHQgd2lsbCBiZSBpbiB0aGUgbG9jYWwgdGltZXpvbmUuXG4gKlxuICogSVNPIHdlZWstbnVtYmVyaW5nIHllYXI6IGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPX3dlZWtfZGF0ZVxuICpcbiAqIEB0eXBlUGFyYW0gRGF0ZVR5cGUgLSBUaGUgYERhdGVgIHR5cGUsIHRoZSBmdW5jdGlvbiBvcGVyYXRlcyBvbi4gR2V0cyBpbmZlcnJlZCBmcm9tIHBhc3NlZCBhcmd1bWVudHMuIEFsbG93cyB0byB1c2UgZXh0ZW5zaW9ucyBsaWtlIFtgVVRDRGF0ZWBdKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy91dGMpLlxuICpcbiAqIEBwYXJhbSBkYXRlIC0gVGhlIG9yaWdpbmFsIGRhdGVcbiAqXG4gKiBAcmV0dXJucyBUaGUgc3RhcnQgb2YgYW4gSVNPIHdlZWstbnVtYmVyaW5nIHllYXJcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gVGhlIHN0YXJ0IG9mIGFuIElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyIGZvciAyIEp1bHkgMjAwNTpcbiAqIGNvbnN0IHJlc3VsdCA9IHN0YXJ0T2ZJU09XZWVrWWVhcihuZXcgRGF0ZSgyMDA1LCA2LCAyKSlcbiAqIC8vPT4gTW9uIEphbiAwMyAyMDA1IDAwOjAwOjAwXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdGFydE9mSVNPV2Vla1llYXIoZGF0ZSkge1xuICBjb25zdCB5ZWFyID0gZ2V0SVNPV2Vla1llYXIoZGF0ZSk7XG4gIGNvbnN0IGZvdXJ0aE9mSmFudWFyeSA9IGNvbnN0cnVjdEZyb20oZGF0ZSwgMCk7XG4gIGZvdXJ0aE9mSmFudWFyeS5zZXRGdWxsWWVhcih5ZWFyLCAwLCA0KTtcbiAgZm91cnRoT2ZKYW51YXJ5LnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICByZXR1cm4gc3RhcnRPZklTT1dlZWsoZm91cnRoT2ZKYW51YXJ5KTtcbn1cblxuLy8gRmFsbGJhY2sgZm9yIG1vZHVsYXJpemVkIGltcG9ydHM6XG5leHBvcnQgZGVmYXVsdCBzdGFydE9mSVNPV2Vla1llYXI7XG4iLCJpbXBvcnQgeyBjb25zdHJ1Y3RGcm9tIH0gZnJvbSBcIi4vY29uc3RydWN0RnJvbS5tanNcIjtcbmltcG9ydCB7IHN0YXJ0T2ZXZWVrIH0gZnJvbSBcIi4vc3RhcnRPZldlZWsubWpzXCI7XG5pbXBvcnQgeyB0b0RhdGUgfSBmcm9tIFwiLi90b0RhdGUubWpzXCI7XG5pbXBvcnQgeyBnZXREZWZhdWx0T3B0aW9ucyB9IGZyb20gXCIuL19saWIvZGVmYXVsdE9wdGlvbnMubWpzXCI7XG5cbi8qKlxuICogVGhlIHtAbGluayBnZXRXZWVrWWVhcn0gZnVuY3Rpb24gb3B0aW9ucy5cbiAqL1xuXG4vKipcbiAqIEBuYW1lIGdldFdlZWtZZWFyXG4gKiBAY2F0ZWdvcnkgV2Vlay1OdW1iZXJpbmcgWWVhciBIZWxwZXJzXG4gKiBAc3VtbWFyeSBHZXQgdGhlIGxvY2FsIHdlZWstbnVtYmVyaW5nIHllYXIgb2YgdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBHZXQgdGhlIGxvY2FsIHdlZWstbnVtYmVyaW5nIHllYXIgb2YgdGhlIGdpdmVuIGRhdGUuXG4gKiBUaGUgZXhhY3QgY2FsY3VsYXRpb24gZGVwZW5kcyBvbiB0aGUgdmFsdWVzIG9mXG4gKiBgb3B0aW9ucy53ZWVrU3RhcnRzT25gICh3aGljaCBpcyB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGRheSBvZiB0aGUgd2VlaylcbiAqIGFuZCBgb3B0aW9ucy5maXJzdFdlZWtDb250YWluc0RhdGVgICh3aGljaCBpcyB0aGUgZGF5IG9mIEphbnVhcnksIHdoaWNoIGlzIGFsd2F5cyBpblxuICogdGhlIGZpcnN0IHdlZWsgb2YgdGhlIHdlZWstbnVtYmVyaW5nIHllYXIpXG4gKlxuICogV2VlayBudW1iZXJpbmc6IGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1dlZWsjVGhlX0lTT193ZWVrX2RhdGVfc3lzdGVtXG4gKlxuICogQHR5cGVQYXJhbSBEYXRlVHlwZSAtIFRoZSBgRGF0ZWAgdHlwZSwgdGhlIGZ1bmN0aW9uIG9wZXJhdGVzIG9uLiBHZXRzIGluZmVycmVkIGZyb20gcGFzc2VkIGFyZ3VtZW50cy4gQWxsb3dzIHRvIHVzZSBleHRlbnNpb25zIGxpa2UgW2BVVENEYXRlYF0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL3V0YykuXG4gKlxuICogQHBhcmFtIGRhdGUgLSBUaGUgZ2l2ZW4gZGF0ZVxuICogQHBhcmFtIG9wdGlvbnMgLSBBbiBvYmplY3Qgd2l0aCBvcHRpb25zLlxuICpcbiAqIEByZXR1cm5zIFRoZSBsb2NhbCB3ZWVrLW51bWJlcmluZyB5ZWFyXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFdoaWNoIHdlZWsgbnVtYmVyaW5nIHllYXIgaXMgMjYgRGVjZW1iZXIgMjAwNCB3aXRoIHRoZSBkZWZhdWx0IHNldHRpbmdzP1xuICogY29uc3QgcmVzdWx0ID0gZ2V0V2Vla1llYXIobmV3IERhdGUoMjAwNCwgMTEsIDI2KSlcbiAqIC8vPT4gMjAwNVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBXaGljaCB3ZWVrIG51bWJlcmluZyB5ZWFyIGlzIDI2IERlY2VtYmVyIDIwMDQgaWYgd2VlayBzdGFydHMgb24gU2F0dXJkYXk/XG4gKiBjb25zdCByZXN1bHQgPSBnZXRXZWVrWWVhcihuZXcgRGF0ZSgyMDA0LCAxMSwgMjYpLCB7IHdlZWtTdGFydHNPbjogNiB9KVxuICogLy89PiAyMDA0XG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFdoaWNoIHdlZWsgbnVtYmVyaW5nIHllYXIgaXMgMjYgRGVjZW1iZXIgMjAwNCBpZiB0aGUgZmlyc3Qgd2VlayBjb250YWlucyA0IEphbnVhcnk/XG4gKiBjb25zdCByZXN1bHQgPSBnZXRXZWVrWWVhcihuZXcgRGF0ZSgyMDA0LCAxMSwgMjYpLCB7IGZpcnN0V2Vla0NvbnRhaW5zRGF0ZTogNCB9KVxuICogLy89PiAyMDA0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRXZWVrWWVhcihkYXRlLCBvcHRpb25zKSB7XG4gIGNvbnN0IF9kYXRlID0gdG9EYXRlKGRhdGUpO1xuICBjb25zdCB5ZWFyID0gX2RhdGUuZ2V0RnVsbFllYXIoKTtcblxuICBjb25zdCBkZWZhdWx0T3B0aW9ucyA9IGdldERlZmF1bHRPcHRpb25zKCk7XG4gIGNvbnN0IGZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA9XG4gICAgb3B0aW9ucz8uZmlyc3RXZWVrQ29udGFpbnNEYXRlID8/XG4gICAgb3B0aW9ucz8ubG9jYWxlPy5vcHRpb25zPy5maXJzdFdlZWtDb250YWluc0RhdGUgPz9cbiAgICBkZWZhdWx0T3B0aW9ucy5maXJzdFdlZWtDb250YWluc0RhdGUgPz9cbiAgICBkZWZhdWx0T3B0aW9ucy5sb2NhbGU/Lm9wdGlvbnM/LmZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA/P1xuICAgIDE7XG5cbiAgY29uc3QgZmlyc3RXZWVrT2ZOZXh0WWVhciA9IGNvbnN0cnVjdEZyb20oZGF0ZSwgMCk7XG4gIGZpcnN0V2Vla09mTmV4dFllYXIuc2V0RnVsbFllYXIoeWVhciArIDEsIDAsIGZpcnN0V2Vla0NvbnRhaW5zRGF0ZSk7XG4gIGZpcnN0V2Vla09mTmV4dFllYXIuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gIGNvbnN0IHN0YXJ0T2ZOZXh0WWVhciA9IHN0YXJ0T2ZXZWVrKGZpcnN0V2Vla09mTmV4dFllYXIsIG9wdGlvbnMpO1xuXG4gIGNvbnN0IGZpcnN0V2Vla09mVGhpc1llYXIgPSBjb25zdHJ1Y3RGcm9tKGRhdGUsIDApO1xuICBmaXJzdFdlZWtPZlRoaXNZZWFyLnNldEZ1bGxZZWFyKHllYXIsIDAsIGZpcnN0V2Vla0NvbnRhaW5zRGF0ZSk7XG4gIGZpcnN0V2Vla09mVGhpc1llYXIuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gIGNvbnN0IHN0YXJ0T2ZUaGlzWWVhciA9IHN0YXJ0T2ZXZWVrKGZpcnN0V2Vla09mVGhpc1llYXIsIG9wdGlvbnMpO1xuXG4gIGlmIChfZGF0ZS5nZXRUaW1lKCkgPj0gc3RhcnRPZk5leHRZZWFyLmdldFRpbWUoKSkge1xuICAgIHJldHVybiB5ZWFyICsgMTtcbiAgfSBlbHNlIGlmIChfZGF0ZS5nZXRUaW1lKCkgPj0gc3RhcnRPZlRoaXNZZWFyLmdldFRpbWUoKSkge1xuICAgIHJldHVybiB5ZWFyO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB5ZWFyIC0gMTtcbiAgfVxufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IGdldFdlZWtZZWFyO1xuIiwiaW1wb3J0IHsgbWlsbGlzZWNvbmRzSW5XZWVrIH0gZnJvbSBcIi4vY29uc3RhbnRzLm1qc1wiO1xuaW1wb3J0IHsgc3RhcnRPZldlZWsgfSBmcm9tIFwiLi9zdGFydE9mV2Vlay5tanNcIjtcbmltcG9ydCB7IHN0YXJ0T2ZXZWVrWWVhciB9IGZyb20gXCIuL3N0YXJ0T2ZXZWVrWWVhci5tanNcIjtcbmltcG9ydCB7IHRvRGF0ZSB9IGZyb20gXCIuL3RvRGF0ZS5tanNcIjtcblxuLyoqXG4gKiBUaGUge0BsaW5rIGdldFdlZWt9IGZ1bmN0aW9uIG9wdGlvbnMuXG4gKi9cblxuLyoqXG4gKiBAbmFtZSBnZXRXZWVrXG4gKiBAY2F0ZWdvcnkgV2VlayBIZWxwZXJzXG4gKiBAc3VtbWFyeSBHZXQgdGhlIGxvY2FsIHdlZWsgaW5kZXggb2YgdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBHZXQgdGhlIGxvY2FsIHdlZWsgaW5kZXggb2YgdGhlIGdpdmVuIGRhdGUuXG4gKiBUaGUgZXhhY3QgY2FsY3VsYXRpb24gZGVwZW5kcyBvbiB0aGUgdmFsdWVzIG9mXG4gKiBgb3B0aW9ucy53ZWVrU3RhcnRzT25gICh3aGljaCBpcyB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGRheSBvZiB0aGUgd2VlaylcbiAqIGFuZCBgb3B0aW9ucy5maXJzdFdlZWtDb250YWluc0RhdGVgICh3aGljaCBpcyB0aGUgZGF5IG9mIEphbnVhcnksIHdoaWNoIGlzIGFsd2F5cyBpblxuICogdGhlIGZpcnN0IHdlZWsgb2YgdGhlIHdlZWstbnVtYmVyaW5nIHllYXIpXG4gKlxuICogV2VlayBudW1iZXJpbmc6IGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1dlZWsjVGhlX0lTT193ZWVrX2RhdGVfc3lzdGVtXG4gKlxuICogQHR5cGVQYXJhbSBEYXRlVHlwZSAtIFRoZSBgRGF0ZWAgdHlwZSwgdGhlIGZ1bmN0aW9uIG9wZXJhdGVzIG9uLiBHZXRzIGluZmVycmVkIGZyb20gcGFzc2VkIGFyZ3VtZW50cy4gQWxsb3dzIHRvIHVzZSBleHRlbnNpb25zIGxpa2UgW2BVVENEYXRlYF0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL3V0YykuXG4gKlxuICogQHBhcmFtIGRhdGUgLSBUaGUgZ2l2ZW4gZGF0ZVxuICogQHBhcmFtIG9wdGlvbnMgLSBBbiBvYmplY3Qgd2l0aCBvcHRpb25zXG4gKlxuICogQHJldHVybnMgVGhlIHdlZWtcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gV2hpY2ggd2VlayBvZiB0aGUgbG9jYWwgd2VlayBudW1iZXJpbmcgeWVhciBpcyAyIEphbnVhcnkgMjAwNSB3aXRoIGRlZmF1bHQgb3B0aW9ucz9cbiAqIGNvbnN0IHJlc3VsdCA9IGdldFdlZWsobmV3IERhdGUoMjAwNSwgMCwgMikpXG4gKiAvLz0+IDJcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gV2hpY2ggd2VlayBvZiB0aGUgbG9jYWwgd2VlayBudW1iZXJpbmcgeWVhciBpcyAyIEphbnVhcnkgMjAwNSxcbiAqIC8vIGlmIE1vbmRheSBpcyB0aGUgZmlyc3QgZGF5IG9mIHRoZSB3ZWVrLFxuICogLy8gYW5kIHRoZSBmaXJzdCB3ZWVrIG9mIHRoZSB5ZWFyIGFsd2F5cyBjb250YWlucyA0IEphbnVhcnk/XG4gKiBjb25zdCByZXN1bHQgPSBnZXRXZWVrKG5ldyBEYXRlKDIwMDUsIDAsIDIpLCB7XG4gKiAgIHdlZWtTdGFydHNPbjogMSxcbiAqICAgZmlyc3RXZWVrQ29udGFpbnNEYXRlOiA0XG4gKiB9KVxuICogLy89PiA1M1xuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRXZWVrKGRhdGUsIG9wdGlvbnMpIHtcbiAgY29uc3QgX2RhdGUgPSB0b0RhdGUoZGF0ZSk7XG4gIGNvbnN0IGRpZmYgPSArc3RhcnRPZldlZWsoX2RhdGUsIG9wdGlvbnMpIC0gK3N0YXJ0T2ZXZWVrWWVhcihfZGF0ZSwgb3B0aW9ucyk7XG5cbiAgLy8gUm91bmQgdGhlIG51bWJlciBvZiB3ZWVrcyB0byB0aGUgbmVhcmVzdCBpbnRlZ2VyIGJlY2F1c2UgdGhlIG51bWJlciBvZlxuICAvLyBtaWxsaXNlY29uZHMgaW4gYSB3ZWVrIGlzIG5vdCBjb25zdGFudCAoZS5nLiBpdCdzIGRpZmZlcmVudCBpbiB0aGUgd2VlayBvZlxuICAvLyB0aGUgZGF5bGlnaHQgc2F2aW5nIHRpbWUgY2xvY2sgc2hpZnQpLlxuICByZXR1cm4gTWF0aC5yb3VuZChkaWZmIC8gbWlsbGlzZWNvbmRzSW5XZWVrKSArIDE7XG59XG5cbi8vIEZhbGxiYWNrIGZvciBtb2R1bGFyaXplZCBpbXBvcnRzOlxuZXhwb3J0IGRlZmF1bHQgZ2V0V2VlaztcbiIsImltcG9ydCB7IGNvbnN0cnVjdEZyb20gfSBmcm9tIFwiLi9jb25zdHJ1Y3RGcm9tLm1qc1wiO1xuaW1wb3J0IHsgZ2V0V2Vla1llYXIgfSBmcm9tIFwiLi9nZXRXZWVrWWVhci5tanNcIjtcbmltcG9ydCB7IHN0YXJ0T2ZXZWVrIH0gZnJvbSBcIi4vc3RhcnRPZldlZWsubWpzXCI7XG5pbXBvcnQgeyBnZXREZWZhdWx0T3B0aW9ucyB9IGZyb20gXCIuL19saWIvZGVmYXVsdE9wdGlvbnMubWpzXCI7XG5cbi8qKlxuICogVGhlIHtAbGluayBzdGFydE9mV2Vla1llYXJ9IGZ1bmN0aW9uIG9wdGlvbnMuXG4gKi9cblxuLyoqXG4gKiBAbmFtZSBzdGFydE9mV2Vla1llYXJcbiAqIEBjYXRlZ29yeSBXZWVrLU51bWJlcmluZyBZZWFyIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IFJldHVybiB0aGUgc3RhcnQgb2YgYSBsb2NhbCB3ZWVrLW51bWJlcmluZyB5ZWFyIGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybiB0aGUgc3RhcnQgb2YgYSBsb2NhbCB3ZWVrLW51bWJlcmluZyB5ZWFyLlxuICogVGhlIGV4YWN0IGNhbGN1bGF0aW9uIGRlcGVuZHMgb24gdGhlIHZhbHVlcyBvZlxuICogYG9wdGlvbnMud2Vla1N0YXJ0c09uYCAod2hpY2ggaXMgdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWspXG4gKiBhbmQgYG9wdGlvbnMuZmlyc3RXZWVrQ29udGFpbnNEYXRlYCAod2hpY2ggaXMgdGhlIGRheSBvZiBKYW51YXJ5LCB3aGljaCBpcyBhbHdheXMgaW5cbiAqIHRoZSBmaXJzdCB3ZWVrIG9mIHRoZSB3ZWVrLW51bWJlcmluZyB5ZWFyKVxuICpcbiAqIFdlZWsgbnVtYmVyaW5nOiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9XZWVrI1RoZV9JU09fd2Vla19kYXRlX3N5c3RlbVxuICpcbiAqIEB0eXBlUGFyYW0gRGF0ZVR5cGUgLSBUaGUgYERhdGVgIHR5cGUsIHRoZSBmdW5jdGlvbiBvcGVyYXRlcyBvbi4gR2V0cyBpbmZlcnJlZCBmcm9tIHBhc3NlZCBhcmd1bWVudHMuIEFsbG93cyB0byB1c2UgZXh0ZW5zaW9ucyBsaWtlIFtgVVRDRGF0ZWBdKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy91dGMpLlxuICpcbiAqIEBwYXJhbSBkYXRlIC0gVGhlIG9yaWdpbmFsIGRhdGVcbiAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb2JqZWN0IHdpdGggb3B0aW9uc1xuICpcbiAqIEByZXR1cm5zIFRoZSBzdGFydCBvZiBhIHdlZWstbnVtYmVyaW5nIHllYXJcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gVGhlIHN0YXJ0IG9mIGFuIGEgd2Vlay1udW1iZXJpbmcgeWVhciBmb3IgMiBKdWx5IDIwMDUgd2l0aCBkZWZhdWx0IHNldHRpbmdzOlxuICogY29uc3QgcmVzdWx0ID0gc3RhcnRPZldlZWtZZWFyKG5ldyBEYXRlKDIwMDUsIDYsIDIpKVxuICogLy89PiBTdW4gRGVjIDI2IDIwMDQgMDA6MDA6MDBcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gVGhlIHN0YXJ0IG9mIGEgd2Vlay1udW1iZXJpbmcgeWVhciBmb3IgMiBKdWx5IDIwMDVcbiAqIC8vIGlmIE1vbmRheSBpcyB0aGUgZmlyc3QgZGF5IG9mIHdlZWtcbiAqIC8vIGFuZCA0IEphbnVhcnkgaXMgYWx3YXlzIGluIHRoZSBmaXJzdCB3ZWVrIG9mIHRoZSB5ZWFyOlxuICogY29uc3QgcmVzdWx0ID0gc3RhcnRPZldlZWtZZWFyKG5ldyBEYXRlKDIwMDUsIDYsIDIpLCB7XG4gKiAgIHdlZWtTdGFydHNPbjogMSxcbiAqICAgZmlyc3RXZWVrQ29udGFpbnNEYXRlOiA0XG4gKiB9KVxuICogLy89PiBNb24gSmFuIDAzIDIwMDUgMDA6MDA6MDBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0T2ZXZWVrWWVhcihkYXRlLCBvcHRpb25zKSB7XG4gIGNvbnN0IGRlZmF1bHRPcHRpb25zID0gZ2V0RGVmYXVsdE9wdGlvbnMoKTtcbiAgY29uc3QgZmlyc3RXZWVrQ29udGFpbnNEYXRlID1cbiAgICBvcHRpb25zPy5maXJzdFdlZWtDb250YWluc0RhdGUgPz9cbiAgICBvcHRpb25zPy5sb2NhbGU/Lm9wdGlvbnM/LmZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA/P1xuICAgIGRlZmF1bHRPcHRpb25zLmZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA/P1xuICAgIGRlZmF1bHRPcHRpb25zLmxvY2FsZT8ub3B0aW9ucz8uZmlyc3RXZWVrQ29udGFpbnNEYXRlID8/XG4gICAgMTtcblxuICBjb25zdCB5ZWFyID0gZ2V0V2Vla1llYXIoZGF0ZSwgb3B0aW9ucyk7XG4gIGNvbnN0IGZpcnN0V2VlayA9IGNvbnN0cnVjdEZyb20oZGF0ZSwgMCk7XG4gIGZpcnN0V2Vlay5zZXRGdWxsWWVhcih5ZWFyLCAwLCBmaXJzdFdlZWtDb250YWluc0RhdGUpO1xuICBmaXJzdFdlZWsuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gIGNvbnN0IF9kYXRlID0gc3RhcnRPZldlZWsoZmlyc3RXZWVrLCBvcHRpb25zKTtcbiAgcmV0dXJuIF9kYXRlO1xufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IHN0YXJ0T2ZXZWVrWWVhcjtcbiIsImV4cG9ydCBmdW5jdGlvbiBhZGRMZWFkaW5nWmVyb3MobnVtYmVyLCB0YXJnZXRMZW5ndGgpIHtcbiAgY29uc3Qgc2lnbiA9IG51bWJlciA8IDAgPyBcIi1cIiA6IFwiXCI7XG4gIGNvbnN0IG91dHB1dCA9IE1hdGguYWJzKG51bWJlcikudG9TdHJpbmcoKS5wYWRTdGFydCh0YXJnZXRMZW5ndGgsIFwiMFwiKTtcbiAgcmV0dXJuIHNpZ24gKyBvdXRwdXQ7XG59XG4iLCJpbXBvcnQgeyBhZGRMZWFkaW5nWmVyb3MgfSBmcm9tIFwiLi4vYWRkTGVhZGluZ1plcm9zLm1qc1wiO1xuXG4vKlxuICogfCAgICAgfCBVbml0ICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgfCBVbml0ICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfC0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxuICogfCAgYSAgfCBBTSwgUE0gICAgICAgICAgICAgICAgICAgICAgICAgfCAgQSogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgZCAgfCBEYXkgb2YgbW9udGggICAgICAgICAgICAgICAgICAgfCAgRCAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgaCAgfCBIb3VyIFsxLTEyXSAgICAgICAgICAgICAgICAgICAgfCAgSCAgfCBIb3VyIFswLTIzXSAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgbSAgfCBNaW51dGUgICAgICAgICAgICAgICAgICAgICAgICAgfCAgTSAgfCBNb250aCAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgcyAgfCBTZWNvbmQgICAgICAgICAgICAgICAgICAgICAgICAgfCAgUyAgfCBGcmFjdGlvbiBvZiBzZWNvbmQgICAgICAgICAgICAgfFxuICogfCAgeSAgfCBZZWFyIChhYnMpICAgICAgICAgICAgICAgICAgICAgfCAgWSAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICpcbiAqIExldHRlcnMgbWFya2VkIGJ5ICogYXJlIG5vdCBpbXBsZW1lbnRlZCBidXQgcmVzZXJ2ZWQgYnkgVW5pY29kZSBzdGFuZGFyZC5cbiAqL1xuXG5leHBvcnQgY29uc3QgbGlnaHRGb3JtYXR0ZXJzID0ge1xuICAvLyBZZWFyXG4gIHkoZGF0ZSwgdG9rZW4pIHtcbiAgICAvLyBGcm9tIGh0dHA6Ly93d3cudW5pY29kZS5vcmcvcmVwb3J0cy90cjM1L3RyMzUtMzEvdHIzNS1kYXRlcy5odG1sI0RhdGVfRm9ybWF0X3Rva2Vuc1xuICAgIC8vIHwgWWVhciAgICAgfCAgICAgeSB8IHl5IHwgICB5eXkgfCAgeXl5eSB8IHl5eXl5IHxcbiAgICAvLyB8LS0tLS0tLS0tLXwtLS0tLS0tfC0tLS18LS0tLS0tLXwtLS0tLS0tfC0tLS0tLS18XG4gICAgLy8gfCBBRCAxICAgICB8ICAgICAxIHwgMDEgfCAgIDAwMSB8ICAwMDAxIHwgMDAwMDEgfFxuICAgIC8vIHwgQUQgMTIgICAgfCAgICAxMiB8IDEyIHwgICAwMTIgfCAgMDAxMiB8IDAwMDEyIHxcbiAgICAvLyB8IEFEIDEyMyAgIHwgICAxMjMgfCAyMyB8ICAgMTIzIHwgIDAxMjMgfCAwMDEyMyB8XG4gICAgLy8gfCBBRCAxMjM0ICB8ICAxMjM0IHwgMzQgfCAgMTIzNCB8ICAxMjM0IHwgMDEyMzQgfFxuICAgIC8vIHwgQUQgMTIzNDUgfCAxMjM0NSB8IDQ1IHwgMTIzNDUgfCAxMjM0NSB8IDEyMzQ1IHxcblxuICAgIGNvbnN0IHNpZ25lZFllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgLy8gUmV0dXJucyAxIGZvciAxIEJDICh3aGljaCBpcyB5ZWFyIDAgaW4gSmF2YVNjcmlwdClcbiAgICBjb25zdCB5ZWFyID0gc2lnbmVkWWVhciA+IDAgPyBzaWduZWRZZWFyIDogMSAtIHNpZ25lZFllYXI7XG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyh0b2tlbiA9PT0gXCJ5eVwiID8geWVhciAlIDEwMCA6IHllYXIsIHRva2VuLmxlbmd0aCk7XG4gIH0sXG5cbiAgLy8gTW9udGhcbiAgTShkYXRlLCB0b2tlbikge1xuICAgIGNvbnN0IG1vbnRoID0gZGF0ZS5nZXRNb250aCgpO1xuICAgIHJldHVybiB0b2tlbiA9PT0gXCJNXCIgPyBTdHJpbmcobW9udGggKyAxKSA6IGFkZExlYWRpbmdaZXJvcyhtb250aCArIDEsIDIpO1xuICB9LFxuXG4gIC8vIERheSBvZiB0aGUgbW9udGhcbiAgZChkYXRlLCB0b2tlbikge1xuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MoZGF0ZS5nZXREYXRlKCksIHRva2VuLmxlbmd0aCk7XG4gIH0sXG5cbiAgLy8gQU0gb3IgUE1cbiAgYShkYXRlLCB0b2tlbikge1xuICAgIGNvbnN0IGRheVBlcmlvZEVudW1WYWx1ZSA9IGRhdGUuZ2V0SG91cnMoKSAvIDEyID49IDEgPyBcInBtXCIgOiBcImFtXCI7XG5cbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICBjYXNlIFwiYVwiOlxuICAgICAgY2FzZSBcImFhXCI6XG4gICAgICAgIHJldHVybiBkYXlQZXJpb2RFbnVtVmFsdWUudG9VcHBlckNhc2UoKTtcbiAgICAgIGNhc2UgXCJhYWFcIjpcbiAgICAgICAgcmV0dXJuIGRheVBlcmlvZEVudW1WYWx1ZTtcbiAgICAgIGNhc2UgXCJhYWFhYVwiOlxuICAgICAgICByZXR1cm4gZGF5UGVyaW9kRW51bVZhbHVlWzBdO1xuICAgICAgY2FzZSBcImFhYWFcIjpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBkYXlQZXJpb2RFbnVtVmFsdWUgPT09IFwiYW1cIiA/IFwiYS5tLlwiIDogXCJwLm0uXCI7XG4gICAgfVxuICB9LFxuXG4gIC8vIEhvdXIgWzEtMTJdXG4gIGgoZGF0ZSwgdG9rZW4pIHtcbiAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKGRhdGUuZ2V0SG91cnMoKSAlIDEyIHx8IDEyLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuXG4gIC8vIEhvdXIgWzAtMjNdXG4gIEgoZGF0ZSwgdG9rZW4pIHtcbiAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKGRhdGUuZ2V0SG91cnMoKSwgdG9rZW4ubGVuZ3RoKTtcbiAgfSxcblxuICAvLyBNaW51dGVcbiAgbShkYXRlLCB0b2tlbikge1xuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MoZGF0ZS5nZXRNaW51dGVzKCksIHRva2VuLmxlbmd0aCk7XG4gIH0sXG5cbiAgLy8gU2Vjb25kXG4gIHMoZGF0ZSwgdG9rZW4pIHtcbiAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKGRhdGUuZ2V0U2Vjb25kcygpLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuXG4gIC8vIEZyYWN0aW9uIG9mIHNlY29uZFxuICBTKGRhdGUsIHRva2VuKSB7XG4gICAgY29uc3QgbnVtYmVyT2ZEaWdpdHMgPSB0b2tlbi5sZW5ndGg7XG4gICAgY29uc3QgbWlsbGlzZWNvbmRzID0gZGF0ZS5nZXRNaWxsaXNlY29uZHMoKTtcbiAgICBjb25zdCBmcmFjdGlvbmFsU2Vjb25kcyA9IE1hdGgudHJ1bmMoXG4gICAgICBtaWxsaXNlY29uZHMgKiBNYXRoLnBvdygxMCwgbnVtYmVyT2ZEaWdpdHMgLSAzKSxcbiAgICApO1xuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MoZnJhY3Rpb25hbFNlY29uZHMsIHRva2VuLmxlbmd0aCk7XG4gIH0sXG59O1xuIiwiaW1wb3J0IHsgZ2V0RGF5T2ZZZWFyIH0gZnJvbSBcIi4uLy4uL2dldERheU9mWWVhci5tanNcIjtcbmltcG9ydCB7IGdldElTT1dlZWsgfSBmcm9tIFwiLi4vLi4vZ2V0SVNPV2Vlay5tanNcIjtcbmltcG9ydCB7IGdldElTT1dlZWtZZWFyIH0gZnJvbSBcIi4uLy4uL2dldElTT1dlZWtZZWFyLm1qc1wiO1xuaW1wb3J0IHsgZ2V0V2VlayB9IGZyb20gXCIuLi8uLi9nZXRXZWVrLm1qc1wiO1xuaW1wb3J0IHsgZ2V0V2Vla1llYXIgfSBmcm9tIFwiLi4vLi4vZ2V0V2Vla1llYXIubWpzXCI7XG5pbXBvcnQgeyBhZGRMZWFkaW5nWmVyb3MgfSBmcm9tIFwiLi4vYWRkTGVhZGluZ1plcm9zLm1qc1wiO1xuaW1wb3J0IHsgbGlnaHRGb3JtYXR0ZXJzIH0gZnJvbSBcIi4vbGlnaHRGb3JtYXR0ZXJzLm1qc1wiO1xuXG5jb25zdCBkYXlQZXJpb2RFbnVtID0ge1xuICBhbTogXCJhbVwiLFxuICBwbTogXCJwbVwiLFxuICBtaWRuaWdodDogXCJtaWRuaWdodFwiLFxuICBub29uOiBcIm5vb25cIixcbiAgbW9ybmluZzogXCJtb3JuaW5nXCIsXG4gIGFmdGVybm9vbjogXCJhZnRlcm5vb25cIixcbiAgZXZlbmluZzogXCJldmVuaW5nXCIsXG4gIG5pZ2h0OiBcIm5pZ2h0XCIsXG59O1xuXG4vKlxuICogfCAgICAgfCBVbml0ICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgfCBVbml0ICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfC0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxuICogfCAgYSAgfCBBTSwgUE0gICAgICAgICAgICAgICAgICAgICAgICAgfCAgQSogfCBNaWxsaXNlY29uZHMgaW4gZGF5ICAgICAgICAgICAgfFxuICogfCAgYiAgfCBBTSwgUE0sIG5vb24sIG1pZG5pZ2h0ICAgICAgICAgfCAgQiAgfCBGbGV4aWJsZSBkYXkgcGVyaW9kICAgICAgICAgICAgfFxuICogfCAgYyAgfCBTdGFuZC1hbG9uZSBsb2NhbCBkYXkgb2Ygd2VlayAgfCAgQyogfCBMb2NhbGl6ZWQgaG91ciB3LyBkYXkgcGVyaW9kICAgfFxuICogfCAgZCAgfCBEYXkgb2YgbW9udGggICAgICAgICAgICAgICAgICAgfCAgRCAgfCBEYXkgb2YgeWVhciAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgZSAgfCBMb2NhbCBkYXkgb2Ygd2VlayAgICAgICAgICAgICAgfCAgRSAgfCBEYXkgb2Ygd2VlayAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgZiAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgRiogfCBEYXkgb2Ygd2VlayBpbiBtb250aCAgICAgICAgICAgfFxuICogfCAgZyogfCBNb2RpZmllZCBKdWxpYW4gZGF5ICAgICAgICAgICAgfCAgRyAgfCBFcmEgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgaCAgfCBIb3VyIFsxLTEyXSAgICAgICAgICAgICAgICAgICAgfCAgSCAgfCBIb3VyIFswLTIzXSAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgaSEgfCBJU08gZGF5IG9mIHdlZWsgICAgICAgICAgICAgICAgfCAgSSEgfCBJU08gd2VlayBvZiB5ZWFyICAgICAgICAgICAgICAgfFxuICogfCAgaiogfCBMb2NhbGl6ZWQgaG91ciB3LyBkYXkgcGVyaW9kICAgfCAgSiogfCBMb2NhbGl6ZWQgaG91ciB3L28gZGF5IHBlcmlvZCAgfFxuICogfCAgayAgfCBIb3VyIFsxLTI0XSAgICAgICAgICAgICAgICAgICAgfCAgSyAgfCBIb3VyIFswLTExXSAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgbCogfCAoZGVwcmVjYXRlZCkgICAgICAgICAgICAgICAgICAgfCAgTCAgfCBTdGFuZC1hbG9uZSBtb250aCAgICAgICAgICAgICAgfFxuICogfCAgbSAgfCBNaW51dGUgICAgICAgICAgICAgICAgICAgICAgICAgfCAgTSAgfCBNb250aCAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgbiAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgTiAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgbyEgfCBPcmRpbmFsIG51bWJlciBtb2RpZmllciAgICAgICAgfCAgTyAgfCBUaW1lem9uZSAoR01UKSAgICAgICAgICAgICAgICAgfFxuICogfCAgcCEgfCBMb25nIGxvY2FsaXplZCB0aW1lICAgICAgICAgICAgfCAgUCEgfCBMb25nIGxvY2FsaXplZCBkYXRlICAgICAgICAgICAgfFxuICogfCAgcSAgfCBTdGFuZC1hbG9uZSBxdWFydGVyICAgICAgICAgICAgfCAgUSAgfCBRdWFydGVyICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgciogfCBSZWxhdGVkIEdyZWdvcmlhbiB5ZWFyICAgICAgICAgfCAgUiEgfCBJU08gd2Vlay1udW1iZXJpbmcgeWVhciAgICAgICAgfFxuICogfCAgcyAgfCBTZWNvbmQgICAgICAgICAgICAgICAgICAgICAgICAgfCAgUyAgfCBGcmFjdGlvbiBvZiBzZWNvbmQgICAgICAgICAgICAgfFxuICogfCAgdCEgfCBTZWNvbmRzIHRpbWVzdGFtcCAgICAgICAgICAgICAgfCAgVCEgfCBNaWxsaXNlY29uZHMgdGltZXN0YW1wICAgICAgICAgfFxuICogfCAgdSAgfCBFeHRlbmRlZCB5ZWFyICAgICAgICAgICAgICAgICAgfCAgVSogfCBDeWNsaWMgeWVhciAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgdiogfCBUaW1lem9uZSAoZ2VuZXJpYyBub24tbG9jYXQuKSAgfCAgViogfCBUaW1lem9uZSAobG9jYXRpb24pICAgICAgICAgICAgfFxuICogfCAgdyAgfCBMb2NhbCB3ZWVrIG9mIHllYXIgICAgICAgICAgICAgfCAgVyogfCBXZWVrIG9mIG1vbnRoICAgICAgICAgICAgICAgICAgfFxuICogfCAgeCAgfCBUaW1lem9uZSAoSVNPLTg2MDEgdy9vIFopICAgICAgfCAgWCAgfCBUaW1lem9uZSAoSVNPLTg2MDEpICAgICAgICAgICAgfFxuICogfCAgeSAgfCBZZWFyIChhYnMpICAgICAgICAgICAgICAgICAgICAgfCAgWSAgfCBMb2NhbCB3ZWVrLW51bWJlcmluZyB5ZWFyICAgICAgfFxuICogfCAgeiAgfCBUaW1lem9uZSAoc3BlY2lmaWMgbm9uLWxvY2F0LikgfCAgWiogfCBUaW1lem9uZSAoYWxpYXNlcykgICAgICAgICAgICAgfFxuICpcbiAqIExldHRlcnMgbWFya2VkIGJ5ICogYXJlIG5vdCBpbXBsZW1lbnRlZCBidXQgcmVzZXJ2ZWQgYnkgVW5pY29kZSBzdGFuZGFyZC5cbiAqXG4gKiBMZXR0ZXJzIG1hcmtlZCBieSAhIGFyZSBub24tc3RhbmRhcmQsIGJ1dCBpbXBsZW1lbnRlZCBieSBkYXRlLWZuczpcbiAqIC0gYG9gIG1vZGlmaWVzIHRoZSBwcmV2aW91cyB0b2tlbiB0byB0dXJuIGl0IGludG8gYW4gb3JkaW5hbCAoc2VlIGBmb3JtYXRgIGRvY3MpXG4gKiAtIGBpYCBpcyBJU08gZGF5IG9mIHdlZWsuIEZvciBgaWAgYW5kIGBpaWAgaXMgcmV0dXJucyBudW1lcmljIElTTyB3ZWVrIGRheXMsXG4gKiAgIGkuZS4gNyBmb3IgU3VuZGF5LCAxIGZvciBNb25kYXksIGV0Yy5cbiAqIC0gYElgIGlzIElTTyB3ZWVrIG9mIHllYXIsIGFzIG9wcG9zZWQgdG8gYHdgIHdoaWNoIGlzIGxvY2FsIHdlZWsgb2YgeWVhci5cbiAqIC0gYFJgIGlzIElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyLCBhcyBvcHBvc2VkIHRvIGBZYCB3aGljaCBpcyBsb2NhbCB3ZWVrLW51bWJlcmluZyB5ZWFyLlxuICogICBgUmAgaXMgc3VwcG9zZWQgdG8gYmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIGBJYCBhbmQgYGlgXG4gKiAgIGZvciB1bml2ZXJzYWwgSVNPIHdlZWstbnVtYmVyaW5nIGRhdGUsIHdoZXJlYXNcbiAqICAgYFlgIGlzIHN1cHBvc2VkIHRvIGJlIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBgd2AgYW5kIGBlYFxuICogICBmb3Igd2Vlay1udW1iZXJpbmcgZGF0ZSBzcGVjaWZpYyB0byB0aGUgbG9jYWxlLlxuICogLSBgUGAgaXMgbG9uZyBsb2NhbGl6ZWQgZGF0ZSBmb3JtYXRcbiAqIC0gYHBgIGlzIGxvbmcgbG9jYWxpemVkIHRpbWUgZm9ybWF0XG4gKi9cblxuZXhwb3J0IGNvbnN0IGZvcm1hdHRlcnMgPSB7XG4gIC8vIEVyYVxuICBHOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgY29uc3QgZXJhID0gZGF0ZS5nZXRGdWxsWWVhcigpID4gMCA/IDEgOiAwO1xuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIC8vIEFELCBCQ1xuICAgICAgY2FzZSBcIkdcIjpcbiAgICAgIGNhc2UgXCJHR1wiOlxuICAgICAgY2FzZSBcIkdHR1wiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZXJhKGVyYSwgeyB3aWR0aDogXCJhYmJyZXZpYXRlZFwiIH0pO1xuICAgICAgLy8gQSwgQlxuICAgICAgY2FzZSBcIkdHR0dHXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5lcmEoZXJhLCB7IHdpZHRoOiBcIm5hcnJvd1wiIH0pO1xuICAgICAgLy8gQW5ubyBEb21pbmksIEJlZm9yZSBDaHJpc3RcbiAgICAgIGNhc2UgXCJHR0dHXCI6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZXJhKGVyYSwgeyB3aWR0aDogXCJ3aWRlXCIgfSk7XG4gICAgfVxuICB9LFxuXG4gIC8vIFllYXJcbiAgeTogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIC8vIE9yZGluYWwgbnVtYmVyXG4gICAgaWYgKHRva2VuID09PSBcInlvXCIpIHtcbiAgICAgIGNvbnN0IHNpZ25lZFllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgICAvLyBSZXR1cm5zIDEgZm9yIDEgQkMgKHdoaWNoIGlzIHllYXIgMCBpbiBKYXZhU2NyaXB0KVxuICAgICAgY29uc3QgeWVhciA9IHNpZ25lZFllYXIgPiAwID8gc2lnbmVkWWVhciA6IDEgLSBzaWduZWRZZWFyO1xuICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIoeWVhciwgeyB1bml0OiBcInllYXJcIiB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGlnaHRGb3JtYXR0ZXJzLnkoZGF0ZSwgdG9rZW4pO1xuICB9LFxuXG4gIC8vIExvY2FsIHdlZWstbnVtYmVyaW5nIHllYXJcbiAgWTogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSwgb3B0aW9ucykge1xuICAgIGNvbnN0IHNpZ25lZFdlZWtZZWFyID0gZ2V0V2Vla1llYXIoZGF0ZSwgb3B0aW9ucyk7XG4gICAgLy8gUmV0dXJucyAxIGZvciAxIEJDICh3aGljaCBpcyB5ZWFyIDAgaW4gSmF2YVNjcmlwdClcbiAgICBjb25zdCB3ZWVrWWVhciA9IHNpZ25lZFdlZWtZZWFyID4gMCA/IHNpZ25lZFdlZWtZZWFyIDogMSAtIHNpZ25lZFdlZWtZZWFyO1xuXG4gICAgLy8gVHdvIGRpZ2l0IHllYXJcbiAgICBpZiAodG9rZW4gPT09IFwiWVlcIikge1xuICAgICAgY29uc3QgdHdvRGlnaXRZZWFyID0gd2Vla1llYXIgJSAxMDA7XG4gICAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKHR3b0RpZ2l0WWVhciwgMik7XG4gICAgfVxuXG4gICAgLy8gT3JkaW5hbCBudW1iZXJcbiAgICBpZiAodG9rZW4gPT09IFwiWW9cIikge1xuICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIod2Vla1llYXIsIHsgdW5pdDogXCJ5ZWFyXCIgfSk7XG4gICAgfVxuXG4gICAgLy8gUGFkZGluZ1xuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3Mod2Vla1llYXIsIHRva2VuLmxlbmd0aCk7XG4gIH0sXG5cbiAgLy8gSVNPIHdlZWstbnVtYmVyaW5nIHllYXJcbiAgUjogZnVuY3Rpb24gKGRhdGUsIHRva2VuKSB7XG4gICAgY29uc3QgaXNvV2Vla1llYXIgPSBnZXRJU09XZWVrWWVhcihkYXRlKTtcblxuICAgIC8vIFBhZGRpbmdcbiAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKGlzb1dlZWtZZWFyLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuXG4gIC8vIEV4dGVuZGVkIHllYXIuIFRoaXMgaXMgYSBzaW5nbGUgbnVtYmVyIGRlc2lnbmF0aW5nIHRoZSB5ZWFyIG9mIHRoaXMgY2FsZW5kYXIgc3lzdGVtLlxuICAvLyBUaGUgbWFpbiBkaWZmZXJlbmNlIGJldHdlZW4gYHlgIGFuZCBgdWAgbG9jYWxpemVycyBhcmUgQi5DLiB5ZWFyczpcbiAgLy8gfCBZZWFyIHwgYHlgIHwgYHVgIHxcbiAgLy8gfC0tLS0tLXwtLS0tLXwtLS0tLXxcbiAgLy8gfCBBQyAxIHwgICAxIHwgICAxIHxcbiAgLy8gfCBCQyAxIHwgICAxIHwgICAwIHxcbiAgLy8gfCBCQyAyIHwgICAyIHwgIC0xIHxcbiAgLy8gQWxzbyBgeXlgIGFsd2F5cyByZXR1cm5zIHRoZSBsYXN0IHR3byBkaWdpdHMgb2YgYSB5ZWFyLFxuICAvLyB3aGlsZSBgdXVgIHBhZHMgc2luZ2xlIGRpZ2l0IHllYXJzIHRvIDIgY2hhcmFjdGVycyBhbmQgcmV0dXJucyBvdGhlciB5ZWFycyB1bmNoYW5nZWQuXG4gIHU6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbikge1xuICAgIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyh5ZWFyLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuXG4gIC8vIFF1YXJ0ZXJcbiAgUTogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIGNvbnN0IHF1YXJ0ZXIgPSBNYXRoLmNlaWwoKGRhdGUuZ2V0TW9udGgoKSArIDEpIC8gMyk7XG4gICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgLy8gMSwgMiwgMywgNFxuICAgICAgY2FzZSBcIlFcIjpcbiAgICAgICAgcmV0dXJuIFN0cmluZyhxdWFydGVyKTtcbiAgICAgIC8vIDAxLCAwMiwgMDMsIDA0XG4gICAgICBjYXNlIFwiUVFcIjpcbiAgICAgICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhxdWFydGVyLCAyKTtcbiAgICAgIC8vIDFzdCwgMm5kLCAzcmQsIDR0aFxuICAgICAgY2FzZSBcIlFvXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKHF1YXJ0ZXIsIHsgdW5pdDogXCJxdWFydGVyXCIgfSk7XG4gICAgICAvLyBRMSwgUTIsIFEzLCBRNFxuICAgICAgY2FzZSBcIlFRUVwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUucXVhcnRlcihxdWFydGVyLCB7XG4gICAgICAgICAgd2lkdGg6IFwiYWJicmV2aWF0ZWRcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyAxLCAyLCAzLCA0IChuYXJyb3cgcXVhcnRlcjsgY291bGQgYmUgbm90IG51bWVyaWNhbClcbiAgICAgIGNhc2UgXCJRUVFRUVwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUucXVhcnRlcihxdWFydGVyLCB7XG4gICAgICAgICAgd2lkdGg6IFwibmFycm93XCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgICAgLy8gMXN0IHF1YXJ0ZXIsIDJuZCBxdWFydGVyLCAuLi5cbiAgICAgIGNhc2UgXCJRUVFRXCI6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbG9jYWxpemUucXVhcnRlcihxdWFydGVyLCB7XG4gICAgICAgICAgd2lkdGg6IFwid2lkZVwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gU3RhbmQtYWxvbmUgcXVhcnRlclxuICBxOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgY29uc3QgcXVhcnRlciA9IE1hdGguY2VpbCgoZGF0ZS5nZXRNb250aCgpICsgMSkgLyAzKTtcbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICAvLyAxLCAyLCAzLCA0XG4gICAgICBjYXNlIFwicVwiOlxuICAgICAgICByZXR1cm4gU3RyaW5nKHF1YXJ0ZXIpO1xuICAgICAgLy8gMDEsIDAyLCAwMywgMDRcbiAgICAgIGNhc2UgXCJxcVwiOlxuICAgICAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKHF1YXJ0ZXIsIDIpO1xuICAgICAgLy8gMXN0LCAybmQsIDNyZCwgNHRoXG4gICAgICBjYXNlIFwicW9cIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIocXVhcnRlciwgeyB1bml0OiBcInF1YXJ0ZXJcIiB9KTtcbiAgICAgIC8vIFExLCBRMiwgUTMsIFE0XG4gICAgICBjYXNlIFwicXFxXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5xdWFydGVyKHF1YXJ0ZXIsIHtcbiAgICAgICAgICB3aWR0aDogXCJhYmJyZXZpYXRlZFwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwic3RhbmRhbG9uZVwiLFxuICAgICAgICB9KTtcbiAgICAgIC8vIDEsIDIsIDMsIDQgKG5hcnJvdyBxdWFydGVyOyBjb3VsZCBiZSBub3QgbnVtZXJpY2FsKVxuICAgICAgY2FzZSBcInFxcXFxXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5xdWFydGVyKHF1YXJ0ZXIsIHtcbiAgICAgICAgICB3aWR0aDogXCJuYXJyb3dcIixcbiAgICAgICAgICBjb250ZXh0OiBcInN0YW5kYWxvbmVcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyAxc3QgcXVhcnRlciwgMm5kIHF1YXJ0ZXIsIC4uLlxuICAgICAgY2FzZSBcInFxcXFcIjpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5xdWFydGVyKHF1YXJ0ZXIsIHtcbiAgICAgICAgICB3aWR0aDogXCJ3aWRlXCIsXG4gICAgICAgICAgY29udGV4dDogXCJzdGFuZGFsb25lXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICAvLyBNb250aFxuICBNOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgY29uc3QgbW9udGggPSBkYXRlLmdldE1vbnRoKCk7XG4gICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgY2FzZSBcIk1cIjpcbiAgICAgIGNhc2UgXCJNTVwiOlxuICAgICAgICByZXR1cm4gbGlnaHRGb3JtYXR0ZXJzLk0oZGF0ZSwgdG9rZW4pO1xuICAgICAgLy8gMXN0LCAybmQsIC4uLiwgMTJ0aFxuICAgICAgY2FzZSBcIk1vXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKG1vbnRoICsgMSwgeyB1bml0OiBcIm1vbnRoXCIgfSk7XG4gICAgICAvLyBKYW4sIEZlYiwgLi4uLCBEZWNcbiAgICAgIGNhc2UgXCJNTU1cIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLm1vbnRoKG1vbnRoLCB7XG4gICAgICAgICAgd2lkdGg6IFwiYWJicmV2aWF0ZWRcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBKLCBGLCAuLi4sIERcbiAgICAgIGNhc2UgXCJNTU1NTVwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUubW9udGgobW9udGgsIHtcbiAgICAgICAgICB3aWR0aDogXCJuYXJyb3dcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBKYW51YXJ5LCBGZWJydWFyeSwgLi4uLCBEZWNlbWJlclxuICAgICAgY2FzZSBcIk1NTU1cIjpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5tb250aChtb250aCwgeyB3aWR0aDogXCJ3aWRlXCIsIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiIH0pO1xuICAgIH1cbiAgfSxcblxuICAvLyBTdGFuZC1hbG9uZSBtb250aFxuICBMOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgY29uc3QgbW9udGggPSBkYXRlLmdldE1vbnRoKCk7XG4gICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgLy8gMSwgMiwgLi4uLCAxMlxuICAgICAgY2FzZSBcIkxcIjpcbiAgICAgICAgcmV0dXJuIFN0cmluZyhtb250aCArIDEpO1xuICAgICAgLy8gMDEsIDAyLCAuLi4sIDEyXG4gICAgICBjYXNlIFwiTExcIjpcbiAgICAgICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhtb250aCArIDEsIDIpO1xuICAgICAgLy8gMXN0LCAybmQsIC4uLiwgMTJ0aFxuICAgICAgY2FzZSBcIkxvXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKG1vbnRoICsgMSwgeyB1bml0OiBcIm1vbnRoXCIgfSk7XG4gICAgICAvLyBKYW4sIEZlYiwgLi4uLCBEZWNcbiAgICAgIGNhc2UgXCJMTExcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLm1vbnRoKG1vbnRoLCB7XG4gICAgICAgICAgd2lkdGg6IFwiYWJicmV2aWF0ZWRcIixcbiAgICAgICAgICBjb250ZXh0OiBcInN0YW5kYWxvbmVcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBKLCBGLCAuLi4sIERcbiAgICAgIGNhc2UgXCJMTExMTFwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUubW9udGgobW9udGgsIHtcbiAgICAgICAgICB3aWR0aDogXCJuYXJyb3dcIixcbiAgICAgICAgICBjb250ZXh0OiBcInN0YW5kYWxvbmVcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBKYW51YXJ5LCBGZWJydWFyeSwgLi4uLCBEZWNlbWJlclxuICAgICAgY2FzZSBcIkxMTExcIjpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5tb250aChtb250aCwgeyB3aWR0aDogXCJ3aWRlXCIsIGNvbnRleHQ6IFwic3RhbmRhbG9uZVwiIH0pO1xuICAgIH1cbiAgfSxcblxuICAvLyBMb2NhbCB3ZWVrIG9mIHllYXJcbiAgdzogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSwgb3B0aW9ucykge1xuICAgIGNvbnN0IHdlZWsgPSBnZXRXZWVrKGRhdGUsIG9wdGlvbnMpO1xuXG4gICAgaWYgKHRva2VuID09PSBcIndvXCIpIHtcbiAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKHdlZWssIHsgdW5pdDogXCJ3ZWVrXCIgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyh3ZWVrLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuXG4gIC8vIElTTyB3ZWVrIG9mIHllYXJcbiAgSTogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIGNvbnN0IGlzb1dlZWsgPSBnZXRJU09XZWVrKGRhdGUpO1xuXG4gICAgaWYgKHRva2VuID09PSBcIklvXCIpIHtcbiAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKGlzb1dlZWssIHsgdW5pdDogXCJ3ZWVrXCIgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhpc29XZWVrLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuXG4gIC8vIERheSBvZiB0aGUgbW9udGhcbiAgZDogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIGlmICh0b2tlbiA9PT0gXCJkb1wiKSB7XG4gICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihkYXRlLmdldERhdGUoKSwgeyB1bml0OiBcImRhdGVcIiB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGlnaHRGb3JtYXR0ZXJzLmQoZGF0ZSwgdG9rZW4pO1xuICB9LFxuXG4gIC8vIERheSBvZiB5ZWFyXG4gIEQ6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICBjb25zdCBkYXlPZlllYXIgPSBnZXREYXlPZlllYXIoZGF0ZSk7XG5cbiAgICBpZiAodG9rZW4gPT09IFwiRG9cIikge1xuICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIoZGF5T2ZZZWFyLCB7IHVuaXQ6IFwiZGF5T2ZZZWFyXCIgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhkYXlPZlllYXIsIHRva2VuLmxlbmd0aCk7XG4gIH0sXG5cbiAgLy8gRGF5IG9mIHdlZWtcbiAgRTogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIGNvbnN0IGRheU9mV2VlayA9IGRhdGUuZ2V0RGF5KCk7XG4gICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgLy8gVHVlXG4gICAgICBjYXNlIFwiRVwiOlxuICAgICAgY2FzZSBcIkVFXCI6XG4gICAgICBjYXNlIFwiRUVFXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6IFwiYWJicmV2aWF0ZWRcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBUXG4gICAgICBjYXNlIFwiRUVFRUVcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogXCJuYXJyb3dcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBUdVxuICAgICAgY2FzZSBcIkVFRUVFRVwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgIHdpZHRoOiBcInNob3J0XCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgICAgLy8gVHVlc2RheVxuICAgICAgY2FzZSBcIkVFRUVcIjpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6IFwid2lkZVwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gTG9jYWwgZGF5IG9mIHdlZWtcbiAgZTogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSwgb3B0aW9ucykge1xuICAgIGNvbnN0IGRheU9mV2VlayA9IGRhdGUuZ2V0RGF5KCk7XG4gICAgY29uc3QgbG9jYWxEYXlPZldlZWsgPSAoZGF5T2ZXZWVrIC0gb3B0aW9ucy53ZWVrU3RhcnRzT24gKyA4KSAlIDcgfHwgNztcbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICAvLyBOdW1lcmljYWwgdmFsdWUgKE50aCBkYXkgb2Ygd2VlayB3aXRoIGN1cnJlbnQgbG9jYWxlIG9yIHdlZWtTdGFydHNPbilcbiAgICAgIGNhc2UgXCJlXCI6XG4gICAgICAgIHJldHVybiBTdHJpbmcobG9jYWxEYXlPZldlZWspO1xuICAgICAgLy8gUGFkZGVkIG51bWVyaWNhbCB2YWx1ZVxuICAgICAgY2FzZSBcImVlXCI6XG4gICAgICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MobG9jYWxEYXlPZldlZWssIDIpO1xuICAgICAgLy8gMXN0LCAybmQsIC4uLiwgN3RoXG4gICAgICBjYXNlIFwiZW9cIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIobG9jYWxEYXlPZldlZWssIHsgdW5pdDogXCJkYXlcIiB9KTtcbiAgICAgIGNhc2UgXCJlZWVcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogXCJhYmJyZXZpYXRlZFwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICAgIC8vIFRcbiAgICAgIGNhc2UgXCJlZWVlZVwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgIHdpZHRoOiBcIm5hcnJvd1wiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICAgIC8vIFR1XG4gICAgICBjYXNlIFwiZWVlZWVlXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6IFwic2hvcnRcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBUdWVzZGF5XG4gICAgICBjYXNlIFwiZWVlZVwiOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogXCJ3aWRlXCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICAvLyBTdGFuZC1hbG9uZSBsb2NhbCBkYXkgb2Ygd2Vla1xuICBjOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplLCBvcHRpb25zKSB7XG4gICAgY29uc3QgZGF5T2ZXZWVrID0gZGF0ZS5nZXREYXkoKTtcbiAgICBjb25zdCBsb2NhbERheU9mV2VlayA9IChkYXlPZldlZWsgLSBvcHRpb25zLndlZWtTdGFydHNPbiArIDgpICUgNyB8fCA3O1xuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIC8vIE51bWVyaWNhbCB2YWx1ZSAoc2FtZSBhcyBpbiBgZWApXG4gICAgICBjYXNlIFwiY1wiOlxuICAgICAgICByZXR1cm4gU3RyaW5nKGxvY2FsRGF5T2ZXZWVrKTtcbiAgICAgIC8vIFBhZGRlZCBudW1lcmljYWwgdmFsdWVcbiAgICAgIGNhc2UgXCJjY1wiOlxuICAgICAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKGxvY2FsRGF5T2ZXZWVrLCB0b2tlbi5sZW5ndGgpO1xuICAgICAgLy8gMXN0LCAybmQsIC4uLiwgN3RoXG4gICAgICBjYXNlIFwiY29cIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIobG9jYWxEYXlPZldlZWssIHsgdW5pdDogXCJkYXlcIiB9KTtcbiAgICAgIGNhc2UgXCJjY2NcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogXCJhYmJyZXZpYXRlZFwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwic3RhbmRhbG9uZVwiLFxuICAgICAgICB9KTtcbiAgICAgIC8vIFRcbiAgICAgIGNhc2UgXCJjY2NjY1wiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgIHdpZHRoOiBcIm5hcnJvd1wiLFxuICAgICAgICAgIGNvbnRleHQ6IFwic3RhbmRhbG9uZVwiLFxuICAgICAgICB9KTtcbiAgICAgIC8vIFR1XG4gICAgICBjYXNlIFwiY2NjY2NjXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6IFwic2hvcnRcIixcbiAgICAgICAgICBjb250ZXh0OiBcInN0YW5kYWxvbmVcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBUdWVzZGF5XG4gICAgICBjYXNlIFwiY2NjY1wiOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogXCJ3aWRlXCIsXG4gICAgICAgICAgY29udGV4dDogXCJzdGFuZGFsb25lXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICAvLyBJU08gZGF5IG9mIHdlZWtcbiAgaTogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIGNvbnN0IGRheU9mV2VlayA9IGRhdGUuZ2V0RGF5KCk7XG4gICAgY29uc3QgaXNvRGF5T2ZXZWVrID0gZGF5T2ZXZWVrID09PSAwID8gNyA6IGRheU9mV2VlaztcbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICAvLyAyXG4gICAgICBjYXNlIFwiaVwiOlxuICAgICAgICByZXR1cm4gU3RyaW5nKGlzb0RheU9mV2Vlayk7XG4gICAgICAvLyAwMlxuICAgICAgY2FzZSBcImlpXCI6XG4gICAgICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MoaXNvRGF5T2ZXZWVrLCB0b2tlbi5sZW5ndGgpO1xuICAgICAgLy8gMm5kXG4gICAgICBjYXNlIFwiaW9cIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIoaXNvRGF5T2ZXZWVrLCB7IHVuaXQ6IFwiZGF5XCIgfSk7XG4gICAgICAvLyBUdWVcbiAgICAgIGNhc2UgXCJpaWlcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogXCJhYmJyZXZpYXRlZFwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICAgIC8vIFRcbiAgICAgIGNhc2UgXCJpaWlpaVwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgIHdpZHRoOiBcIm5hcnJvd1wiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICAgIC8vIFR1XG4gICAgICBjYXNlIFwiaWlpaWlpXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6IFwic2hvcnRcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBUdWVzZGF5XG4gICAgICBjYXNlIFwiaWlpaVwiOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogXCJ3aWRlXCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICAvLyBBTSBvciBQTVxuICBhOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgY29uc3QgaG91cnMgPSBkYXRlLmdldEhvdXJzKCk7XG4gICAgY29uc3QgZGF5UGVyaW9kRW51bVZhbHVlID0gaG91cnMgLyAxMiA+PSAxID8gXCJwbVwiIDogXCJhbVwiO1xuXG4gICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgY2FzZSBcImFcIjpcbiAgICAgIGNhc2UgXCJhYVwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5UGVyaW9kKGRheVBlcmlvZEVudW1WYWx1ZSwge1xuICAgICAgICAgIHdpZHRoOiBcImFiYnJldmlhdGVkXCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgICAgY2FzZSBcImFhYVwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemVcbiAgICAgICAgICAuZGF5UGVyaW9kKGRheVBlcmlvZEVudW1WYWx1ZSwge1xuICAgICAgICAgICAgd2lkdGg6IFwiYWJicmV2aWF0ZWRcIixcbiAgICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICAgIH0pXG4gICAgICAgICAgLnRvTG93ZXJDYXNlKCk7XG4gICAgICBjYXNlIFwiYWFhYWFcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICB3aWR0aDogXCJuYXJyb3dcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICBjYXNlIFwiYWFhYVwiOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICB3aWR0aDogXCJ3aWRlXCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICAvLyBBTSwgUE0sIG1pZG5pZ2h0LCBub29uXG4gIGI6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICBjb25zdCBob3VycyA9IGRhdGUuZ2V0SG91cnMoKTtcbiAgICBsZXQgZGF5UGVyaW9kRW51bVZhbHVlO1xuICAgIGlmIChob3VycyA9PT0gMTIpIHtcbiAgICAgIGRheVBlcmlvZEVudW1WYWx1ZSA9IGRheVBlcmlvZEVudW0ubm9vbjtcbiAgICB9IGVsc2UgaWYgKGhvdXJzID09PSAwKSB7XG4gICAgICBkYXlQZXJpb2RFbnVtVmFsdWUgPSBkYXlQZXJpb2RFbnVtLm1pZG5pZ2h0O1xuICAgIH0gZWxzZSB7XG4gICAgICBkYXlQZXJpb2RFbnVtVmFsdWUgPSBob3VycyAvIDEyID49IDEgPyBcInBtXCIgOiBcImFtXCI7XG4gICAgfVxuXG4gICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgY2FzZSBcImJcIjpcbiAgICAgIGNhc2UgXCJiYlwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5UGVyaW9kKGRheVBlcmlvZEVudW1WYWx1ZSwge1xuICAgICAgICAgIHdpZHRoOiBcImFiYnJldmlhdGVkXCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgICAgY2FzZSBcImJiYlwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemVcbiAgICAgICAgICAuZGF5UGVyaW9kKGRheVBlcmlvZEVudW1WYWx1ZSwge1xuICAgICAgICAgICAgd2lkdGg6IFwiYWJicmV2aWF0ZWRcIixcbiAgICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICAgIH0pXG4gICAgICAgICAgLnRvTG93ZXJDYXNlKCk7XG4gICAgICBjYXNlIFwiYmJiYmJcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICB3aWR0aDogXCJuYXJyb3dcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICBjYXNlIFwiYmJiYlwiOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICB3aWR0aDogXCJ3aWRlXCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICAvLyBpbiB0aGUgbW9ybmluZywgaW4gdGhlIGFmdGVybm9vbiwgaW4gdGhlIGV2ZW5pbmcsIGF0IG5pZ2h0XG4gIEI6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICBjb25zdCBob3VycyA9IGRhdGUuZ2V0SG91cnMoKTtcbiAgICBsZXQgZGF5UGVyaW9kRW51bVZhbHVlO1xuICAgIGlmIChob3VycyA+PSAxNykge1xuICAgICAgZGF5UGVyaW9kRW51bVZhbHVlID0gZGF5UGVyaW9kRW51bS5ldmVuaW5nO1xuICAgIH0gZWxzZSBpZiAoaG91cnMgPj0gMTIpIHtcbiAgICAgIGRheVBlcmlvZEVudW1WYWx1ZSA9IGRheVBlcmlvZEVudW0uYWZ0ZXJub29uO1xuICAgIH0gZWxzZSBpZiAoaG91cnMgPj0gNCkge1xuICAgICAgZGF5UGVyaW9kRW51bVZhbHVlID0gZGF5UGVyaW9kRW51bS5tb3JuaW5nO1xuICAgIH0gZWxzZSB7XG4gICAgICBkYXlQZXJpb2RFbnVtVmFsdWUgPSBkYXlQZXJpb2RFbnVtLm5pZ2h0O1xuICAgIH1cblxuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIGNhc2UgXCJCXCI6XG4gICAgICBjYXNlIFwiQkJcIjpcbiAgICAgIGNhc2UgXCJCQkJcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICB3aWR0aDogXCJhYmJyZXZpYXRlZFwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICAgIGNhc2UgXCJCQkJCQlwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5UGVyaW9kKGRheVBlcmlvZEVudW1WYWx1ZSwge1xuICAgICAgICAgIHdpZHRoOiBcIm5hcnJvd1wiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICAgIGNhc2UgXCJCQkJCXCI6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5UGVyaW9kKGRheVBlcmlvZEVudW1WYWx1ZSwge1xuICAgICAgICAgIHdpZHRoOiBcIndpZGVcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIC8vIEhvdXIgWzEtMTJdXG4gIGg6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICBpZiAodG9rZW4gPT09IFwiaG9cIikge1xuICAgICAgbGV0IGhvdXJzID0gZGF0ZS5nZXRIb3VycygpICUgMTI7XG4gICAgICBpZiAoaG91cnMgPT09IDApIGhvdXJzID0gMTI7XG4gICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihob3VycywgeyB1bml0OiBcImhvdXJcIiB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGlnaHRGb3JtYXR0ZXJzLmgoZGF0ZSwgdG9rZW4pO1xuICB9LFxuXG4gIC8vIEhvdXIgWzAtMjNdXG4gIEg6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICBpZiAodG9rZW4gPT09IFwiSG9cIikge1xuICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIoZGF0ZS5nZXRIb3VycygpLCB7IHVuaXQ6IFwiaG91clwiIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBsaWdodEZvcm1hdHRlcnMuSChkYXRlLCB0b2tlbik7XG4gIH0sXG5cbiAgLy8gSG91ciBbMC0xMV1cbiAgSzogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIGNvbnN0IGhvdXJzID0gZGF0ZS5nZXRIb3VycygpICUgMTI7XG5cbiAgICBpZiAodG9rZW4gPT09IFwiS29cIikge1xuICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIoaG91cnMsIHsgdW5pdDogXCJob3VyXCIgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhob3VycywgdG9rZW4ubGVuZ3RoKTtcbiAgfSxcblxuICAvLyBIb3VyIFsxLTI0XVxuICBrOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgbGV0IGhvdXJzID0gZGF0ZS5nZXRIb3VycygpO1xuICAgIGlmIChob3VycyA9PT0gMCkgaG91cnMgPSAyNDtcblxuICAgIGlmICh0b2tlbiA9PT0gXCJrb1wiKSB7XG4gICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihob3VycywgeyB1bml0OiBcImhvdXJcIiB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKGhvdXJzLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuXG4gIC8vIE1pbnV0ZVxuICBtOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgaWYgKHRva2VuID09PSBcIm1vXCIpIHtcbiAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKGRhdGUuZ2V0TWludXRlcygpLCB7IHVuaXQ6IFwibWludXRlXCIgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpZ2h0Rm9ybWF0dGVycy5tKGRhdGUsIHRva2VuKTtcbiAgfSxcblxuICAvLyBTZWNvbmRcbiAgczogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIGlmICh0b2tlbiA9PT0gXCJzb1wiKSB7XG4gICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihkYXRlLmdldFNlY29uZHMoKSwgeyB1bml0OiBcInNlY29uZFwiIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBsaWdodEZvcm1hdHRlcnMucyhkYXRlLCB0b2tlbik7XG4gIH0sXG5cbiAgLy8gRnJhY3Rpb24gb2Ygc2Vjb25kXG4gIFM6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbikge1xuICAgIHJldHVybiBsaWdodEZvcm1hdHRlcnMuUyhkYXRlLCB0b2tlbik7XG4gIH0sXG5cbiAgLy8gVGltZXpvbmUgKElTTy04NjAxLiBJZiBvZmZzZXQgaXMgMCwgb3V0cHV0IGlzIGFsd2F5cyBgJ1onYClcbiAgWDogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBfbG9jYWxpemUpIHtcbiAgICBjb25zdCB0aW1lem9uZU9mZnNldCA9IGRhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKTtcblxuICAgIGlmICh0aW1lem9uZU9mZnNldCA9PT0gMCkge1xuICAgICAgcmV0dXJuIFwiWlwiO1xuICAgIH1cblxuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIC8vIEhvdXJzIGFuZCBvcHRpb25hbCBtaW51dGVzXG4gICAgICBjYXNlIFwiWFwiOlxuICAgICAgICByZXR1cm4gZm9ybWF0VGltZXpvbmVXaXRoT3B0aW9uYWxNaW51dGVzKHRpbWV6b25lT2Zmc2V0KTtcblxuICAgICAgLy8gSG91cnMsIG1pbnV0ZXMgYW5kIG9wdGlvbmFsIHNlY29uZHMgd2l0aG91dCBgOmAgZGVsaW1pdGVyXG4gICAgICAvLyBOb3RlOiBuZWl0aGVyIElTTy04NjAxIG5vciBKYXZhU2NyaXB0IHN1cHBvcnRzIHNlY29uZHMgaW4gdGltZXpvbmUgb2Zmc2V0c1xuICAgICAgLy8gc28gdGhpcyB0b2tlbiBhbHdheXMgaGFzIHRoZSBzYW1lIG91dHB1dCBhcyBgWFhgXG4gICAgICBjYXNlIFwiWFhYWFwiOlxuICAgICAgY2FzZSBcIlhYXCI6IC8vIEhvdXJzIGFuZCBtaW51dGVzIHdpdGhvdXQgYDpgIGRlbGltaXRlclxuICAgICAgICByZXR1cm4gZm9ybWF0VGltZXpvbmUodGltZXpvbmVPZmZzZXQpO1xuXG4gICAgICAvLyBIb3VycywgbWludXRlcyBhbmQgb3B0aW9uYWwgc2Vjb25kcyB3aXRoIGA6YCBkZWxpbWl0ZXJcbiAgICAgIC8vIE5vdGU6IG5laXRoZXIgSVNPLTg2MDEgbm9yIEphdmFTY3JpcHQgc3VwcG9ydHMgc2Vjb25kcyBpbiB0aW1lem9uZSBvZmZzZXRzXG4gICAgICAvLyBzbyB0aGlzIHRva2VuIGFsd2F5cyBoYXMgdGhlIHNhbWUgb3V0cHV0IGFzIGBYWFhgXG4gICAgICBjYXNlIFwiWFhYWFhcIjpcbiAgICAgIGNhc2UgXCJYWFhcIjogLy8gSG91cnMgYW5kIG1pbnV0ZXMgd2l0aCBgOmAgZGVsaW1pdGVyXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZm9ybWF0VGltZXpvbmUodGltZXpvbmVPZmZzZXQsIFwiOlwiKTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gVGltZXpvbmUgKElTTy04NjAxLiBJZiBvZmZzZXQgaXMgMCwgb3V0cHV0IGlzIGAnKzAwOjAwJ2Agb3IgZXF1aXZhbGVudClcbiAgeDogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBfbG9jYWxpemUpIHtcbiAgICBjb25zdCB0aW1lem9uZU9mZnNldCA9IGRhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKTtcblxuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIC8vIEhvdXJzIGFuZCBvcHRpb25hbCBtaW51dGVzXG4gICAgICBjYXNlIFwieFwiOlxuICAgICAgICByZXR1cm4gZm9ybWF0VGltZXpvbmVXaXRoT3B0aW9uYWxNaW51dGVzKHRpbWV6b25lT2Zmc2V0KTtcblxuICAgICAgLy8gSG91cnMsIG1pbnV0ZXMgYW5kIG9wdGlvbmFsIHNlY29uZHMgd2l0aG91dCBgOmAgZGVsaW1pdGVyXG4gICAgICAvLyBOb3RlOiBuZWl0aGVyIElTTy04NjAxIG5vciBKYXZhU2NyaXB0IHN1cHBvcnRzIHNlY29uZHMgaW4gdGltZXpvbmUgb2Zmc2V0c1xuICAgICAgLy8gc28gdGhpcyB0b2tlbiBhbHdheXMgaGFzIHRoZSBzYW1lIG91dHB1dCBhcyBgeHhgXG4gICAgICBjYXNlIFwieHh4eFwiOlxuICAgICAgY2FzZSBcInh4XCI6IC8vIEhvdXJzIGFuZCBtaW51dGVzIHdpdGhvdXQgYDpgIGRlbGltaXRlclxuICAgICAgICByZXR1cm4gZm9ybWF0VGltZXpvbmUodGltZXpvbmVPZmZzZXQpO1xuXG4gICAgICAvLyBIb3VycywgbWludXRlcyBhbmQgb3B0aW9uYWwgc2Vjb25kcyB3aXRoIGA6YCBkZWxpbWl0ZXJcbiAgICAgIC8vIE5vdGU6IG5laXRoZXIgSVNPLTg2MDEgbm9yIEphdmFTY3JpcHQgc3VwcG9ydHMgc2Vjb25kcyBpbiB0aW1lem9uZSBvZmZzZXRzXG4gICAgICAvLyBzbyB0aGlzIHRva2VuIGFsd2F5cyBoYXMgdGhlIHNhbWUgb3V0cHV0IGFzIGB4eHhgXG4gICAgICBjYXNlIFwieHh4eHhcIjpcbiAgICAgIGNhc2UgXCJ4eHhcIjogLy8gSG91cnMgYW5kIG1pbnV0ZXMgd2l0aCBgOmAgZGVsaW1pdGVyXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZm9ybWF0VGltZXpvbmUodGltZXpvbmVPZmZzZXQsIFwiOlwiKTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gVGltZXpvbmUgKEdNVClcbiAgTzogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBfbG9jYWxpemUpIHtcbiAgICBjb25zdCB0aW1lem9uZU9mZnNldCA9IGRhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKTtcblxuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIC8vIFNob3J0XG4gICAgICBjYXNlIFwiT1wiOlxuICAgICAgY2FzZSBcIk9PXCI6XG4gICAgICBjYXNlIFwiT09PXCI6XG4gICAgICAgIHJldHVybiBcIkdNVFwiICsgZm9ybWF0VGltZXpvbmVTaG9ydCh0aW1lem9uZU9mZnNldCwgXCI6XCIpO1xuICAgICAgLy8gTG9uZ1xuICAgICAgY2FzZSBcIk9PT09cIjpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBcIkdNVFwiICsgZm9ybWF0VGltZXpvbmUodGltZXpvbmVPZmZzZXQsIFwiOlwiKTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gVGltZXpvbmUgKHNwZWNpZmljIG5vbi1sb2NhdGlvbilcbiAgejogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBfbG9jYWxpemUpIHtcbiAgICBjb25zdCB0aW1lem9uZU9mZnNldCA9IGRhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKTtcblxuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIC8vIFNob3J0XG4gICAgICBjYXNlIFwielwiOlxuICAgICAgY2FzZSBcInp6XCI6XG4gICAgICBjYXNlIFwienp6XCI6XG4gICAgICAgIHJldHVybiBcIkdNVFwiICsgZm9ybWF0VGltZXpvbmVTaG9ydCh0aW1lem9uZU9mZnNldCwgXCI6XCIpO1xuICAgICAgLy8gTG9uZ1xuICAgICAgY2FzZSBcInp6enpcIjpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBcIkdNVFwiICsgZm9ybWF0VGltZXpvbmUodGltZXpvbmVPZmZzZXQsIFwiOlwiKTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gU2Vjb25kcyB0aW1lc3RhbXBcbiAgdDogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBfbG9jYWxpemUpIHtcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBNYXRoLnRydW5jKGRhdGUuZ2V0VGltZSgpIC8gMTAwMCk7XG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyh0aW1lc3RhbXAsIHRva2VuLmxlbmd0aCk7XG4gIH0sXG5cbiAgLy8gTWlsbGlzZWNvbmRzIHRpbWVzdGFtcFxuICBUOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIF9sb2NhbGl6ZSkge1xuICAgIGNvbnN0IHRpbWVzdGFtcCA9IGRhdGUuZ2V0VGltZSgpO1xuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3ModGltZXN0YW1wLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxufTtcblxuZnVuY3Rpb24gZm9ybWF0VGltZXpvbmVTaG9ydChvZmZzZXQsIGRlbGltaXRlciA9IFwiXCIpIHtcbiAgY29uc3Qgc2lnbiA9IG9mZnNldCA+IDAgPyBcIi1cIiA6IFwiK1wiO1xuICBjb25zdCBhYnNPZmZzZXQgPSBNYXRoLmFicyhvZmZzZXQpO1xuICBjb25zdCBob3VycyA9IE1hdGgudHJ1bmMoYWJzT2Zmc2V0IC8gNjApO1xuICBjb25zdCBtaW51dGVzID0gYWJzT2Zmc2V0ICUgNjA7XG4gIGlmIChtaW51dGVzID09PSAwKSB7XG4gICAgcmV0dXJuIHNpZ24gKyBTdHJpbmcoaG91cnMpO1xuICB9XG4gIHJldHVybiBzaWduICsgU3RyaW5nKGhvdXJzKSArIGRlbGltaXRlciArIGFkZExlYWRpbmdaZXJvcyhtaW51dGVzLCAyKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0VGltZXpvbmVXaXRoT3B0aW9uYWxNaW51dGVzKG9mZnNldCwgZGVsaW1pdGVyKSB7XG4gIGlmIChvZmZzZXQgJSA2MCA9PT0gMCkge1xuICAgIGNvbnN0IHNpZ24gPSBvZmZzZXQgPiAwID8gXCItXCIgOiBcIitcIjtcbiAgICByZXR1cm4gc2lnbiArIGFkZExlYWRpbmdaZXJvcyhNYXRoLmFicyhvZmZzZXQpIC8gNjAsIDIpO1xuICB9XG4gIHJldHVybiBmb3JtYXRUaW1lem9uZShvZmZzZXQsIGRlbGltaXRlcik7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdFRpbWV6b25lKG9mZnNldCwgZGVsaW1pdGVyID0gXCJcIikge1xuICBjb25zdCBzaWduID0gb2Zmc2V0ID4gMCA/IFwiLVwiIDogXCIrXCI7XG4gIGNvbnN0IGFic09mZnNldCA9IE1hdGguYWJzKG9mZnNldCk7XG4gIGNvbnN0IGhvdXJzID0gYWRkTGVhZGluZ1plcm9zKE1hdGgudHJ1bmMoYWJzT2Zmc2V0IC8gNjApLCAyKTtcbiAgY29uc3QgbWludXRlcyA9IGFkZExlYWRpbmdaZXJvcyhhYnNPZmZzZXQgJSA2MCwgMik7XG4gIHJldHVybiBzaWduICsgaG91cnMgKyBkZWxpbWl0ZXIgKyBtaW51dGVzO1xufVxuIiwiY29uc3QgZGF0ZUxvbmdGb3JtYXR0ZXIgPSAocGF0dGVybiwgZm9ybWF0TG9uZykgPT4ge1xuICBzd2l0Y2ggKHBhdHRlcm4pIHtcbiAgICBjYXNlIFwiUFwiOlxuICAgICAgcmV0dXJuIGZvcm1hdExvbmcuZGF0ZSh7IHdpZHRoOiBcInNob3J0XCIgfSk7XG4gICAgY2FzZSBcIlBQXCI6XG4gICAgICByZXR1cm4gZm9ybWF0TG9uZy5kYXRlKHsgd2lkdGg6IFwibWVkaXVtXCIgfSk7XG4gICAgY2FzZSBcIlBQUFwiOlxuICAgICAgcmV0dXJuIGZvcm1hdExvbmcuZGF0ZSh7IHdpZHRoOiBcImxvbmdcIiB9KTtcbiAgICBjYXNlIFwiUFBQUFwiOlxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZm9ybWF0TG9uZy5kYXRlKHsgd2lkdGg6IFwiZnVsbFwiIH0pO1xuICB9XG59O1xuXG5jb25zdCB0aW1lTG9uZ0Zvcm1hdHRlciA9IChwYXR0ZXJuLCBmb3JtYXRMb25nKSA9PiB7XG4gIHN3aXRjaCAocGF0dGVybikge1xuICAgIGNhc2UgXCJwXCI6XG4gICAgICByZXR1cm4gZm9ybWF0TG9uZy50aW1lKHsgd2lkdGg6IFwic2hvcnRcIiB9KTtcbiAgICBjYXNlIFwicHBcIjpcbiAgICAgIHJldHVybiBmb3JtYXRMb25nLnRpbWUoeyB3aWR0aDogXCJtZWRpdW1cIiB9KTtcbiAgICBjYXNlIFwicHBwXCI6XG4gICAgICByZXR1cm4gZm9ybWF0TG9uZy50aW1lKHsgd2lkdGg6IFwibG9uZ1wiIH0pO1xuICAgIGNhc2UgXCJwcHBwXCI6XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBmb3JtYXRMb25nLnRpbWUoeyB3aWR0aDogXCJmdWxsXCIgfSk7XG4gIH1cbn07XG5cbmNvbnN0IGRhdGVUaW1lTG9uZ0Zvcm1hdHRlciA9IChwYXR0ZXJuLCBmb3JtYXRMb25nKSA9PiB7XG4gIGNvbnN0IG1hdGNoUmVzdWx0ID0gcGF0dGVybi5tYXRjaCgvKFArKShwKyk/LykgfHwgW107XG4gIGNvbnN0IGRhdGVQYXR0ZXJuID0gbWF0Y2hSZXN1bHRbMV07XG4gIGNvbnN0IHRpbWVQYXR0ZXJuID0gbWF0Y2hSZXN1bHRbMl07XG5cbiAgaWYgKCF0aW1lUGF0dGVybikge1xuICAgIHJldHVybiBkYXRlTG9uZ0Zvcm1hdHRlcihwYXR0ZXJuLCBmb3JtYXRMb25nKTtcbiAgfVxuXG4gIGxldCBkYXRlVGltZUZvcm1hdDtcblxuICBzd2l0Y2ggKGRhdGVQYXR0ZXJuKSB7XG4gICAgY2FzZSBcIlBcIjpcbiAgICAgIGRhdGVUaW1lRm9ybWF0ID0gZm9ybWF0TG9uZy5kYXRlVGltZSh7IHdpZHRoOiBcInNob3J0XCIgfSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwiUFBcIjpcbiAgICAgIGRhdGVUaW1lRm9ybWF0ID0gZm9ybWF0TG9uZy5kYXRlVGltZSh7IHdpZHRoOiBcIm1lZGl1bVwiIH0pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcIlBQUFwiOlxuICAgICAgZGF0ZVRpbWVGb3JtYXQgPSBmb3JtYXRMb25nLmRhdGVUaW1lKHsgd2lkdGg6IFwibG9uZ1wiIH0pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcIlBQUFBcIjpcbiAgICBkZWZhdWx0OlxuICAgICAgZGF0ZVRpbWVGb3JtYXQgPSBmb3JtYXRMb25nLmRhdGVUaW1lKHsgd2lkdGg6IFwiZnVsbFwiIH0pO1xuICAgICAgYnJlYWs7XG4gIH1cblxuICByZXR1cm4gZGF0ZVRpbWVGb3JtYXRcbiAgICAucmVwbGFjZShcInt7ZGF0ZX19XCIsIGRhdGVMb25nRm9ybWF0dGVyKGRhdGVQYXR0ZXJuLCBmb3JtYXRMb25nKSlcbiAgICAucmVwbGFjZShcInt7dGltZX19XCIsIHRpbWVMb25nRm9ybWF0dGVyKHRpbWVQYXR0ZXJuLCBmb3JtYXRMb25nKSk7XG59O1xuXG5leHBvcnQgY29uc3QgbG9uZ0Zvcm1hdHRlcnMgPSB7XG4gIHA6IHRpbWVMb25nRm9ybWF0dGVyLFxuICBQOiBkYXRlVGltZUxvbmdGb3JtYXR0ZXIsXG59O1xuIiwiY29uc3QgZGF5T2ZZZWFyVG9rZW5SRSA9IC9eRCskLztcbmNvbnN0IHdlZWtZZWFyVG9rZW5SRSA9IC9eWSskLztcblxuY29uc3QgdGhyb3dUb2tlbnMgPSBbXCJEXCIsIFwiRERcIiwgXCJZWVwiLCBcIllZWVlcIl07XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1Byb3RlY3RlZERheU9mWWVhclRva2VuKHRva2VuKSB7XG4gIHJldHVybiBkYXlPZlllYXJUb2tlblJFLnRlc3QodG9rZW4pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNQcm90ZWN0ZWRXZWVrWWVhclRva2VuKHRva2VuKSB7XG4gIHJldHVybiB3ZWVrWWVhclRva2VuUkUudGVzdCh0b2tlbik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB3YXJuT3JUaHJvd1Byb3RlY3RlZEVycm9yKHRva2VuLCBmb3JtYXQsIGlucHV0KSB7XG4gIGNvbnN0IF9tZXNzYWdlID0gbWVzc2FnZSh0b2tlbiwgZm9ybWF0LCBpbnB1dCk7XG4gIGNvbnNvbGUud2FybihfbWVzc2FnZSk7XG4gIGlmICh0aHJvd1Rva2Vucy5pbmNsdWRlcyh0b2tlbikpIHRocm93IG5ldyBSYW5nZUVycm9yKF9tZXNzYWdlKTtcbn1cblxuZnVuY3Rpb24gbWVzc2FnZSh0b2tlbiwgZm9ybWF0LCBpbnB1dCkge1xuICBjb25zdCBzdWJqZWN0ID0gdG9rZW5bMF0gPT09IFwiWVwiID8gXCJ5ZWFyc1wiIDogXCJkYXlzIG9mIHRoZSBtb250aFwiO1xuICByZXR1cm4gYFVzZSBcXGAke3Rva2VuLnRvTG93ZXJDYXNlKCl9XFxgIGluc3RlYWQgb2YgXFxgJHt0b2tlbn1cXGAgKGluIFxcYCR7Zm9ybWF0fVxcYCkgZm9yIGZvcm1hdHRpbmcgJHtzdWJqZWN0fSB0byB0aGUgaW5wdXQgXFxgJHtpbnB1dH1cXGA7IHNlZTogaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdW5pY29kZVRva2Vucy5tZGA7XG59XG4iLCJpbXBvcnQgeyBpc0RhdGUgfSBmcm9tIFwiLi9pc0RhdGUubWpzXCI7XG5pbXBvcnQgeyB0b0RhdGUgfSBmcm9tIFwiLi90b0RhdGUubWpzXCI7XG5cbi8qKlxuICogQG5hbWUgaXNWYWxpZFxuICogQGNhdGVnb3J5IENvbW1vbiBIZWxwZXJzXG4gKiBAc3VtbWFyeSBJcyB0aGUgZ2l2ZW4gZGF0ZSB2YWxpZD9cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybnMgZmFsc2UgaWYgYXJndW1lbnQgaXMgSW52YWxpZCBEYXRlIGFuZCB0cnVlIG90aGVyd2lzZS5cbiAqIEFyZ3VtZW50IGlzIGNvbnZlcnRlZCB0byBEYXRlIHVzaW5nIGB0b0RhdGVgLiBTZWUgW3RvRGF0ZV0oaHR0cHM6Ly9kYXRlLWZucy5vcmcvZG9jcy90b0RhdGUpXG4gKiBJbnZhbGlkIERhdGUgaXMgYSBEYXRlLCB3aG9zZSB0aW1lIHZhbHVlIGlzIE5hTi5cbiAqXG4gKiBUaW1lIHZhbHVlIG9mIERhdGU6IGh0dHA6Ly9lczUuZ2l0aHViLmlvLyN4MTUuOS4xLjFcbiAqXG4gKiBAdHlwZVBhcmFtIERhdGVUeXBlIC0gVGhlIGBEYXRlYCB0eXBlLCB0aGUgZnVuY3Rpb24gb3BlcmF0ZXMgb24uIEdldHMgaW5mZXJyZWQgZnJvbSBwYXNzZWQgYXJndW1lbnRzLiBBbGxvd3MgdG8gdXNlIGV4dGVuc2lvbnMgbGlrZSBbYFVUQ0RhdGVgXShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvdXRjKS5cbiAqXG4gKiBAcGFyYW0gZGF0ZSAtIFRoZSBkYXRlIHRvIGNoZWNrXG4gKlxuICogQHJldHVybnMgVGhlIGRhdGUgaXMgdmFsaWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gRm9yIHRoZSB2YWxpZCBkYXRlOlxuICogY29uc3QgcmVzdWx0ID0gaXNWYWxpZChuZXcgRGF0ZSgyMDE0LCAxLCAzMSkpXG4gKiAvLz0+IHRydWVcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gRm9yIHRoZSB2YWx1ZSwgY29udmVydGFibGUgaW50byBhIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSBpc1ZhbGlkKDEzOTM4MDQ4MDAwMDApXG4gKiAvLz0+IHRydWVcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gRm9yIHRoZSBpbnZhbGlkIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSBpc1ZhbGlkKG5ldyBEYXRlKCcnKSlcbiAqIC8vPT4gZmFsc2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsaWQoZGF0ZSkge1xuICBpZiAoIWlzRGF0ZShkYXRlKSAmJiB0eXBlb2YgZGF0ZSAhPT0gXCJudW1iZXJcIikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCBfZGF0ZSA9IHRvRGF0ZShkYXRlKTtcbiAgcmV0dXJuICFpc05hTihOdW1iZXIoX2RhdGUpKTtcbn1cblxuLy8gRmFsbGJhY2sgZm9yIG1vZHVsYXJpemVkIGltcG9ydHM6XG5leHBvcnQgZGVmYXVsdCBpc1ZhbGlkO1xuIiwiLyoqXG4gKiBAbmFtZSBpc0RhdGVcbiAqIEBjYXRlZ29yeSBDb21tb24gSGVscGVyc1xuICogQHN1bW1hcnkgSXMgdGhlIGdpdmVuIHZhbHVlIGEgZGF0ZT9cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gdmFsdWUgaXMgYW4gaW5zdGFuY2Ugb2YgRGF0ZS4gVGhlIGZ1bmN0aW9uIHdvcmtzIGZvciBkYXRlcyB0cmFuc2ZlcnJlZCBhY3Jvc3MgaWZyYW1lcy5cbiAqXG4gKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gY2hlY2tcbiAqXG4gKiBAcmV0dXJucyBUcnVlIGlmIHRoZSBnaXZlbiB2YWx1ZSBpcyBhIGRhdGVcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gRm9yIGEgdmFsaWQgZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IGlzRGF0ZShuZXcgRGF0ZSgpKVxuICogLy89PiB0cnVlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEZvciBhbiBpbnZhbGlkIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSBpc0RhdGUobmV3IERhdGUoTmFOKSlcbiAqIC8vPT4gdHJ1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBGb3Igc29tZSB2YWx1ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IGlzRGF0ZSgnMjAxNC0wMi0zMScpXG4gKiAvLz0+IGZhbHNlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEZvciBhbiBvYmplY3Q6XG4gKiBjb25zdCByZXN1bHQgPSBpc0RhdGUoe30pXG4gKiAvLz0+IGZhbHNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0RhdGUodmFsdWUpIHtcbiAgcmV0dXJuIChcbiAgICB2YWx1ZSBpbnN0YW5jZW9mIERhdGUgfHxcbiAgICAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmXG4gICAgICBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpID09PSBcIltvYmplY3QgRGF0ZV1cIilcbiAgKTtcbn1cblxuLy8gRmFsbGJhY2sgZm9yIG1vZHVsYXJpemVkIGltcG9ydHM6XG5leHBvcnQgZGVmYXVsdCBpc0RhdGU7XG4iLCJpbXBvcnQgeyBkZWZhdWx0TG9jYWxlIH0gZnJvbSBcIi4vX2xpYi9kZWZhdWx0TG9jYWxlLm1qc1wiO1xuaW1wb3J0IHsgZ2V0RGVmYXVsdE9wdGlvbnMgfSBmcm9tIFwiLi9fbGliL2RlZmF1bHRPcHRpb25zLm1qc1wiO1xuaW1wb3J0IHsgZm9ybWF0dGVycyB9IGZyb20gXCIuL19saWIvZm9ybWF0L2Zvcm1hdHRlcnMubWpzXCI7XG5pbXBvcnQgeyBsb25nRm9ybWF0dGVycyB9IGZyb20gXCIuL19saWIvZm9ybWF0L2xvbmdGb3JtYXR0ZXJzLm1qc1wiO1xuaW1wb3J0IHtcbiAgaXNQcm90ZWN0ZWREYXlPZlllYXJUb2tlbixcbiAgaXNQcm90ZWN0ZWRXZWVrWWVhclRva2VuLFxuICB3YXJuT3JUaHJvd1Byb3RlY3RlZEVycm9yLFxufSBmcm9tIFwiLi9fbGliL3Byb3RlY3RlZFRva2Vucy5tanNcIjtcbmltcG9ydCB7IGlzVmFsaWQgfSBmcm9tIFwiLi9pc1ZhbGlkLm1qc1wiO1xuaW1wb3J0IHsgdG9EYXRlIH0gZnJvbSBcIi4vdG9EYXRlLm1qc1wiO1xuXG4vLyBSZXhwb3J0cyBvZiBpbnRlcm5hbCBmb3IgbGlicmFyaWVzIHRvIHVzZS5cbi8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2lzc3Vlcy8zNjM4I2lzc3VlY29tbWVudC0xODc3MDgyODc0XG5leHBvcnQgeyBmb3JtYXR0ZXJzLCBsb25nRm9ybWF0dGVycyB9O1xuXG4vLyBUaGlzIFJlZ0V4cCBjb25zaXN0cyBvZiB0aHJlZSBwYXJ0cyBzZXBhcmF0ZWQgYnkgYHxgOlxuLy8gLSBbeVlRcU1Md0lkRGVjaWhIS2ttc11vIG1hdGNoZXMgYW55IGF2YWlsYWJsZSBvcmRpbmFsIG51bWJlciB0b2tlblxuLy8gICAob25lIG9mIHRoZSBjZXJ0YWluIGxldHRlcnMgZm9sbG93ZWQgYnkgYG9gKVxuLy8gLSAoXFx3KVxcMSogbWF0Y2hlcyBhbnkgc2VxdWVuY2VzIG9mIHRoZSBzYW1lIGxldHRlclxuLy8gLSAnJyBtYXRjaGVzIHR3byBxdW90ZSBjaGFyYWN0ZXJzIGluIGEgcm93XG4vLyAtICcoJyd8W14nXSkrKCd8JCkgbWF0Y2hlcyBhbnl0aGluZyBzdXJyb3VuZGVkIGJ5IHR3byBxdW90ZSBjaGFyYWN0ZXJzICgnKSxcbi8vICAgZXhjZXB0IGEgc2luZ2xlIHF1b3RlIHN5bWJvbCwgd2hpY2ggZW5kcyB0aGUgc2VxdWVuY2UuXG4vLyAgIFR3byBxdW90ZSBjaGFyYWN0ZXJzIGRvIG5vdCBlbmQgdGhlIHNlcXVlbmNlLlxuLy8gICBJZiB0aGVyZSBpcyBubyBtYXRjaGluZyBzaW5nbGUgcXVvdGVcbi8vICAgdGhlbiB0aGUgc2VxdWVuY2Ugd2lsbCBjb250aW51ZSB1bnRpbCB0aGUgZW5kIG9mIHRoZSBzdHJpbmcuXG4vLyAtIC4gbWF0Y2hlcyBhbnkgc2luZ2xlIGNoYXJhY3RlciB1bm1hdGNoZWQgYnkgcHJldmlvdXMgcGFydHMgb2YgdGhlIFJlZ0V4cHNcbmNvbnN0IGZvcm1hdHRpbmdUb2tlbnNSZWdFeHAgPVxuICAvW3lZUXFNTHdJZERlY2loSEtrbXNdb3woXFx3KVxcMSp8Jyd8JygnJ3xbXiddKSsoJ3wkKXwuL2c7XG5cbi8vIFRoaXMgUmVnRXhwIGNhdGNoZXMgc3ltYm9scyBlc2NhcGVkIGJ5IHF1b3RlcywgYW5kIGFsc29cbi8vIHNlcXVlbmNlcyBvZiBzeW1ib2xzIFAsIHAsIGFuZCB0aGUgY29tYmluYXRpb25zIGxpa2UgYFBQUFBQUFBwcHBwcGBcbmNvbnN0IGxvbmdGb3JtYXR0aW5nVG9rZW5zUmVnRXhwID0gL1ArcCt8UCt8cCt8Jyd8JygnJ3xbXiddKSsoJ3wkKXwuL2c7XG5cbmNvbnN0IGVzY2FwZWRTdHJpbmdSZWdFeHAgPSAvXicoW15dKj8pJz8kLztcbmNvbnN0IGRvdWJsZVF1b3RlUmVnRXhwID0gLycnL2c7XG5jb25zdCB1bmVzY2FwZWRMYXRpbkNoYXJhY3RlclJlZ0V4cCA9IC9bYS16QS1aXS87XG5cbmV4cG9ydCB7IGZvcm1hdCBhcyBmb3JtYXREYXRlIH07XG5cbi8qKlxuICogVGhlIHtAbGluayBmb3JtYXR9IGZ1bmN0aW9uIG9wdGlvbnMuXG4gKi9cblxuLyoqXG4gKiBAbmFtZSBmb3JtYXRcbiAqIEBhbGlhcyBmb3JtYXREYXRlXG4gKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IEZvcm1hdCB0aGUgZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybiB0aGUgZm9ybWF0dGVkIGRhdGUgc3RyaW5nIGluIHRoZSBnaXZlbiBmb3JtYXQuIFRoZSByZXN1bHQgbWF5IHZhcnkgYnkgbG9jYWxlLlxuICpcbiAqID4g4pqg77iPIFBsZWFzZSBub3RlIHRoYXQgdGhlIGBmb3JtYXRgIHRva2VucyBkaWZmZXIgZnJvbSBNb21lbnQuanMgYW5kIG90aGVyIGxpYnJhcmllcy5cbiAqID4gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91bmljb2RlVG9rZW5zLm1kXG4gKlxuICogVGhlIGNoYXJhY3RlcnMgd3JhcHBlZCBiZXR3ZWVuIHR3byBzaW5nbGUgcXVvdGVzIGNoYXJhY3RlcnMgKCcpIGFyZSBlc2NhcGVkLlxuICogVHdvIHNpbmdsZSBxdW90ZXMgaW4gYSByb3csIHdoZXRoZXIgaW5zaWRlIG9yIG91dHNpZGUgYSBxdW90ZWQgc2VxdWVuY2UsIHJlcHJlc2VudCBhICdyZWFsJyBzaW5nbGUgcXVvdGUuXG4gKiAoc2VlIHRoZSBsYXN0IGV4YW1wbGUpXG4gKlxuICogRm9ybWF0IG9mIHRoZSBzdHJpbmcgaXMgYmFzZWQgb24gVW5pY29kZSBUZWNobmljYWwgU3RhbmRhcmQgIzM1OlxuICogaHR0cHM6Ly93d3cudW5pY29kZS5vcmcvcmVwb3J0cy90cjM1L3RyMzUtZGF0ZXMuaHRtbCNEYXRlX0ZpZWxkX1N5bWJvbF9UYWJsZVxuICogd2l0aCBhIGZldyBhZGRpdGlvbnMgKHNlZSBub3RlIDcgYmVsb3cgdGhlIHRhYmxlKS5cbiAqXG4gKiBBY2NlcHRlZCBwYXR0ZXJuczpcbiAqIHwgVW5pdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFBhdHRlcm4gfCBSZXN1bHQgZXhhbXBsZXMgICAgICAgICAgICAgICAgICAgfCBOb3RlcyB8XG4gKiB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tfFxuICogfCBFcmEgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgRy4uR0dHICB8IEFELCBCQyAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IEdHR0cgICAgfCBBbm5vIERvbWluaSwgQmVmb3JlIENocmlzdCAgICAgICAgfCAyICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBHR0dHRyAgIHwgQSwgQiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCBDYWxlbmRhciB5ZWFyICAgICAgICAgICAgICAgICAgIHwgeSAgICAgICB8IDQ0LCAxLCAxOTAwLCAyMDE3ICAgICAgICAgICAgICAgICB8IDUgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHlvICAgICAgfCA0NHRoLCAxc3QsIDB0aCwgMTd0aCAgICAgICAgICAgICAgfCA1LDcgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB5eSAgICAgIHwgNDQsIDAxLCAwMCwgMTcgICAgICAgICAgICAgICAgICAgIHwgNSAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgeXl5ICAgICB8IDA0NCwgMDAxLCAxOTAwLCAyMDE3ICAgICAgICAgICAgICB8IDUgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHl5eXkgICAgfCAwMDQ0LCAwMDAxLCAxOTAwLCAyMDE3ICAgICAgICAgICAgfCA1ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB5eXl5eSAgIHwgLi4uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgMyw1ICAgfFxuICogfCBMb2NhbCB3ZWVrLW51bWJlcmluZyB5ZWFyICAgICAgIHwgWSAgICAgICB8IDQ0LCAxLCAxOTAwLCAyMDE3ICAgICAgICAgICAgICAgICB8IDUgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFlvICAgICAgfCA0NHRoLCAxc3QsIDE5MDB0aCwgMjAxN3RoICAgICAgICAgfCA1LDcgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBZWSAgICAgIHwgNDQsIDAxLCAwMCwgMTcgICAgICAgICAgICAgICAgICAgIHwgNSw4ICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgWVlZICAgICB8IDA0NCwgMDAxLCAxOTAwLCAyMDE3ICAgICAgICAgICAgICB8IDUgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFlZWVkgICAgfCAwMDQ0LCAwMDAxLCAxOTAwLCAyMDE3ICAgICAgICAgICAgfCA1LDggICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBZWVlZWSAgIHwgLi4uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgMyw1ICAgfFxuICogfCBJU08gd2Vlay1udW1iZXJpbmcgeWVhciAgICAgICAgIHwgUiAgICAgICB8IC00MywgMCwgMSwgMTkwMCwgMjAxNyAgICAgICAgICAgICB8IDUsNyAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFJSICAgICAgfCAtNDMsIDAwLCAwMSwgMTkwMCwgMjAxNyAgICAgICAgICAgfCA1LDcgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBSUlIgICAgIHwgLTA0MywgMDAwLCAwMDEsIDE5MDAsIDIwMTcgICAgICAgIHwgNSw3ICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUlJSUiAgICB8IC0wMDQzLCAwMDAwLCAwMDAxLCAxOTAwLCAyMDE3ICAgICB8IDUsNyAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFJSUlJSICAgfCAuLi4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAzLDUsNyB8XG4gKiB8IEV4dGVuZGVkIHllYXIgICAgICAgICAgICAgICAgICAgfCB1ICAgICAgIHwgLTQzLCAwLCAxLCAxOTAwLCAyMDE3ICAgICAgICAgICAgIHwgNSAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgdXUgICAgICB8IC00MywgMDEsIDE5MDAsIDIwMTcgICAgICAgICAgICAgICB8IDUgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHV1dSAgICAgfCAtMDQzLCAwMDEsIDE5MDAsIDIwMTcgICAgICAgICAgICAgfCA1ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB1dXV1ICAgIHwgLTAwNDMsIDAwMDEsIDE5MDAsIDIwMTcgICAgICAgICAgIHwgNSAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgdXV1dXUgICB8IC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDMsNSAgIHxcbiAqIHwgUXVhcnRlciAoZm9ybWF0dGluZykgICAgICAgICAgICB8IFEgICAgICAgfCAxLCAyLCAzLCA0ICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBRbyAgICAgIHwgMXN0LCAybmQsIDNyZCwgNHRoICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUVEgICAgICB8IDAxLCAwMiwgMDMsIDA0ICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFFRUSAgICAgfCBRMSwgUTIsIFEzLCBRNCAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBRUVFRICAgIHwgMXN0IHF1YXJ0ZXIsIDJuZCBxdWFydGVyLCAuLi4gICAgIHwgMiAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUVFRUVEgICB8IDEsIDIsIDMsIDQgICAgICAgICAgICAgICAgICAgICAgICB8IDQgICAgIHxcbiAqIHwgUXVhcnRlciAoc3RhbmQtYWxvbmUpICAgICAgICAgICB8IHEgICAgICAgfCAxLCAyLCAzLCA0ICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBxbyAgICAgIHwgMXN0LCAybmQsIDNyZCwgNHRoICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgcXEgICAgICB8IDAxLCAwMiwgMDMsIDA0ICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHFxcSAgICAgfCBRMSwgUTIsIFEzLCBRNCAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBxcXFxICAgIHwgMXN0IHF1YXJ0ZXIsIDJuZCBxdWFydGVyLCAuLi4gICAgIHwgMiAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgcXFxcXEgICB8IDEsIDIsIDMsIDQgICAgICAgICAgICAgICAgICAgICAgICB8IDQgICAgIHxcbiAqIHwgTW9udGggKGZvcm1hdHRpbmcpICAgICAgICAgICAgICB8IE0gICAgICAgfCAxLCAyLCAuLi4sIDEyICAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBNbyAgICAgIHwgMXN0LCAybmQsIC4uLiwgMTJ0aCAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgTU0gICAgICB8IDAxLCAwMiwgLi4uLCAxMiAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IE1NTSAgICAgfCBKYW4sIEZlYiwgLi4uLCBEZWMgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBNTU1NICAgIHwgSmFudWFyeSwgRmVicnVhcnksIC4uLiwgRGVjZW1iZXIgIHwgMiAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgTU1NTU0gICB8IEosIEYsIC4uLiwgRCAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgTW9udGggKHN0YW5kLWFsb25lKSAgICAgICAgICAgICB8IEwgICAgICAgfCAxLCAyLCAuLi4sIDEyICAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBMbyAgICAgIHwgMXN0LCAybmQsIC4uLiwgMTJ0aCAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgTEwgICAgICB8IDAxLCAwMiwgLi4uLCAxMiAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IExMTCAgICAgfCBKYW4sIEZlYiwgLi4uLCBEZWMgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBMTExMICAgIHwgSmFudWFyeSwgRmVicnVhcnksIC4uLiwgRGVjZW1iZXIgIHwgMiAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgTExMTEwgICB8IEosIEYsIC4uLiwgRCAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgTG9jYWwgd2VlayBvZiB5ZWFyICAgICAgICAgICAgICB8IHcgICAgICAgfCAxLCAyLCAuLi4sIDUzICAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB3byAgICAgIHwgMXN0LCAybmQsIC4uLiwgNTN0aCAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgd3cgICAgICB8IDAxLCAwMiwgLi4uLCA1MyAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgSVNPIHdlZWsgb2YgeWVhciAgICAgICAgICAgICAgICB8IEkgICAgICAgfCAxLCAyLCAuLi4sIDUzICAgICAgICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBJbyAgICAgIHwgMXN0LCAybmQsIC4uLiwgNTN0aCAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgSUkgICAgICB8IDAxLCAwMiwgLi4uLCA1MyAgICAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgRGF5IG9mIG1vbnRoICAgICAgICAgICAgICAgICAgICB8IGQgICAgICAgfCAxLCAyLCAuLi4sIDMxICAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBkbyAgICAgIHwgMXN0LCAybmQsIC4uLiwgMzFzdCAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgZGQgICAgICB8IDAxLCAwMiwgLi4uLCAzMSAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgRGF5IG9mIHllYXIgICAgICAgICAgICAgICAgICAgICB8IEQgICAgICAgfCAxLCAyLCAuLi4sIDM2NSwgMzY2ICAgICAgICAgICAgICAgfCA5ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBEbyAgICAgIHwgMXN0LCAybmQsIC4uLiwgMzY1dGgsIDM2NnRoICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgREQgICAgICB8IDAxLCAwMiwgLi4uLCAzNjUsIDM2NiAgICAgICAgICAgICB8IDkgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IERERCAgICAgfCAwMDEsIDAwMiwgLi4uLCAzNjUsIDM2NiAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBEREREICAgIHwgLi4uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgMyAgICAgfFxuICogfCBEYXkgb2Ygd2VlayAoZm9ybWF0dGluZykgICAgICAgIHwgRS4uRUVFICB8IE1vbiwgVHVlLCBXZWQsIC4uLiwgU3VuICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IEVFRUUgICAgfCBNb25kYXksIFR1ZXNkYXksIC4uLiwgU3VuZGF5ICAgICAgfCAyICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBFRUVFRSAgIHwgTSwgVCwgVywgVCwgRiwgUywgUyAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgRUVFRUVFICB8IE1vLCBUdSwgV2UsIFRoLCBGciwgU2EsIFN1ICAgICAgICB8ICAgICAgIHxcbiAqIHwgSVNPIGRheSBvZiB3ZWVrIChmb3JtYXR0aW5nKSAgICB8IGkgICAgICAgfCAxLCAyLCAzLCAuLi4sIDcgICAgICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBpbyAgICAgIHwgMXN0LCAybmQsIC4uLiwgN3RoICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgaWkgICAgICB8IDAxLCAwMiwgLi4uLCAwNyAgICAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGlpaSAgICAgfCBNb24sIFR1ZSwgV2VkLCAuLi4sIFN1biAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBpaWlpICAgIHwgTW9uZGF5LCBUdWVzZGF5LCAuLi4sIFN1bmRheSAgICAgIHwgMiw3ICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgaWlpaWkgICB8IE0sIFQsIFcsIFQsIEYsIFMsIFMgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGlpaWlpaSAgfCBNbywgVHUsIFdlLCBUaCwgRnIsIFNhLCBTdSAgICAgICAgfCA3ICAgICB8XG4gKiB8IExvY2FsIGRheSBvZiB3ZWVrIChmb3JtYXR0aW5nKSAgfCBlICAgICAgIHwgMiwgMywgNCwgLi4uLCAxICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgZW8gICAgICB8IDJuZCwgM3JkLCAuLi4sIDFzdCAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGVlICAgICAgfCAwMiwgMDMsIC4uLiwgMDEgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBlZWUgICAgIHwgTW9uLCBUdWUsIFdlZCwgLi4uLCBTdW4gICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgZWVlZSAgICB8IE1vbmRheSwgVHVlc2RheSwgLi4uLCBTdW5kYXkgICAgICB8IDIgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGVlZWVlICAgfCBNLCBULCBXLCBULCBGLCBTLCBTICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBlZWVlZWUgIHwgTW8sIFR1LCBXZSwgVGgsIEZyLCBTYSwgU3UgICAgICAgIHwgICAgICAgfFxuICogfCBMb2NhbCBkYXkgb2Ygd2VlayAoc3RhbmQtYWxvbmUpIHwgYyAgICAgICB8IDIsIDMsIDQsIC4uLiwgMSAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNvICAgICAgfCAybmQsIDNyZCwgLi4uLCAxc3QgICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjYyAgICAgIHwgMDIsIDAzLCAuLi4sIDAxICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2NjICAgICB8IE1vbiwgVHVlLCBXZWQsIC4uLiwgU3VuICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNjY2MgICAgfCBNb25kYXksIFR1ZXNkYXksIC4uLiwgU3VuZGF5ICAgICAgfCAyICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjY2NjYyAgIHwgTSwgVCwgVywgVCwgRiwgUywgUyAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2NjY2NjICB8IE1vLCBUdSwgV2UsIFRoLCBGciwgU2EsIFN1ICAgICAgICB8ICAgICAgIHxcbiAqIHwgQU0sIFBNICAgICAgICAgICAgICAgICAgICAgICAgICB8IGEuLmFhICAgfCBBTSwgUE0gICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBhYWEgICAgIHwgYW0sIHBtICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYWFhYSAgICB8IGEubS4sIHAubS4gICAgICAgICAgICAgICAgICAgICAgICB8IDIgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGFhYWFhICAgfCBhLCBwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8IEFNLCBQTSwgbm9vbiwgbWlkbmlnaHQgICAgICAgICAgfCBiLi5iYiAgIHwgQU0sIFBNLCBub29uLCBtaWRuaWdodCAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYmJiICAgICB8IGFtLCBwbSwgbm9vbiwgbWlkbmlnaHQgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGJiYmIgICAgfCBhLm0uLCBwLm0uLCBub29uLCBtaWRuaWdodCAgICAgICAgfCAyICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBiYmJiYiAgIHwgYSwgcCwgbiwgbWkgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCBGbGV4aWJsZSBkYXkgcGVyaW9kICAgICAgICAgICAgIHwgQi4uQkJCICB8IGF0IG5pZ2h0LCBpbiB0aGUgbW9ybmluZywgLi4uICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IEJCQkIgICAgfCBhdCBuaWdodCwgaW4gdGhlIG1vcm5pbmcsIC4uLiAgICAgfCAyICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBCQkJCQiAgIHwgYXQgbmlnaHQsIGluIHRoZSBtb3JuaW5nLCAuLi4gICAgIHwgICAgICAgfFxuICogfCBIb3VyIFsxLTEyXSAgICAgICAgICAgICAgICAgICAgIHwgaCAgICAgICB8IDEsIDIsIC4uLiwgMTEsIDEyICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGhvICAgICAgfCAxc3QsIDJuZCwgLi4uLCAxMXRoLCAxMnRoICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBoaCAgICAgIHwgMDEsIDAyLCAuLi4sIDExLCAxMiAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCBIb3VyIFswLTIzXSAgICAgICAgICAgICAgICAgICAgIHwgSCAgICAgICB8IDAsIDEsIDIsIC4uLiwgMjMgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IEhvICAgICAgfCAwdGgsIDFzdCwgMm5kLCAuLi4sIDIzcmQgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBISCAgICAgIHwgMDAsIDAxLCAwMiwgLi4uLCAyMyAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCBIb3VyIFswLTExXSAgICAgICAgICAgICAgICAgICAgIHwgSyAgICAgICB8IDEsIDIsIC4uLiwgMTEsIDAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IEtvICAgICAgfCAxc3QsIDJuZCwgLi4uLCAxMXRoLCAwdGggICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBLSyAgICAgIHwgMDEsIDAyLCAuLi4sIDExLCAwMCAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCBIb3VyIFsxLTI0XSAgICAgICAgICAgICAgICAgICAgIHwgayAgICAgICB8IDI0LCAxLCAyLCAuLi4sIDIzICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGtvICAgICAgfCAyNHRoLCAxc3QsIDJuZCwgLi4uLCAyM3JkICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBrayAgICAgIHwgMjQsIDAxLCAwMiwgLi4uLCAyMyAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCBNaW51dGUgICAgICAgICAgICAgICAgICAgICAgICAgIHwgbSAgICAgICB8IDAsIDEsIC4uLiwgNTkgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IG1vICAgICAgfCAwdGgsIDFzdCwgLi4uLCA1OXRoICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBtbSAgICAgIHwgMDAsIDAxLCAuLi4sIDU5ICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCBTZWNvbmQgICAgICAgICAgICAgICAgICAgICAgICAgIHwgcyAgICAgICB8IDAsIDEsIC4uLiwgNTkgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHNvICAgICAgfCAwdGgsIDFzdCwgLi4uLCA1OXRoICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBzcyAgICAgIHwgMDAsIDAxLCAuLi4sIDU5ICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCBGcmFjdGlvbiBvZiBzZWNvbmQgICAgICAgICAgICAgIHwgUyAgICAgICB8IDAsIDEsIC4uLiwgOSAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFNTICAgICAgfCAwMCwgMDEsIC4uLiwgOTkgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBTU1MgICAgIHwgMDAwLCAwMDEsIC4uLiwgOTk5ICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgU1NTUyAgICB8IC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDMgICAgIHxcbiAqIHwgVGltZXpvbmUgKElTTy04NjAxIHcvIFopICAgICAgICB8IFggICAgICAgfCAtMDgsICswNTMwLCBaICAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBYWCAgICAgIHwgLTA4MDAsICswNTMwLCBaICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgWFhYICAgICB8IC0wODowMCwgKzA1OjMwLCBaICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFhYWFggICAgfCAtMDgwMCwgKzA1MzAsIFosICsxMjM0NTYgICAgICAgICAgfCAyICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBYWFhYWCAgIHwgLTA4OjAwLCArMDU6MzAsIFosICsxMjozNDo1NiAgICAgIHwgICAgICAgfFxuICogfCBUaW1lem9uZSAoSVNPLTg2MDEgdy9vIFopICAgICAgIHwgeCAgICAgICB8IC0wOCwgKzA1MzAsICswMCAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHh4ICAgICAgfCAtMDgwMCwgKzA1MzAsICswMDAwICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB4eHggICAgIHwgLTA4OjAwLCArMDU6MzAsICswMDowMCAgICAgICAgICAgIHwgMiAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgeHh4eCAgICB8IC0wODAwLCArMDUzMCwgKzAwMDAsICsxMjM0NTYgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHh4eHh4ICAgfCAtMDg6MDAsICswNTozMCwgKzAwOjAwLCArMTI6MzQ6NTYgfCAgICAgICB8XG4gKiB8IFRpbWV6b25lIChHTVQpICAgICAgICAgICAgICAgICAgfCBPLi4uT09PIHwgR01ULTgsIEdNVCs1OjMwLCBHTVQrMCAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgT09PTyAgICB8IEdNVC0wODowMCwgR01UKzA1OjMwLCBHTVQrMDA6MDAgICB8IDIgICAgIHxcbiAqIHwgVGltZXpvbmUgKHNwZWNpZmljIG5vbi1sb2NhdC4pICB8IHouLi56enogfCBHTVQtOCwgR01UKzU6MzAsIEdNVCswICAgICAgICAgICAgfCA2ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB6enp6ICAgIHwgR01ULTA4OjAwLCBHTVQrMDU6MzAsIEdNVCswMDowMCAgIHwgMiw2ICAgfFxuICogfCBTZWNvbmRzIHRpbWVzdGFtcCAgICAgICAgICAgICAgIHwgdCAgICAgICB8IDUxMjk2OTUyMCAgICAgICAgICAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHR0ICAgICAgfCAuLi4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAzLDcgICB8XG4gKiB8IE1pbGxpc2Vjb25kcyB0aW1lc3RhbXAgICAgICAgICAgfCBUICAgICAgIHwgNTEyOTY5NTIwOTAwICAgICAgICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgVFQgICAgICB8IC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDMsNyAgIHxcbiAqIHwgTG9uZyBsb2NhbGl6ZWQgZGF0ZSAgICAgICAgICAgICB8IFAgICAgICAgfCAwNC8yOS8xNDUzICAgICAgICAgICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBQUCAgICAgIHwgQXByIDI5LCAxNDUzICAgICAgICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUFBQICAgICB8IEFwcmlsIDI5dGgsIDE0NTMgICAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFBQUFAgICAgfCBGcmlkYXksIEFwcmlsIDI5dGgsIDE0NTMgICAgICAgICAgfCAyLDcgICB8XG4gKiB8IExvbmcgbG9jYWxpemVkIHRpbWUgICAgICAgICAgICAgfCBwICAgICAgIHwgMTI6MDAgQU0gICAgICAgICAgICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgcHAgICAgICB8IDEyOjAwOjAwIEFNICAgICAgICAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHBwcCAgICAgfCAxMjowMDowMCBBTSBHTVQrMiAgICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBwcHBwICAgIHwgMTI6MDA6MDAgQU0gR01UKzAyOjAwICAgICAgICAgICAgIHwgMiw3ICAgfFxuICogfCBDb21iaW5hdGlvbiBvZiBkYXRlIGFuZCB0aW1lICAgIHwgUHAgICAgICB8IDA0LzI5LzE0NTMsIDEyOjAwIEFNICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFBQcHAgICAgfCBBcHIgMjksIDE0NTMsIDEyOjAwOjAwIEFNICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBQUFBwcHAgIHwgQXByaWwgMjl0aCwgMTQ1MyBhdCAuLi4gICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUFBQUHBwcHB8IEZyaWRheSwgQXByaWwgMjl0aCwgMTQ1MyBhdCAuLi4gICB8IDIsNyAgIHxcbiAqIE5vdGVzOlxuICogMS4gXCJGb3JtYXR0aW5nXCIgdW5pdHMgKGUuZy4gZm9ybWF0dGluZyBxdWFydGVyKSBpbiB0aGUgZGVmYXVsdCBlbi1VUyBsb2NhbGVcbiAqICAgIGFyZSB0aGUgc2FtZSBhcyBcInN0YW5kLWFsb25lXCIgdW5pdHMsIGJ1dCBhcmUgZGlmZmVyZW50IGluIHNvbWUgbGFuZ3VhZ2VzLlxuICogICAgXCJGb3JtYXR0aW5nXCIgdW5pdHMgYXJlIGRlY2xpbmVkIGFjY29yZGluZyB0byB0aGUgcnVsZXMgb2YgdGhlIGxhbmd1YWdlXG4gKiAgICBpbiB0aGUgY29udGV4dCBvZiBhIGRhdGUuIFwiU3RhbmQtYWxvbmVcIiB1bml0cyBhcmUgYWx3YXlzIG5vbWluYXRpdmUgc2luZ3VsYXI6XG4gKlxuICogICAgYGZvcm1hdChuZXcgRGF0ZSgyMDE3LCAxMCwgNiksICdkbyBMTExMJywge2xvY2FsZTogY3N9KSAvLz0+ICc2LiBsaXN0b3BhZCdgXG4gKlxuICogICAgYGZvcm1hdChuZXcgRGF0ZSgyMDE3LCAxMCwgNiksICdkbyBNTU1NJywge2xvY2FsZTogY3N9KSAvLz0+ICc2LiBsaXN0b3BhZHUnYFxuICpcbiAqIDIuIEFueSBzZXF1ZW5jZSBvZiB0aGUgaWRlbnRpY2FsIGxldHRlcnMgaXMgYSBwYXR0ZXJuLCB1bmxlc3MgaXQgaXMgZXNjYXBlZCBieVxuICogICAgdGhlIHNpbmdsZSBxdW90ZSBjaGFyYWN0ZXJzIChzZWUgYmVsb3cpLlxuICogICAgSWYgdGhlIHNlcXVlbmNlIGlzIGxvbmdlciB0aGFuIGxpc3RlZCBpbiB0YWJsZSAoZS5nLiBgRUVFRUVFRUVFRUVgKVxuICogICAgdGhlIG91dHB1dCB3aWxsIGJlIHRoZSBzYW1lIGFzIGRlZmF1bHQgcGF0dGVybiBmb3IgdGhpcyB1bml0LCB1c3VhbGx5XG4gKiAgICB0aGUgbG9uZ2VzdCBvbmUgKGluIGNhc2Ugb2YgSVNPIHdlZWtkYXlzLCBgRUVFRWApLiBEZWZhdWx0IHBhdHRlcm5zIGZvciB1bml0c1xuICogICAgYXJlIG1hcmtlZCB3aXRoIFwiMlwiIGluIHRoZSBsYXN0IGNvbHVtbiBvZiB0aGUgdGFibGUuXG4gKlxuICogICAgYGZvcm1hdChuZXcgRGF0ZSgyMDE3LCAxMCwgNiksICdNTU0nKSAvLz0+ICdOb3YnYFxuICpcbiAqICAgIGBmb3JtYXQobmV3IERhdGUoMjAxNywgMTAsIDYpLCAnTU1NTScpIC8vPT4gJ05vdmVtYmVyJ2BcbiAqXG4gKiAgICBgZm9ybWF0KG5ldyBEYXRlKDIwMTcsIDEwLCA2KSwgJ01NTU1NJykgLy89PiAnTidgXG4gKlxuICogICAgYGZvcm1hdChuZXcgRGF0ZSgyMDE3LCAxMCwgNiksICdNTU1NTU0nKSAvLz0+ICdOb3ZlbWJlcidgXG4gKlxuICogICAgYGZvcm1hdChuZXcgRGF0ZSgyMDE3LCAxMCwgNiksICdNTU1NTU1NJykgLy89PiAnTm92ZW1iZXInYFxuICpcbiAqIDMuIFNvbWUgcGF0dGVybnMgY291bGQgYmUgdW5saW1pdGVkIGxlbmd0aCAoc3VjaCBhcyBgeXl5eXl5eXlgKS5cbiAqICAgIFRoZSBvdXRwdXQgd2lsbCBiZSBwYWRkZWQgd2l0aCB6ZXJvcyB0byBtYXRjaCB0aGUgbGVuZ3RoIG9mIHRoZSBwYXR0ZXJuLlxuICpcbiAqICAgIGBmb3JtYXQobmV3IERhdGUoMjAxNywgMTAsIDYpLCAneXl5eXl5eXknKSAvLz0+ICcwMDAwMjAxNydgXG4gKlxuICogNC4gYFFRUVFRYCBhbmQgYHFxcXFxYCBjb3VsZCBiZSBub3Qgc3RyaWN0bHkgbnVtZXJpY2FsIGluIHNvbWUgbG9jYWxlcy5cbiAqICAgIFRoZXNlIHRva2VucyByZXByZXNlbnQgdGhlIHNob3J0ZXN0IGZvcm0gb2YgdGhlIHF1YXJ0ZXIuXG4gKlxuICogNS4gVGhlIG1haW4gZGlmZmVyZW5jZSBiZXR3ZWVuIGB5YCBhbmQgYHVgIHBhdHRlcm5zIGFyZSBCLkMuIHllYXJzOlxuICpcbiAqICAgIHwgWWVhciB8IGB5YCB8IGB1YCB8XG4gKiAgICB8LS0tLS0tfC0tLS0tfC0tLS0tfFxuICogICAgfCBBQyAxIHwgICAxIHwgICAxIHxcbiAqICAgIHwgQkMgMSB8ICAgMSB8ICAgMCB8XG4gKiAgICB8IEJDIDIgfCAgIDIgfCAgLTEgfFxuICpcbiAqICAgIEFsc28gYHl5YCBhbHdheXMgcmV0dXJucyB0aGUgbGFzdCB0d28gZGlnaXRzIG9mIGEgeWVhcixcbiAqICAgIHdoaWxlIGB1dWAgcGFkcyBzaW5nbGUgZGlnaXQgeWVhcnMgdG8gMiBjaGFyYWN0ZXJzIGFuZCByZXR1cm5zIG90aGVyIHllYXJzIHVuY2hhbmdlZDpcbiAqXG4gKiAgICB8IFllYXIgfCBgeXlgIHwgYHV1YCB8XG4gKiAgICB8LS0tLS0tfC0tLS0tLXwtLS0tLS18XG4gKiAgICB8IDEgICAgfCAgIDAxIHwgICAwMSB8XG4gKiAgICB8IDE0ICAgfCAgIDE0IHwgICAxNCB8XG4gKiAgICB8IDM3NiAgfCAgIDc2IHwgIDM3NiB8XG4gKiAgICB8IDE0NTMgfCAgIDUzIHwgMTQ1MyB8XG4gKlxuICogICAgVGhlIHNhbWUgZGlmZmVyZW5jZSBpcyB0cnVlIGZvciBsb2NhbCBhbmQgSVNPIHdlZWstbnVtYmVyaW5nIHllYXJzIChgWWAgYW5kIGBSYCksXG4gKiAgICBleGNlcHQgbG9jYWwgd2Vlay1udW1iZXJpbmcgeWVhcnMgYXJlIGRlcGVuZGVudCBvbiBgb3B0aW9ucy53ZWVrU3RhcnRzT25gXG4gKiAgICBhbmQgYG9wdGlvbnMuZmlyc3RXZWVrQ29udGFpbnNEYXRlYCAoY29tcGFyZSBbZ2V0SVNPV2Vla1llYXJdKGh0dHBzOi8vZGF0ZS1mbnMub3JnL2RvY3MvZ2V0SVNPV2Vla1llYXIpXG4gKiAgICBhbmQgW2dldFdlZWtZZWFyXShodHRwczovL2RhdGUtZm5zLm9yZy9kb2NzL2dldFdlZWtZZWFyKSkuXG4gKlxuICogNi4gU3BlY2lmaWMgbm9uLWxvY2F0aW9uIHRpbWV6b25lcyBhcmUgY3VycmVudGx5IHVuYXZhaWxhYmxlIGluIGBkYXRlLWZuc2AsXG4gKiAgICBzbyByaWdodCBub3cgdGhlc2UgdG9rZW5zIGZhbGwgYmFjayB0byBHTVQgdGltZXpvbmVzLlxuICpcbiAqIDcuIFRoZXNlIHBhdHRlcm5zIGFyZSBub3QgaW4gdGhlIFVuaWNvZGUgVGVjaG5pY2FsIFN0YW5kYXJkICMzNTpcbiAqICAgIC0gYGlgOiBJU08gZGF5IG9mIHdlZWtcbiAqICAgIC0gYElgOiBJU08gd2VlayBvZiB5ZWFyXG4gKiAgICAtIGBSYDogSVNPIHdlZWstbnVtYmVyaW5nIHllYXJcbiAqICAgIC0gYHRgOiBzZWNvbmRzIHRpbWVzdGFtcFxuICogICAgLSBgVGA6IG1pbGxpc2Vjb25kcyB0aW1lc3RhbXBcbiAqICAgIC0gYG9gOiBvcmRpbmFsIG51bWJlciBtb2RpZmllclxuICogICAgLSBgUGA6IGxvbmcgbG9jYWxpemVkIGRhdGVcbiAqICAgIC0gYHBgOiBsb25nIGxvY2FsaXplZCB0aW1lXG4gKlxuICogOC4gYFlZYCBhbmQgYFlZWVlgIHRva2VucyByZXByZXNlbnQgd2Vlay1udW1iZXJpbmcgeWVhcnMgYnV0IHRoZXkgYXJlIG9mdGVuIGNvbmZ1c2VkIHdpdGggeWVhcnMuXG4gKiAgICBZb3Ugc2hvdWxkIGVuYWJsZSBgb3B0aW9ucy51c2VBZGRpdGlvbmFsV2Vla1llYXJUb2tlbnNgIHRvIHVzZSB0aGVtLiBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VuaWNvZGVUb2tlbnMubWRcbiAqXG4gKiA5LiBgRGAgYW5kIGBERGAgdG9rZW5zIHJlcHJlc2VudCBkYXlzIG9mIHRoZSB5ZWFyIGJ1dCB0aGV5IGFyZSBvZnRlbiBjb25mdXNlZCB3aXRoIGRheXMgb2YgdGhlIG1vbnRoLlxuICogICAgWW91IHNob3VsZCBlbmFibGUgYG9wdGlvbnMudXNlQWRkaXRpb25hbERheU9mWWVhclRva2Vuc2AgdG8gdXNlIHRoZW0uIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdW5pY29kZVRva2Vucy5tZFxuICpcbiAqIEB0eXBlUGFyYW0gRGF0ZVR5cGUgLSBUaGUgYERhdGVgIHR5cGUsIHRoZSBmdW5jdGlvbiBvcGVyYXRlcyBvbi4gR2V0cyBpbmZlcnJlZCBmcm9tIHBhc3NlZCBhcmd1bWVudHMuIEFsbG93cyB0byB1c2UgZXh0ZW5zaW9ucyBsaWtlIFtgVVRDRGF0ZWBdKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy91dGMpLlxuICpcbiAqIEBwYXJhbSBkYXRlIC0gVGhlIG9yaWdpbmFsIGRhdGVcbiAqIEBwYXJhbSBmb3JtYXQgLSBUaGUgc3RyaW5nIG9mIHRva2Vuc1xuICogQHBhcmFtIG9wdGlvbnMgLSBBbiBvYmplY3Qgd2l0aCBvcHRpb25zXG4gKlxuICogQHJldHVybnMgVGhlIGZvcm1hdHRlZCBkYXRlIHN0cmluZ1xuICpcbiAqIEB0aHJvd3MgYGRhdGVgIG11c3Qgbm90IGJlIEludmFsaWQgRGF0ZVxuICogQHRocm93cyBgb3B0aW9ucy5sb2NhbGVgIG11c3QgY29udGFpbiBgbG9jYWxpemVgIHByb3BlcnR5XG4gKiBAdGhyb3dzIGBvcHRpb25zLmxvY2FsZWAgbXVzdCBjb250YWluIGBmb3JtYXRMb25nYCBwcm9wZXJ0eVxuICogQHRocm93cyB1c2UgYHl5eXlgIGluc3RlYWQgb2YgYFlZWVlgIGZvciBmb3JtYXR0aW5nIHllYXJzIHVzaW5nIFtmb3JtYXQgcHJvdmlkZWRdIHRvIHRoZSBpbnB1dCBbaW5wdXQgcHJvdmlkZWRdOyBzZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VuaWNvZGVUb2tlbnMubWRcbiAqIEB0aHJvd3MgdXNlIGB5eWAgaW5zdGVhZCBvZiBgWVlgIGZvciBmb3JtYXR0aW5nIHllYXJzIHVzaW5nIFtmb3JtYXQgcHJvdmlkZWRdIHRvIHRoZSBpbnB1dCBbaW5wdXQgcHJvdmlkZWRdOyBzZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VuaWNvZGVUb2tlbnMubWRcbiAqIEB0aHJvd3MgdXNlIGBkYCBpbnN0ZWFkIG9mIGBEYCBmb3IgZm9ybWF0dGluZyBkYXlzIG9mIHRoZSBtb250aCB1c2luZyBbZm9ybWF0IHByb3ZpZGVkXSB0byB0aGUgaW5wdXQgW2lucHV0IHByb3ZpZGVkXTsgc2VlOiBodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91bmljb2RlVG9rZW5zLm1kXG4gKiBAdGhyb3dzIHVzZSBgZGRgIGluc3RlYWQgb2YgYEREYCBmb3IgZm9ybWF0dGluZyBkYXlzIG9mIHRoZSBtb250aCB1c2luZyBbZm9ybWF0IHByb3ZpZGVkXSB0byB0aGUgaW5wdXQgW2lucHV0IHByb3ZpZGVkXTsgc2VlOiBodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91bmljb2RlVG9rZW5zLm1kXG4gKiBAdGhyb3dzIGZvcm1hdCBzdHJpbmcgY29udGFpbnMgYW4gdW5lc2NhcGVkIGxhdGluIGFscGhhYmV0IGNoYXJhY3RlclxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBSZXByZXNlbnQgMTEgRmVicnVhcnkgMjAxNCBpbiBtaWRkbGUtZW5kaWFuIGZvcm1hdDpcbiAqIGNvbnN0IHJlc3VsdCA9IGZvcm1hdChuZXcgRGF0ZSgyMDE0LCAxLCAxMSksICdNTS9kZC95eXl5JylcbiAqIC8vPT4gJzAyLzExLzIwMTQnXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFJlcHJlc2VudCAyIEp1bHkgMjAxNCBpbiBFc3BlcmFudG86XG4gKiBpbXBvcnQgeyBlb0xvY2FsZSB9IGZyb20gJ2RhdGUtZm5zL2xvY2FsZS9lbydcbiAqIGNvbnN0IHJlc3VsdCA9IGZvcm1hdChuZXcgRGF0ZSgyMDE0LCA2LCAyKSwgXCJkbyAnZGUnIE1NTU0geXl5eVwiLCB7XG4gKiAgIGxvY2FsZTogZW9Mb2NhbGVcbiAqIH0pXG4gKiAvLz0+ICcyLWEgZGUganVsaW8gMjAxNCdcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gRXNjYXBlIHN0cmluZyBieSBzaW5nbGUgcXVvdGUgY2hhcmFjdGVyczpcbiAqIGNvbnN0IHJlc3VsdCA9IGZvcm1hdChuZXcgRGF0ZSgyMDE0LCA2LCAyLCAxNSksIFwiaCAnbycnY2xvY2snXCIpXG4gKiAvLz0+IFwiMyBvJ2Nsb2NrXCJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdChkYXRlLCBmb3JtYXRTdHIsIG9wdGlvbnMpIHtcbiAgY29uc3QgZGVmYXVsdE9wdGlvbnMgPSBnZXREZWZhdWx0T3B0aW9ucygpO1xuICBjb25zdCBsb2NhbGUgPSBvcHRpb25zPy5sb2NhbGUgPz8gZGVmYXVsdE9wdGlvbnMubG9jYWxlID8/IGRlZmF1bHRMb2NhbGU7XG5cbiAgY29uc3QgZmlyc3RXZWVrQ29udGFpbnNEYXRlID1cbiAgICBvcHRpb25zPy5maXJzdFdlZWtDb250YWluc0RhdGUgPz9cbiAgICBvcHRpb25zPy5sb2NhbGU/Lm9wdGlvbnM/LmZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA/P1xuICAgIGRlZmF1bHRPcHRpb25zLmZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA/P1xuICAgIGRlZmF1bHRPcHRpb25zLmxvY2FsZT8ub3B0aW9ucz8uZmlyc3RXZWVrQ29udGFpbnNEYXRlID8/XG4gICAgMTtcblxuICBjb25zdCB3ZWVrU3RhcnRzT24gPVxuICAgIG9wdGlvbnM/LndlZWtTdGFydHNPbiA/P1xuICAgIG9wdGlvbnM/LmxvY2FsZT8ub3B0aW9ucz8ud2Vla1N0YXJ0c09uID8/XG4gICAgZGVmYXVsdE9wdGlvbnMud2Vla1N0YXJ0c09uID8/XG4gICAgZGVmYXVsdE9wdGlvbnMubG9jYWxlPy5vcHRpb25zPy53ZWVrU3RhcnRzT24gPz9cbiAgICAwO1xuXG4gIGNvbnN0IG9yaWdpbmFsRGF0ZSA9IHRvRGF0ZShkYXRlKTtcblxuICBpZiAoIWlzVmFsaWQob3JpZ2luYWxEYXRlKSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiSW52YWxpZCB0aW1lIHZhbHVlXCIpO1xuICB9XG5cbiAgbGV0IHBhcnRzID0gZm9ybWF0U3RyXG4gICAgLm1hdGNoKGxvbmdGb3JtYXR0aW5nVG9rZW5zUmVnRXhwKVxuICAgIC5tYXAoKHN1YnN0cmluZykgPT4ge1xuICAgICAgY29uc3QgZmlyc3RDaGFyYWN0ZXIgPSBzdWJzdHJpbmdbMF07XG4gICAgICBpZiAoZmlyc3RDaGFyYWN0ZXIgPT09IFwicFwiIHx8IGZpcnN0Q2hhcmFjdGVyID09PSBcIlBcIikge1xuICAgICAgICBjb25zdCBsb25nRm9ybWF0dGVyID0gbG9uZ0Zvcm1hdHRlcnNbZmlyc3RDaGFyYWN0ZXJdO1xuICAgICAgICByZXR1cm4gbG9uZ0Zvcm1hdHRlcihzdWJzdHJpbmcsIGxvY2FsZS5mb3JtYXRMb25nKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzdWJzdHJpbmc7XG4gICAgfSlcbiAgICAuam9pbihcIlwiKVxuICAgIC5tYXRjaChmb3JtYXR0aW5nVG9rZW5zUmVnRXhwKVxuICAgIC5tYXAoKHN1YnN0cmluZykgPT4ge1xuICAgICAgLy8gUmVwbGFjZSB0d28gc2luZ2xlIHF1b3RlIGNoYXJhY3RlcnMgd2l0aCBvbmUgc2luZ2xlIHF1b3RlIGNoYXJhY3RlclxuICAgICAgaWYgKHN1YnN0cmluZyA9PT0gXCInJ1wiKSB7XG4gICAgICAgIHJldHVybiB7IGlzVG9rZW46IGZhbHNlLCB2YWx1ZTogXCInXCIgfTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZmlyc3RDaGFyYWN0ZXIgPSBzdWJzdHJpbmdbMF07XG4gICAgICBpZiAoZmlyc3RDaGFyYWN0ZXIgPT09IFwiJ1wiKSB7XG4gICAgICAgIHJldHVybiB7IGlzVG9rZW46IGZhbHNlLCB2YWx1ZTogY2xlYW5Fc2NhcGVkU3RyaW5nKHN1YnN0cmluZykgfTtcbiAgICAgIH1cblxuICAgICAgaWYgKGZvcm1hdHRlcnNbZmlyc3RDaGFyYWN0ZXJdKSB7XG4gICAgICAgIHJldHVybiB7IGlzVG9rZW46IHRydWUsIHZhbHVlOiBzdWJzdHJpbmcgfTtcbiAgICAgIH1cblxuICAgICAgaWYgKGZpcnN0Q2hhcmFjdGVyLm1hdGNoKHVuZXNjYXBlZExhdGluQ2hhcmFjdGVyUmVnRXhwKSkge1xuICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcbiAgICAgICAgICBcIkZvcm1hdCBzdHJpbmcgY29udGFpbnMgYW4gdW5lc2NhcGVkIGxhdGluIGFscGhhYmV0IGNoYXJhY3RlciBgXCIgK1xuICAgICAgICAgICAgZmlyc3RDaGFyYWN0ZXIgK1xuICAgICAgICAgICAgXCJgXCIsXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7IGlzVG9rZW46IGZhbHNlLCB2YWx1ZTogc3Vic3RyaW5nIH07XG4gICAgfSk7XG5cbiAgLy8gaW52b2tlIGxvY2FsaXplIHByZXByb2Nlc3NvciAob25seSBmb3IgZnJlbmNoIGxvY2FsZXMgYXQgdGhlIG1vbWVudClcbiAgaWYgKGxvY2FsZS5sb2NhbGl6ZS5wcmVwcm9jZXNzb3IpIHtcbiAgICBwYXJ0cyA9IGxvY2FsZS5sb2NhbGl6ZS5wcmVwcm9jZXNzb3Iob3JpZ2luYWxEYXRlLCBwYXJ0cyk7XG4gIH1cblxuICBjb25zdCBmb3JtYXR0ZXJPcHRpb25zID0ge1xuICAgIGZpcnN0V2Vla0NvbnRhaW5zRGF0ZSxcbiAgICB3ZWVrU3RhcnRzT24sXG4gICAgbG9jYWxlLFxuICB9O1xuXG4gIHJldHVybiBwYXJ0c1xuICAgIC5tYXAoKHBhcnQpID0+IHtcbiAgICAgIGlmICghcGFydC5pc1Rva2VuKSByZXR1cm4gcGFydC52YWx1ZTtcblxuICAgICAgY29uc3QgdG9rZW4gPSBwYXJ0LnZhbHVlO1xuXG4gICAgICBpZiAoXG4gICAgICAgICghb3B0aW9ucz8udXNlQWRkaXRpb25hbFdlZWtZZWFyVG9rZW5zICYmXG4gICAgICAgICAgaXNQcm90ZWN0ZWRXZWVrWWVhclRva2VuKHRva2VuKSkgfHxcbiAgICAgICAgKCFvcHRpb25zPy51c2VBZGRpdGlvbmFsRGF5T2ZZZWFyVG9rZW5zICYmXG4gICAgICAgICAgaXNQcm90ZWN0ZWREYXlPZlllYXJUb2tlbih0b2tlbikpXG4gICAgICApIHtcbiAgICAgICAgd2Fybk9yVGhyb3dQcm90ZWN0ZWRFcnJvcih0b2tlbiwgZm9ybWF0U3RyLCBTdHJpbmcoZGF0ZSkpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBmb3JtYXR0ZXIgPSBmb3JtYXR0ZXJzW3Rva2VuWzBdXTtcbiAgICAgIHJldHVybiBmb3JtYXR0ZXIob3JpZ2luYWxEYXRlLCB0b2tlbiwgbG9jYWxlLmxvY2FsaXplLCBmb3JtYXR0ZXJPcHRpb25zKTtcbiAgICB9KVxuICAgIC5qb2luKFwiXCIpO1xufVxuXG5mdW5jdGlvbiBjbGVhbkVzY2FwZWRTdHJpbmcoaW5wdXQpIHtcbiAgY29uc3QgbWF0Y2hlZCA9IGlucHV0Lm1hdGNoKGVzY2FwZWRTdHJpbmdSZWdFeHApO1xuXG4gIGlmICghbWF0Y2hlZCkge1xuICAgIHJldHVybiBpbnB1dDtcbiAgfVxuXG4gIHJldHVybiBtYXRjaGVkWzFdLnJlcGxhY2UoZG91YmxlUXVvdGVSZWdFeHAsIFwiJ1wiKTtcbn1cblxuLy8gRmFsbGJhY2sgZm9yIG1vZHVsYXJpemVkIGltcG9ydHM6XG5leHBvcnQgZGVmYXVsdCBmb3JtYXQ7XG4iLCJcbiAgICAgIGltcG9ydCBBUEkgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIjtcbiAgICAgIGltcG9ydCBkb21BUEkgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZURvbUFQSS5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydEZuIGZyb20gXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0QnlTZWxlY3Rvci5qc1wiO1xuICAgICAgaW1wb3J0IHNldEF0dHJpYnV0ZXMgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRTdHlsZUVsZW1lbnQgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanNcIjtcbiAgICAgIGltcG9ydCBzdHlsZVRhZ1RyYW5zZm9ybUZuIGZyb20gXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVUYWdUcmFuc2Zvcm0uanNcIjtcbiAgICAgIGltcG9ydCBjb250ZW50LCAqIGFzIG5hbWVkRXhwb3J0IGZyb20gXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL3N0eWxlcy5jc3NcIjtcbiAgICAgIFxuICAgICAgXG5cbnZhciBvcHRpb25zID0ge307XG5cbm9wdGlvbnMuc3R5bGVUYWdUcmFuc2Zvcm0gPSBzdHlsZVRhZ1RyYW5zZm9ybUZuO1xub3B0aW9ucy5zZXRBdHRyaWJ1dGVzID0gc2V0QXR0cmlidXRlcztcbm9wdGlvbnMuaW5zZXJ0ID0gaW5zZXJ0Rm4uYmluZChudWxsLCBcImhlYWRcIik7XG5vcHRpb25zLmRvbUFQSSA9IGRvbUFQSTtcbm9wdGlvbnMuaW5zZXJ0U3R5bGVFbGVtZW50ID0gaW5zZXJ0U3R5bGVFbGVtZW50O1xuXG52YXIgdXBkYXRlID0gQVBJKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cblxuZXhwb3J0ICogZnJvbSBcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vc3R5bGVzLmNzc1wiO1xuICAgICAgIGV4cG9ydCBkZWZhdWx0IGNvbnRlbnQgJiYgY29udGVudC5sb2NhbHMgPyBjb250ZW50LmxvY2FscyA6IHVuZGVmaW5lZDtcbiIsIi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IEZpcmViYXNlIGNvbnN0YW50cy4gIFNvbWUgb2YgdGhlc2UgKEBkZWZpbmVzKSBjYW4gYmUgb3ZlcnJpZGRlbiBhdCBjb21waWxlLXRpbWUuXHJcbiAqL1xyXG5jb25zdCBDT05TVEFOVFMgPSB7XHJcbiAgICAvKipcclxuICAgICAqIEBkZWZpbmUge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBpcyB0aGUgY2xpZW50IE5vZGUuanMgU0RLLlxyXG4gICAgICovXHJcbiAgICBOT0RFX0NMSUVOVDogZmFsc2UsXHJcbiAgICAvKipcclxuICAgICAqIEBkZWZpbmUge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBpcyB0aGUgQWRtaW4gTm9kZS5qcyBTREsuXHJcbiAgICAgKi9cclxuICAgIE5PREVfQURNSU46IGZhbHNlLFxyXG4gICAgLyoqXHJcbiAgICAgKiBGaXJlYmFzZSBTREsgVmVyc2lvblxyXG4gICAgICovXHJcbiAgICBTREtfVkVSU0lPTjogJyR7SlNDT1JFX1ZFUlNJT059J1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhyb3dzIGFuIGVycm9yIGlmIHRoZSBwcm92aWRlZCBhc3NlcnRpb24gaXMgZmFsc3lcclxuICovXHJcbmNvbnN0IGFzc2VydCA9IGZ1bmN0aW9uIChhc3NlcnRpb24sIG1lc3NhZ2UpIHtcclxuICAgIGlmICghYXNzZXJ0aW9uKSB7XHJcbiAgICAgICAgdGhyb3cgYXNzZXJ0aW9uRXJyb3IobWVzc2FnZSk7XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGFuIEVycm9yIG9iamVjdCBzdWl0YWJsZSBmb3IgdGhyb3dpbmcuXHJcbiAqL1xyXG5jb25zdCBhc3NlcnRpb25FcnJvciA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XHJcbiAgICByZXR1cm4gbmV3IEVycm9yKCdGaXJlYmFzZSBEYXRhYmFzZSAoJyArXHJcbiAgICAgICAgQ09OU1RBTlRTLlNES19WRVJTSU9OICtcclxuICAgICAgICAnKSBJTlRFUk5BTCBBU1NFUlQgRkFJTEVEOiAnICtcclxuICAgICAgICBtZXNzYWdlKTtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3Qgc3RyaW5nVG9CeXRlQXJyYXkkMSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIC8vIFRPRE8odXNlcik6IFVzZSBuYXRpdmUgaW1wbGVtZW50YXRpb25zIGlmL3doZW4gYXZhaWxhYmxlXHJcbiAgICBjb25zdCBvdXQgPSBbXTtcclxuICAgIGxldCBwID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IGMgPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgICBpZiAoYyA8IDEyOCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IGM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gNikgfCAxOTI7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKChjICYgMHhmYzAwKSA9PT0gMHhkODAwICYmXHJcbiAgICAgICAgICAgIGkgKyAxIDwgc3RyLmxlbmd0aCAmJlxyXG4gICAgICAgICAgICAoc3RyLmNoYXJDb2RlQXQoaSArIDEpICYgMHhmYzAwKSA9PT0gMHhkYzAwKSB7XHJcbiAgICAgICAgICAgIC8vIFN1cnJvZ2F0ZSBQYWlyXHJcbiAgICAgICAgICAgIGMgPSAweDEwMDAwICsgKChjICYgMHgwM2ZmKSA8PCAxMCkgKyAoc3RyLmNoYXJDb2RlQXQoKytpKSAmIDB4MDNmZik7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTgpIHwgMjQwO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiAxMikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxMikgfCAyMjQ7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBvdXQ7XHJcbn07XHJcbi8qKlxyXG4gKiBUdXJucyBhbiBhcnJheSBvZiBudW1iZXJzIGludG8gdGhlIHN0cmluZyBnaXZlbiBieSB0aGUgY29uY2F0ZW5hdGlvbiBvZiB0aGVcclxuICogY2hhcmFjdGVycyB0byB3aGljaCB0aGUgbnVtYmVycyBjb3JyZXNwb25kLlxyXG4gKiBAcGFyYW0gYnl0ZXMgQXJyYXkgb2YgbnVtYmVycyByZXByZXNlbnRpbmcgY2hhcmFjdGVycy5cclxuICogQHJldHVybiBTdHJpbmdpZmljYXRpb24gb2YgdGhlIGFycmF5LlxyXG4gKi9cclxuY29uc3QgYnl0ZUFycmF5VG9TdHJpbmcgPSBmdW5jdGlvbiAoYnl0ZXMpIHtcclxuICAgIC8vIFRPRE8odXNlcik6IFVzZSBuYXRpdmUgaW1wbGVtZW50YXRpb25zIGlmL3doZW4gYXZhaWxhYmxlXHJcbiAgICBjb25zdCBvdXQgPSBbXTtcclxuICAgIGxldCBwb3MgPSAwLCBjID0gMDtcclxuICAgIHdoaWxlIChwb3MgPCBieXRlcy5sZW5ndGgpIHtcclxuICAgICAgICBjb25zdCBjMSA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICBpZiAoYzEgPCAxMjgpIHtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGMxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYzEgPiAxOTEgJiYgYzEgPCAyMjQpIHtcclxuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgoKGMxICYgMzEpIDw8IDYpIHwgKGMyICYgNjMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYzEgPiAyMzkgJiYgYzEgPCAzNjUpIHtcclxuICAgICAgICAgICAgLy8gU3Vycm9nYXRlIFBhaXJcclxuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIGNvbnN0IGMzID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBjb25zdCBjNCA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgY29uc3QgdSA9ICgoKGMxICYgNykgPDwgMTgpIHwgKChjMiAmIDYzKSA8PCAxMikgfCAoKGMzICYgNjMpIDw8IDYpIHwgKGM0ICYgNjMpKSAtXHJcbiAgICAgICAgICAgICAgICAweDEwMDAwO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHhkODAwICsgKHUgPj4gMTApKTtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ZGMwMCArICh1ICYgMTAyMykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIGNvbnN0IGMzID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjMSAmIDE1KSA8PCAxMikgfCAoKGMyICYgNjMpIDw8IDYpIHwgKGMzICYgNjMpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0LmpvaW4oJycpO1xyXG59O1xyXG4vLyBXZSBkZWZpbmUgaXQgYXMgYW4gb2JqZWN0IGxpdGVyYWwgaW5zdGVhZCBvZiBhIGNsYXNzIGJlY2F1c2UgYSBjbGFzcyBjb21waWxlZCBkb3duIHRvIGVzNSBjYW4ndFxyXG4vLyBiZSB0cmVlc2hha2VkLiBodHRwczovL2dpdGh1Yi5jb20vcm9sbHVwL3JvbGx1cC9pc3N1ZXMvMTY5MVxyXG4vLyBTdGF0aWMgbG9va3VwIG1hcHMsIGxhemlseSBwb3B1bGF0ZWQgYnkgaW5pdF8oKVxyXG5jb25zdCBiYXNlNjQgPSB7XHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgYnl0ZXMgdG8gY2hhcmFjdGVycy5cclxuICAgICAqL1xyXG4gICAgYnl0ZVRvQ2hhck1hcF86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgY2hhcmFjdGVycyB0byBieXRlcy5cclxuICAgICAqL1xyXG4gICAgY2hhclRvQnl0ZU1hcF86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgYnl0ZXMgdG8gd2Vic2FmZSBjaGFyYWN0ZXJzLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgYnl0ZVRvQ2hhck1hcFdlYlNhZmVfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIHdlYnNhZmUgY2hhcmFjdGVycyB0byBieXRlcy5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGNoYXJUb0J5dGVNYXBXZWJTYWZlXzogbnVsbCxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIGRlZmF1bHQgYWxwaGFiZXQsIHNoYXJlZCBiZXR3ZWVuXHJcbiAgICAgKiBFTkNPREVEX1ZBTFMgYW5kIEVOQ09ERURfVkFMU19XRUJTQUZFXHJcbiAgICAgKi9cclxuICAgIEVOQ09ERURfVkFMU19CQVNFOiAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVonICsgJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6JyArICcwMTIzNDU2Nzg5JyxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIGRlZmF1bHQgYWxwaGFiZXQuIFZhbHVlIDY0ICg9KSBpcyBzcGVjaWFsOyBpdCBtZWFucyBcIm5vdGhpbmcuXCJcclxuICAgICAqL1xyXG4gICAgZ2V0IEVOQ09ERURfVkFMUygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRSArICcrLz0nO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIHdlYnNhZmUgYWxwaGFiZXQuXHJcbiAgICAgKi9cclxuICAgIGdldCBFTkNPREVEX1ZBTFNfV0VCU0FGRSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRSArICctXy4nO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogV2hldGhlciB0aGlzIGJyb3dzZXIgc3VwcG9ydHMgdGhlIGF0b2IgYW5kIGJ0b2EgZnVuY3Rpb25zLiBUaGlzIGV4dGVuc2lvblxyXG4gICAgICogc3RhcnRlZCBhdCBNb3ppbGxhIGJ1dCBpcyBub3cgaW1wbGVtZW50ZWQgYnkgbWFueSBicm93c2Vycy4gV2UgdXNlIHRoZVxyXG4gICAgICogQVNTVU1FXyogdmFyaWFibGVzIHRvIGF2b2lkIHB1bGxpbmcgaW4gdGhlIGZ1bGwgdXNlcmFnZW50IGRldGVjdGlvbiBsaWJyYXJ5XHJcbiAgICAgKiBidXQgc3RpbGwgYWxsb3dpbmcgdGhlIHN0YW5kYXJkIHBlci1icm93c2VyIGNvbXBpbGF0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIEhBU19OQVRJVkVfU1VQUE9SVDogdHlwZW9mIGF0b2IgPT09ICdmdW5jdGlvbicsXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1lbmNvZGUgYW4gYXJyYXkgb2YgYnl0ZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IEFuIGFycmF5IG9mIGJ5dGVzIChudW1iZXJzIHdpdGhcclxuICAgICAqICAgICB2YWx1ZSBpbiBbMCwgMjU1XSkgdG8gZW5jb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgQm9vbGVhbiBpbmRpY2F0aW5nIHdlIHNob3VsZCB1c2UgdGhlXHJcbiAgICAgKiAgICAgYWx0ZXJuYXRpdmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcuXHJcbiAgICAgKi9cclxuICAgIGVuY29kZUJ5dGVBcnJheShpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ2VuY29kZUJ5dGVBcnJheSB0YWtlcyBhbiBhcnJheSBhcyBhIHBhcmFtZXRlcicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluaXRfKCk7XHJcbiAgICAgICAgY29uc3QgYnl0ZVRvQ2hhck1hcCA9IHdlYlNhZmVcclxuICAgICAgICAgICAgPyB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1xyXG4gICAgICAgICAgICA6IHRoaXMuYnl0ZVRvQ2hhck1hcF87XHJcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkgKz0gMykge1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMSA9IGlucHV0W2ldO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTIgPSBpICsgMSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTIgPSBoYXZlQnl0ZTIgPyBpbnB1dFtpICsgMV0gOiAwO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTMgPSBpICsgMiA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTMgPSBoYXZlQnl0ZTMgPyBpbnB1dFtpICsgMl0gOiAwO1xyXG4gICAgICAgICAgICBjb25zdCBvdXRCeXRlMSA9IGJ5dGUxID4+IDI7XHJcbiAgICAgICAgICAgIGNvbnN0IG91dEJ5dGUyID0gKChieXRlMSAmIDB4MDMpIDw8IDQpIHwgKGJ5dGUyID4+IDQpO1xyXG4gICAgICAgICAgICBsZXQgb3V0Qnl0ZTMgPSAoKGJ5dGUyICYgMHgwZikgPDwgMikgfCAoYnl0ZTMgPj4gNik7XHJcbiAgICAgICAgICAgIGxldCBvdXRCeXRlNCA9IGJ5dGUzICYgMHgzZjtcclxuICAgICAgICAgICAgaWYgKCFoYXZlQnl0ZTMpIHtcclxuICAgICAgICAgICAgICAgIG91dEJ5dGU0ID0gNjQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWhhdmVCeXRlMikge1xyXG4gICAgICAgICAgICAgICAgICAgIG91dEJ5dGUzID0gNjQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3V0cHV0LnB1c2goYnl0ZVRvQ2hhck1hcFtvdXRCeXRlMV0sIGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTJdLCBieXRlVG9DaGFyTWFwW291dEJ5dGUzXSwgYnl0ZVRvQ2hhck1hcFtvdXRCeXRlNF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0cHV0LmpvaW4oJycpO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQmFzZTY0LWVuY29kZSBhIHN0cmluZy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgQSBzdHJpbmcgdG8gZW5jb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgSWYgdHJ1ZSwgd2Ugc2hvdWxkIHVzZSB0aGVcclxuICAgICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gVGhlIGJhc2U2NCBlbmNvZGVkIHN0cmluZy5cclxuICAgICAqL1xyXG4gICAgZW5jb2RlU3RyaW5nKGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgLy8gU2hvcnRjdXQgZm9yIE1vemlsbGEgYnJvd3NlcnMgdGhhdCBpbXBsZW1lbnRcclxuICAgICAgICAvLyBhIG5hdGl2ZSBiYXNlNjQgZW5jb2RlciBpbiB0aGUgZm9ybSBvZiBcImJ0b2EvYXRvYlwiXHJcbiAgICAgICAgaWYgKHRoaXMuSEFTX05BVElWRV9TVVBQT1JUICYmICF3ZWJTYWZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBidG9hKGlucHV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlQnl0ZUFycmF5KHN0cmluZ1RvQnl0ZUFycmF5JDEoaW5wdXQpLCB3ZWJTYWZlKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1kZWNvZGUgYSBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IHRvIGRlY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIFRydWUgaWYgd2Ugc2hvdWxkIHVzZSB0aGVcclxuICAgICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZGVjb2RlZCB2YWx1ZS5cclxuICAgICAqL1xyXG4gICAgZGVjb2RlU3RyaW5nKGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgLy8gU2hvcnRjdXQgZm9yIE1vemlsbGEgYnJvd3NlcnMgdGhhdCBpbXBsZW1lbnRcclxuICAgICAgICAvLyBhIG5hdGl2ZSBiYXNlNjQgZW5jb2RlciBpbiB0aGUgZm9ybSBvZiBcImJ0b2EvYXRvYlwiXHJcbiAgICAgICAgaWYgKHRoaXMuSEFTX05BVElWRV9TVVBQT1JUICYmICF3ZWJTYWZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdG9iKGlucHV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGJ5dGVBcnJheVRvU3RyaW5nKHRoaXMuZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkoaW5wdXQsIHdlYlNhZmUpKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1kZWNvZGUgYSBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogSW4gYmFzZS02NCBkZWNvZGluZywgZ3JvdXBzIG9mIGZvdXIgY2hhcmFjdGVycyBhcmUgY29udmVydGVkIGludG8gdGhyZWVcclxuICAgICAqIGJ5dGVzLiAgSWYgdGhlIGVuY29kZXIgZGlkIG5vdCBhcHBseSBwYWRkaW5nLCB0aGUgaW5wdXQgbGVuZ3RoIG1heSBub3RcclxuICAgICAqIGJlIGEgbXVsdGlwbGUgb2YgNC5cclxuICAgICAqXHJcbiAgICAgKiBJbiB0aGlzIGNhc2UsIHRoZSBsYXN0IGdyb3VwIHdpbGwgaGF2ZSBmZXdlciB0aGFuIDQgY2hhcmFjdGVycywgYW5kXHJcbiAgICAgKiBwYWRkaW5nIHdpbGwgYmUgaW5mZXJyZWQuICBJZiB0aGUgZ3JvdXAgaGFzIG9uZSBvciB0d28gY2hhcmFjdGVycywgaXQgZGVjb2Rlc1xyXG4gICAgICogdG8gb25lIGJ5dGUuICBJZiB0aGUgZ3JvdXAgaGFzIHRocmVlIGNoYXJhY3RlcnMsIGl0IGRlY29kZXMgdG8gdHdvIGJ5dGVzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCBJbnB1dCB0byBkZWNvZGUuXHJcbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBUcnVlIGlmIHdlIHNob3VsZCB1c2UgdGhlIHdlYi1zYWZlIGFscGhhYmV0LlxyXG4gICAgICogQHJldHVybiBieXRlcyByZXByZXNlbnRpbmcgdGhlIGRlY29kZWQgdmFsdWUuXHJcbiAgICAgKi9cclxuICAgIGRlY29kZVN0cmluZ1RvQnl0ZUFycmF5KGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgdGhpcy5pbml0XygpO1xyXG4gICAgICAgIGNvbnN0IGNoYXJUb0J5dGVNYXAgPSB3ZWJTYWZlXHJcbiAgICAgICAgICAgID8gdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9cclxuICAgICAgICAgICAgOiB0aGlzLmNoYXJUb0J5dGVNYXBfO1xyXG4gICAgICAgIGNvbnN0IG91dHB1dCA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOykge1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMSA9IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkrKyldO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTIgPSBpIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMiA9IGhhdmVCeXRlMiA/IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkpXSA6IDA7XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUzID0gaSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTMgPSBoYXZlQnl0ZTMgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiA2NDtcclxuICAgICAgICAgICAgKytpO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTQgPSBpIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlNCA9IGhhdmVCeXRlNCA/IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkpXSA6IDY0O1xyXG4gICAgICAgICAgICArK2k7XHJcbiAgICAgICAgICAgIGlmIChieXRlMSA9PSBudWxsIHx8IGJ5dGUyID09IG51bGwgfHwgYnl0ZTMgPT0gbnVsbCB8fCBieXRlNCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRGVjb2RlQmFzZTY0U3RyaW5nRXJyb3IoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBvdXRCeXRlMSA9IChieXRlMSA8PCAyKSB8IChieXRlMiA+PiA0KTtcclxuICAgICAgICAgICAgb3V0cHV0LnB1c2gob3V0Qnl0ZTEpO1xyXG4gICAgICAgICAgICBpZiAoYnl0ZTMgIT09IDY0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRCeXRlMiA9ICgoYnl0ZTIgPDwgNCkgJiAweGYwKSB8IChieXRlMyA+PiAyKTtcclxuICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKG91dEJ5dGUyKTtcclxuICAgICAgICAgICAgICAgIGlmIChieXRlNCAhPT0gNjQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvdXRCeXRlMyA9ICgoYnl0ZTMgPDwgNikgJiAweGMwKSB8IGJ5dGU0O1xyXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKG91dEJ5dGUzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogTGF6eSBzdGF0aWMgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb24uIENhbGxlZCBiZWZvcmVcclxuICAgICAqIGFjY2Vzc2luZyBhbnkgb2YgdGhlIHN0YXRpYyBtYXAgdmFyaWFibGVzLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgaW5pdF8oKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmJ5dGVUb0NoYXJNYXBfKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcF8gPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwXyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlXyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlXyA9IHt9O1xyXG4gICAgICAgICAgICAvLyBXZSB3YW50IHF1aWNrIG1hcHBpbmdzIGJhY2sgYW5kIGZvcnRoLCBzbyB3ZSBwcmVjb21wdXRlIHR3byBtYXBzLlxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuRU5DT0RFRF9WQUxTLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBfW2ldID0gdGhpcy5FTkNPREVEX1ZBTFMuY2hhckF0KGkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwX1t0aGlzLmJ5dGVUb0NoYXJNYXBfW2ldXSA9IGk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1tpXSA9IHRoaXMuRU5DT0RFRF9WQUxTX1dFQlNBRkUuY2hhckF0KGkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9bdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9baV1dID0gaTtcclxuICAgICAgICAgICAgICAgIC8vIEJlIGZvcmdpdmluZyB3aGVuIGRlY29kaW5nIGFuZCBjb3JyZWN0bHkgZGVjb2RlIGJvdGggZW5jb2RpbmdzLlxyXG4gICAgICAgICAgICAgICAgaWYgKGkgPj0gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBfW3RoaXMuRU5DT0RFRF9WQUxTX1dFQlNBRkUuY2hhckF0KGkpXSA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9bdGhpcy5FTkNPREVEX1ZBTFMuY2hhckF0KGkpXSA9IGk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBBbiBlcnJvciBlbmNvdW50ZXJlZCB3aGlsZSBkZWNvZGluZyBiYXNlNjQgc3RyaW5nLlxyXG4gKi9cclxuY2xhc3MgRGVjb2RlQmFzZTY0U3RyaW5nRXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xyXG4gICAgICAgIHRoaXMubmFtZSA9ICdEZWNvZGVCYXNlNjRTdHJpbmdFcnJvcic7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFVSTC1zYWZlIGJhc2U2NCBlbmNvZGluZ1xyXG4gKi9cclxuY29uc3QgYmFzZTY0RW5jb2RlID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgY29uc3QgdXRmOEJ5dGVzID0gc3RyaW5nVG9CeXRlQXJyYXkkMShzdHIpO1xyXG4gICAgcmV0dXJuIGJhc2U2NC5lbmNvZGVCeXRlQXJyYXkodXRmOEJ5dGVzLCB0cnVlKTtcclxufTtcclxuLyoqXHJcbiAqIFVSTC1zYWZlIGJhc2U2NCBlbmNvZGluZyAod2l0aG91dCBcIi5cIiBwYWRkaW5nIGluIHRoZSBlbmQpLlxyXG4gKiBlLmcuIFVzZWQgaW4gSlNPTiBXZWIgVG9rZW4gKEpXVCkgcGFydHMuXHJcbiAqL1xyXG5jb25zdCBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIC8vIFVzZSBiYXNlNjR1cmwgZW5jb2RpbmcgYW5kIHJlbW92ZSBwYWRkaW5nIGluIHRoZSBlbmQgKGRvdCBjaGFyYWN0ZXJzKS5cclxuICAgIHJldHVybiBiYXNlNjRFbmNvZGUoc3RyKS5yZXBsYWNlKC9cXC4vZywgJycpO1xyXG59O1xyXG4vKipcclxuICogVVJMLXNhZmUgYmFzZTY0IGRlY29kaW5nXHJcbiAqXHJcbiAqIE5PVEU6IERPIE5PVCB1c2UgdGhlIGdsb2JhbCBhdG9iKCkgZnVuY3Rpb24gLSBpdCBkb2VzIE5PVCBzdXBwb3J0IHRoZVxyXG4gKiBiYXNlNjRVcmwgdmFyaWFudCBlbmNvZGluZy5cclxuICpcclxuICogQHBhcmFtIHN0ciBUbyBiZSBkZWNvZGVkXHJcbiAqIEByZXR1cm4gRGVjb2RlZCByZXN1bHQsIGlmIHBvc3NpYmxlXHJcbiAqL1xyXG5jb25zdCBiYXNlNjREZWNvZGUgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiBiYXNlNjQuZGVjb2RlU3RyaW5nKHN0ciwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ2Jhc2U2NERlY29kZSBmYWlsZWQ6ICcsIGUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBEbyBhIGRlZXAtY29weSBvZiBiYXNpYyBKYXZhU2NyaXB0IE9iamVjdHMgb3IgQXJyYXlzLlxyXG4gKi9cclxuZnVuY3Rpb24gZGVlcENvcHkodmFsdWUpIHtcclxuICAgIHJldHVybiBkZWVwRXh0ZW5kKHVuZGVmaW5lZCwgdmFsdWUpO1xyXG59XHJcbi8qKlxyXG4gKiBDb3B5IHByb3BlcnRpZXMgZnJvbSBzb3VyY2UgdG8gdGFyZ2V0IChyZWN1cnNpdmVseSBhbGxvd3MgZXh0ZW5zaW9uXHJcbiAqIG9mIE9iamVjdHMgYW5kIEFycmF5cykuICBTY2FsYXIgdmFsdWVzIGluIHRoZSB0YXJnZXQgYXJlIG92ZXItd3JpdHRlbi5cclxuICogSWYgdGFyZ2V0IGlzIHVuZGVmaW5lZCwgYW4gb2JqZWN0IG9mIHRoZSBhcHByb3ByaWF0ZSB0eXBlIHdpbGwgYmUgY3JlYXRlZFxyXG4gKiAoYW5kIHJldHVybmVkKS5cclxuICpcclxuICogV2UgcmVjdXJzaXZlbHkgY29weSBhbGwgY2hpbGQgcHJvcGVydGllcyBvZiBwbGFpbiBPYmplY3RzIGluIHRoZSBzb3VyY2UtIHNvXHJcbiAqIHRoYXQgbmFtZXNwYWNlLSBsaWtlIGRpY3Rpb25hcmllcyBhcmUgbWVyZ2VkLlxyXG4gKlxyXG4gKiBOb3RlIHRoYXQgdGhlIHRhcmdldCBjYW4gYmUgYSBmdW5jdGlvbiwgaW4gd2hpY2ggY2FzZSB0aGUgcHJvcGVydGllcyBpblxyXG4gKiB0aGUgc291cmNlIE9iamVjdCBhcmUgY29waWVkIG9udG8gaXQgYXMgc3RhdGljIHByb3BlcnRpZXMgb2YgdGhlIEZ1bmN0aW9uLlxyXG4gKlxyXG4gKiBOb3RlOiB3ZSBkb24ndCBtZXJnZSBfX3Byb3RvX18gdG8gcHJldmVudCBwcm90b3R5cGUgcG9sbHV0aW9uXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWVwRXh0ZW5kKHRhcmdldCwgc291cmNlKSB7XHJcbiAgICBpZiAoIShzb3VyY2UgaW5zdGFuY2VvZiBPYmplY3QpKSB7XHJcbiAgICAgICAgcmV0dXJuIHNvdXJjZTtcclxuICAgIH1cclxuICAgIHN3aXRjaCAoc291cmNlLmNvbnN0cnVjdG9yKSB7XHJcbiAgICAgICAgY2FzZSBEYXRlOlxyXG4gICAgICAgICAgICAvLyBUcmVhdCBEYXRlcyBsaWtlIHNjYWxhcnM7IGlmIHRoZSB0YXJnZXQgZGF0ZSBvYmplY3QgaGFkIGFueSBjaGlsZFxyXG4gICAgICAgICAgICAvLyBwcm9wZXJ0aWVzIC0gdGhleSB3aWxsIGJlIGxvc3QhXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGVWYWx1ZSA9IHNvdXJjZTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGVWYWx1ZS5nZXRUaW1lKCkpO1xyXG4gICAgICAgIGNhc2UgT2JqZWN0OlxyXG4gICAgICAgICAgICBpZiAodGFyZ2V0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldCA9IHt9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQXJyYXk6XHJcbiAgICAgICAgICAgIC8vIEFsd2F5cyBjb3B5IHRoZSBhcnJheSBzb3VyY2UgYW5kIG92ZXJ3cml0ZSB0aGUgdGFyZ2V0LlxyXG4gICAgICAgICAgICB0YXJnZXQgPSBbXTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgLy8gTm90IGEgcGxhaW4gT2JqZWN0IC0gdHJlYXQgaXQgYXMgYSBzY2FsYXIuXHJcbiAgICAgICAgICAgIHJldHVybiBzb3VyY2U7XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IHByb3AgaW4gc291cmNlKSB7XHJcbiAgICAgICAgLy8gdXNlIGlzVmFsaWRLZXkgdG8gZ3VhcmQgYWdhaW5zdCBwcm90b3R5cGUgcG9sbHV0aW9uLiBTZWUgaHR0cHM6Ly9zbnlrLmlvL3Z1bG4vU05ZSy1KUy1MT0RBU0gtNDUwMjAyXHJcbiAgICAgICAgaWYgKCFzb3VyY2UuaGFzT3duUHJvcGVydHkocHJvcCkgfHwgIWlzVmFsaWRLZXkocHJvcCkpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRhcmdldFtwcm9wXSA9IGRlZXBFeHRlbmQodGFyZ2V0W3Byb3BdLCBzb3VyY2VbcHJvcF0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRhcmdldDtcclxufVxyXG5mdW5jdGlvbiBpc1ZhbGlkS2V5KGtleSkge1xyXG4gICAgcmV0dXJuIGtleSAhPT0gJ19fcHJvdG9fXyc7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFBvbHlmaWxsIGZvciBgZ2xvYmFsVGhpc2Agb2JqZWN0LlxyXG4gKiBAcmV0dXJucyB0aGUgYGdsb2JhbFRoaXNgIG9iamVjdCBmb3IgdGhlIGdpdmVuIGVudmlyb25tZW50LlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRHbG9iYWwoKSB7XHJcbiAgICBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlbGY7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm4gd2luZG93O1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIGdsb2JhbDtcclxuICAgIH1cclxuICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIGxvY2F0ZSBnbG9iYWwgb2JqZWN0LicpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IGdldERlZmF1bHRzRnJvbUdsb2JhbCA9ICgpID0+IGdldEdsb2JhbCgpLl9fRklSRUJBU0VfREVGQVVMVFNfXztcclxuLyoqXHJcbiAqIEF0dGVtcHQgdG8gcmVhZCBkZWZhdWx0cyBmcm9tIGEgSlNPTiBzdHJpbmcgcHJvdmlkZWQgdG9cclxuICogcHJvY2VzcyguKWVudiguKV9fRklSRUJBU0VfREVGQVVMVFNfXyBvciBhIEpTT04gZmlsZSB3aG9zZSBwYXRoIGlzIGluXHJcbiAqIHByb2Nlc3MoLillbnYoLilfX0ZJUkVCQVNFX0RFRkFVTFRTX1BBVEhfX1xyXG4gKiBUaGUgZG90cyBhcmUgaW4gcGFyZW5zIGJlY2F1c2UgY2VydGFpbiBjb21waWxlcnMgKFZpdGU/KSBjYW5ub3RcclxuICogaGFuZGxlIHNlZWluZyB0aGF0IHZhcmlhYmxlIGluIGNvbW1lbnRzLlxyXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWpzLXNkay9pc3N1ZXMvNjgzOFxyXG4gKi9cclxuY29uc3QgZ2V0RGVmYXVsdHNGcm9tRW52VmFyaWFibGUgPSAoKSA9PiB7XHJcbiAgICBpZiAodHlwZW9mIHByb2Nlc3MgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiBwcm9jZXNzLmVudiA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBkZWZhdWx0c0pzb25TdHJpbmcgPSBwcm9jZXNzLmVudi5fX0ZJUkVCQVNFX0RFRkFVTFRTX187XHJcbiAgICBpZiAoZGVmYXVsdHNKc29uU3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoZGVmYXVsdHNKc29uU3RyaW5nKTtcclxuICAgIH1cclxufTtcclxuY29uc3QgZ2V0RGVmYXVsdHNGcm9tQ29va2llID0gKCkgPT4ge1xyXG4gICAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBsZXQgbWF0Y2g7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIG1hdGNoID0gZG9jdW1lbnQuY29va2llLm1hdGNoKC9fX0ZJUkVCQVNFX0RFRkFVTFRTX189KFteO10rKS8pO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAvLyBTb21lIGVudmlyb25tZW50cyBzdWNoIGFzIEFuZ3VsYXIgVW5pdmVyc2FsIFNTUiBoYXZlIGFcclxuICAgICAgICAvLyBgZG9jdW1lbnRgIG9iamVjdCBidXQgZXJyb3Igb24gYWNjZXNzaW5nIGBkb2N1bWVudC5jb29raWVgLlxyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGRlY29kZWQgPSBtYXRjaCAmJiBiYXNlNjREZWNvZGUobWF0Y2hbMV0pO1xyXG4gICAgcmV0dXJuIGRlY29kZWQgJiYgSlNPTi5wYXJzZShkZWNvZGVkKTtcclxufTtcclxuLyoqXHJcbiAqIEdldCB0aGUgX19GSVJFQkFTRV9ERUZBVUxUU19fIG9iamVjdC4gSXQgY2hlY2tzIGluIG9yZGVyOlxyXG4gKiAoMSkgaWYgc3VjaCBhbiBvYmplY3QgZXhpc3RzIGFzIGEgcHJvcGVydHkgb2YgYGdsb2JhbFRoaXNgXHJcbiAqICgyKSBpZiBzdWNoIGFuIG9iamVjdCB3YXMgcHJvdmlkZWQgb24gYSBzaGVsbCBlbnZpcm9ubWVudCB2YXJpYWJsZVxyXG4gKiAoMykgaWYgc3VjaCBhbiBvYmplY3QgZXhpc3RzIGluIGEgY29va2llXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGdldERlZmF1bHRzID0gKCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gKGdldERlZmF1bHRzRnJvbUdsb2JhbCgpIHx8XHJcbiAgICAgICAgICAgIGdldERlZmF1bHRzRnJvbUVudlZhcmlhYmxlKCkgfHxcclxuICAgICAgICAgICAgZ2V0RGVmYXVsdHNGcm9tQ29va2llKCkpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDYXRjaC1hbGwgZm9yIGJlaW5nIHVuYWJsZSB0byBnZXQgX19GSVJFQkFTRV9ERUZBVUxUU19fIGR1ZVxyXG4gICAgICAgICAqIHRvIGFueSBlbnZpcm9ubWVudCBjYXNlIHdlIGhhdmUgbm90IGFjY291bnRlZCBmb3IuIExvZyB0b1xyXG4gICAgICAgICAqIGluZm8gaW5zdGVhZCBvZiBzd2FsbG93aW5nIHNvIHdlIGNhbiBmaW5kIHRoZXNlIHVua25vd24gY2FzZXNcclxuICAgICAgICAgKiBhbmQgYWRkIHBhdGhzIGZvciB0aGVtIGlmIG5lZWRlZC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zb2xlLmluZm8oYFVuYWJsZSB0byBnZXQgX19GSVJFQkFTRV9ERUZBVUxUU19fIGR1ZSB0bzogJHtlfWApO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIFJldHVybnMgZW11bGF0b3IgaG9zdCBzdG9yZWQgaW4gdGhlIF9fRklSRUJBU0VfREVGQVVMVFNfXyBvYmplY3RcclxuICogZm9yIHRoZSBnaXZlbiBwcm9kdWN0LlxyXG4gKiBAcmV0dXJucyBhIFVSTCBob3N0IGZvcm1hdHRlZCBsaWtlIGAxMjcuMC4wLjE6OTk5OWAgb3IgYFs6OjFdOjQwMDBgIGlmIGF2YWlsYWJsZVxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBnZXREZWZhdWx0RW11bGF0b3JIb3N0ID0gKHByb2R1Y3ROYW1lKSA9PiB7IHZhciBfYSwgX2I7IHJldHVybiAoX2IgPSAoX2EgPSBnZXREZWZhdWx0cygpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZW11bGF0b3JIb3N0cykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iW3Byb2R1Y3ROYW1lXTsgfTtcclxuLyoqXHJcbiAqIFJldHVybnMgZW11bGF0b3IgaG9zdG5hbWUgYW5kIHBvcnQgc3RvcmVkIGluIHRoZSBfX0ZJUkVCQVNFX0RFRkFVTFRTX18gb2JqZWN0XHJcbiAqIGZvciB0aGUgZ2l2ZW4gcHJvZHVjdC5cclxuICogQHJldHVybnMgYSBwYWlyIG9mIGhvc3RuYW1lIGFuZCBwb3J0IGxpa2UgYFtcIjo6MVwiLCA0MDAwXWAgaWYgYXZhaWxhYmxlXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGdldERlZmF1bHRFbXVsYXRvckhvc3RuYW1lQW5kUG9ydCA9IChwcm9kdWN0TmFtZSkgPT4ge1xyXG4gICAgY29uc3QgaG9zdCA9IGdldERlZmF1bHRFbXVsYXRvckhvc3QocHJvZHVjdE5hbWUpO1xyXG4gICAgaWYgKCFob3N0KSB7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIGNvbnN0IHNlcGFyYXRvckluZGV4ID0gaG9zdC5sYXN0SW5kZXhPZignOicpOyAvLyBGaW5kaW5nIHRoZSBsYXN0IHNpbmNlIElQdjYgYWRkciBhbHNvIGhhcyBjb2xvbnMuXHJcbiAgICBpZiAoc2VwYXJhdG9ySW5kZXggPD0gMCB8fCBzZXBhcmF0b3JJbmRleCArIDEgPT09IGhvc3QubGVuZ3RoKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGhvc3QgJHtob3N0fSB3aXRoIG5vIHNlcGFyYXRlIGhvc3RuYW1lIGFuZCBwb3J0IWApO1xyXG4gICAgfVxyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtZ2xvYmFsc1xyXG4gICAgY29uc3QgcG9ydCA9IHBhcnNlSW50KGhvc3Quc3Vic3RyaW5nKHNlcGFyYXRvckluZGV4ICsgMSksIDEwKTtcclxuICAgIGlmIChob3N0WzBdID09PSAnWycpIHtcclxuICAgICAgICAvLyBCcmFja2V0LXF1b3RlZCBgW2lwdjZhZGRyXTpwb3J0YCA9PiByZXR1cm4gXCJpcHY2YWRkclwiICh3aXRob3V0IGJyYWNrZXRzKS5cclxuICAgICAgICByZXR1cm4gW2hvc3Quc3Vic3RyaW5nKDEsIHNlcGFyYXRvckluZGV4IC0gMSksIHBvcnRdO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIFtob3N0LnN1YnN0cmluZygwLCBzZXBhcmF0b3JJbmRleCksIHBvcnRdO1xyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogUmV0dXJucyBGaXJlYmFzZSBhcHAgY29uZmlnIHN0b3JlZCBpbiB0aGUgX19GSVJFQkFTRV9ERUZBVUxUU19fIG9iamVjdC5cclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgZ2V0RGVmYXVsdEFwcENvbmZpZyA9ICgpID0+IHsgdmFyIF9hOyByZXR1cm4gKF9hID0gZ2V0RGVmYXVsdHMoKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNvbmZpZzsgfTtcclxuLyoqXHJcbiAqIFJldHVybnMgYW4gZXhwZXJpbWVudGFsIHNldHRpbmcgb24gdGhlIF9fRklSRUJBU0VfREVGQVVMVFNfXyBvYmplY3QgKHByb3BlcnRpZXNcclxuICogcHJlZml4ZWQgYnkgXCJfXCIpXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGdldEV4cGVyaW1lbnRhbFNldHRpbmcgPSAobmFtZSkgPT4geyB2YXIgX2E7IHJldHVybiAoX2EgPSBnZXREZWZhdWx0cygpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FbYF8ke25hbWV9YF07IH07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIERlZmVycmVkIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMucmVqZWN0ID0gKCkgPT4geyB9O1xyXG4gICAgICAgIHRoaXMucmVzb2x2ZSA9ICgpID0+IHsgfTtcclxuICAgICAgICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZSA9IHJlc29sdmU7XHJcbiAgICAgICAgICAgIHRoaXMucmVqZWN0ID0gcmVqZWN0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBPdXIgQVBJIGludGVybmFscyBhcmUgbm90IHByb21pc2VpZmllZCBhbmQgY2Fubm90IGJlY2F1c2Ugb3VyIGNhbGxiYWNrIEFQSXMgaGF2ZSBzdWJ0bGUgZXhwZWN0YXRpb25zIGFyb3VuZFxyXG4gICAgICogaW52b2tpbmcgcHJvbWlzZXMgaW5saW5lLCB3aGljaCBQcm9taXNlcyBhcmUgZm9yYmlkZGVuIHRvIGRvLiBUaGlzIG1ldGhvZCBhY2NlcHRzIGFuIG9wdGlvbmFsIG5vZGUtc3R5bGUgY2FsbGJhY2tcclxuICAgICAqIGFuZCByZXR1cm5zIGEgbm9kZS1zdHlsZSBjYWxsYmFjayB3aGljaCB3aWxsIHJlc29sdmUgb3IgcmVqZWN0IHRoZSBEZWZlcnJlZCdzIHByb21pc2UuXHJcbiAgICAgKi9cclxuICAgIHdyYXBDYWxsYmFjayhjYWxsYmFjaykge1xyXG4gICAgICAgIHJldHVybiAoZXJyb3IsIHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNvbHZlKHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBBdHRhY2hpbmcgbm9vcCBoYW5kbGVyIGp1c3QgaW4gY2FzZSBkZXZlbG9wZXIgd2Fzbid0IGV4cGVjdGluZ1xyXG4gICAgICAgICAgICAgICAgLy8gcHJvbWlzZXNcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvbWlzZS5jYXRjaCgoKSA9PiB7IH0pO1xyXG4gICAgICAgICAgICAgICAgLy8gU29tZSBvZiBvdXIgY2FsbGJhY2tzIGRvbid0IGV4cGVjdCBhIHZhbHVlIGFuZCBvdXIgb3duIHRlc3RzXHJcbiAgICAgICAgICAgICAgICAvLyBhc3NlcnQgdGhhdCB0aGUgcGFyYW1ldGVyIGxlbmd0aCBpcyAxXHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2subGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IsIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlTW9ja1VzZXJUb2tlbih0b2tlbiwgcHJvamVjdElkKSB7XHJcbiAgICBpZiAodG9rZW4udWlkKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgXCJ1aWRcIiBmaWVsZCBpcyBubyBsb25nZXIgc3VwcG9ydGVkIGJ5IG1vY2tVc2VyVG9rZW4uIFBsZWFzZSB1c2UgXCJzdWJcIiBpbnN0ZWFkIGZvciBGaXJlYmFzZSBBdXRoIFVzZXIgSUQuJyk7XHJcbiAgICB9XHJcbiAgICAvLyBVbnNlY3VyZWQgSldUcyB1c2UgXCJub25lXCIgYXMgdGhlIGFsZ29yaXRobS5cclxuICAgIGNvbnN0IGhlYWRlciA9IHtcclxuICAgICAgICBhbGc6ICdub25lJyxcclxuICAgICAgICB0eXBlOiAnSldUJ1xyXG4gICAgfTtcclxuICAgIGNvbnN0IHByb2plY3QgPSBwcm9qZWN0SWQgfHwgJ2RlbW8tcHJvamVjdCc7XHJcbiAgICBjb25zdCBpYXQgPSB0b2tlbi5pYXQgfHwgMDtcclxuICAgIGNvbnN0IHN1YiA9IHRva2VuLnN1YiB8fCB0b2tlbi51c2VyX2lkO1xyXG4gICAgaWYgKCFzdWIpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtb2NrVXNlclRva2VuIG11c3QgY29udGFpbiAnc3ViJyBvciAndXNlcl9pZCcgZmllbGQhXCIpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcGF5bG9hZCA9IE9iamVjdC5hc3NpZ24oeyBcclxuICAgICAgICAvLyBTZXQgYWxsIHJlcXVpcmVkIGZpZWxkcyB0byBkZWNlbnQgZGVmYXVsdHNcclxuICAgICAgICBpc3M6IGBodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vJHtwcm9qZWN0fWAsIGF1ZDogcHJvamVjdCwgaWF0LCBleHA6IGlhdCArIDM2MDAsIGF1dGhfdGltZTogaWF0LCBzdWIsIHVzZXJfaWQ6IHN1YiwgZmlyZWJhc2U6IHtcclxuICAgICAgICAgICAgc2lnbl9pbl9wcm92aWRlcjogJ2N1c3RvbScsXHJcbiAgICAgICAgICAgIGlkZW50aXRpZXM6IHt9XHJcbiAgICAgICAgfSB9LCB0b2tlbik7XHJcbiAgICAvLyBVbnNlY3VyZWQgSldUcyB1c2UgdGhlIGVtcHR5IHN0cmluZyBhcyBhIHNpZ25hdHVyZS5cclxuICAgIGNvbnN0IHNpZ25hdHVyZSA9ICcnO1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyhKU09OLnN0cmluZ2lmeShoZWFkZXIpKSxcclxuICAgICAgICBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyhKU09OLnN0cmluZ2lmeShwYXlsb2FkKSksXHJcbiAgICAgICAgc2lnbmF0dXJlXHJcbiAgICBdLmpvaW4oJy4nKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBuYXZpZ2F0b3IudXNlckFnZW50IHN0cmluZyBvciAnJyBpZiBpdCdzIG5vdCBkZWZpbmVkLlxyXG4gKiBAcmV0dXJuIHVzZXIgYWdlbnQgc3RyaW5nXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRVQSgpIHtcclxuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgIHR5cGVvZiBuYXZpZ2F0b3JbJ3VzZXJBZ2VudCddID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiBuYXZpZ2F0b3JbJ3VzZXJBZ2VudCddO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgQ29yZG92YSAvIFBob25lR2FwIC8gSW9uaWMgZnJhbWV3b3JrcyBvbiBhIG1vYmlsZSBkZXZpY2UuXHJcbiAqXHJcbiAqIERlbGliZXJhdGVseSBkb2VzIG5vdCByZWx5IG9uIGNoZWNraW5nIGBmaWxlOi8vYCBVUkxzIChhcyB0aGlzIGZhaWxzIFBob25lR2FwXHJcbiAqIGluIHRoZSBSaXBwbGUgZW11bGF0b3IpIG5vciBDb3Jkb3ZhIGBvbkRldmljZVJlYWR5YCwgd2hpY2ggd291bGQgbm9ybWFsbHlcclxuICogd2FpdCBmb3IgYSBjYWxsYmFjay5cclxuICovXHJcbmZ1bmN0aW9uIGlzTW9iaWxlQ29yZG92YSgpIHtcclxuICAgIHJldHVybiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICAvLyBAdHMtaWdub3JlIFNldHRpbmcgdXAgYW4gYnJvYWRseSBhcHBsaWNhYmxlIGluZGV4IHNpZ25hdHVyZSBmb3IgV2luZG93XHJcbiAgICAgICAgLy8ganVzdCB0byBkZWFsIHdpdGggdGhpcyBjYXNlIHdvdWxkIHByb2JhYmx5IGJlIGEgYmFkIGlkZWEuXHJcbiAgICAgICAgISEod2luZG93Wydjb3Jkb3ZhJ10gfHwgd2luZG93WydwaG9uZWdhcCddIHx8IHdpbmRvd1snUGhvbmVHYXAnXSkgJiZcclxuICAgICAgICAvaW9zfGlwaG9uZXxpcG9kfGlwYWR8YW5kcm9pZHxibGFja2JlcnJ5fGllbW9iaWxlL2kudGVzdChnZXRVQSgpKSk7XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBOb2RlLmpzLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHRydWUgaWYgTm9kZS5qcyBlbnZpcm9ubWVudCBpcyBkZXRlY3RlZCBvciBzcGVjaWZpZWQuXHJcbiAqL1xyXG4vLyBOb2RlIGRldGVjdGlvbiBsb2dpYyBmcm9tOiBodHRwczovL2dpdGh1Yi5jb20vaWxpYWthbi9kZXRlY3Qtbm9kZS9cclxuZnVuY3Rpb24gaXNOb2RlKCkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgY29uc3QgZm9yY2VFbnZpcm9ubWVudCA9IChfYSA9IGdldERlZmF1bHRzKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5mb3JjZUVudmlyb25tZW50O1xyXG4gICAgaWYgKGZvcmNlRW52aXJvbm1lbnQgPT09ICdub2RlJykge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoZm9yY2VFbnZpcm9ubWVudCA9PT0gJ2Jyb3dzZXInKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChnbG9iYWwucHJvY2VzcykgPT09ICdbb2JqZWN0IHByb2Nlc3NdJyk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogRGV0ZWN0IEJyb3dzZXIgRW52aXJvbm1lbnRcclxuICovXHJcbmZ1bmN0aW9uIGlzQnJvd3NlcigpIHtcclxuICAgIHJldHVybiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyB8fCBpc1dlYldvcmtlcigpO1xyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgV2ViIFdvcmtlciBjb250ZXh0XHJcbiAqL1xyXG5mdW5jdGlvbiBpc1dlYldvcmtlcigpIHtcclxuICAgIHJldHVybiAodHlwZW9mIFdvcmtlckdsb2JhbFNjb3BlICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgIHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgIHNlbGYgaW5zdGFuY2VvZiBXb3JrZXJHbG9iYWxTY29wZSk7XHJcbn1cclxuZnVuY3Rpb24gaXNCcm93c2VyRXh0ZW5zaW9uKCkge1xyXG4gICAgY29uc3QgcnVudGltZSA9IHR5cGVvZiBjaHJvbWUgPT09ICdvYmplY3QnXHJcbiAgICAgICAgPyBjaHJvbWUucnVudGltZVxyXG4gICAgICAgIDogdHlwZW9mIGJyb3dzZXIgPT09ICdvYmplY3QnXHJcbiAgICAgICAgICAgID8gYnJvd3Nlci5ydW50aW1lXHJcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xyXG4gICAgcmV0dXJuIHR5cGVvZiBydW50aW1lID09PSAnb2JqZWN0JyAmJiBydW50aW1lLmlkICE9PSB1bmRlZmluZWQ7XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBSZWFjdCBOYXRpdmUuXHJcbiAqXHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBSZWFjdE5hdGl2ZSBlbnZpcm9ubWVudCBpcyBkZXRlY3RlZC5cclxuICovXHJcbmZ1bmN0aW9uIGlzUmVhY3ROYXRpdmUoKSB7XHJcbiAgICByZXR1cm4gKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICdvYmplY3QnICYmIG5hdmlnYXRvclsncHJvZHVjdCddID09PSAnUmVhY3ROYXRpdmUnKTtcclxufVxyXG4vKiogRGV0ZWN0cyBFbGVjdHJvbiBhcHBzLiAqL1xyXG5mdW5jdGlvbiBpc0VsZWN0cm9uKCkge1xyXG4gICAgcmV0dXJuIGdldFVBKCkuaW5kZXhPZignRWxlY3Ryb24vJykgPj0gMDtcclxufVxyXG4vKiogRGV0ZWN0cyBJbnRlcm5ldCBFeHBsb3Jlci4gKi9cclxuZnVuY3Rpb24gaXNJRSgpIHtcclxuICAgIGNvbnN0IHVhID0gZ2V0VUEoKTtcclxuICAgIHJldHVybiB1YS5pbmRleE9mKCdNU0lFICcpID49IDAgfHwgdWEuaW5kZXhPZignVHJpZGVudC8nKSA+PSAwO1xyXG59XHJcbi8qKiBEZXRlY3RzIFVuaXZlcnNhbCBXaW5kb3dzIFBsYXRmb3JtIGFwcHMuICovXHJcbmZ1bmN0aW9uIGlzVVdQKCkge1xyXG4gICAgcmV0dXJuIGdldFVBKCkuaW5kZXhPZignTVNBcHBIb3N0LycpID49IDA7XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCB3aGV0aGVyIHRoZSBjdXJyZW50IFNESyBidWlsZCBpcyB0aGUgTm9kZSB2ZXJzaW9uLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHRydWUgaWYgaXQncyB0aGUgTm9kZSBTREsgYnVpbGQuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc05vZGVTZGsoKSB7XHJcbiAgICByZXR1cm4gQ09OU1RBTlRTLk5PREVfQ0xJRU5UID09PSB0cnVlIHx8IENPTlNUQU5UUy5OT0RFX0FETUlOID09PSB0cnVlO1xyXG59XHJcbi8qKiBSZXR1cm5zIHRydWUgaWYgd2UgYXJlIHJ1bm5pbmcgaW4gU2FmYXJpLiAqL1xyXG5mdW5jdGlvbiBpc1NhZmFyaSgpIHtcclxuICAgIHJldHVybiAoIWlzTm9kZSgpICYmXHJcbiAgICAgICAgISFuYXZpZ2F0b3IudXNlckFnZW50ICYmXHJcbiAgICAgICAgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcygnU2FmYXJpJykgJiZcclxuICAgICAgICAhbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcygnQ2hyb21lJykpO1xyXG59XHJcbi8qKlxyXG4gKiBUaGlzIG1ldGhvZCBjaGVja3MgaWYgaW5kZXhlZERCIGlzIHN1cHBvcnRlZCBieSBjdXJyZW50IGJyb3dzZXIvc2VydmljZSB3b3JrZXIgY29udGV4dFxyXG4gKiBAcmV0dXJuIHRydWUgaWYgaW5kZXhlZERCIGlzIHN1cHBvcnRlZCBieSBjdXJyZW50IGJyb3dzZXIvc2VydmljZSB3b3JrZXIgY29udGV4dFxyXG4gKi9cclxuZnVuY3Rpb24gaXNJbmRleGVkREJBdmFpbGFibGUoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiB0eXBlb2YgaW5kZXhlZERCID09PSAnb2JqZWN0JztcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBUaGlzIG1ldGhvZCB2YWxpZGF0ZXMgYnJvd3Nlci9zdyBjb250ZXh0IGZvciBpbmRleGVkREIgYnkgb3BlbmluZyBhIGR1bW15IGluZGV4ZWREQiBkYXRhYmFzZSBhbmQgcmVqZWN0XHJcbiAqIGlmIGVycm9ycyBvY2N1ciBkdXJpbmcgdGhlIGRhdGFiYXNlIG9wZW4gb3BlcmF0aW9uLlxyXG4gKlxyXG4gKiBAdGhyb3dzIGV4Y2VwdGlvbiBpZiBjdXJyZW50IGJyb3dzZXIvc3cgY29udGV4dCBjYW4ndCBydW4gaWRiLm9wZW4gKGV4OiBTYWZhcmkgaWZyYW1lLCBGaXJlZm94XHJcbiAqIHByaXZhdGUgYnJvd3NpbmcpXHJcbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlKCkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBsZXQgcHJlRXhpc3QgPSB0cnVlO1xyXG4gICAgICAgICAgICBjb25zdCBEQl9DSEVDS19OQU1FID0gJ3ZhbGlkYXRlLWJyb3dzZXItY29udGV4dC1mb3ItaW5kZXhlZGRiLWFuYWx5dGljcy1tb2R1bGUnO1xyXG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0ID0gc2VsZi5pbmRleGVkREIub3BlbihEQl9DSEVDS19OQU1FKTtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0LnJlc3VsdC5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgLy8gZGVsZXRlIGRhdGFiYXNlIG9ubHkgd2hlbiBpdCBkb2Vzbid0IHByZS1leGlzdFxyXG4gICAgICAgICAgICAgICAgaWYgKCFwcmVFeGlzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKERCX0NIRUNLX05BTUUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBwcmVFeGlzdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoKChfYSA9IHJlcXVlc3QuZXJyb3IpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tZXNzYWdlKSB8fCAnJyk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBUaGlzIG1ldGhvZCBjaGVja3Mgd2hldGhlciBjb29raWUgaXMgZW5hYmxlZCB3aXRoaW4gY3VycmVudCBicm93c2VyXHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBjb29raWUgaXMgZW5hYmxlZCB3aXRoaW4gY3VycmVudCBicm93c2VyXHJcbiAqL1xyXG5mdW5jdGlvbiBhcmVDb29raWVzRW5hYmxlZCgpIHtcclxuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yID09PSAndW5kZWZpbmVkJyB8fCAhbmF2aWdhdG9yLmNvb2tpZUVuYWJsZWQpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGZpbGVvdmVydmlldyBTdGFuZGFyZGl6ZWQgRmlyZWJhc2UgRXJyb3IuXHJcbiAqXHJcbiAqIFVzYWdlOlxyXG4gKlxyXG4gKiAgIC8vIFR5cGVzY3JpcHQgc3RyaW5nIGxpdGVyYWxzIGZvciB0eXBlLXNhZmUgY29kZXNcclxuICogICB0eXBlIEVyciA9XHJcbiAqICAgICAndW5rbm93bicgfFxyXG4gKiAgICAgJ29iamVjdC1ub3QtZm91bmQnXHJcbiAqICAgICA7XHJcbiAqXHJcbiAqICAgLy8gQ2xvc3VyZSBlbnVtIGZvciB0eXBlLXNhZmUgZXJyb3IgY29kZXNcclxuICogICAvLyBhdC1lbnVtIHtzdHJpbmd9XHJcbiAqICAgdmFyIEVyciA9IHtcclxuICogICAgIFVOS05PV046ICd1bmtub3duJyxcclxuICogICAgIE9CSkVDVF9OT1RfRk9VTkQ6ICdvYmplY3Qtbm90LWZvdW5kJyxcclxuICogICB9XHJcbiAqXHJcbiAqICAgbGV0IGVycm9yczogTWFwPEVyciwgc3RyaW5nPiA9IHtcclxuICogICAgICdnZW5lcmljLWVycm9yJzogXCJVbmtub3duIGVycm9yXCIsXHJcbiAqICAgICAnZmlsZS1ub3QtZm91bmQnOiBcIkNvdWxkIG5vdCBmaW5kIGZpbGU6IHskZmlsZX1cIixcclxuICogICB9O1xyXG4gKlxyXG4gKiAgIC8vIFR5cGUtc2FmZSBmdW5jdGlvbiAtIG11c3QgcGFzcyBhIHZhbGlkIGVycm9yIGNvZGUgYXMgcGFyYW0uXHJcbiAqICAgbGV0IGVycm9yID0gbmV3IEVycm9yRmFjdG9yeTxFcnI+KCdzZXJ2aWNlJywgJ1NlcnZpY2UnLCBlcnJvcnMpO1xyXG4gKlxyXG4gKiAgIC4uLlxyXG4gKiAgIHRocm93IGVycm9yLmNyZWF0ZShFcnIuR0VORVJJQyk7XHJcbiAqICAgLi4uXHJcbiAqICAgdGhyb3cgZXJyb3IuY3JlYXRlKEVyci5GSUxFX05PVF9GT1VORCwgeydmaWxlJzogZmlsZU5hbWV9KTtcclxuICogICAuLi5cclxuICogICAvLyBTZXJ2aWNlOiBDb3VsZCBub3QgZmlsZSBmaWxlOiBmb28udHh0IChzZXJ2aWNlL2ZpbGUtbm90LWZvdW5kKS5cclxuICpcclxuICogICBjYXRjaCAoZSkge1xyXG4gKiAgICAgYXNzZXJ0KGUubWVzc2FnZSA9PT0gXCJDb3VsZCBub3QgZmluZCBmaWxlOiBmb28udHh0LlwiKTtcclxuICogICAgIGlmICgoZSBhcyBGaXJlYmFzZUVycm9yKT8uY29kZSA9PT0gJ3NlcnZpY2UvZmlsZS1ub3QtZm91bmQnKSB7XHJcbiAqICAgICAgIGNvbnNvbGUubG9nKFwiQ291bGQgbm90IHJlYWQgZmlsZTogXCIgKyBlWydmaWxlJ10pO1xyXG4gKiAgICAgfVxyXG4gKiAgIH1cclxuICovXHJcbmNvbnN0IEVSUk9SX05BTUUgPSAnRmlyZWJhc2VFcnJvcic7XHJcbi8vIEJhc2VkIG9uIGNvZGUgZnJvbTpcclxuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRXJyb3IjQ3VzdG9tX0Vycm9yX1R5cGVzXHJcbmNsYXNzIEZpcmViYXNlRXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgIC8qKiBUaGUgZXJyb3IgY29kZSBmb3IgdGhpcyBlcnJvci4gKi9cclxuICAgIGNvZGUsIG1lc3NhZ2UsIFxyXG4gICAgLyoqIEN1c3RvbSBkYXRhIGZvciB0aGlzIGVycm9yLiAqL1xyXG4gICAgY3VzdG9tRGF0YSkge1xyXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xyXG4gICAgICAgIHRoaXMuY29kZSA9IGNvZGU7XHJcbiAgICAgICAgdGhpcy5jdXN0b21EYXRhID0gY3VzdG9tRGF0YTtcclxuICAgICAgICAvKiogVGhlIGN1c3RvbSBuYW1lIGZvciBhbGwgRmlyZWJhc2VFcnJvcnMuICovXHJcbiAgICAgICAgdGhpcy5uYW1lID0gRVJST1JfTkFNRTtcclxuICAgICAgICAvLyBGaXggRm9yIEVTNVxyXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9NaWNyb3NvZnQvVHlwZVNjcmlwdC13aWtpL2Jsb2IvbWFzdGVyL0JyZWFraW5nLUNoYW5nZXMubWQjZXh0ZW5kaW5nLWJ1aWx0LWlucy1saWtlLWVycm9yLWFycmF5LWFuZC1tYXAtbWF5LW5vLWxvbmdlci13b3JrXHJcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIEZpcmViYXNlRXJyb3IucHJvdG90eXBlKTtcclxuICAgICAgICAvLyBNYWludGFpbnMgcHJvcGVyIHN0YWNrIHRyYWNlIGZvciB3aGVyZSBvdXIgZXJyb3Igd2FzIHRocm93bi5cclxuICAgICAgICAvLyBPbmx5IGF2YWlsYWJsZSBvbiBWOC5cclxuICAgICAgICBpZiAoRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIHtcclxuICAgICAgICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgRXJyb3JGYWN0b3J5LnByb3RvdHlwZS5jcmVhdGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5jbGFzcyBFcnJvckZhY3Rvcnkge1xyXG4gICAgY29uc3RydWN0b3Ioc2VydmljZSwgc2VydmljZU5hbWUsIGVycm9ycykge1xyXG4gICAgICAgIHRoaXMuc2VydmljZSA9IHNlcnZpY2U7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlTmFtZSA9IHNlcnZpY2VOYW1lO1xyXG4gICAgICAgIHRoaXMuZXJyb3JzID0gZXJyb3JzO1xyXG4gICAgfVxyXG4gICAgY3JlYXRlKGNvZGUsIC4uLmRhdGEpIHtcclxuICAgICAgICBjb25zdCBjdXN0b21EYXRhID0gZGF0YVswXSB8fCB7fTtcclxuICAgICAgICBjb25zdCBmdWxsQ29kZSA9IGAke3RoaXMuc2VydmljZX0vJHtjb2RlfWA7XHJcbiAgICAgICAgY29uc3QgdGVtcGxhdGUgPSB0aGlzLmVycm9yc1tjb2RlXTtcclxuICAgICAgICBjb25zdCBtZXNzYWdlID0gdGVtcGxhdGUgPyByZXBsYWNlVGVtcGxhdGUodGVtcGxhdGUsIGN1c3RvbURhdGEpIDogJ0Vycm9yJztcclxuICAgICAgICAvLyBTZXJ2aWNlIE5hbWU6IEVycm9yIG1lc3NhZ2UgKHNlcnZpY2UvY29kZSkuXHJcbiAgICAgICAgY29uc3QgZnVsbE1lc3NhZ2UgPSBgJHt0aGlzLnNlcnZpY2VOYW1lfTogJHttZXNzYWdlfSAoJHtmdWxsQ29kZX0pLmA7XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRmlyZWJhc2VFcnJvcihmdWxsQ29kZSwgZnVsbE1lc3NhZ2UsIGN1c3RvbURhdGEpO1xyXG4gICAgICAgIHJldHVybiBlcnJvcjtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiByZXBsYWNlVGVtcGxhdGUodGVtcGxhdGUsIGRhdGEpIHtcclxuICAgIHJldHVybiB0ZW1wbGF0ZS5yZXBsYWNlKFBBVFRFUk4sIChfLCBrZXkpID0+IHtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IGRhdGFba2V5XTtcclxuICAgICAgICByZXR1cm4gdmFsdWUgIT0gbnVsbCA/IFN0cmluZyh2YWx1ZSkgOiBgPCR7a2V5fT8+YDtcclxuICAgIH0pO1xyXG59XHJcbmNvbnN0IFBBVFRFUk4gPSAvXFx7XFwkKFtefV0rKX0vZztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEV2YWx1YXRlcyBhIEpTT04gc3RyaW5nIGludG8gYSBqYXZhc2NyaXB0IG9iamVjdC5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IHN0ciBBIHN0cmluZyBjb250YWluaW5nIEpTT04uXHJcbiAqIEByZXR1cm4geyp9IFRoZSBqYXZhc2NyaXB0IG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHNwZWNpZmllZCBKU09OLlxyXG4gKi9cclxuZnVuY3Rpb24ganNvbkV2YWwoc3RyKSB7XHJcbiAgICByZXR1cm4gSlNPTi5wYXJzZShzdHIpO1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIEpTT04gcmVwcmVzZW50aW5nIGEgamF2YXNjcmlwdCBvYmplY3QuXHJcbiAqIEBwYXJhbSB7Kn0gZGF0YSBKYXZhc2NyaXB0IG9iamVjdCB0byBiZSBzdHJpbmdpZmllZC5cclxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgSlNPTiBjb250ZW50cyBvZiB0aGUgb2JqZWN0LlxyXG4gKi9cclxuZnVuY3Rpb24gc3RyaW5naWZ5KGRhdGEpIHtcclxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShkYXRhKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGludG8gY29uc3RpdHVlbnQgcGFydHMuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gd2l0aCBpbnZhbGlkIC8gaW5jb21wbGV0ZSBjbGFpbXMgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBkZWNvZGUgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIGxldCBoZWFkZXIgPSB7fSwgY2xhaW1zID0ge30sIGRhdGEgPSB7fSwgc2lnbmF0dXJlID0gJyc7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHBhcnRzID0gdG9rZW4uc3BsaXQoJy4nKTtcclxuICAgICAgICBoZWFkZXIgPSBqc29uRXZhbChiYXNlNjREZWNvZGUocGFydHNbMF0pIHx8ICcnKTtcclxuICAgICAgICBjbGFpbXMgPSBqc29uRXZhbChiYXNlNjREZWNvZGUocGFydHNbMV0pIHx8ICcnKTtcclxuICAgICAgICBzaWduYXR1cmUgPSBwYXJ0c1syXTtcclxuICAgICAgICBkYXRhID0gY2xhaW1zWydkJ10gfHwge307XHJcbiAgICAgICAgZGVsZXRlIGNsYWltc1snZCddO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHsgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBoZWFkZXIsXHJcbiAgICAgICAgY2xhaW1zLFxyXG4gICAgICAgIGRhdGEsXHJcbiAgICAgICAgc2lnbmF0dXJlXHJcbiAgICB9O1xyXG59O1xyXG4vKipcclxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGFuZCBjaGVja3MgdGhlIHZhbGlkaXR5IG9mIGl0cyB0aW1lLWJhc2VkIGNsYWltcy4gV2lsbCByZXR1cm4gdHJ1ZSBpZiB0aGVcclxuICogdG9rZW4gaXMgd2l0aGluIHRoZSB0aW1lIHdpbmRvdyBhdXRob3JpemVkIGJ5IHRoZSAnbmJmJyAobm90LWJlZm9yZSkgYW5kICdpYXQnIChpc3N1ZWQtYXQpIGNsYWltcy5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiBhIGZhbHNlIG5lZ2F0aXZlIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgaXNWYWxpZFRpbWVzdGFtcCA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgY29uc3QgY2xhaW1zID0gZGVjb2RlKHRva2VuKS5jbGFpbXM7XHJcbiAgICBjb25zdCBub3cgPSBNYXRoLmZsb29yKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMCk7XHJcbiAgICBsZXQgdmFsaWRTaW5jZSA9IDAsIHZhbGlkVW50aWwgPSAwO1xyXG4gICAgaWYgKHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgaWYgKGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnbmJmJykpIHtcclxuICAgICAgICAgICAgdmFsaWRTaW5jZSA9IGNsYWltc1snbmJmJ107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnaWF0JykpIHtcclxuICAgICAgICAgICAgdmFsaWRTaW5jZSA9IGNsYWltc1snaWF0J107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2V4cCcpKSB7XHJcbiAgICAgICAgICAgIHZhbGlkVW50aWwgPSBjbGFpbXNbJ2V4cCddO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gdG9rZW4gd2lsbCBleHBpcmUgYWZ0ZXIgMjRoIGJ5IGRlZmF1bHRcclxuICAgICAgICAgICAgdmFsaWRVbnRpbCA9IHZhbGlkU2luY2UgKyA4NjQwMDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gKCEhbm93ICYmXHJcbiAgICAgICAgISF2YWxpZFNpbmNlICYmXHJcbiAgICAgICAgISF2YWxpZFVudGlsICYmXHJcbiAgICAgICAgbm93ID49IHZhbGlkU2luY2UgJiZcclxuICAgICAgICBub3cgPD0gdmFsaWRVbnRpbCk7XHJcbn07XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gYW5kIHJldHVybnMgaXRzIGlzc3VlZCBhdCB0aW1lIGlmIHZhbGlkLCBudWxsIG90aGVyd2lzZS5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiBudWxsIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgaXNzdWVkQXRUaW1lID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBjb25zdCBjbGFpbXMgPSBkZWNvZGUodG9rZW4pLmNsYWltcztcclxuICAgIGlmICh0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0JyAmJiBjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2lhdCcpKSB7XHJcbiAgICAgICAgcmV0dXJuIGNsYWltc1snaWF0J107XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufTtcclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgY2hlY2tzIHRoZSB2YWxpZGl0eSBvZiBpdHMgZm9ybWF0LiBFeHBlY3RzIGEgdmFsaWQgaXNzdWVkLWF0IHRpbWUuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gYSBmYWxzZSBuZWdhdGl2ZSBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGlzVmFsaWRGb3JtYXQgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIGNvbnN0IGRlY29kZWQgPSBkZWNvZGUodG9rZW4pLCBjbGFpbXMgPSBkZWNvZGVkLmNsYWltcztcclxuICAgIHJldHVybiAhIWNsYWltcyAmJiB0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0JyAmJiBjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2lhdCcpO1xyXG59O1xyXG4vKipcclxuICogQXR0ZW1wdHMgdG8gcGVlciBpbnRvIGFuIGF1dGggdG9rZW4gYW5kIGRldGVybWluZSBpZiBpdCdzIGFuIGFkbWluIGF1dGggdG9rZW4gYnkgbG9va2luZyBhdCB0aGUgY2xhaW1zIHBvcnRpb24uXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gYSBmYWxzZSBuZWdhdGl2ZSBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGlzQWRtaW4gPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIGNvbnN0IGNsYWltcyA9IGRlY29kZSh0b2tlbikuY2xhaW1zO1xyXG4gICAgcmV0dXJuIHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnICYmIGNsYWltc1snYWRtaW4nXSA9PT0gdHJ1ZTtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gY29udGFpbnMob2JqLCBrZXkpIHtcclxuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpO1xyXG59XHJcbmZ1bmN0aW9uIHNhZmVHZXQob2JqLCBrZXkpIHtcclxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XHJcbiAgICAgICAgcmV0dXJuIG9ialtrZXldO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBpc0VtcHR5KG9iaikge1xyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbmZ1bmN0aW9uIG1hcChvYmosIGZuLCBjb250ZXh0T2JqKSB7XHJcbiAgICBjb25zdCByZXMgPSB7fTtcclxuICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xyXG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XHJcbiAgICAgICAgICAgIHJlc1trZXldID0gZm4uY2FsbChjb250ZXh0T2JqLCBvYmpba2V5XSwga2V5LCBvYmopO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXM7XHJcbn1cclxuLyoqXHJcbiAqIERlZXAgZXF1YWwgdHdvIG9iamVjdHMuIFN1cHBvcnQgQXJyYXlzIGFuZCBPYmplY3RzLlxyXG4gKi9cclxuZnVuY3Rpb24gZGVlcEVxdWFsKGEsIGIpIHtcclxuICAgIGlmIChhID09PSBiKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICBjb25zdCBhS2V5cyA9IE9iamVjdC5rZXlzKGEpO1xyXG4gICAgY29uc3QgYktleXMgPSBPYmplY3Qua2V5cyhiKTtcclxuICAgIGZvciAoY29uc3QgayBvZiBhS2V5cykge1xyXG4gICAgICAgIGlmICghYktleXMuaW5jbHVkZXMoaykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBhUHJvcCA9IGFba107XHJcbiAgICAgICAgY29uc3QgYlByb3AgPSBiW2tdO1xyXG4gICAgICAgIGlmIChpc09iamVjdChhUHJvcCkgJiYgaXNPYmplY3QoYlByb3ApKSB7XHJcbiAgICAgICAgICAgIGlmICghZGVlcEVxdWFsKGFQcm9wLCBiUHJvcCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChhUHJvcCAhPT0gYlByb3ApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZvciAoY29uc3QgayBvZiBiS2V5cykge1xyXG4gICAgICAgIGlmICghYUtleXMuaW5jbHVkZXMoaykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbmZ1bmN0aW9uIGlzT2JqZWN0KHRoaW5nKSB7XHJcbiAgICByZXR1cm4gdGhpbmcgIT09IG51bGwgJiYgdHlwZW9mIHRoaW5nID09PSAnb2JqZWN0JztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmVqZWN0cyBpZiB0aGUgZ2l2ZW4gcHJvbWlzZSBkb2Vzbid0IHJlc29sdmUgaW4gdGltZUluTVMgbWlsbGlzZWNvbmRzLlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIHByb21pc2VXaXRoVGltZW91dChwcm9taXNlLCB0aW1lSW5NUyA9IDIwMDApIHtcclxuICAgIGNvbnN0IGRlZmVycmVkUHJvbWlzZSA9IG5ldyBEZWZlcnJlZCgpO1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiBkZWZlcnJlZFByb21pc2UucmVqZWN0KCd0aW1lb3V0IScpLCB0aW1lSW5NUyk7XHJcbiAgICBwcm9taXNlLnRoZW4oZGVmZXJyZWRQcm9taXNlLnJlc29sdmUsIGRlZmVycmVkUHJvbWlzZS5yZWplY3QpO1xyXG4gICAgcmV0dXJuIGRlZmVycmVkUHJvbWlzZS5wcm9taXNlO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgcXVlcnlzdHJpbmctZm9ybWF0dGVkIHN0cmluZyAoZS5nLiAmYXJnPXZhbCZhcmcyPXZhbDIpIGZyb20gYVxyXG4gKiBwYXJhbXMgb2JqZWN0IChlLmcuIHthcmc6ICd2YWwnLCBhcmcyOiAndmFsMid9KVxyXG4gKiBOb3RlOiBZb3UgbXVzdCBwcmVwZW5kIGl0IHdpdGggPyB3aGVuIGFkZGluZyBpdCB0byBhIFVSTC5cclxuICovXHJcbmZ1bmN0aW9uIHF1ZXJ5c3RyaW5nKHF1ZXJ5c3RyaW5nUGFyYW1zKSB7XHJcbiAgICBjb25zdCBwYXJhbXMgPSBbXTtcclxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHF1ZXJ5c3RyaW5nUGFyYW1zKSkge1xyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICAgICAgICB2YWx1ZS5mb3JFYWNoKGFycmF5VmFsID0+IHtcclxuICAgICAgICAgICAgICAgIHBhcmFtcy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGFycmF5VmFsKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcGFyYW1zLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcGFyYW1zLmxlbmd0aCA/ICcmJyArIHBhcmFtcy5qb2luKCcmJykgOiAnJztcclxufVxyXG4vKipcclxuICogRGVjb2RlcyBhIHF1ZXJ5c3RyaW5nIChlLmcuID9hcmc9dmFsJmFyZzI9dmFsMikgaW50byBhIHBhcmFtcyBvYmplY3RcclxuICogKGUuZy4ge2FyZzogJ3ZhbCcsIGFyZzI6ICd2YWwyJ30pXHJcbiAqL1xyXG5mdW5jdGlvbiBxdWVyeXN0cmluZ0RlY29kZShxdWVyeXN0cmluZykge1xyXG4gICAgY29uc3Qgb2JqID0ge307XHJcbiAgICBjb25zdCB0b2tlbnMgPSBxdWVyeXN0cmluZy5yZXBsYWNlKC9eXFw/LywgJycpLnNwbGl0KCcmJyk7XHJcbiAgICB0b2tlbnMuZm9yRWFjaCh0b2tlbiA9PiB7XHJcbiAgICAgICAgaWYgKHRva2VuKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IFtrZXksIHZhbHVlXSA9IHRva2VuLnNwbGl0KCc9Jyk7XHJcbiAgICAgICAgICAgIG9ialtkZWNvZGVVUklDb21wb25lbnQoa2V5KV0gPSBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIG9iajtcclxufVxyXG4vKipcclxuICogRXh0cmFjdCB0aGUgcXVlcnkgc3RyaW5nIHBhcnQgb2YgYSBVUkwsIGluY2x1ZGluZyB0aGUgbGVhZGluZyBxdWVzdGlvbiBtYXJrIChpZiBwcmVzZW50KS5cclxuICovXHJcbmZ1bmN0aW9uIGV4dHJhY3RRdWVyeXN0cmluZyh1cmwpIHtcclxuICAgIGNvbnN0IHF1ZXJ5U3RhcnQgPSB1cmwuaW5kZXhPZignPycpO1xyXG4gICAgaWYgKCFxdWVyeVN0YXJ0KSB7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZnJhZ21lbnRTdGFydCA9IHVybC5pbmRleE9mKCcjJywgcXVlcnlTdGFydCk7XHJcbiAgICByZXR1cm4gdXJsLnN1YnN0cmluZyhxdWVyeVN0YXJ0LCBmcmFnbWVudFN0YXJ0ID4gMCA/IGZyYWdtZW50U3RhcnQgOiB1bmRlZmluZWQpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IFNIQS0xIGNyeXB0b2dyYXBoaWMgaGFzaC5cclxuICogVmFyaWFibGUgbmFtZXMgZm9sbG93IHRoZSBub3RhdGlvbiBpbiBGSVBTIFBVQiAxODAtMzpcclxuICogaHR0cDovL2NzcmMubmlzdC5nb3YvcHVibGljYXRpb25zL2ZpcHMvZmlwczE4MC0zL2ZpcHMxODAtM19maW5hbC5wZGYuXHJcbiAqXHJcbiAqIFVzYWdlOlxyXG4gKiAgIHZhciBzaGExID0gbmV3IHNoYTEoKTtcclxuICogICBzaGExLnVwZGF0ZShieXRlcyk7XHJcbiAqICAgdmFyIGhhc2ggPSBzaGExLmRpZ2VzdCgpO1xyXG4gKlxyXG4gKiBQZXJmb3JtYW5jZTpcclxuICogICBDaHJvbWUgMjM6ICAgfjQwMCBNYml0L3NcclxuICogICBGaXJlZm94IDE2OiAgfjI1MCBNYml0L3NcclxuICpcclxuICovXHJcbi8qKlxyXG4gKiBTSEEtMSBjcnlwdG9ncmFwaGljIGhhc2ggY29uc3RydWN0b3IuXHJcbiAqXHJcbiAqIFRoZSBwcm9wZXJ0aWVzIGRlY2xhcmVkIGhlcmUgYXJlIGRpc2N1c3NlZCBpbiB0aGUgYWJvdmUgYWxnb3JpdGhtIGRvY3VtZW50LlxyXG4gKiBAY29uc3RydWN0b3JcclxuICogQGZpbmFsXHJcbiAqIEBzdHJ1Y3RcclxuICovXHJcbmNsYXNzIFNoYTEge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSG9sZHMgdGhlIHByZXZpb3VzIHZhbHVlcyBvZiBhY2N1bXVsYXRlZCB2YXJpYWJsZXMgYS1lIGluIHRoZSBjb21wcmVzc19cclxuICAgICAgICAgKiBmdW5jdGlvbi5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuY2hhaW5fID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQSBidWZmZXIgaG9sZGluZyB0aGUgcGFydGlhbGx5IGNvbXB1dGVkIGhhc2ggcmVzdWx0LlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5idWZfID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQW4gYXJyYXkgb2YgODAgYnl0ZXMsIGVhY2ggYSBwYXJ0IG9mIHRoZSBtZXNzYWdlIHRvIGJlIGhhc2hlZC4gIFJlZmVycmVkIHRvXHJcbiAgICAgICAgICogYXMgdGhlIG1lc3NhZ2Ugc2NoZWR1bGUgaW4gdGhlIGRvY3MuXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLldfID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ29udGFpbnMgZGF0YSBuZWVkZWQgdG8gcGFkIG1lc3NhZ2VzIGxlc3MgdGhhbiA2NCBieXRlcy5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMucGFkXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwcml2YXRlIHtudW1iZXJ9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5pbmJ1Zl8gPSAwO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwcml2YXRlIHtudW1iZXJ9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy50b3RhbF8gPSAwO1xyXG4gICAgICAgIHRoaXMuYmxvY2tTaXplID0gNTEyIC8gODtcclxuICAgICAgICB0aGlzLnBhZF9bMF0gPSAxMjg7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aGlzLmJsb2NrU2l6ZTsgKytpKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFkX1tpXSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVzZXQoKTtcclxuICAgIH1cclxuICAgIHJlc2V0KCkge1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzBdID0gMHg2NzQ1MjMwMTtcclxuICAgICAgICB0aGlzLmNoYWluX1sxXSA9IDB4ZWZjZGFiODk7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMl0gPSAweDk4YmFkY2ZlO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzNdID0gMHgxMDMyNTQ3NjtcclxuICAgICAgICB0aGlzLmNoYWluX1s0XSA9IDB4YzNkMmUxZjA7XHJcbiAgICAgICAgdGhpcy5pbmJ1Zl8gPSAwO1xyXG4gICAgICAgIHRoaXMudG90YWxfID0gMDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSW50ZXJuYWwgY29tcHJlc3MgaGVscGVyIGZ1bmN0aW9uLlxyXG4gICAgICogQHBhcmFtIGJ1ZiBCbG9jayB0byBjb21wcmVzcy5cclxuICAgICAqIEBwYXJhbSBvZmZzZXQgT2Zmc2V0IG9mIHRoZSBibG9jayBpbiB0aGUgYnVmZmVyLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgY29tcHJlc3NfKGJ1Ziwgb2Zmc2V0KSB7XHJcbiAgICAgICAgaWYgKCFvZmZzZXQpIHtcclxuICAgICAgICAgICAgb2Zmc2V0ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgVyA9IHRoaXMuV187XHJcbiAgICAgICAgLy8gZ2V0IDE2IGJpZyBlbmRpYW4gd29yZHNcclxuICAgICAgICBpZiAodHlwZW9mIGJ1ZiA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPKHVzZXIpOiBbYnVnIDgxNDAxMjJdIFJlY2VudCB2ZXJzaW9ucyBvZiBTYWZhcmkgZm9yIE1hYyBPUyBhbmQgaU9TXHJcbiAgICAgICAgICAgICAgICAvLyBoYXZlIGEgYnVnIHRoYXQgdHVybnMgdGhlIHBvc3QtaW5jcmVtZW50ICsrIG9wZXJhdG9yIGludG8gcHJlLWluY3JlbWVudFxyXG4gICAgICAgICAgICAgICAgLy8gZHVyaW5nIEpJVCBjb21waWxhdGlvbi4gIFdlIGhhdmUgY29kZSB0aGF0IGRlcGVuZHMgaGVhdmlseSBvbiBTSEEtMSBmb3JcclxuICAgICAgICAgICAgICAgIC8vIGNvcnJlY3RuZXNzIGFuZCB3aGljaCBpcyBhZmZlY3RlZCBieSB0aGlzIGJ1Zywgc28gSSd2ZSByZW1vdmVkIGFsbCB1c2VzXHJcbiAgICAgICAgICAgICAgICAvLyBvZiBwb3N0LWluY3JlbWVudCArKyBpbiB3aGljaCB0aGUgcmVzdWx0IHZhbHVlIGlzIHVzZWQuICBXZSBjYW4gcmV2ZXJ0XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzIGNoYW5nZSBvbmNlIHRoZSBTYWZhcmkgYnVnXHJcbiAgICAgICAgICAgICAgICAvLyAoaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTEwOTAzNikgaGFzIGJlZW4gZml4ZWQgYW5kXHJcbiAgICAgICAgICAgICAgICAvLyBtb3N0IGNsaWVudHMgaGF2ZSBiZWVuIHVwZGF0ZWQuXHJcbiAgICAgICAgICAgICAgICBXW2ldID1cclxuICAgICAgICAgICAgICAgICAgICAoYnVmLmNoYXJDb2RlQXQob2Zmc2V0KSA8PCAyNCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmLmNoYXJDb2RlQXQob2Zmc2V0ICsgMSkgPDwgMTYpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCArIDIpIDw8IDgpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnVmLmNoYXJDb2RlQXQob2Zmc2V0ICsgMyk7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gNDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBXW2ldID1cclxuICAgICAgICAgICAgICAgICAgICAoYnVmW29mZnNldF0gPDwgMjQpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1ZltvZmZzZXQgKyAxXSA8PCAxNikgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmW29mZnNldCArIDJdIDw8IDgpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnVmW29mZnNldCArIDNdO1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gZXhwYW5kIHRvIDgwIHdvcmRzXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE2OyBpIDwgODA7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCB0ID0gV1tpIC0gM10gXiBXW2kgLSA4XSBeIFdbaSAtIDE0XSBeIFdbaSAtIDE2XTtcclxuICAgICAgICAgICAgV1tpXSA9ICgodCA8PCAxKSB8ICh0ID4+PiAzMSkpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGEgPSB0aGlzLmNoYWluX1swXTtcclxuICAgICAgICBsZXQgYiA9IHRoaXMuY2hhaW5fWzFdO1xyXG4gICAgICAgIGxldCBjID0gdGhpcy5jaGFpbl9bMl07XHJcbiAgICAgICAgbGV0IGQgPSB0aGlzLmNoYWluX1szXTtcclxuICAgICAgICBsZXQgZSA9IHRoaXMuY2hhaW5fWzRdO1xyXG4gICAgICAgIGxldCBmLCBrO1xyXG4gICAgICAgIC8vIFRPRE8odXNlcik6IFRyeSB0byB1bnJvbGwgdGhpcyBsb29wIHRvIHNwZWVkIHVwIHRoZSBjb21wdXRhdGlvbi5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDgwOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGkgPCA0MCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgPCAyMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSBkIF4gKGIgJiAoYyBeIGQpKTtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHg1YTgyNzk5OTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSBiIF4gYyBeIGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4NmVkOWViYTE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA8IDYwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZiA9IChiICYgYykgfCAoZCAmIChiIHwgYykpO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweDhmMWJiY2RjO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZiA9IGIgXiBjIF4gZDtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHhjYTYyYzFkNjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCB0ID0gKCgoYSA8PCA1KSB8IChhID4+PiAyNykpICsgZiArIGUgKyBrICsgV1tpXSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgICAgICBlID0gZDtcclxuICAgICAgICAgICAgZCA9IGM7XHJcbiAgICAgICAgICAgIGMgPSAoKGIgPDwgMzApIHwgKGIgPj4+IDIpKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgICAgIGIgPSBhO1xyXG4gICAgICAgICAgICBhID0gdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMF0gPSAodGhpcy5jaGFpbl9bMF0gKyBhKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMV0gPSAodGhpcy5jaGFpbl9bMV0gKyBiKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMl0gPSAodGhpcy5jaGFpbl9bMl0gKyBjKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bM10gPSAodGhpcy5jaGFpbl9bM10gKyBkKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bNF0gPSAodGhpcy5jaGFpbl9bNF0gKyBlKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICB9XHJcbiAgICB1cGRhdGUoYnl0ZXMsIGxlbmd0aCkge1xyXG4gICAgICAgIC8vIFRPRE8oam9obmxlbnopOiB0aWdodGVuIHRoZSBmdW5jdGlvbiBzaWduYXR1cmUgYW5kIHJlbW92ZSB0aGlzIGNoZWNrXHJcbiAgICAgICAgaWYgKGJ5dGVzID09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgbGVuZ3RoID0gYnl0ZXMubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBsZW5ndGhNaW51c0Jsb2NrID0gbGVuZ3RoIC0gdGhpcy5ibG9ja1NpemU7XHJcbiAgICAgICAgbGV0IG4gPSAwO1xyXG4gICAgICAgIC8vIFVzaW5nIGxvY2FsIGluc3RlYWQgb2YgbWVtYmVyIHZhcmlhYmxlcyBnaXZlcyB+NSUgc3BlZWR1cCBvbiBGaXJlZm94IDE2LlxyXG4gICAgICAgIGNvbnN0IGJ1ZiA9IHRoaXMuYnVmXztcclxuICAgICAgICBsZXQgaW5idWYgPSB0aGlzLmluYnVmXztcclxuICAgICAgICAvLyBUaGUgb3V0ZXIgd2hpbGUgbG9vcCBzaG91bGQgZXhlY3V0ZSBhdCBtb3N0IHR3aWNlLlxyXG4gICAgICAgIHdoaWxlIChuIDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgaGF2ZSBubyBkYXRhIGluIHRoZSBibG9jayB0byB0b3AgdXAsIHdlIGNhbiBkaXJlY3RseSBwcm9jZXNzIHRoZVxyXG4gICAgICAgICAgICAvLyBpbnB1dCBidWZmZXIgKGFzc3VtaW5nIGl0IGNvbnRhaW5zIHN1ZmZpY2llbnQgZGF0YSkuIFRoaXMgZ2l2ZXMgfjI1JVxyXG4gICAgICAgICAgICAvLyBzcGVlZHVwIG9uIENocm9tZSAyMyBhbmQgfjE1JSBzcGVlZHVwIG9uIEZpcmVmb3ggMTYsIGJ1dCByZXF1aXJlcyB0aGF0XHJcbiAgICAgICAgICAgIC8vIHRoZSBkYXRhIGlzIHByb3ZpZGVkIGluIGxhcmdlIGNodW5rcyAob3IgaW4gbXVsdGlwbGVzIG9mIDY0IGJ5dGVzKS5cclxuICAgICAgICAgICAgaWYgKGluYnVmID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobiA8PSBsZW5ndGhNaW51c0Jsb2NrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcmVzc18oYnl0ZXMsIG4pO1xyXG4gICAgICAgICAgICAgICAgICAgIG4gKz0gdGhpcy5ibG9ja1NpemU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBieXRlcyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChuIDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVmW2luYnVmXSA9IGJ5dGVzLmNoYXJDb2RlQXQobik7XHJcbiAgICAgICAgICAgICAgICAgICAgKytpbmJ1ZjtcclxuICAgICAgICAgICAgICAgICAgICArK247XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluYnVmID09PSB0aGlzLmJsb2NrU2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXByZXNzXyhidWYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmJ1ZiA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEp1bXAgdG8gdGhlIG91dGVyIGxvb3Agc28gd2UgdXNlIHRoZSBmdWxsLWJsb2NrIG9wdGltaXphdGlvbi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKG4gPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBidWZbaW5idWZdID0gYnl0ZXNbbl07XHJcbiAgICAgICAgICAgICAgICAgICAgKytpbmJ1ZjtcclxuICAgICAgICAgICAgICAgICAgICArK247XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluYnVmID09PSB0aGlzLmJsb2NrU2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXByZXNzXyhidWYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmJ1ZiA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEp1bXAgdG8gdGhlIG91dGVyIGxvb3Agc28gd2UgdXNlIHRoZSBmdWxsLWJsb2NrIG9wdGltaXphdGlvbi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaW5idWZfID0gaW5idWY7XHJcbiAgICAgICAgdGhpcy50b3RhbF8gKz0gbGVuZ3RoO1xyXG4gICAgfVxyXG4gICAgLyoqIEBvdmVycmlkZSAqL1xyXG4gICAgZGlnZXN0KCkge1xyXG4gICAgICAgIGNvbnN0IGRpZ2VzdCA9IFtdO1xyXG4gICAgICAgIGxldCB0b3RhbEJpdHMgPSB0aGlzLnRvdGFsXyAqIDg7XHJcbiAgICAgICAgLy8gQWRkIHBhZCAweDgwIDB4MDAqLlxyXG4gICAgICAgIGlmICh0aGlzLmluYnVmXyA8IDU2KSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKHRoaXMucGFkXywgNTYgLSB0aGlzLmluYnVmXyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSh0aGlzLnBhZF8sIHRoaXMuYmxvY2tTaXplIC0gKHRoaXMuaW5idWZfIC0gNTYpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQWRkICMgYml0cy5cclxuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5ibG9ja1NpemUgLSAxOyBpID49IDU2OyBpLS0pIHtcclxuICAgICAgICAgICAgdGhpcy5idWZfW2ldID0gdG90YWxCaXRzICYgMjU1O1xyXG4gICAgICAgICAgICB0b3RhbEJpdHMgLz0gMjU2OyAvLyBEb24ndCB1c2UgYml0LXNoaWZ0aW5nIGhlcmUhXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29tcHJlc3NfKHRoaXMuYnVmXyk7XHJcbiAgICAgICAgbGV0IG4gPSAwO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAyNDsgaiA+PSAwOyBqIC09IDgpIHtcclxuICAgICAgICAgICAgICAgIGRpZ2VzdFtuXSA9ICh0aGlzLmNoYWluX1tpXSA+PiBqKSAmIDI1NTtcclxuICAgICAgICAgICAgICAgICsrbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGlnZXN0O1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBIZWxwZXIgdG8gbWFrZSBhIFN1YnNjcmliZSBmdW5jdGlvbiAoanVzdCBsaWtlIFByb21pc2UgaGVscHMgbWFrZSBhXHJcbiAqIFRoZW5hYmxlKS5cclxuICpcclxuICogQHBhcmFtIGV4ZWN1dG9yIEZ1bmN0aW9uIHdoaWNoIGNhbiBtYWtlIGNhbGxzIHRvIGEgc2luZ2xlIE9ic2VydmVyXHJcbiAqICAgICBhcyBhIHByb3h5LlxyXG4gKiBAcGFyYW0gb25Ob09ic2VydmVycyBDYWxsYmFjayB3aGVuIGNvdW50IG9mIE9ic2VydmVycyBnb2VzIHRvIHplcm8uXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVTdWJzY3JpYmUoZXhlY3V0b3IsIG9uTm9PYnNlcnZlcnMpIHtcclxuICAgIGNvbnN0IHByb3h5ID0gbmV3IE9ic2VydmVyUHJveHkoZXhlY3V0b3IsIG9uTm9PYnNlcnZlcnMpO1xyXG4gICAgcmV0dXJuIHByb3h5LnN1YnNjcmliZS5iaW5kKHByb3h5KTtcclxufVxyXG4vKipcclxuICogSW1wbGVtZW50IGZhbi1vdXQgZm9yIGFueSBudW1iZXIgb2YgT2JzZXJ2ZXJzIGF0dGFjaGVkIHZpYSBhIHN1YnNjcmliZVxyXG4gKiBmdW5jdGlvbi5cclxuICovXHJcbmNsYXNzIE9ic2VydmVyUHJveHkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gZXhlY3V0b3IgRnVuY3Rpb24gd2hpY2ggY2FuIG1ha2UgY2FsbHMgdG8gYSBzaW5nbGUgT2JzZXJ2ZXJcclxuICAgICAqICAgICBhcyBhIHByb3h5LlxyXG4gICAgICogQHBhcmFtIG9uTm9PYnNlcnZlcnMgQ2FsbGJhY2sgd2hlbiBjb3VudCBvZiBPYnNlcnZlcnMgZ29lcyB0byB6ZXJvLlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihleGVjdXRvciwgb25Ob09ic2VydmVycykge1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gW107XHJcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZXMgPSBbXTtcclxuICAgICAgICB0aGlzLm9ic2VydmVyQ291bnQgPSAwO1xyXG4gICAgICAgIC8vIE1pY3JvLXRhc2sgc2NoZWR1bGluZyBieSBjYWxsaW5nIHRhc2sudGhlbigpLlxyXG4gICAgICAgIHRoaXMudGFzayA9IFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIHRoaXMuZmluYWxpemVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5vbk5vT2JzZXJ2ZXJzID0gb25Ob09ic2VydmVycztcclxuICAgICAgICAvLyBDYWxsIHRoZSBleGVjdXRvciBhc3luY2hyb25vdXNseSBzbyBzdWJzY3JpYmVycyB0aGF0IGFyZSBjYWxsZWRcclxuICAgICAgICAvLyBzeW5jaHJvbm91c2x5IGFmdGVyIHRoZSBjcmVhdGlvbiBvZiB0aGUgc3Vic2NyaWJlIGZ1bmN0aW9uXHJcbiAgICAgICAgLy8gY2FuIHN0aWxsIHJlY2VpdmUgdGhlIHZlcnkgZmlyc3QgdmFsdWUgZ2VuZXJhdGVkIGluIHRoZSBleGVjdXRvci5cclxuICAgICAgICB0aGlzLnRhc2tcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBleGVjdXRvcih0aGlzKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZXJyb3IoZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBuZXh0KHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoT2JzZXJ2ZXIoKG9ic2VydmVyKSA9PiB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLm5leHQodmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZXJyb3IoZXJyb3IpIHtcclxuICAgICAgICB0aGlzLmZvckVhY2hPYnNlcnZlcigob2JzZXJ2ZXIpID0+IHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY2xvc2UoZXJyb3IpO1xyXG4gICAgfVxyXG4gICAgY29tcGxldGUoKSB7XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoT2JzZXJ2ZXIoKG9ic2VydmVyKSA9PiB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTdWJzY3JpYmUgZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBhZGQgYW4gT2JzZXJ2ZXIgdG8gdGhlIGZhbi1vdXQgbGlzdC5cclxuICAgICAqXHJcbiAgICAgKiAtIFdlIHJlcXVpcmUgdGhhdCBubyBldmVudCBpcyBzZW50IHRvIGEgc3Vic2NyaWJlciBzeWNocm9ub3VzbHkgdG8gdGhlaXJcclxuICAgICAqICAgY2FsbCB0byBzdWJzY3JpYmUoKS5cclxuICAgICAqL1xyXG4gICAgc3Vic2NyaWJlKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGUpIHtcclxuICAgICAgICBsZXQgb2JzZXJ2ZXI7XHJcbiAgICAgICAgaWYgKG5leHRPck9ic2VydmVyID09PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgZXJyb3IgPT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgICBjb21wbGV0ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBPYnNlcnZlci4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQXNzZW1ibGUgYW4gT2JzZXJ2ZXIgb2JqZWN0IHdoZW4gcGFzc2VkIGFzIGNhbGxiYWNrIGZ1bmN0aW9ucy5cclxuICAgICAgICBpZiAoaW1wbGVtZW50c0FueU1ldGhvZHMobmV4dE9yT2JzZXJ2ZXIsIFtcclxuICAgICAgICAgICAgJ25leHQnLFxyXG4gICAgICAgICAgICAnZXJyb3InLFxyXG4gICAgICAgICAgICAnY29tcGxldGUnXHJcbiAgICAgICAgXSkpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIgPSBuZXh0T3JPYnNlcnZlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyID0ge1xyXG4gICAgICAgICAgICAgICAgbmV4dDogbmV4dE9yT2JzZXJ2ZXIsXHJcbiAgICAgICAgICAgICAgICBlcnJvcixcclxuICAgICAgICAgICAgICAgIGNvbXBsZXRlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvYnNlcnZlci5uZXh0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dCA9IG5vb3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvYnNlcnZlci5lcnJvciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yID0gbm9vcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9ic2VydmVyLmNvbXBsZXRlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUgPSBub29wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB1bnN1YiA9IHRoaXMudW5zdWJzY3JpYmVPbmUuYmluZCh0aGlzLCB0aGlzLm9ic2VydmVycy5sZW5ndGgpO1xyXG4gICAgICAgIC8vIEF0dGVtcHQgdG8gc3Vic2NyaWJlIHRvIGEgdGVybWluYXRlZCBPYnNlcnZhYmxlIC0gd2VcclxuICAgICAgICAvLyBqdXN0IHJlc3BvbmQgdG8gdGhlIE9ic2VydmVyIHdpdGggdGhlIGZpbmFsIGVycm9yIG9yIGNvbXBsZXRlXHJcbiAgICAgICAgLy8gZXZlbnQuXHJcbiAgICAgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICAgICAgdGhpcy50YXNrLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5maW5hbEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKHRoaXMuZmluYWxFcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbm90aGluZ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMucHVzaChvYnNlcnZlcik7XHJcbiAgICAgICAgcmV0dXJuIHVuc3ViO1xyXG4gICAgfVxyXG4gICAgLy8gVW5zdWJzY3JpYmUgaXMgc3luY2hyb25vdXMgLSB3ZSBndWFyYW50ZWUgdGhhdCBubyBldmVudHMgYXJlIHNlbnQgdG9cclxuICAgIC8vIGFueSB1bnN1YnNjcmliZWQgT2JzZXJ2ZXIuXHJcbiAgICB1bnN1YnNjcmliZU9uZShpKSB7XHJcbiAgICAgICAgaWYgKHRoaXMub2JzZXJ2ZXJzID09PSB1bmRlZmluZWQgfHwgdGhpcy5vYnNlcnZlcnNbaV0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRlbGV0ZSB0aGlzLm9ic2VydmVyc1tpXTtcclxuICAgICAgICB0aGlzLm9ic2VydmVyQ291bnQgLT0gMTtcclxuICAgICAgICBpZiAodGhpcy5vYnNlcnZlckNvdW50ID09PSAwICYmIHRoaXMub25Ob09ic2VydmVycyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25Ob09ic2VydmVycyh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmb3JFYWNoT2JzZXJ2ZXIoZm4pIHtcclxuICAgICAgICBpZiAodGhpcy5maW5hbGl6ZWQpIHtcclxuICAgICAgICAgICAgLy8gQWxyZWFkeSBjbG9zZWQgYnkgcHJldmlvdXMgZXZlbnQuLi4uanVzdCBlYXQgdGhlIGFkZGl0aW9uYWwgdmFsdWVzLlxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFNpbmNlIHNlbmRPbmUgY2FsbHMgYXN5bmNocm9ub3VzbHkgLSB0aGVyZSBpcyBubyBjaGFuY2UgdGhhdFxyXG4gICAgICAgIC8vIHRoaXMub2JzZXJ2ZXJzIHdpbGwgYmVjb21lIHVuZGVmaW5lZC5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMub2JzZXJ2ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VuZE9uZShpLCBmbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gQ2FsbCB0aGUgT2JzZXJ2ZXIgdmlhIG9uZSBvZiBpdCdzIGNhbGxiYWNrIGZ1bmN0aW9uLiBXZSBhcmUgY2FyZWZ1bCB0b1xyXG4gICAgLy8gY29uZmlybSB0aGF0IHRoZSBvYnNlcnZlIGhhcyBub3QgYmVlbiB1bnN1YnNjcmliZWQgc2luY2UgdGhpcyBhc3luY2hyb25vdXNcclxuICAgIC8vIGZ1bmN0aW9uIGhhZCBiZWVuIHF1ZXVlZC5cclxuICAgIHNlbmRPbmUoaSwgZm4pIHtcclxuICAgICAgICAvLyBFeGVjdXRlIHRoZSBjYWxsYmFjayBhc3luY2hyb25vdXNseVxyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICB0aGlzLnRhc2sudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9ic2VydmVycyAhPT0gdW5kZWZpbmVkICYmIHRoaXMub2JzZXJ2ZXJzW2ldICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm4odGhpcy5vYnNlcnZlcnNbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgZXhjZXB0aW9ucyByYWlzZWQgaW4gT2JzZXJ2ZXJzIG9yIG1pc3NpbmcgbWV0aG9kcyBvZiBhblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIE9ic2VydmVyLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIExvZyBlcnJvciB0byBjb25zb2xlLiBiLzMxNDA0ODA2XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJiBjb25zb2xlLmVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjbG9zZShlcnIpIHtcclxuICAgICAgICBpZiAodGhpcy5maW5hbGl6ZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmZpbmFsaXplZCA9IHRydWU7XHJcbiAgICAgICAgaWYgKGVyciAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmluYWxFcnJvciA9IGVycjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUHJveHkgaXMgbm8gbG9uZ2VyIG5lZWRlZCAtIGdhcmJhZ2UgY29sbGVjdCByZWZlcmVuY2VzXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgICAgIHRoaXMudGFzay50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5vYnNlcnZlcnMgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHRoaXMub25Ob09ic2VydmVycyA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4vKiogVHVybiBzeW5jaHJvbm91cyBmdW5jdGlvbiBpbnRvIG9uZSBjYWxsZWQgYXN5bmNocm9ub3VzbHkuICovXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXR5cGVzXHJcbmZ1bmN0aW9uIGFzeW5jKGZuLCBvbkVycm9yKSB7XHJcbiAgICByZXR1cm4gKC4uLmFyZ3MpID0+IHtcclxuICAgICAgICBQcm9taXNlLnJlc29sdmUodHJ1ZSlcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBmbiguLi5hcmdzKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChvbkVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBvbkVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxufVxyXG4vKipcclxuICogUmV0dXJuIHRydWUgaWYgdGhlIG9iamVjdCBwYXNzZWQgaW4gaW1wbGVtZW50cyBhbnkgb2YgdGhlIG5hbWVkIG1ldGhvZHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBpbXBsZW1lbnRzQW55TWV0aG9kcyhvYmosIG1ldGhvZHMpIHtcclxuICAgIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0JyB8fCBvYmogPT09IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IG1ldGhvZCBvZiBtZXRob2RzKSB7XHJcbiAgICAgICAgaWYgKG1ldGhvZCBpbiBvYmogJiYgdHlwZW9mIG9ialttZXRob2RdID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxufVxyXG5mdW5jdGlvbiBub29wKCkge1xyXG4gICAgLy8gZG8gbm90aGluZ1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBDaGVjayB0byBtYWtlIHN1cmUgdGhlIGFwcHJvcHJpYXRlIG51bWJlciBvZiBhcmd1bWVudHMgYXJlIHByb3ZpZGVkIGZvciBhIHB1YmxpYyBmdW5jdGlvbi5cclxuICogVGhyb3dzIGFuIGVycm9yIGlmIGl0IGZhaWxzLlxyXG4gKlxyXG4gKiBAcGFyYW0gZm5OYW1lIFRoZSBmdW5jdGlvbiBuYW1lXHJcbiAqIEBwYXJhbSBtaW5Db3VudCBUaGUgbWluaW11bSBudW1iZXIgb2YgYXJndW1lbnRzIHRvIGFsbG93IGZvciB0aGUgZnVuY3Rpb24gY2FsbFxyXG4gKiBAcGFyYW0gbWF4Q291bnQgVGhlIG1heGltdW0gbnVtYmVyIG9mIGFyZ3VtZW50IHRvIGFsbG93IGZvciB0aGUgZnVuY3Rpb24gY2FsbFxyXG4gKiBAcGFyYW0gYXJnQ291bnQgVGhlIGFjdHVhbCBudW1iZXIgb2YgYXJndW1lbnRzIHByb3ZpZGVkLlxyXG4gKi9cclxuY29uc3QgdmFsaWRhdGVBcmdDb3VudCA9IGZ1bmN0aW9uIChmbk5hbWUsIG1pbkNvdW50LCBtYXhDb3VudCwgYXJnQ291bnQpIHtcclxuICAgIGxldCBhcmdFcnJvcjtcclxuICAgIGlmIChhcmdDb3VudCA8IG1pbkNvdW50KSB7XHJcbiAgICAgICAgYXJnRXJyb3IgPSAnYXQgbGVhc3QgJyArIG1pbkNvdW50O1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoYXJnQ291bnQgPiBtYXhDb3VudCkge1xyXG4gICAgICAgIGFyZ0Vycm9yID0gbWF4Q291bnQgPT09IDAgPyAnbm9uZScgOiAnbm8gbW9yZSB0aGFuICcgKyBtYXhDb3VudDtcclxuICAgIH1cclxuICAgIGlmIChhcmdFcnJvcikge1xyXG4gICAgICAgIGNvbnN0IGVycm9yID0gZm5OYW1lICtcclxuICAgICAgICAgICAgJyBmYWlsZWQ6IFdhcyBjYWxsZWQgd2l0aCAnICtcclxuICAgICAgICAgICAgYXJnQ291bnQgK1xyXG4gICAgICAgICAgICAoYXJnQ291bnQgPT09IDEgPyAnIGFyZ3VtZW50LicgOiAnIGFyZ3VtZW50cy4nKSArXHJcbiAgICAgICAgICAgICcgRXhwZWN0cyAnICtcclxuICAgICAgICAgICAgYXJnRXJyb3IgK1xyXG4gICAgICAgICAgICAnLic7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIEdlbmVyYXRlcyBhIHN0cmluZyB0byBwcmVmaXggYW4gZXJyb3IgbWVzc2FnZSBhYm91dCBmYWlsZWQgYXJndW1lbnQgdmFsaWRhdGlvblxyXG4gKlxyXG4gKiBAcGFyYW0gZm5OYW1lIFRoZSBmdW5jdGlvbiBuYW1lXHJcbiAqIEBwYXJhbSBhcmdOYW1lIFRoZSBuYW1lIG9mIHRoZSBhcmd1bWVudFxyXG4gKiBAcmV0dXJuIFRoZSBwcmVmaXggdG8gYWRkIHRvIHRoZSBlcnJvciB0aHJvd24gZm9yIHZhbGlkYXRpb24uXHJcbiAqL1xyXG5mdW5jdGlvbiBlcnJvclByZWZpeChmbk5hbWUsIGFyZ05hbWUpIHtcclxuICAgIHJldHVybiBgJHtmbk5hbWV9IGZhaWxlZDogJHthcmdOYW1lfSBhcmd1bWVudCBgO1xyXG59XHJcbi8qKlxyXG4gKiBAcGFyYW0gZm5OYW1lXHJcbiAqIEBwYXJhbSBhcmd1bWVudE51bWJlclxyXG4gKiBAcGFyYW0gbmFtZXNwYWNlXHJcbiAqIEBwYXJhbSBvcHRpb25hbFxyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVOYW1lc3BhY2UoZm5OYW1lLCBuYW1lc3BhY2UsIG9wdGlvbmFsKSB7XHJcbiAgICBpZiAob3B0aW9uYWwgJiYgIW5hbWVzcGFjZSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgbmFtZXNwYWNlICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIC8vVE9ETzogSSBzaG91bGQgZG8gbW9yZSB2YWxpZGF0aW9uIGhlcmUuIFdlIG9ubHkgYWxsb3cgY2VydGFpbiBjaGFycyBpbiBuYW1lc3BhY2VzLlxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsICduYW1lc3BhY2UnKSArICdtdXN0IGJlIGEgdmFsaWQgZmlyZWJhc2UgbmFtZXNwYWNlLicpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHZhbGlkYXRlQ2FsbGJhY2soZm5OYW1lLCBhcmd1bWVudE5hbWUsIFxyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlc1xyXG5jYWxsYmFjaywgb3B0aW9uYWwpIHtcclxuICAgIGlmIChvcHRpb25hbCAmJiAhY2FsbGJhY2spIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yUHJlZml4KGZuTmFtZSwgYXJndW1lbnROYW1lKSArICdtdXN0IGJlIGEgdmFsaWQgZnVuY3Rpb24uJyk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gdmFsaWRhdGVDb250ZXh0T2JqZWN0KGZuTmFtZSwgYXJndW1lbnROYW1lLCBjb250ZXh0LCBvcHRpb25hbCkge1xyXG4gICAgaWYgKG9wdGlvbmFsICYmICFjb250ZXh0KSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBjb250ZXh0ICE9PSAnb2JqZWN0JyB8fCBjb250ZXh0ID09PSBudWxsKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yUHJlZml4KGZuTmFtZSwgYXJndW1lbnROYW1lKSArICdtdXN0IGJlIGEgdmFsaWQgY29udGV4dCBvYmplY3QuJyk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gQ29kZSBvcmlnaW5hbGx5IGNhbWUgZnJvbSBnb29nLmNyeXB0LnN0cmluZ1RvVXRmOEJ5dGVBcnJheSwgYnV0IGZvciBzb21lIHJlYXNvbiB0aGV5XHJcbi8vIGF1dG9tYXRpY2FsbHkgcmVwbGFjZWQgJ1xcclxcbicgd2l0aCAnXFxuJywgYW5kIHRoZXkgZGlkbid0IGhhbmRsZSBzdXJyb2dhdGUgcGFpcnMsXHJcbi8vIHNvIGl0J3MgYmVlbiBtb2RpZmllZC5cclxuLy8gTm90ZSB0aGF0IG5vdCBhbGwgVW5pY29kZSBjaGFyYWN0ZXJzIGFwcGVhciBhcyBzaW5nbGUgY2hhcmFjdGVycyBpbiBKYXZhU2NyaXB0IHN0cmluZ3MuXHJcbi8vIGZyb21DaGFyQ29kZSByZXR1cm5zIHRoZSBVVEYtMTYgZW5jb2Rpbmcgb2YgYSBjaGFyYWN0ZXIgLSBzbyBzb21lIFVuaWNvZGUgY2hhcmFjdGVyc1xyXG4vLyB1c2UgMiBjaGFyYWN0ZXJzIGluIEphdmFzY3JpcHQuICBBbGwgNC1ieXRlIFVURi04IGNoYXJhY3RlcnMgYmVnaW4gd2l0aCBhIGZpcnN0XHJcbi8vIGNoYXJhY3RlciBpbiB0aGUgcmFuZ2UgMHhEODAwIC0gMHhEQkZGICh0aGUgZmlyc3QgY2hhcmFjdGVyIG9mIGEgc28tY2FsbGVkIHN1cnJvZ2F0ZVxyXG4vLyBwYWlyKS5cclxuLy8gU2VlIGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi81LjEvI3NlYy0xNS4xLjNcclxuLyoqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcclxuICogQHJldHVybiB7QXJyYXl9XHJcbiAqL1xyXG5jb25zdCBzdHJpbmdUb0J5dGVBcnJheSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIGNvbnN0IG91dCA9IFtdO1xyXG4gICAgbGV0IHAgPSAwO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBsZXQgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgIC8vIElzIHRoaXMgdGhlIGxlYWQgc3Vycm9nYXRlIGluIGEgc3Vycm9nYXRlIHBhaXI/XHJcbiAgICAgICAgaWYgKGMgPj0gMHhkODAwICYmIGMgPD0gMHhkYmZmKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGhpZ2ggPSBjIC0gMHhkODAwOyAvLyB0aGUgaGlnaCAxMCBiaXRzLlxyXG4gICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIGFzc2VydChpIDwgc3RyLmxlbmd0aCwgJ1N1cnJvZ2F0ZSBwYWlyIG1pc3NpbmcgdHJhaWwgc3Vycm9nYXRlLicpO1xyXG4gICAgICAgICAgICBjb25zdCBsb3cgPSBzdHIuY2hhckNvZGVBdChpKSAtIDB4ZGMwMDsgLy8gdGhlIGxvdyAxMCBiaXRzLlxyXG4gICAgICAgICAgICBjID0gMHgxMDAwMCArIChoaWdoIDw8IDEwKSArIGxvdztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGMgPCAxMjgpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSBjO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgMjA0OCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDYpIHwgMTkyO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgNjU1MzYpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxMikgfCAyMjQ7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxOCkgfCAyNDA7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDEyKSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG91dDtcclxufTtcclxuLyoqXHJcbiAqIENhbGN1bGF0ZSBsZW5ndGggd2l0aG91dCBhY3R1YWxseSBjb252ZXJ0aW5nOyB1c2VmdWwgZm9yIGRvaW5nIGNoZWFwZXIgdmFsaWRhdGlvbi5cclxuICogQHBhcmFtIHtzdHJpbmd9IHN0clxyXG4gKiBAcmV0dXJuIHtudW1iZXJ9XHJcbiAqL1xyXG5jb25zdCBzdHJpbmdMZW5ndGggPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICBsZXQgcCA9IDA7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGMgPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgICBpZiAoYyA8IDEyOCkge1xyXG4gICAgICAgICAgICBwKys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KSB7XHJcbiAgICAgICAgICAgIHAgKz0gMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA+PSAweGQ4MDAgJiYgYyA8PSAweGRiZmYpIHtcclxuICAgICAgICAgICAgLy8gTGVhZCBzdXJyb2dhdGUgb2YgYSBzdXJyb2dhdGUgcGFpci4gIFRoZSBwYWlyIHRvZ2V0aGVyIHdpbGwgdGFrZSA0IGJ5dGVzIHRvIHJlcHJlc2VudC5cclxuICAgICAgICAgICAgcCArPSA0O1xyXG4gICAgICAgICAgICBpKys7IC8vIHNraXAgdHJhaWwgc3Vycm9nYXRlLlxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcCArPSAzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBwO1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQ29waWVkIGZyb20gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzIxMTc1MjNcclxuICogR2VuZXJhdGVzIGEgbmV3IHV1aWQuXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IHV1aWR2NCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGMgPT4ge1xyXG4gICAgICAgIGNvbnN0IHIgPSAoTWF0aC5yYW5kb20oKSAqIDE2KSB8IDAsIHYgPSBjID09PSAneCcgPyByIDogKHIgJiAweDMpIHwgMHg4O1xyXG4gICAgICAgIHJldHVybiB2LnRvU3RyaW5nKDE2KTtcclxuICAgIH0pO1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhlIGFtb3VudCBvZiBtaWxsaXNlY29uZHMgdG8gZXhwb25lbnRpYWxseSBpbmNyZWFzZS5cclxuICovXHJcbmNvbnN0IERFRkFVTFRfSU5URVJWQUxfTUlMTElTID0gMTAwMDtcclxuLyoqXHJcbiAqIFRoZSBmYWN0b3IgdG8gYmFja29mZiBieS5cclxuICogU2hvdWxkIGJlIGEgbnVtYmVyIGdyZWF0ZXIgdGhhbiAxLlxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9CQUNLT0ZGX0ZBQ1RPUiA9IDI7XHJcbi8qKlxyXG4gKiBUaGUgbWF4aW11bSBtaWxsaXNlY29uZHMgdG8gaW5jcmVhc2UgdG8uXHJcbiAqXHJcbiAqIDxwPlZpc2libGUgZm9yIHRlc3RpbmdcclxuICovXHJcbmNvbnN0IE1BWF9WQUxVRV9NSUxMSVMgPSA0ICogNjAgKiA2MCAqIDEwMDA7IC8vIEZvdXIgaG91cnMsIGxpa2UgaU9TIGFuZCBBbmRyb2lkLlxyXG4vKipcclxuICogVGhlIHBlcmNlbnRhZ2Ugb2YgYmFja29mZiB0aW1lIHRvIHJhbmRvbWl6ZSBieS5cclxuICogU2VlXHJcbiAqIGh0dHA6Ly9nby9zYWZlLWNsaWVudC1iZWhhdmlvciNzdGVwLTEtZGV0ZXJtaW5lLXRoZS1hcHByb3ByaWF0ZS1yZXRyeS1pbnRlcnZhbC10by1oYW5kbGUtc3Bpa2UtdHJhZmZpY1xyXG4gKiBmb3IgY29udGV4dC5cclxuICpcclxuICogPHA+VmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gKi9cclxuY29uc3QgUkFORE9NX0ZBQ1RPUiA9IDAuNTtcclxuLyoqXHJcbiAqIEJhc2VkIG9uIHRoZSBiYWNrb2ZmIG1ldGhvZCBmcm9tXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvY2xvc3VyZS1saWJyYXJ5L2Jsb2IvbWFzdGVyL2Nsb3N1cmUvZ29vZy9tYXRoL2V4cG9uZW50aWFsYmFja29mZi5qcy5cclxuICogRXh0cmFjdGVkIGhlcmUgc28gd2UgZG9uJ3QgbmVlZCB0byBwYXNzIG1ldGFkYXRhIGFuZCBhIHN0YXRlZnVsIEV4cG9uZW50aWFsQmFja29mZiBvYmplY3QgYXJvdW5kLlxyXG4gKi9cclxuZnVuY3Rpb24gY2FsY3VsYXRlQmFja29mZk1pbGxpcyhiYWNrb2ZmQ291bnQsIGludGVydmFsTWlsbGlzID0gREVGQVVMVF9JTlRFUlZBTF9NSUxMSVMsIGJhY2tvZmZGYWN0b3IgPSBERUZBVUxUX0JBQ0tPRkZfRkFDVE9SKSB7XHJcbiAgICAvLyBDYWxjdWxhdGVzIGFuIGV4cG9uZW50aWFsbHkgaW5jcmVhc2luZyB2YWx1ZS5cclxuICAgIC8vIERldmlhdGlvbjogY2FsY3VsYXRlcyB2YWx1ZSBmcm9tIGNvdW50IGFuZCBhIGNvbnN0YW50IGludGVydmFsLCBzbyB3ZSBvbmx5IG5lZWQgdG8gc2F2ZSB2YWx1ZVxyXG4gICAgLy8gYW5kIGNvdW50IHRvIHJlc3RvcmUgc3RhdGUuXHJcbiAgICBjb25zdCBjdXJyQmFzZVZhbHVlID0gaW50ZXJ2YWxNaWxsaXMgKiBNYXRoLnBvdyhiYWNrb2ZmRmFjdG9yLCBiYWNrb2ZmQ291bnQpO1xyXG4gICAgLy8gQSByYW5kb20gXCJmdXp6XCIgdG8gYXZvaWQgd2F2ZXMgb2YgcmV0cmllcy5cclxuICAgIC8vIERldmlhdGlvbjogcmFuZG9tRmFjdG9yIGlzIHJlcXVpcmVkLlxyXG4gICAgY29uc3QgcmFuZG9tV2FpdCA9IE1hdGgucm91bmQoXHJcbiAgICAvLyBBIGZyYWN0aW9uIG9mIHRoZSBiYWNrb2ZmIHZhbHVlIHRvIGFkZC9zdWJ0cmFjdC5cclxuICAgIC8vIERldmlhdGlvbjogY2hhbmdlcyBtdWx0aXBsaWNhdGlvbiBvcmRlciB0byBpbXByb3ZlIHJlYWRhYmlsaXR5LlxyXG4gICAgUkFORE9NX0ZBQ1RPUiAqXHJcbiAgICAgICAgY3VyckJhc2VWYWx1ZSAqXHJcbiAgICAgICAgLy8gQSByYW5kb20gZmxvYXQgKHJvdW5kZWQgdG8gaW50IGJ5IE1hdGgucm91bmQgYWJvdmUpIGluIHRoZSByYW5nZSBbLTEsIDFdLiBEZXRlcm1pbmVzXHJcbiAgICAgICAgLy8gaWYgd2UgYWRkIG9yIHN1YnRyYWN0LlxyXG4gICAgICAgIChNYXRoLnJhbmRvbSgpIC0gMC41KSAqXHJcbiAgICAgICAgMik7XHJcbiAgICAvLyBMaW1pdHMgYmFja29mZiB0byBtYXggdG8gYXZvaWQgZWZmZWN0aXZlbHkgcGVybWFuZW50IGJhY2tvZmYuXHJcbiAgICByZXR1cm4gTWF0aC5taW4oTUFYX1ZBTFVFX01JTExJUywgY3VyckJhc2VWYWx1ZSArIHJhbmRvbVdhaXQpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlIEVuZ2xpc2ggb3JkaW5hbCBsZXR0ZXJzIGFmdGVyIGEgbnVtYmVyXHJcbiAqL1xyXG5mdW5jdGlvbiBvcmRpbmFsKGkpIHtcclxuICAgIGlmICghTnVtYmVyLmlzRmluaXRlKGkpKSB7XHJcbiAgICAgICAgcmV0dXJuIGAke2l9YDtcclxuICAgIH1cclxuICAgIHJldHVybiBpICsgaW5kaWNhdG9yKGkpO1xyXG59XHJcbmZ1bmN0aW9uIGluZGljYXRvcihpKSB7XHJcbiAgICBpID0gTWF0aC5hYnMoaSk7XHJcbiAgICBjb25zdCBjZW50ID0gaSAlIDEwMDtcclxuICAgIGlmIChjZW50ID49IDEwICYmIGNlbnQgPD0gMjApIHtcclxuICAgICAgICByZXR1cm4gJ3RoJztcclxuICAgIH1cclxuICAgIGNvbnN0IGRlYyA9IGkgJSAxMDtcclxuICAgIGlmIChkZWMgPT09IDEpIHtcclxuICAgICAgICByZXR1cm4gJ3N0JztcclxuICAgIH1cclxuICAgIGlmIChkZWMgPT09IDIpIHtcclxuICAgICAgICByZXR1cm4gJ25kJztcclxuICAgIH1cclxuICAgIGlmIChkZWMgPT09IDMpIHtcclxuICAgICAgICByZXR1cm4gJ3JkJztcclxuICAgIH1cclxuICAgIHJldHVybiAndGgnO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGdldE1vZHVsYXJJbnN0YW5jZShzZXJ2aWNlKSB7XHJcbiAgICBpZiAoc2VydmljZSAmJiBzZXJ2aWNlLl9kZWxlZ2F0ZSkge1xyXG4gICAgICAgIHJldHVybiBzZXJ2aWNlLl9kZWxlZ2F0ZTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBzZXJ2aWNlO1xyXG4gICAgfVxyXG59XG5cbmV4cG9ydCB7IENPTlNUQU5UUywgRGVjb2RlQmFzZTY0U3RyaW5nRXJyb3IsIERlZmVycmVkLCBFcnJvckZhY3RvcnksIEZpcmViYXNlRXJyb3IsIE1BWF9WQUxVRV9NSUxMSVMsIFJBTkRPTV9GQUNUT1IsIFNoYTEsIGFyZUNvb2tpZXNFbmFibGVkLCBhc3NlcnQsIGFzc2VydGlvbkVycm9yLCBhc3luYywgYmFzZTY0LCBiYXNlNjREZWNvZGUsIGJhc2U2NEVuY29kZSwgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcsIGNhbGN1bGF0ZUJhY2tvZmZNaWxsaXMsIGNvbnRhaW5zLCBjcmVhdGVNb2NrVXNlclRva2VuLCBjcmVhdGVTdWJzY3JpYmUsIGRlY29kZSwgZGVlcENvcHksIGRlZXBFcXVhbCwgZGVlcEV4dGVuZCwgZXJyb3JQcmVmaXgsIGV4dHJhY3RRdWVyeXN0cmluZywgZ2V0RGVmYXVsdEFwcENvbmZpZywgZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdCwgZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdG5hbWVBbmRQb3J0LCBnZXREZWZhdWx0cywgZ2V0RXhwZXJpbWVudGFsU2V0dGluZywgZ2V0R2xvYmFsLCBnZXRNb2R1bGFySW5zdGFuY2UsIGdldFVBLCBpc0FkbWluLCBpc0Jyb3dzZXIsIGlzQnJvd3NlckV4dGVuc2lvbiwgaXNFbGVjdHJvbiwgaXNFbXB0eSwgaXNJRSwgaXNJbmRleGVkREJBdmFpbGFibGUsIGlzTW9iaWxlQ29yZG92YSwgaXNOb2RlLCBpc05vZGVTZGssIGlzUmVhY3ROYXRpdmUsIGlzU2FmYXJpLCBpc1VXUCwgaXNWYWxpZEZvcm1hdCwgaXNWYWxpZFRpbWVzdGFtcCwgaXNXZWJXb3JrZXIsIGlzc3VlZEF0VGltZSwganNvbkV2YWwsIG1hcCwgb3JkaW5hbCwgcHJvbWlzZVdpdGhUaW1lb3V0LCBxdWVyeXN0cmluZywgcXVlcnlzdHJpbmdEZWNvZGUsIHNhZmVHZXQsIHN0cmluZ0xlbmd0aCwgc3RyaW5nVG9CeXRlQXJyYXksIHN0cmluZ2lmeSwgdXVpZHY0LCB2YWxpZGF0ZUFyZ0NvdW50LCB2YWxpZGF0ZUNhbGxiYWNrLCB2YWxpZGF0ZUNvbnRleHRPYmplY3QsIHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUsIHZhbGlkYXRlTmFtZXNwYWNlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiaW1wb3J0IHsgRGVmZXJyZWQgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5cbi8qKlxyXG4gKiBDb21wb25lbnQgZm9yIHNlcnZpY2UgbmFtZSBULCBlLmcuIGBhdXRoYCwgYGF1dGgtaW50ZXJuYWxgXHJcbiAqL1xyXG5jbGFzcyBDb21wb25lbnQge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIHB1YmxpYyBzZXJ2aWNlIG5hbWUsIGUuZy4gYXBwLCBhdXRoLCBmaXJlc3RvcmUsIGRhdGFiYXNlXHJcbiAgICAgKiBAcGFyYW0gaW5zdGFuY2VGYWN0b3J5IFNlcnZpY2UgZmFjdG9yeSByZXNwb25zaWJsZSBmb3IgY3JlYXRpbmcgdGhlIHB1YmxpYyBpbnRlcmZhY2VcclxuICAgICAqIEBwYXJhbSB0eXBlIHdoZXRoZXIgdGhlIHNlcnZpY2UgcHJvdmlkZWQgYnkgdGhlIGNvbXBvbmVudCBpcyBwdWJsaWMgb3IgcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBpbnN0YW5jZUZhY3RvcnksIHR5cGUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VGYWN0b3J5ID0gaW5zdGFuY2VGYWN0b3J5O1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICAgICAgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyA9IGZhbHNlO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFByb3BlcnRpZXMgdG8gYmUgYWRkZWQgdG8gdGhlIHNlcnZpY2UgbmFtZXNwYWNlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlUHJvcHMgPSB7fTtcclxuICAgICAgICB0aGlzLmluc3RhbnRpYXRpb25Nb2RlID0gXCJMQVpZXCIgLyogSW5zdGFudGlhdGlvbk1vZGUuTEFaWSAqLztcclxuICAgICAgICB0aGlzLm9uSW5zdGFuY2VDcmVhdGVkID0gbnVsbDtcclxuICAgIH1cclxuICAgIHNldEluc3RhbnRpYXRpb25Nb2RlKG1vZGUpIHtcclxuICAgICAgICB0aGlzLmluc3RhbnRpYXRpb25Nb2RlID0gbW9kZTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNldE11bHRpcGxlSW5zdGFuY2VzKG11bHRpcGxlSW5zdGFuY2VzKSB7XHJcbiAgICAgICAgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyA9IG11bHRpcGxlSW5zdGFuY2VzO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgc2V0U2VydmljZVByb3BzKHByb3BzKSB7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlUHJvcHMgPSBwcm9wcztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNldEluc3RhbmNlQ3JlYXRlZENhbGxiYWNrKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5vbkluc3RhbmNlQ3JlYXRlZCA9IGNhbGxiYWNrO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IERFRkFVTFRfRU5UUllfTkFNRSA9ICdbREVGQVVMVF0nO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZXIgZm9yIGluc3RhbmNlIGZvciBzZXJ2aWNlIG5hbWUgVCwgZS5nLiAnYXV0aCcsICdhdXRoLWludGVybmFsJ1xyXG4gKiBOYW1lU2VydmljZU1hcHBpbmdbVF0gaXMgYW4gYWxpYXMgZm9yIHRoZSB0eXBlIG9mIHRoZSBpbnN0YW5jZVxyXG4gKi9cclxuY2xhc3MgUHJvdmlkZXIge1xyXG4gICAgY29uc3RydWN0b3IobmFtZSwgY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZCA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlc09wdGlvbnMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5vbkluaXRDYWxsYmFja3MgPSBuZXcgTWFwKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBpZGVudGlmaWVyIEEgcHJvdmlkZXIgY2FuIHByb3ZpZGUgbXVsaXRwbGUgaW5zdGFuY2VzIG9mIGEgc2VydmljZVxyXG4gICAgICogaWYgdGhpcy5jb21wb25lbnQubXVsdGlwbGVJbnN0YW5jZXMgaXMgdHJ1ZS5cclxuICAgICAqL1xyXG4gICAgZ2V0KGlkZW50aWZpZXIpIHtcclxuICAgICAgICAvLyBpZiBtdWx0aXBsZUluc3RhbmNlcyBpcyBub3Qgc3VwcG9ydGVkLCB1c2UgdGhlIGRlZmF1bHQgbmFtZVxyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKCF0aGlzLmluc3RhbmNlc0RlZmVycmVkLmhhcyhub3JtYWxpemVkSWRlbnRpZmllcikpIHtcclxuICAgICAgICAgICAgY29uc3QgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5zZXQobm9ybWFsaXplZElkZW50aWZpZXIsIGRlZmVycmVkKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikgfHxcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvdWxkQXV0b0luaXRpYWxpemUoKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6ZSB0aGUgc2VydmljZSBpZiBpdCBjYW4gYmUgYXV0by1pbml0aWFsaXplZFxyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplZElkZW50aWZpZXJcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSBpbnN0YW5jZSBmYWN0b3J5IHRocm93cyBhbiBleGNlcHRpb24gZHVyaW5nIGdldCgpLCBpdCBzaG91bGQgbm90IGNhdXNlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYSBmYXRhbCBlcnJvci4gV2UganVzdCByZXR1cm4gdGhlIHVucmVzb2x2ZWQgcHJvbWlzZSBpbiB0aGlzIGNhc2UuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZ2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyKS5wcm9taXNlO1xyXG4gICAgfVxyXG4gICAgZ2V0SW1tZWRpYXRlKG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgLy8gaWYgbXVsdGlwbGVJbnN0YW5jZXMgaXMgbm90IHN1cHBvcnRlZCwgdXNlIHRoZSBkZWZhdWx0IG5hbWVcclxuICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5pZGVudGlmaWVyKTtcclxuICAgICAgICBjb25zdCBvcHRpb25hbCA9IChfYSA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5vcHRpb25hbCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikgfHxcclxuICAgICAgICAgICAgdGhpcy5zaG91bGRBdXRvSW5pdGlhbGl6ZSgpKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBJbiBjYXNlIGEgY29tcG9uZW50IGlzIG5vdCBpbml0aWFsaXplZCBhbmQgc2hvdWxkL2NhbiBub3QgYmUgYXV0by1pbml0aWFsaXplZCBhdCB0aGUgbW9tZW50LCByZXR1cm4gbnVsbCBpZiB0aGUgb3B0aW9uYWwgZmxhZyBpcyBzZXQsIG9yIHRocm93XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25hbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihgU2VydmljZSAke3RoaXMubmFtZX0gaXMgbm90IGF2YWlsYWJsZWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0Q29tcG9uZW50KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudDtcclxuICAgIH1cclxuICAgIHNldENvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgICAgICBpZiAoY29tcG9uZW50Lm5hbWUgIT09IHRoaXMubmFtZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgTWlzbWF0Y2hpbmcgQ29tcG9uZW50ICR7Y29tcG9uZW50Lm5hbWV9IGZvciBQcm92aWRlciAke3RoaXMubmFtZX0uYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgQ29tcG9uZW50IGZvciAke3RoaXMubmFtZX0gaGFzIGFscmVhZHkgYmVlbiBwcm92aWRlZGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IGNvbXBvbmVudDtcclxuICAgICAgICAvLyByZXR1cm4gZWFybHkgd2l0aG91dCBhdHRlbXB0aW5nIHRvIGluaXRpYWxpemUgdGhlIGNvbXBvbmVudCBpZiB0aGUgY29tcG9uZW50IHJlcXVpcmVzIGV4cGxpY2l0IGluaXRpYWxpemF0aW9uIChjYWxsaW5nIGBQcm92aWRlci5pbml0aWFsaXplKClgKVxyXG4gICAgICAgIGlmICghdGhpcy5zaG91bGRBdXRvSW5pdGlhbGl6ZSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaWYgdGhlIHNlcnZpY2UgaXMgZWFnZXIsIGluaXRpYWxpemUgdGhlIGRlZmF1bHQgaW5zdGFuY2VcclxuICAgICAgICBpZiAoaXNDb21wb25lbnRFYWdlcihjb21wb25lbnQpKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2UoeyBpbnN0YW5jZUlkZW50aWZpZXI6IERFRkFVTFRfRU5UUllfTkFNRSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgaW5zdGFuY2UgZmFjdG9yeSBmb3IgYW4gZWFnZXIgQ29tcG9uZW50IHRocm93cyBhbiBleGNlcHRpb24gZHVyaW5nIHRoZSBlYWdlclxyXG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6YXRpb24sIGl0IHNob3VsZCBub3QgY2F1c2UgYSBmYXRhbCBlcnJvci5cclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IEludmVzdGlnYXRlIGlmIHdlIG5lZWQgdG8gbWFrZSBpdCBjb25maWd1cmFibGUsIGJlY2F1c2Ugc29tZSBjb21wb25lbnQgbWF5IHdhbnQgdG8gY2F1c2VcclxuICAgICAgICAgICAgICAgIC8vIGEgZmF0YWwgZXJyb3IgaW4gdGhpcyBjYXNlP1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIENyZWF0ZSBzZXJ2aWNlIGluc3RhbmNlcyBmb3IgdGhlIHBlbmRpbmcgcHJvbWlzZXMgYW5kIHJlc29sdmUgdGhlbVxyXG4gICAgICAgIC8vIE5PVEU6IGlmIHRoaXMubXVsdGlwbGVJbnN0YW5jZXMgaXMgZmFsc2UsIG9ubHkgdGhlIGRlZmF1bHQgaW5zdGFuY2Ugd2lsbCBiZSBjcmVhdGVkXHJcbiAgICAgICAgLy8gYW5kIGFsbCBwcm9taXNlcyB3aXRoIHJlc29sdmUgd2l0aCBpdCByZWdhcmRsZXNzIG9mIHRoZSBpZGVudGlmaWVyLlxyXG4gICAgICAgIGZvciAoY29uc3QgW2luc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2VEZWZlcnJlZF0gb2YgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5lbnRyaWVzKCkpIHtcclxuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgLy8gYGdldE9ySW5pdGlhbGl6ZVNlcnZpY2UoKWAgc2hvdWxkIGFsd2F5cyByZXR1cm4gYSB2YWxpZCBpbnN0YW5jZSBzaW5jZSBhIGNvbXBvbmVudCBpcyBndWFyYW50ZWVkLiB1c2UgISB0byBtYWtlIHR5cGVzY3JpcHQgaGFwcHkuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVkSWRlbnRpZmllclxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZURlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSBpbnN0YW5jZSBmYWN0b3J5IHRocm93cyBhbiBleGNlcHRpb24sIGl0IHNob3VsZCBub3QgY2F1c2VcclxuICAgICAgICAgICAgICAgIC8vIGEgZmF0YWwgZXJyb3IuIFdlIGp1c3QgbGVhdmUgdGhlIHByb21pc2UgdW5yZXNvbHZlZC5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNsZWFySW5zdGFuY2UoaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZGVsZXRlKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzT3B0aW9ucy5kZWxldGUoaWRlbnRpZmllcik7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXMuZGVsZXRlKGlkZW50aWZpZXIpO1xyXG4gICAgfVxyXG4gICAgLy8gYXBwLmRlbGV0ZSgpIHdpbGwgY2FsbCB0aGlzIG1ldGhvZCBvbiBldmVyeSBwcm92aWRlciB0byBkZWxldGUgdGhlIHNlcnZpY2VzXHJcbiAgICAvLyBUT0RPOiBzaG91bGQgd2UgbWFyayB0aGUgcHJvdmlkZXIgYXMgZGVsZXRlZD9cclxuICAgIGFzeW5jIGRlbGV0ZSgpIHtcclxuICAgICAgICBjb25zdCBzZXJ2aWNlcyA9IEFycmF5LmZyb20odGhpcy5pbnN0YW5jZXMudmFsdWVzKCkpO1xyXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgICAgICAgLi4uc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoc2VydmljZSA9PiAnSU5URVJOQUwnIGluIHNlcnZpY2UpIC8vIGxlZ2FjeSBzZXJ2aWNlc1xyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgICAgIC5tYXAoc2VydmljZSA9PiBzZXJ2aWNlLklOVEVSTkFMLmRlbGV0ZSgpKSxcclxuICAgICAgICAgICAgLi4uc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoc2VydmljZSA9PiAnX2RlbGV0ZScgaW4gc2VydmljZSkgLy8gbW9kdWxhcml6ZWQgc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICAubWFwKHNlcnZpY2UgPT4gc2VydmljZS5fZGVsZXRlKCkpXHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcbiAgICBpc0NvbXBvbmVudFNldCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQgIT0gbnVsbDtcclxuICAgIH1cclxuICAgIGlzSW5pdGlhbGl6ZWQoaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlcy5oYXMoaWRlbnRpZmllcik7XHJcbiAgICB9XHJcbiAgICBnZXRPcHRpb25zKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZXNPcHRpb25zLmdldChpZGVudGlmaWVyKSB8fCB7fTtcclxuICAgIH1cclxuICAgIGluaXRpYWxpemUob3B0cyA9IHt9KSB7XHJcbiAgICAgICAgY29uc3QgeyBvcHRpb25zID0ge30gfSA9IG9wdHM7XHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihvcHRzLmluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYCR7dGhpcy5uYW1lfSgke25vcm1hbGl6ZWRJZGVudGlmaWVyfSkgaGFzIGFscmVhZHkgYmVlbiBpbml0aWFsaXplZGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMuaXNDb21wb25lbnRTZXQoKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgQ29tcG9uZW50ICR7dGhpcy5uYW1lfSBoYXMgbm90IGJlZW4gcmVnaXN0ZXJlZCB5ZXRgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xyXG4gICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyLFxyXG4gICAgICAgICAgICBvcHRpb25zXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gcmVzb2x2ZSBhbnkgcGVuZGluZyBwcm9taXNlIHdhaXRpbmcgZm9yIHRoZSBzZXJ2aWNlIGluc3RhbmNlXHJcbiAgICAgICAgZm9yIChjb25zdCBbaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZURlZmVycmVkXSBvZiB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmVudHJpZXMoKSkge1xyXG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkRGVmZXJyZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgaWYgKG5vcm1hbGl6ZWRJZGVudGlmaWVyID09PSBub3JtYWxpemVkRGVmZXJyZWRJZGVudGlmaWVyKSB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZURlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjYWxsYmFjayAtIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGludm9rZWQgIGFmdGVyIHRoZSBwcm92aWRlciBoYXMgYmVlbiBpbml0aWFsaXplZCBieSBjYWxsaW5nIHByb3ZpZGVyLmluaXRpYWxpemUoKS5cclxuICAgICAqIFRoZSBmdW5jdGlvbiBpcyBpbnZva2VkIFNZTkNIUk9OT1VTTFksIHNvIGl0IHNob3VsZCBub3QgZXhlY3V0ZSBhbnkgbG9uZ3J1bm5pbmcgdGFza3MgaW4gb3JkZXIgdG8gbm90IGJsb2NrIHRoZSBwcm9ncmFtLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpZGVudGlmaWVyIEFuIG9wdGlvbmFsIGluc3RhbmNlIGlkZW50aWZpZXJcclxuICAgICAqIEByZXR1cm5zIGEgZnVuY3Rpb24gdG8gdW5yZWdpc3RlciB0aGUgY2FsbGJhY2tcclxuICAgICAqL1xyXG4gICAgb25Jbml0KGNhbGxiYWNrLCBpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaWRlbnRpZmllcik7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdDYWxsYmFja3MgPSAoX2EgPSB0aGlzLm9uSW5pdENhbGxiYWNrcy5nZXQobm9ybWFsaXplZElkZW50aWZpZXIpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBuZXcgU2V0KCk7XHJcbiAgICAgICAgZXhpc3RpbmdDYWxsYmFja3MuYWRkKGNhbGxiYWNrKTtcclxuICAgICAgICB0aGlzLm9uSW5pdENhbGxiYWNrcy5zZXQobm9ybWFsaXplZElkZW50aWZpZXIsIGV4aXN0aW5nQ2FsbGJhY2tzKTtcclxuICAgICAgICBjb25zdCBleGlzdGluZ0luc3RhbmNlID0gdGhpcy5pbnN0YW5jZXMuZ2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAoZXhpc3RpbmdJbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBjYWxsYmFjayhleGlzdGluZ0luc3RhbmNlLCBub3JtYWxpemVkSWRlbnRpZmllcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4aXN0aW5nQ2FsbGJhY2tzLmRlbGV0ZShjYWxsYmFjayk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSW52b2tlIG9uSW5pdCBjYWxsYmFja3Mgc3luY2hyb25vdXNseVxyXG4gICAgICogQHBhcmFtIGluc3RhbmNlIHRoZSBzZXJ2aWNlIGluc3RhbmNlYFxyXG4gICAgICovXHJcbiAgICBpbnZva2VPbkluaXRDYWxsYmFja3MoaW5zdGFuY2UsIGlkZW50aWZpZXIpIHtcclxuICAgICAgICBjb25zdCBjYWxsYmFja3MgPSB0aGlzLm9uSW5pdENhbGxiYWNrcy5nZXQoaWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKCFjYWxsYmFja3MpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGNvbnN0IGNhbGxiYWNrIG9mIGNhbGxiYWNrcykge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soaW5zdGFuY2UsIGlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICAgICAgLy8gaWdub3JlIGVycm9ycyBpbiB0aGUgb25Jbml0IGNhbGxiYWNrXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXRPckluaXRpYWxpemVTZXJ2aWNlKHsgaW5zdGFuY2VJZGVudGlmaWVyLCBvcHRpb25zID0ge30gfSkge1xyXG4gICAgICAgIGxldCBpbnN0YW5jZSA9IHRoaXMuaW5zdGFuY2VzLmdldChpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICghaW5zdGFuY2UgJiYgdGhpcy5jb21wb25lbnQpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UgPSB0aGlzLmNvbXBvbmVudC5pbnN0YW5jZUZhY3RvcnkodGhpcy5jb250YWluZXIsIHtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplSWRlbnRpZmllckZvckZhY3RvcnkoaW5zdGFuY2VJZGVudGlmaWVyKSxcclxuICAgICAgICAgICAgICAgIG9wdGlvbnNcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzLnNldChpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlKTtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXNPcHRpb25zLnNldChpbnN0YW5jZUlkZW50aWZpZXIsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogSW52b2tlIG9uSW5pdCBsaXN0ZW5lcnMuXHJcbiAgICAgICAgICAgICAqIE5vdGUgdGhpcy5jb21wb25lbnQub25JbnN0YW5jZUNyZWF0ZWQgaXMgZGlmZmVyZW50LCB3aGljaCBpcyB1c2VkIGJ5IHRoZSBjb21wb25lbnQgY3JlYXRvcixcclxuICAgICAgICAgICAgICogd2hpbGUgb25Jbml0IGxpc3RlbmVycyBhcmUgcmVnaXN0ZXJlZCBieSBjb25zdW1lcnMgb2YgdGhlIHByb3ZpZGVyLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgdGhpcy5pbnZva2VPbkluaXRDYWxsYmFja3MoaW5zdGFuY2UsIGluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBPcmRlciBpcyBpbXBvcnRhbnRcclxuICAgICAgICAgICAgICogb25JbnN0YW5jZUNyZWF0ZWQoKSBzaG91bGQgYmUgY2FsbGVkIGFmdGVyIHRoaXMuaW5zdGFuY2VzLnNldChpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlKTsgd2hpY2hcclxuICAgICAgICAgICAgICogbWFrZXMgYGlzSW5pdGlhbGl6ZWQoKWAgcmV0dXJuIHRydWUuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb21wb25lbnQub25JbnN0YW5jZUNyZWF0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnQub25JbnN0YW5jZUNyZWF0ZWQodGhpcy5jb250YWluZXIsIGluc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWdub3JlIGVycm9ycyBpbiB0aGUgb25JbnN0YW5jZUNyZWF0ZWRDYWxsYmFja1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZSB8fCBudWxsO1xyXG4gICAgfVxyXG4gICAgbm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICBpZiAodGhpcy5jb21wb25lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50Lm11bHRpcGxlSW5zdGFuY2VzID8gaWRlbnRpZmllciA6IERFRkFVTFRfRU5UUllfTkFNRTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpZGVudGlmaWVyOyAvLyBhc3N1bWUgbXVsdGlwbGUgaW5zdGFuY2VzIGFyZSBzdXBwb3J0ZWQgYmVmb3JlIHRoZSBjb21wb25lbnQgaXMgcHJvdmlkZWQuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2hvdWxkQXV0b0luaXRpYWxpemUoKSB7XHJcbiAgICAgICAgcmV0dXJuICghIXRoaXMuY29tcG9uZW50ICYmXHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50Lmluc3RhbnRpYXRpb25Nb2RlICE9PSBcIkVYUExJQ0lUXCIgLyogSW5zdGFudGlhdGlvbk1vZGUuRVhQTElDSVQgKi8pO1xyXG4gICAgfVxyXG59XHJcbi8vIHVuZGVmaW5lZCBzaG91bGQgYmUgcGFzc2VkIHRvIHRoZSBzZXJ2aWNlIGZhY3RvcnkgZm9yIHRoZSBkZWZhdWx0IGluc3RhbmNlXHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZUlkZW50aWZpZXJGb3JGYWN0b3J5KGlkZW50aWZpZXIpIHtcclxuICAgIHJldHVybiBpZGVudGlmaWVyID09PSBERUZBVUxUX0VOVFJZX05BTUUgPyB1bmRlZmluZWQgOiBpZGVudGlmaWVyO1xyXG59XHJcbmZ1bmN0aW9uIGlzQ29tcG9uZW50RWFnZXIoY29tcG9uZW50KSB7XHJcbiAgICByZXR1cm4gY29tcG9uZW50Lmluc3RhbnRpYXRpb25Nb2RlID09PSBcIkVBR0VSXCIgLyogSW5zdGFudGlhdGlvbk1vZGUuRUFHRVIgKi87XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENvbXBvbmVudENvbnRhaW5lciB0aGF0IHByb3ZpZGVzIFByb3ZpZGVycyBmb3Igc2VydmljZSBuYW1lIFQsIGUuZy4gYGF1dGhgLCBgYXV0aC1pbnRlcm5hbGBcclxuICovXHJcbmNsYXNzIENvbXBvbmVudENvbnRhaW5lciB7XHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLnByb3ZpZGVycyA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjb21wb25lbnQgQ29tcG9uZW50IGJlaW5nIGFkZGVkXHJcbiAgICAgKiBAcGFyYW0gb3ZlcndyaXRlIFdoZW4gYSBjb21wb25lbnQgd2l0aCB0aGUgc2FtZSBuYW1lIGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCxcclxuICAgICAqIGlmIG92ZXJ3cml0ZSBpcyB0cnVlOiBvdmVyd3JpdGUgdGhlIGV4aXN0aW5nIGNvbXBvbmVudCB3aXRoIHRoZSBuZXcgY29tcG9uZW50IGFuZCBjcmVhdGUgYSBuZXdcclxuICAgICAqIHByb3ZpZGVyIHdpdGggdGhlIG5ldyBjb21wb25lbnQuIEl0IGNhbiBiZSB1c2VmdWwgaW4gdGVzdHMgd2hlcmUgeW91IHdhbnQgdG8gdXNlIGRpZmZlcmVudCBtb2Nrc1xyXG4gICAgICogZm9yIGRpZmZlcmVudCB0ZXN0cy5cclxuICAgICAqIGlmIG92ZXJ3cml0ZSBpcyBmYWxzZTogdGhyb3cgYW4gZXhjZXB0aW9uXHJcbiAgICAgKi9cclxuICAgIGFkZENvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXMuZ2V0UHJvdmlkZXIoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIGlmIChwcm92aWRlci5pc0NvbXBvbmVudFNldCgpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ29tcG9uZW50ICR7Y29tcG9uZW50Lm5hbWV9IGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCB3aXRoICR7dGhpcy5uYW1lfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwcm92aWRlci5zZXRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIGFkZE9yT3ZlcndyaXRlQ29tcG9uZW50KGNvbXBvbmVudCkge1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5nZXRQcm92aWRlcihjb21wb25lbnQubmFtZSk7XHJcbiAgICAgICAgaWYgKHByb3ZpZGVyLmlzQ29tcG9uZW50U2V0KCkpIHtcclxuICAgICAgICAgICAgLy8gZGVsZXRlIHRoZSBleGlzdGluZyBwcm92aWRlciBmcm9tIHRoZSBjb250YWluZXIsIHNvIHdlIGNhbiByZWdpc3RlciB0aGUgbmV3IGNvbXBvbmVudFxyXG4gICAgICAgICAgICB0aGlzLnByb3ZpZGVycy5kZWxldGUoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBnZXRQcm92aWRlciBwcm92aWRlcyBhIHR5cGUgc2FmZSBpbnRlcmZhY2Ugd2hlcmUgaXQgY2FuIG9ubHkgYmUgY2FsbGVkIHdpdGggYSBmaWVsZCBuYW1lXHJcbiAgICAgKiBwcmVzZW50IGluIE5hbWVTZXJ2aWNlTWFwcGluZyBpbnRlcmZhY2UuXHJcbiAgICAgKlxyXG4gICAgICogRmlyZWJhc2UgU0RLcyBwcm92aWRpbmcgc2VydmljZXMgc2hvdWxkIGV4dGVuZCBOYW1lU2VydmljZU1hcHBpbmcgaW50ZXJmYWNlIHRvIHJlZ2lzdGVyXHJcbiAgICAgKiB0aGVtc2VsdmVzLlxyXG4gICAgICovXHJcbiAgICBnZXRQcm92aWRlcihuYW1lKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvdmlkZXJzLmhhcyhuYW1lKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm92aWRlcnMuZ2V0KG5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjcmVhdGUgYSBQcm92aWRlciBmb3IgYSBzZXJ2aWNlIHRoYXQgaGFzbid0IHJlZ2lzdGVyZWQgd2l0aCBGaXJlYmFzZVxyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gbmV3IFByb3ZpZGVyKG5hbWUsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJzLnNldChuYW1lLCBwcm92aWRlcik7XHJcbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyO1xyXG4gICAgfVxyXG4gICAgZ2V0UHJvdmlkZXJzKCkge1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMucHJvdmlkZXJzLnZhbHVlcygpKTtcclxuICAgIH1cclxufVxuXG5leHBvcnQgeyBDb21wb25lbnQsIENvbXBvbmVudENvbnRhaW5lciwgUHJvdmlkZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCIvKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQSBjb250YWluZXIgZm9yIGFsbCBvZiB0aGUgTG9nZ2VyIGluc3RhbmNlc1xyXG4gKi9cclxuY29uc3QgaW5zdGFuY2VzID0gW107XHJcbi8qKlxyXG4gKiBUaGUgSlMgU0RLIHN1cHBvcnRzIDUgbG9nIGxldmVscyBhbmQgYWxzbyBhbGxvd3MgYSB1c2VyIHRoZSBhYmlsaXR5IHRvXHJcbiAqIHNpbGVuY2UgdGhlIGxvZ3MgYWx0b2dldGhlci5cclxuICpcclxuICogVGhlIG9yZGVyIGlzIGEgZm9sbG93czpcclxuICogREVCVUcgPCBWRVJCT1NFIDwgSU5GTyA8IFdBUk4gPCBFUlJPUlxyXG4gKlxyXG4gKiBBbGwgb2YgdGhlIGxvZyB0eXBlcyBhYm92ZSB0aGUgY3VycmVudCBsb2cgbGV2ZWwgd2lsbCBiZSBjYXB0dXJlZCAoaS5lLiBpZlxyXG4gKiB5b3Ugc2V0IHRoZSBsb2cgbGV2ZWwgdG8gYElORk9gLCBlcnJvcnMgd2lsbCBzdGlsbCBiZSBsb2dnZWQsIGJ1dCBgREVCVUdgIGFuZFxyXG4gKiBgVkVSQk9TRWAgbG9ncyB3aWxsIG5vdClcclxuICovXHJcbnZhciBMb2dMZXZlbDtcclxuKGZ1bmN0aW9uIChMb2dMZXZlbCkge1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJERUJVR1wiXSA9IDBdID0gXCJERUJVR1wiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJWRVJCT1NFXCJdID0gMV0gPSBcIlZFUkJPU0VcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiSU5GT1wiXSA9IDJdID0gXCJJTkZPXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIldBUk5cIl0gPSAzXSA9IFwiV0FSTlwiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJFUlJPUlwiXSA9IDRdID0gXCJFUlJPUlwiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJTSUxFTlRcIl0gPSA1XSA9IFwiU0lMRU5UXCI7XHJcbn0pKExvZ0xldmVsIHx8IChMb2dMZXZlbCA9IHt9KSk7XHJcbmNvbnN0IGxldmVsU3RyaW5nVG9FbnVtID0ge1xyXG4gICAgJ2RlYnVnJzogTG9nTGV2ZWwuREVCVUcsXHJcbiAgICAndmVyYm9zZSc6IExvZ0xldmVsLlZFUkJPU0UsXHJcbiAgICAnaW5mbyc6IExvZ0xldmVsLklORk8sXHJcbiAgICAnd2Fybic6IExvZ0xldmVsLldBUk4sXHJcbiAgICAnZXJyb3InOiBMb2dMZXZlbC5FUlJPUixcclxuICAgICdzaWxlbnQnOiBMb2dMZXZlbC5TSUxFTlRcclxufTtcclxuLyoqXHJcbiAqIFRoZSBkZWZhdWx0IGxvZyBsZXZlbFxyXG4gKi9cclxuY29uc3QgZGVmYXVsdExvZ0xldmVsID0gTG9nTGV2ZWwuSU5GTztcclxuLyoqXHJcbiAqIEJ5IGRlZmF1bHQsIGBjb25zb2xlLmRlYnVnYCBpcyBub3QgZGlzcGxheWVkIGluIHRoZSBkZXZlbG9wZXIgY29uc29sZSAoaW5cclxuICogY2hyb21lKS4gVG8gYXZvaWQgZm9yY2luZyB1c2VycyB0byBoYXZlIHRvIG9wdC1pbiB0byB0aGVzZSBsb2dzIHR3aWNlXHJcbiAqIChpLmUuIG9uY2UgZm9yIGZpcmViYXNlLCBhbmQgb25jZSBpbiB0aGUgY29uc29sZSksIHdlIGFyZSBzZW5kaW5nIGBERUJVR2BcclxuICogbG9ncyB0byB0aGUgYGNvbnNvbGUubG9nYCBmdW5jdGlvbi5cclxuICovXHJcbmNvbnN0IENvbnNvbGVNZXRob2QgPSB7XHJcbiAgICBbTG9nTGV2ZWwuREVCVUddOiAnbG9nJyxcclxuICAgIFtMb2dMZXZlbC5WRVJCT1NFXTogJ2xvZycsXHJcbiAgICBbTG9nTGV2ZWwuSU5GT106ICdpbmZvJyxcclxuICAgIFtMb2dMZXZlbC5XQVJOXTogJ3dhcm4nLFxyXG4gICAgW0xvZ0xldmVsLkVSUk9SXTogJ2Vycm9yJ1xyXG59O1xyXG4vKipcclxuICogVGhlIGRlZmF1bHQgbG9nIGhhbmRsZXIgd2lsbCBmb3J3YXJkIERFQlVHLCBWRVJCT1NFLCBJTkZPLCBXQVJOLCBhbmQgRVJST1JcclxuICogbWVzc2FnZXMgb24gdG8gdGhlaXIgY29ycmVzcG9uZGluZyBjb25zb2xlIGNvdW50ZXJwYXJ0cyAoaWYgdGhlIGxvZyBtZXRob2RcclxuICogaXMgc3VwcG9ydGVkIGJ5IHRoZSBjdXJyZW50IGxvZyBsZXZlbClcclxuICovXHJcbmNvbnN0IGRlZmF1bHRMb2dIYW5kbGVyID0gKGluc3RhbmNlLCBsb2dUeXBlLCAuLi5hcmdzKSA9PiB7XHJcbiAgICBpZiAobG9nVHlwZSA8IGluc3RhbmNlLmxvZ0xldmVsKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gICAgY29uc3QgbWV0aG9kID0gQ29uc29sZU1ldGhvZFtsb2dUeXBlXTtcclxuICAgIGlmIChtZXRob2QpIHtcclxuICAgICAgICBjb25zb2xlW21ldGhvZF0oYFske25vd31dICAke2luc3RhbmNlLm5hbWV9OmAsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBdHRlbXB0ZWQgdG8gbG9nIGEgbWVzc2FnZSB3aXRoIGFuIGludmFsaWQgbG9nVHlwZSAodmFsdWU6ICR7bG9nVHlwZX0pYCk7XHJcbiAgICB9XHJcbn07XHJcbmNsYXNzIExvZ2dlciB7XHJcbiAgICAvKipcclxuICAgICAqIEdpdmVzIHlvdSBhbiBpbnN0YW5jZSBvZiBhIExvZ2dlciB0byBjYXB0dXJlIG1lc3NhZ2VzIGFjY29yZGluZyB0b1xyXG4gICAgICogRmlyZWJhc2UncyBsb2dnaW5nIHNjaGVtZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSB0aGF0IHRoZSBsb2dzIHdpbGwgYmUgYXNzb2NpYXRlZCB3aXRoXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG5hbWUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBsb2cgbGV2ZWwgb2YgdGhlIGdpdmVuIExvZ2dlciBpbnN0YW5jZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9sb2dMZXZlbCA9IGRlZmF1bHRMb2dMZXZlbDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgbWFpbiAoaW50ZXJuYWwpIGxvZyBoYW5kbGVyIGZvciB0aGUgTG9nZ2VyIGluc3RhbmNlLlxyXG4gICAgICAgICAqIENhbiBiZSBzZXQgdG8gYSBuZXcgZnVuY3Rpb24gaW4gaW50ZXJuYWwgcGFja2FnZSBjb2RlIGJ1dCBub3QgYnkgdXNlci5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyID0gZGVmYXVsdExvZ0hhbmRsZXI7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIG9wdGlvbmFsLCBhZGRpdGlvbmFsLCB1c2VyLWRlZmluZWQgbG9nIGhhbmRsZXIgZm9yIHRoZSBMb2dnZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENhcHR1cmUgdGhlIGN1cnJlbnQgaW5zdGFuY2UgZm9yIGxhdGVyIHVzZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGluc3RhbmNlcy5wdXNoKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGxvZ0xldmVsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9sb2dMZXZlbDtcclxuICAgIH1cclxuICAgIHNldCBsb2dMZXZlbCh2YWwpIHtcclxuICAgICAgICBpZiAoISh2YWwgaW4gTG9nTGV2ZWwpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEludmFsaWQgdmFsdWUgXCIke3ZhbH1cIiBhc3NpZ25lZCB0byBcXGBsb2dMZXZlbFxcYGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9sb2dMZXZlbCA9IHZhbDtcclxuICAgIH1cclxuICAgIC8vIFdvcmthcm91bmQgZm9yIHNldHRlci9nZXR0ZXIgaGF2aW5nIHRvIGJlIHRoZSBzYW1lIHR5cGUuXHJcbiAgICBzZXRMb2dMZXZlbCh2YWwpIHtcclxuICAgICAgICB0aGlzLl9sb2dMZXZlbCA9IHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnID8gbGV2ZWxTdHJpbmdUb0VudW1bdmFsXSA6IHZhbDtcclxuICAgIH1cclxuICAgIGdldCBsb2dIYW5kbGVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9sb2dIYW5kbGVyO1xyXG4gICAgfVxyXG4gICAgc2V0IGxvZ0hhbmRsZXIodmFsKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB2YWwgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgYXNzaWduZWQgdG8gYGxvZ0hhbmRsZXJgIG11c3QgYmUgYSBmdW5jdGlvbicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyID0gdmFsO1xyXG4gICAgfVxyXG4gICAgZ2V0IHVzZXJMb2dIYW5kbGVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl91c2VyTG9nSGFuZGxlcjtcclxuICAgIH1cclxuICAgIHNldCB1c2VyTG9nSGFuZGxlcih2YWwpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciA9IHZhbDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGZ1bmN0aW9ucyBiZWxvdyBhcmUgYWxsIGJhc2VkIG9uIHRoZSBgY29uc29sZWAgaW50ZXJmYWNlXHJcbiAgICAgKi9cclxuICAgIGRlYnVnKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5ERUJVRywgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5ERUJVRywgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBsb2coLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmXHJcbiAgICAgICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLlZFUkJPU0UsIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuVkVSQk9TRSwgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBpbmZvKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5JTkZPLCAuLi5hcmdzKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLklORk8sIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgd2FybiguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuV0FSTiwgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5XQVJOLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIGVycm9yKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5FUlJPUiwgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5FUlJPUiwgLi4uYXJncyk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gc2V0TG9nTGV2ZWwobGV2ZWwpIHtcclxuICAgIGluc3RhbmNlcy5mb3JFYWNoKGluc3QgPT4ge1xyXG4gICAgICAgIGluc3Quc2V0TG9nTGV2ZWwobGV2ZWwpO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gc2V0VXNlckxvZ0hhbmRsZXIobG9nQ2FsbGJhY2ssIG9wdGlvbnMpIHtcclxuICAgIGZvciAoY29uc3QgaW5zdGFuY2Ugb2YgaW5zdGFuY2VzKSB7XHJcbiAgICAgICAgbGV0IGN1c3RvbUxvZ0xldmVsID0gbnVsbDtcclxuICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmxldmVsKSB7XHJcbiAgICAgICAgICAgIGN1c3RvbUxvZ0xldmVsID0gbGV2ZWxTdHJpbmdUb0VudW1bb3B0aW9ucy5sZXZlbF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsb2dDYWxsYmFjayA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS51c2VyTG9nSGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS51c2VyTG9nSGFuZGxlciA9IChpbnN0YW5jZSwgbGV2ZWwsIC4uLmFyZ3MpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhcmdzXHJcbiAgICAgICAgICAgICAgICAgICAgLm1hcChhcmcgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhcmcgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGFyZyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGFyZyA9PT0gJ251bWJlcicgfHwgdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcmcudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYXJnIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZy5tZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShhcmcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChpZ25vcmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihhcmcgPT4gYXJnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5qb2luKCcgJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAobGV2ZWwgPj0gKGN1c3RvbUxvZ0xldmVsICE9PSBudWxsICYmIGN1c3RvbUxvZ0xldmVsICE9PSB2b2lkIDAgPyBjdXN0b21Mb2dMZXZlbCA6IGluc3RhbmNlLmxvZ0xldmVsKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvZ0NhbGxiYWNrKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWw6IExvZ0xldmVsW2xldmVsXS50b0xvd2VyQ2FzZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBpbnN0YW5jZS5uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbmV4cG9ydCB7IExvZ0xldmVsLCBMb2dnZXIsIHNldExvZ0xldmVsLCBzZXRVc2VyTG9nSGFuZGxlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsImNvbnN0IGluc3RhbmNlT2ZBbnkgPSAob2JqZWN0LCBjb25zdHJ1Y3RvcnMpID0+IGNvbnN0cnVjdG9ycy5zb21lKChjKSA9PiBvYmplY3QgaW5zdGFuY2VvZiBjKTtcblxubGV0IGlkYlByb3h5YWJsZVR5cGVzO1xubGV0IGN1cnNvckFkdmFuY2VNZXRob2RzO1xuLy8gVGhpcyBpcyBhIGZ1bmN0aW9uIHRvIHByZXZlbnQgaXQgdGhyb3dpbmcgdXAgaW4gbm9kZSBlbnZpcm9ubWVudHMuXG5mdW5jdGlvbiBnZXRJZGJQcm94eWFibGVUeXBlcygpIHtcbiAgICByZXR1cm4gKGlkYlByb3h5YWJsZVR5cGVzIHx8XG4gICAgICAgIChpZGJQcm94eWFibGVUeXBlcyA9IFtcbiAgICAgICAgICAgIElEQkRhdGFiYXNlLFxuICAgICAgICAgICAgSURCT2JqZWN0U3RvcmUsXG4gICAgICAgICAgICBJREJJbmRleCxcbiAgICAgICAgICAgIElEQkN1cnNvcixcbiAgICAgICAgICAgIElEQlRyYW5zYWN0aW9uLFxuICAgICAgICBdKSk7XG59XG4vLyBUaGlzIGlzIGEgZnVuY3Rpb24gdG8gcHJldmVudCBpdCB0aHJvd2luZyB1cCBpbiBub2RlIGVudmlyb25tZW50cy5cbmZ1bmN0aW9uIGdldEN1cnNvckFkdmFuY2VNZXRob2RzKCkge1xuICAgIHJldHVybiAoY3Vyc29yQWR2YW5jZU1ldGhvZHMgfHxcbiAgICAgICAgKGN1cnNvckFkdmFuY2VNZXRob2RzID0gW1xuICAgICAgICAgICAgSURCQ3Vyc29yLnByb3RvdHlwZS5hZHZhbmNlLFxuICAgICAgICAgICAgSURCQ3Vyc29yLnByb3RvdHlwZS5jb250aW51ZSxcbiAgICAgICAgICAgIElEQkN1cnNvci5wcm90b3R5cGUuY29udGludWVQcmltYXJ5S2V5LFxuICAgICAgICBdKSk7XG59XG5jb25zdCBjdXJzb3JSZXF1ZXN0TWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHRyYW5zYWN0aW9uRG9uZU1hcCA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCB0cmFuc2FjdGlvblN0b3JlTmFtZXNNYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgdHJhbnNmb3JtQ2FjaGUgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgcmV2ZXJzZVRyYW5zZm9ybUNhY2hlID0gbmV3IFdlYWtNYXAoKTtcbmZ1bmN0aW9uIHByb21pc2lmeVJlcXVlc3QocmVxdWVzdCkge1xuICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IHVubGlzdGVuID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVxdWVzdC5yZW1vdmVFdmVudExpc3RlbmVyKCdzdWNjZXNzJywgc3VjY2Vzcyk7XG4gICAgICAgICAgICByZXF1ZXN0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZXJyb3IpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBzdWNjZXNzID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVzb2x2ZSh3cmFwKHJlcXVlc3QucmVzdWx0KSk7XG4gICAgICAgICAgICB1bmxpc3RlbigpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBlcnJvciA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlamVjdChyZXF1ZXN0LmVycm9yKTtcbiAgICAgICAgICAgIHVubGlzdGVuKCk7XG4gICAgICAgIH07XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignc3VjY2VzcycsIHN1Y2Nlc3MpO1xuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZXJyb3IpO1xuICAgIH0pO1xuICAgIHByb21pc2VcbiAgICAgICAgLnRoZW4oKHZhbHVlKSA9PiB7XG4gICAgICAgIC8vIFNpbmNlIGN1cnNvcmluZyByZXVzZXMgdGhlIElEQlJlcXVlc3QgKCpzaWdoKiksIHdlIGNhY2hlIGl0IGZvciBsYXRlciByZXRyaWV2YWxcbiAgICAgICAgLy8gKHNlZSB3cmFwRnVuY3Rpb24pLlxuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBJREJDdXJzb3IpIHtcbiAgICAgICAgICAgIGN1cnNvclJlcXVlc3RNYXAuc2V0KHZhbHVlLCByZXF1ZXN0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBDYXRjaGluZyB0byBhdm9pZCBcIlVuY2F1Z2h0IFByb21pc2UgZXhjZXB0aW9uc1wiXG4gICAgfSlcbiAgICAgICAgLmNhdGNoKCgpID0+IHsgfSk7XG4gICAgLy8gVGhpcyBtYXBwaW5nIGV4aXN0cyBpbiByZXZlcnNlVHJhbnNmb3JtQ2FjaGUgYnV0IGRvZXNuJ3QgZG9lc24ndCBleGlzdCBpbiB0cmFuc2Zvcm1DYWNoZS4gVGhpc1xuICAgIC8vIGlzIGJlY2F1c2Ugd2UgY3JlYXRlIG1hbnkgcHJvbWlzZXMgZnJvbSBhIHNpbmdsZSBJREJSZXF1ZXN0LlxuICAgIHJldmVyc2VUcmFuc2Zvcm1DYWNoZS5zZXQocHJvbWlzZSwgcmVxdWVzdCk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5mdW5jdGlvbiBjYWNoZURvbmVQcm9taXNlRm9yVHJhbnNhY3Rpb24odHgpIHtcbiAgICAvLyBFYXJseSBiYWlsIGlmIHdlJ3ZlIGFscmVhZHkgY3JlYXRlZCBhIGRvbmUgcHJvbWlzZSBmb3IgdGhpcyB0cmFuc2FjdGlvbi5cbiAgICBpZiAodHJhbnNhY3Rpb25Eb25lTWFwLmhhcyh0eCkpXG4gICAgICAgIHJldHVybjtcbiAgICBjb25zdCBkb25lID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCB1bmxpc3RlbiA9ICgpID0+IHtcbiAgICAgICAgICAgIHR4LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NvbXBsZXRlJywgY29tcGxldGUpO1xuICAgICAgICAgICAgdHgucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvcik7XG4gICAgICAgICAgICB0eC5yZW1vdmVFdmVudExpc3RlbmVyKCdhYm9ydCcsIGVycm9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgY29tcGxldGUgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB1bmxpc3RlbigpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBlcnJvciA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlamVjdCh0eC5lcnJvciB8fCBuZXcgRE9NRXhjZXB0aW9uKCdBYm9ydEVycm9yJywgJ0Fib3J0RXJyb3InKSk7XG4gICAgICAgICAgICB1bmxpc3RlbigpO1xuICAgICAgICB9O1xuICAgICAgICB0eC5hZGRFdmVudExpc3RlbmVyKCdjb21wbGV0ZScsIGNvbXBsZXRlKTtcbiAgICAgICAgdHguYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvcik7XG4gICAgICAgIHR4LmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgZXJyb3IpO1xuICAgIH0pO1xuICAgIC8vIENhY2hlIGl0IGZvciBsYXRlciByZXRyaWV2YWwuXG4gICAgdHJhbnNhY3Rpb25Eb25lTWFwLnNldCh0eCwgZG9uZSk7XG59XG5sZXQgaWRiUHJveHlUcmFwcyA9IHtcbiAgICBnZXQodGFyZ2V0LCBwcm9wLCByZWNlaXZlcikge1xuICAgICAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgSURCVHJhbnNhY3Rpb24pIHtcbiAgICAgICAgICAgIC8vIFNwZWNpYWwgaGFuZGxpbmcgZm9yIHRyYW5zYWN0aW9uLmRvbmUuXG4gICAgICAgICAgICBpZiAocHJvcCA9PT0gJ2RvbmUnKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2FjdGlvbkRvbmVNYXAuZ2V0KHRhcmdldCk7XG4gICAgICAgICAgICAvLyBQb2x5ZmlsbCBmb3Igb2JqZWN0U3RvcmVOYW1lcyBiZWNhdXNlIG9mIEVkZ2UuXG4gICAgICAgICAgICBpZiAocHJvcCA9PT0gJ29iamVjdFN0b3JlTmFtZXMnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldC5vYmplY3RTdG9yZU5hbWVzIHx8IHRyYW5zYWN0aW9uU3RvcmVOYW1lc01hcC5nZXQodGFyZ2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE1ha2UgdHguc3RvcmUgcmV0dXJuIHRoZSBvbmx5IHN0b3JlIGluIHRoZSB0cmFuc2FjdGlvbiwgb3IgdW5kZWZpbmVkIGlmIHRoZXJlIGFyZSBtYW55LlxuICAgICAgICAgICAgaWYgKHByb3AgPT09ICdzdG9yZScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVjZWl2ZXIub2JqZWN0U3RvcmVOYW1lc1sxXVxuICAgICAgICAgICAgICAgICAgICA/IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICA6IHJlY2VpdmVyLm9iamVjdFN0b3JlKHJlY2VpdmVyLm9iamVjdFN0b3JlTmFtZXNbMF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIEVsc2UgdHJhbnNmb3JtIHdoYXRldmVyIHdlIGdldCBiYWNrLlxuICAgICAgICByZXR1cm4gd3JhcCh0YXJnZXRbcHJvcF0pO1xuICAgIH0sXG4gICAgc2V0KHRhcmdldCwgcHJvcCwgdmFsdWUpIHtcbiAgICAgICAgdGFyZ2V0W3Byb3BdID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAgaGFzKHRhcmdldCwgcHJvcCkge1xuICAgICAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgSURCVHJhbnNhY3Rpb24gJiZcbiAgICAgICAgICAgIChwcm9wID09PSAnZG9uZScgfHwgcHJvcCA9PT0gJ3N0b3JlJykpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwcm9wIGluIHRhcmdldDtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIHJlcGxhY2VUcmFwcyhjYWxsYmFjaykge1xuICAgIGlkYlByb3h5VHJhcHMgPSBjYWxsYmFjayhpZGJQcm94eVRyYXBzKTtcbn1cbmZ1bmN0aW9uIHdyYXBGdW5jdGlvbihmdW5jKSB7XG4gICAgLy8gRHVlIHRvIGV4cGVjdGVkIG9iamVjdCBlcXVhbGl0eSAod2hpY2ggaXMgZW5mb3JjZWQgYnkgdGhlIGNhY2hpbmcgaW4gYHdyYXBgKSwgd2VcbiAgICAvLyBvbmx5IGNyZWF0ZSBvbmUgbmV3IGZ1bmMgcGVyIGZ1bmMuXG4gICAgLy8gRWRnZSBkb2Vzbid0IHN1cHBvcnQgb2JqZWN0U3RvcmVOYW1lcyAoYm9vbyksIHNvIHdlIHBvbHlmaWxsIGl0IGhlcmUuXG4gICAgaWYgKGZ1bmMgPT09IElEQkRhdGFiYXNlLnByb3RvdHlwZS50cmFuc2FjdGlvbiAmJlxuICAgICAgICAhKCdvYmplY3RTdG9yZU5hbWVzJyBpbiBJREJUcmFuc2FjdGlvbi5wcm90b3R5cGUpKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoc3RvcmVOYW1lcywgLi4uYXJncykge1xuICAgICAgICAgICAgY29uc3QgdHggPSBmdW5jLmNhbGwodW53cmFwKHRoaXMpLCBzdG9yZU5hbWVzLCAuLi5hcmdzKTtcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uU3RvcmVOYW1lc01hcC5zZXQodHgsIHN0b3JlTmFtZXMuc29ydCA/IHN0b3JlTmFtZXMuc29ydCgpIDogW3N0b3JlTmFtZXNdKTtcbiAgICAgICAgICAgIHJldHVybiB3cmFwKHR4KTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLy8gQ3Vyc29yIG1ldGhvZHMgYXJlIHNwZWNpYWwsIGFzIHRoZSBiZWhhdmlvdXIgaXMgYSBsaXR0bGUgbW9yZSBkaWZmZXJlbnQgdG8gc3RhbmRhcmQgSURCLiBJblxuICAgIC8vIElEQiwgeW91IGFkdmFuY2UgdGhlIGN1cnNvciBhbmQgd2FpdCBmb3IgYSBuZXcgJ3N1Y2Nlc3MnIG9uIHRoZSBJREJSZXF1ZXN0IHRoYXQgZ2F2ZSB5b3UgdGhlXG4gICAgLy8gY3Vyc29yLiBJdCdzIGtpbmRhIGxpa2UgYSBwcm9taXNlIHRoYXQgY2FuIHJlc29sdmUgd2l0aCBtYW55IHZhbHVlcy4gVGhhdCBkb2Vzbid0IG1ha2Ugc2Vuc2VcbiAgICAvLyB3aXRoIHJlYWwgcHJvbWlzZXMsIHNvIGVhY2ggYWR2YW5jZSBtZXRob2RzIHJldHVybnMgYSBuZXcgcHJvbWlzZSBmb3IgdGhlIGN1cnNvciBvYmplY3QsIG9yXG4gICAgLy8gdW5kZWZpbmVkIGlmIHRoZSBlbmQgb2YgdGhlIGN1cnNvciBoYXMgYmVlbiByZWFjaGVkLlxuICAgIGlmIChnZXRDdXJzb3JBZHZhbmNlTWV0aG9kcygpLmluY2x1ZGVzKGZ1bmMpKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICAgICAgLy8gQ2FsbGluZyB0aGUgb3JpZ2luYWwgZnVuY3Rpb24gd2l0aCB0aGUgcHJveHkgYXMgJ3RoaXMnIGNhdXNlcyBJTExFR0FMIElOVk9DQVRJT04sIHNvIHdlIHVzZVxuICAgICAgICAgICAgLy8gdGhlIG9yaWdpbmFsIG9iamVjdC5cbiAgICAgICAgICAgIGZ1bmMuYXBwbHkodW53cmFwKHRoaXMpLCBhcmdzKTtcbiAgICAgICAgICAgIHJldHVybiB3cmFwKGN1cnNvclJlcXVlc3RNYXAuZ2V0KHRoaXMpKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgIC8vIENhbGxpbmcgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uIHdpdGggdGhlIHByb3h5IGFzICd0aGlzJyBjYXVzZXMgSUxMRUdBTCBJTlZPQ0FUSU9OLCBzbyB3ZSB1c2VcbiAgICAgICAgLy8gdGhlIG9yaWdpbmFsIG9iamVjdC5cbiAgICAgICAgcmV0dXJuIHdyYXAoZnVuYy5hcHBseSh1bndyYXAodGhpcyksIGFyZ3MpKTtcbiAgICB9O1xufVxuZnVuY3Rpb24gdHJhbnNmb3JtQ2FjaGFibGVWYWx1ZSh2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpXG4gICAgICAgIHJldHVybiB3cmFwRnVuY3Rpb24odmFsdWUpO1xuICAgIC8vIFRoaXMgZG9lc24ndCByZXR1cm4sIGl0IGp1c3QgY3JlYXRlcyBhICdkb25lJyBwcm9taXNlIGZvciB0aGUgdHJhbnNhY3Rpb24sXG4gICAgLy8gd2hpY2ggaXMgbGF0ZXIgcmV0dXJuZWQgZm9yIHRyYW5zYWN0aW9uLmRvbmUgKHNlZSBpZGJPYmplY3RIYW5kbGVyKS5cbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBJREJUcmFuc2FjdGlvbilcbiAgICAgICAgY2FjaGVEb25lUHJvbWlzZUZvclRyYW5zYWN0aW9uKHZhbHVlKTtcbiAgICBpZiAoaW5zdGFuY2VPZkFueSh2YWx1ZSwgZ2V0SWRiUHJveHlhYmxlVHlwZXMoKSkpXG4gICAgICAgIHJldHVybiBuZXcgUHJveHkodmFsdWUsIGlkYlByb3h5VHJhcHMpO1xuICAgIC8vIFJldHVybiB0aGUgc2FtZSB2YWx1ZSBiYWNrIGlmIHdlJ3JlIG5vdCBnb2luZyB0byB0cmFuc2Zvcm0gaXQuXG4gICAgcmV0dXJuIHZhbHVlO1xufVxuZnVuY3Rpb24gd3JhcCh2YWx1ZSkge1xuICAgIC8vIFdlIHNvbWV0aW1lcyBnZW5lcmF0ZSBtdWx0aXBsZSBwcm9taXNlcyBmcm9tIGEgc2luZ2xlIElEQlJlcXVlc3QgKGVnIHdoZW4gY3Vyc29yaW5nKSwgYmVjYXVzZVxuICAgIC8vIElEQiBpcyB3ZWlyZCBhbmQgYSBzaW5nbGUgSURCUmVxdWVzdCBjYW4geWllbGQgbWFueSByZXNwb25zZXMsIHNvIHRoZXNlIGNhbid0IGJlIGNhY2hlZC5cbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBJREJSZXF1ZXN0KVxuICAgICAgICByZXR1cm4gcHJvbWlzaWZ5UmVxdWVzdCh2YWx1ZSk7XG4gICAgLy8gSWYgd2UndmUgYWxyZWFkeSB0cmFuc2Zvcm1lZCB0aGlzIHZhbHVlIGJlZm9yZSwgcmV1c2UgdGhlIHRyYW5zZm9ybWVkIHZhbHVlLlxuICAgIC8vIFRoaXMgaXMgZmFzdGVyLCBidXQgaXQgYWxzbyBwcm92aWRlcyBvYmplY3QgZXF1YWxpdHkuXG4gICAgaWYgKHRyYW5zZm9ybUNhY2hlLmhhcyh2YWx1ZSkpXG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm1DYWNoZS5nZXQodmFsdWUpO1xuICAgIGNvbnN0IG5ld1ZhbHVlID0gdHJhbnNmb3JtQ2FjaGFibGVWYWx1ZSh2YWx1ZSk7XG4gICAgLy8gTm90IGFsbCB0eXBlcyBhcmUgdHJhbnNmb3JtZWQuXG4gICAgLy8gVGhlc2UgbWF5IGJlIHByaW1pdGl2ZSB0eXBlcywgc28gdGhleSBjYW4ndCBiZSBXZWFrTWFwIGtleXMuXG4gICAgaWYgKG5ld1ZhbHVlICE9PSB2YWx1ZSkge1xuICAgICAgICB0cmFuc2Zvcm1DYWNoZS5zZXQodmFsdWUsIG5ld1ZhbHVlKTtcbiAgICAgICAgcmV2ZXJzZVRyYW5zZm9ybUNhY2hlLnNldChuZXdWYWx1ZSwgdmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3VmFsdWU7XG59XG5jb25zdCB1bndyYXAgPSAodmFsdWUpID0+IHJldmVyc2VUcmFuc2Zvcm1DYWNoZS5nZXQodmFsdWUpO1xuXG5leHBvcnQgeyByZXZlcnNlVHJhbnNmb3JtQ2FjaGUgYXMgYSwgaW5zdGFuY2VPZkFueSBhcyBpLCByZXBsYWNlVHJhcHMgYXMgciwgdW53cmFwIGFzIHUsIHdyYXAgYXMgdyB9O1xuIiwiaW1wb3J0IHsgdyBhcyB3cmFwLCByIGFzIHJlcGxhY2VUcmFwcyB9IGZyb20gJy4vd3JhcC1pZGItdmFsdWUuanMnO1xuZXhwb3J0IHsgdSBhcyB1bndyYXAsIHcgYXMgd3JhcCB9IGZyb20gJy4vd3JhcC1pZGItdmFsdWUuanMnO1xuXG4vKipcbiAqIE9wZW4gYSBkYXRhYmFzZS5cbiAqXG4gKiBAcGFyYW0gbmFtZSBOYW1lIG9mIHRoZSBkYXRhYmFzZS5cbiAqIEBwYXJhbSB2ZXJzaW9uIFNjaGVtYSB2ZXJzaW9uLlxuICogQHBhcmFtIGNhbGxiYWNrcyBBZGRpdGlvbmFsIGNhbGxiYWNrcy5cbiAqL1xuZnVuY3Rpb24gb3BlbkRCKG5hbWUsIHZlcnNpb24sIHsgYmxvY2tlZCwgdXBncmFkZSwgYmxvY2tpbmcsIHRlcm1pbmF0ZWQgfSA9IHt9KSB7XG4gICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKG5hbWUsIHZlcnNpb24pO1xuICAgIGNvbnN0IG9wZW5Qcm9taXNlID0gd3JhcChyZXF1ZXN0KTtcbiAgICBpZiAodXBncmFkZSkge1xuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3VwZ3JhZGVuZWVkZWQnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHVwZ3JhZGUod3JhcChyZXF1ZXN0LnJlc3VsdCksIGV2ZW50Lm9sZFZlcnNpb24sIGV2ZW50Lm5ld1ZlcnNpb24sIHdyYXAocmVxdWVzdC50cmFuc2FjdGlvbiksIGV2ZW50KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChibG9ja2VkKSB7XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignYmxvY2tlZCcsIChldmVudCkgPT4gYmxvY2tlZChcbiAgICAgICAgLy8gQ2FzdGluZyBkdWUgdG8gaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0LURPTS1saWItZ2VuZXJhdG9yL3B1bGwvMTQwNVxuICAgICAgICBldmVudC5vbGRWZXJzaW9uLCBldmVudC5uZXdWZXJzaW9uLCBldmVudCkpO1xuICAgIH1cbiAgICBvcGVuUHJvbWlzZVxuICAgICAgICAudGhlbigoZGIpID0+IHtcbiAgICAgICAgaWYgKHRlcm1pbmF0ZWQpXG4gICAgICAgICAgICBkYi5hZGRFdmVudExpc3RlbmVyKCdjbG9zZScsICgpID0+IHRlcm1pbmF0ZWQoKSk7XG4gICAgICAgIGlmIChibG9ja2luZykge1xuICAgICAgICAgICAgZGIuYWRkRXZlbnRMaXN0ZW5lcigndmVyc2lvbmNoYW5nZScsIChldmVudCkgPT4gYmxvY2tpbmcoZXZlbnQub2xkVmVyc2lvbiwgZXZlbnQubmV3VmVyc2lvbiwgZXZlbnQpKTtcbiAgICAgICAgfVxuICAgIH0pXG4gICAgICAgIC5jYXRjaCgoKSA9PiB7IH0pO1xuICAgIHJldHVybiBvcGVuUHJvbWlzZTtcbn1cbi8qKlxuICogRGVsZXRlIGEgZGF0YWJhc2UuXG4gKlxuICogQHBhcmFtIG5hbWUgTmFtZSBvZiB0aGUgZGF0YWJhc2UuXG4gKi9cbmZ1bmN0aW9uIGRlbGV0ZURCKG5hbWUsIHsgYmxvY2tlZCB9ID0ge30pIHtcbiAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKG5hbWUpO1xuICAgIGlmIChibG9ja2VkKSB7XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignYmxvY2tlZCcsIChldmVudCkgPT4gYmxvY2tlZChcbiAgICAgICAgLy8gQ2FzdGluZyBkdWUgdG8gaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0LURPTS1saWItZ2VuZXJhdG9yL3B1bGwvMTQwNVxuICAgICAgICBldmVudC5vbGRWZXJzaW9uLCBldmVudCkpO1xuICAgIH1cbiAgICByZXR1cm4gd3JhcChyZXF1ZXN0KS50aGVuKCgpID0+IHVuZGVmaW5lZCk7XG59XG5cbmNvbnN0IHJlYWRNZXRob2RzID0gWydnZXQnLCAnZ2V0S2V5JywgJ2dldEFsbCcsICdnZXRBbGxLZXlzJywgJ2NvdW50J107XG5jb25zdCB3cml0ZU1ldGhvZHMgPSBbJ3B1dCcsICdhZGQnLCAnZGVsZXRlJywgJ2NsZWFyJ107XG5jb25zdCBjYWNoZWRNZXRob2RzID0gbmV3IE1hcCgpO1xuZnVuY3Rpb24gZ2V0TWV0aG9kKHRhcmdldCwgcHJvcCkge1xuICAgIGlmICghKHRhcmdldCBpbnN0YW5jZW9mIElEQkRhdGFiYXNlICYmXG4gICAgICAgICEocHJvcCBpbiB0YXJnZXQpICYmXG4gICAgICAgIHR5cGVvZiBwcm9wID09PSAnc3RyaW5nJykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoY2FjaGVkTWV0aG9kcy5nZXQocHJvcCkpXG4gICAgICAgIHJldHVybiBjYWNoZWRNZXRob2RzLmdldChwcm9wKTtcbiAgICBjb25zdCB0YXJnZXRGdW5jTmFtZSA9IHByb3AucmVwbGFjZSgvRnJvbUluZGV4JC8sICcnKTtcbiAgICBjb25zdCB1c2VJbmRleCA9IHByb3AgIT09IHRhcmdldEZ1bmNOYW1lO1xuICAgIGNvbnN0IGlzV3JpdGUgPSB3cml0ZU1ldGhvZHMuaW5jbHVkZXModGFyZ2V0RnVuY05hbWUpO1xuICAgIGlmIChcbiAgICAvLyBCYWlsIGlmIHRoZSB0YXJnZXQgZG9lc24ndCBleGlzdCBvbiB0aGUgdGFyZ2V0LiBFZywgZ2V0QWxsIGlzbid0IGluIEVkZ2UuXG4gICAgISh0YXJnZXRGdW5jTmFtZSBpbiAodXNlSW5kZXggPyBJREJJbmRleCA6IElEQk9iamVjdFN0b3JlKS5wcm90b3R5cGUpIHx8XG4gICAgICAgICEoaXNXcml0ZSB8fCByZWFkTWV0aG9kcy5pbmNsdWRlcyh0YXJnZXRGdW5jTmFtZSkpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbWV0aG9kID0gYXN5bmMgZnVuY3Rpb24gKHN0b3JlTmFtZSwgLi4uYXJncykge1xuICAgICAgICAvLyBpc1dyaXRlID8gJ3JlYWR3cml0ZScgOiB1bmRlZmluZWQgZ3ppcHBzIGJldHRlciwgYnV0IGZhaWxzIGluIEVkZ2UgOihcbiAgICAgICAgY29uc3QgdHggPSB0aGlzLnRyYW5zYWN0aW9uKHN0b3JlTmFtZSwgaXNXcml0ZSA/ICdyZWFkd3JpdGUnIDogJ3JlYWRvbmx5Jyk7XG4gICAgICAgIGxldCB0YXJnZXQgPSB0eC5zdG9yZTtcbiAgICAgICAgaWYgKHVzZUluZGV4KVxuICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0LmluZGV4KGFyZ3Muc2hpZnQoKSk7XG4gICAgICAgIC8vIE11c3QgcmVqZWN0IGlmIG9wIHJlamVjdHMuXG4gICAgICAgIC8vIElmIGl0J3MgYSB3cml0ZSBvcGVyYXRpb24sIG11c3QgcmVqZWN0IGlmIHR4LmRvbmUgcmVqZWN0cy5cbiAgICAgICAgLy8gTXVzdCByZWplY3Qgd2l0aCBvcCByZWplY3Rpb24gZmlyc3QuXG4gICAgICAgIC8vIE11c3QgcmVzb2x2ZSB3aXRoIG9wIHZhbHVlLlxuICAgICAgICAvLyBNdXN0IGhhbmRsZSBib3RoIHByb21pc2VzIChubyB1bmhhbmRsZWQgcmVqZWN0aW9ucylcbiAgICAgICAgcmV0dXJuIChhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICB0YXJnZXRbdGFyZ2V0RnVuY05hbWVdKC4uLmFyZ3MpLFxuICAgICAgICAgICAgaXNXcml0ZSAmJiB0eC5kb25lLFxuICAgICAgICBdKSlbMF07XG4gICAgfTtcbiAgICBjYWNoZWRNZXRob2RzLnNldChwcm9wLCBtZXRob2QpO1xuICAgIHJldHVybiBtZXRob2Q7XG59XG5yZXBsYWNlVHJhcHMoKG9sZFRyYXBzKSA9PiAoe1xuICAgIC4uLm9sZFRyYXBzLFxuICAgIGdldDogKHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpID0+IGdldE1ldGhvZCh0YXJnZXQsIHByb3ApIHx8IG9sZFRyYXBzLmdldCh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKSxcbiAgICBoYXM6ICh0YXJnZXQsIHByb3ApID0+ICEhZ2V0TWV0aG9kKHRhcmdldCwgcHJvcCkgfHwgb2xkVHJhcHMuaGFzKHRhcmdldCwgcHJvcCksXG59KSk7XG5cbmV4cG9ydCB7IGRlbGV0ZURCLCBvcGVuREIgfTtcbiIsImltcG9ydCB7IENvbXBvbmVudCwgQ29tcG9uZW50Q29udGFpbmVyIH0gZnJvbSAnQGZpcmViYXNlL2NvbXBvbmVudCc7XG5pbXBvcnQgeyBMb2dnZXIsIHNldFVzZXJMb2dIYW5kbGVyLCBzZXRMb2dMZXZlbCBhcyBzZXRMb2dMZXZlbCQxIH0gZnJvbSAnQGZpcmViYXNlL2xvZ2dlcic7XG5pbXBvcnQgeyBFcnJvckZhY3RvcnksIGdldERlZmF1bHRBcHBDb25maWcsIGRlZXBFcXVhbCwgaXNCcm93c2VyLCBpc1dlYldvcmtlciwgRmlyZWJhc2VFcnJvciwgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcsIGlzSW5kZXhlZERCQXZhaWxhYmxlLCB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuZXhwb3J0IHsgRmlyZWJhc2VFcnJvciB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IG9wZW5EQiB9IGZyb20gJ2lkYic7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIFBsYXRmb3JtTG9nZ2VyU2VydmljZUltcGwge1xyXG4gICAgY29uc3RydWN0b3IoY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICB9XHJcbiAgICAvLyBJbiBpbml0aWFsIGltcGxlbWVudGF0aW9uLCB0aGlzIHdpbGwgYmUgY2FsbGVkIGJ5IGluc3RhbGxhdGlvbnMgb25cclxuICAgIC8vIGF1dGggdG9rZW4gcmVmcmVzaCwgYW5kIGluc3RhbGxhdGlvbnMgd2lsbCBzZW5kIHRoaXMgc3RyaW5nLlxyXG4gICAgZ2V0UGxhdGZvcm1JbmZvU3RyaW5nKCkge1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVycyA9IHRoaXMuY29udGFpbmVyLmdldFByb3ZpZGVycygpO1xyXG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBwcm92aWRlcnMgYW5kIGdldCBsaWJyYXJ5L3ZlcnNpb24gcGFpcnMgZnJvbSBhbnkgdGhhdCBhcmVcclxuICAgICAgICAvLyB2ZXJzaW9uIGNvbXBvbmVudHMuXHJcbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyc1xyXG4gICAgICAgICAgICAubWFwKHByb3ZpZGVyID0+IHtcclxuICAgICAgICAgICAgaWYgKGlzVmVyc2lvblNlcnZpY2VQcm92aWRlcihwcm92aWRlcikpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlcnZpY2UgPSBwcm92aWRlci5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBgJHtzZXJ2aWNlLmxpYnJhcnl9LyR7c2VydmljZS52ZXJzaW9ufWA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5maWx0ZXIobG9nU3RyaW5nID0+IGxvZ1N0cmluZylcclxuICAgICAgICAgICAgLmpvaW4oJyAnKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIHByb3ZpZGVyIGNoZWNrIGlmIHRoaXMgcHJvdmlkZXIgcHJvdmlkZXMgYSBWZXJzaW9uU2VydmljZVxyXG4gKlxyXG4gKiBOT1RFOiBVc2luZyBQcm92aWRlcjwnYXBwLXZlcnNpb24nPiBpcyBhIGhhY2sgdG8gaW5kaWNhdGUgdGhhdCB0aGUgcHJvdmlkZXJcclxuICogcHJvdmlkZXMgVmVyc2lvblNlcnZpY2UuIFRoZSBwcm92aWRlciBpcyBub3QgbmVjZXNzYXJpbHkgYSAnYXBwLXZlcnNpb24nXHJcbiAqIHByb3ZpZGVyLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNWZXJzaW9uU2VydmljZVByb3ZpZGVyKHByb3ZpZGVyKSB7XHJcbiAgICBjb25zdCBjb21wb25lbnQgPSBwcm92aWRlci5nZXRDb21wb25lbnQoKTtcclxuICAgIHJldHVybiAoY29tcG9uZW50ID09PSBudWxsIHx8IGNvbXBvbmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29tcG9uZW50LnR5cGUpID09PSBcIlZFUlNJT05cIiAvKiBDb21wb25lbnRUeXBlLlZFUlNJT04gKi87XHJcbn1cblxuY29uc3QgbmFtZSRwID0gXCJAZmlyZWJhc2UvYXBwXCI7XG5jb25zdCB2ZXJzaW9uJDEgPSBcIjAuMTAuN1wiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKCdAZmlyZWJhc2UvYXBwJyk7XG5cbmNvbnN0IG5hbWUkbyA9IFwiQGZpcmViYXNlL2FwcC1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRuID0gXCJAZmlyZWJhc2UvYW5hbHl0aWNzLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJG0gPSBcIkBmaXJlYmFzZS9hbmFseXRpY3NcIjtcblxuY29uc3QgbmFtZSRsID0gXCJAZmlyZWJhc2UvYXBwLWNoZWNrLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGsgPSBcIkBmaXJlYmFzZS9hcHAtY2hlY2tcIjtcblxuY29uc3QgbmFtZSRqID0gXCJAZmlyZWJhc2UvYXV0aFwiO1xuXG5jb25zdCBuYW1lJGkgPSBcIkBmaXJlYmFzZS9hdXRoLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGggPSBcIkBmaXJlYmFzZS9kYXRhYmFzZVwiO1xuXG5jb25zdCBuYW1lJGcgPSBcIkBmaXJlYmFzZS9kYXRhYmFzZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRmID0gXCJAZmlyZWJhc2UvZnVuY3Rpb25zXCI7XG5cbmNvbnN0IG5hbWUkZSA9IFwiQGZpcmViYXNlL2Z1bmN0aW9ucy1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRkID0gXCJAZmlyZWJhc2UvaW5zdGFsbGF0aW9uc1wiO1xuXG5jb25zdCBuYW1lJGMgPSBcIkBmaXJlYmFzZS9pbnN0YWxsYXRpb25zLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGIgPSBcIkBmaXJlYmFzZS9tZXNzYWdpbmdcIjtcblxuY29uc3QgbmFtZSRhID0gXCJAZmlyZWJhc2UvbWVzc2FnaW5nLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDkgPSBcIkBmaXJlYmFzZS9wZXJmb3JtYW5jZVwiO1xuXG5jb25zdCBuYW1lJDggPSBcIkBmaXJlYmFzZS9wZXJmb3JtYW5jZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSQ3ID0gXCJAZmlyZWJhc2UvcmVtb3RlLWNvbmZpZ1wiO1xuXG5jb25zdCBuYW1lJDYgPSBcIkBmaXJlYmFzZS9yZW1vdGUtY29uZmlnLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDUgPSBcIkBmaXJlYmFzZS9zdG9yYWdlXCI7XG5cbmNvbnN0IG5hbWUkNCA9IFwiQGZpcmViYXNlL3N0b3JhZ2UtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkMyA9IFwiQGZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuXG5jb25zdCBuYW1lJDIgPSBcIkBmaXJlYmFzZS92ZXJ0ZXhhaS1wcmV2aWV3XCI7XG5cbmNvbnN0IG5hbWUkMSA9IFwiQGZpcmViYXNlL2ZpcmVzdG9yZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSA9IFwiZmlyZWJhc2VcIjtcbmNvbnN0IHZlcnNpb24gPSBcIjEwLjEyLjRcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBkZWZhdWx0IGFwcCBuYW1lXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9FTlRSWV9OQU1FID0gJ1tERUZBVUxUXSc7XHJcbmNvbnN0IFBMQVRGT1JNX0xPR19TVFJJTkcgPSB7XHJcbiAgICBbbmFtZSRwXTogJ2ZpcmUtY29yZScsXHJcbiAgICBbbmFtZSRvXTogJ2ZpcmUtY29yZS1jb21wYXQnLFxyXG4gICAgW25hbWUkbV06ICdmaXJlLWFuYWx5dGljcycsXHJcbiAgICBbbmFtZSRuXTogJ2ZpcmUtYW5hbHl0aWNzLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRrXTogJ2ZpcmUtYXBwLWNoZWNrJyxcclxuICAgIFtuYW1lJGxdOiAnZmlyZS1hcHAtY2hlY2stY29tcGF0JyxcclxuICAgIFtuYW1lJGpdOiAnZmlyZS1hdXRoJyxcclxuICAgIFtuYW1lJGldOiAnZmlyZS1hdXRoLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRoXTogJ2ZpcmUtcnRkYicsXHJcbiAgICBbbmFtZSRnXTogJ2ZpcmUtcnRkYi1jb21wYXQnLFxyXG4gICAgW25hbWUkZl06ICdmaXJlLWZuJyxcclxuICAgIFtuYW1lJGVdOiAnZmlyZS1mbi1jb21wYXQnLFxyXG4gICAgW25hbWUkZF06ICdmaXJlLWlpZCcsXHJcbiAgICBbbmFtZSRjXTogJ2ZpcmUtaWlkLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRiXTogJ2ZpcmUtZmNtJyxcclxuICAgIFtuYW1lJGFdOiAnZmlyZS1mY20tY29tcGF0JyxcclxuICAgIFtuYW1lJDldOiAnZmlyZS1wZXJmJyxcclxuICAgIFtuYW1lJDhdOiAnZmlyZS1wZXJmLWNvbXBhdCcsXHJcbiAgICBbbmFtZSQ3XTogJ2ZpcmUtcmMnLFxyXG4gICAgW25hbWUkNl06ICdmaXJlLXJjLWNvbXBhdCcsXHJcbiAgICBbbmFtZSQ1XTogJ2ZpcmUtZ2NzJyxcclxuICAgIFtuYW1lJDRdOiAnZmlyZS1nY3MtY29tcGF0JyxcclxuICAgIFtuYW1lJDNdOiAnZmlyZS1mc3QnLFxyXG4gICAgW25hbWUkMV06ICdmaXJlLWZzdC1jb21wYXQnLFxyXG4gICAgW25hbWUkMl06ICdmaXJlLXZlcnRleCcsXHJcbiAgICAnZmlyZS1qcyc6ICdmaXJlLWpzJyxcclxuICAgIFtuYW1lXTogJ2ZpcmUtanMtYWxsJ1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jb25zdCBfYXBwcyA9IG5ldyBNYXAoKTtcclxuLyoqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3QgX3NlcnZlckFwcHMgPSBuZXcgTWFwKCk7XHJcbi8qKlxyXG4gKiBSZWdpc3RlcmVkIGNvbXBvbmVudHMuXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuY29uc3QgX2NvbXBvbmVudHMgPSBuZXcgTWFwKCk7XHJcbi8qKlxyXG4gKiBAcGFyYW0gY29tcG9uZW50IC0gdGhlIGNvbXBvbmVudCBiZWluZyBhZGRlZCB0byB0aGlzIGFwcCdzIGNvbnRhaW5lclxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9hZGRDb21wb25lbnQoYXBwLCBjb21wb25lbnQpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXBwLmNvbnRhaW5lci5hZGRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBDb21wb25lbnQgJHtjb21wb25lbnQubmFtZX0gZmFpbGVkIHRvIHJlZ2lzdGVyIHdpdGggRmlyZWJhc2VBcHAgJHthcHAubmFtZX1gLCBlKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfYWRkT3JPdmVyd3JpdGVDb21wb25lbnQoYXBwLCBjb21wb25lbnQpIHtcclxuICAgIGFwcC5jb250YWluZXIuYWRkT3JPdmVyd3JpdGVDb21wb25lbnQoY29tcG9uZW50KTtcclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGNvbXBvbmVudCAtIHRoZSBjb21wb25lbnQgdG8gcmVnaXN0ZXJcclxuICogQHJldHVybnMgd2hldGhlciBvciBub3QgdGhlIGNvbXBvbmVudCBpcyByZWdpc3RlcmVkIHN1Y2Nlc3NmdWxseVxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9yZWdpc3RlckNvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgIGNvbnN0IGNvbXBvbmVudE5hbWUgPSBjb21wb25lbnQubmFtZTtcclxuICAgIGlmIChfY29tcG9uZW50cy5oYXMoY29tcG9uZW50TmFtZSkpIHtcclxuICAgICAgICBsb2dnZXIuZGVidWcoYFRoZXJlIHdlcmUgbXVsdGlwbGUgYXR0ZW1wdHMgdG8gcmVnaXN0ZXIgY29tcG9uZW50ICR7Y29tcG9uZW50TmFtZX0uYCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgX2NvbXBvbmVudHMuc2V0KGNvbXBvbmVudE5hbWUsIGNvbXBvbmVudCk7XHJcbiAgICAvLyBhZGQgdGhlIGNvbXBvbmVudCB0byBleGlzdGluZyBhcHAgaW5zdGFuY2VzXHJcbiAgICBmb3IgKGNvbnN0IGFwcCBvZiBfYXBwcy52YWx1ZXMoKSkge1xyXG4gICAgICAgIF9hZGRDb21wb25lbnQoYXBwLCBjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBzZXJ2ZXJBcHAgb2YgX3NlcnZlckFwcHMudmFsdWVzKCkpIHtcclxuICAgICAgICBfYWRkQ29tcG9uZW50KHNlcnZlckFwcCwgY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gYXBwIC0gRmlyZWJhc2VBcHAgaW5zdGFuY2VcclxuICogQHBhcmFtIG5hbWUgLSBzZXJ2aWNlIG5hbWVcclxuICpcclxuICogQHJldHVybnMgdGhlIHByb3ZpZGVyIGZvciB0aGUgc2VydmljZSB3aXRoIHRoZSBtYXRjaGluZyBuYW1lXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX2dldFByb3ZpZGVyKGFwcCwgbmFtZSkge1xyXG4gICAgY29uc3QgaGVhcnRiZWF0Q29udHJvbGxlciA9IGFwcC5jb250YWluZXJcclxuICAgICAgICAuZ2V0UHJvdmlkZXIoJ2hlYXJ0YmVhdCcpXHJcbiAgICAgICAgLmdldEltbWVkaWF0ZSh7IG9wdGlvbmFsOiB0cnVlIH0pO1xyXG4gICAgaWYgKGhlYXJ0YmVhdENvbnRyb2xsZXIpIHtcclxuICAgICAgICB2b2lkIGhlYXJ0YmVhdENvbnRyb2xsZXIudHJpZ2dlckhlYXJ0YmVhdCgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFwcC5jb250YWluZXIuZ2V0UHJvdmlkZXIobmFtZSk7XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBhcHAgLSBGaXJlYmFzZUFwcCBpbnN0YW5jZVxyXG4gKiBAcGFyYW0gbmFtZSAtIHNlcnZpY2UgbmFtZVxyXG4gKiBAcGFyYW0gaW5zdGFuY2VJZGVudGlmaWVyIC0gc2VydmljZSBpbnN0YW5jZSBpZGVudGlmaWVyIGluIGNhc2UgdGhlIHNlcnZpY2Ugc3VwcG9ydHMgbXVsdGlwbGUgaW5zdGFuY2VzXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX3JlbW92ZVNlcnZpY2VJbnN0YW5jZShhcHAsIG5hbWUsIGluc3RhbmNlSWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgX2dldFByb3ZpZGVyKGFwcCwgbmFtZSkuY2xlYXJJbnN0YW5jZShpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gb2JqIC0gYW4gb2JqZWN0IG9mIHR5cGUgRmlyZWJhc2VBcHAgb3IgRmlyZWJhc2VPcHRpb25zLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBwcm92aWRlIG9iamVjdCBpcyBvZiB0eXBlIEZpcmViYXNlQXBwLlxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9pc0ZpcmViYXNlQXBwKG9iaikge1xyXG4gICAgcmV0dXJuIG9iai5vcHRpb25zICE9PSB1bmRlZmluZWQ7XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBvYmogLSBhbiBvYmplY3Qgb2YgdHlwZSBGaXJlYmFzZUFwcC5cclxuICpcclxuICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgcHJvdmlkZWQgb2JqZWN0IGlzIG9mIHR5cGUgRmlyZWJhc2VTZXJ2ZXJBcHBJbXBsLlxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9pc0ZpcmViYXNlU2VydmVyQXBwKG9iaikge1xyXG4gICAgcmV0dXJuIG9iai5zZXR0aW5ncyAhPT0gdW5kZWZpbmVkO1xyXG59XHJcbi8qKlxyXG4gKiBUZXN0IG9ubHlcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfY2xlYXJDb21wb25lbnRzKCkge1xyXG4gICAgX2NvbXBvbmVudHMuY2xlYXIoKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBFUlJPUlMgPSB7XHJcbiAgICBbXCJuby1hcHBcIiAvKiBBcHBFcnJvci5OT19BUFAgKi9dOiBcIk5vIEZpcmViYXNlIEFwcCAneyRhcHBOYW1lfScgaGFzIGJlZW4gY3JlYXRlZCAtIFwiICtcclxuICAgICAgICAnY2FsbCBpbml0aWFsaXplQXBwKCkgZmlyc3QnLFxyXG4gICAgW1wiYmFkLWFwcC1uYW1lXCIgLyogQXBwRXJyb3IuQkFEX0FQUF9OQU1FICovXTogXCJJbGxlZ2FsIEFwcCBuYW1lOiAneyRhcHBOYW1lfSdcIixcclxuICAgIFtcImR1cGxpY2F0ZS1hcHBcIiAvKiBBcHBFcnJvci5EVVBMSUNBVEVfQVBQICovXTogXCJGaXJlYmFzZSBBcHAgbmFtZWQgJ3skYXBwTmFtZX0nIGFscmVhZHkgZXhpc3RzIHdpdGggZGlmZmVyZW50IG9wdGlvbnMgb3IgY29uZmlnXCIsXHJcbiAgICBbXCJhcHAtZGVsZXRlZFwiIC8qIEFwcEVycm9yLkFQUF9ERUxFVEVEICovXTogXCJGaXJlYmFzZSBBcHAgbmFtZWQgJ3skYXBwTmFtZX0nIGFscmVhZHkgZGVsZXRlZFwiLFxyXG4gICAgW1wic2VydmVyLWFwcC1kZWxldGVkXCIgLyogQXBwRXJyb3IuU0VSVkVSX0FQUF9ERUxFVEVEICovXTogJ0ZpcmViYXNlIFNlcnZlciBBcHAgaGFzIGJlZW4gZGVsZXRlZCcsXHJcbiAgICBbXCJuby1vcHRpb25zXCIgLyogQXBwRXJyb3IuTk9fT1BUSU9OUyAqL106ICdOZWVkIHRvIHByb3ZpZGUgb3B0aW9ucywgd2hlbiBub3QgYmVpbmcgZGVwbG95ZWQgdG8gaG9zdGluZyB2aWEgc291cmNlLicsXHJcbiAgICBbXCJpbnZhbGlkLWFwcC1hcmd1bWVudFwiIC8qIEFwcEVycm9yLklOVkFMSURfQVBQX0FSR1VNRU5UICovXTogJ2ZpcmViYXNlLnskYXBwTmFtZX0oKSB0YWtlcyBlaXRoZXIgbm8gYXJndW1lbnQgb3IgYSAnICtcclxuICAgICAgICAnRmlyZWJhc2UgQXBwIGluc3RhbmNlLicsXHJcbiAgICBbXCJpbnZhbGlkLWxvZy1hcmd1bWVudFwiIC8qIEFwcEVycm9yLklOVkFMSURfTE9HX0FSR1VNRU5UICovXTogJ0ZpcnN0IGFyZ3VtZW50IHRvIGBvbkxvZ2AgbXVzdCBiZSBudWxsIG9yIGEgZnVuY3Rpb24uJyxcclxuICAgIFtcImlkYi1vcGVuXCIgLyogQXBwRXJyb3IuSURCX09QRU4gKi9dOiAnRXJyb3IgdGhyb3duIHdoZW4gb3BlbmluZyBJbmRleGVkREIuIE9yaWdpbmFsIGVycm9yOiB7JG9yaWdpbmFsRXJyb3JNZXNzYWdlfS4nLFxyXG4gICAgW1wiaWRiLWdldFwiIC8qIEFwcEVycm9yLklEQl9HRVQgKi9dOiAnRXJyb3IgdGhyb3duIHdoZW4gcmVhZGluZyBmcm9tIEluZGV4ZWREQi4gT3JpZ2luYWwgZXJyb3I6IHskb3JpZ2luYWxFcnJvck1lc3NhZ2V9LicsXHJcbiAgICBbXCJpZGItc2V0XCIgLyogQXBwRXJyb3IuSURCX1dSSVRFICovXTogJ0Vycm9yIHRocm93biB3aGVuIHdyaXRpbmcgdG8gSW5kZXhlZERCLiBPcmlnaW5hbCBlcnJvcjogeyRvcmlnaW5hbEVycm9yTWVzc2FnZX0uJyxcclxuICAgIFtcImlkYi1kZWxldGVcIiAvKiBBcHBFcnJvci5JREJfREVMRVRFICovXTogJ0Vycm9yIHRocm93biB3aGVuIGRlbGV0aW5nIGZyb20gSW5kZXhlZERCLiBPcmlnaW5hbCBlcnJvcjogeyRvcmlnaW5hbEVycm9yTWVzc2FnZX0uJyxcclxuICAgIFtcImZpbmFsaXphdGlvbi1yZWdpc3RyeS1ub3Qtc3VwcG9ydGVkXCIgLyogQXBwRXJyb3IuRklOQUxJWkFUSU9OX1JFR0lTVFJZX05PVF9TVVBQT1JURUQgKi9dOiAnRmlyZWJhc2VTZXJ2ZXJBcHAgZGVsZXRlT25EZXJlZiBmaWVsZCBkZWZpbmVkIGJ1dCB0aGUgSlMgcnVudGltZSBkb2VzIG5vdCBzdXBwb3J0IEZpbmFsaXphdGlvblJlZ2lzdHJ5LicsXHJcbiAgICBbXCJpbnZhbGlkLXNlcnZlci1hcHAtZW52aXJvbm1lbnRcIiAvKiBBcHBFcnJvci5JTlZBTElEX1NFUlZFUl9BUFBfRU5WSVJPTk1FTlQgKi9dOiAnRmlyZWJhc2VTZXJ2ZXJBcHAgaXMgbm90IGZvciB1c2UgaW4gYnJvd3NlciBlbnZpcm9ubWVudHMuJ1xyXG59O1xyXG5jb25zdCBFUlJPUl9GQUNUT1JZID0gbmV3IEVycm9yRmFjdG9yeSgnYXBwJywgJ0ZpcmViYXNlJywgRVJST1JTKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgRmlyZWJhc2VBcHBJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMsIGNvbmZpZywgY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5faXNEZWxldGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpO1xyXG4gICAgICAgIHRoaXMuX2NvbmZpZyA9IE9iamVjdC5hc3NpZ24oe30sIGNvbmZpZyk7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IGNvbmZpZy5uYW1lO1xyXG4gICAgICAgIHRoaXMuX2F1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCA9XHJcbiAgICAgICAgICAgIGNvbmZpZy5hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQ7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFkZENvbXBvbmVudChuZXcgQ29tcG9uZW50KCdhcHAnLCAoKSA9PiB0aGlzLCBcIlBVQkxJQ1wiIC8qIENvbXBvbmVudFR5cGUuUFVCTElDICovKSk7XHJcbiAgICB9XHJcbiAgICBnZXQgYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkO1xyXG4gICAgfVxyXG4gICAgc2V0IGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCh2YWwpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkID0gdmFsO1xyXG4gICAgfVxyXG4gICAgZ2V0IG5hbWUoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9uYW1lO1xyXG4gICAgfVxyXG4gICAgZ2V0IG9wdGlvbnMoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9vcHRpb25zO1xyXG4gICAgfVxyXG4gICAgZ2V0IGNvbmZpZygpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZztcclxuICAgIH1cclxuICAgIGdldCBjb250YWluZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRhaW5lcjtcclxuICAgIH1cclxuICAgIGdldCBpc0RlbGV0ZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzRGVsZXRlZDtcclxuICAgIH1cclxuICAgIHNldCBpc0RlbGV0ZWQodmFsKSB7XHJcbiAgICAgICAgdGhpcy5faXNEZWxldGVkID0gdmFsO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHdpbGwgdGhyb3cgYW4gRXJyb3IgaWYgdGhlIEFwcCBoYXMgYWxyZWFkeSBiZWVuIGRlbGV0ZWQgLVxyXG4gICAgICogdXNlIGJlZm9yZSBwZXJmb3JtaW5nIEFQSSBhY3Rpb25zIG9uIHRoZSBBcHAuXHJcbiAgICAgKi9cclxuICAgIGNoZWNrRGVzdHJveWVkKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzRGVsZXRlZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFwcC1kZWxldGVkXCIgLyogQXBwRXJyb3IuQVBQX0RFTEVURUQgKi8sIHsgYXBwTmFtZTogdGhpcy5fbmFtZSB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgRmlyZWJhc2VTZXJ2ZXJBcHBJbXBsIGV4dGVuZHMgRmlyZWJhc2VBcHBJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMsIHNlcnZlckNvbmZpZywgbmFtZSwgY29udGFpbmVyKSB7XHJcbiAgICAgICAgLy8gQnVpbGQgY29uZmlndXJhdGlvbiBwYXJhbWV0ZXJzIGZvciB0aGUgRmlyZWJhc2VBcHBJbXBsIGJhc2UgY2xhc3MuXHJcbiAgICAgICAgY29uc3QgYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkID0gc2VydmVyQ29uZmlnLmF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCAhPT0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgID8gc2VydmVyQ29uZmlnLmF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZFxyXG4gICAgICAgICAgICA6IGZhbHNlO1xyXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgRmlyZWJhc2VBcHBTZXR0aW5ncyBvYmplY3QgZm9yIHRoZSBGaXJlYmFzZUFwcEltcCBjb25zdHJ1Y3Rvci5cclxuICAgICAgICBjb25zdCBjb25maWcgPSB7XHJcbiAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgIGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuYXBpS2V5ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgLy8gQ29uc3RydWN0IHRoZSBwYXJlbnQgRmlyZWJhc2VBcHBJbXAgb2JqZWN0LlxyXG4gICAgICAgICAgICBzdXBlcihvcHRpb25zLCBjb25maWcsIGNvbnRhaW5lcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBhcHBJbXBsID0gb3B0aW9ucztcclxuICAgICAgICAgICAgc3VwZXIoYXBwSW1wbC5vcHRpb25zLCBjb25maWcsIGNvbnRhaW5lcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE5vdyBjb25zdHJ1Y3QgdGhlIGRhdGEgZm9yIHRoZSBGaXJlYmFzZVNlcnZlckFwcEltcGwuXHJcbiAgICAgICAgdGhpcy5fc2VydmVyQ29uZmlnID0gT2JqZWN0LmFzc2lnbih7IGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCB9LCBzZXJ2ZXJDb25maWcpO1xyXG4gICAgICAgIHRoaXMuX2ZpbmFsaXphdGlvblJlZ2lzdHJ5ID0gbnVsbDtcclxuICAgICAgICBpZiAodHlwZW9mIEZpbmFsaXphdGlvblJlZ2lzdHJ5ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICB0aGlzLl9maW5hbGl6YXRpb25SZWdpc3RyeSA9IG5ldyBGaW5hbGl6YXRpb25SZWdpc3RyeSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmF1dG9tYXRpY0NsZWFudXAoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3JlZkNvdW50ID0gMDtcclxuICAgICAgICB0aGlzLmluY1JlZkNvdW50KHRoaXMuX3NlcnZlckNvbmZpZy5yZWxlYXNlT25EZXJlZik7XHJcbiAgICAgICAgLy8gRG8gbm90IHJldGFpbiBhIGhhcmQgcmVmZXJlbmNlIHRvIHRoZSBkcmVmIG9iamVjdCwgb3RoZXJ3aXNlIHRoZSBGaW5hbGl6YXRpb25SZWdpc3J5XHJcbiAgICAgICAgLy8gd2lsbCBuZXZlciB0cmlnZ2VyLlxyXG4gICAgICAgIHRoaXMuX3NlcnZlckNvbmZpZy5yZWxlYXNlT25EZXJlZiA9IHVuZGVmaW5lZDtcclxuICAgICAgICBzZXJ2ZXJDb25maWcucmVsZWFzZU9uRGVyZWYgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgcmVnaXN0ZXJWZXJzaW9uKG5hbWUkcCwgdmVyc2lvbiQxLCAnc2VydmVyYXBwJyk7XHJcbiAgICB9XHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIGdldCByZWZDb3VudCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcmVmQ291bnQ7XHJcbiAgICB9XHJcbiAgICAvLyBJbmNyZW1lbnQgdGhlIHJlZmVyZW5jZSBjb3VudCBvZiB0aGlzIHNlcnZlciBhcHAuIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCwgcmVnaXN0ZXIgaXRcclxuICAgIC8vIHdpdGggdGhlIGZpbmFsaXphdGlvbiByZWdpc3RyeS5cclxuICAgIGluY1JlZkNvdW50KG9iaikge1xyXG4gICAgICAgIGlmICh0aGlzLmlzRGVsZXRlZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3JlZkNvdW50Kys7XHJcbiAgICAgICAgaWYgKG9iaiAhPT0gdW5kZWZpbmVkICYmIHRoaXMuX2ZpbmFsaXphdGlvblJlZ2lzdHJ5ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2ZpbmFsaXphdGlvblJlZ2lzdHJ5LnJlZ2lzdGVyKG9iaiwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gRGVjcmVtZW50IHRoZSByZWZlcmVuY2UgY291bnQuXHJcbiAgICBkZWNSZWZDb3VudCgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0RlbGV0ZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAtLXRoaXMuX3JlZkNvdW50O1xyXG4gICAgfVxyXG4gICAgLy8gSW52b2tlZCBieSB0aGUgRmluYWxpemF0aW9uUmVnaXN0cnkgY2FsbGJhY2sgdG8gbm90ZSB0aGF0IHRoaXMgYXBwIHNob3VsZCBnbyB0aHJvdWdoIGl0c1xyXG4gICAgLy8gcmVmZXJlbmNlIGNvdW50cyBhbmQgZGVsZXRlIGl0c2VsZiBpZiBubyByZWZlcmVuY2UgY291bnQgcmVtYWluLiBUaGUgY29vcmRpbmF0aW5nIGxvZ2ljIHRoYXRcclxuICAgIC8vIGhhbmRsZXMgdGhpcyBpcyBpbiBkZWxldGVBcHAoLi4uKS5cclxuICAgIGF1dG9tYXRpY0NsZWFudXAoKSB7XHJcbiAgICAgICAgdm9pZCBkZWxldGVBcHAodGhpcyk7XHJcbiAgICB9XHJcbiAgICBnZXQgc2V0dGluZ3MoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZXJ2ZXJDb25maWc7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgZnVuY3Rpb24gd2lsbCB0aHJvdyBhbiBFcnJvciBpZiB0aGUgQXBwIGhhcyBhbHJlYWR5IGJlZW4gZGVsZXRlZCAtXHJcbiAgICAgKiB1c2UgYmVmb3JlIHBlcmZvcm1pbmcgQVBJIGFjdGlvbnMgb24gdGhlIEFwcC5cclxuICAgICAqL1xyXG4gICAgY2hlY2tEZXN0cm95ZWQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNEZWxldGVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwic2VydmVyLWFwcC1kZWxldGVkXCIgLyogQXBwRXJyb3IuU0VSVkVSX0FQUF9ERUxFVEVEICovKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBjdXJyZW50IFNESyB2ZXJzaW9uLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBTREtfVkVSU0lPTiA9IHZlcnNpb247XHJcbmZ1bmN0aW9uIGluaXRpYWxpemVBcHAoX29wdGlvbnMsIHJhd0NvbmZpZyA9IHt9KSB7XHJcbiAgICBsZXQgb3B0aW9ucyA9IF9vcHRpb25zO1xyXG4gICAgaWYgKHR5cGVvZiByYXdDb25maWcgIT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgY29uc3QgbmFtZSA9IHJhd0NvbmZpZztcclxuICAgICAgICByYXdDb25maWcgPSB7IG5hbWUgfTtcclxuICAgIH1cclxuICAgIGNvbnN0IGNvbmZpZyA9IE9iamVjdC5hc3NpZ24oeyBuYW1lOiBERUZBVUxUX0VOVFJZX05BTUUsIGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZDogZmFsc2UgfSwgcmF3Q29uZmlnKTtcclxuICAgIGNvbnN0IG5hbWUgPSBjb25maWcubmFtZTtcclxuICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycgfHwgIW5hbWUpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImJhZC1hcHAtbmFtZVwiIC8qIEFwcEVycm9yLkJBRF9BUFBfTkFNRSAqLywge1xyXG4gICAgICAgICAgICBhcHBOYW1lOiBTdHJpbmcobmFtZSlcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSBnZXREZWZhdWx0QXBwQ29uZmlnKCkpO1xyXG4gICAgaWYgKCFvcHRpb25zKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJuby1vcHRpb25zXCIgLyogQXBwRXJyb3IuTk9fT1BUSU9OUyAqLyk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBleGlzdGluZ0FwcCA9IF9hcHBzLmdldChuYW1lKTtcclxuICAgIGlmIChleGlzdGluZ0FwcCkge1xyXG4gICAgICAgIC8vIHJldHVybiB0aGUgZXhpc3RpbmcgYXBwIGlmIG9wdGlvbnMgYW5kIGNvbmZpZyBkZWVwIGVxdWFsIHRoZSBvbmVzIGluIHRoZSBleGlzdGluZyBhcHAuXHJcbiAgICAgICAgaWYgKGRlZXBFcXVhbChvcHRpb25zLCBleGlzdGluZ0FwcC5vcHRpb25zKSAmJlxyXG4gICAgICAgICAgICBkZWVwRXF1YWwoY29uZmlnLCBleGlzdGluZ0FwcC5jb25maWcpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBleGlzdGluZ0FwcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiZHVwbGljYXRlLWFwcFwiIC8qIEFwcEVycm9yLkRVUExJQ0FURV9BUFAgKi8sIHsgYXBwTmFtZTogbmFtZSB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBjb250YWluZXIgPSBuZXcgQ29tcG9uZW50Q29udGFpbmVyKG5hbWUpO1xyXG4gICAgZm9yIChjb25zdCBjb21wb25lbnQgb2YgX2NvbXBvbmVudHMudmFsdWVzKCkpIHtcclxuICAgICAgICBjb250YWluZXIuYWRkQ29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBuZXdBcHAgPSBuZXcgRmlyZWJhc2VBcHBJbXBsKG9wdGlvbnMsIGNvbmZpZywgY29udGFpbmVyKTtcclxuICAgIF9hcHBzLnNldChuYW1lLCBuZXdBcHApO1xyXG4gICAgcmV0dXJuIG5ld0FwcDtcclxufVxyXG5mdW5jdGlvbiBpbml0aWFsaXplU2VydmVyQXBwKF9vcHRpb25zLCBfc2VydmVyQXBwQ29uZmlnKSB7XHJcbiAgICBpZiAoaXNCcm93c2VyKCkgJiYgIWlzV2ViV29ya2VyKCkpIHtcclxuICAgICAgICAvLyBGaXJlYmFzZVNlcnZlckFwcCBpc24ndCBkZXNpZ25lZCB0byBiZSBydW4gaW4gYnJvd3NlcnMuXHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpbnZhbGlkLXNlcnZlci1hcHAtZW52aXJvbm1lbnRcIiAvKiBBcHBFcnJvci5JTlZBTElEX1NFUlZFUl9BUFBfRU5WSVJPTk1FTlQgKi8pO1xyXG4gICAgfVxyXG4gICAgaWYgKF9zZXJ2ZXJBcHBDb25maWcuYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBfc2VydmVyQXBwQ29uZmlnLmF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgbGV0IGFwcE9wdGlvbnM7XHJcbiAgICBpZiAoX2lzRmlyZWJhc2VBcHAoX29wdGlvbnMpKSB7XHJcbiAgICAgICAgYXBwT3B0aW9ucyA9IF9vcHRpb25zLm9wdGlvbnM7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBhcHBPcHRpb25zID0gX29wdGlvbnM7XHJcbiAgICB9XHJcbiAgICAvLyBCdWlsZCBhbiBhcHAgbmFtZSBiYXNlZCBvbiBhIGhhc2ggb2YgdGhlIGNvbmZpZ3VyYXRpb24gb3B0aW9ucy5cclxuICAgIGNvbnN0IG5hbWVPYmogPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIF9zZXJ2ZXJBcHBDb25maWcpLCBhcHBPcHRpb25zKTtcclxuICAgIC8vIEhvd2V2ZXIsIERvIG5vdCBtYW5nbGUgdGhlIG5hbWUgYmFzZWQgb24gcmVsZWFzZU9uRGVyZWYsIHNpbmNlIGl0IHdpbGwgdmFyeSBiZXR3ZWVuIHRoZVxyXG4gICAgLy8gY29uc3RydWN0aW9uIG9mIEZpcmViYXNlU2VydmVyQXBwIGluc3RhbmNlcy4gRm9yIGV4YW1wbGUsIGlmIHRoZSBvYmplY3QgaXMgdGhlIHJlcXVlc3QgaGVhZGVycy5cclxuICAgIGlmIChuYW1lT2JqLnJlbGVhc2VPbkRlcmVmICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBkZWxldGUgbmFtZU9iai5yZWxlYXNlT25EZXJlZjtcclxuICAgIH1cclxuICAgIGNvbnN0IGhhc2hDb2RlID0gKHMpID0+IHtcclxuICAgICAgICByZXR1cm4gWy4uLnNdLnJlZHVjZSgoaGFzaCwgYykgPT4gKE1hdGguaW11bCgzMSwgaGFzaCkgKyBjLmNoYXJDb2RlQXQoMCkpIHwgMCwgMCk7XHJcbiAgICB9O1xyXG4gICAgaWYgKF9zZXJ2ZXJBcHBDb25maWcucmVsZWFzZU9uRGVyZWYgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgRmluYWxpemF0aW9uUmVnaXN0cnkgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiZmluYWxpemF0aW9uLXJlZ2lzdHJ5LW5vdC1zdXBwb3J0ZWRcIiAvKiBBcHBFcnJvci5GSU5BTElaQVRJT05fUkVHSVNUUllfTk9UX1NVUFBPUlRFRCAqLywge30pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IG5hbWVTdHJpbmcgPSAnJyArIGhhc2hDb2RlKEpTT04uc3RyaW5naWZ5KG5hbWVPYmopKTtcclxuICAgIGNvbnN0IGV4aXN0aW5nQXBwID0gX3NlcnZlckFwcHMuZ2V0KG5hbWVTdHJpbmcpO1xyXG4gICAgaWYgKGV4aXN0aW5nQXBwKSB7XHJcbiAgICAgICAgZXhpc3RpbmdBcHAuaW5jUmVmQ291bnQoX3NlcnZlckFwcENvbmZpZy5yZWxlYXNlT25EZXJlZik7XHJcbiAgICAgICAgcmV0dXJuIGV4aXN0aW5nQXBwO1xyXG4gICAgfVxyXG4gICAgY29uc3QgY29udGFpbmVyID0gbmV3IENvbXBvbmVudENvbnRhaW5lcihuYW1lU3RyaW5nKTtcclxuICAgIGZvciAoY29uc3QgY29tcG9uZW50IG9mIF9jb21wb25lbnRzLnZhbHVlcygpKSB7XHJcbiAgICAgICAgY29udGFpbmVyLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbmV3QXBwID0gbmV3IEZpcmViYXNlU2VydmVyQXBwSW1wbChhcHBPcHRpb25zLCBfc2VydmVyQXBwQ29uZmlnLCBuYW1lU3RyaW5nLCBjb250YWluZXIpO1xyXG4gICAgX3NlcnZlckFwcHMuc2V0KG5hbWVTdHJpbmcsIG5ld0FwcCk7XHJcbiAgICByZXR1cm4gbmV3QXBwO1xyXG59XHJcbi8qKlxyXG4gKiBSZXRyaWV2ZXMgYSB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gaW5zdGFuY2UuXHJcbiAqXHJcbiAqIFdoZW4gY2FsbGVkIHdpdGggbm8gYXJndW1lbnRzLCB0aGUgZGVmYXVsdCBhcHAgaXMgcmV0dXJuZWQuIFdoZW4gYW4gYXBwIG5hbWVcclxuICogaXMgcHJvdmlkZWQsIHRoZSBhcHAgY29ycmVzcG9uZGluZyB0byB0aGF0IG5hbWUgaXMgcmV0dXJuZWQuXHJcbiAqXHJcbiAqIEFuIGV4Y2VwdGlvbiBpcyB0aHJvd24gaWYgdGhlIGFwcCBiZWluZyByZXRyaWV2ZWQgaGFzIG5vdCB5ZXQgYmVlblxyXG4gKiBpbml0aWFsaXplZC5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBSZXR1cm4gdGhlIGRlZmF1bHQgYXBwXHJcbiAqIGNvbnN0IGFwcCA9IGdldEFwcCgpO1xyXG4gKiBgYGBcclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBSZXR1cm4gYSBuYW1lZCBhcHBcclxuICogY29uc3Qgb3RoZXJBcHAgPSBnZXRBcHAoXCJvdGhlckFwcFwiKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBuYW1lIC0gT3B0aW9uYWwgbmFtZSBvZiB0aGUgYXBwIHRvIHJldHVybi4gSWYgbm8gbmFtZSBpc1xyXG4gKiAgIHByb3ZpZGVkLCB0aGUgZGVmYXVsdCBpcyBgXCJbREVGQVVMVF1cImAuXHJcbiAqXHJcbiAqIEByZXR1cm5zIFRoZSBhcHAgY29ycmVzcG9uZGluZyB0byB0aGUgcHJvdmlkZWQgYXBwIG5hbWUuXHJcbiAqICAgSWYgbm8gYXBwIG5hbWUgaXMgcHJvdmlkZWQsIHRoZSBkZWZhdWx0IGFwcCBpcyByZXR1cm5lZC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0QXBwKG5hbWUgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgIGNvbnN0IGFwcCA9IF9hcHBzLmdldChuYW1lKTtcclxuICAgIGlmICghYXBwICYmIG5hbWUgPT09IERFRkFVTFRfRU5UUllfTkFNRSAmJiBnZXREZWZhdWx0QXBwQ29uZmlnKCkpIHtcclxuICAgICAgICByZXR1cm4gaW5pdGlhbGl6ZUFwcCgpO1xyXG4gICAgfVxyXG4gICAgaWYgKCFhcHApIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vLWFwcFwiIC8qIEFwcEVycm9yLk5PX0FQUCAqLywgeyBhcHBOYW1lOiBuYW1lIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFwcDtcclxufVxyXG4vKipcclxuICogQSAocmVhZC1vbmx5KSBhcnJheSBvZiBhbGwgaW5pdGlhbGl6ZWQgYXBwcy5cclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0QXBwcygpIHtcclxuICAgIHJldHVybiBBcnJheS5mcm9tKF9hcHBzLnZhbHVlcygpKTtcclxufVxyXG4vKipcclxuICogUmVuZGVycyB0aGlzIGFwcCB1bnVzYWJsZSBhbmQgZnJlZXMgdGhlIHJlc291cmNlcyBvZiBhbGwgYXNzb2NpYXRlZFxyXG4gKiBzZXJ2aWNlcy5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiBkZWxldGVBcHAoYXBwKVxyXG4gKiAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gKiAgICAgY29uc29sZS5sb2coXCJBcHAgZGVsZXRlZCBzdWNjZXNzZnVsbHlcIik7XHJcbiAqICAgfSlcclxuICogICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcclxuICogICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgZGVsZXRpbmcgYXBwOlwiLCBlcnJvcik7XHJcbiAqICAgfSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBkZWxldGVBcHAoYXBwKSB7XHJcbiAgICBsZXQgY2xlYW51cFByb3ZpZGVycyA9IGZhbHNlO1xyXG4gICAgY29uc3QgbmFtZSA9IGFwcC5uYW1lO1xyXG4gICAgaWYgKF9hcHBzLmhhcyhuYW1lKSkge1xyXG4gICAgICAgIGNsZWFudXBQcm92aWRlcnMgPSB0cnVlO1xyXG4gICAgICAgIF9hcHBzLmRlbGV0ZShuYW1lKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKF9zZXJ2ZXJBcHBzLmhhcyhuYW1lKSkge1xyXG4gICAgICAgIGNvbnN0IGZpcmViYXNlU2VydmVyQXBwID0gYXBwO1xyXG4gICAgICAgIGlmIChmaXJlYmFzZVNlcnZlckFwcC5kZWNSZWZDb3VudCgpIDw9IDApIHtcclxuICAgICAgICAgICAgX3NlcnZlckFwcHMuZGVsZXRlKG5hbWUpO1xyXG4gICAgICAgICAgICBjbGVhbnVwUHJvdmlkZXJzID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoY2xlYW51cFByb3ZpZGVycykge1xyXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGFwcC5jb250YWluZXJcclxuICAgICAgICAgICAgLmdldFByb3ZpZGVycygpXHJcbiAgICAgICAgICAgIC5tYXAocHJvdmlkZXIgPT4gcHJvdmlkZXIuZGVsZXRlKCkpKTtcclxuICAgICAgICBhcHAuaXNEZWxldGVkID0gdHJ1ZTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogUmVnaXN0ZXJzIGEgbGlicmFyeSdzIG5hbWUgYW5kIHZlcnNpb24gZm9yIHBsYXRmb3JtIGxvZ2dpbmcgcHVycG9zZXMuXHJcbiAqIEBwYXJhbSBsaWJyYXJ5IC0gTmFtZSBvZiAxcCBvciAzcCBsaWJyYXJ5IChlLmcuIGZpcmVzdG9yZSwgYW5ndWxhcmZpcmUpXHJcbiAqIEBwYXJhbSB2ZXJzaW9uIC0gQ3VycmVudCB2ZXJzaW9uIG9mIHRoYXQgbGlicmFyeS5cclxuICogQHBhcmFtIHZhcmlhbnQgLSBCdW5kbGUgdmFyaWFudCwgZS5nLiwgbm9kZSwgcm4sIGV0Yy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJWZXJzaW9uKGxpYnJhcnlLZXlPck5hbWUsIHZlcnNpb24sIHZhcmlhbnQpIHtcclxuICAgIHZhciBfYTtcclxuICAgIC8vIFRPRE86IFdlIGNhbiB1c2UgdGhpcyBjaGVjayB0byB3aGl0ZWxpc3Qgc3RyaW5ncyB3aGVuL2lmIHdlIHNldCB1cFxyXG4gICAgLy8gYSBnb29kIHdoaXRlbGlzdCBzeXN0ZW0uXHJcbiAgICBsZXQgbGlicmFyeSA9IChfYSA9IFBMQVRGT1JNX0xPR19TVFJJTkdbbGlicmFyeUtleU9yTmFtZV0pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGxpYnJhcnlLZXlPck5hbWU7XHJcbiAgICBpZiAodmFyaWFudCkge1xyXG4gICAgICAgIGxpYnJhcnkgKz0gYC0ke3ZhcmlhbnR9YDtcclxuICAgIH1cclxuICAgIGNvbnN0IGxpYnJhcnlNaXNtYXRjaCA9IGxpYnJhcnkubWF0Y2goL1xcc3xcXC8vKTtcclxuICAgIGNvbnN0IHZlcnNpb25NaXNtYXRjaCA9IHZlcnNpb24ubWF0Y2goL1xcc3xcXC8vKTtcclxuICAgIGlmIChsaWJyYXJ5TWlzbWF0Y2ggfHwgdmVyc2lvbk1pc21hdGNoKSB7XHJcbiAgICAgICAgY29uc3Qgd2FybmluZyA9IFtcclxuICAgICAgICAgICAgYFVuYWJsZSB0byByZWdpc3RlciBsaWJyYXJ5IFwiJHtsaWJyYXJ5fVwiIHdpdGggdmVyc2lvbiBcIiR7dmVyc2lvbn1cIjpgXHJcbiAgICAgICAgXTtcclxuICAgICAgICBpZiAobGlicmFyeU1pc21hdGNoKSB7XHJcbiAgICAgICAgICAgIHdhcm5pbmcucHVzaChgbGlicmFyeSBuYW1lIFwiJHtsaWJyYXJ5fVwiIGNvbnRhaW5zIGlsbGVnYWwgY2hhcmFjdGVycyAod2hpdGVzcGFjZSBvciBcIi9cIilgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxpYnJhcnlNaXNtYXRjaCAmJiB2ZXJzaW9uTWlzbWF0Y2gpIHtcclxuICAgICAgICAgICAgd2FybmluZy5wdXNoKCdhbmQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHZlcnNpb25NaXNtYXRjaCkge1xyXG4gICAgICAgICAgICB3YXJuaW5nLnB1c2goYHZlcnNpb24gbmFtZSBcIiR7dmVyc2lvbn1cIiBjb250YWlucyBpbGxlZ2FsIGNoYXJhY3RlcnMgKHdoaXRlc3BhY2Ugb3IgXCIvXCIpYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxvZ2dlci53YXJuKHdhcm5pbmcuam9pbignICcpKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChgJHtsaWJyYXJ5fS12ZXJzaW9uYCwgKCkgPT4gKHsgbGlicmFyeSwgdmVyc2lvbiB9KSwgXCJWRVJTSU9OXCIgLyogQ29tcG9uZW50VHlwZS5WRVJTSU9OICovKSk7XHJcbn1cclxuLyoqXHJcbiAqIFNldHMgbG9nIGhhbmRsZXIgZm9yIGFsbCBGaXJlYmFzZSBTREtzLlxyXG4gKiBAcGFyYW0gbG9nQ2FsbGJhY2sgLSBBbiBvcHRpb25hbCBjdXN0b20gbG9nIGhhbmRsZXIgdGhhdCBleGVjdXRlcyB1c2VyIGNvZGUgd2hlbmV2ZXJcclxuICogdGhlIEZpcmViYXNlIFNESyBtYWtlcyBhIGxvZ2dpbmcgY2FsbC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gb25Mb2cobG9nQ2FsbGJhY2ssIG9wdGlvbnMpIHtcclxuICAgIGlmIChsb2dDYWxsYmFjayAhPT0gbnVsbCAmJiB0eXBlb2YgbG9nQ2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImludmFsaWQtbG9nLWFyZ3VtZW50XCIgLyogQXBwRXJyb3IuSU5WQUxJRF9MT0dfQVJHVU1FTlQgKi8pO1xyXG4gICAgfVxyXG4gICAgc2V0VXNlckxvZ0hhbmRsZXIobG9nQ2FsbGJhY2ssIG9wdGlvbnMpO1xyXG59XHJcbi8qKlxyXG4gKiBTZXRzIGxvZyBsZXZlbCBmb3IgYWxsIEZpcmViYXNlIFNES3MuXHJcbiAqXHJcbiAqIEFsbCBvZiB0aGUgbG9nIHR5cGVzIGFib3ZlIHRoZSBjdXJyZW50IGxvZyBsZXZlbCBhcmUgY2FwdHVyZWQgKGkuZS4gaWZcclxuICogeW91IHNldCB0aGUgbG9nIGxldmVsIHRvIGBpbmZvYCwgZXJyb3JzIGFyZSBsb2dnZWQsIGJ1dCBgZGVidWdgIGFuZFxyXG4gKiBgdmVyYm9zZWAgbG9ncyBhcmUgbm90KS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gc2V0TG9nTGV2ZWwobG9nTGV2ZWwpIHtcclxuICAgIHNldExvZ0xldmVsJDEobG9nTGV2ZWwpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IERCX05BTUUgPSAnZmlyZWJhc2UtaGVhcnRiZWF0LWRhdGFiYXNlJztcclxuY29uc3QgREJfVkVSU0lPTiA9IDE7XHJcbmNvbnN0IFNUT1JFX05BTUUgPSAnZmlyZWJhc2UtaGVhcnRiZWF0LXN0b3JlJztcclxubGV0IGRiUHJvbWlzZSA9IG51bGw7XHJcbmZ1bmN0aW9uIGdldERiUHJvbWlzZSgpIHtcclxuICAgIGlmICghZGJQcm9taXNlKSB7XHJcbiAgICAgICAgZGJQcm9taXNlID0gb3BlbkRCKERCX05BTUUsIERCX1ZFUlNJT04sIHtcclxuICAgICAgICAgICAgdXBncmFkZTogKGRiLCBvbGRWZXJzaW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBXZSBkb24ndCB1c2UgJ2JyZWFrJyBpbiB0aGlzIHN3aXRjaCBzdGF0ZW1lbnQsIHRoZSBmYWxsLXRocm91Z2hcclxuICAgICAgICAgICAgICAgIC8vIGJlaGF2aW9yIGlzIHdoYXQgd2Ugd2FudCwgYmVjYXVzZSBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgdmVyc2lvbnMgYmV0d2VlblxyXG4gICAgICAgICAgICAgICAgLy8gdGhlIG9sZCB2ZXJzaW9uIGFuZCB0aGUgY3VycmVudCB2ZXJzaW9uLCB3ZSB3YW50IEFMTCB0aGUgbWlncmF0aW9uc1xyXG4gICAgICAgICAgICAgICAgLy8gdGhhdCBjb3JyZXNwb25kIHRvIHRob3NlIHZlcnNpb25zIHRvIHJ1biwgbm90IG9ubHkgdGhlIGxhc3Qgb25lLlxyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlZmF1bHQtY2FzZVxyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChvbGRWZXJzaW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoU1RPUkVfTkFNRSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNhZmFyaS9pT1MgYnJvd3NlcnMgdGhyb3cgb2NjYXNpb25hbCBleGNlcHRpb25zIG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkYi5jcmVhdGVPYmplY3RTdG9yZSgpIHRoYXQgbWF5IGJlIGEgYnVnLiBBdm9pZCBibG9ja2luZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHJlc3Qgb2YgdGhlIGFwcCBmdW5jdGlvbmFsaXR5LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpZGItb3BlblwiIC8qIEFwcEVycm9yLklEQl9PUEVOICovLCB7XHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbEVycm9yTWVzc2FnZTogZS5tZXNzYWdlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRiUHJvbWlzZTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiByZWFkSGVhcnRiZWF0c0Zyb21JbmRleGVkREIoYXBwKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGJQcm9taXNlKCk7XHJcbiAgICAgICAgY29uc3QgdHggPSBkYi50cmFuc2FjdGlvbihTVE9SRV9OQU1FKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0eC5vYmplY3RTdG9yZShTVE9SRV9OQU1FKS5nZXQoY29tcHV0ZUtleShhcHApKTtcclxuICAgICAgICAvLyBXZSBhbHJlYWR5IGhhdmUgdGhlIHZhbHVlIGJ1dCB0eC5kb25lIGNhbiB0aHJvdyxcclxuICAgICAgICAvLyBzbyB3ZSBuZWVkIHRvIGF3YWl0IGl0IGhlcmUgdG8gY2F0Y2ggZXJyb3JzXHJcbiAgICAgICAgYXdhaXQgdHguZG9uZTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IpIHtcclxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oZS5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlkYkdldEVycm9yID0gRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpZGItZ2V0XCIgLyogQXBwRXJyb3IuSURCX0dFVCAqLywge1xyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxFcnJvck1lc3NhZ2U6IGUgPT09IG51bGwgfHwgZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZS5tZXNzYWdlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBsb2dnZXIud2FybihpZGJHZXRFcnJvci5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gd3JpdGVIZWFydGJlYXRzVG9JbmRleGVkREIoYXBwLCBoZWFydGJlYXRPYmplY3QpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZGIgPSBhd2FpdCBnZXREYlByb21pc2UoKTtcclxuICAgICAgICBjb25zdCB0eCA9IGRiLnRyYW5zYWN0aW9uKFNUT1JFX05BTUUsICdyZWFkd3JpdGUnKTtcclxuICAgICAgICBjb25zdCBvYmplY3RTdG9yZSA9IHR4Lm9iamVjdFN0b3JlKFNUT1JFX05BTUUpO1xyXG4gICAgICAgIGF3YWl0IG9iamVjdFN0b3JlLnB1dChoZWFydGJlYXRPYmplY3QsIGNvbXB1dGVLZXkoYXBwKSk7XHJcbiAgICAgICAgYXdhaXQgdHguZG9uZTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBGaXJlYmFzZUVycm9yKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGUubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBpZGJHZXRFcnJvciA9IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaWRiLXNldFwiIC8qIEFwcEVycm9yLklEQl9XUklURSAqLywge1xyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxFcnJvck1lc3NhZ2U6IGUgPT09IG51bGwgfHwgZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZS5tZXNzYWdlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBsb2dnZXIud2FybihpZGJHZXRFcnJvci5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gY29tcHV0ZUtleShhcHApIHtcclxuICAgIHJldHVybiBgJHthcHAubmFtZX0hJHthcHAub3B0aW9ucy5hcHBJZH1gO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IE1BWF9IRUFERVJfQllURVMgPSAxMDI0O1xyXG4vLyAzMCBkYXlzXHJcbmNvbnN0IFNUT1JFRF9IRUFSVEJFQVRfUkVURU5USU9OX01BWF9NSUxMSVMgPSAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDA7XHJcbmNsYXNzIEhlYXJ0YmVhdFNlcnZpY2VJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lcikge1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEluLW1lbW9yeSBjYWNoZSBmb3IgaGVhcnRiZWF0cywgdXNlZCBieSBnZXRIZWFydGJlYXRzSGVhZGVyKCkgdG8gZ2VuZXJhdGVcclxuICAgICAgICAgKiB0aGUgaGVhZGVyIHN0cmluZy5cclxuICAgICAgICAgKiBTdG9yZXMgb25lIHJlY29yZCBwZXIgZGF0ZS4gVGhpcyB3aWxsIGJlIGNvbnNvbGlkYXRlZCBpbnRvIHRoZSBzdGFuZGFyZFxyXG4gICAgICAgICAqIGZvcm1hdCBvZiBvbmUgcmVjb3JkIHBlciB1c2VyIGFnZW50IHN0cmluZyBiZWZvcmUgYmVpbmcgc2VudCBhcyBhIGhlYWRlci5cclxuICAgICAgICAgKiBQb3B1bGF0ZWQgZnJvbSBpbmRleGVkREIgd2hlbiB0aGUgY29udHJvbGxlciBpcyBpbnN0YW50aWF0ZWQgYW5kIHNob3VsZFxyXG4gICAgICAgICAqIGJlIGtlcHQgaW4gc3luYyB3aXRoIGluZGV4ZWREQi5cclxuICAgICAgICAgKiBMZWF2ZSBwdWJsaWMgZm9yIGVhc2llciB0ZXN0aW5nLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9IG51bGw7XHJcbiAgICAgICAgY29uc3QgYXBwID0gdGhpcy5jb250YWluZXIuZ2V0UHJvdmlkZXIoJ2FwcCcpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIHRoaXMuX3N0b3JhZ2UgPSBuZXcgSGVhcnRiZWF0U3RvcmFnZUltcGwoYXBwKTtcclxuICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGVQcm9taXNlID0gdGhpcy5fc3RvcmFnZS5yZWFkKCkudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPSByZXN1bHQ7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENhbGxlZCB0byByZXBvcnQgYSBoZWFydGJlYXQuIFRoZSBmdW5jdGlvbiB3aWxsIGdlbmVyYXRlXHJcbiAgICAgKiBhIEhlYXJ0YmVhdHNCeVVzZXJBZ2VudCBvYmplY3QsIHVwZGF0ZSBoZWFydGJlYXRzQ2FjaGUsIGFuZCBwZXJzaXN0IGl0XHJcbiAgICAgKiB0byBJbmRleGVkREIuXHJcbiAgICAgKiBOb3RlIHRoYXQgd2Ugb25seSBzdG9yZSBvbmUgaGVhcnRiZWF0IHBlciBkYXkuIFNvIGlmIGEgaGVhcnRiZWF0IGZvciB0b2RheSBpc1xyXG4gICAgICogYWxyZWFkeSBsb2dnZWQsIHN1YnNlcXVlbnQgY2FsbHMgdG8gdGhpcyBmdW5jdGlvbiBpbiB0aGUgc2FtZSBkYXkgd2lsbCBiZSBpZ25vcmVkLlxyXG4gICAgICovXHJcbiAgICBhc3luYyB0cmlnZ2VySGVhcnRiZWF0KCkge1xyXG4gICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgY29uc3QgcGxhdGZvcm1Mb2dnZXIgPSB0aGlzLmNvbnRhaW5lclxyXG4gICAgICAgICAgICAuZ2V0UHJvdmlkZXIoJ3BsYXRmb3JtLWxvZ2dlcicpXHJcbiAgICAgICAgICAgIC5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICAvLyBUaGlzIGlzIHRoZSBcIkZpcmViYXNlIHVzZXIgYWdlbnRcIiBzdHJpbmcgZnJvbSB0aGUgcGxhdGZvcm0gbG9nZ2VyXHJcbiAgICAgICAgLy8gc2VydmljZSwgbm90IHRoZSBicm93c2VyIHVzZXIgYWdlbnQuXHJcbiAgICAgICAgY29uc3QgYWdlbnQgPSBwbGF0Zm9ybUxvZ2dlci5nZXRQbGF0Zm9ybUluZm9TdHJpbmcoKTtcclxuICAgICAgICBjb25zdCBkYXRlID0gZ2V0VVRDRGF0ZVN0cmluZygpO1xyXG4gICAgICAgIGlmICgoKF9hID0gdGhpcy5faGVhcnRiZWF0c0NhY2hlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaGVhcnRiZWF0cykgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPSBhd2FpdCB0aGlzLl9oZWFydGJlYXRzQ2FjaGVQcm9taXNlO1xyXG4gICAgICAgICAgICAvLyBJZiB3ZSBmYWlsZWQgdG8gY29uc3RydWN0IGEgaGVhcnRiZWF0cyBjYWNoZSwgdGhlbiByZXR1cm4gaW1tZWRpYXRlbHkuXHJcbiAgICAgICAgICAgIGlmICgoKF9iID0gdGhpcy5faGVhcnRiZWF0c0NhY2hlKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuaGVhcnRiZWF0cykgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIERvIG5vdCBzdG9yZSBhIGhlYXJ0YmVhdCBpZiBvbmUgaXMgYWxyZWFkeSBzdG9yZWQgZm9yIHRoaXMgZGF5XHJcbiAgICAgICAgLy8gb3IgaWYgYSBoZWFkZXIgaGFzIGFscmVhZHkgYmVlbiBzZW50IHRvZGF5LlxyXG4gICAgICAgIGlmICh0aGlzLl9oZWFydGJlYXRzQ2FjaGUubGFzdFNlbnRIZWFydGJlYXREYXRlID09PSBkYXRlIHx8XHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzLnNvbWUoc2luZ2xlRGF0ZUhlYXJ0YmVhdCA9PiBzaW5nbGVEYXRlSGVhcnRiZWF0LmRhdGUgPT09IGRhdGUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFRoZXJlIGlzIG5vIGVudHJ5IGZvciB0aGlzIGRhdGUuIENyZWF0ZSBvbmUuXHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzLnB1c2goeyBkYXRlLCBhZ2VudCB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUmVtb3ZlIGVudHJpZXMgb2xkZXIgdGhhbiAzMCBkYXlzLlxyXG4gICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzID0gdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMuZmlsdGVyKHNpbmdsZURhdGVIZWFydGJlYXQgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBoYlRpbWVzdGFtcCA9IG5ldyBEYXRlKHNpbmdsZURhdGVIZWFydGJlYXQuZGF0ZSkudmFsdWVPZigpO1xyXG4gICAgICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICByZXR1cm4gbm93IC0gaGJUaW1lc3RhbXAgPD0gU1RPUkVEX0hFQVJUQkVBVF9SRVRFTlRJT05fTUFYX01JTExJUztcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc3RvcmFnZS5vdmVyd3JpdGUodGhpcy5faGVhcnRiZWF0c0NhY2hlKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIGJhc2U2NCBlbmNvZGVkIHN0cmluZyB3aGljaCBjYW4gYmUgYXR0YWNoZWQgdG8gdGhlIGhlYXJ0YmVhdC1zcGVjaWZpYyBoZWFkZXIgZGlyZWN0bHkuXHJcbiAgICAgKiBJdCBhbHNvIGNsZWFycyBhbGwgaGVhcnRiZWF0cyBmcm9tIG1lbW9yeSBhcyB3ZWxsIGFzIGluIEluZGV4ZWREQi5cclxuICAgICAqXHJcbiAgICAgKiBOT1RFOiBDb25zdW1pbmcgcHJvZHVjdCBTREtzIHNob3VsZCBub3Qgc2VuZCB0aGUgaGVhZGVyIGlmIHRoaXMgbWV0aG9kXHJcbiAgICAgKiByZXR1cm5zIGFuIGVtcHR5IHN0cmluZy5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgZ2V0SGVhcnRiZWF0c0hlYWRlcigpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9oZWFydGJlYXRzQ2FjaGVQcm9taXNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJZiBpdCdzIHN0aWxsIG51bGwgb3IgdGhlIGFycmF5IGlzIGVtcHR5LCB0aGVyZSBpcyBubyBkYXRhIHRvIHNlbmQuXHJcbiAgICAgICAgaWYgKCgoX2EgPSB0aGlzLl9oZWFydGJlYXRzQ2FjaGUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5oZWFydGJlYXRzKSA9PSBudWxsIHx8XHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGRhdGUgPSBnZXRVVENEYXRlU3RyaW5nKCk7XHJcbiAgICAgICAgLy8gRXh0cmFjdCBhcyBtYW55IGhlYXJ0YmVhdHMgZnJvbSB0aGUgY2FjaGUgYXMgd2lsbCBmaXQgdW5kZXIgdGhlIHNpemUgbGltaXQuXHJcbiAgICAgICAgY29uc3QgeyBoZWFydGJlYXRzVG9TZW5kLCB1bnNlbnRFbnRyaWVzIH0gPSBleHRyYWN0SGVhcnRiZWF0c0ZvckhlYWRlcih0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cyk7XHJcbiAgICAgICAgY29uc3QgaGVhZGVyU3RyaW5nID0gYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcoSlNPTi5zdHJpbmdpZnkoeyB2ZXJzaW9uOiAyLCBoZWFydGJlYXRzOiBoZWFydGJlYXRzVG9TZW5kIH0pKTtcclxuICAgICAgICAvLyBTdG9yZSBsYXN0IHNlbnQgZGF0ZSB0byBwcmV2ZW50IGFub3RoZXIgYmVpbmcgbG9nZ2VkL3NlbnQgZm9yIHRoZSBzYW1lIGRheS5cclxuICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUubGFzdFNlbnRIZWFydGJlYXREYXRlID0gZGF0ZTtcclxuICAgICAgICBpZiAodW5zZW50RW50cmllcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIFN0b3JlIGFueSB1bnNlbnQgZW50cmllcyBpZiB0aGV5IGV4aXN0LlxyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cyA9IHVuc2VudEVudHJpZXM7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgc2VlbXMgbW9yZSBsaWtlbHkgdGhhbiBlbXB0eWluZyB0aGUgYXJyYXkgKGJlbG93KSB0byBsZWFkIHRvIHNvbWUgb2RkIHN0YXRlXHJcbiAgICAgICAgICAgIC8vIHNpbmNlIHRoZSBjYWNoZSBpc24ndCBlbXB0eSBhbmQgdGhpcyB3aWxsIGJlIGNhbGxlZCBhZ2FpbiBvbiB0aGUgbmV4dCByZXF1ZXN0LFxyXG4gICAgICAgICAgICAvLyBhbmQgaXMgcHJvYmFibHkgc2FmZXN0IGlmIHdlIGF3YWl0IGl0LlxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9zdG9yYWdlLm92ZXJ3cml0ZSh0aGlzLl9oZWFydGJlYXRzQ2FjaGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMgPSBbXTtcclxuICAgICAgICAgICAgLy8gRG8gbm90IHdhaXQgZm9yIHRoaXMsIHRvIHJlZHVjZSBsYXRlbmN5LlxyXG4gICAgICAgICAgICB2b2lkIHRoaXMuX3N0b3JhZ2Uub3ZlcndyaXRlKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBoZWFkZXJTdHJpbmc7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZ2V0VVRDRGF0ZVN0cmluZygpIHtcclxuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcclxuICAgIC8vIFJldHVybnMgZGF0ZSBmb3JtYXQgJ1lZWVktTU0tREQnXHJcbiAgICByZXR1cm4gdG9kYXkudG9JU09TdHJpbmcoKS5zdWJzdHJpbmcoMCwgMTApO1xyXG59XHJcbmZ1bmN0aW9uIGV4dHJhY3RIZWFydGJlYXRzRm9ySGVhZGVyKGhlYXJ0YmVhdHNDYWNoZSwgbWF4U2l6ZSA9IE1BWF9IRUFERVJfQllURVMpIHtcclxuICAgIC8vIEhlYXJ0YmVhdHMgZ3JvdXBlZCBieSB1c2VyIGFnZW50IGluIHRoZSBzdGFuZGFyZCBmb3JtYXQgdG8gYmUgc2VudCBpblxyXG4gICAgLy8gdGhlIGhlYWRlci5cclxuICAgIGNvbnN0IGhlYXJ0YmVhdHNUb1NlbmQgPSBbXTtcclxuICAgIC8vIFNpbmdsZSBkYXRlIGZvcm1hdCBoZWFydGJlYXRzIHRoYXQgYXJlIG5vdCBzZW50LlxyXG4gICAgbGV0IHVuc2VudEVudHJpZXMgPSBoZWFydGJlYXRzQ2FjaGUuc2xpY2UoKTtcclxuICAgIGZvciAoY29uc3Qgc2luZ2xlRGF0ZUhlYXJ0YmVhdCBvZiBoZWFydGJlYXRzQ2FjaGUpIHtcclxuICAgICAgICAvLyBMb29rIGZvciBhbiBleGlzdGluZyBlbnRyeSB3aXRoIHRoZSBzYW1lIHVzZXIgYWdlbnQuXHJcbiAgICAgICAgY29uc3QgaGVhcnRiZWF0RW50cnkgPSBoZWFydGJlYXRzVG9TZW5kLmZpbmQoaGIgPT4gaGIuYWdlbnQgPT09IHNpbmdsZURhdGVIZWFydGJlYXQuYWdlbnQpO1xyXG4gICAgICAgIGlmICghaGVhcnRiZWF0RW50cnkpIHtcclxuICAgICAgICAgICAgLy8gSWYgbm8gZW50cnkgZm9yIHRoaXMgdXNlciBhZ2VudCBleGlzdHMsIGNyZWF0ZSBvbmUuXHJcbiAgICAgICAgICAgIGhlYXJ0YmVhdHNUb1NlbmQucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBhZ2VudDogc2luZ2xlRGF0ZUhlYXJ0YmVhdC5hZ2VudCxcclxuICAgICAgICAgICAgICAgIGRhdGVzOiBbc2luZ2xlRGF0ZUhlYXJ0YmVhdC5kYXRlXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKGNvdW50Qnl0ZXMoaGVhcnRiZWF0c1RvU2VuZCkgPiBtYXhTaXplKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgaGVhZGVyIHdvdWxkIGV4Y2VlZCBtYXggc2l6ZSwgcmVtb3ZlIHRoZSBhZGRlZCBoZWFydGJlYXRcclxuICAgICAgICAgICAgICAgIC8vIGVudHJ5IGFuZCBzdG9wIGFkZGluZyB0byB0aGUgaGVhZGVyLlxyXG4gICAgICAgICAgICAgICAgaGVhcnRiZWF0c1RvU2VuZC5wb3AoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBoZWFydGJlYXRFbnRyeS5kYXRlcy5wdXNoKHNpbmdsZURhdGVIZWFydGJlYXQuZGF0ZSk7XHJcbiAgICAgICAgICAgIC8vIElmIHRoZSBoZWFkZXIgd291bGQgZXhjZWVkIG1heCBzaXplLCByZW1vdmUgdGhlIGFkZGVkIGRhdGVcclxuICAgICAgICAgICAgLy8gYW5kIHN0b3AgYWRkaW5nIHRvIHRoZSBoZWFkZXIuXHJcbiAgICAgICAgICAgIGlmIChjb3VudEJ5dGVzKGhlYXJ0YmVhdHNUb1NlbmQpID4gbWF4U2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgaGVhcnRiZWF0RW50cnkuZGF0ZXMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBQb3AgdW5zZW50IGVudHJ5IGZyb20gcXVldWUuIChTa2lwcGVkIGlmIGFkZGluZyB0aGUgZW50cnkgZXhjZWVkZWRcclxuICAgICAgICAvLyBxdW90YSBhbmQgdGhlIGxvb3AgYnJlYWtzIGVhcmx5LilcclxuICAgICAgICB1bnNlbnRFbnRyaWVzID0gdW5zZW50RW50cmllcy5zbGljZSgxKTtcclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaGVhcnRiZWF0c1RvU2VuZCxcclxuICAgICAgICB1bnNlbnRFbnRyaWVzXHJcbiAgICB9O1xyXG59XHJcbmNsYXNzIEhlYXJ0YmVhdFN0b3JhZ2VJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGFwcCkge1xyXG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xyXG4gICAgICAgIHRoaXMuX2NhblVzZUluZGV4ZWREQlByb21pc2UgPSB0aGlzLnJ1bkluZGV4ZWREQkVudmlyb25tZW50Q2hlY2soKTtcclxuICAgIH1cclxuICAgIGFzeW5jIHJ1bkluZGV4ZWREQkVudmlyb25tZW50Q2hlY2soKSB7XHJcbiAgICAgICAgaWYgKCFpc0luZGV4ZWREQkF2YWlsYWJsZSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlKClcclxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHRydWUpXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goKCkgPT4gZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmVhZCBhbGwgaGVhcnRiZWF0cy5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgcmVhZCgpIHtcclxuICAgICAgICBjb25zdCBjYW5Vc2VJbmRleGVkREIgPSBhd2FpdCB0aGlzLl9jYW5Vc2VJbmRleGVkREJQcm9taXNlO1xyXG4gICAgICAgIGlmICghY2FuVXNlSW5kZXhlZERCKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IGhlYXJ0YmVhdHM6IFtdIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBpZGJIZWFydGJlYXRPYmplY3QgPSBhd2FpdCByZWFkSGVhcnRiZWF0c0Zyb21JbmRleGVkREIodGhpcy5hcHApO1xyXG4gICAgICAgICAgICBpZiAoaWRiSGVhcnRiZWF0T2JqZWN0ID09PSBudWxsIHx8IGlkYkhlYXJ0YmVhdE9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogaWRiSGVhcnRiZWF0T2JqZWN0LmhlYXJ0YmVhdHMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpZGJIZWFydGJlYXRPYmplY3Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBoZWFydGJlYXRzOiBbXSB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gb3ZlcndyaXRlIHRoZSBzdG9yYWdlIHdpdGggdGhlIHByb3ZpZGVkIGhlYXJ0YmVhdHNcclxuICAgIGFzeW5jIG92ZXJ3cml0ZShoZWFydGJlYXRzT2JqZWN0KSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IGNhblVzZUluZGV4ZWREQiA9IGF3YWl0IHRoaXMuX2NhblVzZUluZGV4ZWREQlByb21pc2U7XHJcbiAgICAgICAgaWYgKCFjYW5Vc2VJbmRleGVkREIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0ID0gYXdhaXQgdGhpcy5yZWFkKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB3cml0ZUhlYXJ0YmVhdHNUb0luZGV4ZWREQih0aGlzLmFwcCwge1xyXG4gICAgICAgICAgICAgICAgbGFzdFNlbnRIZWFydGJlYXREYXRlOiAoX2EgPSBoZWFydGJlYXRzT2JqZWN0Lmxhc3RTZW50SGVhcnRiZWF0RGF0ZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0Lmxhc3RTZW50SGVhcnRiZWF0RGF0ZSxcclxuICAgICAgICAgICAgICAgIGhlYXJ0YmVhdHM6IGhlYXJ0YmVhdHNPYmplY3QuaGVhcnRiZWF0c1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBhZGQgaGVhcnRiZWF0c1xyXG4gICAgYXN5bmMgYWRkKGhlYXJ0YmVhdHNPYmplY3QpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgY29uc3QgY2FuVXNlSW5kZXhlZERCID0gYXdhaXQgdGhpcy5fY2FuVXNlSW5kZXhlZERCUHJvbWlzZTtcclxuICAgICAgICBpZiAoIWNhblVzZUluZGV4ZWREQikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QgPSBhd2FpdCB0aGlzLnJlYWQoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHdyaXRlSGVhcnRiZWF0c1RvSW5kZXhlZERCKHRoaXMuYXBwLCB7XHJcbiAgICAgICAgICAgICAgICBsYXN0U2VudEhlYXJ0YmVhdERhdGU6IChfYSA9IGhlYXJ0YmVhdHNPYmplY3QubGFzdFNlbnRIZWFydGJlYXREYXRlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBleGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QubGFzdFNlbnRIZWFydGJlYXREYXRlLFxyXG4gICAgICAgICAgICAgICAgaGVhcnRiZWF0czogW1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLmV4aXN0aW5nSGVhcnRiZWF0c09iamVjdC5oZWFydGJlYXRzLFxyXG4gICAgICAgICAgICAgICAgICAgIC4uLmhlYXJ0YmVhdHNPYmplY3QuaGVhcnRiZWF0c1xyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIENhbGN1bGF0ZSBieXRlcyBvZiBhIEhlYXJ0YmVhdHNCeVVzZXJBZ2VudCBhcnJheSBhZnRlciBiZWluZyB3cmFwcGVkXHJcbiAqIGluIGEgcGxhdGZvcm0gbG9nZ2luZyBoZWFkZXIgSlNPTiBvYmplY3QsIHN0cmluZ2lmaWVkLCBhbmQgY29udmVydGVkXHJcbiAqIHRvIGJhc2UgNjQuXHJcbiAqL1xyXG5mdW5jdGlvbiBjb3VudEJ5dGVzKGhlYXJ0YmVhdHNDYWNoZSkge1xyXG4gICAgLy8gYmFzZTY0IGhhcyBhIHJlc3RyaWN0ZWQgc2V0IG9mIGNoYXJhY3RlcnMsIGFsbCBvZiB3aGljaCBzaG91bGQgYmUgMSBieXRlLlxyXG4gICAgcmV0dXJuIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nKFxyXG4gICAgLy8gaGVhcnRiZWF0c0NhY2hlIHdyYXBwZXIgcHJvcGVydGllc1xyXG4gICAgSlNPTi5zdHJpbmdpZnkoeyB2ZXJzaW9uOiAyLCBoZWFydGJlYXRzOiBoZWFydGJlYXRzQ2FjaGUgfSkpLmxlbmd0aDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiByZWdpc3RlckNvcmVDb21wb25lbnRzKHZhcmlhbnQpIHtcclxuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KCdwbGF0Zm9ybS1sb2dnZXInLCBjb250YWluZXIgPT4gbmV3IFBsYXRmb3JtTG9nZ2VyU2VydmljZUltcGwoY29udGFpbmVyKSwgXCJQUklWQVRFXCIgLyogQ29tcG9uZW50VHlwZS5QUklWQVRFICovKSk7XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudCgnaGVhcnRiZWF0JywgY29udGFpbmVyID0+IG5ldyBIZWFydGJlYXRTZXJ2aWNlSW1wbChjb250YWluZXIpLCBcIlBSSVZBVEVcIiAvKiBDb21wb25lbnRUeXBlLlBSSVZBVEUgKi8pKTtcclxuICAgIC8vIFJlZ2lzdGVyIGBhcHBgIHBhY2thZ2UuXHJcbiAgICByZWdpc3RlclZlcnNpb24obmFtZSRwLCB2ZXJzaW9uJDEsIHZhcmlhbnQpO1xyXG4gICAgLy8gQlVJTERfVEFSR0VUIHdpbGwgYmUgcmVwbGFjZWQgYnkgdmFsdWVzIGxpa2UgZXNtNSwgZXNtMjAxNywgY2pzNSwgZXRjIGR1cmluZyB0aGUgY29tcGlsYXRpb25cclxuICAgIHJlZ2lzdGVyVmVyc2lvbihuYW1lJHAsIHZlcnNpb24kMSwgJ2VzbTIwMTcnKTtcclxuICAgIC8vIFJlZ2lzdGVyIHBsYXRmb3JtIFNESyBpZGVudGlmaWVyIChubyB2ZXJzaW9uKS5cclxuICAgIHJlZ2lzdGVyVmVyc2lvbignZmlyZS1qcycsICcnKTtcclxufVxuXG4vKipcclxuICogRmlyZWJhc2UgQXBwXHJcbiAqXHJcbiAqIEByZW1hcmtzIFRoaXMgcGFja2FnZSBjb29yZGluYXRlcyB0aGUgY29tbXVuaWNhdGlvbiBiZXR3ZWVuIHRoZSBkaWZmZXJlbnQgRmlyZWJhc2UgY29tcG9uZW50c1xyXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cclxuICovXHJcbnJlZ2lzdGVyQ29yZUNvbXBvbmVudHMoJycpO1xuXG5leHBvcnQgeyBTREtfVkVSU0lPTiwgREVGQVVMVF9FTlRSWV9OQU1FIGFzIF9ERUZBVUxUX0VOVFJZX05BTUUsIF9hZGRDb21wb25lbnQsIF9hZGRPck92ZXJ3cml0ZUNvbXBvbmVudCwgX2FwcHMsIF9jbGVhckNvbXBvbmVudHMsIF9jb21wb25lbnRzLCBfZ2V0UHJvdmlkZXIsIF9pc0ZpcmViYXNlQXBwLCBfaXNGaXJlYmFzZVNlcnZlckFwcCwgX3JlZ2lzdGVyQ29tcG9uZW50LCBfcmVtb3ZlU2VydmljZUluc3RhbmNlLCBfc2VydmVyQXBwcywgZGVsZXRlQXBwLCBnZXRBcHAsIGdldEFwcHMsIGluaXRpYWxpemVBcHAsIGluaXRpYWxpemVTZXJ2ZXJBcHAsIG9uTG9nLCByZWdpc3RlclZlcnNpb24sIHNldExvZ0xldmVsIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiaW1wb3J0IHsgcmVnaXN0ZXJWZXJzaW9uIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5leHBvcnQgKiBmcm9tICdAZmlyZWJhc2UvYXBwJztcblxudmFyIG5hbWUgPSBcImZpcmViYXNlXCI7XG52YXIgdmVyc2lvbiA9IFwiMTAuMTIuNFwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5yZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbiwgJ2FwcCcpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtLmpzLm1hcFxuIiwidmFyIGNvbW1vbmpzR2xvYmFsID0gdHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsVGhpcyA6IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDoge307XG5cbnZhciBibG9vbV9ibG9iX2VzMjAxOCA9IHt9O1xuXG4vKiogQGxpY2Vuc2VcbkNvcHlyaWdodCBUaGUgQ2xvc3VyZSBMaWJyYXJ5IEF1dGhvcnMuXG5TUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuKi9cblxudmFyIEludGVnZXI7XG52YXIgTWQ1O1xuKGZ1bmN0aW9uKCkge3ZhciBoOy8qKiBAbGljZW5zZVxuXG4gQ29weXJpZ2h0IFRoZSBDbG9zdXJlIExpYnJhcnkgQXV0aG9ycy5cbiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuKi9cbmZ1bmN0aW9uIGsoZixhKXtmdW5jdGlvbiBjKCl7fWMucHJvdG90eXBlPWEucHJvdG90eXBlO2YuRD1hLnByb3RvdHlwZTtmLnByb3RvdHlwZT1uZXcgYztmLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1mO2YuQz1mdW5jdGlvbihkLGUsZyl7Zm9yKHZhciBiPUFycmF5KGFyZ3VtZW50cy5sZW5ndGgtMikscj0yO3I8YXJndW1lbnRzLmxlbmd0aDtyKyspYltyLTJdPWFyZ3VtZW50c1tyXTtyZXR1cm4gYS5wcm90b3R5cGVbZV0uYXBwbHkoZCxiKX07fWZ1bmN0aW9uIGwoKXt0aGlzLmJsb2NrU2l6ZT0tMTt9ZnVuY3Rpb24gbSgpe3RoaXMuYmxvY2tTaXplPS0xO3RoaXMuYmxvY2tTaXplPTY0O3RoaXMuZz1BcnJheSg0KTt0aGlzLkI9QXJyYXkodGhpcy5ibG9ja1NpemUpO3RoaXMubz10aGlzLmg9MDt0aGlzLnMoKTt9ayhtLGwpO20ucHJvdG90eXBlLnM9ZnVuY3Rpb24oKXt0aGlzLmdbMF09MTczMjU4NDE5Mzt0aGlzLmdbMV09NDAyMzIzMzQxNzt0aGlzLmdbMl09MjU2MjM4MzEwMjt0aGlzLmdbM109MjcxNzMzODc4O3RoaXMubz10aGlzLmg9MDt9O1xuZnVuY3Rpb24gbihmLGEsYyl7Y3x8KGM9MCk7dmFyIGQ9QXJyYXkoMTYpO2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYSlmb3IodmFyIGU9MDsxNj5lOysrZSlkW2VdPWEuY2hhckNvZGVBdChjKyspfGEuY2hhckNvZGVBdChjKyspPDw4fGEuY2hhckNvZGVBdChjKyspPDwxNnxhLmNoYXJDb2RlQXQoYysrKTw8MjQ7ZWxzZSBmb3IoZT0wOzE2PmU7KytlKWRbZV09YVtjKytdfGFbYysrXTw8OHxhW2MrK108PDE2fGFbYysrXTw8MjQ7YT1mLmdbMF07Yz1mLmdbMV07ZT1mLmdbMl07dmFyIGc9Zi5nWzNdO3ZhciBiPWErKGdeYyYoZV5nKSkrZFswXSszNjE0MDkwMzYwJjQyOTQ5NjcyOTU7YT1jKyhiPDw3JjQyOTQ5NjcyOTV8Yj4+PjI1KTtiPWcrKGVeYSYoY15lKSkrZFsxXSszOTA1NDAyNzEwJjQyOTQ5NjcyOTU7Zz1hKyhiPDwxMiY0Mjk0OTY3Mjk1fGI+Pj4yMCk7Yj1lKyhjXmcmKGFeYykpK2RbMl0rNjA2MTA1ODE5JjQyOTQ5NjcyOTU7ZT1nKyhiPDwxNyY0Mjk0OTY3Mjk1fGI+Pj4xNSk7XG5iPWMrKGFeZSYoZ15hKSkrZFszXSszMjUwNDQxOTY2JjQyOTQ5NjcyOTU7Yz1lKyhiPDwyMiY0Mjk0OTY3Mjk1fGI+Pj4xMCk7Yj1hKyhnXmMmKGVeZykpK2RbNF0rNDExODU0ODM5OSY0Mjk0OTY3Mjk1O2E9YysoYjw8NyY0Mjk0OTY3Mjk1fGI+Pj4yNSk7Yj1nKyhlXmEmKGNeZSkpK2RbNV0rMTIwMDA4MDQyNiY0Mjk0OTY3Mjk1O2c9YSsoYjw8MTImNDI5NDk2NzI5NXxiPj4+MjApO2I9ZSsoY15nJihhXmMpKStkWzZdKzI4MjE3MzU5NTUmNDI5NDk2NzI5NTtlPWcrKGI8PDE3JjQyOTQ5NjcyOTV8Yj4+PjE1KTtiPWMrKGFeZSYoZ15hKSkrZFs3XSs0MjQ5MjYxMzEzJjQyOTQ5NjcyOTU7Yz1lKyhiPDwyMiY0Mjk0OTY3Mjk1fGI+Pj4xMCk7Yj1hKyhnXmMmKGVeZykpK2RbOF0rMTc3MDAzNTQxNiY0Mjk0OTY3Mjk1O2E9YysoYjw8NyY0Mjk0OTY3Mjk1fGI+Pj4yNSk7Yj1nKyhlXmEmKGNeZSkpK2RbOV0rMjMzNjU1Mjg3OSY0Mjk0OTY3Mjk1O2c9YSsoYjw8MTImNDI5NDk2NzI5NXxcbmI+Pj4yMCk7Yj1lKyhjXmcmKGFeYykpK2RbMTBdKzQyOTQ5MjUyMzMmNDI5NDk2NzI5NTtlPWcrKGI8PDE3JjQyOTQ5NjcyOTV8Yj4+PjE1KTtiPWMrKGFeZSYoZ15hKSkrZFsxMV0rMjMwNDU2MzEzNCY0Mjk0OTY3Mjk1O2M9ZSsoYjw8MjImNDI5NDk2NzI5NXxiPj4+MTApO2I9YSsoZ15jJihlXmcpKStkWzEyXSsxODA0NjAzNjgyJjQyOTQ5NjcyOTU7YT1jKyhiPDw3JjQyOTQ5NjcyOTV8Yj4+PjI1KTtiPWcrKGVeYSYoY15lKSkrZFsxM10rNDI1NDYyNjE5NSY0Mjk0OTY3Mjk1O2c9YSsoYjw8MTImNDI5NDk2NzI5NXxiPj4+MjApO2I9ZSsoY15nJihhXmMpKStkWzE0XSsyNzkyOTY1MDA2JjQyOTQ5NjcyOTU7ZT1nKyhiPDwxNyY0Mjk0OTY3Mjk1fGI+Pj4xNSk7Yj1jKyhhXmUmKGdeYSkpK2RbMTVdKzEyMzY1MzUzMjkmNDI5NDk2NzI5NTtjPWUrKGI8PDIyJjQyOTQ5NjcyOTV8Yj4+PjEwKTtiPWErKGVeZyYoY15lKSkrZFsxXSs0MTI5MTcwNzg2JjQyOTQ5NjcyOTU7YT1jKyhiPDxcbjUmNDI5NDk2NzI5NXxiPj4+MjcpO2I9ZysoY15lJihhXmMpKStkWzZdKzMyMjU0NjU2NjQmNDI5NDk2NzI5NTtnPWErKGI8PDkmNDI5NDk2NzI5NXxiPj4+MjMpO2I9ZSsoYV5jJihnXmEpKStkWzExXSs2NDM3MTc3MTMmNDI5NDk2NzI5NTtlPWcrKGI8PDE0JjQyOTQ5NjcyOTV8Yj4+PjE4KTtiPWMrKGdeYSYoZV5nKSkrZFswXSszOTIxMDY5OTk0JjQyOTQ5NjcyOTU7Yz1lKyhiPDwyMCY0Mjk0OTY3Mjk1fGI+Pj4xMik7Yj1hKyhlXmcmKGNeZSkpK2RbNV0rMzU5MzQwODYwNSY0Mjk0OTY3Mjk1O2E9YysoYjw8NSY0Mjk0OTY3Mjk1fGI+Pj4yNyk7Yj1nKyhjXmUmKGFeYykpK2RbMTBdKzM4MDE2MDgzJjQyOTQ5NjcyOTU7Zz1hKyhiPDw5JjQyOTQ5NjcyOTV8Yj4+PjIzKTtiPWUrKGFeYyYoZ15hKSkrZFsxNV0rMzYzNDQ4ODk2MSY0Mjk0OTY3Mjk1O2U9ZysoYjw8MTQmNDI5NDk2NzI5NXxiPj4+MTgpO2I9YysoZ15hJihlXmcpKStkWzRdKzM4ODk0Mjk0NDgmNDI5NDk2NzI5NTtjPVxuZSsoYjw8MjAmNDI5NDk2NzI5NXxiPj4+MTIpO2I9YSsoZV5nJihjXmUpKStkWzldKzU2ODQ0NjQzOCY0Mjk0OTY3Mjk1O2E9YysoYjw8NSY0Mjk0OTY3Mjk1fGI+Pj4yNyk7Yj1nKyhjXmUmKGFeYykpK2RbMTRdKzMyNzUxNjM2MDYmNDI5NDk2NzI5NTtnPWErKGI8PDkmNDI5NDk2NzI5NXxiPj4+MjMpO2I9ZSsoYV5jJihnXmEpKStkWzNdKzQxMDc2MDMzMzUmNDI5NDk2NzI5NTtlPWcrKGI8PDE0JjQyOTQ5NjcyOTV8Yj4+PjE4KTtiPWMrKGdeYSYoZV5nKSkrZFs4XSsxMTYzNTMxNTAxJjQyOTQ5NjcyOTU7Yz1lKyhiPDwyMCY0Mjk0OTY3Mjk1fGI+Pj4xMik7Yj1hKyhlXmcmKGNeZSkpK2RbMTNdKzI4NTAyODU4MjkmNDI5NDk2NzI5NTthPWMrKGI8PDUmNDI5NDk2NzI5NXxiPj4+MjcpO2I9ZysoY15lJihhXmMpKStkWzJdKzQyNDM1NjM1MTImNDI5NDk2NzI5NTtnPWErKGI8PDkmNDI5NDk2NzI5NXxiPj4+MjMpO2I9ZSsoYV5jJihnXmEpKStkWzddKzE3MzUzMjg0NzMmNDI5NDk2NzI5NTtcbmU9ZysoYjw8MTQmNDI5NDk2NzI5NXxiPj4+MTgpO2I9YysoZ15hJihlXmcpKStkWzEyXSsyMzY4MzU5NTYyJjQyOTQ5NjcyOTU7Yz1lKyhiPDwyMCY0Mjk0OTY3Mjk1fGI+Pj4xMik7Yj1hKyhjXmVeZykrZFs1XSs0Mjk0NTg4NzM4JjQyOTQ5NjcyOTU7YT1jKyhiPDw0JjQyOTQ5NjcyOTV8Yj4+PjI4KTtiPWcrKGFeY15lKStkWzhdKzIyNzIzOTI4MzMmNDI5NDk2NzI5NTtnPWErKGI8PDExJjQyOTQ5NjcyOTV8Yj4+PjIxKTtiPWUrKGdeYV5jKStkWzExXSsxODM5MDMwNTYyJjQyOTQ5NjcyOTU7ZT1nKyhiPDwxNiY0Mjk0OTY3Mjk1fGI+Pj4xNik7Yj1jKyhlXmdeYSkrZFsxNF0rNDI1OTY1Nzc0MCY0Mjk0OTY3Mjk1O2M9ZSsoYjw8MjMmNDI5NDk2NzI5NXxiPj4+OSk7Yj1hKyhjXmVeZykrZFsxXSsyNzYzOTc1MjM2JjQyOTQ5NjcyOTU7YT1jKyhiPDw0JjQyOTQ5NjcyOTV8Yj4+PjI4KTtiPWcrKGFeY15lKStkWzRdKzEyNzI4OTMzNTMmNDI5NDk2NzI5NTtnPWErKGI8PDExJjQyOTQ5NjcyOTV8XG5iPj4+MjEpO2I9ZSsoZ15hXmMpK2RbN10rNDEzOTQ2OTY2NCY0Mjk0OTY3Mjk1O2U9ZysoYjw8MTYmNDI5NDk2NzI5NXxiPj4+MTYpO2I9YysoZV5nXmEpK2RbMTBdKzMyMDAyMzY2NTYmNDI5NDk2NzI5NTtjPWUrKGI8PDIzJjQyOTQ5NjcyOTV8Yj4+PjkpO2I9YSsoY15lXmcpK2RbMTNdKzY4MTI3OTE3NCY0Mjk0OTY3Mjk1O2E9YysoYjw8NCY0Mjk0OTY3Mjk1fGI+Pj4yOCk7Yj1nKyhhXmNeZSkrZFswXSszOTM2NDMwMDc0JjQyOTQ5NjcyOTU7Zz1hKyhiPDwxMSY0Mjk0OTY3Mjk1fGI+Pj4yMSk7Yj1lKyhnXmFeYykrZFszXSszNTcyNDQ1MzE3JjQyOTQ5NjcyOTU7ZT1nKyhiPDwxNiY0Mjk0OTY3Mjk1fGI+Pj4xNik7Yj1jKyhlXmdeYSkrZFs2XSs3NjAyOTE4OSY0Mjk0OTY3Mjk1O2M9ZSsoYjw8MjMmNDI5NDk2NzI5NXxiPj4+OSk7Yj1hKyhjXmVeZykrZFs5XSszNjU0NjAyODA5JjQyOTQ5NjcyOTU7YT1jKyhiPDw0JjQyOTQ5NjcyOTV8Yj4+PjI4KTtiPWcrKGFeY15lKStkWzEyXStcbjM4NzMxNTE0NjEmNDI5NDk2NzI5NTtnPWErKGI8PDExJjQyOTQ5NjcyOTV8Yj4+PjIxKTtiPWUrKGdeYV5jKStkWzE1XSs1MzA3NDI1MjAmNDI5NDk2NzI5NTtlPWcrKGI8PDE2JjQyOTQ5NjcyOTV8Yj4+PjE2KTtiPWMrKGVeZ15hKStkWzJdKzMyOTk2Mjg2NDUmNDI5NDk2NzI5NTtjPWUrKGI8PDIzJjQyOTQ5NjcyOTV8Yj4+PjkpO2I9YSsoZV4oY3x+ZykpK2RbMF0rNDA5NjMzNjQ1MiY0Mjk0OTY3Mjk1O2E9YysoYjw8NiY0Mjk0OTY3Mjk1fGI+Pj4yNik7Yj1nKyhjXihhfH5lKSkrZFs3XSsxMTI2ODkxNDE1JjQyOTQ5NjcyOTU7Zz1hKyhiPDwxMCY0Mjk0OTY3Mjk1fGI+Pj4yMik7Yj1lKyhhXihnfH5jKSkrZFsxNF0rMjg3ODYxMjM5MSY0Mjk0OTY3Mjk1O2U9ZysoYjw8MTUmNDI5NDk2NzI5NXxiPj4+MTcpO2I9YysoZ14oZXx+YSkpK2RbNV0rNDIzNzUzMzI0MSY0Mjk0OTY3Mjk1O2M9ZSsoYjw8MjEmNDI5NDk2NzI5NXxiPj4+MTEpO2I9YSsoZV4oY3x+ZykpK2RbMTJdKzE3MDA0ODU1NzEmXG40Mjk0OTY3Mjk1O2E9YysoYjw8NiY0Mjk0OTY3Mjk1fGI+Pj4yNik7Yj1nKyhjXihhfH5lKSkrZFszXSsyMzk5OTgwNjkwJjQyOTQ5NjcyOTU7Zz1hKyhiPDwxMCY0Mjk0OTY3Mjk1fGI+Pj4yMik7Yj1lKyhhXihnfH5jKSkrZFsxMF0rNDI5MzkxNTc3MyY0Mjk0OTY3Mjk1O2U9ZysoYjw8MTUmNDI5NDk2NzI5NXxiPj4+MTcpO2I9YysoZ14oZXx+YSkpK2RbMV0rMjI0MDA0NDQ5NyY0Mjk0OTY3Mjk1O2M9ZSsoYjw8MjEmNDI5NDk2NzI5NXxiPj4+MTEpO2I9YSsoZV4oY3x+ZykpK2RbOF0rMTg3MzMxMzM1OSY0Mjk0OTY3Mjk1O2E9YysoYjw8NiY0Mjk0OTY3Mjk1fGI+Pj4yNik7Yj1nKyhjXihhfH5lKSkrZFsxNV0rNDI2NDM1NTU1MiY0Mjk0OTY3Mjk1O2c9YSsoYjw8MTAmNDI5NDk2NzI5NXxiPj4+MjIpO2I9ZSsoYV4oZ3x+YykpK2RbNl0rMjczNDc2ODkxNiY0Mjk0OTY3Mjk1O2U9ZysoYjw8MTUmNDI5NDk2NzI5NXxiPj4+MTcpO2I9YysoZ14oZXx+YSkpK2RbMTNdKzEzMDkxNTE2NDkmXG40Mjk0OTY3Mjk1O2M9ZSsoYjw8MjEmNDI5NDk2NzI5NXxiPj4+MTEpO2I9YSsoZV4oY3x+ZykpK2RbNF0rNDE0OTQ0NDIyNiY0Mjk0OTY3Mjk1O2E9YysoYjw8NiY0Mjk0OTY3Mjk1fGI+Pj4yNik7Yj1nKyhjXihhfH5lKSkrZFsxMV0rMzE3NDc1NjkxNyY0Mjk0OTY3Mjk1O2c9YSsoYjw8MTAmNDI5NDk2NzI5NXxiPj4+MjIpO2I9ZSsoYV4oZ3x+YykpK2RbMl0rNzE4Nzg3MjU5JjQyOTQ5NjcyOTU7ZT1nKyhiPDwxNSY0Mjk0OTY3Mjk1fGI+Pj4xNyk7Yj1jKyhnXihlfH5hKSkrZFs5XSszOTUxNDgxNzQ1JjQyOTQ5NjcyOTU7Zi5nWzBdPWYuZ1swXSthJjQyOTQ5NjcyOTU7Zi5nWzFdPWYuZ1sxXSsoZSsoYjw8MjEmNDI5NDk2NzI5NXxiPj4+MTEpKSY0Mjk0OTY3Mjk1O2YuZ1syXT1mLmdbMl0rZSY0Mjk0OTY3Mjk1O2YuZ1szXT1mLmdbM10rZyY0Mjk0OTY3Mjk1O31cbm0ucHJvdG90eXBlLnU9ZnVuY3Rpb24oZixhKXt2b2lkIDA9PT1hJiYoYT1mLmxlbmd0aCk7Zm9yKHZhciBjPWEtdGhpcy5ibG9ja1NpemUsZD10aGlzLkIsZT10aGlzLmgsZz0wO2c8YTspe2lmKDA9PWUpZm9yKDtnPD1jOyluKHRoaXMsZixnKSxnKz10aGlzLmJsb2NrU2l6ZTtpZihcInN0cmluZ1wiPT09dHlwZW9mIGYpZm9yKDtnPGE7KXtpZihkW2UrK109Zi5jaGFyQ29kZUF0KGcrKyksZT09dGhpcy5ibG9ja1NpemUpe24odGhpcyxkKTtlPTA7YnJlYWt9fWVsc2UgZm9yKDtnPGE7KWlmKGRbZSsrXT1mW2crK10sZT09dGhpcy5ibG9ja1NpemUpe24odGhpcyxkKTtlPTA7YnJlYWt9fXRoaXMuaD1lO3RoaXMubys9YTt9O1xubS5wcm90b3R5cGUudj1mdW5jdGlvbigpe3ZhciBmPUFycmF5KCg1Nj50aGlzLmg/dGhpcy5ibG9ja1NpemU6Mip0aGlzLmJsb2NrU2l6ZSktdGhpcy5oKTtmWzBdPTEyODtmb3IodmFyIGE9MTthPGYubGVuZ3RoLTg7KythKWZbYV09MDt2YXIgYz04KnRoaXMubztmb3IoYT1mLmxlbmd0aC04O2E8Zi5sZW5ndGg7KythKWZbYV09YyYyNTUsYy89MjU2O3RoaXMudShmKTtmPUFycmF5KDE2KTtmb3IoYT1jPTA7ND5hOysrYSlmb3IodmFyIGQ9MDszMj5kO2QrPTgpZltjKytdPXRoaXMuZ1thXT4+PmQmMjU1O3JldHVybiBmfTtmdW5jdGlvbiBwKGYsYSl7dmFyIGM9cTtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGMsZik/Y1tmXTpjW2ZdPWEoZil9ZnVuY3Rpb24gdChmLGEpe3RoaXMuaD1hO2Zvcih2YXIgYz1bXSxkPSEwLGU9Zi5sZW5ndGgtMTswPD1lO2UtLSl7dmFyIGc9ZltlXXwwO2QmJmc9PWF8fChjW2VdPWcsZD0hMSk7fXRoaXMuZz1jO312YXIgcT17fTtmdW5jdGlvbiB1KGYpe3JldHVybiAtMTI4PD1mJiYxMjg+Zj9wKGYsZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyB0KFthfDBdLDA+YT8tMTowKX0pOm5ldyB0KFtmfDBdLDA+Zj8tMTowKX1mdW5jdGlvbiB2KGYpe2lmKGlzTmFOKGYpfHwhaXNGaW5pdGUoZikpcmV0dXJuIHc7aWYoMD5mKXJldHVybiB4KHYoLWYpKTtmb3IodmFyIGE9W10sYz0xLGQ9MDtmPj1jO2QrKylhW2RdPWYvY3wwLGMqPTQyOTQ5NjcyOTY7cmV0dXJuIG5ldyB0KGEsMCl9XG5mdW5jdGlvbiB5KGYsYSl7aWYoMD09Zi5sZW5ndGgpdGhyb3cgRXJyb3IoXCJudW1iZXIgZm9ybWF0IGVycm9yOiBlbXB0eSBzdHJpbmdcIik7YT1hfHwxMDtpZigyPmF8fDM2PGEpdGhyb3cgRXJyb3IoXCJyYWRpeCBvdXQgb2YgcmFuZ2U6IFwiK2EpO2lmKFwiLVwiPT1mLmNoYXJBdCgwKSlyZXR1cm4geCh5KGYuc3Vic3RyaW5nKDEpLGEpKTtpZigwPD1mLmluZGV4T2YoXCItXCIpKXRocm93IEVycm9yKCdudW1iZXIgZm9ybWF0IGVycm9yOiBpbnRlcmlvciBcIi1cIiBjaGFyYWN0ZXInKTtmb3IodmFyIGM9dihNYXRoLnBvdyhhLDgpKSxkPXcsZT0wO2U8Zi5sZW5ndGg7ZSs9OCl7dmFyIGc9TWF0aC5taW4oOCxmLmxlbmd0aC1lKSxiPXBhcnNlSW50KGYuc3Vic3RyaW5nKGUsZStnKSxhKTs4Pmc/KGc9dihNYXRoLnBvdyhhLGcpKSxkPWQuaihnKS5hZGQodihiKSkpOihkPWQuaihjKSxkPWQuYWRkKHYoYikpKTt9cmV0dXJuIGR9dmFyIHc9dSgwKSx6PXUoMSksQT11KDE2Nzc3MjE2KTtoPXQucHJvdG90eXBlO1xuaC5tPWZ1bmN0aW9uKCl7aWYoQih0aGlzKSlyZXR1cm4gLXgodGhpcykubSgpO2Zvcih2YXIgZj0wLGE9MSxjPTA7Yzx0aGlzLmcubGVuZ3RoO2MrKyl7dmFyIGQ9dGhpcy5pKGMpO2YrPSgwPD1kP2Q6NDI5NDk2NzI5NitkKSphO2EqPTQyOTQ5NjcyOTY7fXJldHVybiBmfTtoLnRvU3RyaW5nPWZ1bmN0aW9uKGYpe2Y9Znx8MTA7aWYoMj5mfHwzNjxmKXRocm93IEVycm9yKFwicmFkaXggb3V0IG9mIHJhbmdlOiBcIitmKTtpZihDKHRoaXMpKXJldHVybiBcIjBcIjtpZihCKHRoaXMpKXJldHVybiBcIi1cIit4KHRoaXMpLnRvU3RyaW5nKGYpO2Zvcih2YXIgYT12KE1hdGgucG93KGYsNikpLGM9dGhpcyxkPVwiXCI7Oyl7dmFyIGU9RChjLGEpLmc7Yz1GKGMsZS5qKGEpKTt2YXIgZz0oKDA8Yy5nLmxlbmd0aD9jLmdbMF06Yy5oKT4+PjApLnRvU3RyaW5nKGYpO2M9ZTtpZihDKGMpKXJldHVybiBnK2Q7Zm9yKDs2PmcubGVuZ3RoOylnPVwiMFwiK2c7ZD1nK2Q7fX07XG5oLmk9ZnVuY3Rpb24oZil7cmV0dXJuIDA+Zj8wOmY8dGhpcy5nLmxlbmd0aD90aGlzLmdbZl06dGhpcy5ofTtmdW5jdGlvbiBDKGYpe2lmKDAhPWYuaClyZXR1cm4gITE7Zm9yKHZhciBhPTA7YTxmLmcubGVuZ3RoO2ErKylpZigwIT1mLmdbYV0pcmV0dXJuICExO3JldHVybiAhMH1mdW5jdGlvbiBCKGYpe3JldHVybiAtMT09Zi5ofWgubD1mdW5jdGlvbihmKXtmPUYodGhpcyxmKTtyZXR1cm4gQihmKT8tMTpDKGYpPzA6MX07ZnVuY3Rpb24geChmKXtmb3IodmFyIGE9Zi5nLmxlbmd0aCxjPVtdLGQ9MDtkPGE7ZCsrKWNbZF09fmYuZ1tkXTtyZXR1cm4gKG5ldyB0KGMsfmYuaCkpLmFkZCh6KX1oLmFicz1mdW5jdGlvbigpe3JldHVybiBCKHRoaXMpP3godGhpcyk6dGhpc307XG5oLmFkZD1mdW5jdGlvbihmKXtmb3IodmFyIGE9TWF0aC5tYXgodGhpcy5nLmxlbmd0aCxmLmcubGVuZ3RoKSxjPVtdLGQ9MCxlPTA7ZTw9YTtlKyspe3ZhciBnPWQrKHRoaXMuaShlKSY2NTUzNSkrKGYuaShlKSY2NTUzNSksYj0oZz4+PjE2KSsodGhpcy5pKGUpPj4+MTYpKyhmLmkoZSk+Pj4xNik7ZD1iPj4+MTY7ZyY9NjU1MzU7YiY9NjU1MzU7Y1tlXT1iPDwxNnxnO31yZXR1cm4gbmV3IHQoYyxjW2MubGVuZ3RoLTFdJi0yMTQ3NDgzNjQ4Py0xOjApfTtmdW5jdGlvbiBGKGYsYSl7cmV0dXJuIGYuYWRkKHgoYSkpfVxuaC5qPWZ1bmN0aW9uKGYpe2lmKEModGhpcyl8fEMoZikpcmV0dXJuIHc7aWYoQih0aGlzKSlyZXR1cm4gQihmKT94KHRoaXMpLmooeChmKSk6eCh4KHRoaXMpLmooZikpO2lmKEIoZikpcmV0dXJuIHgodGhpcy5qKHgoZikpKTtpZigwPnRoaXMubChBKSYmMD5mLmwoQSkpcmV0dXJuIHYodGhpcy5tKCkqZi5tKCkpO2Zvcih2YXIgYT10aGlzLmcubGVuZ3RoK2YuZy5sZW5ndGgsYz1bXSxkPTA7ZDwyKmE7ZCsrKWNbZF09MDtmb3IoZD0wO2Q8dGhpcy5nLmxlbmd0aDtkKyspZm9yKHZhciBlPTA7ZTxmLmcubGVuZ3RoO2UrKyl7dmFyIGc9dGhpcy5pKGQpPj4+MTYsYj10aGlzLmkoZCkmNjU1MzUscj1mLmkoZSk+Pj4xNixFPWYuaShlKSY2NTUzNTtjWzIqZCsyKmVdKz1iKkU7RyhjLDIqZCsyKmUpO2NbMipkKzIqZSsxXSs9ZypFO0coYywyKmQrMiplKzEpO2NbMipkKzIqZSsxXSs9YipyO0coYywyKmQrMiplKzEpO2NbMipkKzIqZSsyXSs9ZypyO0coYywyKmQrMiplKzIpO31mb3IoZD0wO2Q8XG5hO2QrKyljW2RdPWNbMipkKzFdPDwxNnxjWzIqZF07Zm9yKGQ9YTtkPDIqYTtkKyspY1tkXT0wO3JldHVybiBuZXcgdChjLDApfTtmdW5jdGlvbiBHKGYsYSl7Zm9yKDsoZlthXSY2NTUzNSkhPWZbYV07KWZbYSsxXSs9ZlthXT4+PjE2LGZbYV0mPTY1NTM1LGErKzt9ZnVuY3Rpb24gSChmLGEpe3RoaXMuZz1mO3RoaXMuaD1hO31cbmZ1bmN0aW9uIEQoZixhKXtpZihDKGEpKXRocm93IEVycm9yKFwiZGl2aXNpb24gYnkgemVyb1wiKTtpZihDKGYpKXJldHVybiBuZXcgSCh3LHcpO2lmKEIoZikpcmV0dXJuIGE9RCh4KGYpLGEpLG5ldyBIKHgoYS5nKSx4KGEuaCkpO2lmKEIoYSkpcmV0dXJuIGE9RChmLHgoYSkpLG5ldyBIKHgoYS5nKSxhLmgpO2lmKDMwPGYuZy5sZW5ndGgpe2lmKEIoZil8fEIoYSkpdGhyb3cgRXJyb3IoXCJzbG93RGl2aWRlXyBvbmx5IHdvcmtzIHdpdGggcG9zaXRpdmUgaW50ZWdlcnMuXCIpO2Zvcih2YXIgYz16LGQ9YTswPj1kLmwoZik7KWM9SShjKSxkPUkoZCk7dmFyIGU9SihjLDEpLGc9SihkLDEpO2Q9SihkLDIpO2ZvcihjPUooYywyKTshQyhkKTspe3ZhciBiPWcuYWRkKGQpOzA+PWIubChmKSYmKGU9ZS5hZGQoYyksZz1iKTtkPUooZCwxKTtjPUooYywxKTt9YT1GKGYsZS5qKGEpKTtyZXR1cm4gbmV3IEgoZSxhKX1mb3IoZT13OzA8PWYubChhKTspe2M9TWF0aC5tYXgoMSxNYXRoLmZsb29yKGYubSgpL1xuYS5tKCkpKTtkPU1hdGguY2VpbChNYXRoLmxvZyhjKS9NYXRoLkxOMik7ZD00OD49ZD8xOk1hdGgucG93KDIsZC00OCk7Zz12KGMpO2ZvcihiPWcuaihhKTtCKGIpfHwwPGIubChmKTspYy09ZCxnPXYoYyksYj1nLmooYSk7QyhnKSYmKGc9eik7ZT1lLmFkZChnKTtmPUYoZixiKTt9cmV0dXJuIG5ldyBIKGUsZil9aC5BPWZ1bmN0aW9uKGYpe3JldHVybiBEKHRoaXMsZikuaH07aC5hbmQ9ZnVuY3Rpb24oZil7Zm9yKHZhciBhPU1hdGgubWF4KHRoaXMuZy5sZW5ndGgsZi5nLmxlbmd0aCksYz1bXSxkPTA7ZDxhO2QrKyljW2RdPXRoaXMuaShkKSZmLmkoZCk7cmV0dXJuIG5ldyB0KGMsdGhpcy5oJmYuaCl9O2gub3I9ZnVuY3Rpb24oZil7Zm9yKHZhciBhPU1hdGgubWF4KHRoaXMuZy5sZW5ndGgsZi5nLmxlbmd0aCksYz1bXSxkPTA7ZDxhO2QrKyljW2RdPXRoaXMuaShkKXxmLmkoZCk7cmV0dXJuIG5ldyB0KGMsdGhpcy5ofGYuaCl9O1xuaC54b3I9ZnVuY3Rpb24oZil7Zm9yKHZhciBhPU1hdGgubWF4KHRoaXMuZy5sZW5ndGgsZi5nLmxlbmd0aCksYz1bXSxkPTA7ZDxhO2QrKyljW2RdPXRoaXMuaShkKV5mLmkoZCk7cmV0dXJuIG5ldyB0KGMsdGhpcy5oXmYuaCl9O2Z1bmN0aW9uIEkoZil7Zm9yKHZhciBhPWYuZy5sZW5ndGgrMSxjPVtdLGQ9MDtkPGE7ZCsrKWNbZF09Zi5pKGQpPDwxfGYuaShkLTEpPj4+MzE7cmV0dXJuIG5ldyB0KGMsZi5oKX1mdW5jdGlvbiBKKGYsYSl7dmFyIGM9YT4+NTthJT0zMjtmb3IodmFyIGQ9Zi5nLmxlbmd0aC1jLGU9W10sZz0wO2c8ZDtnKyspZVtnXT0wPGE/Zi5pKGcrYyk+Pj5hfGYuaShnK2MrMSk8PDMyLWE6Zi5pKGcrYyk7cmV0dXJuIG5ldyB0KGUsZi5oKX1tLnByb3RvdHlwZS5kaWdlc3Q9bS5wcm90b3R5cGUudjttLnByb3RvdHlwZS5yZXNldD1tLnByb3RvdHlwZS5zO20ucHJvdG90eXBlLnVwZGF0ZT1tLnByb3RvdHlwZS51O01kNSA9IGJsb29tX2Jsb2JfZXMyMDE4Lk1kNT1tO3QucHJvdG90eXBlLmFkZD10LnByb3RvdHlwZS5hZGQ7dC5wcm90b3R5cGUubXVsdGlwbHk9dC5wcm90b3R5cGUuajt0LnByb3RvdHlwZS5tb2R1bG89dC5wcm90b3R5cGUuQTt0LnByb3RvdHlwZS5jb21wYXJlPXQucHJvdG90eXBlLmw7dC5wcm90b3R5cGUudG9OdW1iZXI9dC5wcm90b3R5cGUubTt0LnByb3RvdHlwZS50b1N0cmluZz10LnByb3RvdHlwZS50b1N0cmluZzt0LnByb3RvdHlwZS5nZXRCaXRzPXQucHJvdG90eXBlLmk7dC5mcm9tTnVtYmVyPXY7dC5mcm9tU3RyaW5nPXk7SW50ZWdlciA9IGJsb29tX2Jsb2JfZXMyMDE4LkludGVnZXI9dDt9KS5hcHBseSggdHlwZW9mIGNvbW1vbmpzR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IGNvbW1vbmpzR2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiAgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyAgOiB7fSk7XG5cbmV4cG9ydCB7IEludGVnZXIsIE1kNSwgYmxvb21fYmxvYl9lczIwMTggYXMgZGVmYXVsdCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Ymxvb21fYmxvYl9lczIwMTguanMubWFwXG4iLCJ2YXIgY29tbW9uanNHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWxUaGlzIDogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB7fTtcblxudmFyIHdlYmNoYW5uZWxfYmxvYl9lczIwMTggPSB7fTtcblxuLyoqIEBsaWNlbnNlXG5Db3B5cmlnaHQgVGhlIENsb3N1cmUgTGlicmFyeSBBdXRob3JzLlxuU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbiovXG5cbnZhciBYaHJJbztcbnZhciBGZXRjaFhtbEh0dHBGYWN0b3J5O1xudmFyIFdlYkNoYW5uZWw7XG52YXIgRXZlbnRUeXBlO1xudmFyIEVycm9yQ29kZTtcbnZhciBTdGF0O1xudmFyIEV2ZW50O1xudmFyIGdldFN0YXRFdmVudFRhcmdldDtcbnZhciBjcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0O1xuKGZ1bmN0aW9uKCkge3ZhciBoLGFhPVwiZnVuY3Rpb25cIj09dHlwZW9mIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzP09iamVjdC5kZWZpbmVQcm9wZXJ0eTpmdW5jdGlvbihhLGIsYyl7aWYoYT09QXJyYXkucHJvdG90eXBlfHxhPT1PYmplY3QucHJvdG90eXBlKXJldHVybiBhO2FbYl09Yy52YWx1ZTtyZXR1cm4gYX07ZnVuY3Rpb24gYmEoYSl7YT1bXCJvYmplY3RcIj09dHlwZW9mIGdsb2JhbFRoaXMmJmdsb2JhbFRoaXMsYSxcIm9iamVjdFwiPT10eXBlb2Ygd2luZG93JiZ3aW5kb3csXCJvYmplY3RcIj09dHlwZW9mIHNlbGYmJnNlbGYsXCJvYmplY3RcIj09dHlwZW9mIGNvbW1vbmpzR2xvYmFsJiZjb21tb25qc0dsb2JhbF07Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDsrK2Ipe3ZhciBjPWFbYl07aWYoYyYmYy5NYXRoPT1NYXRoKXJldHVybiBjfXRocm93IEVycm9yKFwiQ2Fubm90IGZpbmQgZ2xvYmFsIG9iamVjdFwiKTt9dmFyIGNhPWJhKHRoaXMpO1xuZnVuY3Rpb24gZGEoYSxiKXtpZihiKWE6e3ZhciBjPWNhO2E9YS5zcGxpdChcIi5cIik7Zm9yKHZhciBkPTA7ZDxhLmxlbmd0aC0xO2QrKyl7dmFyIGU9YVtkXTtpZighKGUgaW4gYykpYnJlYWsgYTtjPWNbZV07fWE9YVthLmxlbmd0aC0xXTtkPWNbYV07Yj1iKGQpO2IhPWQmJm51bGwhPWImJmFhKGMsYSx7Y29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOmJ9KTt9fWZ1bmN0aW9uIGVhKGEsYil7YSBpbnN0YW5jZW9mIFN0cmluZyYmKGErPVwiXCIpO3ZhciBjPTAsZD0hMSxlPXtuZXh0OmZ1bmN0aW9uKCl7aWYoIWQmJmM8YS5sZW5ndGgpe3ZhciBmPWMrKztyZXR1cm4ge3ZhbHVlOmIoZixhW2ZdKSxkb25lOiExfX1kPSEwO3JldHVybiB7ZG9uZTohMCx2YWx1ZTp2b2lkIDB9fX07ZVtTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIGV9O3JldHVybiBlfVxuZGEoXCJBcnJheS5wcm90b3R5cGUudmFsdWVzXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGE/YTpmdW5jdGlvbigpe3JldHVybiBlYSh0aGlzLGZ1bmN0aW9uKGIsYyl7cmV0dXJuIGN9KX19KTsvKiogQGxpY2Vuc2VcblxuIENvcHlyaWdodCBUaGUgQ2xvc3VyZSBMaWJyYXJ5IEF1dGhvcnMuXG4gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbiovXG52YXIgZmE9ZmF8fHt9LGs9dGhpc3x8c2VsZjtmdW5jdGlvbiBoYShhKXt2YXIgYj10eXBlb2YgYTtiPVwib2JqZWN0XCIhPWI/YjphP0FycmF5LmlzQXJyYXkoYSk/XCJhcnJheVwiOmI6XCJudWxsXCI7cmV0dXJuIFwiYXJyYXlcIj09Ynx8XCJvYmplY3RcIj09YiYmXCJudW1iZXJcIj09dHlwZW9mIGEubGVuZ3RofWZ1bmN0aW9uIG4oYSl7dmFyIGI9dHlwZW9mIGE7cmV0dXJuIFwib2JqZWN0XCI9PWImJm51bGwhPWF8fFwiZnVuY3Rpb25cIj09Yn1mdW5jdGlvbiBpYShhLGIsYyl7cmV0dXJuIGEuY2FsbC5hcHBseShhLmJpbmQsYXJndW1lbnRzKX1cbmZ1bmN0aW9uIGphKGEsYixjKXtpZighYSl0aHJvdyBFcnJvcigpO2lmKDI8YXJndW1lbnRzLmxlbmd0aCl7dmFyIGQ9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDIpO3JldHVybiBmdW5jdGlvbigpe3ZhciBlPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7QXJyYXkucHJvdG90eXBlLnVuc2hpZnQuYXBwbHkoZSxkKTtyZXR1cm4gYS5hcHBseShiLGUpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseShiLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIHAoYSxiLGMpe3A9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQmJi0xIT1GdW5jdGlvbi5wcm90b3R5cGUuYmluZC50b1N0cmluZygpLmluZGV4T2YoXCJuYXRpdmUgY29kZVwiKT9pYTpqYTtyZXR1cm4gcC5hcHBseShudWxsLGFyZ3VtZW50cyl9XG5mdW5jdGlvbiBrYShhLGIpe3ZhciBjPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZD1jLnNsaWNlKCk7ZC5wdXNoLmFwcGx5KGQsYXJndW1lbnRzKTtyZXR1cm4gYS5hcHBseSh0aGlzLGQpfX1mdW5jdGlvbiByKGEsYil7ZnVuY3Rpb24gYygpe31jLnByb3RvdHlwZT1iLnByb3RvdHlwZTthLmFhPWIucHJvdG90eXBlO2EucHJvdG90eXBlPW5ldyBjO2EucHJvdG90eXBlLmNvbnN0cnVjdG9yPWE7YS5RYj1mdW5jdGlvbihkLGUsZil7Zm9yKHZhciBnPUFycmF5KGFyZ3VtZW50cy5sZW5ndGgtMiksbT0yO208YXJndW1lbnRzLmxlbmd0aDttKyspZ1ttLTJdPWFyZ3VtZW50c1ttXTtyZXR1cm4gYi5wcm90b3R5cGVbZV0uYXBwbHkoZCxnKX07fWZ1bmN0aW9uIGxhKGEpe2NvbnN0IGI9YS5sZW5ndGg7aWYoMDxiKXtjb25zdCBjPUFycmF5KGIpO2ZvcihsZXQgZD0wO2Q8YjtkKyspY1tkXT1hW2RdO3JldHVybiBjfXJldHVybiBbXX1mdW5jdGlvbiBtYShhLGIpe2ZvcihsZXQgYz0xO2M8YXJndW1lbnRzLmxlbmd0aDtjKyspe2NvbnN0IGQ9YXJndW1lbnRzW2NdO2lmKGhhKGQpKXtjb25zdCBlPWEubGVuZ3RofHwwLGY9ZC5sZW5ndGh8fDA7YS5sZW5ndGg9ZStmO2ZvcihsZXQgZz0wO2c8ZjtnKyspYVtlK2ddPWRbZ107fWVsc2UgYS5wdXNoKGQpO319Y2xhc3MgbmF7Y29uc3RydWN0b3IoYSxiKXt0aGlzLmk9YTt0aGlzLmo9Yjt0aGlzLmg9MDt0aGlzLmc9bnVsbDt9Z2V0KCl7bGV0IGE7MDx0aGlzLmg/KHRoaXMuaC0tLGE9dGhpcy5nLHRoaXMuZz1hLm5leHQsYS5uZXh0PW51bGwpOmE9dGhpcy5pKCk7cmV0dXJuIGF9fWZ1bmN0aW9uIHQoYSl7cmV0dXJuIC9eW1xcc1xceGEwXSokLy50ZXN0KGEpfWZ1bmN0aW9uIHUoKXt2YXIgYT1rLm5hdmlnYXRvcjtyZXR1cm4gYSYmKGE9YS51c2VyQWdlbnQpP2E6XCJcIn1mdW5jdGlvbiBvYShhKXtvYVtcIiBcIl0oYSk7cmV0dXJuIGF9b2FbXCIgXCJdPWZ1bmN0aW9uKCl7fTt2YXIgcGE9LTEhPXUoKS5pbmRleE9mKFwiR2Vja29cIikmJiEoLTEhPXUoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJ3ZWJraXRcIikmJi0xPT11KCkuaW5kZXhPZihcIkVkZ2VcIikpJiYhKC0xIT11KCkuaW5kZXhPZihcIlRyaWRlbnRcIil8fC0xIT11KCkuaW5kZXhPZihcIk1TSUVcIikpJiYtMT09dSgpLmluZGV4T2YoXCJFZGdlXCIpO2Z1bmN0aW9uIHFhKGEsYixjKXtmb3IoY29uc3QgZCBpbiBhKWIuY2FsbChjLGFbZF0sZCxhKTt9ZnVuY3Rpb24gcmEoYSxiKXtmb3IoY29uc3QgYyBpbiBhKWIuY2FsbCh2b2lkIDAsYVtjXSxjLGEpO31mdW5jdGlvbiBzYShhKXtjb25zdCBiPXt9O2Zvcihjb25zdCBjIGluIGEpYltjXT1hW2NdO3JldHVybiBifWNvbnN0IHRhPVwiY29uc3RydWN0b3IgaGFzT3duUHJvcGVydHkgaXNQcm90b3R5cGVPZiBwcm9wZXJ0eUlzRW51bWVyYWJsZSB0b0xvY2FsZVN0cmluZyB0b1N0cmluZyB2YWx1ZU9mXCIuc3BsaXQoXCIgXCIpO2Z1bmN0aW9uIHVhKGEsYil7bGV0IGMsZDtmb3IobGV0IGU9MTtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXtkPWFyZ3VtZW50c1tlXTtmb3IoYyBpbiBkKWFbY109ZFtjXTtmb3IobGV0IGY9MDtmPHRhLmxlbmd0aDtmKyspYz10YVtmXSxPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZCxjKSYmKGFbY109ZFtjXSk7fX1mdW5jdGlvbiB2YShhKXt2YXIgYj0xO2E9YS5zcGxpdChcIjpcIik7Y29uc3QgYz1bXTtmb3IoOzA8YiYmYS5sZW5ndGg7KWMucHVzaChhLnNoaWZ0KCkpLGItLTthLmxlbmd0aCYmYy5wdXNoKGEuam9pbihcIjpcIikpO3JldHVybiBjfWZ1bmN0aW9uIHdhKGEpe2suc2V0VGltZW91dCgoKT0+e3Rocm93IGE7fSwwKTt9ZnVuY3Rpb24geGEoKXt2YXIgYT16YTtsZXQgYj1udWxsO2EuZyYmKGI9YS5nLGEuZz1hLmcubmV4dCxhLmd8fChhLmg9bnVsbCksYi5uZXh0PW51bGwpO3JldHVybiBifWNsYXNzIEFhe2NvbnN0cnVjdG9yKCl7dGhpcy5oPXRoaXMuZz1udWxsO31hZGQoYSxiKXtjb25zdCBjPUJhLmdldCgpO2Muc2V0KGEsYik7dGhpcy5oP3RoaXMuaC5uZXh0PWM6dGhpcy5nPWM7dGhpcy5oPWM7fX12YXIgQmE9bmV3IG5hKCgpPT5uZXcgQ2EsYT0+YS5yZXNldCgpKTtjbGFzcyBDYXtjb25zdHJ1Y3Rvcigpe3RoaXMubmV4dD10aGlzLmc9dGhpcy5oPW51bGw7fXNldChhLGIpe3RoaXMuaD1hO3RoaXMuZz1iO3RoaXMubmV4dD1udWxsO31yZXNldCgpe3RoaXMubmV4dD10aGlzLmc9dGhpcy5oPW51bGw7fX1sZXQgeCx5PSExLHphPW5ldyBBYSxFYT0oKT0+e2NvbnN0IGE9ay5Qcm9taXNlLnJlc29sdmUodm9pZCAwKTt4PSgpPT57YS50aGVuKERhKTt9O307dmFyIERhPSgpPT57Zm9yKHZhciBhO2E9eGEoKTspe3RyeXthLmguY2FsbChhLmcpO31jYXRjaChjKXt3YShjKTt9dmFyIGI9QmE7Yi5qKGEpOzEwMD5iLmgmJihiLmgrKyxhLm5leHQ9Yi5nLGIuZz1hKTt9eT0hMTt9O2Z1bmN0aW9uIHooKXt0aGlzLnM9dGhpcy5zO3RoaXMuQz10aGlzLkM7fXoucHJvdG90eXBlLnM9ITE7ei5wcm90b3R5cGUubWE9ZnVuY3Rpb24oKXt0aGlzLnN8fCh0aGlzLnM9ITAsdGhpcy5OKCkpO307ei5wcm90b3R5cGUuTj1mdW5jdGlvbigpe2lmKHRoaXMuQylmb3IoO3RoaXMuQy5sZW5ndGg7KXRoaXMuQy5zaGlmdCgpKCk7fTtmdW5jdGlvbiBBKGEsYil7dGhpcy50eXBlPWE7dGhpcy5nPXRoaXMudGFyZ2V0PWI7dGhpcy5kZWZhdWx0UHJldmVudGVkPSExO31BLnByb3RvdHlwZS5oPWZ1bmN0aW9uKCl7dGhpcy5kZWZhdWx0UHJldmVudGVkPSEwO307dmFyIEZhPWZ1bmN0aW9uKCl7aWYoIWsuYWRkRXZlbnRMaXN0ZW5lcnx8IU9iamVjdC5kZWZpbmVQcm9wZXJ0eSlyZXR1cm4gITE7dmFyIGE9ITEsYj1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sXCJwYXNzaXZlXCIse2dldDpmdW5jdGlvbigpe2E9ITA7fX0pO3RyeXtjb25zdCBjPSgpPT57fTtrLmFkZEV2ZW50TGlzdGVuZXIoXCJ0ZXN0XCIsYyxiKTtrLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0ZXN0XCIsYyxiKTt9Y2F0Y2goYyl7fXJldHVybiBhfSgpO2Z1bmN0aW9uIEMoYSxiKXtBLmNhbGwodGhpcyxhP2EudHlwZTpcIlwiKTt0aGlzLnJlbGF0ZWRUYXJnZXQ9dGhpcy5nPXRoaXMudGFyZ2V0PW51bGw7dGhpcy5idXR0b249dGhpcy5zY3JlZW5ZPXRoaXMuc2NyZWVuWD10aGlzLmNsaWVudFk9dGhpcy5jbGllbnRYPTA7dGhpcy5rZXk9XCJcIjt0aGlzLm1ldGFLZXk9dGhpcy5zaGlmdEtleT10aGlzLmFsdEtleT10aGlzLmN0cmxLZXk9ITE7dGhpcy5zdGF0ZT1udWxsO3RoaXMucG9pbnRlcklkPTA7dGhpcy5wb2ludGVyVHlwZT1cIlwiO3RoaXMuaT1udWxsO2lmKGEpe3ZhciBjPXRoaXMudHlwZT1hLnR5cGUsZD1hLmNoYW5nZWRUb3VjaGVzJiZhLmNoYW5nZWRUb3VjaGVzLmxlbmd0aD9hLmNoYW5nZWRUb3VjaGVzWzBdOm51bGw7dGhpcy50YXJnZXQ9YS50YXJnZXR8fGEuc3JjRWxlbWVudDt0aGlzLmc9YjtpZihiPWEucmVsYXRlZFRhcmdldCl7aWYocGEpe2E6e3RyeXtvYShiLm5vZGVOYW1lKTt2YXIgZT0hMDticmVhayBhfWNhdGNoKGYpe31lPVxuITE7fWV8fChiPW51bGwpO319ZWxzZSBcIm1vdXNlb3ZlclwiPT1jP2I9YS5mcm9tRWxlbWVudDpcIm1vdXNlb3V0XCI9PWMmJihiPWEudG9FbGVtZW50KTt0aGlzLnJlbGF0ZWRUYXJnZXQ9YjtkPyh0aGlzLmNsaWVudFg9dm9pZCAwIT09ZC5jbGllbnRYP2QuY2xpZW50WDpkLnBhZ2VYLHRoaXMuY2xpZW50WT12b2lkIDAhPT1kLmNsaWVudFk/ZC5jbGllbnRZOmQucGFnZVksdGhpcy5zY3JlZW5YPWQuc2NyZWVuWHx8MCx0aGlzLnNjcmVlblk9ZC5zY3JlZW5ZfHwwKToodGhpcy5jbGllbnRYPXZvaWQgMCE9PWEuY2xpZW50WD9hLmNsaWVudFg6YS5wYWdlWCx0aGlzLmNsaWVudFk9dm9pZCAwIT09YS5jbGllbnRZP2EuY2xpZW50WTphLnBhZ2VZLHRoaXMuc2NyZWVuWD1hLnNjcmVlblh8fDAsdGhpcy5zY3JlZW5ZPWEuc2NyZWVuWXx8MCk7dGhpcy5idXR0b249YS5idXR0b247dGhpcy5rZXk9YS5rZXl8fFwiXCI7dGhpcy5jdHJsS2V5PWEuY3RybEtleTt0aGlzLmFsdEtleT1hLmFsdEtleTt0aGlzLnNoaWZ0S2V5PVxuYS5zaGlmdEtleTt0aGlzLm1ldGFLZXk9YS5tZXRhS2V5O3RoaXMucG9pbnRlcklkPWEucG9pbnRlcklkfHwwO3RoaXMucG9pbnRlclR5cGU9XCJzdHJpbmdcIj09PXR5cGVvZiBhLnBvaW50ZXJUeXBlP2EucG9pbnRlclR5cGU6R2FbYS5wb2ludGVyVHlwZV18fFwiXCI7dGhpcy5zdGF0ZT1hLnN0YXRlO3RoaXMuaT1hO2EuZGVmYXVsdFByZXZlbnRlZCYmQy5hYS5oLmNhbGwodGhpcyk7fX1yKEMsQSk7dmFyIEdhPXsyOlwidG91Y2hcIiwzOlwicGVuXCIsNDpcIm1vdXNlXCJ9O0MucHJvdG90eXBlLmg9ZnVuY3Rpb24oKXtDLmFhLmguY2FsbCh0aGlzKTt2YXIgYT10aGlzLmk7YS5wcmV2ZW50RGVmYXVsdD9hLnByZXZlbnREZWZhdWx0KCk6YS5yZXR1cm5WYWx1ZT0hMTt9O3ZhciBEPVwiY2xvc3VyZV9saXN0ZW5hYmxlX1wiKygxRTYqTWF0aC5yYW5kb20oKXwwKTt2YXIgSGE9MDtmdW5jdGlvbiBJYShhLGIsYyxkLGUpe3RoaXMubGlzdGVuZXI9YTt0aGlzLnByb3h5PW51bGw7dGhpcy5zcmM9Yjt0aGlzLnR5cGU9Yzt0aGlzLmNhcHR1cmU9ISFkO3RoaXMuaGE9ZTt0aGlzLmtleT0rK0hhO3RoaXMuZGE9dGhpcy5mYT0hMTt9ZnVuY3Rpb24gSmEoYSl7YS5kYT0hMDthLmxpc3RlbmVyPW51bGw7YS5wcm94eT1udWxsO2Euc3JjPW51bGw7YS5oYT1udWxsO31mdW5jdGlvbiBLYShhKXt0aGlzLnNyYz1hO3RoaXMuZz17fTt0aGlzLmg9MDt9S2EucHJvdG90eXBlLmFkZD1mdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPWEudG9TdHJpbmcoKTthPXRoaXMuZ1tmXTthfHwoYT10aGlzLmdbZl09W10sdGhpcy5oKyspO3ZhciBnPUxhKGEsYixkLGUpOy0xPGc/KGI9YVtnXSxjfHwoYi5mYT0hMSkpOihiPW5ldyBJYShiLHRoaXMuc3JjLGYsISFkLGUpLGIuZmE9YyxhLnB1c2goYikpO3JldHVybiBifTtmdW5jdGlvbiBNYShhLGIpe3ZhciBjPWIudHlwZTtpZihjIGluIGEuZyl7dmFyIGQ9YS5nW2NdLGU9QXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChkLGIsdm9pZCAwKSxmOyhmPTA8PWUpJiZBcnJheS5wcm90b3R5cGUuc3BsaWNlLmNhbGwoZCxlLDEpO2YmJihKYShiKSwwPT1hLmdbY10ubGVuZ3RoJiYoZGVsZXRlIGEuZ1tjXSxhLmgtLSkpO319XG5mdW5jdGlvbiBMYShhLGIsYyxkKXtmb3IodmFyIGU9MDtlPGEubGVuZ3RoOysrZSl7dmFyIGY9YVtlXTtpZighZi5kYSYmZi5saXN0ZW5lcj09YiYmZi5jYXB0dXJlPT0hIWMmJmYuaGE9PWQpcmV0dXJuIGV9cmV0dXJuIC0xfXZhciBOYT1cImNsb3N1cmVfbG1fXCIrKDFFNipNYXRoLnJhbmRvbSgpfDApLE9hPXt9O2Z1bmN0aW9uIFFhKGEsYixjLGQsZSl7aWYoZCYmZC5vbmNlKXJldHVybiBSYShhLGIsYyxkLGUpO2lmKEFycmF5LmlzQXJyYXkoYikpe2Zvcih2YXIgZj0wO2Y8Yi5sZW5ndGg7ZisrKVFhKGEsYltmXSxjLGQsZSk7cmV0dXJuIG51bGx9Yz1TYShjKTtyZXR1cm4gYSYmYVtEXT9hLksoYixjLG4oZCk/ISFkLmNhcHR1cmU6ISFkLGUpOlRhKGEsYixjLCExLGQsZSl9XG5mdW5jdGlvbiBUYShhLGIsYyxkLGUsZil7aWYoIWIpdGhyb3cgRXJyb3IoXCJJbnZhbGlkIGV2ZW50IHR5cGVcIik7dmFyIGc9bihlKT8hIWUuY2FwdHVyZTohIWUsbT1VYShhKTttfHwoYVtOYV09bT1uZXcgS2EoYSkpO2M9bS5hZGQoYixjLGQsZyxmKTtpZihjLnByb3h5KXJldHVybiBjO2Q9VmEoKTtjLnByb3h5PWQ7ZC5zcmM9YTtkLmxpc3RlbmVyPWM7aWYoYS5hZGRFdmVudExpc3RlbmVyKUZhfHwoZT1nKSx2b2lkIDA9PT1lJiYoZT0hMSksYS5hZGRFdmVudExpc3RlbmVyKGIudG9TdHJpbmcoKSxkLGUpO2Vsc2UgaWYoYS5hdHRhY2hFdmVudClhLmF0dGFjaEV2ZW50KFdhKGIudG9TdHJpbmcoKSksZCk7ZWxzZSBpZihhLmFkZExpc3RlbmVyJiZhLnJlbW92ZUxpc3RlbmVyKWEuYWRkTGlzdGVuZXIoZCk7ZWxzZSB0aHJvdyBFcnJvcihcImFkZEV2ZW50TGlzdGVuZXIgYW5kIGF0dGFjaEV2ZW50IGFyZSB1bmF2YWlsYWJsZS5cIik7cmV0dXJuIGN9XG5mdW5jdGlvbiBWYSgpe2Z1bmN0aW9uIGEoYyl7cmV0dXJuIGIuY2FsbChhLnNyYyxhLmxpc3RlbmVyLGMpfWNvbnN0IGI9WGE7cmV0dXJuIGF9ZnVuY3Rpb24gUmEoYSxiLGMsZCxlKXtpZihBcnJheS5pc0FycmF5KGIpKXtmb3IodmFyIGY9MDtmPGIubGVuZ3RoO2YrKylSYShhLGJbZl0sYyxkLGUpO3JldHVybiBudWxsfWM9U2EoYyk7cmV0dXJuIGEmJmFbRF0/YS5MKGIsYyxuKGQpPyEhZC5jYXB0dXJlOiEhZCxlKTpUYShhLGIsYywhMCxkLGUpfVxuZnVuY3Rpb24gWWEoYSxiLGMsZCxlKXtpZihBcnJheS5pc0FycmF5KGIpKWZvcih2YXIgZj0wO2Y8Yi5sZW5ndGg7ZisrKVlhKGEsYltmXSxjLGQsZSk7ZWxzZSAoZD1uKGQpPyEhZC5jYXB0dXJlOiEhZCxjPVNhKGMpLGEmJmFbRF0pPyhhPWEuaSxiPVN0cmluZyhiKS50b1N0cmluZygpLGIgaW4gYS5nJiYoZj1hLmdbYl0sYz1MYShmLGMsZCxlKSwtMTxjJiYoSmEoZltjXSksQXJyYXkucHJvdG90eXBlLnNwbGljZS5jYWxsKGYsYywxKSwwPT1mLmxlbmd0aCYmKGRlbGV0ZSBhLmdbYl0sYS5oLS0pKSkpOmEmJihhPVVhKGEpKSYmKGI9YS5nW2IudG9TdHJpbmcoKV0sYT0tMSxiJiYoYT1MYShiLGMsZCxlKSksKGM9LTE8YT9iW2FdOm51bGwpJiZaYShjKSk7fVxuZnVuY3Rpb24gWmEoYSl7aWYoXCJudW1iZXJcIiE9PXR5cGVvZiBhJiZhJiYhYS5kYSl7dmFyIGI9YS5zcmM7aWYoYiYmYltEXSlNYShiLmksYSk7ZWxzZSB7dmFyIGM9YS50eXBlLGQ9YS5wcm94eTtiLnJlbW92ZUV2ZW50TGlzdGVuZXI/Yi5yZW1vdmVFdmVudExpc3RlbmVyKGMsZCxhLmNhcHR1cmUpOmIuZGV0YWNoRXZlbnQ/Yi5kZXRhY2hFdmVudChXYShjKSxkKTpiLmFkZExpc3RlbmVyJiZiLnJlbW92ZUxpc3RlbmVyJiZiLnJlbW92ZUxpc3RlbmVyKGQpOyhjPVVhKGIpKT8oTWEoYyxhKSwwPT1jLmgmJihjLnNyYz1udWxsLGJbTmFdPW51bGwpKTpKYShhKTt9fX1mdW5jdGlvbiBXYShhKXtyZXR1cm4gYSBpbiBPYT9PYVthXTpPYVthXT1cIm9uXCIrYX1mdW5jdGlvbiBYYShhLGIpe2lmKGEuZGEpYT0hMDtlbHNlIHtiPW5ldyBDKGIsdGhpcyk7dmFyIGM9YS5saXN0ZW5lcixkPWEuaGF8fGEuc3JjO2EuZmEmJlphKGEpO2E9Yy5jYWxsKGQsYik7fXJldHVybiBhfVxuZnVuY3Rpb24gVWEoYSl7YT1hW05hXTtyZXR1cm4gYSBpbnN0YW5jZW9mIEthP2E6bnVsbH12YXIgJGE9XCJfX2Nsb3N1cmVfZXZlbnRzX2ZuX1wiKygxRTkqTWF0aC5yYW5kb20oKT4+PjApO2Z1bmN0aW9uIFNhKGEpe2lmKFwiZnVuY3Rpb25cIj09PXR5cGVvZiBhKXJldHVybiBhO2FbJGFdfHwoYVskYV09ZnVuY3Rpb24oYil7cmV0dXJuIGEuaGFuZGxlRXZlbnQoYil9KTtyZXR1cm4gYVskYV19ZnVuY3Rpb24gRSgpe3ouY2FsbCh0aGlzKTt0aGlzLmk9bmV3IEthKHRoaXMpO3RoaXMuTT10aGlzO3RoaXMuRj1udWxsO31yKEUseik7RS5wcm90b3R5cGVbRF09ITA7RS5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihhLGIsYyxkKXtZYSh0aGlzLGEsYixjLGQpO307XG5mdW5jdGlvbiBGKGEsYil7dmFyIGMsZD1hLkY7aWYoZClmb3IoYz1bXTtkO2Q9ZC5GKWMucHVzaChkKTthPWEuTTtkPWIudHlwZXx8YjtpZihcInN0cmluZ1wiPT09dHlwZW9mIGIpYj1uZXcgQShiLGEpO2Vsc2UgaWYoYiBpbnN0YW5jZW9mIEEpYi50YXJnZXQ9Yi50YXJnZXR8fGE7ZWxzZSB7dmFyIGU9YjtiPW5ldyBBKGQsYSk7dWEoYixlKTt9ZT0hMDtpZihjKWZvcih2YXIgZj1jLmxlbmd0aC0xOzA8PWY7Zi0tKXt2YXIgZz1iLmc9Y1tmXTtlPWFiKGcsZCwhMCxiKSYmZTt9Zz1iLmc9YTtlPWFiKGcsZCwhMCxiKSYmZTtlPWFiKGcsZCwhMSxiKSYmZTtpZihjKWZvcihmPTA7ZjxjLmxlbmd0aDtmKyspZz1iLmc9Y1tmXSxlPWFiKGcsZCwhMSxiKSYmZTt9XG5FLnByb3RvdHlwZS5OPWZ1bmN0aW9uKCl7RS5hYS5OLmNhbGwodGhpcyk7aWYodGhpcy5pKXt2YXIgYT10aGlzLmksYztmb3IoYyBpbiBhLmcpe2Zvcih2YXIgZD1hLmdbY10sZT0wO2U8ZC5sZW5ndGg7ZSsrKUphKGRbZV0pO2RlbGV0ZSBhLmdbY107YS5oLS07fX10aGlzLkY9bnVsbDt9O0UucHJvdG90eXBlLks9ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMuaS5hZGQoU3RyaW5nKGEpLGIsITEsYyxkKX07RS5wcm90b3R5cGUuTD1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5pLmFkZChTdHJpbmcoYSksYiwhMCxjLGQpfTtcbmZ1bmN0aW9uIGFiKGEsYixjLGQpe2I9YS5pLmdbU3RyaW5nKGIpXTtpZighYilyZXR1cm4gITA7Yj1iLmNvbmNhdCgpO2Zvcih2YXIgZT0hMCxmPTA7ZjxiLmxlbmd0aDsrK2Ype3ZhciBnPWJbZl07aWYoZyYmIWcuZGEmJmcuY2FwdHVyZT09Yyl7dmFyIG09Zy5saXN0ZW5lcixxPWcuaGF8fGcuc3JjO2cuZmEmJk1hKGEuaSxnKTtlPSExIT09bS5jYWxsKHEsZCkmJmU7fX1yZXR1cm4gZSYmIWQuZGVmYXVsdFByZXZlbnRlZH1mdW5jdGlvbiBiYihhLGIsYyl7aWYoXCJmdW5jdGlvblwiPT09dHlwZW9mIGEpYyYmKGE9cChhLGMpKTtlbHNlIGlmKGEmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEuaGFuZGxlRXZlbnQpYT1wKGEuaGFuZGxlRXZlbnQsYSk7ZWxzZSB0aHJvdyBFcnJvcihcIkludmFsaWQgbGlzdGVuZXIgYXJndW1lbnRcIik7cmV0dXJuIDIxNDc0ODM2NDc8TnVtYmVyKGIpPy0xOmsuc2V0VGltZW91dChhLGJ8fDApfWZ1bmN0aW9uIGNiKGEpe2EuZz1iYigoKT0+e2EuZz1udWxsO2EuaSYmKGEuaT0hMSxjYihhKSk7fSxhLmwpO2NvbnN0IGI9YS5oO2EuaD1udWxsO2EubS5hcHBseShudWxsLGIpO31jbGFzcyBlYiBleHRlbmRzIHp7Y29uc3RydWN0b3IoYSxiKXtzdXBlcigpO3RoaXMubT1hO3RoaXMubD1iO3RoaXMuaD1udWxsO3RoaXMuaT0hMTt0aGlzLmc9bnVsbDt9aihhKXt0aGlzLmg9YXJndW1lbnRzO3RoaXMuZz90aGlzLmk9ITA6Y2IodGhpcyk7fU4oKXtzdXBlci5OKCk7dGhpcy5nJiYoay5jbGVhclRpbWVvdXQodGhpcy5nKSx0aGlzLmc9bnVsbCx0aGlzLmk9ITEsdGhpcy5oPW51bGwpO319ZnVuY3Rpb24gRyhhKXt6LmNhbGwodGhpcyk7dGhpcy5oPWE7dGhpcy5nPXt9O31yKEcseik7dmFyIGZiPVtdO2Z1bmN0aW9uIGdiKGEpe3FhKGEuZyxmdW5jdGlvbihiLGMpe3RoaXMuZy5oYXNPd25Qcm9wZXJ0eShjKSYmWmEoYik7fSxhKTthLmc9e307fUcucHJvdG90eXBlLk49ZnVuY3Rpb24oKXtHLmFhLk4uY2FsbCh0aGlzKTtnYih0aGlzKTt9O0cucHJvdG90eXBlLmhhbmRsZUV2ZW50PWZ1bmN0aW9uKCl7dGhyb3cgRXJyb3IoXCJFdmVudEhhbmRsZXIuaGFuZGxlRXZlbnQgbm90IGltcGxlbWVudGVkXCIpO307dmFyIGhiPWsuSlNPTi5zdHJpbmdpZnk7dmFyIGliPWsuSlNPTi5wYXJzZTt2YXIgamI9Y2xhc3N7c3RyaW5naWZ5KGEpe3JldHVybiBrLkpTT04uc3RyaW5naWZ5KGEsdm9pZCAwKX1wYXJzZShhKXtyZXR1cm4gay5KU09OLnBhcnNlKGEsdm9pZCAwKX19O2Z1bmN0aW9uIGtiKCl7fWtiLnByb3RvdHlwZS5oPW51bGw7ZnVuY3Rpb24gbGIoYSl7cmV0dXJuIGEuaHx8KGEuaD1hLmkoKSl9ZnVuY3Rpb24gbWIoKXt9dmFyIEg9e09QRU46XCJhXCIsa2I6XCJiXCIsSmE6XCJjXCIsd2I6XCJkXCJ9O2Z1bmN0aW9uIG5iKCl7QS5jYWxsKHRoaXMsXCJkXCIpO31yKG5iLEEpO2Z1bmN0aW9uIG9iKCl7QS5jYWxsKHRoaXMsXCJjXCIpO31yKG9iLEEpO3ZhciBJPXt9LHBiPW51bGw7ZnVuY3Rpb24gcWIoKXtyZXR1cm4gcGI9cGJ8fG5ldyBFfUkuTGE9XCJzZXJ2ZXJyZWFjaGFiaWxpdHlcIjtmdW5jdGlvbiByYihhKXtBLmNhbGwodGhpcyxJLkxhLGEpO31yKHJiLEEpO2Z1bmN0aW9uIEooYSl7Y29uc3QgYj1xYigpO0YoYixuZXcgcmIoYikpO31JLlNUQVRfRVZFTlQ9XCJzdGF0ZXZlbnRcIjtmdW5jdGlvbiBzYihhLGIpe0EuY2FsbCh0aGlzLEkuU1RBVF9FVkVOVCxhKTt0aGlzLnN0YXQ9Yjt9cihzYixBKTtmdW5jdGlvbiBLKGEpe2NvbnN0IGI9cWIoKTtGKGIsbmV3IHNiKGIsYSkpO31JLk1hPVwidGltaW5nZXZlbnRcIjtmdW5jdGlvbiB0YihhLGIpe0EuY2FsbCh0aGlzLEkuTWEsYSk7dGhpcy5zaXplPWI7fXIodGIsQSk7XG5mdW5jdGlvbiB1YihhLGIpe2lmKFwiZnVuY3Rpb25cIiE9PXR5cGVvZiBhKXRocm93IEVycm9yKFwiRm4gbXVzdCBub3QgYmUgbnVsbCBhbmQgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO3JldHVybiBrLnNldFRpbWVvdXQoZnVuY3Rpb24oKXthKCk7fSxiKX1mdW5jdGlvbiB2Yigpe3RoaXMuZz0hMDt9dmIucHJvdG90eXBlLnhhPWZ1bmN0aW9uKCl7dGhpcy5nPSExO307ZnVuY3Rpb24gd2IoYSxiLGMsZCxlLGYpe2EuaW5mbyhmdW5jdGlvbigpe2lmKGEuZylpZihmKXt2YXIgZz1cIlwiO2Zvcih2YXIgbT1mLnNwbGl0KFwiJlwiKSxxPTA7cTxtLmxlbmd0aDtxKyspe3ZhciBsPW1bcV0uc3BsaXQoXCI9XCIpO2lmKDE8bC5sZW5ndGgpe3ZhciB2PWxbMF07bD1sWzFdO3ZhciB3PXYuc3BsaXQoXCJfXCIpO2c9Mjw9dy5sZW5ndGgmJlwidHlwZVwiPT13WzFdP2crKHYrXCI9XCIrbCtcIiZcIik6ZysoditcIj1yZWRhY3RlZCZcIik7fX19ZWxzZSBnPW51bGw7ZWxzZSBnPWY7cmV0dXJuIFwiWE1MSFRUUCBSRVEgKFwiK2QrXCIpIFthdHRlbXB0IFwiK2UrXCJdOiBcIitiK1wiXFxuXCIrYytcIlxcblwiK2d9KTt9XG5mdW5jdGlvbiB4YihhLGIsYyxkLGUsZixnKXthLmluZm8oZnVuY3Rpb24oKXtyZXR1cm4gXCJYTUxIVFRQIFJFU1AgKFwiK2QrXCIpIFsgYXR0ZW1wdCBcIitlK1wiXTogXCIrYitcIlxcblwiK2MrXCJcXG5cIitmK1wiIFwiK2d9KTt9ZnVuY3Rpb24gTChhLGIsYyxkKXthLmluZm8oZnVuY3Rpb24oKXtyZXR1cm4gXCJYTUxIVFRQIFRFWFQgKFwiK2IrXCIpOiBcIit5YihhLGMpKyhkP1wiIFwiK2Q6XCJcIil9KTt9ZnVuY3Rpb24gemIoYSxiKXthLmluZm8oZnVuY3Rpb24oKXtyZXR1cm4gXCJUSU1FT1VUOiBcIitifSk7fXZiLnByb3RvdHlwZS5pbmZvPWZ1bmN0aW9uKCl7fTtcbmZ1bmN0aW9uIHliKGEsYil7aWYoIWEuZylyZXR1cm4gYjtpZighYilyZXR1cm4gbnVsbDt0cnl7dmFyIGM9SlNPTi5wYXJzZShiKTtpZihjKWZvcihhPTA7YTxjLmxlbmd0aDthKyspaWYoQXJyYXkuaXNBcnJheShjW2FdKSl7dmFyIGQ9Y1thXTtpZighKDI+ZC5sZW5ndGgpKXt2YXIgZT1kWzFdO2lmKEFycmF5LmlzQXJyYXkoZSkmJiEoMT5lLmxlbmd0aCkpe3ZhciBmPWVbMF07aWYoXCJub29wXCIhPWYmJlwic3RvcFwiIT1mJiZcImNsb3NlXCIhPWYpZm9yKHZhciBnPTE7ZzxlLmxlbmd0aDtnKyspZVtnXT1cIlwiO319fXJldHVybiBoYihjKX1jYXRjaChtKXtyZXR1cm4gYn19dmFyIEFiPXtOT19FUlJPUjowLGdiOjEsdGI6MixzYjozLG5iOjQscmI6NSx1Yjo2LElhOjcsVElNRU9VVDo4LHhiOjl9O3ZhciBCYj17bGI6XCJjb21wbGV0ZVwiLEhiOlwic3VjY2Vzc1wiLEphOlwiZXJyb3JcIixJYTpcImFib3J0XCIsemI6XCJyZWFkeVwiLEFiOlwicmVhZHlzdGF0ZWNoYW5nZVwiLFRJTUVPVVQ6XCJ0aW1lb3V0XCIsdmI6XCJpbmNyZW1lbnRhbGRhdGFcIix5YjpcInByb2dyZXNzXCIsb2I6XCJkb3dubG9hZHByb2dyZXNzXCIsUGI6XCJ1cGxvYWRwcm9ncmVzc1wifTt2YXIgQ2I7ZnVuY3Rpb24gRGIoKXt9cihEYixrYik7RGIucHJvdG90eXBlLmc9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0fTtEYi5wcm90b3R5cGUuaT1mdW5jdGlvbigpe3JldHVybiB7fX07Q2I9bmV3IERiO2Z1bmN0aW9uIE0oYSxiLGMsZCl7dGhpcy5qPWE7dGhpcy5pPWI7dGhpcy5sPWM7dGhpcy5SPWR8fDE7dGhpcy5VPW5ldyBHKHRoaXMpO3RoaXMuST00NUUzO3RoaXMuSD1udWxsO3RoaXMubz0hMTt0aGlzLm09dGhpcy5BPXRoaXMudj10aGlzLkw9dGhpcy5GPXRoaXMuUz10aGlzLkI9bnVsbDt0aGlzLkQ9W107dGhpcy5nPW51bGw7dGhpcy5DPTA7dGhpcy5zPXRoaXMudT1udWxsO3RoaXMuWD0tMTt0aGlzLko9ITE7dGhpcy5PPTA7dGhpcy5NPW51bGw7dGhpcy5XPXRoaXMuSz10aGlzLlQ9dGhpcy5QPSExO3RoaXMuaD1uZXcgRWI7fWZ1bmN0aW9uIEViKCl7dGhpcy5pPW51bGw7dGhpcy5nPVwiXCI7dGhpcy5oPSExO312YXIgRmI9e30sR2I9e307ZnVuY3Rpb24gSGIoYSxiLGMpe2EuTD0xO2Eudj1JYihOKGIpKTthLm09YzthLlA9ITA7SmIoYSxudWxsKTt9XG5mdW5jdGlvbiBKYihhLGIpe2EuRj1EYXRlLm5vdygpO0tiKGEpO2EuQT1OKGEudik7dmFyIGM9YS5BLGQ9YS5SO0FycmF5LmlzQXJyYXkoZCl8fChkPVtTdHJpbmcoZCldKTtMYihjLmksXCJ0XCIsZCk7YS5DPTA7Yz1hLmouSjthLmg9bmV3IEViO2EuZz1NYihhLmosYz9iOm51bGwsIWEubSk7MDxhLk8mJihhLk09bmV3IGViKHAoYS5ZLGEsYS5nKSxhLk8pKTtiPWEuVTtjPWEuZztkPWEuY2E7dmFyIGU9XCJyZWFkeXN0YXRlY2hhbmdlXCI7QXJyYXkuaXNBcnJheShlKXx8KGUmJihmYlswXT1lLnRvU3RyaW5nKCkpLGU9ZmIpO2Zvcih2YXIgZj0wO2Y8ZS5sZW5ndGg7ZisrKXt2YXIgZz1RYShjLGVbZl0sZHx8Yi5oYW5kbGVFdmVudCwhMSxiLmh8fGIpO2lmKCFnKWJyZWFrO2IuZ1tnLmtleV09Zzt9Yj1hLkg/c2EoYS5IKTp7fTthLm0/KGEudXx8KGEudT1cIlBPU1RcIiksYltcIkNvbnRlbnQtVHlwZVwiXT1cImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiLGEuZy5lYShhLkEsYS51LFxuYS5tLGIpKTooYS51PVwiR0VUXCIsYS5nLmVhKGEuQSxhLnUsbnVsbCxiKSk7SigpO3diKGEuaSxhLnUsYS5BLGEubCxhLlIsYS5tKTt9TS5wcm90b3R5cGUuY2E9ZnVuY3Rpb24oYSl7YT1hLnRhcmdldDtjb25zdCBiPXRoaXMuTTtiJiYzPT1QKGEpP2IuaigpOnRoaXMuWShhKTt9O1xuTS5wcm90b3R5cGUuWT1mdW5jdGlvbihhKXt0cnl7aWYoYT09dGhpcy5nKWE6e2NvbnN0IHc9UCh0aGlzLmcpO3ZhciBiPXRoaXMuZy5CYSgpO2NvbnN0IE89dGhpcy5nLlooKTtpZighKDM+dykmJigzIT13fHx0aGlzLmcmJih0aGlzLmguaHx8dGhpcy5nLm9hKCl8fE5iKHRoaXMuZykpKSl7dGhpcy5KfHw0IT13fHw3PT1ifHwoOD09Ynx8MD49Tz9KKDMpOkooMikpO09iKHRoaXMpO3ZhciBjPXRoaXMuZy5aKCk7dGhpcy5YPWM7YjppZihQYih0aGlzKSl7dmFyIGQ9TmIodGhpcy5nKTthPVwiXCI7dmFyIGU9ZC5sZW5ndGgsZj00PT1QKHRoaXMuZyk7aWYoIXRoaXMuaC5pKXtpZihcInVuZGVmaW5lZFwiPT09dHlwZW9mIFRleHREZWNvZGVyKXtRKHRoaXMpO1FiKHRoaXMpO3ZhciBnPVwiXCI7YnJlYWsgYn10aGlzLmguaT1uZXcgay5UZXh0RGVjb2Rlcjt9Zm9yKGI9MDtiPGU7YisrKXRoaXMuaC5oPSEwLGErPXRoaXMuaC5pLmRlY29kZShkW2JdLHtzdHJlYW06IShmJiZiPT1lLTEpfSk7ZC5sZW5ndGg9XG4wO3RoaXMuaC5nKz1hO3RoaXMuQz0wO2c9dGhpcy5oLmc7fWVsc2UgZz10aGlzLmcub2EoKTt0aGlzLm89MjAwPT1jO3hiKHRoaXMuaSx0aGlzLnUsdGhpcy5BLHRoaXMubCx0aGlzLlIsdyxjKTtpZih0aGlzLm8pe2lmKHRoaXMuVCYmIXRoaXMuSyl7Yjp7aWYodGhpcy5nKXt2YXIgbSxxPXRoaXMuZztpZigobT1xLmc/cS5nLmdldFJlc3BvbnNlSGVhZGVyKFwiWC1IVFRQLUluaXRpYWwtUmVzcG9uc2VcIik6bnVsbCkmJiF0KG0pKXt2YXIgbD1tO2JyZWFrIGJ9fWw9bnVsbDt9aWYoYz1sKUwodGhpcy5pLHRoaXMubCxjLFwiSW5pdGlhbCBoYW5kc2hha2UgcmVzcG9uc2UgdmlhIFgtSFRUUC1Jbml0aWFsLVJlc3BvbnNlXCIpLHRoaXMuSz0hMCxSYih0aGlzLGMpO2Vsc2Uge3RoaXMubz0hMTt0aGlzLnM9MztLKDEyKTtRKHRoaXMpO1FiKHRoaXMpO2JyZWFrIGF9fWlmKHRoaXMuUCl7Yz0hMDtsZXQgQjtmb3IoOyF0aGlzLkomJnRoaXMuQzxnLmxlbmd0aDspaWYoQj1TYih0aGlzLGcpLEI9PUdiKXs0PT1cbncmJih0aGlzLnM9NCxLKDE0KSxjPSExKTtMKHRoaXMuaSx0aGlzLmwsbnVsbCxcIltJbmNvbXBsZXRlIFJlc3BvbnNlXVwiKTticmVha31lbHNlIGlmKEI9PUZiKXt0aGlzLnM9NDtLKDE1KTtMKHRoaXMuaSx0aGlzLmwsZyxcIltJbnZhbGlkIENodW5rXVwiKTtjPSExO2JyZWFrfWVsc2UgTCh0aGlzLmksdGhpcy5sLEIsbnVsbCksUmIodGhpcyxCKTtQYih0aGlzKSYmMCE9dGhpcy5DJiYodGhpcy5oLmc9dGhpcy5oLmcuc2xpY2UodGhpcy5DKSx0aGlzLkM9MCk7NCE9d3x8MCE9Zy5sZW5ndGh8fHRoaXMuaC5ofHwodGhpcy5zPTEsSygxNiksYz0hMSk7dGhpcy5vPXRoaXMubyYmYztpZighYylMKHRoaXMuaSx0aGlzLmwsZyxcIltJbnZhbGlkIENodW5rZWQgUmVzcG9uc2VdXCIpLFEodGhpcyksUWIodGhpcyk7ZWxzZSBpZigwPGcubGVuZ3RoJiYhdGhpcy5XKXt0aGlzLlc9ITA7dmFyIHY9dGhpcy5qO3YuZz09dGhpcyYmdi5iYSYmIXYuTSYmKHYuai5pbmZvKFwiR3JlYXQsIG5vIGJ1ZmZlcmluZyBwcm94eSBkZXRlY3RlZC4gQnl0ZXMgcmVjZWl2ZWQ6IFwiK1xuZy5sZW5ndGgpLFRiKHYpLHYuTT0hMCxLKDExKSk7fX1lbHNlIEwodGhpcy5pLHRoaXMubCxnLG51bGwpLFJiKHRoaXMsZyk7ND09dyYmUSh0aGlzKTt0aGlzLm8mJiF0aGlzLkomJig0PT13P1ViKHRoaXMuaix0aGlzKToodGhpcy5vPSExLEtiKHRoaXMpKSk7fWVsc2UgVmIodGhpcy5nKSw0MDA9PWMmJjA8Zy5pbmRleE9mKFwiVW5rbm93biBTSURcIik/KHRoaXMucz0zLEsoMTIpKToodGhpcy5zPTAsSygxMykpLFEodGhpcyksUWIodGhpcyk7fX19Y2F0Y2godyl7fWZpbmFsbHl7fX07ZnVuY3Rpb24gUGIoYSl7cmV0dXJuIGEuZz9cIkdFVFwiPT1hLnUmJjIhPWEuTCYmYS5qLkNhOiExfVxuZnVuY3Rpb24gU2IoYSxiKXt2YXIgYz1hLkMsZD1iLmluZGV4T2YoXCJcXG5cIixjKTtpZigtMT09ZClyZXR1cm4gR2I7Yz1OdW1iZXIoYi5zdWJzdHJpbmcoYyxkKSk7aWYoaXNOYU4oYykpcmV0dXJuIEZiO2QrPTE7aWYoZCtjPmIubGVuZ3RoKXJldHVybiBHYjtiPWIuc2xpY2UoZCxkK2MpO2EuQz1kK2M7cmV0dXJuIGJ9TS5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKCl7dGhpcy5KPSEwO1EodGhpcyk7fTtmdW5jdGlvbiBLYihhKXthLlM9RGF0ZS5ub3coKSthLkk7V2IoYSxhLkkpO31mdW5jdGlvbiBXYihhLGIpe2lmKG51bGwhPWEuQil0aHJvdyBFcnJvcihcIldhdGNoRG9nIHRpbWVyIG5vdCBudWxsXCIpO2EuQj11YihwKGEuYmEsYSksYik7fWZ1bmN0aW9uIE9iKGEpe2EuQiYmKGsuY2xlYXJUaW1lb3V0KGEuQiksYS5CPW51bGwpO31cbk0ucHJvdG90eXBlLmJhPWZ1bmN0aW9uKCl7dGhpcy5CPW51bGw7Y29uc3QgYT1EYXRlLm5vdygpOzA8PWEtdGhpcy5TPyh6Yih0aGlzLmksdGhpcy5BKSwyIT10aGlzLkwmJihKKCksSygxNykpLFEodGhpcyksdGhpcy5zPTIsUWIodGhpcykpOldiKHRoaXMsdGhpcy5TLWEpO307ZnVuY3Rpb24gUWIoYSl7MD09YS5qLkd8fGEuSnx8VWIoYS5qLGEpO31mdW5jdGlvbiBRKGEpe09iKGEpO3ZhciBiPWEuTTtiJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBiLm1hJiZiLm1hKCk7YS5NPW51bGw7Z2IoYS5VKTthLmcmJihiPWEuZyxhLmc9bnVsbCxiLmFib3J0KCksYi5tYSgpKTt9XG5mdW5jdGlvbiBSYihhLGIpe3RyeXt2YXIgYz1hLmo7aWYoMCE9Yy5HJiYoYy5nPT1hfHxYYihjLmgsYSkpKWlmKCFhLksmJlhiKGMuaCxhKSYmMz09Yy5HKXt0cnl7dmFyIGQ9Yy5EYS5nLnBhcnNlKGIpO31jYXRjaChsKXtkPW51bGw7fWlmKEFycmF5LmlzQXJyYXkoZCkmJjM9PWQubGVuZ3RoKXt2YXIgZT1kO2lmKDA9PWVbMF0pYTp7aWYoIWMudSl7aWYoYy5nKWlmKGMuZy5GKzNFMzxhLkYpWWIoYyksWmIoYyk7ZWxzZSBicmVhayBhOyRiKGMpO0soMTgpO319ZWxzZSBjLnphPWVbMV0sMDxjLnphLWMuVCYmMzc1MDA+ZVsyXSYmYy5GJiYwPT1jLnYmJiFjLkMmJihjLkM9dWIocChjLlphLGMpLDZFMykpO2lmKDE+PWFjKGMuaCkmJmMuY2Epe3RyeXtjLmNhKCk7fWNhdGNoKGwpe31jLmNhPXZvaWQgMDt9fWVsc2UgUihjLDExKTt9ZWxzZSBpZigoYS5LfHxjLmc9PWEpJiZZYihjKSwhdChiKSlmb3IoZT1jLkRhLmcucGFyc2UoYiksYj0wO2I8ZS5sZW5ndGg7YisrKXtsZXQgbD1lW2JdO2MuVD1cbmxbMF07bD1sWzFdO2lmKDI9PWMuRylpZihcImNcIj09bFswXSl7Yy5LPWxbMV07Yy5pYT1sWzJdO2NvbnN0IHY9bFszXTtudWxsIT12JiYoYy5sYT12LGMuai5pbmZvKFwiVkVSPVwiK2MubGEpKTtjb25zdCB3PWxbNF07bnVsbCE9dyYmKGMuQWE9dyxjLmouaW5mbyhcIlNWRVI9XCIrYy5BYSkpO2NvbnN0IE89bFs1XTtudWxsIT1PJiZcIm51bWJlclwiPT09dHlwZW9mIE8mJjA8TyYmKGQ9MS41Kk8sYy5MPWQsYy5qLmluZm8oXCJiYWNrQ2hhbm5lbFJlcXVlc3RUaW1lb3V0TXNfPVwiK2QpKTtkPWM7Y29uc3QgQj1hLmc7aWYoQil7Y29uc3QgeWE9Qi5nP0IuZy5nZXRSZXNwb25zZUhlYWRlcihcIlgtQ2xpZW50LVdpcmUtUHJvdG9jb2xcIik6bnVsbDtpZih5YSl7dmFyIGY9ZC5oO2YuZ3x8LTE9PXlhLmluZGV4T2YoXCJzcGR5XCIpJiYtMT09eWEuaW5kZXhPZihcInF1aWNcIikmJi0xPT15YS5pbmRleE9mKFwiaDJcIil8fChmLmo9Zi5sLGYuZz1uZXcgU2V0LGYuaCYmKGJjKGYsZi5oKSxmLmg9bnVsbCkpO31pZihkLkQpe2NvbnN0IGRiPVxuQi5nP0IuZy5nZXRSZXNwb25zZUhlYWRlcihcIlgtSFRUUC1TZXNzaW9uLUlkXCIpOm51bGw7ZGImJihkLnlhPWRiLFMoZC5JLGQuRCxkYikpO319Yy5HPTM7Yy5sJiZjLmwudWEoKTtjLmJhJiYoYy5SPURhdGUubm93KCktYS5GLGMuai5pbmZvKFwiSGFuZHNoYWtlIFJUVDogXCIrYy5SK1wibXNcIikpO2Q9Yzt2YXIgZz1hO2QucWE9Y2MoZCxkLko/ZC5pYTpudWxsLGQuVyk7aWYoZy5LKXtkYyhkLmgsZyk7dmFyIG09ZyxxPWQuTDtxJiYobS5JPXEpO20uQiYmKE9iKG0pLEtiKG0pKTtkLmc9Zzt9ZWxzZSBlYyhkKTswPGMuaS5sZW5ndGgmJmZjKGMpO31lbHNlIFwic3RvcFwiIT1sWzBdJiZcImNsb3NlXCIhPWxbMF18fFIoYyw3KTtlbHNlIDM9PWMuRyYmKFwic3RvcFwiPT1sWzBdfHxcImNsb3NlXCI9PWxbMF0/XCJzdG9wXCI9PWxbMF0/UihjLDcpOmdjKGMpOlwibm9vcFwiIT1sWzBdJiZjLmwmJmMubC50YShsKSxjLnY9MCk7fUooNCk7fWNhdGNoKGwpe319dmFyIGhjPWNsYXNze2NvbnN0cnVjdG9yKGEsYil7dGhpcy5nPWE7dGhpcy5tYXA9Yjt9fTtmdW5jdGlvbiBpYyhhKXt0aGlzLmw9YXx8MTA7ay5QZXJmb3JtYW5jZU5hdmlnYXRpb25UaW1pbmc/KGE9ay5wZXJmb3JtYW5jZS5nZXRFbnRyaWVzQnlUeXBlKFwibmF2aWdhdGlvblwiKSxhPTA8YS5sZW5ndGgmJihcImhxXCI9PWFbMF0ubmV4dEhvcFByb3RvY29sfHxcImgyXCI9PWFbMF0ubmV4dEhvcFByb3RvY29sKSk6YT0hIShrLmNocm9tZSYmay5jaHJvbWUubG9hZFRpbWVzJiZrLmNocm9tZS5sb2FkVGltZXMoKSYmay5jaHJvbWUubG9hZFRpbWVzKCkud2FzRmV0Y2hlZFZpYVNwZHkpO3RoaXMuaj1hP3RoaXMubDoxO3RoaXMuZz1udWxsOzE8dGhpcy5qJiYodGhpcy5nPW5ldyBTZXQpO3RoaXMuaD1udWxsO3RoaXMuaT1bXTt9ZnVuY3Rpb24gamMoYSl7cmV0dXJuIGEuaD8hMDphLmc/YS5nLnNpemU+PWEuajohMX1mdW5jdGlvbiBhYyhhKXtyZXR1cm4gYS5oPzE6YS5nP2EuZy5zaXplOjB9ZnVuY3Rpb24gWGIoYSxiKXtyZXR1cm4gYS5oP2EuaD09YjphLmc/YS5nLmhhcyhiKTohMX1cbmZ1bmN0aW9uIGJjKGEsYil7YS5nP2EuZy5hZGQoYik6YS5oPWI7fWZ1bmN0aW9uIGRjKGEsYil7YS5oJiZhLmg9PWI/YS5oPW51bGw6YS5nJiZhLmcuaGFzKGIpJiZhLmcuZGVsZXRlKGIpO31pYy5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKCl7dGhpcy5pPWtjKHRoaXMpO2lmKHRoaXMuaCl0aGlzLmguY2FuY2VsKCksdGhpcy5oPW51bGw7ZWxzZSBpZih0aGlzLmcmJjAhPT10aGlzLmcuc2l6ZSl7Zm9yKGNvbnN0IGEgb2YgdGhpcy5nLnZhbHVlcygpKWEuY2FuY2VsKCk7dGhpcy5nLmNsZWFyKCk7fX07ZnVuY3Rpb24ga2MoYSl7aWYobnVsbCE9YS5oKXJldHVybiBhLmkuY29uY2F0KGEuaC5EKTtpZihudWxsIT1hLmcmJjAhPT1hLmcuc2l6ZSl7bGV0IGI9YS5pO2Zvcihjb25zdCBjIG9mIGEuZy52YWx1ZXMoKSliPWIuY29uY2F0KGMuRCk7cmV0dXJuIGJ9cmV0dXJuIGxhKGEuaSl9ZnVuY3Rpb24gbGMoYSl7aWYoYS5WJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLlYpcmV0dXJuIGEuVigpO2lmKFwidW5kZWZpbmVkXCIhPT10eXBlb2YgTWFwJiZhIGluc3RhbmNlb2YgTWFwfHxcInVuZGVmaW5lZFwiIT09dHlwZW9mIFNldCYmYSBpbnN0YW5jZW9mIFNldClyZXR1cm4gQXJyYXkuZnJvbShhLnZhbHVlcygpKTtpZihcInN0cmluZ1wiPT09dHlwZW9mIGEpcmV0dXJuIGEuc3BsaXQoXCJcIik7aWYoaGEoYSkpe2Zvcih2YXIgYj1bXSxjPWEubGVuZ3RoLGQ9MDtkPGM7ZCsrKWIucHVzaChhW2RdKTtyZXR1cm4gYn1iPVtdO2M9MDtmb3IoZCBpbiBhKWJbYysrXT1hW2RdO3JldHVybiBifVxuZnVuY3Rpb24gbWMoYSl7aWYoYS5uYSYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS5uYSlyZXR1cm4gYS5uYSgpO2lmKCFhLlZ8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIGEuVil7aWYoXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBNYXAmJmEgaW5zdGFuY2VvZiBNYXApcmV0dXJuIEFycmF5LmZyb20oYS5rZXlzKCkpO2lmKCEoXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBTZXQmJmEgaW5zdGFuY2VvZiBTZXQpKXtpZihoYShhKXx8XCJzdHJpbmdcIj09PXR5cGVvZiBhKXt2YXIgYj1bXTthPWEubGVuZ3RoO2Zvcih2YXIgYz0wO2M8YTtjKyspYi5wdXNoKGMpO3JldHVybiBifWI9W107Yz0wO2Zvcihjb25zdCBkIGluIGEpYltjKytdPWQ7cmV0dXJuIGJ9fX1cbmZ1bmN0aW9uIG5jKGEsYil7aWYoYS5mb3JFYWNoJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLmZvckVhY2gpYS5mb3JFYWNoKGIsdm9pZCAwKTtlbHNlIGlmKGhhKGEpfHxcInN0cmluZ1wiPT09dHlwZW9mIGEpQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLGIsdm9pZCAwKTtlbHNlIGZvcih2YXIgYz1tYyhhKSxkPWxjKGEpLGU9ZC5sZW5ndGgsZj0wO2Y8ZTtmKyspYi5jYWxsKHZvaWQgMCxkW2ZdLGMmJmNbZl0sYSk7fXZhciBvYz1SZWdFeHAoXCJeKD86KFteOi8/Iy5dKyk6KT8oPzovLyg/OihbXlxcXFxcXFxcLz8jXSopQCk/KFteXFxcXFxcXFwvPyNdKj8pKD86OihbMC05XSspKT8oPz1bXFxcXFxcXFwvPyNdfCQpKT8oW14/I10rKT8oPzpcXFxcPyhbXiNdKikpPyg/OiMoW1xcXFxzXFxcXFNdKikpPyRcIik7ZnVuY3Rpb24gcGMoYSxiKXtpZihhKXthPWEuc3BsaXQoXCImXCIpO2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKXt2YXIgZD1hW2NdLmluZGV4T2YoXCI9XCIpLGU9bnVsbDtpZigwPD1kKXt2YXIgZj1hW2NdLnN1YnN0cmluZygwLGQpO2U9YVtjXS5zdWJzdHJpbmcoZCsxKTt9ZWxzZSBmPWFbY107YihmLGU/ZGVjb2RlVVJJQ29tcG9uZW50KGUucmVwbGFjZSgvXFwrL2csXCIgXCIpKTpcIlwiKTt9fX1mdW5jdGlvbiBUKGEpe3RoaXMuZz10aGlzLm89dGhpcy5qPVwiXCI7dGhpcy5zPW51bGw7dGhpcy5tPXRoaXMubD1cIlwiO3RoaXMuaD0hMTtpZihhIGluc3RhbmNlb2YgVCl7dGhpcy5oPWEuaDtxYyh0aGlzLGEuaik7dGhpcy5vPWEubzt0aGlzLmc9YS5nO3JjKHRoaXMsYS5zKTt0aGlzLmw9YS5sO3ZhciBiPWEuaTt2YXIgYz1uZXcgc2M7Yy5pPWIuaTtiLmcmJihjLmc9bmV3IE1hcChiLmcpLGMuaD1iLmgpO3RjKHRoaXMsYyk7dGhpcy5tPWEubTt9ZWxzZSBhJiYoYj1TdHJpbmcoYSkubWF0Y2gob2MpKT8odGhpcy5oPSExLHFjKHRoaXMsYlsxXXx8XCJcIiwhMCksdGhpcy5vPXVjKGJbMl18fFwiXCIpLHRoaXMuZz11YyhiWzNdfHxcIlwiLCEwKSxyYyh0aGlzLGJbNF0pLHRoaXMubD11YyhiWzVdfHxcIlwiLCEwKSx0Yyh0aGlzLGJbNl18fFwiXCIsITApLHRoaXMubT11YyhiWzddfHxcIlwiKSk6KHRoaXMuaD0hMSx0aGlzLmk9bmV3IHNjKG51bGwsdGhpcy5oKSk7fVxuVC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgYT1bXSxiPXRoaXMuajtiJiZhLnB1c2godmMoYix3YywhMCksXCI6XCIpO3ZhciBjPXRoaXMuZztpZihjfHxcImZpbGVcIj09YilhLnB1c2goXCIvL1wiKSwoYj10aGlzLm8pJiZhLnB1c2godmMoYix3YywhMCksXCJAXCIpLGEucHVzaChlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGMpKS5yZXBsYWNlKC8lMjUoWzAtOWEtZkEtRl17Mn0pL2csXCIlJDFcIikpLGM9dGhpcy5zLG51bGwhPWMmJmEucHVzaChcIjpcIixTdHJpbmcoYykpO2lmKGM9dGhpcy5sKXRoaXMuZyYmXCIvXCIhPWMuY2hhckF0KDApJiZhLnB1c2goXCIvXCIpLGEucHVzaCh2YyhjLFwiL1wiPT1jLmNoYXJBdCgwKT94Yzp5YywhMCkpOyhjPXRoaXMuaS50b1N0cmluZygpKSYmYS5wdXNoKFwiP1wiLGMpOyhjPXRoaXMubSkmJmEucHVzaChcIiNcIix2YyhjLHpjKSk7cmV0dXJuIGEuam9pbihcIlwiKX07ZnVuY3Rpb24gTihhKXtyZXR1cm4gbmV3IFQoYSl9XG5mdW5jdGlvbiBxYyhhLGIsYyl7YS5qPWM/dWMoYiwhMCk6YjthLmomJihhLmo9YS5qLnJlcGxhY2UoLzokLyxcIlwiKSk7fWZ1bmN0aW9uIHJjKGEsYil7aWYoYil7Yj1OdW1iZXIoYik7aWYoaXNOYU4oYil8fDA+Yil0aHJvdyBFcnJvcihcIkJhZCBwb3J0IG51bWJlciBcIitiKTthLnM9Yjt9ZWxzZSBhLnM9bnVsbDt9ZnVuY3Rpb24gdGMoYSxiLGMpe2IgaW5zdGFuY2VvZiBzYz8oYS5pPWIsQWMoYS5pLGEuaCkpOihjfHwoYj12YyhiLEJjKSksYS5pPW5ldyBzYyhiLGEuaCkpO31mdW5jdGlvbiBTKGEsYixjKXthLmkuc2V0KGIsYyk7fWZ1bmN0aW9uIEliKGEpe1MoYSxcInp4XCIsTWF0aC5mbG9vcigyMTQ3NDgzNjQ4Kk1hdGgucmFuZG9tKCkpLnRvU3RyaW5nKDM2KStNYXRoLmFicyhNYXRoLmZsb29yKDIxNDc0ODM2NDgqTWF0aC5yYW5kb20oKSleRGF0ZS5ub3coKSkudG9TdHJpbmcoMzYpKTtyZXR1cm4gYX1cbmZ1bmN0aW9uIHVjKGEsYil7cmV0dXJuIGE/Yj9kZWNvZGVVUkkoYS5yZXBsYWNlKC8lMjUvZyxcIiUyNTI1XCIpKTpkZWNvZGVVUklDb21wb25lbnQoYSk6XCJcIn1mdW5jdGlvbiB2YyhhLGIsYyl7cmV0dXJuIFwic3RyaW5nXCI9PT10eXBlb2YgYT8oYT1lbmNvZGVVUkkoYSkucmVwbGFjZShiLENjKSxjJiYoYT1hLnJlcGxhY2UoLyUyNShbMC05YS1mQS1GXXsyfSkvZyxcIiUkMVwiKSksYSk6bnVsbH1mdW5jdGlvbiBDYyhhKXthPWEuY2hhckNvZGVBdCgwKTtyZXR1cm4gXCIlXCIrKGE+PjQmMTUpLnRvU3RyaW5nKDE2KSsoYSYxNSkudG9TdHJpbmcoMTYpfXZhciB3Yz0vWyNcXC9cXD9AXS9nLHljPS9bI1xcPzpdL2cseGM9L1sjXFw/XS9nLEJjPS9bI1xcP0BdL2csemM9LyMvZztmdW5jdGlvbiBzYyhhLGIpe3RoaXMuaD10aGlzLmc9bnVsbDt0aGlzLmk9YXx8bnVsbDt0aGlzLmo9ISFiO31cbmZ1bmN0aW9uIFUoYSl7YS5nfHwoYS5nPW5ldyBNYXAsYS5oPTAsYS5pJiZwYyhhLmksZnVuY3Rpb24oYixjKXthLmFkZChkZWNvZGVVUklDb21wb25lbnQoYi5yZXBsYWNlKC9cXCsvZyxcIiBcIikpLGMpO30pKTt9aD1zYy5wcm90b3R5cGU7aC5hZGQ9ZnVuY3Rpb24oYSxiKXtVKHRoaXMpO3RoaXMuaT1udWxsO2E9Vih0aGlzLGEpO3ZhciBjPXRoaXMuZy5nZXQoYSk7Y3x8dGhpcy5nLnNldChhLGM9W10pO2MucHVzaChiKTt0aGlzLmgrPTE7cmV0dXJuIHRoaXN9O2Z1bmN0aW9uIERjKGEsYil7VShhKTtiPVYoYSxiKTthLmcuaGFzKGIpJiYoYS5pPW51bGwsYS5oLT1hLmcuZ2V0KGIpLmxlbmd0aCxhLmcuZGVsZXRlKGIpKTt9ZnVuY3Rpb24gRWMoYSxiKXtVKGEpO2I9VihhLGIpO3JldHVybiBhLmcuaGFzKGIpfVxuaC5mb3JFYWNoPWZ1bmN0aW9uKGEsYil7VSh0aGlzKTt0aGlzLmcuZm9yRWFjaChmdW5jdGlvbihjLGQpe2MuZm9yRWFjaChmdW5jdGlvbihlKXthLmNhbGwoYixlLGQsdGhpcyk7fSx0aGlzKTt9LHRoaXMpO307aC5uYT1mdW5jdGlvbigpe1UodGhpcyk7Y29uc3QgYT1BcnJheS5mcm9tKHRoaXMuZy52YWx1ZXMoKSksYj1BcnJheS5mcm9tKHRoaXMuZy5rZXlzKCkpLGM9W107Zm9yKGxldCBkPTA7ZDxiLmxlbmd0aDtkKyspe2NvbnN0IGU9YVtkXTtmb3IobGV0IGY9MDtmPGUubGVuZ3RoO2YrKyljLnB1c2goYltkXSk7fXJldHVybiBjfTtoLlY9ZnVuY3Rpb24oYSl7VSh0aGlzKTtsZXQgYj1bXTtpZihcInN0cmluZ1wiPT09dHlwZW9mIGEpRWModGhpcyxhKSYmKGI9Yi5jb25jYXQodGhpcy5nLmdldChWKHRoaXMsYSkpKSk7ZWxzZSB7YT1BcnJheS5mcm9tKHRoaXMuZy52YWx1ZXMoKSk7Zm9yKGxldCBjPTA7YzxhLmxlbmd0aDtjKyspYj1iLmNvbmNhdChhW2NdKTt9cmV0dXJuIGJ9O1xuaC5zZXQ9ZnVuY3Rpb24oYSxiKXtVKHRoaXMpO3RoaXMuaT1udWxsO2E9Vih0aGlzLGEpO0VjKHRoaXMsYSkmJih0aGlzLmgtPXRoaXMuZy5nZXQoYSkubGVuZ3RoKTt0aGlzLmcuc2V0KGEsW2JdKTt0aGlzLmgrPTE7cmV0dXJuIHRoaXN9O2guZ2V0PWZ1bmN0aW9uKGEsYil7aWYoIWEpcmV0dXJuIGI7YT10aGlzLlYoYSk7cmV0dXJuIDA8YS5sZW5ndGg/U3RyaW5nKGFbMF0pOmJ9O2Z1bmN0aW9uIExiKGEsYixjKXtEYyhhLGIpOzA8Yy5sZW5ndGgmJihhLmk9bnVsbCxhLmcuc2V0KFYoYSxiKSxsYShjKSksYS5oKz1jLmxlbmd0aCk7fVxuaC50b1N0cmluZz1mdW5jdGlvbigpe2lmKHRoaXMuaSlyZXR1cm4gdGhpcy5pO2lmKCF0aGlzLmcpcmV0dXJuIFwiXCI7Y29uc3QgYT1bXSxiPUFycmF5LmZyb20odGhpcy5nLmtleXMoKSk7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspe3ZhciBkPWJbY107Y29uc3QgZj1lbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGQpKSxnPXRoaXMuVihkKTtmb3IoZD0wO2Q8Zy5sZW5ndGg7ZCsrKXt2YXIgZT1mO1wiXCIhPT1nW2RdJiYoZSs9XCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhnW2RdKSkpO2EucHVzaChlKTt9fXJldHVybiB0aGlzLmk9YS5qb2luKFwiJlwiKX07ZnVuY3Rpb24gVihhLGIpe2I9U3RyaW5nKGIpO2EuaiYmKGI9Yi50b0xvd2VyQ2FzZSgpKTtyZXR1cm4gYn1cbmZ1bmN0aW9uIEFjKGEsYil7YiYmIWEuaiYmKFUoYSksYS5pPW51bGwsYS5nLmZvckVhY2goZnVuY3Rpb24oYyxkKXt2YXIgZT1kLnRvTG93ZXJDYXNlKCk7ZCE9ZSYmKERjKHRoaXMsZCksTGIodGhpcyxlLGMpKTt9LGEpKTthLmo9Yjt9ZnVuY3Rpb24gRmMoYSxiKXtjb25zdCBjPW5ldyB2YjtpZihrLkltYWdlKXtjb25zdCBkPW5ldyBJbWFnZTtkLm9ubG9hZD1rYShXLGMsXCJUZXN0TG9hZEltYWdlOiBsb2FkZWRcIiwhMCxiLGQpO2Qub25lcnJvcj1rYShXLGMsXCJUZXN0TG9hZEltYWdlOiBlcnJvclwiLCExLGIsZCk7ZC5vbmFib3J0PWthKFcsYyxcIlRlc3RMb2FkSW1hZ2U6IGFib3J0XCIsITEsYixkKTtkLm9udGltZW91dD1rYShXLGMsXCJUZXN0TG9hZEltYWdlOiB0aW1lb3V0XCIsITEsYixkKTtrLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtpZihkLm9udGltZW91dClkLm9udGltZW91dCgpO30sMUU0KTtkLnNyYz1hO31lbHNlIGIoITEpO31cbmZ1bmN0aW9uIEdjKGEsYil7Y29uc3QgYz1uZXcgdmIsZD1uZXcgQWJvcnRDb250cm9sbGVyLGU9c2V0VGltZW91dCgoKT0+e2QuYWJvcnQoKTtXKGMsXCJUZXN0UGluZ1NlcnZlcjogdGltZW91dFwiLCExLGIpO30sMUU0KTtmZXRjaChhLHtzaWduYWw6ZC5zaWduYWx9KS50aGVuKGY9PntjbGVhclRpbWVvdXQoZSk7Zi5vaz9XKGMsXCJUZXN0UGluZ1NlcnZlcjogb2tcIiwhMCxiKTpXKGMsXCJUZXN0UGluZ1NlcnZlcjogc2VydmVyIGVycm9yXCIsITEsYik7fSkuY2F0Y2goKCk9PntjbGVhclRpbWVvdXQoZSk7VyhjLFwiVGVzdFBpbmdTZXJ2ZXI6IGVycm9yXCIsITEsYik7fSk7fWZ1bmN0aW9uIFcoYSxiLGMsZCxlKXt0cnl7ZSYmKGUub25sb2FkPW51bGwsZS5vbmVycm9yPW51bGwsZS5vbmFib3J0PW51bGwsZS5vbnRpbWVvdXQ9bnVsbCksZChjKTt9Y2F0Y2goZil7fX1mdW5jdGlvbiBIYygpe3RoaXMuZz1uZXcgamI7fWZ1bmN0aW9uIEljKGEsYixjKXtjb25zdCBkPWN8fFwiXCI7dHJ5e25jKGEsZnVuY3Rpb24oZSxmKXtsZXQgZz1lO24oZSkmJihnPWhiKGUpKTtiLnB1c2goZCtmK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudChnKSk7fSk7fWNhdGNoKGUpe3Rocm93IGIucHVzaChkK1widHlwZT1cIitlbmNvZGVVUklDb21wb25lbnQoXCJfYmFkbWFwXCIpKSxlO319ZnVuY3Rpb24gSmMoYSl7dGhpcy5sPWEuVWJ8fG51bGw7dGhpcy5qPWEuZWJ8fCExO31yKEpjLGtiKTtKYy5wcm90b3R5cGUuZz1mdW5jdGlvbigpe3JldHVybiBuZXcgS2ModGhpcy5sLHRoaXMuail9O0pjLnByb3RvdHlwZS5pPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBhfX0oe30pO2Z1bmN0aW9uIEtjKGEsYil7RS5jYWxsKHRoaXMpO3RoaXMuRD1hO3RoaXMubz1iO3RoaXMubT12b2lkIDA7dGhpcy5zdGF0dXM9dGhpcy5yZWFkeVN0YXRlPTA7dGhpcy5yZXNwb25zZVR5cGU9dGhpcy5yZXNwb25zZVRleHQ9dGhpcy5yZXNwb25zZT10aGlzLnN0YXR1c1RleHQ9XCJcIjt0aGlzLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsO3RoaXMudT1uZXcgSGVhZGVyczt0aGlzLmg9bnVsbDt0aGlzLkI9XCJHRVRcIjt0aGlzLkE9XCJcIjt0aGlzLmc9ITE7dGhpcy52PXRoaXMuaj10aGlzLmw9bnVsbDt9cihLYyxFKTtoPUtjLnByb3RvdHlwZTtcbmgub3Blbj1mdW5jdGlvbihhLGIpe2lmKDAhPXRoaXMucmVhZHlTdGF0ZSl0aHJvdyB0aGlzLmFib3J0KCksRXJyb3IoXCJFcnJvciByZW9wZW5pbmcgYSBjb25uZWN0aW9uXCIpO3RoaXMuQj1hO3RoaXMuQT1iO3RoaXMucmVhZHlTdGF0ZT0xO0xjKHRoaXMpO307aC5zZW5kPWZ1bmN0aW9uKGEpe2lmKDEhPXRoaXMucmVhZHlTdGF0ZSl0aHJvdyB0aGlzLmFib3J0KCksRXJyb3IoXCJuZWVkIHRvIGNhbGwgb3BlbigpIGZpcnN0LiBcIik7dGhpcy5nPSEwO2NvbnN0IGI9e2hlYWRlcnM6dGhpcy51LG1ldGhvZDp0aGlzLkIsY3JlZGVudGlhbHM6dGhpcy5tLGNhY2hlOnZvaWQgMH07YSYmKGIuYm9keT1hKTsodGhpcy5EfHxrKS5mZXRjaChuZXcgUmVxdWVzdCh0aGlzLkEsYikpLnRoZW4odGhpcy5TYS5iaW5kKHRoaXMpLHRoaXMuZ2EuYmluZCh0aGlzKSk7fTtcbmguYWJvcnQ9ZnVuY3Rpb24oKXt0aGlzLnJlc3BvbnNlPXRoaXMucmVzcG9uc2VUZXh0PVwiXCI7dGhpcy51PW5ldyBIZWFkZXJzO3RoaXMuc3RhdHVzPTA7dGhpcy5qJiZ0aGlzLmouY2FuY2VsKFwiUmVxdWVzdCB3YXMgYWJvcnRlZC5cIikuY2F0Y2goKCk9Pnt9KTsxPD10aGlzLnJlYWR5U3RhdGUmJnRoaXMuZyYmNCE9dGhpcy5yZWFkeVN0YXRlJiYodGhpcy5nPSExLE1jKHRoaXMpKTt0aGlzLnJlYWR5U3RhdGU9MDt9O1xuaC5TYT1mdW5jdGlvbihhKXtpZih0aGlzLmcmJih0aGlzLmw9YSx0aGlzLmh8fCh0aGlzLnN0YXR1cz10aGlzLmwuc3RhdHVzLHRoaXMuc3RhdHVzVGV4dD10aGlzLmwuc3RhdHVzVGV4dCx0aGlzLmg9YS5oZWFkZXJzLHRoaXMucmVhZHlTdGF0ZT0yLExjKHRoaXMpKSx0aGlzLmcmJih0aGlzLnJlYWR5U3RhdGU9MyxMYyh0aGlzKSx0aGlzLmcpKSlpZihcImFycmF5YnVmZmVyXCI9PT10aGlzLnJlc3BvbnNlVHlwZSlhLmFycmF5QnVmZmVyKCkudGhlbih0aGlzLlFhLmJpbmQodGhpcyksdGhpcy5nYS5iaW5kKHRoaXMpKTtlbHNlIGlmKFwidW5kZWZpbmVkXCIhPT10eXBlb2Ygay5SZWFkYWJsZVN0cmVhbSYmXCJib2R5XCJpbiBhKXt0aGlzLmo9YS5ib2R5LmdldFJlYWRlcigpO2lmKHRoaXMubyl7aWYodGhpcy5yZXNwb25zZVR5cGUpdGhyb3cgRXJyb3IoJ3Jlc3BvbnNlVHlwZSBtdXN0IGJlIGVtcHR5IGZvciBcInN0cmVhbUJpbmFyeUNodW5rc1wiIG1vZGUgcmVzcG9uc2VzLicpO3RoaXMucmVzcG9uc2U9XG5bXTt9ZWxzZSB0aGlzLnJlc3BvbnNlPXRoaXMucmVzcG9uc2VUZXh0PVwiXCIsdGhpcy52PW5ldyBUZXh0RGVjb2RlcjtOYyh0aGlzKTt9ZWxzZSBhLnRleHQoKS50aGVuKHRoaXMuUmEuYmluZCh0aGlzKSx0aGlzLmdhLmJpbmQodGhpcykpO307ZnVuY3Rpb24gTmMoYSl7YS5qLnJlYWQoKS50aGVuKGEuUGEuYmluZChhKSkuY2F0Y2goYS5nYS5iaW5kKGEpKTt9aC5QYT1mdW5jdGlvbihhKXtpZih0aGlzLmcpe2lmKHRoaXMubyYmYS52YWx1ZSl0aGlzLnJlc3BvbnNlLnB1c2goYS52YWx1ZSk7ZWxzZSBpZighdGhpcy5vKXt2YXIgYj1hLnZhbHVlP2EudmFsdWU6bmV3IFVpbnQ4QXJyYXkoMCk7aWYoYj10aGlzLnYuZGVjb2RlKGIse3N0cmVhbTohYS5kb25lfSkpdGhpcy5yZXNwb25zZT10aGlzLnJlc3BvbnNlVGV4dCs9Yjt9YS5kb25lP01jKHRoaXMpOkxjKHRoaXMpOzM9PXRoaXMucmVhZHlTdGF0ZSYmTmModGhpcyk7fX07XG5oLlJhPWZ1bmN0aW9uKGEpe3RoaXMuZyYmKHRoaXMucmVzcG9uc2U9dGhpcy5yZXNwb25zZVRleHQ9YSxNYyh0aGlzKSk7fTtoLlFhPWZ1bmN0aW9uKGEpe3RoaXMuZyYmKHRoaXMucmVzcG9uc2U9YSxNYyh0aGlzKSk7fTtoLmdhPWZ1bmN0aW9uKCl7dGhpcy5nJiZNYyh0aGlzKTt9O2Z1bmN0aW9uIE1jKGEpe2EucmVhZHlTdGF0ZT00O2EubD1udWxsO2Euaj1udWxsO2Eudj1udWxsO0xjKGEpO31oLnNldFJlcXVlc3RIZWFkZXI9ZnVuY3Rpb24oYSxiKXt0aGlzLnUuYXBwZW5kKGEsYik7fTtoLmdldFJlc3BvbnNlSGVhZGVyPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmg/dGhpcy5oLmdldChhLnRvTG93ZXJDYXNlKCkpfHxcIlwiOlwiXCJ9O1xuaC5nZXRBbGxSZXNwb25zZUhlYWRlcnM9ZnVuY3Rpb24oKXtpZighdGhpcy5oKXJldHVybiBcIlwiO2NvbnN0IGE9W10sYj10aGlzLmguZW50cmllcygpO2Zvcih2YXIgYz1iLm5leHQoKTshYy5kb25lOyljPWMudmFsdWUsYS5wdXNoKGNbMF0rXCI6IFwiK2NbMV0pLGM9Yi5uZXh0KCk7cmV0dXJuIGEuam9pbihcIlxcclxcblwiKX07ZnVuY3Rpb24gTGMoYSl7YS5vbnJlYWR5c3RhdGVjaGFuZ2UmJmEub25yZWFkeXN0YXRlY2hhbmdlLmNhbGwoYSk7fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShLYy5wcm90b3R5cGUsXCJ3aXRoQ3JlZGVudGlhbHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFwiaW5jbHVkZVwiPT09dGhpcy5tfSxzZXQ6ZnVuY3Rpb24oYSl7dGhpcy5tPWE/XCJpbmNsdWRlXCI6XCJzYW1lLW9yaWdpblwiO319KTtmdW5jdGlvbiBPYyhhKXtsZXQgYj1cIlwiO3FhKGEsZnVuY3Rpb24oYyxkKXtiKz1kO2IrPVwiOlwiO2IrPWM7Yis9XCJcXHJcXG5cIjt9KTtyZXR1cm4gYn1mdW5jdGlvbiBQYyhhLGIsYyl7YTp7Zm9yKGQgaW4gYyl7dmFyIGQ9ITE7YnJlYWsgYX1kPSEwO31kfHwoYz1PYyhjKSxcInN0cmluZ1wiPT09dHlwZW9mIGE/KG51bGwhPWMmJmVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoYykpKTpTKGEsYixjKSk7fWZ1bmN0aW9uIFgoYSl7RS5jYWxsKHRoaXMpO3RoaXMuaGVhZGVycz1uZXcgTWFwO3RoaXMubz1hfHxudWxsO3RoaXMuaD0hMTt0aGlzLnY9dGhpcy5nPW51bGw7dGhpcy5EPVwiXCI7dGhpcy5tPTA7dGhpcy5sPVwiXCI7dGhpcy5qPXRoaXMuQj10aGlzLnU9dGhpcy5BPSExO3RoaXMuST1udWxsO3RoaXMuSD1cIlwiO3RoaXMuSj0hMTt9cihYLEUpO3ZhciBRYz0vXmh0dHBzPyQvaSxSYz1bXCJQT1NUXCIsXCJQVVRcIl07aD1YLnByb3RvdHlwZTtoLkhhPWZ1bmN0aW9uKGEpe3RoaXMuSj1hO307XG5oLmVhPWZ1bmN0aW9uKGEsYixjLGQpe2lmKHRoaXMuZyl0aHJvdyBFcnJvcihcIltnb29nLm5ldC5YaHJJb10gT2JqZWN0IGlzIGFjdGl2ZSB3aXRoIGFub3RoZXIgcmVxdWVzdD1cIit0aGlzLkQrXCI7IG5ld1VyaT1cIithKTtiPWI/Yi50b1VwcGVyQ2FzZSgpOlwiR0VUXCI7dGhpcy5EPWE7dGhpcy5sPVwiXCI7dGhpcy5tPTA7dGhpcy5BPSExO3RoaXMuaD0hMDt0aGlzLmc9dGhpcy5vP3RoaXMuby5nKCk6Q2IuZygpO3RoaXMudj10aGlzLm8/bGIodGhpcy5vKTpsYihDYik7dGhpcy5nLm9ucmVhZHlzdGF0ZWNoYW5nZT1wKHRoaXMuRWEsdGhpcyk7dHJ5e3RoaXMuQj0hMCx0aGlzLmcub3BlbihiLFN0cmluZyhhKSwhMCksdGhpcy5CPSExO31jYXRjaChmKXtTYyh0aGlzLGYpO3JldHVybn1hPWN8fFwiXCI7Yz1uZXcgTWFwKHRoaXMuaGVhZGVycyk7aWYoZClpZihPYmplY3QuZ2V0UHJvdG90eXBlT2YoZCk9PT1PYmplY3QucHJvdG90eXBlKWZvcih2YXIgZSBpbiBkKWMuc2V0KGUsZFtlXSk7ZWxzZSBpZihcImZ1bmN0aW9uXCI9PT1cbnR5cGVvZiBkLmtleXMmJlwiZnVuY3Rpb25cIj09PXR5cGVvZiBkLmdldClmb3IoY29uc3QgZiBvZiBkLmtleXMoKSljLnNldChmLGQuZ2V0KGYpKTtlbHNlIHRocm93IEVycm9yKFwiVW5rbm93biBpbnB1dCB0eXBlIGZvciBvcHRfaGVhZGVyczogXCIrU3RyaW5nKGQpKTtkPUFycmF5LmZyb20oYy5rZXlzKCkpLmZpbmQoZj0+XCJjb250ZW50LXR5cGVcIj09Zi50b0xvd2VyQ2FzZSgpKTtlPWsuRm9ybURhdGEmJmEgaW5zdGFuY2VvZiBrLkZvcm1EYXRhOyEoMDw9QXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChSYyxiLHZvaWQgMCkpfHxkfHxlfHxjLnNldChcIkNvbnRlbnQtVHlwZVwiLFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9dXRmLThcIik7Zm9yKGNvbnN0IFtmLGddb2YgYyl0aGlzLmcuc2V0UmVxdWVzdEhlYWRlcihmLGcpO3RoaXMuSCYmKHRoaXMuZy5yZXNwb25zZVR5cGU9dGhpcy5IKTtcIndpdGhDcmVkZW50aWFsc1wiaW4gdGhpcy5nJiZ0aGlzLmcud2l0aENyZWRlbnRpYWxzIT09XG50aGlzLkomJih0aGlzLmcud2l0aENyZWRlbnRpYWxzPXRoaXMuSik7dHJ5e1RjKHRoaXMpLHRoaXMudT0hMCx0aGlzLmcuc2VuZChhKSx0aGlzLnU9ITE7fWNhdGNoKGYpe1NjKHRoaXMsZik7fX07ZnVuY3Rpb24gU2MoYSxiKXthLmg9ITE7YS5nJiYoYS5qPSEwLGEuZy5hYm9ydCgpLGEuaj0hMSk7YS5sPWI7YS5tPTU7VWMoYSk7VmMoYSk7fWZ1bmN0aW9uIFVjKGEpe2EuQXx8KGEuQT0hMCxGKGEsXCJjb21wbGV0ZVwiKSxGKGEsXCJlcnJvclwiKSk7fWguYWJvcnQ9ZnVuY3Rpb24oYSl7dGhpcy5nJiZ0aGlzLmgmJih0aGlzLmg9ITEsdGhpcy5qPSEwLHRoaXMuZy5hYm9ydCgpLHRoaXMuaj0hMSx0aGlzLm09YXx8NyxGKHRoaXMsXCJjb21wbGV0ZVwiKSxGKHRoaXMsXCJhYm9ydFwiKSxWYyh0aGlzKSk7fTtoLk49ZnVuY3Rpb24oKXt0aGlzLmcmJih0aGlzLmgmJih0aGlzLmg9ITEsdGhpcy5qPSEwLHRoaXMuZy5hYm9ydCgpLHRoaXMuaj0hMSksVmModGhpcywhMCkpO1guYWEuTi5jYWxsKHRoaXMpO307XG5oLkVhPWZ1bmN0aW9uKCl7dGhpcy5zfHwodGhpcy5CfHx0aGlzLnV8fHRoaXMuaj9XYyh0aGlzKTp0aGlzLmJiKCkpO307aC5iYj1mdW5jdGlvbigpe1djKHRoaXMpO307XG5mdW5jdGlvbiBXYyhhKXtpZihhLmgmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBmYSYmKCFhLnZbMV18fDQhPVAoYSl8fDIhPWEuWigpKSlpZihhLnUmJjQ9PVAoYSkpYmIoYS5FYSwwLGEpO2Vsc2UgaWYoRihhLFwicmVhZHlzdGF0ZWNoYW5nZVwiKSw0PT1QKGEpKXthLmg9ITE7dHJ5e2NvbnN0IGc9YS5aKCk7YTpzd2l0Y2goZyl7Y2FzZSAyMDA6Y2FzZSAyMDE6Y2FzZSAyMDI6Y2FzZSAyMDQ6Y2FzZSAyMDY6Y2FzZSAzMDQ6Y2FzZSAxMjIzOnZhciBiPSEwO2JyZWFrIGE7ZGVmYXVsdDpiPSExO312YXIgYztpZighKGM9Yikpe3ZhciBkO2lmKGQ9MD09PWcpe3ZhciBlPVN0cmluZyhhLkQpLm1hdGNoKG9jKVsxXXx8bnVsbDshZSYmay5zZWxmJiZrLnNlbGYubG9jYXRpb24mJihlPWsuc2VsZi5sb2NhdGlvbi5wcm90b2NvbC5zbGljZSgwLC0xKSk7ZD0hUWMudGVzdChlP2UudG9Mb3dlckNhc2UoKTpcIlwiKTt9Yz1kO31pZihjKUYoYSxcImNvbXBsZXRlXCIpLEYoYSxcInN1Y2Nlc3NcIik7ZWxzZSB7YS5tPVxuNjt0cnl7dmFyIGY9MjxQKGEpP2EuZy5zdGF0dXNUZXh0OlwiXCI7fWNhdGNoKG0pe2Y9XCJcIjt9YS5sPWYrXCIgW1wiK2EuWigpK1wiXVwiO1VjKGEpO319ZmluYWxseXtWYyhhKTt9fX1mdW5jdGlvbiBWYyhhLGIpe2lmKGEuZyl7VGMoYSk7Y29uc3QgYz1hLmcsZD1hLnZbMF0/KCk9Pnt9Om51bGw7YS5nPW51bGw7YS52PW51bGw7Ynx8RihhLFwicmVhZHlcIik7dHJ5e2Mub25yZWFkeXN0YXRlY2hhbmdlPWQ7fWNhdGNoKGUpe319fWZ1bmN0aW9uIFRjKGEpe2EuSSYmKGsuY2xlYXJUaW1lb3V0KGEuSSksYS5JPW51bGwpO31oLmlzQWN0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuICEhdGhpcy5nfTtmdW5jdGlvbiBQKGEpe3JldHVybiBhLmc/YS5nLnJlYWR5U3RhdGU6MH1oLlo9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIDI8UCh0aGlzKT90aGlzLmcuc3RhdHVzOi0xfWNhdGNoKGEpe3JldHVybiAtMX19O2gub2E9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIHRoaXMuZz90aGlzLmcucmVzcG9uc2VUZXh0OlwiXCJ9Y2F0Y2goYSl7cmV0dXJuIFwiXCJ9fTtcbmguT2E9ZnVuY3Rpb24oYSl7aWYodGhpcy5nKXt2YXIgYj10aGlzLmcucmVzcG9uc2VUZXh0O2EmJjA9PWIuaW5kZXhPZihhKSYmKGI9Yi5zdWJzdHJpbmcoYS5sZW5ndGgpKTtyZXR1cm4gaWIoYil9fTtmdW5jdGlvbiBOYihhKXt0cnl7aWYoIWEuZylyZXR1cm4gbnVsbDtpZihcInJlc3BvbnNlXCJpbiBhLmcpcmV0dXJuIGEuZy5yZXNwb25zZTtzd2l0Y2goYS5IKXtjYXNlIFwiXCI6Y2FzZSBcInRleHRcIjpyZXR1cm4gYS5nLnJlc3BvbnNlVGV4dDtjYXNlIFwiYXJyYXlidWZmZXJcIjppZihcIm1velJlc3BvbnNlQXJyYXlCdWZmZXJcImluIGEuZylyZXR1cm4gYS5nLm1velJlc3BvbnNlQXJyYXlCdWZmZXJ9cmV0dXJuIG51bGx9Y2F0Y2goYil7cmV0dXJuIG51bGx9fVxuZnVuY3Rpb24gVmIoYSl7Y29uc3QgYj17fTthPShhLmcmJjI8PVAoYSk/YS5nLmdldEFsbFJlc3BvbnNlSGVhZGVycygpfHxcIlwiOlwiXCIpLnNwbGl0KFwiXFxyXFxuXCIpO2ZvcihsZXQgZD0wO2Q8YS5sZW5ndGg7ZCsrKXtpZih0KGFbZF0pKWNvbnRpbnVlO3ZhciBjPXZhKGFbZF0pO2NvbnN0IGU9Y1swXTtjPWNbMV07aWYoXCJzdHJpbmdcIiE9PXR5cGVvZiBjKWNvbnRpbnVlO2M9Yy50cmltKCk7Y29uc3QgZj1iW2VdfHxbXTtiW2VdPWY7Zi5wdXNoKGMpO31yYShiLGZ1bmN0aW9uKGQpe3JldHVybiBkLmpvaW4oXCIsIFwiKX0pO31oLkJhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubX07aC5LYT1mdW5jdGlvbigpe3JldHVybiBcInN0cmluZ1wiPT09dHlwZW9mIHRoaXMubD90aGlzLmw6U3RyaW5nKHRoaXMubCl9O2Z1bmN0aW9uIFhjKGEsYixjKXtyZXR1cm4gYyYmYy5pbnRlcm5hbENoYW5uZWxQYXJhbXM/Yy5pbnRlcm5hbENoYW5uZWxQYXJhbXNbYV18fGI6Yn1cbmZ1bmN0aW9uIFljKGEpe3RoaXMuQWE9MDt0aGlzLmk9W107dGhpcy5qPW5ldyB2Yjt0aGlzLmlhPXRoaXMucWE9dGhpcy5JPXRoaXMuVz10aGlzLmc9dGhpcy55YT10aGlzLkQ9dGhpcy5IPXRoaXMubT10aGlzLlM9dGhpcy5vPW51bGw7dGhpcy5ZYT10aGlzLlU9MDt0aGlzLlZhPVhjKFwiZmFpbEZhc3RcIiwhMSxhKTt0aGlzLkY9dGhpcy5DPXRoaXMudT10aGlzLnM9dGhpcy5sPW51bGw7dGhpcy5YPSEwO3RoaXMuemE9dGhpcy5UPS0xO3RoaXMuWT10aGlzLnY9dGhpcy5CPTA7dGhpcy5UYT1YYyhcImJhc2VSZXRyeURlbGF5TXNcIiw1RTMsYSk7dGhpcy5jYj1YYyhcInJldHJ5RGVsYXlTZWVkTXNcIiwxRTQsYSk7dGhpcy5XYT1YYyhcImZvcndhcmRDaGFubmVsTWF4UmV0cmllc1wiLDIsYSk7dGhpcy53YT1YYyhcImZvcndhcmRDaGFubmVsUmVxdWVzdFRpbWVvdXRNc1wiLDJFNCxhKTt0aGlzLnBhPWEmJmEueG1sSHR0cEZhY3Rvcnl8fHZvaWQgMDt0aGlzLlhhPWEmJmEuVGJ8fHZvaWQgMDt0aGlzLkNhPVxuYSYmYS51c2VGZXRjaFN0cmVhbXN8fCExO3RoaXMuTD12b2lkIDA7dGhpcy5KPWEmJmEuc3VwcG9ydHNDcm9zc0RvbWFpblhocnx8ITE7dGhpcy5LPVwiXCI7dGhpcy5oPW5ldyBpYyhhJiZhLmNvbmN1cnJlbnRSZXF1ZXN0TGltaXQpO3RoaXMuRGE9bmV3IEhjO3RoaXMuUD1hJiZhLmZhc3RIYW5kc2hha2V8fCExO3RoaXMuTz1hJiZhLmVuY29kZUluaXRNZXNzYWdlSGVhZGVyc3x8ITE7dGhpcy5QJiZ0aGlzLk8mJih0aGlzLk89ITEpO3RoaXMuVWE9YSYmYS5SYnx8ITE7YSYmYS54YSYmdGhpcy5qLnhhKCk7YSYmYS5mb3JjZUxvbmdQb2xsaW5nJiYodGhpcy5YPSExKTt0aGlzLmJhPSF0aGlzLlAmJnRoaXMuWCYmYSYmYS5kZXRlY3RCdWZmZXJpbmdQcm94eXx8ITE7dGhpcy5qYT12b2lkIDA7YSYmYS5sb25nUG9sbGluZ1RpbWVvdXQmJjA8YS5sb25nUG9sbGluZ1RpbWVvdXQmJih0aGlzLmphPWEubG9uZ1BvbGxpbmdUaW1lb3V0KTt0aGlzLmNhPXZvaWQgMDt0aGlzLlI9MDt0aGlzLk09XG4hMTt0aGlzLmthPXRoaXMuQT1udWxsO31oPVljLnByb3RvdHlwZTtoLmxhPTg7aC5HPTE7aC5jb25uZWN0PWZ1bmN0aW9uKGEsYixjLGQpe0soMCk7dGhpcy5XPWE7dGhpcy5IPWJ8fHt9O2MmJnZvaWQgMCE9PWQmJih0aGlzLkguT1NJRD1jLHRoaXMuSC5PQUlEPWQpO3RoaXMuRj10aGlzLlg7dGhpcy5JPWNjKHRoaXMsbnVsbCx0aGlzLlcpO2ZjKHRoaXMpO307XG5mdW5jdGlvbiBnYyhhKXtaYyhhKTtpZigzPT1hLkcpe3ZhciBiPWEuVSsrLGM9TihhLkkpO1MoYyxcIlNJRFwiLGEuSyk7UyhjLFwiUklEXCIsYik7UyhjLFwiVFlQRVwiLFwidGVybWluYXRlXCIpOyRjKGEsYyk7Yj1uZXcgTShhLGEuaixiKTtiLkw9MjtiLnY9SWIoTihjKSk7Yz0hMTtpZihrLm5hdmlnYXRvciYmay5uYXZpZ2F0b3Iuc2VuZEJlYWNvbil0cnl7Yz1rLm5hdmlnYXRvci5zZW5kQmVhY29uKGIudi50b1N0cmluZygpLFwiXCIpO31jYXRjaChkKXt9IWMmJmsuSW1hZ2UmJigobmV3IEltYWdlKS5zcmM9Yi52LGM9ITApO2N8fChiLmc9TWIoYi5qLG51bGwpLGIuZy5lYShiLnYpKTtiLkY9RGF0ZS5ub3coKTtLYihiKTt9YWQoYSk7fWZ1bmN0aW9uIFpiKGEpe2EuZyYmKFRiKGEpLGEuZy5jYW5jZWwoKSxhLmc9bnVsbCk7fVxuZnVuY3Rpb24gWmMoYSl7WmIoYSk7YS51JiYoay5jbGVhclRpbWVvdXQoYS51KSxhLnU9bnVsbCk7WWIoYSk7YS5oLmNhbmNlbCgpO2EucyYmKFwibnVtYmVyXCI9PT10eXBlb2YgYS5zJiZrLmNsZWFyVGltZW91dChhLnMpLGEucz1udWxsKTt9ZnVuY3Rpb24gZmMoYSl7aWYoIWpjKGEuaCkmJiFhLnMpe2Eucz0hMDt2YXIgYj1hLkdhO3h8fEVhKCk7eXx8KHgoKSx5PSEwKTt6YS5hZGQoYixhKTthLkI9MDt9fWZ1bmN0aW9uIGJkKGEsYil7aWYoYWMoYS5oKT49YS5oLmotKGEucz8xOjApKXJldHVybiAhMTtpZihhLnMpcmV0dXJuIGEuaT1iLkQuY29uY2F0KGEuaSksITA7aWYoMT09YS5HfHwyPT1hLkd8fGEuQj49KGEuVmE/MDphLldhKSlyZXR1cm4gITE7YS5zPXViKHAoYS5HYSxhLGIpLGNkKGEsYS5CKSk7YS5CKys7cmV0dXJuICEwfVxuaC5HYT1mdW5jdGlvbihhKXtpZih0aGlzLnMpaWYodGhpcy5zPW51bGwsMT09dGhpcy5HKXtpZighYSl7dGhpcy5VPU1hdGguZmxvb3IoMUU1Kk1hdGgucmFuZG9tKCkpO2E9dGhpcy5VKys7Y29uc3QgZT1uZXcgTSh0aGlzLHRoaXMuaixhKTtsZXQgZj10aGlzLm87dGhpcy5TJiYoZj8oZj1zYShmKSx1YShmLHRoaXMuUykpOmY9dGhpcy5TKTtudWxsIT09dGhpcy5tfHx0aGlzLk98fChlLkg9ZixmPW51bGwpO2lmKHRoaXMuUClhOnt2YXIgYj0wO2Zvcih2YXIgYz0wO2M8dGhpcy5pLmxlbmd0aDtjKyspe2I6e3ZhciBkPXRoaXMuaVtjXTtpZihcIl9fZGF0YV9fXCJpbiBkLm1hcCYmKGQ9ZC5tYXAuX19kYXRhX18sXCJzdHJpbmdcIj09PXR5cGVvZiBkKSl7ZD1kLmxlbmd0aDticmVhayBifWQ9dm9pZCAwO31pZih2b2lkIDA9PT1kKWJyZWFrO2IrPWQ7aWYoNDA5NjxiKXtiPWM7YnJlYWsgYX1pZig0MDk2PT09Ynx8Yz09PXRoaXMuaS5sZW5ndGgtMSl7Yj1jKzE7YnJlYWsgYX19Yj0xRTM7fWVsc2UgYj1cbjFFMztiPWRkKHRoaXMsZSxiKTtjPU4odGhpcy5JKTtTKGMsXCJSSURcIixhKTtTKGMsXCJDVkVSXCIsMjIpO3RoaXMuRCYmUyhjLFwiWC1IVFRQLVNlc3Npb24tSWRcIix0aGlzLkQpOyRjKHRoaXMsYyk7ZiYmKHRoaXMuTz9iPVwiaGVhZGVycz1cIitlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKE9jKGYpKSkrXCImXCIrYjp0aGlzLm0mJlBjKGMsdGhpcy5tLGYpKTtiYyh0aGlzLmgsZSk7dGhpcy5VYSYmUyhjLFwiVFlQRVwiLFwiaW5pdFwiKTt0aGlzLlA/KFMoYyxcIiRyZXFcIixiKSxTKGMsXCJTSURcIixcIm51bGxcIiksZS5UPSEwLEhiKGUsYyxudWxsKSk6SGIoZSxjLGIpO3RoaXMuRz0yO319ZWxzZSAzPT10aGlzLkcmJihhP2VkKHRoaXMsYSk6MD09dGhpcy5pLmxlbmd0aHx8amModGhpcy5oKXx8ZWQodGhpcykpO307XG5mdW5jdGlvbiBlZChhLGIpe3ZhciBjO2I/Yz1iLmw6Yz1hLlUrKztjb25zdCBkPU4oYS5JKTtTKGQsXCJTSURcIixhLkspO1MoZCxcIlJJRFwiLGMpO1MoZCxcIkFJRFwiLGEuVCk7JGMoYSxkKTthLm0mJmEubyYmUGMoZCxhLm0sYS5vKTtjPW5ldyBNKGEsYS5qLGMsYS5CKzEpO251bGw9PT1hLm0mJihjLkg9YS5vKTtiJiYoYS5pPWIuRC5jb25jYXQoYS5pKSk7Yj1kZChhLGMsMUUzKTtjLkk9TWF0aC5yb3VuZCguNSphLndhKStNYXRoLnJvdW5kKC41KmEud2EqTWF0aC5yYW5kb20oKSk7YmMoYS5oLGMpO0hiKGMsZCxiKTt9ZnVuY3Rpb24gJGMoYSxiKXthLkgmJnFhKGEuSCxmdW5jdGlvbihjLGQpe1MoYixkLGMpO30pO2EubCYmbmMoe30sZnVuY3Rpb24oYyxkKXtTKGIsZCxjKTt9KTt9XG5mdW5jdGlvbiBkZChhLGIsYyl7Yz1NYXRoLm1pbihhLmkubGVuZ3RoLGMpO3ZhciBkPWEubD9wKGEubC5OYSxhLmwsYSk6bnVsbDthOnt2YXIgZT1hLmk7bGV0IGY9LTE7Zm9yKDs7KXtjb25zdCBnPVtcImNvdW50PVwiK2NdOy0xPT1mPzA8Yz8oZj1lWzBdLmcsZy5wdXNoKFwib2ZzPVwiK2YpKTpmPTA6Zy5wdXNoKFwib2ZzPVwiK2YpO2xldCBtPSEwO2ZvcihsZXQgcT0wO3E8YztxKyspe2xldCBsPWVbcV0uZztjb25zdCB2PWVbcV0ubWFwO2wtPWY7aWYoMD5sKWY9TWF0aC5tYXgoMCxlW3FdLmctMTAwKSxtPSExO2Vsc2UgdHJ5e0ljKHYsZyxcInJlcVwiK2wrXCJfXCIpO31jYXRjaCh3KXtkJiZkKHYpO319aWYobSl7ZD1nLmpvaW4oXCImXCIpO2JyZWFrIGF9fX1hPWEuaS5zcGxpY2UoMCxjKTtiLkQ9YTtyZXR1cm4gZH1mdW5jdGlvbiBlYyhhKXtpZighYS5nJiYhYS51KXthLlk9MTt2YXIgYj1hLkZhO3h8fEVhKCk7eXx8KHgoKSx5PSEwKTt6YS5hZGQoYixhKTthLnY9MDt9fVxuZnVuY3Rpb24gJGIoYSl7aWYoYS5nfHxhLnV8fDM8PWEudilyZXR1cm4gITE7YS5ZKys7YS51PXViKHAoYS5GYSxhKSxjZChhLGEudikpO2EudisrO3JldHVybiAhMH1oLkZhPWZ1bmN0aW9uKCl7dGhpcy51PW51bGw7ZmQodGhpcyk7aWYodGhpcy5iYSYmISh0aGlzLk18fG51bGw9PXRoaXMuZ3x8MD49dGhpcy5SKSl7dmFyIGE9Mip0aGlzLlI7dGhpcy5qLmluZm8oXCJCUCBkZXRlY3Rpb24gdGltZXIgZW5hYmxlZDogXCIrYSk7dGhpcy5BPXViKHAodGhpcy5hYix0aGlzKSxhKTt9fTtoLmFiPWZ1bmN0aW9uKCl7dGhpcy5BJiYodGhpcy5BPW51bGwsdGhpcy5qLmluZm8oXCJCUCBkZXRlY3Rpb24gdGltZW91dCByZWFjaGVkLlwiKSx0aGlzLmouaW5mbyhcIkJ1ZmZlcmluZyBwcm94eSBkZXRlY3RlZCBhbmQgc3dpdGNoIHRvIGxvbmctcG9sbGluZyFcIiksdGhpcy5GPSExLHRoaXMuTT0hMCxLKDEwKSxaYih0aGlzKSxmZCh0aGlzKSk7fTtcbmZ1bmN0aW9uIFRiKGEpe251bGwhPWEuQSYmKGsuY2xlYXJUaW1lb3V0KGEuQSksYS5BPW51bGwpO31mdW5jdGlvbiBmZChhKXthLmc9bmV3IE0oYSxhLmosXCJycGNcIixhLlkpO251bGw9PT1hLm0mJihhLmcuSD1hLm8pO2EuZy5PPTA7dmFyIGI9TihhLnFhKTtTKGIsXCJSSURcIixcInJwY1wiKTtTKGIsXCJTSURcIixhLkspO1MoYixcIkFJRFwiLGEuVCk7UyhiLFwiQ0lcIixhLkY/XCIwXCI6XCIxXCIpOyFhLkYmJmEuamEmJlMoYixcIlRPXCIsYS5qYSk7UyhiLFwiVFlQRVwiLFwieG1saHR0cFwiKTskYyhhLGIpO2EubSYmYS5vJiZQYyhiLGEubSxhLm8pO2EuTCYmKGEuZy5JPWEuTCk7dmFyIGM9YS5nO2E9YS5pYTtjLkw9MTtjLnY9SWIoTihiKSk7Yy5tPW51bGw7Yy5QPSEwO0piKGMsYSk7fWguWmE9ZnVuY3Rpb24oKXtudWxsIT10aGlzLkMmJih0aGlzLkM9bnVsbCxaYih0aGlzKSwkYih0aGlzKSxLKDE5KSk7fTtmdW5jdGlvbiBZYihhKXtudWxsIT1hLkMmJihrLmNsZWFyVGltZW91dChhLkMpLGEuQz1udWxsKTt9XG5mdW5jdGlvbiBVYihhLGIpe3ZhciBjPW51bGw7aWYoYS5nPT1iKXtZYihhKTtUYihhKTthLmc9bnVsbDt2YXIgZD0yO31lbHNlIGlmKFhiKGEuaCxiKSljPWIuRCxkYyhhLmgsYiksZD0xO2Vsc2UgcmV0dXJuO2lmKDAhPWEuRylpZihiLm8paWYoMT09ZCl7Yz1iLm0/Yi5tLmxlbmd0aDowO2I9RGF0ZS5ub3coKS1iLkY7dmFyIGU9YS5CO2Q9cWIoKTtGKGQsbmV3IHRiKGQsYykpO2ZjKGEpO31lbHNlIGVjKGEpO2Vsc2UgaWYoZT1iLnMsMz09ZXx8MD09ZSYmMDxiLlh8fCEoMT09ZCYmYmQoYSxiKXx8Mj09ZCYmJGIoYSkpKXN3aXRjaChjJiYwPGMubGVuZ3RoJiYoYj1hLmgsYi5pPWIuaS5jb25jYXQoYykpLGUpe2Nhc2UgMTpSKGEsNSk7YnJlYWs7Y2FzZSA0OlIoYSwxMCk7YnJlYWs7Y2FzZSAzOlIoYSw2KTticmVhaztkZWZhdWx0OlIoYSwyKTt9fVxuZnVuY3Rpb24gY2QoYSxiKXtsZXQgYz1hLlRhK01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSphLmNiKTthLmlzQWN0aXZlKCl8fChjKj0yKTtyZXR1cm4gYypifWZ1bmN0aW9uIFIoYSxiKXthLmouaW5mbyhcIkVycm9yIGNvZGUgXCIrYik7aWYoMj09Yil7dmFyIGM9cChhLmZiLGEpLGQ9YS5YYTtjb25zdCBlPSFkO2Q9bmV3IFQoZHx8XCIvL3d3dy5nb29nbGUuY29tL2ltYWdlcy9jbGVhcmRvdC5naWZcIik7ay5sb2NhdGlvbiYmXCJodHRwXCI9PWsubG9jYXRpb24ucHJvdG9jb2x8fHFjKGQsXCJodHRwc1wiKTtJYihkKTtlP0ZjKGQudG9TdHJpbmcoKSxjKTpHYyhkLnRvU3RyaW5nKCksYyk7fWVsc2UgSygyKTthLkc9MDthLmwmJmEubC5zYShiKTthZChhKTtaYyhhKTt9aC5mYj1mdW5jdGlvbihhKXthPyh0aGlzLmouaW5mbyhcIlN1Y2Nlc3NmdWxseSBwaW5nZWQgZ29vZ2xlLmNvbVwiKSxLKDIpKToodGhpcy5qLmluZm8oXCJGYWlsZWQgdG8gcGluZyBnb29nbGUuY29tXCIpLEsoMSkpO307XG5mdW5jdGlvbiBhZChhKXthLkc9MDthLmthPVtdO2lmKGEubCl7Y29uc3QgYj1rYyhhLmgpO2lmKDAhPWIubGVuZ3RofHwwIT1hLmkubGVuZ3RoKW1hKGEua2EsYiksbWEoYS5rYSxhLmkpLGEuaC5pLmxlbmd0aD0wLGxhKGEuaSksYS5pLmxlbmd0aD0wO2EubC5yYSgpO319ZnVuY3Rpb24gY2MoYSxiLGMpe3ZhciBkPWMgaW5zdGFuY2VvZiBUP04oYyk6bmV3IFQoYyk7aWYoXCJcIiE9ZC5nKWImJihkLmc9YitcIi5cIitkLmcpLHJjKGQsZC5zKTtlbHNlIHt2YXIgZT1rLmxvY2F0aW9uO2Q9ZS5wcm90b2NvbDtiPWI/YitcIi5cIitlLmhvc3RuYW1lOmUuaG9zdG5hbWU7ZT0rZS5wb3J0O3ZhciBmPW5ldyBUKG51bGwpO2QmJnFjKGYsZCk7YiYmKGYuZz1iKTtlJiZyYyhmLGUpO2MmJihmLmw9Yyk7ZD1mO31jPWEuRDtiPWEueWE7YyYmYiYmUyhkLGMsYik7UyhkLFwiVkVSXCIsYS5sYSk7JGMoYSxkKTtyZXR1cm4gZH1cbmZ1bmN0aW9uIE1iKGEsYixjKXtpZihiJiYhYS5KKXRocm93IEVycm9yKFwiQ2FuJ3QgY3JlYXRlIHNlY29uZGFyeSBkb21haW4gY2FwYWJsZSBYaHJJbyBvYmplY3QuXCIpO2I9YS5DYSYmIWEucGE/bmV3IFgobmV3IEpjKHtlYjpjfSkpOm5ldyBYKGEucGEpO2IuSGEoYS5KKTtyZXR1cm4gYn1oLmlzQWN0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuICEhdGhpcy5sJiZ0aGlzLmwuaXNBY3RpdmUodGhpcyl9O2Z1bmN0aW9uIGdkKCl7fWg9Z2QucHJvdG90eXBlO2gudWE9ZnVuY3Rpb24oKXt9O2gudGE9ZnVuY3Rpb24oKXt9O2guc2E9ZnVuY3Rpb24oKXt9O2gucmE9ZnVuY3Rpb24oKXt9O2guaXNBY3RpdmU9ZnVuY3Rpb24oKXtyZXR1cm4gITB9O2guTmE9ZnVuY3Rpb24oKXt9O2Z1bmN0aW9uIGhkKCl7fWhkLnByb3RvdHlwZS5nPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBZKGEsYil9O1xuZnVuY3Rpb24gWShhLGIpe0UuY2FsbCh0aGlzKTt0aGlzLmc9bmV3IFljKGIpO3RoaXMubD1hO3RoaXMuaD1iJiZiLm1lc3NhZ2VVcmxQYXJhbXN8fG51bGw7YT1iJiZiLm1lc3NhZ2VIZWFkZXJzfHxudWxsO2ImJmIuY2xpZW50UHJvdG9jb2xIZWFkZXJSZXF1aXJlZCYmKGE/YVtcIlgtQ2xpZW50LVByb3RvY29sXCJdPVwid2ViY2hhbm5lbFwiOmE9e1wiWC1DbGllbnQtUHJvdG9jb2xcIjpcIndlYmNoYW5uZWxcIn0pO3RoaXMuZy5vPWE7YT1iJiZiLmluaXRNZXNzYWdlSGVhZGVyc3x8bnVsbDtiJiZiLm1lc3NhZ2VDb250ZW50VHlwZSYmKGE/YVtcIlgtV2ViQ2hhbm5lbC1Db250ZW50LVR5cGVcIl09Yi5tZXNzYWdlQ29udGVudFR5cGU6YT17XCJYLVdlYkNoYW5uZWwtQ29udGVudC1UeXBlXCI6Yi5tZXNzYWdlQ29udGVudFR5cGV9KTtiJiZiLnZhJiYoYT9hW1wiWC1XZWJDaGFubmVsLUNsaWVudC1Qcm9maWxlXCJdPWIudmE6YT17XCJYLVdlYkNoYW5uZWwtQ2xpZW50LVByb2ZpbGVcIjpiLnZhfSk7dGhpcy5nLlM9XG5hOyhhPWImJmIuU2IpJiYhdChhKSYmKHRoaXMuZy5tPWEpO3RoaXMudj1iJiZiLnN1cHBvcnRzQ3Jvc3NEb21haW5YaHJ8fCExO3RoaXMudT1iJiZiLnNlbmRSYXdKc29ufHwhMTsoYj1iJiZiLmh0dHBTZXNzaW9uSWRQYXJhbSkmJiF0KGIpJiYodGhpcy5nLkQ9YixhPXRoaXMuaCxudWxsIT09YSYmYiBpbiBhJiYoYT10aGlzLmgsYiBpbiBhJiZkZWxldGUgYVtiXSkpO3RoaXMuaj1uZXcgWih0aGlzKTt9cihZLEUpO1kucHJvdG90eXBlLm09ZnVuY3Rpb24oKXt0aGlzLmcubD10aGlzLmo7dGhpcy52JiYodGhpcy5nLko9ITApO3RoaXMuZy5jb25uZWN0KHRoaXMubCx0aGlzLmh8fHZvaWQgMCk7fTtZLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe2djKHRoaXMuZyk7fTtcblkucHJvdG90eXBlLm89ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nO2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYSl7dmFyIGM9e307Yy5fX2RhdGFfXz1hO2E9Yzt9ZWxzZSB0aGlzLnUmJihjPXt9LGMuX19kYXRhX189aGIoYSksYT1jKTtiLmkucHVzaChuZXcgaGMoYi5ZYSsrLGEpKTszPT1iLkcmJmZjKGIpO307WS5wcm90b3R5cGUuTj1mdW5jdGlvbigpe3RoaXMuZy5sPW51bGw7ZGVsZXRlIHRoaXMuajtnYyh0aGlzLmcpO2RlbGV0ZSB0aGlzLmc7WS5hYS5OLmNhbGwodGhpcyk7fTtcbmZ1bmN0aW9uIGlkKGEpe25iLmNhbGwodGhpcyk7YS5fX2hlYWRlcnNfXyYmKHRoaXMuaGVhZGVycz1hLl9faGVhZGVyc19fLHRoaXMuc3RhdHVzQ29kZT1hLl9fc3RhdHVzX18sZGVsZXRlIGEuX19oZWFkZXJzX18sZGVsZXRlIGEuX19zdGF0dXNfXyk7dmFyIGI9YS5fX3NtX187aWYoYil7YTp7Zm9yKGNvbnN0IGMgaW4gYil7YT1jO2JyZWFrIGF9YT12b2lkIDA7fWlmKHRoaXMuaT1hKWE9dGhpcy5pLGI9bnVsbCE9PWImJmEgaW4gYj9iW2FdOnZvaWQgMDt0aGlzLmRhdGE9Yjt9ZWxzZSB0aGlzLmRhdGE9YTt9cihpZCxuYik7ZnVuY3Rpb24gamQoKXtvYi5jYWxsKHRoaXMpO3RoaXMuc3RhdHVzPTE7fXIoamQsb2IpO2Z1bmN0aW9uIFooYSl7dGhpcy5nPWE7fXIoWixnZCk7Wi5wcm90b3R5cGUudWE9ZnVuY3Rpb24oKXtGKHRoaXMuZyxcImFcIik7fTtaLnByb3RvdHlwZS50YT1mdW5jdGlvbihhKXtGKHRoaXMuZyxuZXcgaWQoYSkpO307XG5aLnByb3RvdHlwZS5zYT1mdW5jdGlvbihhKXtGKHRoaXMuZyxuZXcgamQoKSk7fTtaLnByb3RvdHlwZS5yYT1mdW5jdGlvbigpe0YodGhpcy5nLFwiYlwiKTt9O2hkLnByb3RvdHlwZS5jcmVhdGVXZWJDaGFubmVsPWhkLnByb3RvdHlwZS5nO1kucHJvdG90eXBlLnNlbmQ9WS5wcm90b3R5cGUubztZLnByb3RvdHlwZS5vcGVuPVkucHJvdG90eXBlLm07WS5wcm90b3R5cGUuY2xvc2U9WS5wcm90b3R5cGUuY2xvc2U7Y3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydCA9IHdlYmNoYW5uZWxfYmxvYl9lczIwMTguY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydD1mdW5jdGlvbigpe3JldHVybiBuZXcgaGR9O2dldFN0YXRFdmVudFRhcmdldCA9IHdlYmNoYW5uZWxfYmxvYl9lczIwMTguZ2V0U3RhdEV2ZW50VGFyZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHFiKCl9O0V2ZW50ID0gd2ViY2hhbm5lbF9ibG9iX2VzMjAxOC5FdmVudD1JO1N0YXQgPSB3ZWJjaGFubmVsX2Jsb2JfZXMyMDE4LlN0YXQ9e21iOjAscGI6MSxxYjoyLEpiOjMsT2I6NCxMYjo1LE1iOjYsS2I6NyxJYjo4LE5iOjksUFJPWFk6MTAsTk9QUk9YWToxMSxHYjoxMixDYjoxMyxEYjoxNCxCYjoxNSxFYjoxNixGYjoxNyxpYjoxOCxoYjoxOSxqYjoyMH07QWIuTk9fRVJST1I9MDtBYi5USU1FT1VUPTg7QWIuSFRUUF9FUlJPUj02O1xuRXJyb3JDb2RlID0gd2ViY2hhbm5lbF9ibG9iX2VzMjAxOC5FcnJvckNvZGU9QWI7QmIuQ09NUExFVEU9XCJjb21wbGV0ZVwiO0V2ZW50VHlwZSA9IHdlYmNoYW5uZWxfYmxvYl9lczIwMTguRXZlbnRUeXBlPUJiO21iLkV2ZW50VHlwZT1IO0guT1BFTj1cImFcIjtILkNMT1NFPVwiYlwiO0guRVJST1I9XCJjXCI7SC5NRVNTQUdFPVwiZFwiO0UucHJvdG90eXBlLmxpc3Rlbj1FLnByb3RvdHlwZS5LO1dlYkNoYW5uZWwgPSB3ZWJjaGFubmVsX2Jsb2JfZXMyMDE4LldlYkNoYW5uZWw9bWI7RmV0Y2hYbWxIdHRwRmFjdG9yeSA9IHdlYmNoYW5uZWxfYmxvYl9lczIwMTguRmV0Y2hYbWxIdHRwRmFjdG9yeT1KYztYLnByb3RvdHlwZS5saXN0ZW5PbmNlPVgucHJvdG90eXBlLkw7WC5wcm90b3R5cGUuZ2V0TGFzdEVycm9yPVgucHJvdG90eXBlLkthO1gucHJvdG90eXBlLmdldExhc3RFcnJvckNvZGU9WC5wcm90b3R5cGUuQmE7WC5wcm90b3R5cGUuZ2V0U3RhdHVzPVgucHJvdG90eXBlLlo7WC5wcm90b3R5cGUuZ2V0UmVzcG9uc2VKc29uPVgucHJvdG90eXBlLk9hO1gucHJvdG90eXBlLmdldFJlc3BvbnNlVGV4dD1YLnByb3RvdHlwZS5vYTtcblgucHJvdG90eXBlLnNlbmQ9WC5wcm90b3R5cGUuZWE7WC5wcm90b3R5cGUuc2V0V2l0aENyZWRlbnRpYWxzPVgucHJvdG90eXBlLkhhO1hocklvID0gd2ViY2hhbm5lbF9ibG9iX2VzMjAxOC5YaHJJbz1YO30pLmFwcGx5KCB0eXBlb2YgY29tbW9uanNHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gY29tbW9uanNHbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmICA6IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93ICA6IHt9KTtcblxuZXhwb3J0IHsgRXJyb3JDb2RlLCBFdmVudCwgRXZlbnRUeXBlLCBGZXRjaFhtbEh0dHBGYWN0b3J5LCBTdGF0LCBXZWJDaGFubmVsLCBYaHJJbywgY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydCwgd2ViY2hhbm5lbF9ibG9iX2VzMjAxOCBhcyBkZWZhdWx0LCBnZXRTdGF0RXZlbnRUYXJnZXQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdlYmNoYW5uZWxfYmxvYl9lczIwMTguanMubWFwXG4iLCJpbXBvcnQgeyBfcmVnaXN0ZXJDb21wb25lbnQsIHJlZ2lzdGVyVmVyc2lvbiwgX2dldFByb3ZpZGVyLCBnZXRBcHAsIF9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UsIFNES19WRVJTSU9OIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcbmltcG9ydCB7IExvZ2dlciwgTG9nTGV2ZWwgfSBmcm9tICdAZmlyZWJhc2UvbG9nZ2VyJztcbmltcG9ydCB7IEZpcmViYXNlRXJyb3IsIGNyZWF0ZU1vY2tVc2VyVG9rZW4sIGdldE1vZHVsYXJJbnN0YW5jZSwgZGVlcEVxdWFsLCBnZXREZWZhdWx0RW11bGF0b3JIb3N0bmFtZUFuZFBvcnQsIGdldFVBLCBpc0luZGV4ZWREQkF2YWlsYWJsZSwgaXNTYWZhcmkgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBJbnRlZ2VyLCBNZDUgfSBmcm9tICdAZmlyZWJhc2Uvd2ViY2hhbm5lbC13cmFwcGVyL2Jsb29tLWJsb2InO1xuaW1wb3J0IHsgWGhySW8sIEV2ZW50VHlwZSwgRXJyb3JDb2RlLCBjcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0LCBnZXRTdGF0RXZlbnRUYXJnZXQsIEZldGNoWG1sSHR0cEZhY3RvcnksIFdlYkNoYW5uZWwsIEV2ZW50LCBTdGF0IH0gZnJvbSAnQGZpcmViYXNlL3dlYmNoYW5uZWwtd3JhcHBlci93ZWJjaGFubmVsLWJsb2InO1xuXG5jb25zdCBTID0gXCJAZmlyZWJhc2UvZmlyZXN0b3JlXCI7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFNpbXBsZSB3cmFwcGVyIGFyb3VuZCBhIG51bGxhYmxlIFVJRC4gTW9zdGx5IGV4aXN0cyB0byBtYWtlIGNvZGUgbW9yZVxuICogcmVhZGFibGUuXG4gKi9cbmNsYXNzIFVzZXIge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy51aWQgPSBlO1xuICAgIH1cbiAgICBpc0F1dGhlbnRpY2F0ZWQoKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9IHRoaXMudWlkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEga2V5IHJlcHJlc2VudGluZyB0aGlzIHVzZXIsIHN1aXRhYmxlIGZvciBpbmNsdXNpb24gaW4gYVxuICAgICAqIGRpY3Rpb25hcnkuXG4gICAgICovICAgIHRvS2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc0F1dGhlbnRpY2F0ZWQoKSA/IFwidWlkOlwiICsgdGhpcy51aWQgOiBcImFub255bW91cy11c2VyXCI7XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gZS51aWQgPT09IHRoaXMudWlkO1xuICAgIH1cbn1cblxuLyoqIEEgdXNlciB3aXRoIGEgbnVsbCBVSUQuICovIFVzZXIuVU5BVVRIRU5USUNBVEVEID0gbmV3IFVzZXIobnVsbCksIFxuLy8gVE9ETyhtaWtlbGVoZW4pOiBMb29rIGludG8gZ2V0dGluZyBhIHByb3BlciB1aWQtZXF1aXZhbGVudCBmb3Jcbi8vIG5vbi1GaXJlYmFzZUF1dGggcHJvdmlkZXJzLlxuVXNlci5HT09HTEVfQ1JFREVOVElBTFMgPSBuZXcgVXNlcihcImdvb2dsZS1jcmVkZW50aWFscy11aWRcIiksIFVzZXIuRklSU1RfUEFSVFkgPSBuZXcgVXNlcihcImZpcnN0LXBhcnR5LXVpZFwiKSwgXG5Vc2VyLk1PQ0tfVVNFUiA9IG5ldyBVc2VyKFwibW9jay11c2VyXCIpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xubGV0IGIgPSBcIjEwLjEyLjNcIjtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNvbnN0IEQgPSBuZXcgTG9nZ2VyKFwiQGZpcmViYXNlL2ZpcmVzdG9yZVwiKTtcblxuLy8gSGVscGVyIG1ldGhvZHMgYXJlIG5lZWRlZCBiZWNhdXNlIHZhcmlhYmxlcyBjYW4ndCBiZSBleHBvcnRlZCBhcyByZWFkL3dyaXRlXG5mdW5jdGlvbiBfX1BSSVZBVEVfZ2V0TG9nTGV2ZWwoKSB7XG4gICAgcmV0dXJuIEQubG9nTGV2ZWw7XG59XG5cbi8qKlxuICogU2V0cyB0aGUgdmVyYm9zaXR5IG9mIENsb3VkIEZpcmVzdG9yZSBsb2dzIChkZWJ1ZywgZXJyb3IsIG9yIHNpbGVudCkuXG4gKlxuICogQHBhcmFtIGxvZ0xldmVsIC0gVGhlIHZlcmJvc2l0eSB5b3Ugc2V0IGZvciBhY3Rpdml0eSBhbmQgZXJyb3IgbG9nZ2luZy4gQ2FuXG4gKiAgIGJlIGFueSBvZiB0aGUgZm9sbG93aW5nIHZhbHVlczpcbiAqXG4gKiAgIDx1bD5cbiAqICAgICA8bGk+YGRlYnVnYCBmb3IgdGhlIG1vc3QgdmVyYm9zZSBsb2dnaW5nIGxldmVsLCBwcmltYXJpbHkgZm9yXG4gKiAgICAgZGVidWdnaW5nLjwvbGk+XG4gKiAgICAgPGxpPmBlcnJvcmAgdG8gbG9nIGVycm9ycyBvbmx5LjwvbGk+XG4gKiAgICAgPGxpPjxjb2RlPmBzaWxlbnRgIHRvIHR1cm4gb2ZmIGxvZ2dpbmcuPC9saT5cbiAqICAgPC91bD5cbiAqLyBmdW5jdGlvbiBzZXRMb2dMZXZlbChlKSB7XG4gICAgRC5zZXRMb2dMZXZlbChlKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2xvZ0RlYnVnKGUsIC4uLnQpIHtcbiAgICBpZiAoRC5sb2dMZXZlbCA8PSBMb2dMZXZlbC5ERUJVRykge1xuICAgICAgICBjb25zdCBuID0gdC5tYXAoX19QUklWQVRFX2FyZ1RvU3RyaW5nKTtcbiAgICAgICAgRC5kZWJ1ZyhgRmlyZXN0b3JlICgke2J9KTogJHtlfWAsIC4uLm4pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2xvZ0Vycm9yKGUsIC4uLnQpIHtcbiAgICBpZiAoRC5sb2dMZXZlbCA8PSBMb2dMZXZlbC5FUlJPUikge1xuICAgICAgICBjb25zdCBuID0gdC5tYXAoX19QUklWQVRFX2FyZ1RvU3RyaW5nKTtcbiAgICAgICAgRC5lcnJvcihgRmlyZXN0b3JlICgke2J9KTogJHtlfWAsIC4uLm4pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbG9nV2FybihlLCAuLi50KSB7XG4gICAgaWYgKEQubG9nTGV2ZWwgPD0gTG9nTGV2ZWwuV0FSTikge1xuICAgICAgICBjb25zdCBuID0gdC5tYXAoX19QUklWQVRFX2FyZ1RvU3RyaW5nKTtcbiAgICAgICAgRC53YXJuKGBGaXJlc3RvcmUgKCR7Yn0pOiAke2V9YCwgLi4ubik7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIGFkZGl0aW9uYWwgbG9nIHBhcmFtZXRlciB0byBhIHN0cmluZyByZXByZXNlbnRhdGlvbi5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfYXJnVG9TdHJpbmcoZSkge1xuICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiBlKSByZXR1cm4gZTtcbiAgICB0cnkge1xuICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgICAgICAvKiogRm9ybWF0cyBhbiBvYmplY3QgYXMgYSBKU09OIHN0cmluZywgc3VpdGFibGUgZm9yIGxvZ2dpbmcuICovXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfZm9ybWF0SlNPTihlKSB7XG4gICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZSk7XG4gICAgICAgIH0oZSk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICAvLyBDb252ZXJ0aW5nIHRvIEpTT04gZmFpbGVkLCBqdXN0IGxvZyB0aGUgb2JqZWN0IGRpcmVjdGx5XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVW5jb25kaXRpb25hbGx5IGZhaWxzLCB0aHJvd2luZyBhbiBFcnJvciB3aXRoIHRoZSBnaXZlbiBtZXNzYWdlLlxuICogTWVzc2FnZXMgYXJlIHN0cmlwcGVkIGluIHByb2R1Y3Rpb24gYnVpbGRzLlxuICpcbiAqIFJldHVybnMgYG5ldmVyYCBhbmQgY2FuIGJlIHVzZWQgaW4gZXhwcmVzc2lvbnM6XG4gKiBAZXhhbXBsZVxuICogbGV0IGZ1dHVyZVZhciA9IGZhaWwoJ25vdCBpbXBsZW1lbnRlZCB5ZXQnKTtcbiAqLyBmdW5jdGlvbiBmYWlsKGUgPSBcIlVuZXhwZWN0ZWQgc3RhdGVcIikge1xuICAgIC8vIExvZyB0aGUgZmFpbHVyZSBpbiBhZGRpdGlvbiB0byB0aHJvdyBhbiBleGNlcHRpb24sIGp1c3QgaW4gY2FzZSB0aGVcbiAgICAvLyBleGNlcHRpb24gaXMgc3dhbGxvd2VkLlxuICAgIGNvbnN0IHQgPSBgRklSRVNUT1JFICgke2J9KSBJTlRFUk5BTCBBU1NFUlRJT04gRkFJTEVEOiBgICsgZTtcbiAgICAvLyBOT1RFOiBXZSBkb24ndCB1c2UgRmlyZXN0b3JlRXJyb3IgaGVyZSBiZWNhdXNlIHRoZXNlIGFyZSBpbnRlcm5hbCBmYWlsdXJlc1xuICAgIC8vIHRoYXQgY2Fubm90IGJlIGhhbmRsZWQgYnkgdGhlIHVzZXIuIChBbHNvIGl0IHdvdWxkIGNyZWF0ZSBhIGNpcmN1bGFyXG4gICAgLy8gZGVwZW5kZW5jeSBiZXR3ZWVuIHRoZSBlcnJvciBhbmQgYXNzZXJ0IG1vZHVsZXMgd2hpY2ggZG9lc24ndCB3b3JrLilcbiAgICB0aHJvdyBfX1BSSVZBVEVfbG9nRXJyb3IodCksIG5ldyBFcnJvcih0KTtcbn1cblxuLyoqXG4gKiBGYWlscyBpZiB0aGUgZ2l2ZW4gYXNzZXJ0aW9uIGNvbmRpdGlvbiBpcyBmYWxzZSwgdGhyb3dpbmcgYW4gRXJyb3Igd2l0aCB0aGVcbiAqIGdpdmVuIG1lc3NhZ2UgaWYgaXQgZGlkLlxuICpcbiAqIE1lc3NhZ2VzIGFyZSBzdHJpcHBlZCBpbiBwcm9kdWN0aW9uIGJ1aWxkcy5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfaGFyZEFzc2VydChlLCB0KSB7XG4gICAgZSB8fCBmYWlsKCk7XG59XG5cbi8qKlxuICogRmFpbHMgaWYgdGhlIGdpdmVuIGFzc2VydGlvbiBjb25kaXRpb24gaXMgZmFsc2UsIHRocm93aW5nIGFuIEVycm9yIHdpdGggdGhlXG4gKiBnaXZlbiBtZXNzYWdlIGlmIGl0IGRpZC5cbiAqXG4gKiBUaGUgY29kZSBvZiBjYWxsc2l0ZXMgaW52b2tpbmcgdGhpcyBmdW5jdGlvbiBhcmUgc3RyaXBwZWQgb3V0IGluIHByb2R1Y3Rpb25cbiAqIGJ1aWxkcy4gQW55IHNpZGUtZWZmZWN0cyBvZiBjb2RlIHdpdGhpbiB0aGUgZGVidWdBc3NlcnQoKSBpbnZvY2F0aW9uIHdpbGwgbm90XG4gKiBoYXBwZW4gaW4gdGhpcyBjYXNlLlxuICpcbiAqIEBpbnRlcm5hbFxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9kZWJ1Z0Fzc2VydChlLCB0KSB7XG4gICAgZSB8fCBmYWlsKCk7XG59XG5cbi8qKlxuICogQ2FzdHMgYG9iamAgdG8gYFRgLiBJbiBub24tcHJvZHVjdGlvbiBidWlsZHMsIHZlcmlmaWVzIHRoYXQgYG9iamAgaXMgYW5cbiAqIGluc3RhbmNlIG9mIGBUYCBiZWZvcmUgY2FzdGluZy5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZGVidWdDYXN0KGUsIFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbnQpIHtcbiAgICByZXR1cm4gZTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgQyA9IHtcbiAgICAvLyBDYXVzZXMgYXJlIGNvcGllZCBmcm9tOlxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ncnBjL2dycGMvYmxvYi9iY2VlYzk0ZWE0ZmM1ZjAwODVkODEyMzVkOGUxYzA2Nzk4ZGMzNDFhL2luY2x1ZGUvZ3JwYyUyQiUyQi9pbXBsL2NvZGVnZW4vc3RhdHVzX2NvZGVfZW51bS5oXG4gICAgLyoqIE5vdCBhbiBlcnJvcjsgcmV0dXJuZWQgb24gc3VjY2Vzcy4gKi9cbiAgICBPSzogXCJva1wiLFxuICAgIC8qKiBUaGUgb3BlcmF0aW9uIHdhcyBjYW5jZWxsZWQgKHR5cGljYWxseSBieSB0aGUgY2FsbGVyKS4gKi9cbiAgICBDQU5DRUxMRUQ6IFwiY2FuY2VsbGVkXCIsXG4gICAgLyoqIFVua25vd24gZXJyb3Igb3IgYW4gZXJyb3IgZnJvbSBhIGRpZmZlcmVudCBlcnJvciBkb21haW4uICovXG4gICAgVU5LTk9XTjogXCJ1bmtub3duXCIsXG4gICAgLyoqXG4gICAgICogQ2xpZW50IHNwZWNpZmllZCBhbiBpbnZhbGlkIGFyZ3VtZW50LiBOb3RlIHRoYXQgdGhpcyBkaWZmZXJzIGZyb21cbiAgICAgKiBGQUlMRURfUFJFQ09ORElUSU9OLiBJTlZBTElEX0FSR1VNRU5UIGluZGljYXRlcyBhcmd1bWVudHMgdGhhdCBhcmVcbiAgICAgKiBwcm9ibGVtYXRpYyByZWdhcmRsZXNzIG9mIHRoZSBzdGF0ZSBvZiB0aGUgc3lzdGVtIChlLmcuLCBhIG1hbGZvcm1lZCBmaWxlXG4gICAgICogbmFtZSkuXG4gICAgICovXG4gICAgSU5WQUxJRF9BUkdVTUVOVDogXCJpbnZhbGlkLWFyZ3VtZW50XCIsXG4gICAgLyoqXG4gICAgICogRGVhZGxpbmUgZXhwaXJlZCBiZWZvcmUgb3BlcmF0aW9uIGNvdWxkIGNvbXBsZXRlLiBGb3Igb3BlcmF0aW9ucyB0aGF0XG4gICAgICogY2hhbmdlIHRoZSBzdGF0ZSBvZiB0aGUgc3lzdGVtLCB0aGlzIGVycm9yIG1heSBiZSByZXR1cm5lZCBldmVuIGlmIHRoZVxuICAgICAqIG9wZXJhdGlvbiBoYXMgY29tcGxldGVkIHN1Y2Nlc3NmdWxseS4gRm9yIGV4YW1wbGUsIGEgc3VjY2Vzc2Z1bCByZXNwb25zZVxuICAgICAqIGZyb20gYSBzZXJ2ZXIgY291bGQgaGF2ZSBiZWVuIGRlbGF5ZWQgbG9uZyBlbm91Z2ggZm9yIHRoZSBkZWFkbGluZSB0b1xuICAgICAqIGV4cGlyZS5cbiAgICAgKi9cbiAgICBERUFETElORV9FWENFRURFRDogXCJkZWFkbGluZS1leGNlZWRlZFwiLFxuICAgIC8qKiBTb21lIHJlcXVlc3RlZCBlbnRpdHkgKGUuZy4sIGZpbGUgb3IgZGlyZWN0b3J5KSB3YXMgbm90IGZvdW5kLiAqL1xuICAgIE5PVF9GT1VORDogXCJub3QtZm91bmRcIixcbiAgICAvKipcbiAgICAgKiBTb21lIGVudGl0eSB0aGF0IHdlIGF0dGVtcHRlZCB0byBjcmVhdGUgKGUuZy4sIGZpbGUgb3IgZGlyZWN0b3J5KSBhbHJlYWR5XG4gICAgICogZXhpc3RzLlxuICAgICAqL1xuICAgIEFMUkVBRFlfRVhJU1RTOiBcImFscmVhZHktZXhpc3RzXCIsXG4gICAgLyoqXG4gICAgICogVGhlIGNhbGxlciBkb2VzIG5vdCBoYXZlIHBlcm1pc3Npb24gdG8gZXhlY3V0ZSB0aGUgc3BlY2lmaWVkIG9wZXJhdGlvbi5cbiAgICAgKiBQRVJNSVNTSU9OX0RFTklFRCBtdXN0IG5vdCBiZSB1c2VkIGZvciByZWplY3Rpb25zIGNhdXNlZCBieSBleGhhdXN0aW5nXG4gICAgICogc29tZSByZXNvdXJjZSAodXNlIFJFU09VUkNFX0VYSEFVU1RFRCBpbnN0ZWFkIGZvciB0aG9zZSBlcnJvcnMpLlxuICAgICAqIFBFUk1JU1NJT05fREVOSUVEIG11c3Qgbm90IGJlIHVzZWQgaWYgdGhlIGNhbGxlciBjYW4gbm90IGJlIGlkZW50aWZpZWRcbiAgICAgKiAodXNlIFVOQVVUSEVOVElDQVRFRCBpbnN0ZWFkIGZvciB0aG9zZSBlcnJvcnMpLlxuICAgICAqL1xuICAgIFBFUk1JU1NJT05fREVOSUVEOiBcInBlcm1pc3Npb24tZGVuaWVkXCIsXG4gICAgLyoqXG4gICAgICogVGhlIHJlcXVlc3QgZG9lcyBub3QgaGF2ZSB2YWxpZCBhdXRoZW50aWNhdGlvbiBjcmVkZW50aWFscyBmb3IgdGhlXG4gICAgICogb3BlcmF0aW9uLlxuICAgICAqL1xuICAgIFVOQVVUSEVOVElDQVRFRDogXCJ1bmF1dGhlbnRpY2F0ZWRcIixcbiAgICAvKipcbiAgICAgKiBTb21lIHJlc291cmNlIGhhcyBiZWVuIGV4aGF1c3RlZCwgcGVyaGFwcyBhIHBlci11c2VyIHF1b3RhLCBvciBwZXJoYXBzIHRoZVxuICAgICAqIGVudGlyZSBmaWxlIHN5c3RlbSBpcyBvdXQgb2Ygc3BhY2UuXG4gICAgICovXG4gICAgUkVTT1VSQ0VfRVhIQVVTVEVEOiBcInJlc291cmNlLWV4aGF1c3RlZFwiLFxuICAgIC8qKlxuICAgICAqIE9wZXJhdGlvbiB3YXMgcmVqZWN0ZWQgYmVjYXVzZSB0aGUgc3lzdGVtIGlzIG5vdCBpbiBhIHN0YXRlIHJlcXVpcmVkIGZvclxuICAgICAqIHRoZSBvcGVyYXRpb24ncyBleGVjdXRpb24uIEZvciBleGFtcGxlLCBkaXJlY3RvcnkgdG8gYmUgZGVsZXRlZCBtYXkgYmVcbiAgICAgKiBub24tZW1wdHksIGFuIHJtZGlyIG9wZXJhdGlvbiBpcyBhcHBsaWVkIHRvIGEgbm9uLWRpcmVjdG9yeSwgZXRjLlxuICAgICAqXG4gICAgICogQSBsaXRtdXMgdGVzdCB0aGF0IG1heSBoZWxwIGEgc2VydmljZSBpbXBsZW1lbnRvciBpbiBkZWNpZGluZ1xuICAgICAqIGJldHdlZW4gRkFJTEVEX1BSRUNPTkRJVElPTiwgQUJPUlRFRCwgYW5kIFVOQVZBSUxBQkxFOlxuICAgICAqICAoYSkgVXNlIFVOQVZBSUxBQkxFIGlmIHRoZSBjbGllbnQgY2FuIHJldHJ5IGp1c3QgdGhlIGZhaWxpbmcgY2FsbC5cbiAgICAgKiAgKGIpIFVzZSBBQk9SVEVEIGlmIHRoZSBjbGllbnQgc2hvdWxkIHJldHJ5IGF0IGEgaGlnaGVyLWxldmVsXG4gICAgICogICAgICAoZS5nLiwgcmVzdGFydGluZyBhIHJlYWQtbW9kaWZ5LXdyaXRlIHNlcXVlbmNlKS5cbiAgICAgKiAgKGMpIFVzZSBGQUlMRURfUFJFQ09ORElUSU9OIGlmIHRoZSBjbGllbnQgc2hvdWxkIG5vdCByZXRyeSB1bnRpbFxuICAgICAqICAgICAgdGhlIHN5c3RlbSBzdGF0ZSBoYXMgYmVlbiBleHBsaWNpdGx5IGZpeGVkLiBFLmcuLCBpZiBhbiBcInJtZGlyXCJcbiAgICAgKiAgICAgIGZhaWxzIGJlY2F1c2UgdGhlIGRpcmVjdG9yeSBpcyBub24tZW1wdHksIEZBSUxFRF9QUkVDT05ESVRJT05cbiAgICAgKiAgICAgIHNob3VsZCBiZSByZXR1cm5lZCBzaW5jZSB0aGUgY2xpZW50IHNob3VsZCBub3QgcmV0cnkgdW5sZXNzXG4gICAgICogICAgICB0aGV5IGhhdmUgZmlyc3QgZml4ZWQgdXAgdGhlIGRpcmVjdG9yeSBieSBkZWxldGluZyBmaWxlcyBmcm9tIGl0LlxuICAgICAqICAoZCkgVXNlIEZBSUxFRF9QUkVDT05ESVRJT04gaWYgdGhlIGNsaWVudCBwZXJmb3JtcyBjb25kaXRpb25hbFxuICAgICAqICAgICAgUkVTVCBHZXQvVXBkYXRlL0RlbGV0ZSBvbiBhIHJlc291cmNlIGFuZCB0aGUgcmVzb3VyY2Ugb24gdGhlXG4gICAgICogICAgICBzZXJ2ZXIgZG9lcyBub3QgbWF0Y2ggdGhlIGNvbmRpdGlvbi4gRS5nLiwgY29uZmxpY3RpbmdcbiAgICAgKiAgICAgIHJlYWQtbW9kaWZ5LXdyaXRlIG9uIHRoZSBzYW1lIHJlc291cmNlLlxuICAgICAqL1xuICAgIEZBSUxFRF9QUkVDT05ESVRJT046IFwiZmFpbGVkLXByZWNvbmRpdGlvblwiLFxuICAgIC8qKlxuICAgICAqIFRoZSBvcGVyYXRpb24gd2FzIGFib3J0ZWQsIHR5cGljYWxseSBkdWUgdG8gYSBjb25jdXJyZW5jeSBpc3N1ZSBsaWtlXG4gICAgICogc2VxdWVuY2VyIGNoZWNrIGZhaWx1cmVzLCB0cmFuc2FjdGlvbiBhYm9ydHMsIGV0Yy5cbiAgICAgKlxuICAgICAqIFNlZSBsaXRtdXMgdGVzdCBhYm92ZSBmb3IgZGVjaWRpbmcgYmV0d2VlbiBGQUlMRURfUFJFQ09ORElUSU9OLCBBQk9SVEVELFxuICAgICAqIGFuZCBVTkFWQUlMQUJMRS5cbiAgICAgKi9cbiAgICBBQk9SVEVEOiBcImFib3J0ZWRcIixcbiAgICAvKipcbiAgICAgKiBPcGVyYXRpb24gd2FzIGF0dGVtcHRlZCBwYXN0IHRoZSB2YWxpZCByYW5nZS4gRS5nLiwgc2Vla2luZyBvciByZWFkaW5nXG4gICAgICogcGFzdCBlbmQgb2YgZmlsZS5cbiAgICAgKlxuICAgICAqIFVubGlrZSBJTlZBTElEX0FSR1VNRU5ULCB0aGlzIGVycm9yIGluZGljYXRlcyBhIHByb2JsZW0gdGhhdCBtYXkgYmUgZml4ZWRcbiAgICAgKiBpZiB0aGUgc3lzdGVtIHN0YXRlIGNoYW5nZXMuIEZvciBleGFtcGxlLCBhIDMyLWJpdCBmaWxlIHN5c3RlbSB3aWxsXG4gICAgICogZ2VuZXJhdGUgSU5WQUxJRF9BUkdVTUVOVCBpZiBhc2tlZCB0byByZWFkIGF0IGFuIG9mZnNldCB0aGF0IGlzIG5vdCBpbiB0aGVcbiAgICAgKiByYW5nZSBbMCwyXjMyLTFdLCBidXQgaXQgd2lsbCBnZW5lcmF0ZSBPVVRfT0ZfUkFOR0UgaWYgYXNrZWQgdG8gcmVhZCBmcm9tXG4gICAgICogYW4gb2Zmc2V0IHBhc3QgdGhlIGN1cnJlbnQgZmlsZSBzaXplLlxuICAgICAqXG4gICAgICogVGhlcmUgaXMgYSBmYWlyIGJpdCBvZiBvdmVybGFwIGJldHdlZW4gRkFJTEVEX1BSRUNPTkRJVElPTiBhbmRcbiAgICAgKiBPVVRfT0ZfUkFOR0UuIFdlIHJlY29tbWVuZCB1c2luZyBPVVRfT0ZfUkFOR0UgKHRoZSBtb3JlIHNwZWNpZmljIGVycm9yKVxuICAgICAqIHdoZW4gaXQgYXBwbGllcyBzbyB0aGF0IGNhbGxlcnMgd2hvIGFyZSBpdGVyYXRpbmcgdGhyb3VnaCBhIHNwYWNlIGNhblxuICAgICAqIGVhc2lseSBsb29rIGZvciBhbiBPVVRfT0ZfUkFOR0UgZXJyb3IgdG8gZGV0ZWN0IHdoZW4gdGhleSBhcmUgZG9uZS5cbiAgICAgKi9cbiAgICBPVVRfT0ZfUkFOR0U6IFwib3V0LW9mLXJhbmdlXCIsXG4gICAgLyoqIE9wZXJhdGlvbiBpcyBub3QgaW1wbGVtZW50ZWQgb3Igbm90IHN1cHBvcnRlZC9lbmFibGVkIGluIHRoaXMgc2VydmljZS4gKi9cbiAgICBVTklNUExFTUVOVEVEOiBcInVuaW1wbGVtZW50ZWRcIixcbiAgICAvKipcbiAgICAgKiBJbnRlcm5hbCBlcnJvcnMuIE1lYW5zIHNvbWUgaW52YXJpYW50cyBleHBlY3RlZCBieSB1bmRlcmx5aW5nIFN5c3RlbSBoYXNcbiAgICAgKiBiZWVuIGJyb2tlbi4gSWYgeW91IHNlZSBvbmUgb2YgdGhlc2UgZXJyb3JzLCBTb21ldGhpbmcgaXMgdmVyeSBicm9rZW4uXG4gICAgICovXG4gICAgSU5URVJOQUw6IFwiaW50ZXJuYWxcIixcbiAgICAvKipcbiAgICAgKiBUaGUgc2VydmljZSBpcyBjdXJyZW50bHkgdW5hdmFpbGFibGUuIFRoaXMgaXMgYSBtb3N0IGxpa2VseSBhIHRyYW5zaWVudFxuICAgICAqIGNvbmRpdGlvbiBhbmQgbWF5IGJlIGNvcnJlY3RlZCBieSByZXRyeWluZyB3aXRoIGEgYmFja29mZi5cbiAgICAgKlxuICAgICAqIFNlZSBsaXRtdXMgdGVzdCBhYm92ZSBmb3IgZGVjaWRpbmcgYmV0d2VlbiBGQUlMRURfUFJFQ09ORElUSU9OLCBBQk9SVEVELFxuICAgICAqIGFuZCBVTkFWQUlMQUJMRS5cbiAgICAgKi9cbiAgICBVTkFWQUlMQUJMRTogXCJ1bmF2YWlsYWJsZVwiLFxuICAgIC8qKiBVbnJlY292ZXJhYmxlIGRhdGEgbG9zcyBvciBjb3JydXB0aW9uLiAqL1xuICAgIERBVEFfTE9TUzogXCJkYXRhLWxvc3NcIlxufTtcblxuLyoqIEFuIGVycm9yIHJldHVybmVkIGJ5IGEgRmlyZXN0b3JlIG9wZXJhdGlvbi4gKi8gY2xhc3MgRmlyZXN0b3JlRXJyb3IgZXh0ZW5kcyBGaXJlYmFzZUVycm9yIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBiYWNrZW5kIGVycm9yIGNvZGUgYXNzb2NpYXRlZCB3aXRoIHRoaXMgZXJyb3IuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogQSBjdXN0b20gZXJyb3IgZGVzY3JpcHRpb24uXG4gICAgICovXG4gICAgdCkge1xuICAgICAgICBzdXBlcihlLCB0KSwgdGhpcy5jb2RlID0gZSwgdGhpcy5tZXNzYWdlID0gdCwgXG4gICAgICAgIC8vIEhBQ0s6IFdlIHdyaXRlIGEgdG9TdHJpbmcgcHJvcGVydHkgZGlyZWN0bHkgYmVjYXVzZSBFcnJvciBpcyBub3QgYSByZWFsXG4gICAgICAgIC8vIGNsYXNzIGFuZCBzbyBpbmhlcml0YW5jZSBkb2VzIG5vdCB3b3JrIGNvcnJlY3RseS4gV2UgY291bGQgYWx0ZXJuYXRpdmVseVxuICAgICAgICAvLyBkbyB0aGUgc2FtZSBcImJhY2stZG9vciBpbmhlcml0YW5jZVwiIHRyaWNrIHRoYXQgRmlyZWJhc2VFcnJvciBkb2VzLlxuICAgICAgICB0aGlzLnRvU3RyaW5nID0gKCkgPT4gYCR7dGhpcy5uYW1lfTogW2NvZGU9JHt0aGlzLmNvZGV9XTogJHt0aGlzLm1lc3NhZ2V9YDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIF9fUFJJVkFURV9EZWZlcnJlZCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKCgoZSwgdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlID0gZSwgdGhpcy5yZWplY3QgPSB0O1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfT0F1dGhUb2tlbiB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLnVzZXIgPSB0LCB0aGlzLnR5cGUgPSBcIk9BdXRoXCIsIHRoaXMuaGVhZGVycyA9IG5ldyBNYXAsIHRoaXMuaGVhZGVycy5zZXQoXCJBdXRob3JpemF0aW9uXCIsIGBCZWFyZXIgJHtlfWApO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIENyZWRlbnRpYWxzUHJvdmlkZXIgdGhhdCBhbHdheXMgeWllbGRzIGFuIGVtcHR5IHRva2VuLlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgX19QUklWQVRFX0VtcHR5QXV0aENyZWRlbnRpYWxzUHJvdmlkZXIge1xuICAgIGdldFRva2VuKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7fVxuICAgIHN0YXJ0KGUsIHQpIHtcbiAgICAgICAgLy8gRmlyZSB3aXRoIGluaXRpYWwgdXNlci5cbiAgICAgICAgZS5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiB0KFVzZXIuVU5BVVRIRU5USUNBVEVEKSkpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHt9XG59XG5cbi8qKlxuICogQSBDcmVkZW50aWFsc1Byb3ZpZGVyIHRoYXQgYWx3YXlzIHJldHVybnMgYSBjb25zdGFudCB0b2tlbi4gVXNlZCBmb3JcbiAqIGVtdWxhdG9yIHRva2VuIG1vY2tpbmcuXG4gKi8gY2xhc3MgX19QUklWQVRFX0VtdWxhdG9yQXV0aENyZWRlbnRpYWxzUHJvdmlkZXIge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy50b2tlbiA9IGUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogU3RvcmVzIHRoZSBsaXN0ZW5lciByZWdpc3RlcmVkIHdpdGggc2V0Q2hhbmdlTGlzdGVuZXIoKVxuICAgICAgICAgKiBUaGlzIGlzbid0IGFjdHVhbGx5IG5lY2Vzc2FyeSBzaW5jZSB0aGUgVUlEIG5ldmVyIGNoYW5nZXMsIGJ1dCB3ZSB1c2UgdGhpc1xuICAgICAgICAgKiB0byB2ZXJpZnkgdGhlIGxpc3RlbiBjb250cmFjdCBpcyBhZGhlcmVkIHRvIGluIHRlc3RzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jaGFuZ2VMaXN0ZW5lciA9IG51bGw7XG4gICAgfVxuICAgIGdldFRva2VuKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMudG9rZW4pO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7fVxuICAgIHN0YXJ0KGUsIHQpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VMaXN0ZW5lciA9IHQsIFxuICAgICAgICAvLyBGaXJlIHdpdGggaW5pdGlhbCB1c2VyLlxuICAgICAgICBlLmVucXVldWVSZXRyeWFibGUoKCgpID0+IHQodGhpcy50b2tlbi51c2VyKSkpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VMaXN0ZW5lciA9IG51bGw7XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfRmlyZWJhc2VBdXRoQ3JlZGVudGlhbHNQcm92aWRlciB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLnQgPSBlLCBcbiAgICAgICAgLyoqIFRyYWNrcyB0aGUgY3VycmVudCBVc2VyLiAqL1xuICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0gVXNlci5VTkFVVEhFTlRJQ0FURUQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQ291bnRlciB1c2VkIHRvIGRldGVjdCBpZiB0aGUgdG9rZW4gY2hhbmdlZCB3aGlsZSBhIGdldFRva2VuIHJlcXVlc3Qgd2FzXG4gICAgICAgICAqIG91dHN0YW5kaW5nLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pID0gMCwgdGhpcy5mb3JjZVJlZnJlc2ggPSAhMSwgdGhpcy5hdXRoID0gbnVsbDtcbiAgICB9XG4gICAgc3RhcnQoZSwgdCkge1xuICAgICAgICBsZXQgbiA9IHRoaXMuaTtcbiAgICAgICAgLy8gQSBjaGFuZ2UgbGlzdGVuZXIgdGhhdCBwcmV2ZW50cyBkb3VibGUtZmlyaW5nIGZvciB0aGUgc2FtZSB0b2tlbiBjaGFuZ2UuXG4gICAgICAgICAgICAgICAgY29uc3QgX19QUklWQVRFX2d1YXJkZWRDaGFuZ2VMaXN0ZW5lciA9IGUgPT4gdGhpcy5pICE9PSBuID8gKG4gPSB0aGlzLmksIFxuICAgICAgICB0KGUpKSA6IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAvLyBBIHByb21pc2UgdGhhdCBjYW4gYmUgd2FpdGVkIG9uIHRvIGJsb2NrIG9uIHRoZSBuZXh0IHRva2VuIGNoYW5nZS5cbiAgICAgICAgLy8gVGhpcyBwcm9taXNlIGlzIHJlLWNyZWF0ZWQgYWZ0ZXIgZWFjaCBjaGFuZ2UuXG4gICAgICAgICAgICAgICAgbGV0IHIgPSBuZXcgX19QUklWQVRFX0RlZmVycmVkO1xuICAgICAgICB0aGlzLm8gPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmkrKywgdGhpcy5jdXJyZW50VXNlciA9IHRoaXMudSgpLCByLnJlc29sdmUoKSwgciA9IG5ldyBfX1BSSVZBVEVfRGVmZXJyZWQsIFxuICAgICAgICAgICAgZS5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiBfX1BSSVZBVEVfZ3VhcmRlZENoYW5nZUxpc3RlbmVyKHRoaXMuY3VycmVudFVzZXIpKSk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IF9fUFJJVkFURV9hd2FpdE5leHRUb2tlbiA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSByO1xuICAgICAgICAgICAgZS5lbnF1ZXVlUmV0cnlhYmxlKChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdC5wcm9taXNlLCBhd2FpdCBfX1BSSVZBVEVfZ3VhcmRlZENoYW5nZUxpc3RlbmVyKHRoaXMuY3VycmVudFVzZXIpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9LCBfX1BSSVZBVEVfcmVnaXN0ZXJBdXRoID0gZSA9PiB7XG4gICAgICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJGaXJlYmFzZUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyXCIsIFwiQXV0aCBkZXRlY3RlZFwiKSwgdGhpcy5hdXRoID0gZSwgXG4gICAgICAgICAgICB0aGlzLmF1dGguYWRkQXV0aFRva2VuTGlzdGVuZXIodGhpcy5vKSwgX19QUklWQVRFX2F3YWl0TmV4dFRva2VuKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudC5vbkluaXQoKGUgPT4gX19QUklWQVRFX3JlZ2lzdGVyQXV0aChlKSkpLCBcbiAgICAgICAgLy8gT3VyIHVzZXJzIGNhbiBpbml0aWFsaXplIEF1dGggcmlnaHQgYWZ0ZXIgRmlyZXN0b3JlLCBzbyB3ZSBnaXZlIGl0XG4gICAgICAgIC8vIGEgY2hhbmNlIHRvIHJlZ2lzdGVyIGl0c2VsZiB3aXRoIHRoZSBjb21wb25lbnQgZnJhbWV3b3JrIGJlZm9yZSB3ZVxuICAgICAgICAvLyBkZXRlcm1pbmUgd2hldGhlciB0byBzdGFydCB1cCBpbiB1bmF1dGhlbnRpY2F0ZWQgbW9kZS5cbiAgICAgICAgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmF1dGgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy50LmdldEltbWVkaWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiAhMFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGUgPyBfX1BSSVZBVEVfcmVnaXN0ZXJBdXRoKGUpIDogKFxuICAgICAgICAgICAgICAgIC8vIElmIGF1dGggaXMgc3RpbGwgbm90IGF2YWlsYWJsZSwgcHJvY2VlZCB3aXRoIGBudWxsYCB1c2VyXG4gICAgICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiRmlyZWJhc2VBdXRoQ3JlZGVudGlhbHNQcm92aWRlclwiLCBcIkF1dGggbm90IHlldCBkZXRlY3RlZFwiKSwgXG4gICAgICAgICAgICAgICAgci5yZXNvbHZlKCksIHIgPSBuZXcgX19QUklWQVRFX0RlZmVycmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksIDApLCBfX1BSSVZBVEVfYXdhaXROZXh0VG9rZW4oKTtcbiAgICB9XG4gICAgZ2V0VG9rZW4oKSB7XG4gICAgICAgIC8vIFRha2Ugbm90ZSBvZiB0aGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgdG9rZW5Db3VudGVyIHNvIHRoYXQgdGhpcyBtZXRob2RcbiAgICAgICAgLy8gY2FuIGZhaWwgKHdpdGggYW4gQUJPUlRFRCBlcnJvcikgaWYgdGhlcmUgaXMgYSB0b2tlbiBjaGFuZ2Ugd2hpbGUgdGhlXG4gICAgICAgIC8vIHJlcXVlc3QgaXMgb3V0c3RhbmRpbmcuXG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmksIHQgPSB0aGlzLmZvcmNlUmVmcmVzaDtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yY2VSZWZyZXNoID0gITEsIHRoaXMuYXV0aCA/IHRoaXMuYXV0aC5nZXRUb2tlbih0KS50aGVuKCh0ID0+IFxuICAgICAgICAvLyBDYW5jZWwgdGhlIHJlcXVlc3Qgc2luY2UgdGhlIHRva2VuIGNoYW5nZWQgd2hpbGUgdGhlIHJlcXVlc3Qgd2FzXG4gICAgICAgIC8vIG91dHN0YW5kaW5nIHNvIHRoZSByZXNwb25zZSBpcyBwb3RlbnRpYWxseSBmb3IgYSBwcmV2aW91cyB1c2VyICh3aGljaFxuICAgICAgICAvLyB1c2VyLCB3ZSBjYW4ndCBiZSBzdXJlKS5cbiAgICAgICAgdGhpcy5pICE9PSBlID8gKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkZpcmViYXNlQXV0aENyZWRlbnRpYWxzUHJvdmlkZXJcIiwgXCJnZXRUb2tlbiBhYm9ydGVkIGR1ZSB0byB0b2tlbiBjaGFuZ2UuXCIpLCBcbiAgICAgICAgdGhpcy5nZXRUb2tlbigpKSA6IHQgPyAoX19QUklWQVRFX2hhcmRBc3NlcnQoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdC5hY2Nlc3NUb2tlbiksIFxuICAgICAgICBuZXcgX19QUklWQVRFX09BdXRoVG9rZW4odC5hY2Nlc3NUb2tlbiwgdGhpcy5jdXJyZW50VXNlcikpIDogbnVsbCkpIDogUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7XG4gICAgICAgIHRoaXMuZm9yY2VSZWZyZXNoID0gITA7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICB0aGlzLmF1dGggJiYgdGhpcy5hdXRoLnJlbW92ZUF1dGhUb2tlbkxpc3RlbmVyKHRoaXMubyk7XG4gICAgfVxuICAgIC8vIEF1dGguZ2V0VWlkKCkgY2FuIHJldHVybiBudWxsIGV2ZW4gd2l0aCBhIHVzZXIgbG9nZ2VkIGluLiBJdCBpcyBiZWNhdXNlXG4gICAgLy8gZ2V0VWlkKCkgaXMgc3luY2hyb25vdXMsIGJ1dCB0aGUgYXV0aCBjb2RlIHBvcHVsYXRpbmcgVWlkIGlzIGFzeW5jaHJvbm91cy5cbiAgICAvLyBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWQgaW4gdGhlIEF1dGhUb2tlbkxpc3RlbmVyIGNhbGxiYWNrXG4gICAgLy8gdG8gZ3VhcmFudGVlIHRvIGdldCB0aGUgYWN0dWFsIHVzZXIuXG4gICAgdSgpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuYXV0aCAmJiB0aGlzLmF1dGguZ2V0VWlkKCk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfaGFyZEFzc2VydChudWxsID09PSBlIHx8IFwic3RyaW5nXCIgPT0gdHlwZW9mIGUpLCBuZXcgVXNlcihlKTtcbiAgICB9XG59XG5cbi8qXG4gKiBGaXJzdFBhcnR5VG9rZW4gcHJvdmlkZXMgYSBmcmVzaCB0b2tlbiBlYWNoIHRpbWUgaXRzIHZhbHVlXG4gKiBpcyByZXF1ZXN0ZWQsIGJlY2F1c2UgaWYgdGhlIHRva2VuIGlzIHRvbyBvbGQsIHJlcXVlc3RzIHdpbGwgYmUgcmVqZWN0ZWQuXG4gKiBUZWNobmljYWxseSB0aGlzIG1heSBubyBsb25nZXIgYmUgbmVjZXNzYXJ5IHNpbmNlIHRoZSBTREsgc2hvdWxkIGdyYWNlZnVsbHlcbiAqIHJlY292ZXIgZnJvbSB1bmF1dGhlbnRpY2F0ZWQgZXJyb3JzIChzZWUgYi8zMzE0NzgxOCBmb3IgY29udGV4dCksIGJ1dCBpdCdzXG4gKiBzYWZlciB0byBrZWVwIHRoZSBpbXBsZW1lbnRhdGlvbiBhcy1pcy5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfRmlyc3RQYXJ0eVRva2VuIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuKSB7XG4gICAgICAgIHRoaXMubCA9IGUsIHRoaXMuaCA9IHQsIHRoaXMuUCA9IG4sIHRoaXMudHlwZSA9IFwiRmlyc3RQYXJ0eVwiLCB0aGlzLnVzZXIgPSBVc2VyLkZJUlNUX1BBUlRZLCBcbiAgICAgICAgdGhpcy5JID0gbmV3IE1hcDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyBhbiBhdXRob3JpemF0aW9uIHRva2VuLCB1c2luZyBhIHByb3ZpZGVkIGZhY3RvcnkgZnVuY3Rpb24sIG9yIHJldHVyblxuICAgICAqIG51bGwuXG4gICAgICovICAgIFQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlAgPyB0aGlzLlAoKSA6IG51bGw7XG4gICAgfVxuICAgIGdldCBoZWFkZXJzKCkge1xuICAgICAgICB0aGlzLkkuc2V0KFwiWC1Hb29nLUF1dGhVc2VyXCIsIHRoaXMubCk7XG4gICAgICAgIC8vIFVzZSBhcnJheSBub3RhdGlvbiB0byBwcmV2ZW50IG1pbmlmaWNhdGlvblxuICAgICAgICBjb25zdCBlID0gdGhpcy5UKCk7XG4gICAgICAgIHJldHVybiBlICYmIHRoaXMuSS5zZXQoXCJBdXRob3JpemF0aW9uXCIsIGUpLCB0aGlzLmggJiYgdGhpcy5JLnNldChcIlgtR29vZy1JYW0tQXV0aG9yaXphdGlvbi1Ub2tlblwiLCB0aGlzLmgpLCBcbiAgICAgICAgdGhpcy5JO1xuICAgIH1cbn1cblxuLypcbiAqIFByb3ZpZGVzIHVzZXIgY3JlZGVudGlhbHMgcmVxdWlyZWQgZm9yIHRoZSBGaXJlc3RvcmUgSmF2YVNjcmlwdCBTREtcbiAqIHRvIGF1dGhlbnRpY2F0ZSB0aGUgdXNlciwgdXNpbmcgdGVjaG5pcXVlIHRoYXQgaXMgb25seSBhdmFpbGFibGVcbiAqIHRvIGFwcGxpY2F0aW9ucyBob3N0ZWQgYnkgR29vZ2xlLlxuICovIGNsYXNzIF9fUFJJVkFURV9GaXJzdFBhcnR5QXV0aENyZWRlbnRpYWxzUHJvdmlkZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4pIHtcbiAgICAgICAgdGhpcy5sID0gZSwgdGhpcy5oID0gdCwgdGhpcy5QID0gbjtcbiAgICB9XG4gICAgZ2V0VG9rZW4oKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IF9fUFJJVkFURV9GaXJzdFBhcnR5VG9rZW4odGhpcy5sLCB0aGlzLmgsIHRoaXMuUCkpO1xuICAgIH1cbiAgICBzdGFydChlLCB0KSB7XG4gICAgICAgIC8vIEZpcmUgd2l0aCBpbml0aWFsIHVpZC5cbiAgICAgICAgZS5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiB0KFVzZXIuRklSU1RfUEFSVFkpKSk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge31cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7fVxufVxuXG5jbGFzcyBBcHBDaGVja1Rva2VuIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSBlLCB0aGlzLnR5cGUgPSBcIkFwcENoZWNrXCIsIHRoaXMuaGVhZGVycyA9IG5ldyBNYXAsIGUgJiYgZS5sZW5ndGggPiAwICYmIHRoaXMuaGVhZGVycy5zZXQoXCJ4LWZpcmViYXNlLWFwcGNoZWNrXCIsIHRoaXMudmFsdWUpO1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX0ZpcmViYXNlQXBwQ2hlY2tUb2tlblByb3ZpZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuQSA9IGUsIHRoaXMuZm9yY2VSZWZyZXNoID0gITEsIHRoaXMuYXBwQ2hlY2sgPSBudWxsLCB0aGlzLlIgPSBudWxsO1xuICAgIH1cbiAgICBzdGFydChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG9uVG9rZW5DaGFuZ2VkID0gZSA9PiB7XG4gICAgICAgICAgICBudWxsICE9IGUuZXJyb3IgJiYgX19QUklWQVRFX2xvZ0RlYnVnKFwiRmlyZWJhc2VBcHBDaGVja1Rva2VuUHJvdmlkZXJcIiwgYEVycm9yIGdldHRpbmcgQXBwIENoZWNrIHRva2VuOyB1c2luZyBwbGFjZWhvbGRlciB0b2tlbiBpbnN0ZWFkLiBFcnJvcjogJHtlLmVycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICBjb25zdCBuID0gZS50b2tlbiAhPT0gdGhpcy5SO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuUiA9IGUudG9rZW4sIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkZpcmViYXNlQXBwQ2hlY2tUb2tlblByb3ZpZGVyXCIsIGBSZWNlaXZlZCAke24gPyBcIm5ld1wiIDogXCJleGlzdGluZ1wifSB0b2tlbi5gKSwgXG4gICAgICAgICAgICBuID8gdChlLnRva2VuKSA6IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm8gPSB0ID0+IHtcbiAgICAgICAgICAgIGUuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gb25Ub2tlbkNoYW5nZWQodCkpKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgX19QUklWQVRFX3JlZ2lzdGVyQXBwQ2hlY2sgPSBlID0+IHtcbiAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkZpcmViYXNlQXBwQ2hlY2tUb2tlblByb3ZpZGVyXCIsIFwiQXBwQ2hlY2sgZGV0ZWN0ZWRcIiksIHRoaXMuYXBwQ2hlY2sgPSBlLCBcbiAgICAgICAgICAgIHRoaXMuYXBwQ2hlY2suYWRkVG9rZW5MaXN0ZW5lcih0aGlzLm8pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLkEub25Jbml0KChlID0+IF9fUFJJVkFURV9yZWdpc3RlckFwcENoZWNrKGUpKSksIFxuICAgICAgICAvLyBPdXIgdXNlcnMgY2FuIGluaXRpYWxpemUgQXBwQ2hlY2sgYWZ0ZXIgRmlyZXN0b3JlLCBzbyB3ZSBnaXZlIGl0XG4gICAgICAgIC8vIGEgY2hhbmNlIHRvIHJlZ2lzdGVyIGl0c2VsZiB3aXRoIHRoZSBjb21wb25lbnQgZnJhbWV3b3JrLlxuICAgICAgICBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYXBwQ2hlY2spIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy5BLmdldEltbWVkaWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiAhMFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGUgPyBfX1BSSVZBVEVfcmVnaXN0ZXJBcHBDaGVjayhlKSA6IFxuICAgICAgICAgICAgICAgIC8vIElmIEFwcENoZWNrIGlzIHN0aWxsIG5vdCBhdmFpbGFibGUsIHByb2NlZWQgd2l0aG91dCBpdC5cbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJGaXJlYmFzZUFwcENoZWNrVG9rZW5Qcm92aWRlclwiLCBcIkFwcENoZWNrIG5vdCB5ZXQgZGV0ZWN0ZWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLCAwKTtcbiAgICB9XG4gICAgZ2V0VG9rZW4oKSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmZvcmNlUmVmcmVzaDtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yY2VSZWZyZXNoID0gITEsIHRoaXMuYXBwQ2hlY2sgPyB0aGlzLmFwcENoZWNrLmdldFRva2VuKGUpLnRoZW4oKGUgPT4gZSA/IChfX1BSSVZBVEVfaGFyZEFzc2VydChcInN0cmluZ1wiID09IHR5cGVvZiBlLnRva2VuKSwgXG4gICAgICAgIHRoaXMuUiA9IGUudG9rZW4sIG5ldyBBcHBDaGVja1Rva2VuKGUudG9rZW4pKSA6IG51bGwpKSA6IFByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgICB9XG4gICAgaW52YWxpZGF0ZVRva2VuKCkge1xuICAgICAgICB0aGlzLmZvcmNlUmVmcmVzaCA9ICEwO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgdGhpcy5hcHBDaGVjayAmJiB0aGlzLmFwcENoZWNrLnJlbW92ZVRva2VuTGlzdGVuZXIodGhpcy5vKTtcbiAgICB9XG59XG5cbi8qKlxuICogQW4gQXBwQ2hlY2sgdG9rZW4gcHJvdmlkZXIgdGhhdCBhbHdheXMgeWllbGRzIGFuIGVtcHR5IHRva2VuLlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgX19QUklWQVRFX0VtcHR5QXBwQ2hlY2tUb2tlblByb3ZpZGVyIHtcbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgQXBwQ2hlY2tUb2tlbihcIlwiKSk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb2tlbigpIHt9XG4gICAgc3RhcnQoZSwgdCkge31cbiAgICBzaHV0ZG93bigpIHt9XG59XG5cbi8qKlxuICogQnVpbGRzIGEgQ3JlZGVudGlhbHNQcm92aWRlciBkZXBlbmRpbmcgb24gdGhlIHR5cGUgb2ZcbiAqIHRoZSBjcmVkZW50aWFscyBwYXNzZWQgaW4uXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEdlbmVyYXRlcyBgbkJ5dGVzYCBvZiByYW5kb20gYnl0ZXMuXG4gKlxuICogSWYgYG5CeXRlcyA8IDBgICwgYW4gZXJyb3Igd2lsbCBiZSB0aHJvd24uXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9yYW5kb21CeXRlcyhlKSB7XG4gICAgLy8gUG9seWZpbGxzIGZvciBJRSBhbmQgV2ViV29ya2VyIGJ5IHVzaW5nIGBzZWxmYCBhbmQgYG1zQ3J5cHRvYCB3aGVuIGBjcnlwdG9gIGlzIG5vdCBhdmFpbGFibGUuXG4gICAgY29uc3QgdCA9IFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2Ygc2VsZiAmJiAoc2VsZi5jcnlwdG8gfHwgc2VsZi5tc0NyeXB0byksIG4gPSBuZXcgVWludDhBcnJheShlKTtcbiAgICBpZiAodCAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIHQuZ2V0UmFuZG9tVmFsdWVzKSB0LmdldFJhbmRvbVZhbHVlcyhuKTsgZWxzZSBcbiAgICAvLyBGYWxscyBiYWNrIHRvIE1hdGgucmFuZG9tXG4gICAgZm9yIChsZXQgdCA9IDA7IHQgPCBlOyB0KyspIG5bdF0gPSBNYXRoLmZsb29yKDI1NiAqIE1hdGgucmFuZG9tKCkpO1xuICAgIHJldHVybiBuO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHV0aWxpdHkgY2xhc3MgZm9yIGdlbmVyYXRpbmcgdW5pcXVlIGFscGhhbnVtZXJpYyBJRHMgb2YgYSBzcGVjaWZpZWQgbGVuZ3RoLlxuICpcbiAqIEBpbnRlcm5hbFxuICogRXhwb3J0ZWQgaW50ZXJuYWxseSBmb3IgdGVzdGluZyBwdXJwb3Nlcy5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfQXV0b0lkIHtcbiAgICBzdGF0aWMgbmV3SWQoKSB7XG4gICAgICAgIC8vIEFscGhhbnVtZXJpYyBjaGFyYWN0ZXJzXG4gICAgICAgIGNvbnN0IGUgPSBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5XCIsIHQgPSBNYXRoLmZsb29yKDI1NiAvIGUubGVuZ3RoKSAqIGUubGVuZ3RoO1xuICAgICAgICAvLyBUaGUgbGFyZ2VzdCBieXRlIHZhbHVlIHRoYXQgaXMgYSBtdWx0aXBsZSBvZiBgY2hhci5sZW5ndGhgLlxuICAgICAgICAgICAgICAgIGxldCBuID0gXCJcIjtcbiAgICAgICAgZm9yICg7bi5sZW5ndGggPCAyMDsgKSB7XG4gICAgICAgICAgICBjb25zdCByID0gX19QUklWQVRFX3JhbmRvbUJ5dGVzKDQwKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgci5sZW5ndGg7ICsraSkgXG4gICAgICAgICAgICAvLyBPbmx5IGFjY2VwdCB2YWx1ZXMgdGhhdCBhcmUgWzAsIG1heE11bHRpcGxlKSwgdGhpcyBlbnN1cmVzIHRoZXkgY2FuXG4gICAgICAgICAgICAvLyBiZSBldmVubHkgbWFwcGVkIHRvIGluZGljZXMgb2YgYGNoYXJzYCB2aWEgYSBtb2R1bG8gb3BlcmF0aW9uLlxuICAgICAgICAgICAgbi5sZW5ndGggPCAyMCAmJiByW2ldIDwgdCAmJiAobiArPSBlLmNoYXJBdChyW2ldICUgZS5sZW5ndGgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbjtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKGUsIHQpIHtcbiAgICByZXR1cm4gZSA8IHQgPyAtMSA6IGUgPiB0ID8gMSA6IDA7XG59XG5cbi8qKiBIZWxwZXIgdG8gY29tcGFyZSBhcnJheXMgdXNpbmcgaXNFcXVhbCgpLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfYXJyYXlFcXVhbHMoZSwgdCwgbikge1xuICAgIHJldHVybiBlLmxlbmd0aCA9PT0gdC5sZW5ndGggJiYgZS5ldmVyeSgoKGUsIHIpID0+IG4oZSwgdFtyXSkpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBpbW1lZGlhdGUgbGV4aWNvZ3JhcGhpY2FsbHktZm9sbG93aW5nIHN0cmluZy4gVGhpcyBpcyB1c2VmdWwgdG9cbiAqIGNvbnN0cnVjdCBhbiBpbmNsdXNpdmUgcmFuZ2UgZm9yIGluZGV4ZWRkYiBpdGVyYXRvcnMuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2ltbWVkaWF0ZVN1Y2Nlc3NvcihlKSB7XG4gICAgLy8gUmV0dXJuIHRoZSBpbnB1dCBzdHJpbmcsIHdpdGggYW4gYWRkaXRpb25hbCBOVUwgYnl0ZSBhcHBlbmRlZC5cbiAgICByZXR1cm4gZSArIFwiXFwwXCI7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBUaGUgZWFybGllc3QgZGF0ZSBzdXBwb3J0ZWQgYnkgRmlyZXN0b3JlIHRpbWVzdGFtcHMgKDAwMDEtMDEtMDFUMDA6MDA6MDBaKS5cbi8qKlxuICogQSBgVGltZXN0YW1wYCByZXByZXNlbnRzIGEgcG9pbnQgaW4gdGltZSBpbmRlcGVuZGVudCBvZiBhbnkgdGltZSB6b25lIG9yXG4gKiBjYWxlbmRhciwgcmVwcmVzZW50ZWQgYXMgc2Vjb25kcyBhbmQgZnJhY3Rpb25zIG9mIHNlY29uZHMgYXQgbmFub3NlY29uZFxuICogcmVzb2x1dGlvbiBpbiBVVEMgRXBvY2ggdGltZS5cbiAqXG4gKiBJdCBpcyBlbmNvZGVkIHVzaW5nIHRoZSBQcm9sZXB0aWMgR3JlZ29yaWFuIENhbGVuZGFyIHdoaWNoIGV4dGVuZHMgdGhlXG4gKiBHcmVnb3JpYW4gY2FsZW5kYXIgYmFja3dhcmRzIHRvIHllYXIgb25lLiBJdCBpcyBlbmNvZGVkIGFzc3VtaW5nIGFsbCBtaW51dGVzXG4gKiBhcmUgNjAgc2Vjb25kcyBsb25nLCBpLmUuIGxlYXAgc2Vjb25kcyBhcmUgXCJzbWVhcmVkXCIgc28gdGhhdCBubyBsZWFwIHNlY29uZFxuICogdGFibGUgaXMgbmVlZGVkIGZvciBpbnRlcnByZXRhdGlvbi4gUmFuZ2UgaXMgZnJvbSAwMDAxLTAxLTAxVDAwOjAwOjAwWiB0b1xuICogOTk5OS0xMi0zMVQyMzo1OTo1OS45OTk5OTk5OTlaLlxuICpcbiAqIEZvciBleGFtcGxlcyBhbmQgZnVydGhlciBzcGVjaWZpY2F0aW9ucywgcmVmZXIgdG8gdGhlXG4gKiB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9wcm90b2J1Zi9ibG9iL21hc3Rlci9zcmMvZ29vZ2xlL3Byb3RvYnVmL3RpbWVzdGFtcC5wcm90byB8IFRpbWVzdGFtcCBkZWZpbml0aW9ufS5cbiAqL1xuY2xhc3MgVGltZXN0YW1wIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRpbWVzdGFtcC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzZWNvbmRzIC0gVGhlIG51bWJlciBvZiBzZWNvbmRzIG9mIFVUQyB0aW1lIHNpbmNlIFVuaXggZXBvY2hcbiAgICAgKiAgICAgMTk3MC0wMS0wMVQwMDowMDowMFouIE11c3QgYmUgZnJvbSAwMDAxLTAxLTAxVDAwOjAwOjAwWiB0b1xuICAgICAqICAgICA5OTk5LTEyLTMxVDIzOjU5OjU5WiBpbmNsdXNpdmUuXG4gICAgICogQHBhcmFtIG5hbm9zZWNvbmRzIC0gVGhlIG5vbi1uZWdhdGl2ZSBmcmFjdGlvbnMgb2YgYSBzZWNvbmQgYXQgbmFub3NlY29uZFxuICAgICAqICAgICByZXNvbHV0aW9uLiBOZWdhdGl2ZSBzZWNvbmQgdmFsdWVzIHdpdGggZnJhY3Rpb25zIG11c3Qgc3RpbGwgaGF2ZVxuICAgICAqICAgICBub24tbmVnYXRpdmUgbmFub3NlY29uZHMgdmFsdWVzIHRoYXQgY291bnQgZm9yd2FyZCBpbiB0aW1lLiBNdXN0IGJlXG4gICAgICogICAgIGZyb20gMCB0byA5OTksOTk5LDk5OSBpbmNsdXNpdmUuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiBzZWNvbmRzIG9mIFVUQyB0aW1lIHNpbmNlIFVuaXggZXBvY2ggMTk3MC0wMS0wMVQwMDowMDowMFouXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIGZyYWN0aW9ucyBvZiBhIHNlY29uZCBhdCBuYW5vc2Vjb25kIHJlc29sdXRpb24uKlxuICAgICAqL1xuICAgIHQpIHtcbiAgICAgICAgaWYgKHRoaXMuc2Vjb25kcyA9IGUsIHRoaXMubmFub3NlY29uZHMgPSB0LCB0IDwgMCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEMuSU5WQUxJRF9BUkdVTUVOVCwgXCJUaW1lc3RhbXAgbmFub3NlY29uZHMgb3V0IG9mIHJhbmdlOiBcIiArIHQpO1xuICAgICAgICBpZiAodCA+PSAxZTkpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDLklOVkFMSURfQVJHVU1FTlQsIFwiVGltZXN0YW1wIG5hbm9zZWNvbmRzIG91dCBvZiByYW5nZTogXCIgKyB0KTtcbiAgICAgICAgaWYgKGUgPCAtNjIxMzU1OTY4MDApIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDLklOVkFMSURfQVJHVU1FTlQsIFwiVGltZXN0YW1wIHNlY29uZHMgb3V0IG9mIHJhbmdlOiBcIiArIGUpO1xuICAgICAgICAvLyBUaGlzIHdpbGwgYnJlYWsgaW4gdGhlIHllYXIgMTAsMDAwLlxuICAgICAgICAgICAgICAgIGlmIChlID49IDI1MzQwMjMwMDgwMCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEMuSU5WQUxJRF9BUkdVTUVOVCwgXCJUaW1lc3RhbXAgc2Vjb25kcyBvdXQgb2YgcmFuZ2U6IFwiICsgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGltZXN0YW1wIHdpdGggdGhlIGN1cnJlbnQgZGF0ZSwgd2l0aCBtaWxsaXNlY29uZCBwcmVjaXNpb24uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBhIG5ldyB0aW1lc3RhbXAgcmVwcmVzZW50aW5nIHRoZSBjdXJyZW50IGRhdGUuXG4gICAgICovICAgIHN0YXRpYyBub3coKSB7XG4gICAgICAgIHJldHVybiBUaW1lc3RhbXAuZnJvbU1pbGxpcyhEYXRlLm5vdygpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0aW1lc3RhbXAgZnJvbSB0aGUgZ2l2ZW4gZGF0ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkYXRlIC0gVGhlIGRhdGUgdG8gaW5pdGlhbGl6ZSB0aGUgYFRpbWVzdGFtcGAgZnJvbS5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBgVGltZXN0YW1wYCByZXByZXNlbnRpbmcgdGhlIHNhbWUgcG9pbnQgaW4gdGltZSBhcyB0aGUgZ2l2ZW5cbiAgICAgKiAgICAgZGF0ZS5cbiAgICAgKi8gICAgc3RhdGljIGZyb21EYXRlKGUpIHtcbiAgICAgICAgcmV0dXJuIFRpbWVzdGFtcC5mcm9tTWlsbGlzKGUuZ2V0VGltZSgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0aW1lc3RhbXAgZnJvbSB0aGUgZ2l2ZW4gbnVtYmVyIG9mIG1pbGxpc2Vjb25kcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBtaWxsaXNlY29uZHMgLSBOdW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIFVuaXggZXBvY2hcbiAgICAgKiAgICAgMTk3MC0wMS0wMVQwMDowMDowMFouXG4gICAgICogQHJldHVybnMgQSBuZXcgYFRpbWVzdGFtcGAgcmVwcmVzZW50aW5nIHRoZSBzYW1lIHBvaW50IGluIHRpbWUgYXMgdGhlIGdpdmVuXG4gICAgICogICAgIG51bWJlciBvZiBtaWxsaXNlY29uZHMuXG4gICAgICovICAgIHN0YXRpYyBmcm9tTWlsbGlzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IE1hdGguZmxvb3IoZSAvIDFlMyksIG4gPSBNYXRoLmZsb29yKDFlNiAqIChlIC0gMWUzICogdCkpO1xuICAgICAgICByZXR1cm4gbmV3IFRpbWVzdGFtcCh0LCBuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYSBgVGltZXN0YW1wYCB0byBhIEphdmFTY3JpcHQgYERhdGVgIG9iamVjdC4gVGhpcyBjb252ZXJzaW9uXG4gICAgICogY2F1c2VzIGEgbG9zcyBvZiBwcmVjaXNpb24gc2luY2UgYERhdGVgIG9iamVjdHMgb25seSBzdXBwb3J0IG1pbGxpc2Vjb25kXG4gICAgICogcHJlY2lzaW9uLlxuICAgICAqXG4gICAgICogQHJldHVybnMgSmF2YVNjcmlwdCBgRGF0ZWAgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgc2FtZSBwb2ludCBpbiB0aW1lIGFzXG4gICAgICogICAgIHRoaXMgYFRpbWVzdGFtcGAsIHdpdGggbWlsbGlzZWNvbmQgcHJlY2lzaW9uLlxuICAgICAqLyAgICB0b0RhdGUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSh0aGlzLnRvTWlsbGlzKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhIGBUaW1lc3RhbXBgIHRvIGEgbnVtZXJpYyB0aW1lc3RhbXAgKGluIG1pbGxpc2Vjb25kcyBzaW5jZVxuICAgICAqIGVwb2NoKS4gVGhpcyBvcGVyYXRpb24gY2F1c2VzIGEgbG9zcyBvZiBwcmVjaXNpb24uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgcG9pbnQgaW4gdGltZSBjb3JyZXNwb25kaW5nIHRvIHRoaXMgdGltZXN0YW1wLCByZXByZXNlbnRlZCBhc1xuICAgICAqICAgICB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBzaW5jZSBVbml4IGVwb2NoIDE5NzAtMDEtMDFUMDA6MDA6MDBaLlxuICAgICAqLyAgICB0b01pbGxpcygpIHtcbiAgICAgICAgcmV0dXJuIDFlMyAqIHRoaXMuc2Vjb25kcyArIHRoaXMubmFub3NlY29uZHMgLyAxZTY7XG4gICAgfVxuICAgIF9jb21wYXJlVG8oZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWNvbmRzID09PSBlLnNlY29uZHMgPyBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcih0aGlzLm5hbm9zZWNvbmRzLCBlLm5hbm9zZWNvbmRzKSA6IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKHRoaXMuc2Vjb25kcywgZS5zZWNvbmRzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgYFRpbWVzdGFtcGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBgVGltZXN0YW1wYCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBUaW1lc3RhbXBgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICovICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gZS5zZWNvbmRzID09PSB0aGlzLnNlY29uZHMgJiYgZS5uYW5vc2Vjb25kcyA9PT0gdGhpcy5uYW5vc2Vjb25kcztcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSB0ZXh0dWFsIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgYFRpbWVzdGFtcGAuICovICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gXCJUaW1lc3RhbXAoc2Vjb25kcz1cIiArIHRoaXMuc2Vjb25kcyArIFwiLCBuYW5vc2Vjb25kcz1cIiArIHRoaXMubmFub3NlY29uZHMgKyBcIilcIjtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSBKU09OLXNlcmlhbGl6YWJsZSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIGBUaW1lc3RhbXBgLiAqLyAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzZWNvbmRzOiB0aGlzLnNlY29uZHMsXG4gICAgICAgICAgICBuYW5vc2Vjb25kczogdGhpcy5uYW5vc2Vjb25kc1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGlzIG9iamVjdCB0byBhIHByaW1pdGl2ZSBzdHJpbmcsIHdoaWNoIGFsbG93cyBgVGltZXN0YW1wYCBvYmplY3RzXG4gICAgICogdG8gYmUgY29tcGFyZWQgdXNpbmcgdGhlIGA+YCwgYDw9YCwgYD49YCBhbmQgYD5gIG9wZXJhdG9ycy5cbiAgICAgKi8gICAgdmFsdWVPZigpIHtcbiAgICAgICAgLy8gVGhpcyBtZXRob2QgcmV0dXJucyBhIHN0cmluZyBvZiB0aGUgZm9ybSA8c2Vjb25kcz4uPG5hbm9zZWNvbmRzPiB3aGVyZVxuICAgICAgICAvLyA8c2Vjb25kcz4gaXMgdHJhbnNsYXRlZCB0byBoYXZlIGEgbm9uLW5lZ2F0aXZlIHZhbHVlIGFuZCBib3RoIDxzZWNvbmRzPlxuICAgICAgICAvLyBhbmQgPG5hbm9zZWNvbmRzPiBhcmUgbGVmdC1wYWRkZWQgd2l0aCB6ZXJvZXMgdG8gYmUgYSBjb25zaXN0ZW50IGxlbmd0aC5cbiAgICAgICAgLy8gU3RyaW5ncyB3aXRoIHRoaXMgZm9ybWF0IHRoZW4gaGF2ZSBhIGxleGlvZ3JhcGhpY2FsIG9yZGVyaW5nIHRoYXQgbWF0Y2hlc1xuICAgICAgICAvLyB0aGUgZXhwZWN0ZWQgb3JkZXJpbmcuIFRoZSA8c2Vjb25kcz4gdHJhbnNsYXRpb24gaXMgZG9uZSB0byBhdm9pZCBoYXZpbmdcbiAgICAgICAgLy8gYSBsZWFkaW5nIG5lZ2F0aXZlIHNpZ24gKGkuZS4gYSBsZWFkaW5nICctJyBjaGFyYWN0ZXIpIGluIGl0cyBzdHJpbmdcbiAgICAgICAgLy8gcmVwcmVzZW50YXRpb24sIHdoaWNoIHdvdWxkIGFmZmVjdCBpdHMgbGV4aW9ncmFwaGljYWwgb3JkZXJpbmcuXG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnNlY29uZHMgLSAtNjIxMzU1OTY4MDA7XG4gICAgICAgIC8vIE5vdGU6IFVwIHRvIDEyIGRlY2ltYWwgZGlnaXRzIGFyZSByZXF1aXJlZCB0byByZXByZXNlbnQgYWxsIHZhbGlkXG4gICAgICAgIC8vICdzZWNvbmRzJyB2YWx1ZXMuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFN0cmluZyhlKS5wYWRTdGFydCgxMiwgXCIwXCIpICsgXCIuXCIgKyBTdHJpbmcodGhpcy5uYW5vc2Vjb25kcykucGFkU3RhcnQoOSwgXCIwXCIpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSB2ZXJzaW9uIG9mIGEgZG9jdW1lbnQgaW4gRmlyZXN0b3JlLiBUaGlzIGNvcnJlc3BvbmRzIHRvIHRoZSB2ZXJzaW9uXG4gKiB0aW1lc3RhbXAsIHN1Y2ggYXMgdXBkYXRlX3RpbWUgb3IgcmVhZF90aW1lLlxuICovIGNsYXNzIFNuYXBzaG90VmVyc2lvbiB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLnRpbWVzdGFtcCA9IGU7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tVGltZXN0YW1wKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTbmFwc2hvdFZlcnNpb24oZSk7XG4gICAgfVxuICAgIHN0YXRpYyBtaW4oKSB7XG4gICAgICAgIHJldHVybiBuZXcgU25hcHNob3RWZXJzaW9uKG5ldyBUaW1lc3RhbXAoMCwgMCkpO1xuICAgIH1cbiAgICBzdGF0aWMgbWF4KCkge1xuICAgICAgICByZXR1cm4gbmV3IFNuYXBzaG90VmVyc2lvbihuZXcgVGltZXN0YW1wKDI1MzQwMjMwMDc5OSwgOTk5OTk5OTk5KSk7XG4gICAgfVxuICAgIGNvbXBhcmVUbyhlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVzdGFtcC5fY29tcGFyZVRvKGUudGltZXN0YW1wKTtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVzdGFtcC5pc0VxdWFsKGUudGltZXN0YW1wKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSBudW1iZXIgcmVwcmVzZW50YXRpb24gb2YgdGhlIHZlcnNpb24gZm9yIHVzZSBpbiBzcGVjIHRlc3RzLiAqLyAgICB0b01pY3Jvc2Vjb25kcygpIHtcbiAgICAgICAgLy8gQ29udmVydCB0byBtaWNyb3NlY29uZHMuXG4gICAgICAgIHJldHVybiAxZTYgKiB0aGlzLnRpbWVzdGFtcC5zZWNvbmRzICsgdGhpcy50aW1lc3RhbXAubmFub3NlY29uZHMgLyAxZTM7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gXCJTbmFwc2hvdFZlcnNpb24oXCIgKyB0aGlzLnRpbWVzdGFtcC50b1N0cmluZygpICsgXCIpXCI7XG4gICAgfVxuICAgIHRvVGltZXN0YW1wKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aW1lc3RhbXA7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBQYXRoIHJlcHJlc2VudHMgYW4gb3JkZXJlZCBzZXF1ZW5jZSBvZiBzdHJpbmcgc2VnbWVudHMuXG4gKi9cbmNsYXNzIEJhc2VQYXRoIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuKSB7XG4gICAgICAgIHZvaWQgMCA9PT0gdCA/IHQgPSAwIDogdCA+IGUubGVuZ3RoICYmIGZhaWwoKSwgdm9pZCAwID09PSBuID8gbiA9IGUubGVuZ3RoIC0gdCA6IG4gPiBlLmxlbmd0aCAtIHQgJiYgZmFpbCgpLCBcbiAgICAgICAgdGhpcy5zZWdtZW50cyA9IGUsIHRoaXMub2Zmc2V0ID0gdCwgdGhpcy5sZW4gPSBuO1xuICAgIH1cbiAgICBnZXQgbGVuZ3RoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sZW47XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gMCA9PT0gQmFzZVBhdGguY29tcGFyYXRvcih0aGlzLCBlKTtcbiAgICB9XG4gICAgY2hpbGQoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5zZWdtZW50cy5zbGljZSh0aGlzLm9mZnNldCwgdGhpcy5saW1pdCgpKTtcbiAgICAgICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBCYXNlUGF0aCA/IGUuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0LnB1c2goZSk7XG4gICAgICAgIH0pKSA6IHQucHVzaChlKSwgdGhpcy5jb25zdHJ1Y3QodCk7XG4gICAgfVxuICAgIC8qKiBUaGUgaW5kZXggb2Ygb25lIHBhc3QgdGhlIGxhc3Qgc2VnbWVudCBvZiB0aGUgcGF0aC4gKi8gICAgbGltaXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9mZnNldCArIHRoaXMubGVuZ3RoO1xuICAgIH1cbiAgICBwb3BGaXJzdChlKSB7XG4gICAgICAgIHJldHVybiBlID0gdm9pZCAwID09PSBlID8gMSA6IGUsIHRoaXMuY29uc3RydWN0KHRoaXMuc2VnbWVudHMsIHRoaXMub2Zmc2V0ICsgZSwgdGhpcy5sZW5ndGggLSBlKTtcbiAgICB9XG4gICAgcG9wTGFzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0KHRoaXMuc2VnbWVudHMsIHRoaXMub2Zmc2V0LCB0aGlzLmxlbmd0aCAtIDEpO1xuICAgIH1cbiAgICBmaXJzdFNlZ21lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlZ21lbnRzW3RoaXMub2Zmc2V0XTtcbiAgICB9XG4gICAgbGFzdFNlZ21lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldCh0aGlzLmxlbmd0aCAtIDEpO1xuICAgIH1cbiAgICBnZXQoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWdtZW50c1t0aGlzLm9mZnNldCArIGVdO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gMCA9PT0gdGhpcy5sZW5ndGg7XG4gICAgfVxuICAgIGlzUHJlZml4T2YoZSkge1xuICAgICAgICBpZiAoZS5sZW5ndGggPCB0aGlzLmxlbmd0aCkgcmV0dXJuICExO1xuICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IHRoaXMubGVuZ3RoOyB0KyspIGlmICh0aGlzLmdldCh0KSAhPT0gZS5nZXQodCkpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICBpc0ltbWVkaWF0ZVBhcmVudE9mKGUpIHtcbiAgICAgICAgaWYgKHRoaXMubGVuZ3RoICsgMSAhPT0gZS5sZW5ndGgpIHJldHVybiAhMTtcbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCB0aGlzLmxlbmd0aDsgdCsrKSBpZiAodGhpcy5nZXQodCkgIT09IGUuZ2V0KHQpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgZm9yRWFjaChlKSB7XG4gICAgICAgIGZvciAobGV0IHQgPSB0aGlzLm9mZnNldCwgbiA9IHRoaXMubGltaXQoKTsgdCA8IG47IHQrKykgZSh0aGlzLnNlZ21lbnRzW3RdKTtcbiAgICB9XG4gICAgdG9BcnJheSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VnbWVudHMuc2xpY2UodGhpcy5vZmZzZXQsIHRoaXMubGltaXQoKSk7XG4gICAgfVxuICAgIHN0YXRpYyBjb21wYXJhdG9yKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IE1hdGgubWluKGUubGVuZ3RoLCB0Lmxlbmd0aCk7XG4gICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgbjsgcisrKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gZS5nZXQociksIGkgPSB0LmdldChyKTtcbiAgICAgICAgICAgIGlmIChuIDwgaSkgcmV0dXJuIC0xO1xuICAgICAgICAgICAgaWYgKG4gPiBpKSByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZS5sZW5ndGggPCB0Lmxlbmd0aCA/IC0xIDogZS5sZW5ndGggPiB0Lmxlbmd0aCA/IDEgOiAwO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIHNsYXNoLXNlcGFyYXRlZCBwYXRoIGZvciBuYXZpZ2F0aW5nIHJlc291cmNlcyAoZG9jdW1lbnRzIGFuZCBjb2xsZWN0aW9ucylcbiAqIHdpdGhpbiBGaXJlc3RvcmUuXG4gKlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgUmVzb3VyY2VQYXRoIGV4dGVuZHMgQmFzZVBhdGgge1xuICAgIGNvbnN0cnVjdChlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVzb3VyY2VQYXRoKGUsIHQsIG4pO1xuICAgIH1cbiAgICBjYW5vbmljYWxTdHJpbmcoKSB7XG4gICAgICAgIC8vIE5PVEU6IFRoZSBjbGllbnQgaXMgaWdub3JhbnQgb2YgYW55IHBhdGggc2VnbWVudHMgY29udGFpbmluZyBlc2NhcGVcbiAgICAgICAgLy8gc2VxdWVuY2VzIChlLmcuIF9faWQxMjNfXykgYW5kIGp1c3QgcGFzc2VzIHRoZW0gdGhyb3VnaCByYXcgKHRoZXkgZXhpc3RcbiAgICAgICAgLy8gZm9yIGxlZ2FjeSByZWFzb25zIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZnJlcXVlbnRseSkuXG4gICAgICAgIHJldHVybiB0aGlzLnRvQXJyYXkoKS5qb2luKFwiL1wiKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcGF0aFxuICAgICAqIHdoZXJlIGVhY2ggcGF0aCBzZWdtZW50IGhhcyBiZWVuIGVuY29kZWQgd2l0aFxuICAgICAqIGBlbmNvZGVVUklDb21wb25lbnRgLlxuICAgICAqLyAgICB0b1VyaUVuY29kZWRTdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvQXJyYXkoKS5tYXAoZW5jb2RlVVJJQ29tcG9uZW50KS5qb2luKFwiL1wiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHJlc291cmNlIHBhdGggZnJvbSB0aGUgZ2l2ZW4gc2xhc2gtZGVsaW1pdGVkIHN0cmluZy4gSWYgbXVsdGlwbGVcbiAgICAgKiBhcmd1bWVudHMgYXJlIHByb3ZpZGVkLCBhbGwgY29tcG9uZW50cyBhcmUgY29tYmluZWQuIExlYWRpbmcgYW5kIHRyYWlsaW5nXG4gICAgICogc2xhc2hlcyBmcm9tIGFsbCBjb21wb25lbnRzIGFyZSBpZ25vcmVkLlxuICAgICAqLyAgICBzdGF0aWMgZnJvbVN0cmluZyguLi5lKSB7XG4gICAgICAgIC8vIE5PVEU6IFRoZSBjbGllbnQgaXMgaWdub3JhbnQgb2YgYW55IHBhdGggc2VnbWVudHMgY29udGFpbmluZyBlc2NhcGVcbiAgICAgICAgLy8gc2VxdWVuY2VzIChlLmcuIF9faWQxMjNfXykgYW5kIGp1c3QgcGFzc2VzIHRoZW0gdGhyb3VnaCByYXcgKHRoZXkgZXhpc3RcbiAgICAgICAgLy8gZm9yIGxlZ2FjeSByZWFzb25zIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZnJlcXVlbnRseSkuXG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIGUpIHtcbiAgICAgICAgICAgIGlmIChuLmluZGV4T2YoXCIvL1wiKSA+PSAwKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBzZWdtZW50ICgke259KS4gUGF0aHMgbXVzdCBub3QgY29udGFpbiAvLyBpbiB0aGVtLmApO1xuICAgICAgICAgICAgLy8gU3RyaXAgbGVhZGluZyBhbmQgdHJhbGluZyBzbGFzaGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgdC5wdXNoKC4uLm4uc3BsaXQoXCIvXCIpLmZpbHRlcigoZSA9PiBlLmxlbmd0aCA+IDApKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBSZXNvdXJjZVBhdGgodCk7XG4gICAgfVxuICAgIHN0YXRpYyBlbXB0eVBhdGgoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVzb3VyY2VQYXRoKFtdKTtcbiAgICB9XG59XG5cbmNvbnN0IHYgPSAvXltfYS16QS1aXVtfYS16QS1aMC05XSokLztcblxuLyoqXG4gKiBBIGRvdC1zZXBhcmF0ZWQgcGF0aCBmb3IgbmF2aWdhdGluZyBzdWItb2JqZWN0cyB3aXRoaW4gYSBkb2N1bWVudC5cbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIEZpZWxkUGF0aCQxIGV4dGVuZHMgQmFzZVBhdGgge1xuICAgIGNvbnN0cnVjdChlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgRmllbGRQYXRoJDEoZSwgdCwgbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgc3RyaW5nIGNvdWxkIGJlIHVzZWQgYXMgYSBzZWdtZW50IGluIGEgZmllbGQgcGF0aFxuICAgICAqIHdpdGhvdXQgZXNjYXBpbmcuXG4gICAgICovICAgIHN0YXRpYyBpc1ZhbGlkSWRlbnRpZmllcihlKSB7XG4gICAgICAgIHJldHVybiB2LnRlc3QoZSk7XG4gICAgfVxuICAgIGNhbm9uaWNhbFN0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9BcnJheSgpLm1hcCgoZSA9PiAoZSA9IGUucmVwbGFjZSgvXFxcXC9nLCBcIlxcXFxcXFxcXCIpLnJlcGxhY2UoL2AvZywgXCJcXFxcYFwiKSwgXG4gICAgICAgIEZpZWxkUGF0aCQxLmlzVmFsaWRJZGVudGlmaWVyKGUpIHx8IChlID0gXCJgXCIgKyBlICsgXCJgXCIpLCBlKSkpLmpvaW4oXCIuXCIpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGZpZWxkIHJlZmVyZW5jZXMgdGhlIGtleSBvZiBhIGRvY3VtZW50LlxuICAgICAqLyAgICBpc0tleUZpZWxkKCkge1xuICAgICAgICByZXR1cm4gMSA9PT0gdGhpcy5sZW5ndGggJiYgXCJfX25hbWVfX1wiID09PSB0aGlzLmdldCgwKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGZpZWxkIGRlc2lnbmF0aW5nIHRoZSBrZXkgb2YgYSBkb2N1bWVudC5cbiAgICAgKi8gICAgc3RhdGljIGtleUZpZWxkKCkge1xuICAgICAgICByZXR1cm4gbmV3IEZpZWxkUGF0aCQxKFsgXCJfX25hbWVfX1wiIF0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBmaWVsZCBzdHJpbmcgZnJvbSB0aGUgZ2l2ZW4gc2VydmVyLWZvcm1hdHRlZCBzdHJpbmcuXG4gICAgICpcbiAgICAgKiAtIFNwbGl0dGluZyB0aGUgZW1wdHkgc3RyaW5nIGlzIG5vdCBhbGxvd2VkIChmb3Igbm93IGF0IGxlYXN0KS5cbiAgICAgKiAtIEVtcHR5IHNlZ21lbnRzIHdpdGhpbiB0aGUgc3RyaW5nIChlLmcuIGlmIHRoZXJlIGFyZSB0d28gY29uc2VjdXRpdmVcbiAgICAgKiAgIHNlcGFyYXRvcnMpIGFyZSBub3QgYWxsb3dlZC5cbiAgICAgKlxuICAgICAqIFRPRE8oYi8zNzI0NDE1Nyk6IHdlIHNob3VsZCBtYWtlIHRoaXMgbW9yZSBzdHJpY3QuIFJpZ2h0IG5vdywgaXQgYWxsb3dzXG4gICAgICogbm9uLWlkZW50aWZpZXIgcGF0aCBjb21wb25lbnRzLCBldmVuIGlmIHRoZXkgYXJlbid0IGVzY2FwZWQuXG4gICAgICovICAgIHN0YXRpYyBmcm9tU2VydmVyRm9ybWF0KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICBsZXQgbiA9IFwiXCIsIHIgPSAwO1xuICAgICAgICBjb25zdCBfX1BSSVZBVEVfYWRkQ3VycmVudFNlZ21lbnQgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoMCA9PT0gbi5sZW5ndGgpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIGZpZWxkIHBhdGggKCR7ZX0pLiBQYXRocyBtdXN0IG5vdCBiZSBlbXB0eSwgYmVnaW4gd2l0aCAnLicsIGVuZCB3aXRoICcuJywgb3IgY29udGFpbiAnLi4nYCk7XG4gICAgICAgICAgICB0LnB1c2gobiksIG4gPSBcIlwiO1xuICAgICAgICB9O1xuICAgICAgICBsZXQgaSA9ICExO1xuICAgICAgICBmb3IgKDtyIDwgZS5sZW5ndGg7ICkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGVbcl07XG4gICAgICAgICAgICBpZiAoXCJcXFxcXCIgPT09IHQpIHtcbiAgICAgICAgICAgICAgICBpZiAociArIDEgPT09IGUubGVuZ3RoKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQy5JTlZBTElEX0FSR1VNRU5ULCBcIlBhdGggaGFzIHRyYWlsaW5nIGVzY2FwZSBjaGFyYWN0ZXI6IFwiICsgZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGVbciArIDFdO1xuICAgICAgICAgICAgICAgIGlmIChcIlxcXFxcIiAhPT0gdCAmJiBcIi5cIiAhPT0gdCAmJiBcImBcIiAhPT0gdCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEMuSU5WQUxJRF9BUkdVTUVOVCwgXCJQYXRoIGhhcyBpbnZhbGlkIGVzY2FwZSBzZXF1ZW5jZTogXCIgKyBlKTtcbiAgICAgICAgICAgICAgICBuICs9IHQsIHIgKz0gMjtcbiAgICAgICAgICAgIH0gZWxzZSBcImBcIiA9PT0gdCA/IChpID0gIWksIHIrKykgOiBcIi5cIiAhPT0gdCB8fCBpID8gKG4gKz0gdCwgcisrKSA6IChfX1BSSVZBVEVfYWRkQ3VycmVudFNlZ21lbnQoKSwgXG4gICAgICAgICAgICByKyspO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfX1BSSVZBVEVfYWRkQ3VycmVudFNlZ21lbnQoKSwgaSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEMuSU5WQUxJRF9BUkdVTUVOVCwgXCJVbnRlcm1pbmF0ZWQgYCBpbiBwYXRoOiBcIiArIGUpO1xuICAgICAgICByZXR1cm4gbmV3IEZpZWxkUGF0aCQxKHQpO1xuICAgIH1cbiAgICBzdGF0aWMgZW1wdHlQYXRoKCkge1xuICAgICAgICByZXR1cm4gbmV3IEZpZWxkUGF0aCQxKFtdKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIERvY3VtZW50S2V5IHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMucGF0aCA9IGU7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tUGF0aChlKSB7XG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRLZXkoUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcoZSkpO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbU5hbWUoZSkge1xuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50S2V5KFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKGUpLnBvcEZpcnN0KDUpKTtcbiAgICB9XG4gICAgc3RhdGljIGVtcHR5KCkge1xuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50S2V5KFJlc291cmNlUGF0aC5lbXB0eVBhdGgoKSk7XG4gICAgfVxuICAgIGdldCBjb2xsZWN0aW9uR3JvdXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGgucG9wTGFzdCgpLmxhc3RTZWdtZW50KCk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIGRvY3VtZW50IGlzIGluIHRoZSBzcGVjaWZpZWQgY29sbGVjdGlvbklkLiAqLyAgICBoYXNDb2xsZWN0aW9uSWQoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXRoLmxlbmd0aCA+PSAyICYmIHRoaXMucGF0aC5nZXQodGhpcy5wYXRoLmxlbmd0aCAtIDIpID09PSBlO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0aGUgY29sbGVjdGlvbiBncm91cCAoaS5lLiB0aGUgbmFtZSBvZiB0aGUgcGFyZW50IGNvbGxlY3Rpb24pIGZvciB0aGlzIGtleS4gKi8gICAgZ2V0Q29sbGVjdGlvbkdyb3VwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXRoLmdldCh0aGlzLnBhdGgubGVuZ3RoIC0gMik7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRoZSBmdWxseSBxdWFsaWZpZWQgcGF0aCB0byB0aGUgcGFyZW50IGNvbGxlY3Rpb24uICovICAgIGdldENvbGxlY3Rpb25QYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXRoLnBvcExhc3QoKTtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSBlICYmIDAgPT09IFJlc291cmNlUGF0aC5jb21wYXJhdG9yKHRoaXMucGF0aCwgZS5wYXRoKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGgudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmF0b3IoZSwgdCkge1xuICAgICAgICByZXR1cm4gUmVzb3VyY2VQYXRoLmNvbXBhcmF0b3IoZS5wYXRoLCB0LnBhdGgpO1xuICAgIH1cbiAgICBzdGF0aWMgaXNEb2N1bWVudEtleShlKSB7XG4gICAgICAgIHJldHVybiBlLmxlbmd0aCAlIDIgPT0gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIG5ldyBkb2N1bWVudCBrZXkgd2l0aCB0aGUgZ2l2ZW4gc2VnbWVudHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2VnbWVudHMgLSBUaGUgc2VnbWVudHMgb2YgdGhlIHBhdGggdG8gdGhlIGRvY3VtZW50XG4gICAgICogQHJldHVybnMgQSBuZXcgaW5zdGFuY2Ugb2YgRG9jdW1lbnRLZXlcbiAgICAgKi8gICAgc3RhdGljIGZyb21TZWdtZW50cyhlKSB7XG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRLZXkobmV3IFJlc291cmNlUGF0aChlLnNsaWNlKCkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRoZSBpbml0aWFsIG11dGF0aW9uIGJhdGNoIGlkIGZvciBlYWNoIGluZGV4LiBHZXRzIHVwZGF0ZWQgZHVyaW5nIGluZGV4XG4gKiBiYWNrZmlsbC5cbiAqL1xuLyoqXG4gKiBBbiBpbmRleCBkZWZpbml0aW9uIGZvciBmaWVsZCBpbmRleGVzIGluIEZpcmVzdG9yZS5cbiAqXG4gKiBFdmVyeSBpbmRleCBpcyBhc3NvY2lhdGVkIHdpdGggYSBjb2xsZWN0aW9uLiBUaGUgZGVmaW5pdGlvbiBjb250YWlucyBhIGxpc3RcbiAqIG9mIGZpZWxkcyBhbmQgdGhlaXIgaW5kZXgga2luZCAod2hpY2ggY2FuIGJlIGBBU0NFTkRJTkdgLCBgREVTQ0VORElOR2Agb3JcbiAqIGBDT05UQUlOU2AgZm9yIEFycmF5Q29udGFpbnMvQXJyYXlDb250YWluc0FueSBxdWVyaWVzKS5cbiAqXG4gKiBVbmxpa2UgdGhlIGJhY2tlbmQsIHRoZSBTREsgZG9lcyBub3QgZGlmZmVyZW50aWF0ZSBiZXR3ZWVuIGNvbGxlY3Rpb24gb3JcbiAqIGNvbGxlY3Rpb24gZ3JvdXAtc2NvcGVkIGluZGljZXMuIEV2ZXJ5IGluZGV4IGNhbiBiZSB1c2VkIGZvciBib3RoIHNpbmdsZVxuICogY29sbGVjdGlvbiBhbmQgY29sbGVjdGlvbiBncm91cCBxdWVyaWVzLlxuICovXG5jbGFzcyBGaWVsZEluZGV4IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgaW5kZXggSUQuIFJldHVybnMgLTEgaWYgdGhlIGluZGV4IElEIGlzIG5vdCBhdmFpbGFibGUgKGUuZy4gdGhlIGluZGV4XG4gICAgICogaGFzIG5vdCB5ZXQgYmVlbiBwZXJzaXN0ZWQpLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKiBUaGUgY29sbGVjdGlvbiBJRCB0aGlzIGluZGV4IGFwcGxpZXMgdG8uICovXG4gICAgdCwgXG4gICAgLyoqIFRoZSBmaWVsZCBzZWdtZW50cyBmb3IgdGhpcyBpbmRleC4gKi9cbiAgICBuLCBcbiAgICAvKiogU2hvd3MgaG93IHVwLXRvLWRhdGUgdGhlIGluZGV4IGlzIGZvciB0aGUgY3VycmVudCB1c2VyLiAqL1xuICAgIHIpIHtcbiAgICAgICAgdGhpcy5pbmRleElkID0gZSwgdGhpcy5jb2xsZWN0aW9uR3JvdXAgPSB0LCB0aGlzLmZpZWxkcyA9IG4sIHRoaXMuaW5kZXhTdGF0ZSA9IHI7XG4gICAgfVxufVxuXG4vKiogQW4gSUQgZm9yIGFuIGluZGV4IHRoYXQgaGFzIG5vdCB5ZXQgYmVlbiBhZGRlZCB0byBwZXJzaXN0ZW5jZS4gICovXG4vKiogUmV0dXJucyB0aGUgQXJyYXlDb250YWlucy9BcnJheUNvbnRhaW5zQW55IHNlZ21lbnQgZm9yIHRoaXMgaW5kZXguICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfZmllbGRJbmRleEdldEFycmF5U2VnbWVudChlKSB7XG4gICAgcmV0dXJuIGUuZmllbGRzLmZpbmQoKGUgPT4gMiAvKiBJbmRleEtpbmQuQ09OVEFJTlMgKi8gPT09IGUua2luZCkpO1xufVxuXG4vKiogUmV0dXJucyBhbGwgZGlyZWN0aW9uYWwgKGFzY2VuZGluZy9kZXNjZW5kaW5nKSBzZWdtZW50cyBmb3IgdGhpcyBpbmRleC4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2ZpZWxkSW5kZXhHZXREaXJlY3Rpb25hbFNlZ21lbnRzKGUpIHtcbiAgICByZXR1cm4gZS5maWVsZHMuZmlsdGVyKChlID0+IDIgLyogSW5kZXhLaW5kLkNPTlRBSU5TICovICE9PSBlLmtpbmQpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBvcmRlciBvZiB0aGUgZG9jdW1lbnQga2V5IGNvbXBvbmVudCBmb3IgdGhlIGdpdmVuIGluZGV4LlxuICpcbiAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgaW4gdGhlIFdlYiBJbmRleGVkRGIgaW1wbGVtZW50YXRpb24uXG4gKi9cbi8qKlxuICogQ29tcGFyZXMgaW5kZXhlcyBieSBjb2xsZWN0aW9uIGdyb3VwIGFuZCBzZWdtZW50cy4gSWdub3JlcyB1cGRhdGUgdGltZSBhbmRcbiAqIGluZGV4IElELlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfZmllbGRJbmRleFNlbWFudGljQ29tcGFyYXRvcihlLCB0KSB7XG4gICAgbGV0IG4gPSBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihlLmNvbGxlY3Rpb25Hcm91cCwgdC5jb2xsZWN0aW9uR3JvdXApO1xuICAgIGlmICgwICE9PSBuKSByZXR1cm4gbjtcbiAgICBmb3IgKGxldCByID0gMDsgciA8IE1hdGgubWluKGUuZmllbGRzLmxlbmd0aCwgdC5maWVsZHMubGVuZ3RoKTsgKytyKSBpZiAobiA9IF9fUFJJVkFURV9pbmRleFNlZ21lbnRDb21wYXJhdG9yKGUuZmllbGRzW3JdLCB0LmZpZWxkc1tyXSksIFxuICAgIDAgIT09IG4pIHJldHVybiBuO1xuICAgIHJldHVybiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihlLmZpZWxkcy5sZW5ndGgsIHQuZmllbGRzLmxlbmd0aCk7XG59XG5cbi8qKiBSZXR1cm5zIGEgZGVidWcgcmVwcmVzZW50YXRpb24gb2YgdGhlIGZpZWxkIGluZGV4ICovIEZpZWxkSW5kZXguVU5LTk9XTl9JRCA9IC0xO1xuXG4vKiogQW4gaW5kZXggY29tcG9uZW50IGNvbnNpc3Rpbmcgb2YgZmllbGQgcGF0aCBhbmQgaW5kZXggdHlwZS4gICovXG5jbGFzcyBJbmRleFNlZ21lbnQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgZmllbGQgcGF0aCBvZiB0aGUgY29tcG9uZW50LiAqL1xuICAgIGUsIFxuICAgIC8qKiBUaGUgZmllbGRzIHNvcnRpbmcgb3JkZXIuICovXG4gICAgdCkge1xuICAgICAgICB0aGlzLmZpZWxkUGF0aCA9IGUsIHRoaXMua2luZCA9IHQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfaW5kZXhTZWdtZW50Q29tcGFyYXRvcihlLCB0KSB7XG4gICAgY29uc3QgbiA9IEZpZWxkUGF0aCQxLmNvbXBhcmF0b3IoZS5maWVsZFBhdGgsIHQuZmllbGRQYXRoKTtcbiAgICByZXR1cm4gMCAhPT0gbiA/IG4gOiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihlLmtpbmQsIHQua2luZCk7XG59XG5cbi8qKlxuICogU3RvcmVzIHRoZSBcImhpZ2ggd2F0ZXIgbWFya1wiIHRoYXQgaW5kaWNhdGVzIGhvdyB1cGRhdGVkIHRoZSBJbmRleCBpcyBmb3IgdGhlXG4gKiBjdXJyZW50IHVzZXIuXG4gKi8gY2xhc3MgSW5kZXhTdGF0ZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHdoZW4gdGhlIGluZGV4IHdhcyBsYXN0IHVwZGF0ZWQgKHJlbGF0aXZlIHRvIG90aGVyIGluZGV4ZXMpLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKiBUaGUgdGhlIGxhdGVzdCBpbmRleGVkIHJlYWQgdGltZSwgZG9jdW1lbnQgYW5kIGJhdGNoIGlkLiAqL1xuICAgIHQpIHtcbiAgICAgICAgdGhpcy5zZXF1ZW5jZU51bWJlciA9IGUsIHRoaXMub2Zmc2V0ID0gdDtcbiAgICB9XG4gICAgLyoqIFRoZSBzdGF0ZSBvZiBhbiBpbmRleCB0aGF0IGhhcyBub3QgeWV0IGJlZW4gYmFja2ZpbGxlZC4gKi8gICAgc3RhdGljIGVtcHR5KCkge1xuICAgICAgICByZXR1cm4gbmV3IEluZGV4U3RhdGUoMCwgSW5kZXhPZmZzZXQubWluKCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuIG9mZnNldCB0aGF0IG1hdGNoZXMgYWxsIGRvY3VtZW50cyB3aXRoIGEgcmVhZCB0aW1lIGhpZ2hlciB0aGFuXG4gKiBgcmVhZFRpbWVgLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdJbmRleE9mZnNldFN1Y2Nlc3NvckZyb21SZWFkVGltZShlLCB0KSB7XG4gICAgLy8gV2Ugd2FudCB0byBjcmVhdGUgYW4gb2Zmc2V0IHRoYXQgbWF0Y2hlcyBhbGwgZG9jdW1lbnRzIHdpdGggYSByZWFkIHRpbWVcbiAgICAvLyBncmVhdGVyIHRoYW4gdGhlIHByb3ZpZGVkIHJlYWQgdGltZS4gVG8gZG8gc28sIHdlIHRlY2huaWNhbGx5IG5lZWQgdG9cbiAgICAvLyBjcmVhdGUgYW4gb2Zmc2V0IGZvciBgKHJlYWRUaW1lLCBNQVhfRE9DVU1FTlRfS0VZKWAuIFdoaWxlIHdlIGNvdWxkIHVzZVxuICAgIC8vIFVuaWNvZGUgY29kZXBvaW50cyB0byBnZW5lcmF0ZSBNQVhfRE9DVU1FTlRfS0VZLCBpdCBpcyBtdWNoIGVhc2llciB0byB1c2VcbiAgICAvLyBgKHJlYWRUaW1lICsgMSwgRG9jdW1lbnRLZXkuZW1wdHkoKSlgIHNpbmNlIGA+IERvY3VtZW50S2V5LmVtcHR5KClgIG1hdGNoZXNcbiAgICAvLyBhbGwgdmFsaWQgZG9jdW1lbnQgSURzLlxuICAgIGNvbnN0IG4gPSBlLnRvVGltZXN0YW1wKCkuc2Vjb25kcywgciA9IGUudG9UaW1lc3RhbXAoKS5uYW5vc2Vjb25kcyArIDEsIGkgPSBTbmFwc2hvdFZlcnNpb24uZnJvbVRpbWVzdGFtcCgxZTkgPT09IHIgPyBuZXcgVGltZXN0YW1wKG4gKyAxLCAwKSA6IG5ldyBUaW1lc3RhbXAobiwgcikpO1xuICAgIHJldHVybiBuZXcgSW5kZXhPZmZzZXQoaSwgRG9jdW1lbnRLZXkuZW1wdHkoKSwgdCk7XG59XG5cbi8qKiBDcmVhdGVzIGEgbmV3IG9mZnNldCBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgZG9jdW1lbnQuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdJbmRleE9mZnNldEZyb21Eb2N1bWVudChlKSB7XG4gICAgcmV0dXJuIG5ldyBJbmRleE9mZnNldChlLnJlYWRUaW1lLCBlLmtleSwgLTEpO1xufVxuXG4vKipcbiAqIFN0b3JlcyB0aGUgbGF0ZXN0IHJlYWQgdGltZSwgZG9jdW1lbnQgYW5kIGJhdGNoIElEIHRoYXQgd2VyZSBwcm9jZXNzZWQgZm9yIGFuXG4gKiBpbmRleC5cbiAqLyBjbGFzcyBJbmRleE9mZnNldCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIGxhdGVzdCByZWFkIHRpbWUgdmVyc2lvbiB0aGF0IGhhcyBiZWVuIGluZGV4ZWQgYnkgRmlyZXN0b3JlIGZvciB0aGlzXG4gICAgICogZmllbGQgaW5kZXguXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIGtleSBvZiB0aGUgbGFzdCBkb2N1bWVudCB0aGF0IHdhcyBpbmRleGVkIGZvciB0aGlzIHF1ZXJ5LiBVc2VcbiAgICAgKiBgRG9jdW1lbnRLZXkuZW1wdHkoKWAgaWYgbm8gZG9jdW1lbnQgaGFzIGJlZW4gaW5kZXhlZC5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKlxuICAgICAqIFRoZSBsYXJnZXN0IG11dGF0aW9uIGJhdGNoIGlkIHRoYXQncyBiZWVuIHByb2Nlc3NlZCBieSBGaXJlc3RvcmUuXG4gICAgICovXG4gICAgbikge1xuICAgICAgICB0aGlzLnJlYWRUaW1lID0gZSwgdGhpcy5kb2N1bWVudEtleSA9IHQsIHRoaXMubGFyZ2VzdEJhdGNoSWQgPSBuO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhbiBvZmZzZXQgdGhhdCBzb3J0cyBiZWZvcmUgYWxsIHJlZ3VsYXIgb2Zmc2V0cy4gKi8gICAgc3RhdGljIG1pbigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJbmRleE9mZnNldChTbmFwc2hvdFZlcnNpb24ubWluKCksIERvY3VtZW50S2V5LmVtcHR5KCksIC0xKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYW4gb2Zmc2V0IHRoYXQgc29ydHMgYWZ0ZXIgYWxsIHJlZ3VsYXIgb2Zmc2V0cy4gKi8gICAgc3RhdGljIG1heCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJbmRleE9mZnNldChTbmFwc2hvdFZlcnNpb24ubWF4KCksIERvY3VtZW50S2V5LmVtcHR5KCksIC0xKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9pbmRleE9mZnNldENvbXBhcmF0b3IoZSwgdCkge1xuICAgIGxldCBuID0gZS5yZWFkVGltZS5jb21wYXJlVG8odC5yZWFkVGltZSk7XG4gICAgcmV0dXJuIDAgIT09IG4gPyBuIDogKG4gPSBEb2N1bWVudEtleS5jb21wYXJhdG9yKGUuZG9jdW1lbnRLZXksIHQuZG9jdW1lbnRLZXkpLCBcbiAgICAwICE9PSBuID8gbiA6IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKGUubGFyZ2VzdEJhdGNoSWQsIHQubGFyZ2VzdEJhdGNoSWQpKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgRiA9IFwiVGhlIGN1cnJlbnQgdGFiIGlzIG5vdCBpbiB0aGUgcmVxdWlyZWQgc3RhdGUgdG8gcGVyZm9ybSB0aGlzIG9wZXJhdGlvbi4gSXQgbWlnaHQgYmUgbmVjZXNzYXJ5IHRvIHJlZnJlc2ggdGhlIGJyb3dzZXIgdGFiLlwiO1xuXG4vKipcbiAqIEEgYmFzZSBjbGFzcyByZXByZXNlbnRpbmcgYSBwZXJzaXN0ZW5jZSB0cmFuc2FjdGlvbiwgZW5jYXBzdWxhdGluZyBib3RoIHRoZVxuICogdHJhbnNhY3Rpb24ncyBzZXF1ZW5jZSBudW1iZXJzIGFzIHdlbGwgYXMgYSBsaXN0IG9mIG9uQ29tbWl0dGVkIGxpc3RlbmVycy5cbiAqXG4gKiBXaGVuIHlvdSBjYWxsIFBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKCksIGl0IHdpbGwgY3JlYXRlIGEgdHJhbnNhY3Rpb24gYW5kXG4gKiBwYXNzIGl0IHRvIHlvdXIgY2FsbGJhY2suIFlvdSB0aGVuIHBhc3MgaXQgdG8gYW55IG1ldGhvZCB0aGF0IG9wZXJhdGVzXG4gKiBvbiBwZXJzaXN0ZW5jZS5cbiAqLyBjbGFzcyBQZXJzaXN0ZW5jZVRyYW5zYWN0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5vbkNvbW1pdHRlZExpc3RlbmVycyA9IFtdO1xuICAgIH1cbiAgICBhZGRPbkNvbW1pdHRlZExpc3RlbmVyKGUpIHtcbiAgICAgICAgdGhpcy5vbkNvbW1pdHRlZExpc3RlbmVycy5wdXNoKGUpO1xuICAgIH1cbiAgICByYWlzZU9uQ29tbWl0dGVkRXZlbnQoKSB7XG4gICAgICAgIHRoaXMub25Db21taXR0ZWRMaXN0ZW5lcnMuZm9yRWFjaCgoZSA9PiBlKCkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFZlcmlmaWVzIHRoZSBlcnJvciB0aHJvd24gYnkgYSBMb2NhbFN0b3JlIG9wZXJhdGlvbi4gSWYgYSBMb2NhbFN0b3JlXG4gKiBvcGVyYXRpb24gZmFpbHMgYmVjYXVzZSB0aGUgcHJpbWFyeSBsZWFzZSBoYXMgYmVlbiB0YWtlbiBieSBhbm90aGVyIGNsaWVudCxcbiAqIHdlIGlnbm9yZSB0aGUgZXJyb3IgKHRoZSBwZXJzaXN0ZW5jZSBsYXllciB3aWxsIGltbWVkaWF0ZWx5IGNhbGxcbiAqIGBhcHBseVByaW1hcnlMZWFzZWAgdG8gcHJvcGFnYXRlIHRoZSBwcmltYXJ5IHN0YXRlIGNoYW5nZSkuIEFsbCBvdGhlciBlcnJvcnNcbiAqIGFyZSByZS10aHJvd24uXG4gKlxuICogQHBhcmFtIGVyciAtIEFuIGVycm9yIHJldHVybmVkIGJ5IGEgTG9jYWxTdG9yZSBvcGVyYXRpb24uXG4gKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyBhZnRlciB3ZSByZWNvdmVyZWQsIG9yIHRoZSBvcmlnaW5hbCBlcnJvci5cbiAqLyBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfaWdub3JlSWZQcmltYXJ5TGVhc2VMb3NzKGUpIHtcbiAgICBpZiAoZS5jb2RlICE9PSBDLkZBSUxFRF9QUkVDT05ESVRJT04gfHwgZS5tZXNzYWdlICE9PSBGKSB0aHJvdyBlO1xuICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkxvY2FsU3RvcmVcIiwgXCJVbmV4cGVjdGVkbHkgbG9zdCBwcmltYXJ5IGxlYXNlXCIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBQZXJzaXN0ZW5jZVByb21pc2UgaXMgZXNzZW50aWFsbHkgYSByZS1pbXBsZW1lbnRhdGlvbiBvZiBQcm9taXNlIGV4Y2VwdFxuICogaXQgaGFzIGEgLm5leHQoKSBtZXRob2QgaW5zdGVhZCBvZiAudGhlbigpIGFuZCAubmV4dCgpIGFuZCAuY2F0Y2goKSBjYWxsYmFja3NcbiAqIGFyZSBleGVjdXRlZCBzeW5jaHJvbm91c2x5IHdoZW4gYSBQZXJzaXN0ZW5jZVByb21pc2UgcmVzb2x2ZXMgcmF0aGVyIHRoYW5cbiAqIGFzeW5jaHJvbm91c2x5IChQcm9taXNlIGltcGxlbWVudGF0aW9ucyB1c2Ugc2V0SW1tZWRpYXRlKCkgb3Igc2ltaWxhcikuXG4gKlxuICogVGhpcyBpcyBuZWNlc3NhcnkgdG8gaW50ZXJvcGVyYXRlIHdpdGggSW5kZXhlZERCIHdoaWNoIHdpbGwgYXV0b21hdGljYWxseVxuICogY29tbWl0IHRyYW5zYWN0aW9ucyBpZiBjb250cm9sIGlzIHJldHVybmVkIHRvIHRoZSBldmVudCBsb29wIHdpdGhvdXRcbiAqIHN5bmNocm9ub3VzbHkgaW5pdGlhdGluZyBhbm90aGVyIG9wZXJhdGlvbiBvbiB0aGUgdHJhbnNhY3Rpb24uXG4gKlxuICogTk9URTogLnRoZW4oKSBhbmQgLmNhdGNoKCkgb25seSBhbGxvdyBhIHNpbmdsZSBjb25zdW1lciwgdW5saWtlIG5vcm1hbFxuICogUHJvbWlzZXMuXG4gKi8gY2xhc3MgUGVyc2lzdGVuY2VQcm9taXNlIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIC8vIE5PVEU6IG5leHQvY2F0Y2hDYWxsYmFjayB3aWxsIGFsd2F5cyBwb2ludCB0byBvdXIgb3duIHdyYXBwZXIgZnVuY3Rpb25zLFxuICAgICAgICAvLyBub3QgdGhlIHVzZXIncyByYXcgbmV4dCgpIG9yIGNhdGNoKCkgY2FsbGJhY2tzLlxuICAgICAgICB0aGlzLm5leHRDYWxsYmFjayA9IG51bGwsIHRoaXMuY2F0Y2hDYWxsYmFjayA9IG51bGwsIFxuICAgICAgICAvLyBXaGVuIHRoZSBvcGVyYXRpb24gcmVzb2x2ZXMsIHdlJ2xsIHNldCByZXN1bHQgb3IgZXJyb3IgYW5kIG1hcmsgaXNEb25lLlxuICAgICAgICB0aGlzLnJlc3VsdCA9IHZvaWQgMCwgdGhpcy5lcnJvciA9IHZvaWQgMCwgdGhpcy5pc0RvbmUgPSAhMSwgXG4gICAgICAgIC8vIFNldCB0byB0cnVlIHdoZW4gLnRoZW4oKSBvciAuY2F0Y2goKSBhcmUgY2FsbGVkIGFuZCBwcmV2ZW50cyBhZGRpdGlvbmFsXG4gICAgICAgIC8vIGNoYWluaW5nLlxuICAgICAgICB0aGlzLmNhbGxiYWNrQXR0YWNoZWQgPSAhMSwgZSgoZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzRG9uZSA9ICEwLCB0aGlzLnJlc3VsdCA9IGUsIHRoaXMubmV4dENhbGxiYWNrICYmIFxuICAgICAgICAgICAgLy8gdmFsdWUgc2hvdWxkIGJlIGRlZmluZWQgdW5sZXNzIFQgaXMgVm9pZCwgYnV0IHdlIGNhbid0IGV4cHJlc3NcbiAgICAgICAgICAgIC8vIHRoYXQgaW4gdGhlIHR5cGUgc3lzdGVtLlxuICAgICAgICAgICAgdGhpcy5uZXh0Q2FsbGJhY2soZSk7XG4gICAgICAgIH0pLCAoZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzRG9uZSA9ICEwLCB0aGlzLmVycm9yID0gZSwgdGhpcy5jYXRjaENhbGxiYWNrICYmIHRoaXMuY2F0Y2hDYWxsYmFjayhlKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBjYXRjaChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5leHQodm9pZCAwLCBlKTtcbiAgICB9XG4gICAgbmV4dChlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGxiYWNrQXR0YWNoZWQgJiYgZmFpbCgpLCB0aGlzLmNhbGxiYWNrQXR0YWNoZWQgPSAhMCwgdGhpcy5pc0RvbmUgPyB0aGlzLmVycm9yID8gdGhpcy53cmFwRmFpbHVyZSh0LCB0aGlzLmVycm9yKSA6IHRoaXMud3JhcFN1Y2Nlc3MoZSwgdGhpcy5yZXN1bHQpIDogbmV3IFBlcnNpc3RlbmNlUHJvbWlzZSgoKG4sIHIpID0+IHtcbiAgICAgICAgICAgIHRoaXMubmV4dENhbGxiYWNrID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy53cmFwU3VjY2VzcyhlLCB0KS5uZXh0KG4sIHIpO1xuICAgICAgICAgICAgfSwgdGhpcy5jYXRjaENhbGxiYWNrID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy53cmFwRmFpbHVyZSh0LCBlKS5uZXh0KG4sIHIpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b1Byb21pc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoKGUsIHQpID0+IHtcbiAgICAgICAgICAgIHRoaXMubmV4dChlLCB0KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB3cmFwVXNlckZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlKCk7XG4gICAgICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIFBlcnNpc3RlbmNlUHJvbWlzZSA/IHQgOiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0KTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZWplY3QoZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgd3JhcFN1Y2Nlc3MoZSwgdCkge1xuICAgICAgICByZXR1cm4gZSA/IHRoaXMud3JhcFVzZXJGdW5jdGlvbigoKCkgPT4gZSh0KSkpIDogUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodCk7XG4gICAgfVxuICAgIHdyYXBGYWlsdXJlKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIGUgPyB0aGlzLndyYXBVc2VyRnVuY3Rpb24oKCgpID0+IGUodCkpKSA6IFBlcnNpc3RlbmNlUHJvbWlzZS5yZWplY3QodCk7XG4gICAgfVxuICAgIHN0YXRpYyByZXNvbHZlKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVByb21pc2UoKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICB0KGUpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHN0YXRpYyByZWplY3QoZSkge1xuICAgICAgICByZXR1cm4gbmV3IFBlcnNpc3RlbmNlUHJvbWlzZSgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIG4oZSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc3RhdGljIHdhaXRGb3IoXG4gICAgLy8gQWNjZXB0IGFsbCBQcm9taXNlIHR5cGVzIGluIHdhaXRGb3IoKS5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVByb21pc2UoKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICBsZXQgciA9IDAsIGkgPSAwLCBzID0gITE7XG4gICAgICAgICAgICBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgICAgICsrciwgZS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICsraSwgcyAmJiBpID09PSByICYmIHQoKTtcbiAgICAgICAgICAgICAgICB9KSwgKGUgPT4gbihlKSkpO1xuICAgICAgICAgICAgfSkpLCBzID0gITAsIGkgPT09IHIgJiYgdCgpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdpdmVuIGFuIGFycmF5IG9mIHByZWRpY2F0ZSBmdW5jdGlvbnMgdGhhdCBhc3luY2hyb25vdXNseSBldmFsdWF0ZSB0byBhXG4gICAgICogYm9vbGVhbiwgaW1wbGVtZW50cyBhIHNob3J0LWNpcmN1aXRpbmcgYG9yYCBiZXR3ZWVuIHRoZSByZXN1bHRzLiBQcmVkaWNhdGVzXG4gICAgICogd2lsbCBiZSBldmFsdWF0ZWQgdW50aWwgb25lIG9mIHRoZW0gcmV0dXJucyBgdHJ1ZWAsIHRoZW4gc3RvcC4gVGhlIGZpbmFsXG4gICAgICogcmVzdWx0IHdpbGwgYmUgd2hldGhlciBhbnkgb2YgdGhlbSByZXR1cm5lZCBgdHJ1ZWAuXG4gICAgICovICAgIHN0YXRpYyBvcihlKSB7XG4gICAgICAgIGxldCB0ID0gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoITEpO1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgZSkgdCA9IHQubmV4dCgoZSA9PiBlID8gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoZSkgOiBuKCkpKTtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuICAgIHN0YXRpYyBmb3JFYWNoKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IFtdO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCgoZSwgcikgPT4ge1xuICAgICAgICAgICAgbi5wdXNoKHQuY2FsbCh0aGlzLCBlLCByKSk7XG4gICAgICAgIH0pKSwgdGhpcy53YWl0Rm9yKG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb25jdXJyZW50bHkgbWFwIGFsbCBhcnJheSBlbGVtZW50cyB0aHJvdWdoIGFzeW5jaHJvbm91cyBmdW5jdGlvbi5cbiAgICAgKi8gICAgc3RhdGljIG1hcEFycmF5KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVByb21pc2UoKChuLCByKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gZS5sZW5ndGgsIHMgPSBuZXcgQXJyYXkoaSk7XG4gICAgICAgICAgICBsZXQgbyA9IDA7XG4gICAgICAgICAgICBmb3IgKGxldCBfID0gMDsgXyA8IGk7IF8rKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBfO1xuICAgICAgICAgICAgICAgIHQoZVthXSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNbYV0gPSBlLCArK28sIG8gPT09IGkgJiYgbihzKTtcbiAgICAgICAgICAgICAgICB9KSwgKGUgPT4gcihlKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFuIGFsdGVybmF0aXZlIHRvIHJlY3Vyc2l2ZSBQZXJzaXN0ZW5jZVByb21pc2UgY2FsbHMsIHRoYXQgYXZvaWRzXG4gICAgICogcG90ZW50aWFsIG1lbW9yeSBwcm9ibGVtcyBmcm9tIHVuYm91bmRlZCBjaGFpbnMgb2YgcHJvbWlzZXMuXG4gICAgICpcbiAgICAgKiBUaGUgYGFjdGlvbmAgd2lsbCBiZSBjYWxsZWQgcmVwZWF0ZWRseSB3aGlsZSBgY29uZGl0aW9uYCBpcyB0cnVlLlxuICAgICAqLyAgICBzdGF0aWMgZG9XaGlsZShlLCB0KSB7XG4gICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VQcm9taXNlKCgobiwgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgcHJvY2VzcyA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAhMCA9PT0gZSgpID8gdCgpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2VzcygpO1xuICAgICAgICAgICAgICAgIH0pLCByKSA6IG4oKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBwcm9jZXNzKCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBSZWZlcmVuY2VzIHRvIGB3aW5kb3dgIGFyZSBndWFyZGVkIGJ5IFNpbXBsZURiLmlzQXZhaWxhYmxlKClcbi8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtZ2xvYmFscyAqL1xuLyoqXG4gKiBXcmFwcyBhbiBJREJUcmFuc2FjdGlvbiBhbmQgZXhwb3NlcyBhIHN0b3JlKCkgbWV0aG9kIHRvIGdldCBhIGhhbmRsZSB0byBhXG4gKiBzcGVjaWZpYyBvYmplY3Qgc3RvcmUuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9TaW1wbGVEYlRyYW5zYWN0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMuYWN0aW9uID0gZSwgdGhpcy50cmFuc2FjdGlvbiA9IHQsIHRoaXMuYWJvcnRlZCA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgYFByb21pc2VgIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgcmVzdWx0IG9mIHRoZSBJbmRleGVkRGIgdHJhbnNhY3Rpb24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLlYgPSBuZXcgX19QUklWQVRFX0RlZmVycmVkLCB0aGlzLnRyYW5zYWN0aW9uLm9uY29tcGxldGUgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLlYucmVzb2x2ZSgpO1xuICAgICAgICB9LCB0aGlzLnRyYW5zYWN0aW9uLm9uYWJvcnQgPSAoKSA9PiB7XG4gICAgICAgICAgICB0LmVycm9yID8gdGhpcy5WLnJlamVjdChuZXcgX19QUklWQVRFX0luZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IoZSwgdC5lcnJvcikpIDogdGhpcy5WLnJlc29sdmUoKTtcbiAgICAgICAgfSwgdGhpcy50cmFuc2FjdGlvbi5vbmVycm9yID0gdCA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2NoZWNrRm9yQW5kUmVwb3J0aU9TRXJyb3IodC50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgdGhpcy5WLnJlamVjdChuZXcgX19QUklWQVRFX0luZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IoZSwgbikpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBzdGF0aWMgb3BlbihlLCB0LCBuLCByKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9TaW1wbGVEYlRyYW5zYWN0aW9uKHQsIGUudHJhbnNhY3Rpb24ociwgbikpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgX19QUklWQVRFX0luZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IodCwgZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IG0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlYucHJvbWlzZTtcbiAgICB9XG4gICAgYWJvcnQoZSkge1xuICAgICAgICBlICYmIHRoaXMuVi5yZWplY3QoZSksIHRoaXMuYWJvcnRlZCB8fCAoX19QUklWQVRFX2xvZ0RlYnVnKFwiU2ltcGxlRGJcIiwgXCJBYm9ydGluZyB0cmFuc2FjdGlvbjpcIiwgZSA/IGUubWVzc2FnZSA6IFwiQ2xpZW50LWluaXRpYXRlZCBhYm9ydFwiKSwgXG4gICAgICAgIHRoaXMuYWJvcnRlZCA9ICEwLCB0aGlzLnRyYW5zYWN0aW9uLmFib3J0KCkpO1xuICAgIH1cbiAgICBnKCkge1xuICAgICAgICAvLyBJZiB0aGUgYnJvd3NlciBzdXBwb3J0cyBWMyBJbmRleGVkREIsIHdlIGludm9rZSBjb21taXQoKSBleHBsaWNpdGx5IHRvXG4gICAgICAgIC8vIHNwZWVkIHVwIGluZGV4IERCIHByb2Nlc3NpbmcgaWYgdGhlIGV2ZW50IGxvb3AgcmVtYWlucyBibG9ja3MuXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnRyYW5zYWN0aW9uO1xuICAgICAgICB0aGlzLmFib3J0ZWQgfHwgXCJmdW5jdGlvblwiICE9IHR5cGVvZiBlLmNvbW1pdCB8fCBlLmNvbW1pdCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgU2ltcGxlRGJTdG9yZTxLZXlUeXBlLCBWYWx1ZVR5cGU+IGZvciB0aGUgc3BlY2lmaWVkIHN0b3JlLiBBbGxcbiAgICAgKiBvcGVyYXRpb25zIHBlcmZvcm1lZCBvbiB0aGUgU2ltcGxlRGJTdG9yZSBoYXBwZW4gd2l0aGluIHRoZSBjb250ZXh0IG9mIHRoaXNcbiAgICAgKiB0cmFuc2FjdGlvbiBhbmQgaXQgY2Fubm90IGJlIHVzZWQgYW55bW9yZSBvbmNlIHRoZSB0cmFuc2FjdGlvbiBpc1xuICAgICAqIGNvbXBsZXRlZC5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCB3ZSBjYW4ndCBhY3R1YWxseSBlbmZvcmNlIHRoYXQgdGhlIEtleVR5cGUgYW5kIFZhbHVlVHlwZSBhcmVcbiAgICAgKiBjb3JyZWN0LCBidXQgdGhleSBhbGxvdyB0eXBlIHNhZmV0eSB0aHJvdWdoIHRoZSByZXN0IG9mIHRoZSBjb25zdW1pbmcgY29kZS5cbiAgICAgKi8gICAgc3RvcmUoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy50cmFuc2FjdGlvbi5vYmplY3RTdG9yZShlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfU2ltcGxlRGJTdG9yZSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogUHJvdmlkZXMgYSB3cmFwcGVyIGFyb3VuZCBJbmRleGVkRGIgd2l0aCBhIHNpbXBsaWZpZWQgaW50ZXJmYWNlIHRoYXQgdXNlc1xuICogUHJvbWlzZS1saWtlIHJldHVybiB2YWx1ZXMgdG8gY2hhaW4gb3BlcmF0aW9ucy4gUmVhbCBwcm9taXNlcyBjYW5ub3QgYmUgdXNlZFxuICogc2luY2UgLnRoZW4oKSBjb250aW51YXRpb25zIGFyZSBleGVjdXRlZCBhc3luY2hyb25vdXNseSAoZS5nLiB2aWFcbiAqIC5zZXRJbW1lZGlhdGUpLCB3aGljaCB3b3VsZCBjYXVzZSBJbmRleGVkREIgdG8gZW5kIHRoZSB0cmFuc2FjdGlvbi5cbiAqIFNlZSBQZXJzaXN0ZW5jZVByb21pc2UgZm9yIG1vcmUgZGV0YWlscy5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfU2ltcGxlRGIge1xuICAgIC8qXG4gICAgICogQ3JlYXRlcyBhIG5ldyBTaW1wbGVEYiB3cmFwcGVyIGZvciBJbmRleGVkRGIgZGF0YWJhc2UgYG5hbWVgLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IGB2ZXJzaW9uYCBtdXN0IG5vdCBiZSBhIGRvd25ncmFkZS4gSW5kZXhlZERCIGRvZXMgbm90IHN1cHBvcnRcbiAgICAgKiBkb3duZ3JhZGluZyB0aGUgc2NoZW1hIHZlcnNpb24uIFdlIGN1cnJlbnRseSBkbyBub3Qgc3VwcG9ydCBhbnkgd2F5IHRvIGRvXG4gICAgICogdmVyc2lvbmluZyBvdXRzaWRlIG9mIEluZGV4ZWREQidzIHZlcnNpb25pbmcgbWVjaGFuaXNtLCBhcyBvbmx5XG4gICAgICogdmVyc2lvbi11cGdyYWRlIHRyYW5zYWN0aW9ucyBhcmUgYWxsb3dlZCB0byBkbyB0aGluZ3MgbGlrZSBjcmVhdGVcbiAgICAgKiBvYmplY3RzdG9yZXMuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICB0aGlzLm5hbWUgPSBlLCB0aGlzLnZlcnNpb24gPSB0LCB0aGlzLnAgPSBuO1xuICAgICAgICAvLyBOT1RFOiBBY2NvcmRpbmcgdG8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTE5NzA1MCwgdGhlXG4gICAgICAgIC8vIGJ1ZyB3ZSdyZSBjaGVja2luZyBmb3Igc2hvdWxkIGV4aXN0IGluIGlPUyA+PSAxMi4yIGFuZCA8IDEzLCBidXQgZm9yXG4gICAgICAgIC8vIHdoYXRldmVyIHJlYXNvbiBpdCdzIG11Y2ggaGFyZGVyIHRvIGhpdCBhZnRlciAxMi4yIHNvIHdlIG9ubHkgcHJvYWN0aXZlbHlcbiAgICAgICAgLy8gbG9nIG9uIDEyLjIuXG4gICAgICAgIDEyLjIgPT09IF9fUFJJVkFURV9TaW1wbGVEYi5TKGdldFVBKCkpICYmIF9fUFJJVkFURV9sb2dFcnJvcihcIkZpcmVzdG9yZSBwZXJzaXN0ZW5jZSBzdWZmZXJzIGZyb20gYSBidWcgaW4gaU9TIDEyLjIgU2FmYXJpIHRoYXQgbWF5IGNhdXNlIHlvdXIgYXBwIHRvIHN0b3Agd29ya2luZy4gU2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcS81NjQ5NjI5Ni8xMTA5MTUgZm9yIGRldGFpbHMgYW5kIGEgcG90ZW50aWFsIHdvcmthcm91bmQuXCIpO1xuICAgIH1cbiAgICAvKiogRGVsZXRlcyB0aGUgc3BlY2lmaWVkIGRhdGFiYXNlLiAqLyAgICBzdGF0aWMgZGVsZXRlKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlNpbXBsZURiXCIsIFwiUmVtb3ZpbmcgZGF0YWJhc2U6XCIsIGUpLCBfX1BSSVZBVEVfd3JhcFJlcXVlc3Qod2luZG93LmluZGV4ZWREQi5kZWxldGVEYXRhYmFzZShlKSkudG9Qcm9taXNlKCk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgSW5kZXhlZERCIGlzIGF2YWlsYWJsZSBpbiB0aGUgY3VycmVudCBlbnZpcm9ubWVudC4gKi8gICAgc3RhdGljIEQoKSB7XG4gICAgICAgIGlmICghaXNJbmRleGVkREJBdmFpbGFibGUoKSkgcmV0dXJuICExO1xuICAgICAgICBpZiAoX19QUklWQVRFX1NpbXBsZURiLkMoKSkgcmV0dXJuICEwO1xuICAgICAgICAvLyBXZSBleHRlbnNpdmVseSB1c2UgaW5kZXhlZCBhcnJheSB2YWx1ZXMgYW5kIGNvbXBvdW5kIGtleXMsXG4gICAgICAgIC8vIHdoaWNoIElFIGFuZCBFZGdlIGRvIG5vdCBzdXBwb3J0LiBIb3dldmVyLCB0aGV5IHN0aWxsIGhhdmUgaW5kZXhlZERCXG4gICAgICAgIC8vIGRlZmluZWQgb24gdGhlIHdpbmRvdywgc28gd2UgbmVlZCB0byBjaGVjayBmb3IgdGhlbSBoZXJlIGFuZCBtYWtlIHN1cmVcbiAgICAgICAgLy8gdG8gcmV0dXJuIHRoYXQgcGVyc2lzdGVuY2UgaXMgbm90IGVuYWJsZWQgZm9yIHRob3NlIGJyb3dzZXJzLlxuICAgICAgICAvLyBGb3IgdHJhY2tpbmcgc3VwcG9ydCBvZiB0aGlzIGZlYXR1cmUsIHNlZSBoZXJlOlxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5taWNyb3NvZnQuY29tL2VuLXVzL21pY3Jvc29mdC1lZGdlL3BsYXRmb3JtL3N0YXR1cy9pbmRleGVkZGJhcnJheXNhbmRtdWx0aWVudHJ5c3VwcG9ydC9cbiAgICAgICAgLy8gQ2hlY2sgdGhlIFVBIHN0cmluZyB0byBmaW5kIG91dCB0aGUgYnJvd3Nlci5cbiAgICAgICAgICAgICAgICBjb25zdCBlID0gZ2V0VUEoKSwgdCA9IF9fUFJJVkFURV9TaW1wbGVEYi5TKGUpLCBuID0gMCA8IHQgJiYgdCA8IDEwLCByID0gX19QUklWQVRFX2dldEFuZHJvaWRWZXJzaW9uKGUpLCBpID0gMCA8IHIgJiYgciA8IDQuNTtcbiAgICAgICAgLy8gSUUgMTBcbiAgICAgICAgLy8gdWEgPSAnTW96aWxsYS81LjAgKGNvbXBhdGlibGU7IE1TSUUgMTAuMDsgV2luZG93cyBOVCA2LjI7IFRyaWRlbnQvNi4wKSc7XG4gICAgICAgIC8vIElFIDExXG4gICAgICAgIC8vIHVhID0gJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDYuMzsgVHJpZGVudC83LjA7IHJ2OjExLjApIGxpa2UgR2Vja28nO1xuICAgICAgICAvLyBFZGdlXG4gICAgICAgIC8vIHVhID0gJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdPVzY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLFxuICAgICAgICAvLyBsaWtlIEdlY2tvKSBDaHJvbWUvMzkuMC4yMTcxLjcxIFNhZmFyaS81MzcuMzYgRWRnZS8xMi4wJztcbiAgICAgICAgLy8gaU9TIFNhZmFyaTogRGlzYWJsZSBmb3IgdXNlcnMgcnVubmluZyBpT1MgdmVyc2lvbiA8IDEwLlxuICAgICAgICAgICAgICAgIHJldHVybiAhKGUuaW5kZXhPZihcIk1TSUUgXCIpID4gMCB8fCBlLmluZGV4T2YoXCJUcmlkZW50L1wiKSA+IDAgfHwgZS5pbmRleE9mKFwiRWRnZS9cIikgPiAwIHx8IG4gfHwgaSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgYmFja2luZyBJbmRleGVkREIgc3RvcmUgaXMgdGhlIE5vZGUgSW5kZXhlZERCU2hpbVxuICAgICAqIChzZWUgaHR0cHM6Ly9naXRodWIuY29tL2F4ZW1jbGlvbi9JbmRleGVkREJTaGltKS5cbiAgICAgKi8gICAgc3RhdGljIEMoKSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgcHJvY2VzcyAmJiBcIllFU1wiID09PSAobnVsbCA9PT0gKGUgPSBwcm9jZXNzLl9fUFJJVkFURV9lbnYpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUudik7XG4gICAgfVxuICAgIC8qKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmcm9tIGEgdHJhbnNhY3Rpb24uICovICAgIHN0YXRpYyBGKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIGUuc3RvcmUodCk7XG4gICAgfVxuICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcbiAgICAvKiogUGFyc2UgVXNlciBBZ2VudCB0byBkZXRlcm1pbmUgaU9TIHZlcnNpb24uIFJldHVybnMgLTEgaWYgbm90IGZvdW5kLiAqL1xuICAgIHN0YXRpYyBTKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUubWF0Y2goL2koPzpwaG9uZXxwYWR8cG9kKSBvcyAoW1xcZF9dKykvaSksIG4gPSB0ID8gdFsxXS5zcGxpdChcIl9cIikuc2xpY2UoMCwgMikuam9pbihcIi5cIikgOiBcIi0xXCI7XG4gICAgICAgIHJldHVybiBOdW1iZXIobik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE9wZW5zIHRoZSBzcGVjaWZpZWQgZGF0YWJhc2UsIGNyZWF0aW5nIG9yIHVwZ3JhZGluZyBpdCBpZiBuZWNlc3NhcnkuXG4gICAgICovICAgIGFzeW5jIE0oZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYiB8fCAoX19QUklWQVRFX2xvZ0RlYnVnKFwiU2ltcGxlRGJcIiwgXCJPcGVuaW5nIGRhdGFiYXNlOlwiLCB0aGlzLm5hbWUpLCBcbiAgICAgICAgdGhpcy5kYiA9IGF3YWl0IG5ldyBQcm9taXNlKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgLy8gVE9ETyhtaWtlbGVoZW4pOiBJbnZlc3RpZ2F0ZSBicm93c2VyIGNvbXBhdGliaWxpdHkuXG4gICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSW5kZXhlZERCX0FQSS9Vc2luZ19JbmRleGVkREJcbiAgICAgICAgICAgIC8vIHN1Z2dlc3RzIElFOSBhbmQgb2xkZXIgV2ViS2l0IGJyb3dzZXJzIGhhbmRsZSB1cGdyYWRlXG4gICAgICAgICAgICAvLyBkaWZmZXJlbnRseS4gVGhleSBleHBlY3Qgc2V0VmVyc2lvbiwgYXMgZGVzY3JpYmVkIGhlcmU6XG4gICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSURCVmVyc2lvbkNoYW5nZVJlcXVlc3Qvc2V0VmVyc2lvblxuICAgICAgICAgICAgY29uc3QgciA9IGluZGV4ZWREQi5vcGVuKHRoaXMubmFtZSwgdGhpcy52ZXJzaW9uKTtcbiAgICAgICAgICAgIHIub25zdWNjZXNzID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IGUudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgICAgICB0KG4pO1xuICAgICAgICAgICAgfSwgci5vbmJsb2NrZWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbihuZXcgX19QUklWQVRFX0luZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IoZSwgXCJDYW5ub3QgdXBncmFkZSBJbmRleGVkREIgc2NoZW1hIHdoaWxlIGFub3RoZXIgdGFiIGlzIG9wZW4uIENsb3NlIGFsbCB0YWJzIHRoYXQgYWNjZXNzIEZpcmVzdG9yZSBhbmQgcmVsb2FkIHRoaXMgcGFnZSB0byBwcm9jZWVkLlwiKSk7XG4gICAgICAgICAgICB9LCByLm9uZXJyb3IgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gdC50YXJnZXQuZXJyb3I7XG4gICAgICAgICAgICAgICAgXCJWZXJzaW9uRXJyb3JcIiA9PT0gci5uYW1lID8gbihuZXcgRmlyZXN0b3JlRXJyb3IoQy5GQUlMRURfUFJFQ09ORElUSU9OLCBcIkEgbmV3ZXIgdmVyc2lvbiBvZiB0aGUgRmlyZXN0b3JlIFNESyB3YXMgcHJldmlvdXNseSB1c2VkIGFuZCBzbyB0aGUgcGVyc2lzdGVkIGRhdGEgaXMgbm90IGNvbXBhdGlibGUgd2l0aCB0aGUgdmVyc2lvbiBvZiB0aGUgU0RLIHlvdSBhcmUgbm93IHVzaW5nLiBUaGUgU0RLIHdpbGwgb3BlcmF0ZSB3aXRoIHBlcnNpc3RlbmNlIGRpc2FibGVkLiBJZiB5b3UgbmVlZCBwZXJzaXN0ZW5jZSwgcGxlYXNlIHJlLXVwZ3JhZGUgdG8gYSBuZXdlciB2ZXJzaW9uIG9mIHRoZSBTREsgb3IgZWxzZSBjbGVhciB0aGUgcGVyc2lzdGVkIEluZGV4ZWREQiBkYXRhIGZvciB5b3VyIGFwcCB0byBzdGFydCBmcmVzaC5cIikpIDogXCJJbnZhbGlkU3RhdGVFcnJvclwiID09PSByLm5hbWUgPyBuKG5ldyBGaXJlc3RvcmVFcnJvcihDLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiVW5hYmxlIHRvIG9wZW4gYW4gSW5kZXhlZERCIGNvbm5lY3Rpb24uIFRoaXMgY291bGQgYmUgZHVlIHRvIHJ1bm5pbmcgaW4gYSBwcml2YXRlIGJyb3dzaW5nIHNlc3Npb24gb24gYSBicm93c2VyIHdob3NlIHByaXZhdGUgYnJvd3Npbmcgc2Vzc2lvbnMgZG8gbm90IHN1cHBvcnQgSW5kZXhlZERCOiBcIiArIHIpKSA6IG4obmV3IF9fUFJJVkFURV9JbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yKGUsIHIpKTtcbiAgICAgICAgICAgIH0sIHIub251cGdyYWRlbmVlZGVkID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiU2ltcGxlRGJcIiwgJ0RhdGFiYXNlIFwiJyArIHRoaXMubmFtZSArICdcIiByZXF1aXJlcyB1cGdyYWRlIGZyb20gdmVyc2lvbjonLCBlLm9sZFZlcnNpb24pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlLnRhcmdldC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgdGhpcy5wLk8odCwgci50cmFuc2FjdGlvbiwgZS5vbGRWZXJzaW9uLCB0aGlzLnZlcnNpb24pLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiU2ltcGxlRGJcIiwgXCJEYXRhYmFzZSB1cGdyYWRlIHRvIHZlcnNpb24gXCIgKyB0aGlzLnZlcnNpb24gKyBcIiBjb21wbGV0ZVwiKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSkpLCB0aGlzLk4gJiYgKHRoaXMuZGIub252ZXJzaW9uY2hhbmdlID0gZSA9PiB0aGlzLk4oZSkpLCB0aGlzLmRiO1xuICAgIH1cbiAgICBMKGUpIHtcbiAgICAgICAgdGhpcy5OID0gZSwgdGhpcy5kYiAmJiAodGhpcy5kYi5vbnZlcnNpb25jaGFuZ2UgPSB0ID0+IGUodCkpO1xuICAgIH1cbiAgICBhc3luYyBydW5UcmFuc2FjdGlvbihlLCB0LCBuLCByKSB7XG4gICAgICAgIGNvbnN0IGkgPSBcInJlYWRvbmx5XCIgPT09IHQ7XG4gICAgICAgIGxldCBzID0gMDtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgKytzO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLmRiID0gYXdhaXQgdGhpcy5NKGUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfU2ltcGxlRGJUcmFuc2FjdGlvbi5vcGVuKHRoaXMuZGIsIGUsIGkgPyBcInJlYWRvbmx5XCIgOiBcInJlYWR3cml0ZVwiLCBuKSwgcyA9IHIodCkubmV4dCgoZSA9PiAodC5nKCksIFxuICAgICAgICAgICAgICAgIGUpKSkuY2F0Y2goKGUgPT4gKFxuICAgICAgICAgICAgICAgIC8vIEFib3J0IHRoZSB0cmFuc2FjdGlvbiBpZiB0aGVyZSB3YXMgYW4gZXJyb3IuXG4gICAgICAgICAgICAgICAgdC5hYm9ydChlKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlamVjdChlKSkpKS50b1Byb21pc2UoKTtcbiAgICAgICAgICAgICAgICAvLyBBcyBub3RlZCBhYm92ZSwgZXJyb3JzIGFyZSBwcm9wYWdhdGVkIGJ5IGFib3J0aW5nIHRoZSB0cmFuc2FjdGlvbi4gU29cbiAgICAgICAgICAgICAgICAvLyB3ZSBzd2FsbG93IGFueSBlcnJvciBoZXJlIHRvIGF2b2lkIHRoZSBicm93c2VyIGxvZ2dpbmcgaXQgYXMgdW5oYW5kbGVkLlxuICAgICAgICAgICAgICAgIHJldHVybiBzLmNhdGNoKCgoKSA9PiB7fSkpLCBcbiAgICAgICAgICAgICAgICAvLyBXYWl0IGZvciB0aGUgdHJhbnNhY3Rpb24gdG8gY29tcGxldGUgKGkuZS4gSW5kZXhlZERiJ3Mgb25zdWNjZXNzIGV2ZW50IHRvXG4gICAgICAgICAgICAgICAgLy8gZmlyZSksIGJ1dCBzdGlsbCByZXR1cm4gdGhlIG9yaWdpbmFsIHRyYW5zYWN0aW9uRm5SZXN1bHQgYmFjayB0byB0aGVcbiAgICAgICAgICAgICAgICAvLyBjYWxsZXIuXG4gICAgICAgICAgICAgICAgYXdhaXQgdC5tLCBzO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlLCBuID0gXCJGaXJlYmFzZUVycm9yXCIgIT09IHQubmFtZSAmJiBzIDwgMztcbiAgICAgICAgICAgICAgICAvLyBUT0RPKHNjaG1pZHQtc2ViYXN0aWFuKTogV2UgY291bGQgcHJvYmFibHkgYmUgc21hcnRlciBhYm91dCB0aGlzIGFuZFxuICAgICAgICAgICAgICAgIC8vIG5vdCByZXRyeSBleGNlcHRpb25zIHRoYXQgYXJlIGxpa2VseSB1bnJlY292ZXJhYmxlIChzdWNoIGFzIHF1b3RhXG4gICAgICAgICAgICAgICAgLy8gZXhjZWVkZWQgZXJyb3JzKS5cbiAgICAgICAgICAgICAgICAvLyBOb3RlOiBXZSBjYW5ub3QgdXNlIGFuIGluc3RhbmNlb2YgY2hlY2sgZm9yIEZpcmVzdG9yZUV4Y2VwdGlvbiwgc2luY2UgdGhlXG4gICAgICAgICAgICAgICAgLy8gZXhjZXB0aW9uIGlzIHdyYXBwZWQgaW4gYSBnZW5lcmljIGVycm9yIGJ5IG91ciBhc3luYy9hd2FpdCBoYW5kbGluZy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlNpbXBsZURiXCIsIFwiVHJhbnNhY3Rpb24gZmFpbGVkIHdpdGggZXJyb3I6XCIsIHQubWVzc2FnZSwgXCJSZXRyeWluZzpcIiwgbiksIFxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKSwgIW4pIHJldHVybiBQcm9taXNlLnJlamVjdCh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5kYiAmJiB0aGlzLmRiLmNsb3NlKCksIHRoaXMuZGIgPSB2b2lkIDA7XG4gICAgfVxufVxuXG4vKiogUGFyc2UgVXNlciBBZ2VudCB0byBkZXRlcm1pbmUgQW5kcm9pZCB2ZXJzaW9uLiBSZXR1cm5zIC0xIGlmIG5vdCBmb3VuZC4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2dldEFuZHJvaWRWZXJzaW9uKGUpIHtcbiAgICBjb25zdCB0ID0gZS5tYXRjaCgvQW5kcm9pZCAoW1xcZC5dKykvaSksIG4gPSB0ID8gdFsxXS5zcGxpdChcIi5cIikuc2xpY2UoMCwgMikuam9pbihcIi5cIikgOiBcIi0xXCI7XG4gICAgcmV0dXJuIE51bWJlcihuKTtcbn1cblxuLyoqXG4gKiBBIGNvbnRyb2xsZXIgZm9yIGl0ZXJhdGluZyBvdmVyIGEga2V5IHJhbmdlIG9yIGluZGV4LiBJdCBhbGxvd3MgYW4gaXRlcmF0ZVxuICogY2FsbGJhY2sgdG8gZGVsZXRlIHRoZSBjdXJyZW50bHktcmVmZXJlbmNlZCBvYmplY3QsIG9yIGp1bXAgdG8gYSBuZXcga2V5XG4gKiB3aXRoaW4gdGhlIGtleSByYW5nZSBvciBpbmRleC5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfSXRlcmF0aW9uQ29udHJvbGxlciB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLkIgPSBlLCB0aGlzLmsgPSAhMSwgdGhpcy5xID0gbnVsbDtcbiAgICB9XG4gICAgZ2V0IGlzRG9uZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaztcbiAgICB9XG4gICAgZ2V0IEsoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnE7XG4gICAgfVxuICAgIHNldCBjdXJzb3IoZSkge1xuICAgICAgICB0aGlzLkIgPSBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGNhbiBiZSBjYWxsZWQgdG8gc3RvcCBpdGVyYXRpb24gYXQgYW55IHBvaW50LlxuICAgICAqLyAgICBkb25lKCkge1xuICAgICAgICB0aGlzLmsgPSAhMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBjYW4gYmUgY2FsbGVkIHRvIHNraXAgdG8gdGhhdCBuZXh0IGtleSwgd2hpY2ggY291bGQgYmVcbiAgICAgKiBhbiBpbmRleCBvciBhIHByaW1hcnkga2V5LlxuICAgICAqLyAgICAkKGUpIHtcbiAgICAgICAgdGhpcy5xID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlIHRoZSBjdXJyZW50IGN1cnNvciB2YWx1ZSBmcm9tIHRoZSBvYmplY3Qgc3RvcmUuXG4gICAgICpcbiAgICAgKiBOT1RFOiBZb3UgQ0FOTk9UIGRvIHRoaXMgd2l0aCBhIGtleXNPbmx5IHF1ZXJ5LlxuICAgICAqLyAgICBkZWxldGUoKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfd3JhcFJlcXVlc3QodGhpcy5CLmRlbGV0ZSgpKTtcbiAgICB9XG59XG5cbi8qKiBBbiBlcnJvciB0aGF0IHdyYXBzIGV4Y2VwdGlvbnMgdGhhdCB0aHJvd24gZHVyaW5nIEluZGV4ZWREQiBleGVjdXRpb24uICovIGNsYXNzIF9fUFJJVkFURV9JbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yIGV4dGVuZHMgRmlyZXN0b3JlRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgc3VwZXIoQy5VTkFWQUlMQUJMRSwgYEluZGV4ZWREQiB0cmFuc2FjdGlvbiAnJHtlfScgZmFpbGVkOiAke3R9YCksIHRoaXMubmFtZSA9IFwiSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvclwiO1xuICAgIH1cbn1cblxuLyoqIFZlcmlmaWVzIHdoZXRoZXIgYGVgIGlzIGFuIEluZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9pc0luZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IoZSkge1xuICAgIC8vIFVzZSBuYW1lIGVxdWFsaXR5LCBhcyBpbnN0YW5jZW9mIGNoZWNrcyBvbiBlcnJvcnMgZG9uJ3Qgd29yayB3aXRoIGVycm9yc1xuICAgIC8vIHRoYXQgd3JhcCBvdGhlciBlcnJvcnMuXG4gICAgcmV0dXJuIFwiSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvclwiID09PSBlLm5hbWU7XG59XG5cbi8qKlxuICogQSB3cmFwcGVyIGFyb3VuZCBhbiBJREJPYmplY3RTdG9yZSBwcm92aWRpbmcgYW4gQVBJIHRoYXQ6XG4gKlxuICogMSkgSGFzIGdlbmVyaWMgS2V5VHlwZSAvIFZhbHVlVHlwZSBwYXJhbWV0ZXJzIHRvIHByb3ZpZGUgc3Ryb25nbHktdHlwZWRcbiAqIG1ldGhvZHMgZm9yIGFjdGluZyBhZ2FpbnN0IHRoZSBvYmplY3Qgc3RvcmUuXG4gKiAyKSBEZWFscyB3aXRoIEluZGV4ZWREQidzIG9uc3VjY2VzcyAvIG9uZXJyb3IgZXZlbnQgY2FsbGJhY2tzLCBtYWtpbmcgZXZlcnlcbiAqIG1ldGhvZCByZXR1cm4gYSBQZXJzaXN0ZW5jZVByb21pc2UgaW5zdGVhZC5cbiAqIDMpIFByb3ZpZGVzIGEgaGlnaGVyLWxldmVsIEFQSSB0byBhdm9pZCBuZWVkaW5nIHRvIGRvIGV4Y2Vzc2l2ZSB3cmFwcGluZyBvZlxuICogaW50ZXJtZWRpYXRlIEluZGV4ZWREQiB0eXBlcyAoSURCQ3Vyc29yV2l0aFZhbHVlLCBldGMuKVxuICovIGNsYXNzIF9fUFJJVkFURV9TaW1wbGVEYlN0b3JlIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuc3RvcmUgPSBlO1xuICAgIH1cbiAgICBwdXQoZSwgdCkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdCA/IChfX1BSSVZBVEVfbG9nRGVidWcoXCJTaW1wbGVEYlwiLCBcIlBVVFwiLCB0aGlzLnN0b3JlLm5hbWUsIGUsIHQpLCBcbiAgICAgICAgbiA9IHRoaXMuc3RvcmUucHV0KHQsIGUpKSA6IChfX1BSSVZBVEVfbG9nRGVidWcoXCJTaW1wbGVEYlwiLCBcIlBVVFwiLCB0aGlzLnN0b3JlLm5hbWUsIFwiPGF1dG8ta2V5PlwiLCBlKSwgXG4gICAgICAgIG4gPSB0aGlzLnN0b3JlLnB1dChlKSksIF9fUFJJVkFURV93cmFwUmVxdWVzdChuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIG5ldyB2YWx1ZSBpbnRvIGFuIE9iamVjdCBTdG9yZSBhbmQgcmV0dXJucyB0aGUgbmV3IGtleS4gU2ltaWxhciB0b1xuICAgICAqIEluZGV4ZWREYidzIGBhZGQoKWAsIHRoaXMgbWV0aG9kIHdpbGwgZmFpbCBvbiBwcmltYXJ5IGtleSBjb2xsaXNpb25zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIG9iamVjdCB0byB3cml0ZS5cbiAgICAgKiBAcmV0dXJucyBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBhZGQuXG4gICAgICovICAgIGFkZChlKSB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlNpbXBsZURiXCIsIFwiQUREXCIsIHRoaXMuc3RvcmUubmFtZSwgZSwgZSk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfd3JhcFJlcXVlc3QodGhpcy5zdG9yZS5hZGQoZSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBvYmplY3Qgd2l0aCB0aGUgc3BlY2lmaWVkIGtleSBmcm9tIHRoZSBzcGVjaWZpZWQgc3RvcmUsIG9yIG51bGxcbiAgICAgKiBpZiBubyBvYmplY3QgZXhpc3RzIHdpdGggdGhlIHNwZWNpZmllZCBrZXkuXG4gICAgICpcbiAgICAgKiBAa2V5IFRoZSBrZXkgb2YgdGhlIG9iamVjdCB0byBnZXQuXG4gICAgICogQHJldHVybnMgVGhlIG9iamVjdCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5IG9yIG51bGwgaWYgbm8gb2JqZWN0IGV4aXN0cy5cbiAgICAgKi8gICAgZ2V0KGUpIHtcbiAgICAgICAgLy8gV2UncmUgZG9pbmcgYW4gdW5zYWZlIGNhc3QgdG8gVmFsdWVUeXBlLlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4gX19QUklWQVRFX3dyYXBSZXF1ZXN0KHRoaXMuc3RvcmUuZ2V0KGUpKS5uZXh0KCh0ID0+IChcbiAgICAgICAgLy8gTm9ybWFsaXplIG5vbmV4aXN0ZW5jZSB0byBudWxsLlxuICAgICAgICB2b2lkIDAgPT09IHQgJiYgKHQgPSBudWxsKSwgX19QUklWQVRFX2xvZ0RlYnVnKFwiU2ltcGxlRGJcIiwgXCJHRVRcIiwgdGhpcy5zdG9yZS5uYW1lLCBlLCB0KSwgXG4gICAgICAgIHQpKSk7XG4gICAgfVxuICAgIGRlbGV0ZShlKSB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlNpbXBsZURiXCIsIFwiREVMRVRFXCIsIHRoaXMuc3RvcmUubmFtZSwgZSk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfd3JhcFJlcXVlc3QodGhpcy5zdG9yZS5kZWxldGUoZSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJZiB3ZSBldmVyIG5lZWQgbW9yZSBvZiB0aGUgY291bnQgdmFyaWFudHMsIHdlIGNhbiBhZGQgb3ZlcmxvYWRzLiBGb3Igbm93LFxuICAgICAqIGFsbCB3ZSBuZWVkIGlzIHRvIGNvdW50IGV2ZXJ5dGhpbmcgaW4gYSBzdG9yZS5cbiAgICAgKlxuICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiByb3dzIGluIHRoZSBzdG9yZS5cbiAgICAgKi8gICAgY291bnQoKSB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlNpbXBsZURiXCIsIFwiQ09VTlRcIiwgdGhpcy5zdG9yZS5uYW1lKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV93cmFwUmVxdWVzdCh0aGlzLnN0b3JlLmNvdW50KCkpO1xuICAgIH1cbiAgICBVKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMub3B0aW9ucyhlLCB0KSwgciA9IG4uaW5kZXggPyB0aGlzLnN0b3JlLmluZGV4KG4uaW5kZXgpIDogdGhpcy5zdG9yZTtcbiAgICAgICAgLy8gVXNlIGBnZXRBbGwoKWAgaWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgSW5kZXhlZERCIHYzLCBhcyBpdCBpcyByb3VnaGx5XG4gICAgICAgIC8vIDIwJSBmYXN0ZXIuXG4gICAgICAgICAgICAgICAgaWYgKFwiZnVuY3Rpb25cIiA9PSB0eXBlb2Ygci5nZXRBbGwpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSByLmdldEFsbChuLnJhbmdlKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VQcm9taXNlKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgICAgIGUub25lcnJvciA9IGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBuKGUudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgICAgICAgICB9LCBlLm9uc3VjY2VzcyA9IGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0KGUudGFyZ2V0LnJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5jdXJzb3IobiksIHQgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLlcoZSwgKChlLCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgdC5wdXNoKG4pO1xuICAgICAgICAgICAgfSkpLm5leHQoKCgpID0+IHQpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2FkcyB0aGUgZmlyc3QgYGNvdW50YCBlbGVtZW50cyBmcm9tIHRoZSBwcm92aWRlZCBpbmRleCByYW5nZS4gTG9hZHMgYWxsXG4gICAgICogZWxlbWVudHMgaWYgbm8gbGltaXQgaXMgcHJvdmlkZWQuXG4gICAgICovICAgIEcoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5zdG9yZS5nZXRBbGwoZSwgbnVsbCA9PT0gdCA/IHZvaWQgMCA6IHQpO1xuICAgICAgICByZXR1cm4gbmV3IFBlcnNpc3RlbmNlUHJvbWlzZSgoKGUsIHQpID0+IHtcbiAgICAgICAgICAgIG4ub25lcnJvciA9IGUgPT4ge1xuICAgICAgICAgICAgICAgIHQoZS50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgfSwgbi5vbnN1Y2Nlc3MgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICBlKHQudGFyZ2V0LnJlc3VsdCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGooZSwgdCkge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJTaW1wbGVEYlwiLCBcIkRFTEVURSBBTExcIiwgdGhpcy5zdG9yZS5uYW1lKTtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMub3B0aW9ucyhlLCB0KTtcbiAgICAgICAgbi5IID0gITE7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLmN1cnNvcihuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuVyhyLCAoKGUsIHQsIG4pID0+IG4uZGVsZXRlKCkpKTtcbiAgICB9XG4gICAgSihlLCB0KSB7XG4gICAgICAgIGxldCBuO1xuICAgICAgICB0ID8gbiA9IGUgOiAobiA9IHt9LCB0ID0gZSk7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLmN1cnNvcihuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuVyhyLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBhIHN0b3JlLCBidXQgd2FpdHMgZm9yIHRoZSBnaXZlbiBjYWxsYmFjayB0byBjb21wbGV0ZSBmb3JcbiAgICAgKiBlYWNoIGVudHJ5IGJlZm9yZSBpdGVyYXRpbmcgdGhlIG5leHQgZW50cnkuIFRoaXMgYWxsb3dzIHRoZSBjYWxsYmFjayB0byBkb1xuICAgICAqIGFzeW5jaHJvbm91cyB3b3JrIHRvIGRldGVybWluZSBpZiB0aGlzIGl0ZXJhdGlvbiBzaG91bGQgY29udGludWUuXG4gICAgICpcbiAgICAgKiBUaGUgcHJvdmlkZWQgY2FsbGJhY2sgc2hvdWxkIHJldHVybiBgdHJ1ZWAgdG8gY29udGludWUgaXRlcmF0aW9uLCBhbmRcbiAgICAgKiBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKi8gICAgWShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmN1cnNvcih7fSk7XG4gICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VQcm9taXNlKCgobiwgcikgPT4ge1xuICAgICAgICAgICAgdC5vbmVycm9yID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9jaGVja0ZvckFuZFJlcG9ydGlPU0Vycm9yKGUudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgICAgICAgICByKHQpO1xuICAgICAgICAgICAgfSwgdC5vbnN1Y2Nlc3MgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gdC50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgICAgIHIgPyBlKHIucHJpbWFyeUtleSwgci52YWx1ZSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGUgPyByLmNvbnRpbnVlKCkgOiBuKCk7XG4gICAgICAgICAgICAgICAgfSkpIDogbigpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBXKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IFtdO1xuICAgICAgICByZXR1cm4gbmV3IFBlcnNpc3RlbmNlUHJvbWlzZSgoKHIsIGkpID0+IHtcbiAgICAgICAgICAgIGUub25lcnJvciA9IGUgPT4ge1xuICAgICAgICAgICAgICAgIGkoZS50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgfSwgZS5vbnN1Y2Nlc3MgPSBlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpID0gZS50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgICAgIGlmICghaSkgcmV0dXJuIHZvaWQgcigpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBuZXcgX19QUklWQVRFX0l0ZXJhdGlvbkNvbnRyb2xsZXIoaSksIG8gPSB0KGkucHJpbWFyeUtleSwgaS52YWx1ZSwgcyk7XG4gICAgICAgICAgICAgICAgaWYgKG8gaW5zdGFuY2VvZiBQZXJzaXN0ZW5jZVByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IG8uY2F0Y2goKGUgPT4gKHMuZG9uZSgpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVqZWN0KGUpKSkpO1xuICAgICAgICAgICAgICAgICAgICBuLnB1c2goZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHMuaXNEb25lID8gcigpIDogbnVsbCA9PT0gcy5LID8gaS5jb250aW51ZSgpIDogaS5jb250aW51ZShzLkspO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKG4pKSk7XG4gICAgfVxuICAgIG9wdGlvbnMoZSwgdCkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gZSAmJiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSA/IG4gPSBlIDogdCA9IGUpLCB7XG4gICAgICAgICAgICBpbmRleDogbixcbiAgICAgICAgICAgIHJhbmdlOiB0XG4gICAgICAgIH07XG4gICAgfVxuICAgIGN1cnNvcihlKSB7XG4gICAgICAgIGxldCB0ID0gXCJuZXh0XCI7XG4gICAgICAgIGlmIChlLnJldmVyc2UgJiYgKHQgPSBcInByZXZcIiksIGUuaW5kZXgpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLnN0b3JlLmluZGV4KGUuaW5kZXgpO1xuICAgICAgICAgICAgcmV0dXJuIGUuSCA/IG4ub3BlbktleUN1cnNvcihlLnJhbmdlLCB0KSA6IG4ub3BlbkN1cnNvcihlLnJhbmdlLCB0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5zdG9yZS5vcGVuQ3Vyc29yKGUucmFuZ2UsIHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBXcmFwcyBhbiBJREJSZXF1ZXN0IGluIGEgUGVyc2lzdGVuY2VQcm9taXNlLCB1c2luZyB0aGUgb25zdWNjZXNzIC8gb25lcnJvclxuICogaGFuZGxlcnMgdG8gcmVzb2x2ZSAvIHJlamVjdCB0aGUgUGVyc2lzdGVuY2VQcm9taXNlIGFzIGFwcHJvcHJpYXRlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV93cmFwUmVxdWVzdChlKSB7XG4gICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVByb21pc2UoKCh0LCBuKSA9PiB7XG4gICAgICAgIGUub25zdWNjZXNzID0gZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gZS50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgdChuKTtcbiAgICAgICAgfSwgZS5vbmVycm9yID0gZSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2NoZWNrRm9yQW5kUmVwb3J0aU9TRXJyb3IoZS50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgbih0KTtcbiAgICAgICAgfTtcbiAgICB9KSk7XG59XG5cbi8vIEd1YXJkIHNvIHdlIG9ubHkgcmVwb3J0IHRoZSBlcnJvciBvbmNlLlxubGV0IE0gPSAhMTtcblxuZnVuY3Rpb24gX19QUklWQVRFX2NoZWNrRm9yQW5kUmVwb3J0aU9TRXJyb3IoZSkge1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfU2ltcGxlRGIuUyhnZXRVQSgpKTtcbiAgICBpZiAodCA+PSAxMi4yICYmIHQgPCAxMykge1xuICAgICAgICBjb25zdCB0ID0gXCJBbiBpbnRlcm5hbCBlcnJvciB3YXMgZW5jb3VudGVyZWQgaW4gdGhlIEluZGV4ZWQgRGF0YWJhc2Ugc2VydmVyXCI7XG4gICAgICAgIGlmIChlLm1lc3NhZ2UuaW5kZXhPZih0KSA+PSAwKSB7XG4gICAgICAgICAgICAvLyBXcmFwIGVycm9yIGluIGEgbW9yZSBkZXNjcmlwdGl2ZSBvbmUuXG4gICAgICAgICAgICBjb25zdCBlID0gbmV3IEZpcmVzdG9yZUVycm9yKFwiaW50ZXJuYWxcIiwgYElPU19JTkRFWEVEREJfQlVHMTogSW5kZXhlZERiIGhhcyB0aHJvd24gJyR7dH0nLiBUaGlzIGlzIGxpa2VseSBkdWUgdG8gYW4gdW5hdm9pZGFibGUgYnVnIGluIGlPUy4gU2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcS81NjQ5NjI5Ni8xMTA5MTUgZm9yIGRldGFpbHMgYW5kIGEgcG90ZW50aWFsIHdvcmthcm91bmQuYCk7XG4gICAgICAgICAgICByZXR1cm4gTSB8fCAoTSA9ICEwLCBcbiAgICAgICAgICAgIC8vIFRocm93IGEgZ2xvYmFsIGV4Y2VwdGlvbiBvdXRzaWRlIG9mIHRoaXMgcHJvbWlzZSBjaGFpbiwgZm9yIHRoZSB1c2VyIHRvXG4gICAgICAgICAgICAvLyBwb3RlbnRpYWxseSBjYXRjaC5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfSksIDApKSwgZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZTtcbn1cblxuLyoqIFRoaXMgY2xhc3MgaXMgcmVzcG9uc2libGUgZm9yIHRoZSBzY2hlZHVsaW5nIG9mIEluZGV4IEJhY2tmaWxsZXIuICovXG5jbGFzcyBfX1BSSVZBVEVfSW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZSA9IGUsIHRoaXMuWiA9IHQsIHRoaXMudGFzayA9IG51bGw7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLlgoMTVlMyk7XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIHRoaXMudGFzayAmJiAodGhpcy50YXNrLmNhbmNlbCgpLCB0aGlzLnRhc2sgPSBudWxsKTtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWQoKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLnRhc2s7XG4gICAgfVxuICAgIFgoZSkge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJJbmRleEJhY2tmaWxsZXJcIiwgYFNjaGVkdWxlZCBpbiAke2V9bXNgKSwgdGhpcy50YXNrID0gdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBZnRlckRlbGF5KFwiaW5kZXhfYmFja2ZpbGxcIiAvKiBUaW1lcklkLkluZGV4QmFja2ZpbGwgKi8gLCBlLCAoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiSW5kZXhCYWNrZmlsbGVyXCIsIGBEb2N1bWVudHMgd3JpdHRlbjogJHthd2FpdCB0aGlzLlouZWUoKX1gKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfaXNJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yKGUpID8gX19QUklWQVRFX2xvZ0RlYnVnKFwiSW5kZXhCYWNrZmlsbGVyXCIsIFwiSWdub3JpbmcgSW5kZXhlZERCIGVycm9yIGR1cmluZyBpbmRleCBiYWNrZmlsbDogXCIsIGUpIDogYXdhaXQgX19QUklWQVRFX2lnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyhlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuWCg2ZTQpO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKiogSW1wbGVtZW50cyB0aGUgc3RlcHMgZm9yIGJhY2tmaWxsaW5nIGluZGV4ZXMuICovIGNsYXNzIF9fUFJJVkFURV9JbmRleEJhY2tmaWxsZXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIExvY2FsU3RvcmUgcHJvdmlkZXMgYWNjZXNzIHRvIEluZGV4TWFuYWdlciBhbmQgTG9jYWxEb2N1bWVudFZpZXcuXG4gICAgICogVGhlc2UgcHJvcGVydGllcyB3aWxsIHVwZGF0ZSB3aGVuIHRoZSB1c2VyIGNoYW5nZXMuIENvbnNlcXVlbnRseSxcbiAgICAgKiBtYWtpbmcgYSBsb2NhbCBjb3B5IG9mIEluZGV4TWFuYWdlciBhbmQgTG9jYWxEb2N1bWVudFZpZXcgd2lsbCByZXF1aXJlXG4gICAgICogdXBkYXRlcyBvdmVyIHRpbWUuIFRoZSBzaW1wbGVyIHNvbHV0aW9uIGlzIHRvIHJlbHkgb24gTG9jYWxTdG9yZSB0byBoYXZlXG4gICAgICogYW4gdXAtdG8tZGF0ZSByZWZlcmVuY2VzIHRvIEluZGV4TWFuYWdlciBhbmQgTG9jYWxEb2N1bWVudFN0b3JlLlxuICAgICAqL1xuICAgIGUsIHQpIHtcbiAgICAgICAgdGhpcy5sb2NhbFN0b3JlID0gZSwgdGhpcy5wZXJzaXN0ZW5jZSA9IHQ7XG4gICAgfVxuICAgIGFzeW5jIGVlKGUgPSA1MCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkJhY2tmaWxsIEluZGV4ZXNcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAodCA9PiB0aGlzLnRlKHQsIGUpKSk7XG4gICAgfVxuICAgIC8qKiBXcml0ZXMgaW5kZXggZW50cmllcyB1bnRpbCB0aGUgY2FwIGlzIHJlYWNoZWQuIFJldHVybnMgdGhlIG51bWJlciBvZiBkb2N1bWVudHMgcHJvY2Vzc2VkLiAqLyAgICB0ZShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgU2V0O1xuICAgICAgICBsZXQgciA9IHQsIGkgPSAhMDtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5kb1doaWxlKCgoKSA9PiAhMCA9PT0gaSAmJiByID4gMCksICgoKSA9PiB0aGlzLmxvY2FsU3RvcmUuaW5kZXhNYW5hZ2VyLmdldE5leHRDb2xsZWN0aW9uR3JvdXBUb1VwZGF0ZShlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSB0ICYmICFuLmhhcyh0KSkgcmV0dXJuIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkluZGV4QmFja2ZpbGxlclwiLCBgUHJvY2Vzc2luZyBjb2xsZWN0aW9uOiAke3R9YCksIFxuICAgICAgICAgICAgdGhpcy5uZShlLCB0LCByKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICByIC09IGUsIG4uYWRkKHQpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgaSA9ICExO1xuICAgICAgICB9KSkpKS5uZXh0KCgoKSA9PiB0IC0gcikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXcml0ZXMgZW50cmllcyBmb3IgdGhlIHByb3ZpZGVkIGNvbGxlY3Rpb24gZ3JvdXAuIFJldHVybnMgdGhlIG51bWJlciBvZiBkb2N1bWVudHMgcHJvY2Vzc2VkLlxuICAgICAqLyAgICBuZShlLCB0LCBuKSB7XG4gICAgICAgIC8vIFVzZSB0aGUgZWFybGllc3Qgb2Zmc2V0IG9mIGFsbCBmaWVsZCBpbmRleGVzIHRvIHF1ZXJ5IHRoZSBsb2NhbCBjYWNoZS5cbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxTdG9yZS5pbmRleE1hbmFnZXIuZ2V0TWluT2Zmc2V0RnJvbUNvbGxlY3Rpb25Hcm91cChlLCB0KS5uZXh0KChyID0+IHRoaXMubG9jYWxTdG9yZS5sb2NhbERvY3VtZW50cy5nZXROZXh0RG9jdW1lbnRzKGUsIHQsIHIsIG4pLm5leHQoKG4gPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IG4uY2hhbmdlcztcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvY2FsU3RvcmUuaW5kZXhNYW5hZ2VyLnVwZGF0ZUluZGV4RW50cmllcyhlLCBpKS5uZXh0KCgoKSA9PiB0aGlzLnJlKHIsIG4pKSkubmV4dCgobiA9PiAoX19QUklWQVRFX2xvZ0RlYnVnKFwiSW5kZXhCYWNrZmlsbGVyXCIsIGBVcGRhdGluZyBvZmZzZXQ6ICR7bn1gKSwgXG4gICAgICAgICAgICB0aGlzLmxvY2FsU3RvcmUuaW5kZXhNYW5hZ2VyLnVwZGF0ZUNvbGxlY3Rpb25Hcm91cChlLCB0LCBuKSkpKS5uZXh0KCgoKSA9PiBpLnNpemUpKTtcbiAgICAgICAgfSkpKSk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRoZSBuZXh0IG9mZnNldCBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgZG9jdW1lbnRzLiAqLyAgICByZShlLCB0KSB7XG4gICAgICAgIGxldCBuID0gZTtcbiAgICAgICAgcmV0dXJuIHQuY2hhbmdlcy5mb3JFYWNoKCgoZSwgdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9uZXdJbmRleE9mZnNldEZyb21Eb2N1bWVudCh0KTtcbiAgICAgICAgICAgIF9fUFJJVkFURV9pbmRleE9mZnNldENvbXBhcmF0b3IociwgbikgPiAwICYmIChuID0gcik7XG4gICAgICAgIH0pKSwgbmV3IEluZGV4T2Zmc2V0KG4ucmVhZFRpbWUsIG4uZG9jdW1lbnRLZXksIE1hdGgubWF4KHQuYmF0Y2hJZCwgZS5sYXJnZXN0QmF0Y2hJZCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogYExpc3RlblNlcXVlbmNlYCBpcyBhIG1vbm90b25pYyBzZXF1ZW5jZS4gSXQgaXMgaW5pdGlhbGl6ZWQgd2l0aCBhIG1pbmltdW0gdmFsdWUgdG9cbiAqIGV4Y2VlZC4gQWxsIHN1YnNlcXVlbnQgY2FsbHMgdG8gbmV4dCB3aWxsIHJldHVybiBpbmNyZWFzaW5nIHZhbHVlcy4gSWYgcHJvdmlkZWQgd2l0aCBhXG4gKiBgU2VxdWVuY2VOdW1iZXJTeW5jZXJgLCBpdCB3aWxsIGFkZGl0aW9uYWxseSBidW1wIGl0cyBuZXh0IHZhbHVlIHdoZW4gdG9sZCBvZiBhIG5ldyB2YWx1ZSwgYXNcbiAqIHdlbGwgYXMgd3JpdGUgb3V0IHNlcXVlbmNlIG51bWJlcnMgdGhhdCBpdCBwcm9kdWNlcyB2aWEgYG5leHQoKWAuXG4gKi8gY2xhc3MgX19QUklWQVRFX0xpc3RlblNlcXVlbmNlIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMucHJldmlvdXNWYWx1ZSA9IGUsIHQgJiYgKHQuc2VxdWVuY2VOdW1iZXJIYW5kbGVyID0gZSA9PiB0aGlzLmllKGUpLCB0aGlzLnNlID0gZSA9PiB0LndyaXRlU2VxdWVuY2VOdW1iZXIoZSkpO1xuICAgIH1cbiAgICBpZShlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByZXZpb3VzVmFsdWUgPSBNYXRoLm1heChlLCB0aGlzLnByZXZpb3VzVmFsdWUpLCB0aGlzLnByZXZpb3VzVmFsdWU7XG4gICAgfVxuICAgIG5leHQoKSB7XG4gICAgICAgIGNvbnN0IGUgPSArK3RoaXMucHJldmlvdXNWYWx1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2UgJiYgdGhpcy5zZShlKSwgZTtcbiAgICB9XG59XG5cbl9fUFJJVkFURV9MaXN0ZW5TZXF1ZW5jZS5vZSA9IC0xO1xuXG4vKipcbiAqIFJldHVybnMgd2hldGhlciBhIHZhcmlhYmxlIGlzIGVpdGhlciB1bmRlZmluZWQgb3IgbnVsbC5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2lzTnVsbE9yVW5kZWZpbmVkKGUpIHtcbiAgICByZXR1cm4gbnVsbCA9PSBlO1xufVxuXG4vKiogUmV0dXJucyB3aGV0aGVyIHRoZSB2YWx1ZSByZXByZXNlbnRzIC0wLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfaXNOZWdhdGl2ZVplcm8oZSkge1xuICAgIC8vIERldGVjdCBpZiB0aGUgdmFsdWUgaXMgLTAuMC4gQmFzZWQgb24gcG9seWZpbGwgZnJvbVxuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9pc1xuICAgIHJldHVybiAwID09PSBlICYmIDEgLyBlID09IC0xIC8gMDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgYSB2YWx1ZSBpcyBhbiBpbnRlZ2VyIGFuZCBpbiB0aGUgc2FmZSBpbnRlZ2VyIHJhbmdlXG4gKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gdGVzdCBmb3IgYmVpbmcgYW4gaW50ZWdlciBhbmQgaW4gdGhlIHNhZmUgcmFuZ2VcbiAqLyBmdW5jdGlvbiBpc1NhZmVJbnRlZ2VyKGUpIHtcbiAgICByZXR1cm4gXCJudW1iZXJcIiA9PSB0eXBlb2YgZSAmJiBOdW1iZXIuaXNJbnRlZ2VyKGUpICYmICFfX1BSSVZBVEVfaXNOZWdhdGl2ZVplcm8oZSkgJiYgZSA8PSBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiAmJiBlID49IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBFbmNvZGVzIGEgcmVzb3VyY2UgcGF0aCBpbnRvIGEgSW5kZXhlZERiLWNvbXBhdGlibGUgc3RyaW5nIGZvcm0uXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgoZSkge1xuICAgIGxldCB0ID0gXCJcIjtcbiAgICBmb3IgKGxldCBuID0gMDsgbiA8IGUubGVuZ3RoOyBuKyspIHQubGVuZ3RoID4gMCAmJiAodCA9IF9fUFJJVkFURV9lbmNvZGVTZXBhcmF0b3IodCkpLCBcbiAgICB0ID0gX19QUklWQVRFX2VuY29kZVNlZ21lbnQoZS5nZXQobiksIHQpO1xuICAgIHJldHVybiBfX1BSSVZBVEVfZW5jb2RlU2VwYXJhdG9yKHQpO1xufVxuXG4vKiogRW5jb2RlcyBhIHNpbmdsZSBzZWdtZW50IG9mIGEgcmVzb3VyY2UgcGF0aCBpbnRvIHRoZSBnaXZlbiByZXN1bHQgKi8gZnVuY3Rpb24gX19QUklWQVRFX2VuY29kZVNlZ21lbnQoZSwgdCkge1xuICAgIGxldCBuID0gdDtcbiAgICBjb25zdCByID0gZS5sZW5ndGg7XG4gICAgZm9yIChsZXQgdCA9IDA7IHQgPCByOyB0KyspIHtcbiAgICAgICAgY29uc3QgciA9IGUuY2hhckF0KHQpO1xuICAgICAgICBzd2l0Y2ggKHIpIHtcbiAgICAgICAgICBjYXNlIFwiXFwwXCI6XG4gICAgICAgICAgICBuICs9IFwiXHUwMDAxXHUwMDEwXCI7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCJcdTAwMDFcIjpcbiAgICAgICAgICAgIG4gKz0gXCJcdTAwMDFcdTAwMTFcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIG4gKz0gcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbjtcbn1cblxuLyoqIEVuY29kZXMgYSBwYXRoIHNlcGFyYXRvciBpbnRvIHRoZSBnaXZlbiByZXN1bHQgKi8gZnVuY3Rpb24gX19QUklWQVRFX2VuY29kZVNlcGFyYXRvcihlKSB7XG4gICAgcmV0dXJuIGUgKyBcIlx1MDAwMVx1MDAwMVwiO1xufVxuXG4vKipcbiAqIERlY29kZXMgdGhlIGdpdmVuIEluZGV4ZWREYi1jb21wYXRpYmxlIHN0cmluZyBmb3JtIG9mIGEgcmVzb3VyY2UgcGF0aCBpbnRvXG4gKiBhIFJlc291cmNlUGF0aCBpbnN0YW5jZS4gTm90ZSB0aGF0IHRoaXMgbWV0aG9kIGlzIG5vdCBzdWl0YWJsZSBmb3IgdXNlIHdpdGhcbiAqIGRlY29kaW5nIHJlc291cmNlIG5hbWVzIGZyb20gdGhlIHNlcnZlcjsgdGhvc2UgYXJlIE9uZSBQbGF0Zm9ybSBmb3JtYXRcbiAqIHN0cmluZ3MuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2RlY29kZVJlc291cmNlUGF0aChlKSB7XG4gICAgLy8gRXZlbnQgdGhlIGVtcHR5IHBhdGggbXVzdCBlbmNvZGUgYXMgYSBwYXRoIG9mIGF0IGxlYXN0IGxlbmd0aCAyLiBBIHBhdGhcbiAgICAvLyB3aXRoIGV4YWN0bHkgMiBtdXN0IGJlIHRoZSBlbXB0eSBwYXRoLlxuICAgIGNvbnN0IHQgPSBlLmxlbmd0aDtcbiAgICBpZiAoX19QUklWQVRFX2hhcmRBc3NlcnQodCA+PSAyKSwgMiA9PT0gdCkgcmV0dXJuIF9fUFJJVkFURV9oYXJkQXNzZXJ0KFwiXHUwMDAxXCIgPT09IGUuY2hhckF0KDApICYmIFwiXHUwMDAxXCIgPT09IGUuY2hhckF0KDEpKSwgXG4gICAgUmVzb3VyY2VQYXRoLmVtcHR5UGF0aCgpO1xuICAgIC8vIEVzY2FwZSBjaGFyYWN0ZXJzIGNhbm5vdCBleGlzdCBwYXN0IHRoZSBzZWNvbmQtdG8tbGFzdCBwb3NpdGlvbiBpbiB0aGVcbiAgICAvLyBzb3VyY2UgdmFsdWUuXG4gICAgICAgIGNvbnN0IF9fUFJJVkFURV9sYXN0UmVhc29uYWJsZUVzY2FwZUluZGV4ID0gdCAtIDIsIG4gPSBbXTtcbiAgICBsZXQgciA9IFwiXCI7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0OyApIHtcbiAgICAgICAgLy8gVGhlIGxhc3QgdHdvIGNoYXJhY3RlcnMgb2YgYSB2YWxpZCBlbmNvZGVkIHBhdGggbXVzdCBiZSBhIHNlcGFyYXRvciwgc29cbiAgICAgICAgLy8gdGhlcmUgbXVzdCBiZSBhbiBlbmQgdG8gdGhpcyBzZWdtZW50LlxuICAgICAgICBjb25zdCB0ID0gZS5pbmRleE9mKFwiXHUwMDAxXCIsIGkpO1xuICAgICAgICAodCA8IDAgfHwgdCA+IF9fUFJJVkFURV9sYXN0UmVhc29uYWJsZUVzY2FwZUluZGV4KSAmJiBmYWlsKCk7XG4gICAgICAgIHN3aXRjaCAoZS5jaGFyQXQodCArIDEpKSB7XG4gICAgICAgICAgY2FzZSBcIlx1MDAwMVwiOlxuICAgICAgICAgICAgY29uc3QgcyA9IGUuc3Vic3RyaW5nKGksIHQpO1xuICAgICAgICAgICAgbGV0IG87XG4gICAgICAgICAgICAwID09PSByLmxlbmd0aCA/IFxuICAgICAgICAgICAgLy8gQXZvaWQgY29weWluZyBmb3IgdGhlIGNvbW1vbiBjYXNlIG9mIGEgc2VnbWVudCB0aGF0IGV4Y2x1ZGVzIFxcMFxuICAgICAgICAgICAgLy8gYW5kIFxcMDAxXG4gICAgICAgICAgICBvID0gcyA6IChyICs9IHMsIG8gPSByLCByID0gXCJcIiksIG4ucHVzaChvKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIlx1MDAxMFwiOlxuICAgICAgICAgICAgciArPSBlLnN1YnN0cmluZyhpLCB0KSwgciArPSBcIlxcMFwiO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiXHUwMDExXCI6XG4gICAgICAgICAgICAvLyBUaGUgZXNjYXBlIGNoYXJhY3RlciBjYW4gYmUgdXNlZCBpbiB0aGUgb3V0cHV0IHRvIGVuY29kZSBpdHNlbGYuXG4gICAgICAgICAgICByICs9IGUuc3Vic3RyaW5nKGksIHQgKyAxKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGZhaWwoKTtcbiAgICAgICAgfVxuICAgICAgICBpID0gdCArIDI7XG4gICAgfVxuICAgIHJldHVybiBuZXcgUmVzb3VyY2VQYXRoKG4pO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCB4ID0gWyBcInVzZXJJZFwiLCBcImJhdGNoSWRcIiBdO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBOYW1lIG9mIHRoZSBJbmRleGVkRGIgb2JqZWN0IHN0b3JlLlxuICpcbiAqIE5vdGUgdGhhdCB0aGUgbmFtZSAnb3duZXInIGlzIGNob3NlbiB0byBlbnN1cmUgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgd2l0aFxuICogb2xkZXIgY2xpZW50cyB0aGF0IG9ubHkgc3VwcG9ydGVkIHNpbmdsZSBsb2NrZWQgYWNjZXNzIHRvIHRoZSBwZXJzaXN0ZW5jZVxuICogbGF5ZXIuXG4gKi9cbi8qKlxuICogQ3JlYXRlcyBhIFt1c2VySWQsIGVuY29kZWRQYXRoXSBrZXkgZm9yIHVzZSBpbiB0aGUgRGJEb2N1bWVudE11dGF0aW9uc1xuICogaW5kZXggdG8gaXRlcmF0ZSBvdmVyIGFsbCBhdCBkb2N1bWVudCBtdXRhdGlvbnMgZm9yIGEgZ2l2ZW4gcGF0aCBvciBsb3dlci5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX25ld0RiRG9jdW1lbnRNdXRhdGlvblByZWZpeEZvclBhdGgoZSwgdCkge1xuICAgIHJldHVybiBbIGUsIF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgodCkgXTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgZnVsbCBpbmRleCBrZXkgb2YgW3VzZXJJZCwgZW5jb2RlZFBhdGgsIGJhdGNoSWRdIGZvciBpbnNlcnRpbmdcbiAqIGFuZCBkZWxldGluZyBpbnRvIHRoZSBEYkRvY3VtZW50TXV0YXRpb25zIGluZGV4LlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdEYkRvY3VtZW50TXV0YXRpb25LZXkoZSwgdCwgbikge1xuICAgIHJldHVybiBbIGUsIF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgodCksIG4gXTtcbn1cblxuLyoqXG4gKiBCZWNhdXNlIHdlIHN0b3JlIGFsbCB0aGUgdXNlZnVsIGluZm9ybWF0aW9uIGZvciB0aGlzIHN0b3JlIGluIHRoZSBrZXksXG4gKiB0aGVyZSBpcyBubyB1c2VmdWwgaW5mb3JtYXRpb24gdG8gc3RvcmUgYXMgdGhlIHZhbHVlLiBUaGUgcmF3ICh1bmVuY29kZWQpXG4gKiBwYXRoIGNhbm5vdCBiZSBzdG9yZWQgYmVjYXVzZSBJbmRleGVkRGIgZG9lc24ndCBzdG9yZSBwcm90b3R5cGVcbiAqIGluZm9ybWF0aW9uLlxuICovIGNvbnN0IE8gPSB7fSwgTiA9IFsgXCJwcmVmaXhQYXRoXCIsIFwiY29sbGVjdGlvbkdyb3VwXCIsIFwicmVhZFRpbWVcIiwgXCJkb2N1bWVudElkXCIgXSwgTCA9IFsgXCJwcmVmaXhQYXRoXCIsIFwiY29sbGVjdGlvbkdyb3VwXCIsIFwiZG9jdW1lbnRJZFwiIF0sIEIgPSBbIFwiY29sbGVjdGlvbkdyb3VwXCIsIFwicmVhZFRpbWVcIiwgXCJwcmVmaXhQYXRoXCIsIFwiZG9jdW1lbnRJZFwiIF0sIGsgPSBbIFwiY2Fub25pY2FsSWRcIiwgXCJ0YXJnZXRJZFwiIF0sIHEgPSBbIFwidGFyZ2V0SWRcIiwgXCJwYXRoXCIgXSwgUSA9IFsgXCJwYXRoXCIsIFwidGFyZ2V0SWRcIiBdLCBLID0gWyBcImNvbGxlY3Rpb25JZFwiLCBcInBhcmVudFwiIF0sICQgPSBbIFwiaW5kZXhJZFwiLCBcInVpZFwiIF0sIFUgPSBbIFwidWlkXCIsIFwic2VxdWVuY2VOdW1iZXJcIiBdLCBXID0gWyBcImluZGV4SWRcIiwgXCJ1aWRcIiwgXCJhcnJheVZhbHVlXCIsIFwiZGlyZWN0aW9uYWxWYWx1ZVwiLCBcIm9yZGVyZWREb2N1bWVudEtleVwiLCBcImRvY3VtZW50S2V5XCIgXSwgRyA9IFsgXCJpbmRleElkXCIsIFwidWlkXCIsIFwib3JkZXJlZERvY3VtZW50S2V5XCIgXSwgeiA9IFsgXCJ1c2VySWRcIiwgXCJjb2xsZWN0aW9uUGF0aFwiLCBcImRvY3VtZW50SWRcIiBdLCBqID0gWyBcInVzZXJJZFwiLCBcImNvbGxlY3Rpb25QYXRoXCIsIFwibGFyZ2VzdEJhdGNoSWRcIiBdLCBIID0gWyBcInVzZXJJZFwiLCBcImNvbGxlY3Rpb25Hcm91cFwiLCBcImxhcmdlc3RCYXRjaElkXCIgXSwgSiA9IFsgLi4uWyAuLi5bIC4uLlsgLi4uWyBcIm11dGF0aW9uUXVldWVzXCIsIFwibXV0YXRpb25zXCIsIFwiZG9jdW1lbnRNdXRhdGlvbnNcIiwgXCJyZW1vdGVEb2N1bWVudHNcIiwgXCJ0YXJnZXRzXCIsIFwib3duZXJcIiwgXCJ0YXJnZXRHbG9iYWxcIiwgXCJ0YXJnZXREb2N1bWVudHNcIiBdLCBcImNsaWVudE1ldGFkYXRhXCIgXSwgXCJyZW1vdGVEb2N1bWVudEdsb2JhbFwiIF0sIFwiY29sbGVjdGlvblBhcmVudHNcIiBdLCBcImJ1bmRsZXNcIiwgXCJuYW1lZFF1ZXJpZXNcIiBdLCBZID0gWyAuLi5KLCBcImRvY3VtZW50T3ZlcmxheXNcIiBdLCBaID0gWyBcIm11dGF0aW9uUXVldWVzXCIsIFwibXV0YXRpb25zXCIsIFwiZG9jdW1lbnRNdXRhdGlvbnNcIiwgXCJyZW1vdGVEb2N1bWVudHNWMTRcIiwgXCJ0YXJnZXRzXCIsIFwib3duZXJcIiwgXCJ0YXJnZXRHbG9iYWxcIiwgXCJ0YXJnZXREb2N1bWVudHNcIiwgXCJjbGllbnRNZXRhZGF0YVwiLCBcInJlbW90ZURvY3VtZW50R2xvYmFsXCIsIFwiY29sbGVjdGlvblBhcmVudHNcIiwgXCJidW5kbGVzXCIsIFwibmFtZWRRdWVyaWVzXCIsIFwiZG9jdW1lbnRPdmVybGF5c1wiIF0sIFggPSBaLCBlZSA9IFsgLi4uWCwgXCJpbmRleENvbmZpZ3VyYXRpb25cIiwgXCJpbmRleFN0YXRlXCIsIFwiaW5kZXhFbnRyaWVzXCIgXSwgdGUgPSBlZTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9JbmRleGVkRGJUcmFuc2FjdGlvbiBleHRlbmRzIFBlcnNpc3RlbmNlVHJhbnNhY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5fZSA9IGUsIHRoaXMuY3VycmVudFNlcXVlbmNlTnVtYmVyID0gdDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9nZXRTdG9yZShlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9TaW1wbGVEYi5GKG4uX2UsIHQpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfb2JqZWN0U2l6ZShlKSB7XG4gICAgbGV0IHQgPSAwO1xuICAgIGZvciAoY29uc3QgbiBpbiBlKSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSwgbikgJiYgdCsrO1xuICAgIHJldHVybiB0O1xufVxuXG5mdW5jdGlvbiBmb3JFYWNoKGUsIHQpIHtcbiAgICBmb3IgKGNvbnN0IG4gaW4gZSkgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsIG4pICYmIHQobiwgZVtuXSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9tYXBUb0FycmF5KGUsIHQpIHtcbiAgICBjb25zdCBuID0gW107XG4gICAgZm9yIChjb25zdCByIGluIGUpIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLCByKSAmJiBuLnB1c2godChlW3JdLCByLCBlKSk7XG4gICAgcmV0dXJuIG47XG59XG5cbmZ1bmN0aW9uIGlzRW1wdHkoZSkge1xuICAgIGZvciAoY29uc3QgdCBpbiBlKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsIHQpKSByZXR1cm4gITE7XG4gICAgcmV0dXJuICEwO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gQW4gaW1tdXRhYmxlIHNvcnRlZCBtYXAgaW1wbGVtZW50YXRpb24sIGJhc2VkIG9uIGEgTGVmdC1sZWFuaW5nIFJlZC1CbGFja1xuLy8gdHJlZS5cbmNsYXNzIFNvcnRlZE1hcCB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLmNvbXBhcmF0b3IgPSBlLCB0aGlzLnJvb3QgPSB0IHx8IExMUkJOb2RlLkVNUFRZO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgbWFwLCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5L3ZhbHVlIGFkZGVkIG9yIHJlcGxhY2VkLlxuICAgIGluc2VydChlLCB0KSB7XG4gICAgICAgIHJldHVybiBuZXcgU29ydGVkTWFwKHRoaXMuY29tcGFyYXRvciwgdGhpcy5yb290Lmluc2VydChlLCB0LCB0aGlzLmNvbXBhcmF0b3IpLmNvcHkobnVsbCwgbnVsbCwgTExSQk5vZGUuQkxBQ0ssIG51bGwsIG51bGwpKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIG1hcCwgd2l0aCB0aGUgc3BlY2lmaWVkIGtleSByZW1vdmVkLlxuICAgIHJlbW92ZShlKSB7XG4gICAgICAgIHJldHVybiBuZXcgU29ydGVkTWFwKHRoaXMuY29tcGFyYXRvciwgdGhpcy5yb290LnJlbW92ZShlLCB0aGlzLmNvbXBhcmF0b3IpLmNvcHkobnVsbCwgbnVsbCwgTExSQk5vZGUuQkxBQ0ssIG51bGwsIG51bGwpKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgdmFsdWUgb2YgdGhlIG5vZGUgd2l0aCB0aGUgZ2l2ZW4ga2V5LCBvciBudWxsLlxuICAgIGdldChlKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcy5yb290O1xuICAgICAgICBmb3IgKDshdC5pc0VtcHR5KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuY29tcGFyYXRvcihlLCB0LmtleSk7XG4gICAgICAgICAgICBpZiAoMCA9PT0gbikgcmV0dXJuIHQudmFsdWU7XG4gICAgICAgICAgICBuIDwgMCA/IHQgPSB0LmxlZnQgOiBuID4gMCAmJiAodCA9IHQucmlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgZWxlbWVudCBpbiB0aGlzIHNvcnRlZCBtYXAsIG9yIC0xIGlmIGl0IGRvZXNuJ3RcbiAgICAvLyBleGlzdC5cbiAgICBpbmRleE9mKGUpIHtcbiAgICAgICAgLy8gTnVtYmVyIG9mIG5vZGVzIHRoYXQgd2VyZSBwcnVuZWQgd2hlbiBkZXNjZW5kaW5nIHJpZ2h0XG4gICAgICAgIGxldCB0ID0gMCwgbiA9IHRoaXMucm9vdDtcbiAgICAgICAgZm9yICg7IW4uaXNFbXB0eSgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNvbXBhcmF0b3IoZSwgbi5rZXkpO1xuICAgICAgICAgICAgaWYgKDAgPT09IHIpIHJldHVybiB0ICsgbi5sZWZ0LnNpemU7XG4gICAgICAgICAgICByIDwgMCA/IG4gPSBuLmxlZnQgOiAoXG4gICAgICAgICAgICAvLyBDb3VudCBhbGwgbm9kZXMgbGVmdCBvZiB0aGUgbm9kZSBwbHVzIHRoZSBub2RlIGl0c2VsZlxuICAgICAgICAgICAgdCArPSBuLmxlZnQuc2l6ZSArIDEsIG4gPSBuLnJpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBOb2RlIG5vdCBmb3VuZFxuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5pc0VtcHR5KCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIHRvdGFsIG51bWJlciBvZiBub2RlcyBpbiB0aGUgbWFwLlxuICAgIGdldCBzaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290LnNpemU7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIG1pbmltdW0ga2V5IGluIHRoZSBtYXAuXG4gICAgbWluS2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290Lm1pbktleSgpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBtYXhpbXVtIGtleSBpbiB0aGUgbWFwLlxuICAgIG1heEtleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5tYXhLZXkoKTtcbiAgICB9XG4gICAgLy8gVHJhdmVyc2VzIHRoZSBtYXAgaW4ga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvbiBmdW5jdGlvblxuICAgIC8vIGZvciBlYWNoIGtleS92YWx1ZSBwYWlyLiBJZiBhY3Rpb24gcmV0dXJucyB0cnVlLCB0cmF2ZXJzYWwgaXMgYWJvcnRlZC5cbiAgICAvLyBSZXR1cm5zIHRoZSBmaXJzdCB0cnV0aHkgdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLCBvciB0aGUgbGFzdCBmYWxzZXlcbiAgICAvLyB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24uXG4gICAgaW5vcmRlclRyYXZlcnNhbChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QuaW5vcmRlclRyYXZlcnNhbChlKTtcbiAgICB9XG4gICAgZm9yRWFjaChlKSB7XG4gICAgICAgIHRoaXMuaW5vcmRlclRyYXZlcnNhbCgoKHQsIG4pID0+IChlKHQsIG4pLCAhMSkpKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5vcmRlclRyYXZlcnNhbCgoKHQsIG4pID0+IChlLnB1c2goYCR7dH06JHtufWApLCAhMSkpKSwgYHske2Uuam9pbihcIiwgXCIpfX1gO1xuICAgIH1cbiAgICAvLyBUcmF2ZXJzZXMgdGhlIG1hcCBpbiByZXZlcnNlIGtleSBvcmRlciBhbmQgY2FsbHMgdGhlIHNwZWNpZmllZCBhY3Rpb25cbiAgICAvLyBmdW5jdGlvbiBmb3IgZWFjaCBrZXkvdmFsdWUgcGFpci4gSWYgYWN0aW9uIHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzXG4gICAgLy8gYWJvcnRlZC5cbiAgICAvLyBSZXR1cm5zIHRoZSBmaXJzdCB0cnV0aHkgdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLCBvciB0aGUgbGFzdCBmYWxzZXlcbiAgICAvLyB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24uXG4gICAgcmV2ZXJzZVRyYXZlcnNhbChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QucmV2ZXJzZVRyYXZlcnNhbChlKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhbiBpdGVyYXRvciBvdmVyIHRoZSBTb3J0ZWRNYXAuXG4gICAgZ2V0SXRlcmF0b3IoKSB7XG4gICAgICAgIHJldHVybiBuZXcgU29ydGVkTWFwSXRlcmF0b3IodGhpcy5yb290LCBudWxsLCB0aGlzLmNvbXBhcmF0b3IsICExKTtcbiAgICB9XG4gICAgZ2V0SXRlcmF0b3JGcm9tKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTb3J0ZWRNYXBJdGVyYXRvcih0aGlzLnJvb3QsIGUsIHRoaXMuY29tcGFyYXRvciwgITEpO1xuICAgIH1cbiAgICBnZXRSZXZlcnNlSXRlcmF0b3IoKSB7XG4gICAgICAgIHJldHVybiBuZXcgU29ydGVkTWFwSXRlcmF0b3IodGhpcy5yb290LCBudWxsLCB0aGlzLmNvbXBhcmF0b3IsICEwKTtcbiAgICB9XG4gICAgZ2V0UmV2ZXJzZUl0ZXJhdG9yRnJvbShlKSB7XG4gICAgICAgIHJldHVybiBuZXcgU29ydGVkTWFwSXRlcmF0b3IodGhpcy5yb290LCBlLCB0aGlzLmNvbXBhcmF0b3IsICEwKTtcbiAgICB9XG59XG5cbiAvLyBlbmQgU29ydGVkTWFwXG4vLyBBbiBpdGVyYXRvciBvdmVyIGFuIExMUkJOb2RlLlxuY2xhc3MgU29ydGVkTWFwSXRlcmF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgdGhpcy5pc1JldmVyc2UgPSByLCB0aGlzLm5vZGVTdGFjayA9IFtdO1xuICAgICAgICBsZXQgaSA9IDE7XG4gICAgICAgIGZvciAoOyFlLmlzRW1wdHkoKTsgKSBpZiAoaSA9IHQgPyBuKGUua2V5LCB0KSA6IDEsIFxuICAgICAgICAvLyBmbGlwIHRoZSBjb21wYXJpc29uIGlmIHdlJ3JlIGdvaW5nIGluIHJldmVyc2VcbiAgICAgICAgdCAmJiByICYmIChpICo9IC0xKSwgaSA8IDApIFxuICAgICAgICAvLyBUaGlzIG5vZGUgaXMgbGVzcyB0aGFuIG91ciBzdGFydCBrZXkuIGlnbm9yZSBpdFxuICAgICAgICBlID0gdGhpcy5pc1JldmVyc2UgPyBlLmxlZnQgOiBlLnJpZ2h0OyBlbHNlIHtcbiAgICAgICAgICAgIGlmICgwID09PSBpKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBub2RlIGlzIGV4YWN0bHkgZXF1YWwgdG8gb3VyIHN0YXJ0IGtleS4gUHVzaCBpdCBvbiB0aGUgc3RhY2ssXG4gICAgICAgICAgICAgICAgLy8gYnV0IHN0b3AgaXRlcmF0aW5nO1xuICAgICAgICAgICAgICAgIHRoaXMubm9kZVN0YWNrLnB1c2goZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUaGlzIG5vZGUgaXMgZ3JlYXRlciB0aGFuIG91ciBzdGFydCBrZXksIGFkZCBpdCB0byB0aGUgc3RhY2sgYW5kIG1vdmVcbiAgICAgICAgICAgIC8vIHRvIHRoZSBuZXh0IG9uZVxuICAgICAgICAgICAgdGhpcy5ub2RlU3RhY2sucHVzaChlKSwgZSA9IHRoaXMuaXNSZXZlcnNlID8gZS5yaWdodCA6IGUubGVmdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXROZXh0KCkge1xuICAgICAgICBsZXQgZSA9IHRoaXMubm9kZVN0YWNrLnBvcCgpO1xuICAgICAgICBjb25zdCB0ID0ge1xuICAgICAgICAgICAga2V5OiBlLmtleSxcbiAgICAgICAgICAgIHZhbHVlOiBlLnZhbHVlXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLmlzUmV2ZXJzZSkgZm9yIChlID0gZS5sZWZ0OyAhZS5pc0VtcHR5KCk7ICkgdGhpcy5ub2RlU3RhY2sucHVzaChlKSwgZSA9IGUucmlnaHQ7IGVsc2UgZm9yIChlID0gZS5yaWdodDsgIWUuaXNFbXB0eSgpOyApIHRoaXMubm9kZVN0YWNrLnB1c2goZSksIFxuICAgICAgICBlID0gZS5sZWZ0O1xuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG4gICAgaGFzTmV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZVN0YWNrLmxlbmd0aCA+IDA7XG4gICAgfVxuICAgIHBlZWsoKSB7XG4gICAgICAgIGlmICgwID09PSB0aGlzLm5vZGVTdGFjay5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5ub2RlU3RhY2tbdGhpcy5ub2RlU3RhY2subGVuZ3RoIC0gMV07XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBrZXk6IGUua2V5LFxuICAgICAgICAgICAgdmFsdWU6IGUudmFsdWVcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbiAvLyBlbmQgU29ydGVkTWFwSXRlcmF0b3Jcbi8vIFJlcHJlc2VudHMgYSBub2RlIGluIGEgTGVmdC1sZWFuaW5nIFJlZC1CbGFjayB0cmVlLlxuY2xhc3MgTExSQk5vZGUge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgdGhpcy5rZXkgPSBlLCB0aGlzLnZhbHVlID0gdCwgdGhpcy5jb2xvciA9IG51bGwgIT0gbiA/IG4gOiBMTFJCTm9kZS5SRUQsIHRoaXMubGVmdCA9IG51bGwgIT0gciA/IHIgOiBMTFJCTm9kZS5FTVBUWSwgXG4gICAgICAgIHRoaXMucmlnaHQgPSBudWxsICE9IGkgPyBpIDogTExSQk5vZGUuRU1QVFksIHRoaXMuc2l6ZSA9IHRoaXMubGVmdC5zaXplICsgMSArIHRoaXMucmlnaHQuc2l6ZTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIGN1cnJlbnQgbm9kZSwgb3B0aW9uYWxseSByZXBsYWNpbmcgcGllY2VzIG9mIGl0LlxuICAgIGNvcHkoZSwgdCwgbiwgciwgaSkge1xuICAgICAgICByZXR1cm4gbmV3IExMUkJOb2RlKG51bGwgIT0gZSA/IGUgOiB0aGlzLmtleSwgbnVsbCAhPSB0ID8gdCA6IHRoaXMudmFsdWUsIG51bGwgIT0gbiA/IG4gOiB0aGlzLmNvbG9yLCBudWxsICE9IHIgPyByIDogdGhpcy5sZWZ0LCBudWxsICE9IGkgPyBpIDogdGhpcy5yaWdodCk7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgLy8gVHJhdmVyc2VzIHRoZSB0cmVlIGluIGtleSBvcmRlciBhbmQgY2FsbHMgdGhlIHNwZWNpZmllZCBhY3Rpb24gZnVuY3Rpb25cbiAgICAvLyBmb3IgZWFjaCBub2RlLiBJZiBhY3Rpb24gcmV0dXJucyB0cnVlLCB0cmF2ZXJzYWwgaXMgYWJvcnRlZC5cbiAgICAvLyBSZXR1cm5zIHRoZSBmaXJzdCB0cnV0aHkgdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLCBvciB0aGUgbGFzdCBmYWxzZXlcbiAgICAvLyB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24uXG4gICAgaW5vcmRlclRyYXZlcnNhbChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxlZnQuaW5vcmRlclRyYXZlcnNhbChlKSB8fCBlKHRoaXMua2V5LCB0aGlzLnZhbHVlKSB8fCB0aGlzLnJpZ2h0Lmlub3JkZXJUcmF2ZXJzYWwoZSk7XG4gICAgfVxuICAgIC8vIFRyYXZlcnNlcyB0aGUgdHJlZSBpbiByZXZlcnNlIGtleSBvcmRlciBhbmQgY2FsbHMgdGhlIHNwZWNpZmllZCBhY3Rpb25cbiAgICAvLyBmdW5jdGlvbiBmb3IgZWFjaCBub2RlLiBJZiBhY3Rpb24gcmV0dXJucyB0cnVlLCB0cmF2ZXJzYWwgaXMgYWJvcnRlZC5cbiAgICAvLyBSZXR1cm5zIHRoZSBmaXJzdCB0cnV0aHkgdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLCBvciB0aGUgbGFzdCBmYWxzZXlcbiAgICAvLyB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24uXG4gICAgcmV2ZXJzZVRyYXZlcnNhbChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJpZ2h0LnJldmVyc2VUcmF2ZXJzYWwoZSkgfHwgZSh0aGlzLmtleSwgdGhpcy52YWx1ZSkgfHwgdGhpcy5sZWZ0LnJldmVyc2VUcmF2ZXJzYWwoZSk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIG1pbmltdW0gbm9kZSBpbiB0aGUgdHJlZS5cbiAgICBtaW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxlZnQuaXNFbXB0eSgpID8gdGhpcyA6IHRoaXMubGVmdC5taW4oKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgbWF4aW11bSBrZXkgaW4gdGhlIHRyZWUuXG4gICAgbWluS2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW4oKS5rZXk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIG1heGltdW0ga2V5IGluIHRoZSB0cmVlLlxuICAgIG1heEtleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmlnaHQuaXNFbXB0eSgpID8gdGhpcy5rZXkgOiB0aGlzLnJpZ2h0Lm1heEtleSgpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIG5ldyB0cmVlLCB3aXRoIHRoZSBrZXkvdmFsdWUgYWRkZWQuXG4gICAgaW5zZXJ0KGUsIHQsIG4pIHtcbiAgICAgICAgbGV0IHIgPSB0aGlzO1xuICAgICAgICBjb25zdCBpID0gbihlLCByLmtleSk7XG4gICAgICAgIHJldHVybiByID0gaSA8IDAgPyByLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgci5sZWZ0Lmluc2VydChlLCB0LCBuKSwgbnVsbCkgOiAwID09PSBpID8gci5jb3B5KG51bGwsIHQsIG51bGwsIG51bGwsIG51bGwpIDogci5jb3B5KG51bGwsIG51bGwsIG51bGwsIG51bGwsIHIucmlnaHQuaW5zZXJ0KGUsIHQsIG4pKSwgXG4gICAgICAgIHIuZml4VXAoKTtcbiAgICB9XG4gICAgcmVtb3ZlTWluKCkge1xuICAgICAgICBpZiAodGhpcy5sZWZ0LmlzRW1wdHkoKSkgcmV0dXJuIExMUkJOb2RlLkVNUFRZO1xuICAgICAgICBsZXQgZSA9IHRoaXM7XG4gICAgICAgIHJldHVybiBlLmxlZnQuaXNSZWQoKSB8fCBlLmxlZnQubGVmdC5pc1JlZCgpIHx8IChlID0gZS5tb3ZlUmVkTGVmdCgpKSwgZSA9IGUuY29weShudWxsLCBudWxsLCBudWxsLCBlLmxlZnQucmVtb3ZlTWluKCksIG51bGwpLCBcbiAgICAgICAgZS5maXhVcCgpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIG5ldyB0cmVlLCB3aXRoIHRoZSBzcGVjaWZpZWQgaXRlbSByZW1vdmVkLlxuICAgIHJlbW92ZShlLCB0KSB7XG4gICAgICAgIGxldCBuLCByID0gdGhpcztcbiAgICAgICAgaWYgKHQoZSwgci5rZXkpIDwgMCkgci5sZWZ0LmlzRW1wdHkoKSB8fCByLmxlZnQuaXNSZWQoKSB8fCByLmxlZnQubGVmdC5pc1JlZCgpIHx8IChyID0gci5tb3ZlUmVkTGVmdCgpKSwgXG4gICAgICAgIHIgPSByLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgci5sZWZ0LnJlbW92ZShlLCB0KSwgbnVsbCk7IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHIubGVmdC5pc1JlZCgpICYmIChyID0gci5yb3RhdGVSaWdodCgpKSwgci5yaWdodC5pc0VtcHR5KCkgfHwgci5yaWdodC5pc1JlZCgpIHx8IHIucmlnaHQubGVmdC5pc1JlZCgpIHx8IChyID0gci5tb3ZlUmVkUmlnaHQoKSksIFxuICAgICAgICAgICAgMCA9PT0gdChlLCByLmtleSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoci5yaWdodC5pc0VtcHR5KCkpIHJldHVybiBMTFJCTm9kZS5FTVBUWTtcbiAgICAgICAgICAgICAgICBuID0gci5yaWdodC5taW4oKSwgciA9IHIuY29weShuLmtleSwgbi52YWx1ZSwgbnVsbCwgbnVsbCwgci5yaWdodC5yZW1vdmVNaW4oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByID0gci5jb3B5KG51bGwsIG51bGwsIG51bGwsIG51bGwsIHIucmlnaHQucmVtb3ZlKGUsIHQpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gci5maXhVcCgpO1xuICAgIH1cbiAgICBpc1JlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sb3I7XG4gICAgfVxuICAgIC8vIFJldHVybnMgbmV3IHRyZWUgYWZ0ZXIgcGVyZm9ybWluZyBhbnkgbmVlZGVkIHJvdGF0aW9ucy5cbiAgICBmaXhVcCgpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzO1xuICAgICAgICByZXR1cm4gZS5yaWdodC5pc1JlZCgpICYmICFlLmxlZnQuaXNSZWQoKSAmJiAoZSA9IGUucm90YXRlTGVmdCgpKSwgZS5sZWZ0LmlzUmVkKCkgJiYgZS5sZWZ0LmxlZnQuaXNSZWQoKSAmJiAoZSA9IGUucm90YXRlUmlnaHQoKSksIFxuICAgICAgICBlLmxlZnQuaXNSZWQoKSAmJiBlLnJpZ2h0LmlzUmVkKCkgJiYgKGUgPSBlLmNvbG9yRmxpcCgpKSwgZTtcbiAgICB9XG4gICAgbW92ZVJlZExlZnQoKSB7XG4gICAgICAgIGxldCBlID0gdGhpcy5jb2xvckZsaXAoKTtcbiAgICAgICAgcmV0dXJuIGUucmlnaHQubGVmdC5pc1JlZCgpICYmIChlID0gZS5jb3B5KG51bGwsIG51bGwsIG51bGwsIG51bGwsIGUucmlnaHQucm90YXRlUmlnaHQoKSksIFxuICAgICAgICBlID0gZS5yb3RhdGVMZWZ0KCksIGUgPSBlLmNvbG9yRmxpcCgpKSwgZTtcbiAgICB9XG4gICAgbW92ZVJlZFJpZ2h0KCkge1xuICAgICAgICBsZXQgZSA9IHRoaXMuY29sb3JGbGlwKCk7XG4gICAgICAgIHJldHVybiBlLmxlZnQubGVmdC5pc1JlZCgpICYmIChlID0gZS5yb3RhdGVSaWdodCgpLCBlID0gZS5jb2xvckZsaXAoKSksIGU7XG4gICAgfVxuICAgIHJvdGF0ZUxlZnQoKSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmNvcHkobnVsbCwgbnVsbCwgTExSQk5vZGUuUkVELCBudWxsLCB0aGlzLnJpZ2h0LmxlZnQpO1xuICAgICAgICByZXR1cm4gdGhpcy5yaWdodC5jb3B5KG51bGwsIG51bGwsIHRoaXMuY29sb3IsIGUsIG51bGwpO1xuICAgIH1cbiAgICByb3RhdGVSaWdodCgpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuY29weShudWxsLCBudWxsLCBMTFJCTm9kZS5SRUQsIHRoaXMubGVmdC5yaWdodCwgbnVsbCk7XG4gICAgICAgIHJldHVybiB0aGlzLmxlZnQuY29weShudWxsLCBudWxsLCB0aGlzLmNvbG9yLCBudWxsLCBlKTtcbiAgICB9XG4gICAgY29sb3JGbGlwKCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5sZWZ0LmNvcHkobnVsbCwgbnVsbCwgIXRoaXMubGVmdC5jb2xvciwgbnVsbCwgbnVsbCksIHQgPSB0aGlzLnJpZ2h0LmNvcHkobnVsbCwgbnVsbCwgIXRoaXMucmlnaHQuY29sb3IsIG51bGwsIG51bGwpO1xuICAgICAgICByZXR1cm4gdGhpcy5jb3B5KG51bGwsIG51bGwsICF0aGlzLmNvbG9yLCBlLCB0KTtcbiAgICB9XG4gICAgLy8gRm9yIHRlc3RpbmcuXG4gICAgY2hlY2tNYXhEZXB0aCgpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuY2hlY2soKTtcbiAgICAgICAgcmV0dXJuIE1hdGgucG93KDIsIGUpIDw9IHRoaXMuc2l6ZSArIDE7XG4gICAgfVxuICAgIC8vIEluIGEgYmFsYW5jZWQgUkIgdHJlZSwgdGhlIGJsYWNrLWRlcHRoIChudW1iZXIgb2YgYmxhY2sgbm9kZXMpIGZyb20gcm9vdCB0b1xuICAgIC8vIGxlYXZlcyBpcyBlcXVhbCBvbiBib3RoIHNpZGVzLiAgVGhpcyBmdW5jdGlvbiB2ZXJpZmllcyB0aGF0IG9yIGFzc2VydHMuXG4gICAgY2hlY2soKSB7XG4gICAgICAgIGlmICh0aGlzLmlzUmVkKCkgJiYgdGhpcy5sZWZ0LmlzUmVkKCkpIHRocm93IGZhaWwoKTtcbiAgICAgICAgaWYgKHRoaXMucmlnaHQuaXNSZWQoKSkgdGhyb3cgZmFpbCgpO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5sZWZ0LmNoZWNrKCk7XG4gICAgICAgIGlmIChlICE9PSB0aGlzLnJpZ2h0LmNoZWNrKCkpIHRocm93IGZhaWwoKTtcbiAgICAgICAgcmV0dXJuIGUgKyAodGhpcy5pc1JlZCgpID8gMCA6IDEpO1xuICAgIH1cbn1cblxuIC8vIGVuZCBMTFJCTm9kZVxuLy8gRW1wdHkgbm9kZSBpcyBzaGFyZWQgYmV0d2VlbiBhbGwgTExSQiB0cmVlcy5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5MTFJCTm9kZS5FTVBUWSA9IG51bGwsIExMUkJOb2RlLlJFRCA9ICEwLCBMTFJCTm9kZS5CTEFDSyA9ICExO1xuXG4vLyBlbmQgTExSQkVtcHR5Tm9kZVxuTExSQk5vZGUuRU1QVFkgPSBuZXcgXG4vLyBSZXByZXNlbnRzIGFuIGVtcHR5IG5vZGUgKGEgbGVhZiBub2RlIGluIHRoZSBSZWQtQmxhY2sgVHJlZSkuXG5jbGFzcyBMTFJCRW1wdHlOb2RlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zaXplID0gMDtcbiAgICB9XG4gICAgZ2V0IGtleSgpIHtcbiAgICAgICAgdGhyb3cgZmFpbCgpO1xuICAgIH1cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIHRocm93IGZhaWwoKTtcbiAgICB9XG4gICAgZ2V0IGNvbG9yKCkge1xuICAgICAgICB0aHJvdyBmYWlsKCk7XG4gICAgfVxuICAgIGdldCBsZWZ0KCkge1xuICAgICAgICB0aHJvdyBmYWlsKCk7XG4gICAgfVxuICAgIGdldCByaWdodCgpIHtcbiAgICAgICAgdGhyb3cgZmFpbCgpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgY3VycmVudCBub2RlLlxuICAgIGNvcHkoZSwgdCwgbiwgciwgaSkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIHRyZWUsIHdpdGggdGhlIHNwZWNpZmllZCBrZXkvdmFsdWUgYWRkZWQuXG4gICAgaW5zZXJ0KGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBMTFJCTm9kZShlLCB0KTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIHRyZWUsIHdpdGggdGhlIHNwZWNpZmllZCBrZXkgcmVtb3ZlZC5cbiAgICByZW1vdmUoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICBpbm9yZGVyVHJhdmVyc2FsKGUpIHtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICByZXZlcnNlVHJhdmVyc2FsKGUpIHtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICBtaW5LZXkoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBtYXhLZXkoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpc1JlZCgpIHtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICAvLyBGb3IgdGVzdGluZy5cbiAgICBjaGVja01heERlcHRoKCkge1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIGNoZWNrKCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBTb3J0ZWRTZXQgaXMgYW4gaW1tdXRhYmxlIChjb3B5LW9uLXdyaXRlKSBjb2xsZWN0aW9uIHRoYXQgaG9sZHMgZWxlbWVudHNcbiAqIGluIG9yZGVyIHNwZWNpZmllZCBieSB0aGUgcHJvdmlkZWQgY29tcGFyYXRvci5cbiAqXG4gKiBOT1RFOiBpZiBwcm92aWRlZCBjb21wYXJhdG9yIHJldHVybnMgMCBmb3IgdHdvIGVsZW1lbnRzLCB3ZSBjb25zaWRlciB0aGVtIHRvXG4gKiBiZSBlcXVhbCFcbiAqL1xuY2xhc3MgU29ydGVkU2V0IHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuY29tcGFyYXRvciA9IGUsIHRoaXMuZGF0YSA9IG5ldyBTb3J0ZWRNYXAodGhpcy5jb21wYXJhdG9yKTtcbiAgICB9XG4gICAgaGFzKGUpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHRoaXMuZGF0YS5nZXQoZSk7XG4gICAgfVxuICAgIGZpcnN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLm1pbktleSgpO1xuICAgIH1cbiAgICBsYXN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLm1heEtleSgpO1xuICAgIH1cbiAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5zaXplO1xuICAgIH1cbiAgICBpbmRleE9mKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5pbmRleE9mKGUpO1xuICAgIH1cbiAgICAvKiogSXRlcmF0ZXMgZWxlbWVudHMgaW4gb3JkZXIgZGVmaW5lZCBieSBcImNvbXBhcmF0b3JcIiAqLyAgICBmb3JFYWNoKGUpIHtcbiAgICAgICAgdGhpcy5kYXRhLmlub3JkZXJUcmF2ZXJzYWwoKCh0LCBuKSA9PiAoZSh0KSwgITEpKSk7XG4gICAgfVxuICAgIC8qKiBJdGVyYXRlcyBvdmVyIGBlbGVtYHMgc3VjaCB0aGF0OiByYW5nZVswXSAmbHQ7PSBlbGVtICZsdDsgcmFuZ2VbMV0uICovICAgIGZvckVhY2hJblJhbmdlKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuZGF0YS5nZXRJdGVyYXRvckZyb20oZVswXSk7XG4gICAgICAgIGZvciAoO24uaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBuLmdldE5leHQoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbXBhcmF0b3Ioci5rZXksIGVbMV0pID49IDApIHJldHVybjtcbiAgICAgICAgICAgIHQoci5rZXkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEl0ZXJhdGVzIG92ZXIgYGVsZW1gcyBzdWNoIHRoYXQ6IHN0YXJ0ICZsdDs9IGVsZW0gdW50aWwgZmFsc2UgaXMgcmV0dXJuZWQuXG4gICAgICovICAgIGZvckVhY2hXaGlsZShlLCB0KSB7XG4gICAgICAgIGxldCBuO1xuICAgICAgICBmb3IgKG4gPSB2b2lkIDAgIT09IHQgPyB0aGlzLmRhdGEuZ2V0SXRlcmF0b3JGcm9tKHQpIDogdGhpcy5kYXRhLmdldEl0ZXJhdG9yKCk7IG4uaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGlmICghZShuLmdldE5leHQoKS5rZXkpKSByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEZpbmRzIHRoZSBsZWFzdCBlbGVtZW50IGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byBgZWxlbWAuICovICAgIGZpcnN0QWZ0ZXJPckVxdWFsKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuZGF0YS5nZXRJdGVyYXRvckZyb20oZSk7XG4gICAgICAgIHJldHVybiB0Lmhhc05leHQoKSA/IHQuZ2V0TmV4dCgpLmtleSA6IG51bGw7XG4gICAgfVxuICAgIGdldEl0ZXJhdG9yKCkge1xuICAgICAgICByZXR1cm4gbmV3IFNvcnRlZFNldEl0ZXJhdG9yKHRoaXMuZGF0YS5nZXRJdGVyYXRvcigpKTtcbiAgICB9XG4gICAgZ2V0SXRlcmF0b3JGcm9tKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTb3J0ZWRTZXRJdGVyYXRvcih0aGlzLmRhdGEuZ2V0SXRlcmF0b3JGcm9tKGUpKTtcbiAgICB9XG4gICAgLyoqIEluc2VydHMgb3IgdXBkYXRlcyBhbiBlbGVtZW50ICovICAgIGFkZChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvcHkodGhpcy5kYXRhLnJlbW92ZShlKS5pbnNlcnQoZSwgITApKTtcbiAgICB9XG4gICAgLyoqIERlbGV0ZXMgYW4gZWxlbWVudCAqLyAgICBkZWxldGUoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5oYXMoZSkgPyB0aGlzLmNvcHkodGhpcy5kYXRhLnJlbW92ZShlKSkgOiB0aGlzO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmlzRW1wdHkoKTtcbiAgICB9XG4gICAgdW5pb25XaXRoKGUpIHtcbiAgICAgICAgbGV0IHQgPSB0aGlzO1xuICAgICAgICAvLyBNYWtlIHN1cmUgYHJlc3VsdGAgYWx3YXlzIHJlZmVycyB0byB0aGUgbGFyZ2VyIG9uZSBvZiB0aGUgdHdvIHNldHMuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHQuc2l6ZSA8IGUuc2l6ZSAmJiAodCA9IGUsIGUgPSB0aGlzKSwgZS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHQgPSB0LmFkZChlKTtcbiAgICAgICAgfSkpLCB0O1xuICAgIH1cbiAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgaWYgKCEoZSBpbnN0YW5jZW9mIFNvcnRlZFNldCkpIHJldHVybiAhMTtcbiAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gZS5zaXplKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmRhdGEuZ2V0SXRlcmF0b3IoKSwgbiA9IGUuZGF0YS5nZXRJdGVyYXRvcigpO1xuICAgICAgICBmb3IgKDt0Lmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdC5nZXROZXh0KCkua2V5LCByID0gbi5nZXROZXh0KCkua2V5O1xuICAgICAgICAgICAgaWYgKDAgIT09IHRoaXMuY29tcGFyYXRvcihlLCByKSkgcmV0dXJuICExO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgdG9BcnJheSgpIHtcbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGUucHVzaCh0KTtcbiAgICAgICAgfSkpLCBlO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKCh0ID0+IGUucHVzaCh0KSkpLCBcIlNvcnRlZFNldChcIiArIGUudG9TdHJpbmcoKSArIFwiKVwiO1xuICAgIH1cbiAgICBjb3B5KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IG5ldyBTb3J0ZWRTZXQodGhpcy5jb21wYXJhdG9yKTtcbiAgICAgICAgcmV0dXJuIHQuZGF0YSA9IGUsIHQ7XG4gICAgfVxufVxuXG5jbGFzcyBTb3J0ZWRTZXRJdGVyYXRvciB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLml0ZXIgPSBlO1xuICAgIH1cbiAgICBnZXROZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVyLmdldE5leHQoKS5rZXk7XG4gICAgfVxuICAgIGhhc05leHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLml0ZXIuaGFzTmV4dCgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDb21wYXJlcyB0d28gc29ydGVkIHNldHMgZm9yIGVxdWFsaXR5IHVzaW5nIHRoZWlyIG5hdHVyYWwgb3JkZXJpbmcuIFRoZVxuICogbWV0aG9kIGNvbXB1dGVzIHRoZSBpbnRlcnNlY3Rpb24gYW5kIGludm9rZXMgYG9uQWRkYCBmb3IgZXZlcnkgZWxlbWVudCB0aGF0XG4gKiBpcyBpbiBgYWZ0ZXJgIGJ1dCBub3QgYGJlZm9yZWAuIGBvblJlbW92ZWAgaXMgaW52b2tlZCBmb3IgZXZlcnkgZWxlbWVudCBpblxuICogYGJlZm9yZWAgYnV0IG1pc3NpbmcgZnJvbSBgYWZ0ZXJgLlxuICpcbiAqIFRoZSBtZXRob2QgY3JlYXRlcyBhIGNvcHkgb2YgYm90aCBgYmVmb3JlYCBhbmQgYGFmdGVyYCBhbmQgcnVucyBpbiBPKG4gbG9nXG4gKiBuKSwgd2hlcmUgbiBpcyB0aGUgc2l6ZSBvZiB0aGUgdHdvIGxpc3RzLlxuICpcbiAqIEBwYXJhbSBiZWZvcmUgLSBUaGUgZWxlbWVudHMgdGhhdCBleGlzdCBpbiB0aGUgb3JpZ2luYWwgc2V0LlxuICogQHBhcmFtIGFmdGVyIC0gVGhlIGVsZW1lbnRzIHRvIGRpZmYgYWdhaW5zdCB0aGUgb3JpZ2luYWwgc2V0LlxuICogQHBhcmFtIGNvbXBhcmF0b3IgLSBUaGUgY29tcGFyYXRvciBmb3IgdGhlIGVsZW1lbnRzIGluIGJlZm9yZSBhbmQgYWZ0ZXIuXG4gKiBAcGFyYW0gb25BZGQgLSBBIGZ1bmN0aW9uIHRvIGludm9rZSBmb3IgZXZlcnkgZWxlbWVudCB0aGF0IGlzIHBhcnQgb2YgYFxuICogYWZ0ZXJgIGJ1dCBub3QgYGJlZm9yZWAuXG4gKiBAcGFyYW0gb25SZW1vdmUgLSBBIGZ1bmN0aW9uIHRvIGludm9rZSBmb3IgZXZlcnkgZWxlbWVudCB0aGF0IGlzIHBhcnQgb2ZcbiAqIGBiZWZvcmVgIGJ1dCBub3QgYGFmdGVyYC5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBuZXh0IGVsZW1lbnQgZnJvbSB0aGUgaXRlcmF0b3Igb3IgYHVuZGVmaW5lZGAgaWYgbm9uZSBhdmFpbGFibGUuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9hZHZhbmNlSXRlcmF0b3IoZSkge1xuICAgIHJldHVybiBlLmhhc05leHQoKSA/IGUuZ2V0TmV4dCgpIDogdm9pZCAwO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBQcm92aWRlcyBhIHNldCBvZiBmaWVsZHMgdGhhdCBjYW4gYmUgdXNlZCB0byBwYXJ0aWFsbHkgcGF0Y2ggYSBkb2N1bWVudC5cbiAqIEZpZWxkTWFzayBpcyB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggT2JqZWN0VmFsdWUuXG4gKiBFeGFtcGxlczpcbiAqICAgZm9vIC0gT3ZlcndyaXRlcyBmb28gZW50aXJlbHkgd2l0aCB0aGUgcHJvdmlkZWQgdmFsdWUuIElmIGZvbyBpcyBub3RcbiAqICAgICAgICAgcHJlc2VudCBpbiB0aGUgY29tcGFuaW9uIE9iamVjdFZhbHVlLCB0aGUgZmllbGQgaXMgZGVsZXRlZC5cbiAqICAgZm9vLmJhciAtIE92ZXJ3cml0ZXMgb25seSB0aGUgZmllbGQgYmFyIG9mIHRoZSBvYmplY3QgZm9vLlxuICogICAgICAgICAgICAgSWYgZm9vIGlzIG5vdCBhbiBvYmplY3QsIGZvbyBpcyByZXBsYWNlZCB3aXRoIGFuIG9iamVjdFxuICogICAgICAgICAgICAgY29udGFpbmluZyBmb29cbiAqLyBjbGFzcyBGaWVsZE1hc2sge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5maWVsZHMgPSBlLCBcbiAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiB2YWxpZGF0aW9uIG9mIEZpZWxkTWFza1xuICAgICAgICAvLyBTb3J0IHRoZSBmaWVsZCBtYXNrIHRvIHN1cHBvcnQgYEZpZWxkTWFzay5pc0VxdWFsKClgIGFuZCBhc3NlcnQgYmVsb3cuXG4gICAgICAgIGUuc29ydChGaWVsZFBhdGgkMS5jb21wYXJhdG9yKTtcbiAgICB9XG4gICAgc3RhdGljIGVtcHR5KCkge1xuICAgICAgICByZXR1cm4gbmV3IEZpZWxkTWFzayhbXSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgRmllbGRNYXNrIG9iamVjdCB0aGF0IGlzIHRoZSByZXN1bHQgb2YgYWRkaW5nIGFsbCB0aGUgZ2l2ZW5cbiAgICAgKiBmaWVsZHMgcGF0aHMgdG8gdGhpcyBmaWVsZCBtYXNrLlxuICAgICAqLyAgICB1bmlvbldpdGgoZSkge1xuICAgICAgICBsZXQgdCA9IG5ldyBTb3J0ZWRTZXQoRmllbGRQYXRoJDEuY29tcGFyYXRvcik7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLmZpZWxkcykgdCA9IHQuYWRkKGUpO1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgZSkgdCA9IHQuYWRkKG4pO1xuICAgICAgICByZXR1cm4gbmV3IEZpZWxkTWFzayh0LnRvQXJyYXkoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZlcmlmaWVzIHRoYXQgYGZpZWxkUGF0aGAgaXMgaW5jbHVkZWQgYnkgYXQgbGVhc3Qgb25lIGZpZWxkIGluIHRoaXMgZmllbGRcbiAgICAgKiBtYXNrLlxuICAgICAqXG4gICAgICogVGhpcyBpcyBhbiBPKG4pIG9wZXJhdGlvbiwgd2hlcmUgYG5gIGlzIHRoZSBzaXplIG9mIHRoZSBmaWVsZCBtYXNrLlxuICAgICAqLyAgICBjb3ZlcnMoZSkge1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgdGhpcy5maWVsZHMpIGlmICh0LmlzUHJlZml4T2YoZSkpIHJldHVybiAhMDtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9hcnJheUVxdWFscyh0aGlzLmZpZWxkcywgZS5maWVsZHMsICgoZSwgdCkgPT4gZS5pc0VxdWFsKHQpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBlcnJvciBlbmNvdW50ZXJlZCB3aGlsZSBkZWNvZGluZyBiYXNlNjQgc3RyaW5nLlxuICovIGNsYXNzIF9fUFJJVkFURV9CYXNlNjREZWNvZGVFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKSwgdGhpcy5uYW1lID0gXCJCYXNlNjREZWNvZGVFcnJvclwiO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBDb252ZXJ0cyBhIEJhc2U2NCBlbmNvZGVkIHN0cmluZyB0byBhIGJpbmFyeSBzdHJpbmcuICovXG4vKiogVHJ1ZSBpZiBhbmQgb25seSBpZiB0aGUgQmFzZTY0IGNvbnZlcnNpb24gZnVuY3Rpb25zIGFyZSBhdmFpbGFibGUuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfaXNCYXNlNjRBdmFpbGFibGUoKSB7XG4gICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIGF0b2I7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEltbXV0YWJsZSBjbGFzcyB0aGF0IHJlcHJlc2VudHMgYSBcInByb3RvXCIgYnl0ZSBzdHJpbmcuXG4gKlxuICogUHJvdG8gYnl0ZSBzdHJpbmdzIGNhbiBlaXRoZXIgYmUgQmFzZTY0LWVuY29kZWQgc3RyaW5ncyBvciBVaW50OEFycmF5cyB3aGVuXG4gKiBzZW50IG9uIHRoZSB3aXJlLiBUaGlzIGNsYXNzIGFic3RyYWN0cyBhd2F5IHRoaXMgZGlmZmVyZW50aWF0aW9uIGJ5IGhvbGRpbmdcbiAqIHRoZSBwcm90byBieXRlIHN0cmluZyBpbiBhIGNvbW1vbiBjbGFzcyB0aGF0IG11c3QgYmUgY29udmVydGVkIGludG8gYSBzdHJpbmdcbiAqIGJlZm9yZSBiZWluZyBzZW50IGFzIGEgcHJvdG8uXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyBCeXRlU3RyaW5nIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuYmluYXJ5U3RyaW5nID0gZTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21CYXNlNjRTdHJpbmcoZSkge1xuICAgICAgICBjb25zdCB0ID0gZnVuY3Rpb24gX19QUklWQVRFX2RlY29kZUJhc2U2NChlKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhdG9iKGUpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIC8vIENoZWNrIHRoYXQgYERPTUV4Y2VwdGlvbmAgaXMgZGVmaW5lZCBiZWZvcmUgdXNpbmcgaXQgdG8gYXZvaWRcbiAgICAgICAgICAgICAgICAvLyBcIlJlZmVyZW5jZUVycm9yOiBQcm9wZXJ0eSAnRE9NRXhjZXB0aW9uJyBkb2Vzbid0IGV4aXN0XCIgaW4gcmVhY3QtbmF0aXZlLlxuICAgICAgICAgICAgICAgIC8vIChodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtanMtc2RrL2lzc3Vlcy83MTE1KVxuICAgICAgICAgICAgICAgIHRocm93IFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIERPTUV4Y2VwdGlvbiAmJiBlIGluc3RhbmNlb2YgRE9NRXhjZXB0aW9uID8gbmV3IF9fUFJJVkFURV9CYXNlNjREZWNvZGVFcnJvcihcIkludmFsaWQgYmFzZTY0IHN0cmluZzogXCIgKyBlKSA6IGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyoqIENvbnZlcnRzIGEgYmluYXJ5IHN0cmluZyB0byBhIEJhc2U2NCBlbmNvZGVkIHN0cmluZy4gKi8gKGUpO1xuICAgICAgICByZXR1cm4gbmV3IEJ5dGVTdHJpbmcodCk7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tVWludDhBcnJheShlKSB7XG4gICAgICAgIC8vIFRPRE8oaW5kZXhpbmcpOyBSZW1vdmUgdGhlIGNvcHkgb2YgdGhlIGJ5dGUgc3RyaW5nIGhlcmUgYXMgdGhpcyBtZXRob2RcbiAgICAgICAgLy8gaXMgZnJlcXVlbnRseSBjYWxsZWQgZHVyaW5nIGluZGV4aW5nLlxuICAgICAgICBjb25zdCB0ID0gXG4gICAgICAgIC8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRvIGNvbnZlcnQgYW4gVWludDhhcnJheSB0byBhIGJpbmFyeSBzdHJpbmcuXG4gKi9cbiAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX2JpbmFyeVN0cmluZ0Zyb21VaW50OEFycmF5KGUpIHtcbiAgICAgICAgICAgIGxldCB0ID0gXCJcIjtcbiAgICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgZS5sZW5ndGg7ICsrbikgdCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGVbbl0pO1xuICAgICAgICAgICAgcmV0dXJuIHQ7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gY29udmVydCBhIGJpbmFyeSBzdHJpbmcgdG8gYW4gVWludDhBcnJheS5cbiAqLyAoZSk7XG4gICAgICAgIHJldHVybiBuZXcgQnl0ZVN0cmluZyh0KTtcbiAgICB9XG4gICAgW1N5bWJvbC5pdGVyYXRvcl0oKSB7XG4gICAgICAgIGxldCBlID0gMDtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5leHQ6ICgpID0+IGUgPCB0aGlzLmJpbmFyeVN0cmluZy5sZW5ndGggPyB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuYmluYXJ5U3RyaW5nLmNoYXJDb2RlQXQoZSsrKSxcbiAgICAgICAgICAgICAgICBkb25lOiAhMVxuICAgICAgICAgICAgfSA6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogdm9pZCAwLFxuICAgICAgICAgICAgICAgIGRvbmU6ICEwXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIHRvQmFzZTY0KCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2VuY29kZUJhc2U2NChlKSB7XG4gICAgICAgICAgICByZXR1cm4gYnRvYShlKTtcbiAgICAgICAgfSh0aGlzLmJpbmFyeVN0cmluZyk7XG4gICAgfVxuICAgIHRvVWludDhBcnJheSgpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV91aW50OEFycmF5RnJvbUJpbmFyeVN0cmluZyhlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gbmV3IFVpbnQ4QXJyYXkoZS5sZW5ndGgpO1xuICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBlLmxlbmd0aDsgbisrKSB0W25dID0gZS5jaGFyQ29kZUF0KG4pO1xuICAgICAgICAgICAgcmV0dXJuIHQ7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbiAgICAgICAgLy8gQSBSZWdFeHAgbWF0Y2hpbmcgSVNPIDg2MDEgVVRDIHRpbWVzdGFtcHMgd2l0aCBvcHRpb25hbCBmcmFjdGlvbi5cbiAgICAgICAgKHRoaXMuYmluYXJ5U3RyaW5nKTtcbiAgICB9XG4gICAgYXBwcm94aW1hdGVCeXRlU2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIDIgKiB0aGlzLmJpbmFyeVN0cmluZy5sZW5ndGg7XG4gICAgfVxuICAgIGNvbXBhcmVUbyhlKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcih0aGlzLmJpbmFyeVN0cmluZywgZS5iaW5hcnlTdHJpbmcpO1xuICAgIH1cbiAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJ5U3RyaW5nID09PSBlLmJpbmFyeVN0cmluZztcbiAgICB9XG59XG5cbkJ5dGVTdHJpbmcuRU1QVFlfQllURV9TVFJJTkcgPSBuZXcgQnl0ZVN0cmluZyhcIlwiKTtcblxuY29uc3QgbmUgPSBuZXcgUmVnRXhwKC9eXFxkezR9LVxcZFxcZC1cXGRcXGRUXFxkXFxkOlxcZFxcZDpcXGRcXGQoPzpcXC4oXFxkKykpP1okLyk7XG5cbi8qKlxuICogQ29udmVydHMgdGhlIHBvc3NpYmxlIFByb3RvIHZhbHVlcyBmb3IgYSB0aW1lc3RhbXAgdmFsdWUgaW50byBhIFwic2Vjb25kcyBhbmRcbiAqIG5hbm9zXCIgcmVwcmVzZW50YXRpb24uXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX25vcm1hbGl6ZVRpbWVzdGFtcChlKSB7XG4gICAgLy8gVGhlIGpzb24gaW50ZXJmYWNlIChmb3IgdGhlIGJyb3dzZXIpIHdpbGwgcmV0dXJuIGFuIGlzbyB0aW1lc3RhbXAgc3RyaW5nLFxuICAgIC8vIHdoaWxlIHRoZSBwcm90byBqcyBsaWJyYXJ5IChmb3Igbm9kZSkgd2lsbCByZXR1cm4gYVxuICAgIC8vIGdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAgaW5zdGFuY2UuXG4gICAgaWYgKF9fUFJJVkFURV9oYXJkQXNzZXJ0KCEhZSksIFwic3RyaW5nXCIgPT0gdHlwZW9mIGUpIHtcbiAgICAgICAgLy8gVGhlIGRhdGUgc3RyaW5nIGNhbiBoYXZlIGhpZ2hlciBwcmVjaXNpb24gKG5hbm9zKSB0aGFuIHRoZSBEYXRlIGNsYXNzXG4gICAgICAgIC8vIChtaWxsaXMpLCBzbyB3ZSBkbyBzb21lIGN1c3RvbSBwYXJzaW5nIGhlcmUuXG4gICAgICAgIC8vIFBhcnNlIHRoZSBuYW5vcyByaWdodCBvdXQgb2YgdGhlIHN0cmluZy5cbiAgICAgICAgbGV0IHQgPSAwO1xuICAgICAgICBjb25zdCBuID0gbmUuZXhlYyhlKTtcbiAgICAgICAgaWYgKF9fUFJJVkFURV9oYXJkQXNzZXJ0KCEhbiksIG5bMV0pIHtcbiAgICAgICAgICAgIC8vIFBhZCB0aGUgZnJhY3Rpb24gb3V0IHRvIDkgZGlnaXRzIChuYW5vcykuXG4gICAgICAgICAgICBsZXQgZSA9IG5bMV07XG4gICAgICAgICAgICBlID0gKGUgKyBcIjAwMDAwMDAwMFwiKS5zdWJzdHIoMCwgOSksIHQgPSBOdW1iZXIoZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUGFyc2UgdGhlIGRhdGUgdG8gZ2V0IHRoZSBzZWNvbmRzLlxuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgRGF0ZShlKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNlY29uZHM6IE1hdGguZmxvb3Ioci5nZXRUaW1lKCkgLyAxZTMpLFxuICAgICAgICAgICAgbmFub3M6IHRcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2Vjb25kczogX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcihlLnNlY29uZHMpLFxuICAgICAgICBuYW5vczogX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcihlLm5hbm9zKVxuICAgIH07XG59XG5cbi8qKlxuICogQ29udmVydHMgdGhlIHBvc3NpYmxlIFByb3RvIHR5cGVzIGZvciBudW1iZXJzIGludG8gYSBKYXZhU2NyaXB0IG51bWJlci5cbiAqIFJldHVybnMgMCBpZiB0aGUgdmFsdWUgaXMgbm90IG51bWVyaWMuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcihlKSB7XG4gICAgLy8gVE9ETyhiam9ybmljayk6IEhhbmRsZSBpbnQ2NCBncmVhdGVyIHRoYW4gNTMgYml0cy5cbiAgICByZXR1cm4gXCJudW1iZXJcIiA9PSB0eXBlb2YgZSA/IGUgOiBcInN0cmluZ1wiID09IHR5cGVvZiBlID8gTnVtYmVyKGUpIDogMDtcbn1cblxuLyoqIENvbnZlcnRzIHRoZSBwb3NzaWJsZSBQcm90byB0eXBlcyBmb3IgQmxvYnMgaW50byBhIEJ5dGVTdHJpbmcuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9ub3JtYWxpemVCeXRlU3RyaW5nKGUpIHtcbiAgICByZXR1cm4gXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSA/IEJ5dGVTdHJpbmcuZnJvbUJhc2U2NFN0cmluZyhlKSA6IEJ5dGVTdHJpbmcuZnJvbVVpbnQ4QXJyYXkoZSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYSBsb2NhbGx5LWFwcGxpZWQgU2VydmVyVGltZXN0YW1wLlxuICpcbiAqIFNlcnZlciBUaW1lc3RhbXBzIGFyZSBiYWNrZWQgYnkgTWFwVmFsdWVzIHRoYXQgY29udGFpbiBhbiBpbnRlcm5hbCBmaWVsZFxuICogYF9fdHlwZV9fYCB3aXRoIGEgdmFsdWUgb2YgYHNlcnZlcl90aW1lc3RhbXBgLiBUaGUgcHJldmlvdXMgdmFsdWUgYW5kIGxvY2FsXG4gKiB3cml0ZSB0aW1lIGFyZSBzdG9yZWQgaW4gaXRzIGBfX3ByZXZpb3VzX3ZhbHVlX19gIGFuZCBgX19sb2NhbF93cml0ZV90aW1lX19gXG4gKiBmaWVsZHMgcmVzcGVjdGl2ZWx5LlxuICpcbiAqIE5vdGVzOlxuICogLSBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZSBpbnN0YW5jZXMgYXJlIGNyZWF0ZWQgYXMgdGhlIHJlc3VsdCBvZiBhcHBseWluZyBhXG4gKiAgIHRyYW5zZm9ybS4gVGhleSBjYW4gb25seSBleGlzdCBpbiB0aGUgbG9jYWwgdmlldyBvZiBhIGRvY3VtZW50LiBUaGVyZWZvcmVcbiAqICAgdGhleSBkbyBub3QgbmVlZCB0byBiZSBwYXJzZWQgb3Igc2VyaWFsaXplZC5cbiAqIC0gV2hlbiBldmFsdWF0ZWQgbG9jYWxseSAoZS5nLiBmb3Igc25hcHNob3QuZGF0YSgpKSwgdGhleSBieSBkZWZhdWx0XG4gKiAgIGV2YWx1YXRlIHRvIGBudWxsYC4gVGhpcyBiZWhhdmlvciBjYW4gYmUgY29uZmlndXJlZCBieSBwYXNzaW5nIGN1c3RvbVxuICogICBGaWVsZFZhbHVlT3B0aW9ucyB0byB2YWx1ZSgpLlxuICogLSBXaXRoIHJlc3BlY3QgdG8gb3RoZXIgU2VydmVyVGltZXN0YW1wVmFsdWVzLCB0aGV5IHNvcnQgYnkgdGhlaXJcbiAqICAgbG9jYWxXcml0ZVRpbWUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2lzU2VydmVyVGltZXN0YW1wKGUpIHtcbiAgICB2YXIgdCwgbjtcbiAgICByZXR1cm4gXCJzZXJ2ZXJfdGltZXN0YW1wXCIgPT09IChudWxsID09PSAobiA9ICgobnVsbCA9PT0gKHQgPSBudWxsID09IGUgPyB2b2lkIDAgOiBlLm1hcFZhbHVlKSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0LmZpZWxkcykgfHwge30pLl9fdHlwZV9fKSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLnN0cmluZ1ZhbHVlKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IFNlcnZlclRpbWVzdGFtcCBwcm90byB2YWx1ZSAodXNpbmcgdGhlIGludGVybmFsIGZvcm1hdCkuXG4gKi9cbi8qKlxuICogUmV0dXJucyB0aGUgdmFsdWUgb2YgdGhlIGZpZWxkIGJlZm9yZSB0aGlzIFNlcnZlclRpbWVzdGFtcCB3YXMgc2V0LlxuICpcbiAqIFByZXNlcnZpbmcgdGhlIHByZXZpb3VzIHZhbHVlcyBhbGxvd3MgdGhlIHVzZXIgdG8gZGlzcGxheSB0aGUgbGFzdCByZXNvbGVkXG4gKiB2YWx1ZSB1bnRpbCB0aGUgYmFja2VuZCByZXNwb25kcyB3aXRoIHRoZSB0aW1lc3RhbXAuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9nZXRQcmV2aW91c1ZhbHVlKGUpIHtcbiAgICBjb25zdCB0ID0gZS5tYXBWYWx1ZS5maWVsZHMuX19wcmV2aW91c192YWx1ZV9fO1xuICAgIHJldHVybiBfX1BSSVZBVEVfaXNTZXJ2ZXJUaW1lc3RhbXAodCkgPyBfX1BSSVZBVEVfZ2V0UHJldmlvdXNWYWx1ZSh0KSA6IHQ7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgbG9jYWwgdGltZSBhdCB3aGljaCB0aGlzIHRpbWVzdGFtcCB3YXMgZmlyc3Qgc2V0LlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9nZXRMb2NhbFdyaXRlVGltZShlKSB7XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9ub3JtYWxpemVUaW1lc3RhbXAoZS5tYXBWYWx1ZS5maWVsZHMuX19sb2NhbF93cml0ZV90aW1lX18udGltZXN0YW1wVmFsdWUpO1xuICAgIHJldHVybiBuZXcgVGltZXN0YW1wKHQuc2Vjb25kcywgdC5uYW5vcyk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIERhdGFiYXNlSW5mbyB7XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhIERhdGFiYXNlSW5mbyB1c2luZyB0aGUgcHJvdmlkZWQgaG9zdCwgZGF0YWJhc2VJZCBhbmRcbiAgICAgKiBwZXJzaXN0ZW5jZUtleS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkYXRhYmFzZUlkIC0gVGhlIGRhdGFiYXNlIHRvIHVzZS5cbiAgICAgKiBAcGFyYW0gYXBwSWQgLSBUaGUgRmlyZWJhc2UgQXBwIElkLlxuICAgICAqIEBwYXJhbSBwZXJzaXN0ZW5jZUtleSAtIEEgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoaXMgRmlyZXN0b3JlJ3MgbG9jYWxcbiAgICAgKiBzdG9yYWdlICh1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggdGhlIGRhdGFiYXNlSWQpLlxuICAgICAqIEBwYXJhbSBob3N0IC0gVGhlIEZpcmVzdG9yZSBiYWNrZW5kIGhvc3QgdG8gY29ubmVjdCB0by5cbiAgICAgKiBAcGFyYW0gc3NsIC0gV2hldGhlciB0byB1c2UgU1NMIHdoZW4gY29ubmVjdGluZy5cbiAgICAgKiBAcGFyYW0gZm9yY2VMb25nUG9sbGluZyAtIFdoZXRoZXIgdG8gdXNlIHRoZSBmb3JjZUxvbmdQb2xsaW5nIG9wdGlvblxuICAgICAqIHdoZW4gdXNpbmcgV2ViQ2hhbm5lbCBhcyB0aGUgbmV0d29yayB0cmFuc3BvcnQuXG4gICAgICogQHBhcmFtIGF1dG9EZXRlY3RMb25nUG9sbGluZyAtIFdoZXRoZXIgdG8gdXNlIHRoZSBkZXRlY3RCdWZmZXJpbmdQcm94eVxuICAgICAqIG9wdGlvbiB3aGVuIHVzaW5nIFdlYkNoYW5uZWwgYXMgdGhlIG5ldHdvcmsgdHJhbnNwb3J0LlxuICAgICAqIEBwYXJhbSBsb25nUG9sbGluZ09wdGlvbnMgT3B0aW9ucyB0aGF0IGNvbmZpZ3VyZSBsb25nLXBvbGxpbmcuXG4gICAgICogQHBhcmFtIHVzZUZldGNoU3RyZWFtcyBXaGV0aGVyIHRvIHVzZSB0aGUgRmV0Y2ggQVBJIGluc3RlYWQgb2ZcbiAgICAgKiBYTUxIVFRQUmVxdWVzdFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIsIGksIHMsIG8sIF8sIGEpIHtcbiAgICAgICAgdGhpcy5kYXRhYmFzZUlkID0gZSwgdGhpcy5hcHBJZCA9IHQsIHRoaXMucGVyc2lzdGVuY2VLZXkgPSBuLCB0aGlzLmhvc3QgPSByLCB0aGlzLnNzbCA9IGksIFxuICAgICAgICB0aGlzLmZvcmNlTG9uZ1BvbGxpbmcgPSBzLCB0aGlzLmF1dG9EZXRlY3RMb25nUG9sbGluZyA9IG8sIHRoaXMubG9uZ1BvbGxpbmdPcHRpb25zID0gXywgXG4gICAgICAgIHRoaXMudXNlRmV0Y2hTdHJlYW1zID0gYTtcbiAgICB9XG59XG5cbi8qKiBUaGUgZGVmYXVsdCBkYXRhYmFzZSBuYW1lIGZvciBhIHByb2plY3QuICovXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIGRhdGFiYXNlIElEIGEgRmlyZXN0b3JlIGNsaWVudCBpcyBhc3NvY2lhdGVkIHdpdGguXG4gKiBAaW50ZXJuYWxcbiAqL1xuY2xhc3MgRGF0YWJhc2VJZCB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLnByb2plY3RJZCA9IGUsIHRoaXMuZGF0YWJhc2UgPSB0IHx8IFwiKGRlZmF1bHQpXCI7XG4gICAgfVxuICAgIHN0YXRpYyBlbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRhYmFzZUlkKFwiXCIsIFwiXCIpO1xuICAgIH1cbiAgICBnZXQgaXNEZWZhdWx0RGF0YWJhc2UoKSB7XG4gICAgICAgIHJldHVybiBcIihkZWZhdWx0KVwiID09PSB0aGlzLmRhdGFiYXNlO1xuICAgIH1cbiAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBEYXRhYmFzZUlkICYmIGUucHJvamVjdElkID09PSB0aGlzLnByb2plY3RJZCAmJiBlLmRhdGFiYXNlID09PSB0aGlzLmRhdGFiYXNlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNvbnN0IHJlID0ge1xuICAgIG1hcFZhbHVlOiB7XG4gICAgICAgIGZpZWxkczoge1xuICAgICAgICAgICAgX190eXBlX186IHtcbiAgICAgICAgICAgICAgICBzdHJpbmdWYWx1ZTogXCJfX21heF9fXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0sIGllID0ge1xuICAgIG51bGxWYWx1ZTogXCJOVUxMX1ZBTFVFXCJcbn07XG5cbi8qKiBFeHRyYWN0cyB0aGUgYmFja2VuZCdzIHR5cGUgb3JkZXIgZm9yIHRoZSBwcm92aWRlZCB2YWx1ZS4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV90eXBlT3JkZXIoZSkge1xuICAgIHJldHVybiBcIm51bGxWYWx1ZVwiIGluIGUgPyAwIC8qIFR5cGVPcmRlci5OdWxsVmFsdWUgKi8gOiBcImJvb2xlYW5WYWx1ZVwiIGluIGUgPyAxIC8qIFR5cGVPcmRlci5Cb29sZWFuVmFsdWUgKi8gOiBcImludGVnZXJWYWx1ZVwiIGluIGUgfHwgXCJkb3VibGVWYWx1ZVwiIGluIGUgPyAyIC8qIFR5cGVPcmRlci5OdW1iZXJWYWx1ZSAqLyA6IFwidGltZXN0YW1wVmFsdWVcIiBpbiBlID8gMyAvKiBUeXBlT3JkZXIuVGltZXN0YW1wVmFsdWUgKi8gOiBcInN0cmluZ1ZhbHVlXCIgaW4gZSA/IDUgLyogVHlwZU9yZGVyLlN0cmluZ1ZhbHVlICovIDogXCJieXRlc1ZhbHVlXCIgaW4gZSA/IDYgLyogVHlwZU9yZGVyLkJsb2JWYWx1ZSAqLyA6IFwicmVmZXJlbmNlVmFsdWVcIiBpbiBlID8gNyAvKiBUeXBlT3JkZXIuUmVmVmFsdWUgKi8gOiBcImdlb1BvaW50VmFsdWVcIiBpbiBlID8gOCAvKiBUeXBlT3JkZXIuR2VvUG9pbnRWYWx1ZSAqLyA6IFwiYXJyYXlWYWx1ZVwiIGluIGUgPyA5IC8qIFR5cGVPcmRlci5BcnJheVZhbHVlICovIDogXCJtYXBWYWx1ZVwiIGluIGUgPyBfX1BSSVZBVEVfaXNTZXJ2ZXJUaW1lc3RhbXAoZSkgPyA0IC8qIFR5cGVPcmRlci5TZXJ2ZXJUaW1lc3RhbXBWYWx1ZSAqLyA6IF9fUFJJVkFURV9pc01heFZhbHVlKGUpID8gOTAwNzE5OTI1NDc0MDk5MSAvKiBUeXBlT3JkZXIuTWF4VmFsdWUgKi8gOiAxMCAvKiBUeXBlT3JkZXIuT2JqZWN0VmFsdWUgKi8gOiBmYWlsKCk7XG59XG5cbi8qKiBUZXN0cyBgbGVmdGAgYW5kIGByaWdodGAgZm9yIGVxdWFsaXR5IGJhc2VkIG9uIHRoZSBiYWNrZW5kIHNlbWFudGljcy4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3ZhbHVlRXF1YWxzKGUsIHQpIHtcbiAgICBpZiAoZSA9PT0gdCkgcmV0dXJuICEwO1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfdHlwZU9yZGVyKGUpO1xuICAgIGlmIChuICE9PSBfX1BSSVZBVEVfdHlwZU9yZGVyKHQpKSByZXR1cm4gITE7XG4gICAgc3dpdGNoIChuKSB7XG4gICAgICBjYXNlIDAgLyogVHlwZU9yZGVyLk51bGxWYWx1ZSAqLyA6XG4gICAgICBjYXNlIDkwMDcxOTkyNTQ3NDA5OTEgLyogVHlwZU9yZGVyLk1heFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuICEwO1xuXG4gICAgICBjYXNlIDEgLyogVHlwZU9yZGVyLkJvb2xlYW5WYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBlLmJvb2xlYW5WYWx1ZSA9PT0gdC5ib29sZWFuVmFsdWU7XG5cbiAgICAgIGNhc2UgNCAvKiBUeXBlT3JkZXIuU2VydmVyVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gX19QUklWQVRFX2dldExvY2FsV3JpdGVUaW1lKGUpLmlzRXF1YWwoX19QUklWQVRFX2dldExvY2FsV3JpdGVUaW1lKHQpKTtcblxuICAgICAgY2FzZSAzIC8qIFR5cGVPcmRlci5UaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfdGltZXN0YW1wRXF1YWxzKGUsIHQpIHtcbiAgICAgICAgICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiBlLnRpbWVzdGFtcFZhbHVlICYmIFwic3RyaW5nXCIgPT0gdHlwZW9mIHQudGltZXN0YW1wVmFsdWUgJiYgZS50aW1lc3RhbXBWYWx1ZS5sZW5ndGggPT09IHQudGltZXN0YW1wVmFsdWUubGVuZ3RoKSBcbiAgICAgICAgICAgIC8vIFVzZSBzdHJpbmcgZXF1YWxpdHkgZm9yIElTTyA4NjAxIHRpbWVzdGFtcHNcbiAgICAgICAgICAgIHJldHVybiBlLnRpbWVzdGFtcFZhbHVlID09PSB0LnRpbWVzdGFtcFZhbHVlO1xuICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9ub3JtYWxpemVUaW1lc3RhbXAoZS50aW1lc3RhbXBWYWx1ZSksIHIgPSBfX1BSSVZBVEVfbm9ybWFsaXplVGltZXN0YW1wKHQudGltZXN0YW1wVmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIG4uc2Vjb25kcyA9PT0gci5zZWNvbmRzICYmIG4ubmFub3MgPT09IHIubmFub3M7XG4gICAgICAgIH0oZSwgdCk7XG5cbiAgICAgIGNhc2UgNSAvKiBUeXBlT3JkZXIuU3RyaW5nVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZS5zdHJpbmdWYWx1ZSA9PT0gdC5zdHJpbmdWYWx1ZTtcblxuICAgICAgY2FzZSA2IC8qIFR5cGVPcmRlci5CbG9iVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2Jsb2JFcXVhbHMoZSwgdCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9ub3JtYWxpemVCeXRlU3RyaW5nKGUuYnl0ZXNWYWx1ZSkuaXNFcXVhbChfX1BSSVZBVEVfbm9ybWFsaXplQnl0ZVN0cmluZyh0LmJ5dGVzVmFsdWUpKTtcbiAgICAgICAgfShlLCB0KTtcblxuICAgICAgY2FzZSA3IC8qIFR5cGVPcmRlci5SZWZWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBlLnJlZmVyZW5jZVZhbHVlID09PSB0LnJlZmVyZW5jZVZhbHVlO1xuXG4gICAgICBjYXNlIDggLyogVHlwZU9yZGVyLkdlb1BvaW50VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2dlb1BvaW50RXF1YWxzKGUsIHQpIHtcbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKGUuZ2VvUG9pbnRWYWx1ZS5sYXRpdHVkZSkgPT09IF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIodC5nZW9Qb2ludFZhbHVlLmxhdGl0dWRlKSAmJiBfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKGUuZ2VvUG9pbnRWYWx1ZS5sb25naXR1ZGUpID09PSBfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKHQuZ2VvUG9pbnRWYWx1ZS5sb25naXR1ZGUpO1xuICAgICAgICB9KGUsIHQpO1xuXG4gICAgICBjYXNlIDIgLyogVHlwZU9yZGVyLk51bWJlclZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9udW1iZXJFcXVhbHMoZSwgdCkge1xuICAgICAgICAgICAgaWYgKFwiaW50ZWdlclZhbHVlXCIgaW4gZSAmJiBcImludGVnZXJWYWx1ZVwiIGluIHQpIHJldHVybiBfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKGUuaW50ZWdlclZhbHVlKSA9PT0gX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcih0LmludGVnZXJWYWx1ZSk7XG4gICAgICAgICAgICBpZiAoXCJkb3VibGVWYWx1ZVwiIGluIGUgJiYgXCJkb3VibGVWYWx1ZVwiIGluIHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcihlLmRvdWJsZVZhbHVlKSwgciA9IF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIodC5kb3VibGVWYWx1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4gPT09IHIgPyBfX1BSSVZBVEVfaXNOZWdhdGl2ZVplcm8obikgPT09IF9fUFJJVkFURV9pc05lZ2F0aXZlWmVybyhyKSA6IGlzTmFOKG4pICYmIGlzTmFOKHIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICExO1xuICAgICAgICB9KGUsIHQpO1xuXG4gICAgICBjYXNlIDkgLyogVHlwZU9yZGVyLkFycmF5VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gX19QUklWQVRFX2FycmF5RXF1YWxzKGUuYXJyYXlWYWx1ZS52YWx1ZXMgfHwgW10sIHQuYXJyYXlWYWx1ZS52YWx1ZXMgfHwgW10sIF9fUFJJVkFURV92YWx1ZUVxdWFscyk7XG5cbiAgICAgIGNhc2UgMTAgLyogVHlwZU9yZGVyLk9iamVjdFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9vYmplY3RFcXVhbHMoZSwgdCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IGUubWFwVmFsdWUuZmllbGRzIHx8IHt9LCByID0gdC5tYXBWYWx1ZS5maWVsZHMgfHwge307XG4gICAgICAgICAgICBpZiAoX19QUklWQVRFX29iamVjdFNpemUobikgIT09IF9fUFJJVkFURV9vYmplY3RTaXplKHIpKSByZXR1cm4gITE7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGUgaW4gbikgaWYgKG4uaGFzT3duUHJvcGVydHkoZSkgJiYgKHZvaWQgMCA9PT0gcltlXSB8fCAhX19QUklWQVRFX3ZhbHVlRXF1YWxzKG5bZV0sIHJbZV0pKSkgcmV0dXJuICExO1xuICAgICAgICAgICAgcmV0dXJuICEwO1xuICAgICAgICB9XG4gICAgICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIEFycmF5VmFsdWUgY29udGFpbnMgdGhlIHNwZWNpZmllZCBlbGVtZW50LiAqLyAoZSwgdCk7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBmYWlsKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfYXJyYXlWYWx1ZUNvbnRhaW5zKGUsIHQpIHtcbiAgICByZXR1cm4gdm9pZCAwICE9PSAoZS52YWx1ZXMgfHwgW10pLmZpbmQoKGUgPT4gX19QUklWQVRFX3ZhbHVlRXF1YWxzKGUsIHQpKSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV92YWx1ZUNvbXBhcmUoZSwgdCkge1xuICAgIGlmIChlID09PSB0KSByZXR1cm4gMDtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX3R5cGVPcmRlcihlKSwgciA9IF9fUFJJVkFURV90eXBlT3JkZXIodCk7XG4gICAgaWYgKG4gIT09IHIpIHJldHVybiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihuLCByKTtcbiAgICBzd2l0Y2ggKG4pIHtcbiAgICAgIGNhc2UgMCAvKiBUeXBlT3JkZXIuTnVsbFZhbHVlICovIDpcbiAgICAgIGNhc2UgOTAwNzE5OTI1NDc0MDk5MSAvKiBUeXBlT3JkZXIuTWF4VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gMDtcblxuICAgICAgY2FzZSAxIC8qIFR5cGVPcmRlci5Cb29sZWFuVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IoZS5ib29sZWFuVmFsdWUsIHQuYm9vbGVhblZhbHVlKTtcblxuICAgICAgY2FzZSAyIC8qIFR5cGVPcmRlci5OdW1iZXJWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfY29tcGFyZU51bWJlcnMoZSwgdCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIoZS5pbnRlZ2VyVmFsdWUgfHwgZS5kb3VibGVWYWx1ZSksIHIgPSBfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKHQuaW50ZWdlclZhbHVlIHx8IHQuZG91YmxlVmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIG4gPCByID8gLTEgOiBuID4gciA/IDEgOiBuID09PSByID8gMCA6IFxuICAgICAgICAgICAgLy8gb25lIG9yIGJvdGggYXJlIE5hTi5cbiAgICAgICAgICAgIGlzTmFOKG4pID8gaXNOYU4ocikgPyAwIDogLTEgOiAxO1xuICAgICAgICB9KGUsIHQpO1xuXG4gICAgICBjYXNlIDMgLyogVHlwZU9yZGVyLlRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9jb21wYXJlVGltZXN0YW1wcyhlLnRpbWVzdGFtcFZhbHVlLCB0LnRpbWVzdGFtcFZhbHVlKTtcblxuICAgICAgY2FzZSA0IC8qIFR5cGVPcmRlci5TZXJ2ZXJUaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfY29tcGFyZVRpbWVzdGFtcHMoX19QUklWQVRFX2dldExvY2FsV3JpdGVUaW1lKGUpLCBfX1BSSVZBVEVfZ2V0TG9jYWxXcml0ZVRpbWUodCkpO1xuXG4gICAgICBjYXNlIDUgLyogVHlwZU9yZGVyLlN0cmluZ1ZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKGUuc3RyaW5nVmFsdWUsIHQuc3RyaW5nVmFsdWUpO1xuXG4gICAgICBjYXNlIDYgLyogVHlwZU9yZGVyLkJsb2JWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfY29tcGFyZUJsb2JzKGUsIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfbm9ybWFsaXplQnl0ZVN0cmluZyhlKSwgciA9IF9fUFJJVkFURV9ub3JtYWxpemVCeXRlU3RyaW5nKHQpO1xuICAgICAgICAgICAgcmV0dXJuIG4uY29tcGFyZVRvKHIpO1xuICAgICAgICB9KGUuYnl0ZXNWYWx1ZSwgdC5ieXRlc1ZhbHVlKTtcblxuICAgICAgY2FzZSA3IC8qIFR5cGVPcmRlci5SZWZWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfY29tcGFyZVJlZmVyZW5jZXMoZSwgdCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IGUuc3BsaXQoXCIvXCIpLCByID0gdC5zcGxpdChcIi9cIik7XG4gICAgICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IG4ubGVuZ3RoICYmIGUgPCByLmxlbmd0aDsgZSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKG5bZV0sIHJbZV0pO1xuICAgICAgICAgICAgICAgIGlmICgwICE9PSB0KSByZXR1cm4gdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihuLmxlbmd0aCwgci5sZW5ndGgpO1xuICAgICAgICB9KGUucmVmZXJlbmNlVmFsdWUsIHQucmVmZXJlbmNlVmFsdWUpO1xuXG4gICAgICBjYXNlIDggLyogVHlwZU9yZGVyLkdlb1BvaW50VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2NvbXBhcmVHZW9Qb2ludHMoZSwgdCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIoZS5sYXRpdHVkZSksIF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIodC5sYXRpdHVkZSkpO1xuICAgICAgICAgICAgaWYgKDAgIT09IG4pIHJldHVybiBuO1xuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIoZS5sb25naXR1ZGUpLCBfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKHQubG9uZ2l0dWRlKSk7XG4gICAgICAgIH0oZS5nZW9Qb2ludFZhbHVlLCB0Lmdlb1BvaW50VmFsdWUpO1xuXG4gICAgICBjYXNlIDkgLyogVHlwZU9yZGVyLkFycmF5VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2NvbXBhcmVBcnJheXMoZSwgdCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IGUudmFsdWVzIHx8IFtdLCByID0gdC52YWx1ZXMgfHwgW107XG4gICAgICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IG4ubGVuZ3RoICYmIGUgPCByLmxlbmd0aDsgKytlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV92YWx1ZUNvbXBhcmUobltlXSwgcltlXSk7XG4gICAgICAgICAgICAgICAgaWYgKHQpIHJldHVybiB0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKG4ubGVuZ3RoLCByLmxlbmd0aCk7XG4gICAgICAgIH0oZS5hcnJheVZhbHVlLCB0LmFycmF5VmFsdWUpO1xuXG4gICAgICBjYXNlIDEwIC8qIFR5cGVPcmRlci5PYmplY3RWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfY29tcGFyZU1hcHMoZSwgdCkge1xuICAgICAgICAgICAgaWYgKGUgPT09IHJlLm1hcFZhbHVlICYmIHQgPT09IHJlLm1hcFZhbHVlKSByZXR1cm4gMDtcbiAgICAgICAgICAgIGlmIChlID09PSByZS5tYXBWYWx1ZSkgcmV0dXJuIDE7XG4gICAgICAgICAgICBpZiAodCA9PT0gcmUubWFwVmFsdWUpIHJldHVybiAtMTtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLmZpZWxkcyB8fCB7fSwgciA9IE9iamVjdC5rZXlzKG4pLCBpID0gdC5maWVsZHMgfHwge30sIHMgPSBPYmplY3Qua2V5cyhpKTtcbiAgICAgICAgICAgIC8vIEV2ZW4gdGhvdWdoIE1hcFZhbHVlcyBhcmUgbGlrZWx5IHNvcnRlZCBjb3JyZWN0bHkgYmFzZWQgb24gdGhlaXIgaW5zZXJ0aW9uXG4gICAgICAgICAgICAvLyBvcmRlciAoZS5nLiB3aGVuIHJlY2VpdmVkIGZyb20gdGhlIGJhY2tlbmQpLCBsb2NhbCBtb2RpZmljYXRpb25zIGNhbiBicmluZ1xuICAgICAgICAgICAgLy8gZWxlbWVudHMgb3V0IG9mIG9yZGVyLiBXZSBuZWVkIHRvIHJlLXNvcnQgdGhlIGVsZW1lbnRzIHRvIGVuc3VyZSB0aGF0XG4gICAgICAgICAgICAvLyBjYW5vbmljYWwgSURzIGFyZSBpbmRlcGVuZGVudCBvZiBpbnNlcnRpb24gb3JkZXIuXG4gICAgICAgICAgICByLnNvcnQoKSwgcy5zb3J0KCk7XG4gICAgICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHIubGVuZ3RoICYmIGUgPCBzLmxlbmd0aDsgKytlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKHJbZV0sIHNbZV0pO1xuICAgICAgICAgICAgICAgIGlmICgwICE9PSB0KSByZXR1cm4gdDtcbiAgICAgICAgICAgICAgICBjb25zdCBvID0gX19QUklWQVRFX3ZhbHVlQ29tcGFyZShuW3JbZV1dLCBpW3NbZV1dKTtcbiAgICAgICAgICAgICAgICBpZiAoMCAhPT0gbykgcmV0dXJuIG87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3Ioci5sZW5ndGgsIHMubGVuZ3RoKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEdlbmVyYXRlcyB0aGUgY2Fub25pY2FsIElEIGZvciB0aGUgcHJvdmlkZWQgZmllbGQgdmFsdWUgKGFzIHVzZWQgaW4gVGFyZ2V0XG4gKiBzZXJpYWxpemF0aW9uKS5cbiAqLyAoZS5tYXBWYWx1ZSwgdC5tYXBWYWx1ZSk7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IGZhaWwoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jb21wYXJlVGltZXN0YW1wcyhlLCB0KSB7XG4gICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIGUgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCAmJiBlLmxlbmd0aCA9PT0gdC5sZW5ndGgpIHJldHVybiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihlLCB0KTtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX25vcm1hbGl6ZVRpbWVzdGFtcChlKSwgciA9IF9fUFJJVkFURV9ub3JtYWxpemVUaW1lc3RhbXAodCksIGkgPSBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihuLnNlY29uZHMsIHIuc2Vjb25kcyk7XG4gICAgcmV0dXJuIDAgIT09IGkgPyBpIDogX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3Iobi5uYW5vcywgci5uYW5vcyk7XG59XG5cbmZ1bmN0aW9uIGNhbm9uaWNhbElkKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2Nhbm9uaWZ5VmFsdWUoZSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jYW5vbmlmeVZhbHVlKGUpIHtcbiAgICByZXR1cm4gXCJudWxsVmFsdWVcIiBpbiBlID8gXCJudWxsXCIgOiBcImJvb2xlYW5WYWx1ZVwiIGluIGUgPyBcIlwiICsgZS5ib29sZWFuVmFsdWUgOiBcImludGVnZXJWYWx1ZVwiIGluIGUgPyBcIlwiICsgZS5pbnRlZ2VyVmFsdWUgOiBcImRvdWJsZVZhbHVlXCIgaW4gZSA/IFwiXCIgKyBlLmRvdWJsZVZhbHVlIDogXCJ0aW1lc3RhbXBWYWx1ZVwiIGluIGUgPyBmdW5jdGlvbiBfX1BSSVZBVEVfY2Fub25pZnlUaW1lc3RhbXAoZSkge1xuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX25vcm1hbGl6ZVRpbWVzdGFtcChlKTtcbiAgICAgICAgcmV0dXJuIGB0aW1lKCR7dC5zZWNvbmRzfSwke3QubmFub3N9KWA7XG4gICAgfShlLnRpbWVzdGFtcFZhbHVlKSA6IFwic3RyaW5nVmFsdWVcIiBpbiBlID8gZS5zdHJpbmdWYWx1ZSA6IFwiYnl0ZXNWYWx1ZVwiIGluIGUgPyBmdW5jdGlvbiBfX1BSSVZBVEVfY2Fub25pZnlCeXRlU3RyaW5nKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9ub3JtYWxpemVCeXRlU3RyaW5nKGUpLnRvQmFzZTY0KCk7XG4gICAgfShlLmJ5dGVzVmFsdWUpIDogXCJyZWZlcmVuY2VWYWx1ZVwiIGluIGUgPyBmdW5jdGlvbiBfX1BSSVZBVEVfY2Fub25pZnlSZWZlcmVuY2UoZSkge1xuICAgICAgICByZXR1cm4gRG9jdW1lbnRLZXkuZnJvbU5hbWUoZSkudG9TdHJpbmcoKTtcbiAgICB9KGUucmVmZXJlbmNlVmFsdWUpIDogXCJnZW9Qb2ludFZhbHVlXCIgaW4gZSA/IGZ1bmN0aW9uIF9fUFJJVkFURV9jYW5vbmlmeUdlb1BvaW50KGUpIHtcbiAgICAgICAgcmV0dXJuIGBnZW8oJHtlLmxhdGl0dWRlfSwke2UubG9uZ2l0dWRlfSlgO1xuICAgIH0oZS5nZW9Qb2ludFZhbHVlKSA6IFwiYXJyYXlWYWx1ZVwiIGluIGUgPyBmdW5jdGlvbiBfX1BSSVZBVEVfY2Fub25pZnlBcnJheShlKSB7XG4gICAgICAgIGxldCB0ID0gXCJbXCIsIG4gPSAhMDtcbiAgICAgICAgZm9yIChjb25zdCByIG9mIGUudmFsdWVzIHx8IFtdKSBuID8gbiA9ICExIDogdCArPSBcIixcIiwgdCArPSBfX1BSSVZBVEVfY2Fub25pZnlWYWx1ZShyKTtcbiAgICAgICAgcmV0dXJuIHQgKyBcIl1cIjtcbiAgICB9XG4gICAgLyoqXG4gKiBSZXR1cm5zIGFuIGFwcHJveGltYXRlIChhbmQgd2lsZGx5IGluYWNjdXJhdGUpIGluLW1lbW9yeSBzaXplIGZvciB0aGUgZmllbGRcbiAqIHZhbHVlLlxuICpcbiAqIFRoZSBtZW1vcnkgc2l6ZSB0YWtlcyBpbnRvIGFjY291bnQgb25seSB0aGUgYWN0dWFsIHVzZXIgZGF0YSBhcyBpdCByZXNpZGVzXG4gKiBpbiBtZW1vcnkgYW5kIGlnbm9yZXMgb2JqZWN0IG92ZXJoZWFkLlxuICovIChlLmFycmF5VmFsdWUpIDogXCJtYXBWYWx1ZVwiIGluIGUgPyBmdW5jdGlvbiBfX1BSSVZBVEVfY2Fub25pZnlNYXAoZSkge1xuICAgICAgICAvLyBJdGVyYXRpb24gb3JkZXIgaW4gSmF2YVNjcmlwdCBpcyBub3QgZ3VhcmFudGVlZC4gVG8gZW5zdXJlIHRoYXQgd2UgZ2VuZXJhdGVcbiAgICAgICAgLy8gbWF0Y2hpbmcgY2Fub25pY2FsIElEcyBmb3IgaWRlbnRpY2FsIG1hcHMsIHdlIG5lZWQgdG8gc29ydCB0aGUga2V5cy5cbiAgICAgICAgY29uc3QgdCA9IE9iamVjdC5rZXlzKGUuZmllbGRzIHx8IHt9KS5zb3J0KCk7XG4gICAgICAgIGxldCBuID0gXCJ7XCIsIHIgPSAhMDtcbiAgICAgICAgZm9yIChjb25zdCBpIG9mIHQpIHIgPyByID0gITEgOiBuICs9IFwiLFwiLCBuICs9IGAke2l9OiR7X19QUklWQVRFX2Nhbm9uaWZ5VmFsdWUoZS5maWVsZHNbaV0pfWA7XG4gICAgICAgIHJldHVybiBuICsgXCJ9XCI7XG4gICAgfShlLm1hcFZhbHVlKSA6IGZhaWwoKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2VzdGltYXRlQnl0ZVNpemUoZSkge1xuICAgIHN3aXRjaCAoX19QUklWQVRFX3R5cGVPcmRlcihlKSkge1xuICAgICAgY2FzZSAwIC8qIFR5cGVPcmRlci5OdWxsVmFsdWUgKi8gOlxuICAgICAgY2FzZSAxIC8qIFR5cGVPcmRlci5Cb29sZWFuVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gNDtcblxuICAgICAgY2FzZSAyIC8qIFR5cGVPcmRlci5OdW1iZXJWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiA4O1xuXG4gICAgICBjYXNlIDMgLyogVHlwZU9yZGVyLlRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgIGNhc2UgOCAvKiBUeXBlT3JkZXIuR2VvUG9pbnRWYWx1ZSAqLyA6XG4gICAgICAgIC8vIEdlb1BvaW50cyBhcmUgbWFkZSB1cCBvZiB0d28gZGlzdGluY3QgbnVtYmVycyAobGF0aXR1ZGUgKyBsb25naXR1ZGUpXG4gICAgICAgIHJldHVybiAxNjtcblxuICAgICAgY2FzZSA0IC8qIFR5cGVPcmRlci5TZXJ2ZXJUaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZ2V0UHJldmlvdXNWYWx1ZShlKTtcbiAgICAgICAgcmV0dXJuIHQgPyAxNiArIF9fUFJJVkFURV9lc3RpbWF0ZUJ5dGVTaXplKHQpIDogMTY7XG5cbiAgICAgIGNhc2UgNSAvKiBUeXBlT3JkZXIuU3RyaW5nVmFsdWUgKi8gOlxuICAgICAgICAvLyBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9EYXRhX3N0cnVjdHVyZXM6XG4gICAgICAgIC8vIFwiSmF2YVNjcmlwdCdzIFN0cmluZyB0eXBlIGlzIFsuLi5dIGEgc2V0IG9mIGVsZW1lbnRzIG9mIDE2LWJpdCB1bnNpZ25lZFxuICAgICAgICAvLyBpbnRlZ2VyIHZhbHVlc1wiXG4gICAgICAgIHJldHVybiAyICogZS5zdHJpbmdWYWx1ZS5sZW5ndGg7XG5cbiAgICAgIGNhc2UgNiAvKiBUeXBlT3JkZXIuQmxvYlZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9ub3JtYWxpemVCeXRlU3RyaW5nKGUuYnl0ZXNWYWx1ZSkuYXBwcm94aW1hdGVCeXRlU2l6ZSgpO1xuXG4gICAgICBjYXNlIDcgLyogVHlwZU9yZGVyLlJlZlZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGUucmVmZXJlbmNlVmFsdWUubGVuZ3RoO1xuXG4gICAgICBjYXNlIDkgLyogVHlwZU9yZGVyLkFycmF5VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2VzdGltYXRlQXJyYXlCeXRlU2l6ZShlKSB7XG4gICAgICAgICAgICByZXR1cm4gKGUudmFsdWVzIHx8IFtdKS5yZWR1Y2UoKChlLCB0KSA9PiBlICsgX19QUklWQVRFX2VzdGltYXRlQnl0ZVNpemUodCkpLCAwKTtcbiAgICAgICAgfVxuICAgICAgICAvKiogUmV0dXJucyBhIHJlZmVyZW5jZSB2YWx1ZSBmb3IgdGhlIHByb3ZpZGVkIGRhdGFiYXNlIGFuZCBrZXkuICovIChlLmFycmF5VmFsdWUpO1xuXG4gICAgICBjYXNlIDEwIC8qIFR5cGVPcmRlci5PYmplY3RWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfZXN0aW1hdGVNYXBCeXRlU2l6ZShlKSB7XG4gICAgICAgICAgICBsZXQgdCA9IDA7XG4gICAgICAgICAgICByZXR1cm4gZm9yRWFjaChlLmZpZWxkcywgKChlLCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgdCArPSBlLmxlbmd0aCArIF9fUFJJVkFURV9lc3RpbWF0ZUJ5dGVTaXplKG4pO1xuICAgICAgICAgICAgfSkpLCB0O1xuICAgICAgICB9KGUubWFwVmFsdWUpO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBmYWlsKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfcmVmVmFsdWUoZSwgdCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlZmVyZW5jZVZhbHVlOiBgcHJvamVjdHMvJHtlLnByb2plY3RJZH0vZGF0YWJhc2VzLyR7ZS5kYXRhYmFzZX0vZG9jdW1lbnRzLyR7dC5wYXRoLmNhbm9uaWNhbFN0cmluZygpfWBcbiAgICB9O1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgYW4gSW50ZWdlclZhbHVlIC4gKi8gZnVuY3Rpb24gaXNJbnRlZ2VyKGUpIHtcbiAgICByZXR1cm4gISFlICYmIFwiaW50ZWdlclZhbHVlXCIgaW4gZTtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGEgRG91YmxlVmFsdWUuICovXG4vKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgYW4gQXJyYXlWYWx1ZS4gKi9cbmZ1bmN0aW9uIGlzQXJyYXkoZSkge1xuICAgIHJldHVybiAhIWUgJiYgXCJhcnJheVZhbHVlXCIgaW4gZTtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGEgTnVsbFZhbHVlLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfaXNOdWxsVmFsdWUoZSkge1xuICAgIHJldHVybiAhIWUgJiYgXCJudWxsVmFsdWVcIiBpbiBlO1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgTmFOLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfaXNOYW5WYWx1ZShlKSB7XG4gICAgcmV0dXJuICEhZSAmJiBcImRvdWJsZVZhbHVlXCIgaW4gZSAmJiBpc05hTihOdW1iZXIoZS5kb3VibGVWYWx1ZSkpO1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgYSBNYXBWYWx1ZS4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2lzTWFwVmFsdWUoZSkge1xuICAgIHJldHVybiAhIWUgJiYgXCJtYXBWYWx1ZVwiIGluIGU7XG59XG5cbi8qKiBDcmVhdGVzIGEgZGVlcCBjb3B5IG9mIGBzb3VyY2VgLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZGVlcENsb25lKGUpIHtcbiAgICBpZiAoZS5nZW9Qb2ludFZhbHVlKSByZXR1cm4ge1xuICAgICAgICBnZW9Qb2ludFZhbHVlOiBPYmplY3QuYXNzaWduKHt9LCBlLmdlb1BvaW50VmFsdWUpXG4gICAgfTtcbiAgICBpZiAoZS50aW1lc3RhbXBWYWx1ZSAmJiBcIm9iamVjdFwiID09IHR5cGVvZiBlLnRpbWVzdGFtcFZhbHVlKSByZXR1cm4ge1xuICAgICAgICB0aW1lc3RhbXBWYWx1ZTogT2JqZWN0LmFzc2lnbih7fSwgZS50aW1lc3RhbXBWYWx1ZSlcbiAgICB9O1xuICAgIGlmIChlLm1hcFZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB7XG4gICAgICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgICAgIGZpZWxkczoge31cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGZvckVhY2goZS5tYXBWYWx1ZS5maWVsZHMsICgoZSwgbikgPT4gdC5tYXBWYWx1ZS5maWVsZHNbZV0gPSBfX1BSSVZBVEVfZGVlcENsb25lKG4pKSksIFxuICAgICAgICB0O1xuICAgIH1cbiAgICBpZiAoZS5hcnJheVZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB7XG4gICAgICAgICAgICBhcnJheVZhbHVlOiB7XG4gICAgICAgICAgICAgICAgdmFsdWVzOiBbXVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IChlLmFycmF5VmFsdWUudmFsdWVzIHx8IFtdKS5sZW5ndGg7ICsrbikgdC5hcnJheVZhbHVlLnZhbHVlc1tuXSA9IF9fUFJJVkFURV9kZWVwQ2xvbmUoZS5hcnJheVZhbHVlLnZhbHVlc1tuXSk7XG4gICAgICAgIHJldHVybiB0O1xuICAgIH1cbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgZSk7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIFZhbHVlIHJlcHJlc2VudHMgdGhlIGNhbm9uaWNhbCB7QGxpbmsgI01BWF9WQUxVRX0gLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfaXNNYXhWYWx1ZShlKSB7XG4gICAgcmV0dXJuIFwiX19tYXhfX1wiID09PSAoKChlLm1hcFZhbHVlIHx8IHt9KS5maWVsZHMgfHwge30pLl9fdHlwZV9fIHx8IHt9KS5zdHJpbmdWYWx1ZTtcbn1cblxuLyoqIFJldHVybnMgdGhlIGxvd2VzdCB2YWx1ZSBmb3IgdGhlIGdpdmVuIHZhbHVlIHR5cGUgKGluY2x1c2l2ZSkuICovIGZ1bmN0aW9uIF9fUFJJVkFURV92YWx1ZXNHZXRMb3dlckJvdW5kKGUpIHtcbiAgICByZXR1cm4gXCJudWxsVmFsdWVcIiBpbiBlID8gaWUgOiBcImJvb2xlYW5WYWx1ZVwiIGluIGUgPyB7XG4gICAgICAgIGJvb2xlYW5WYWx1ZTogITFcbiAgICB9IDogXCJpbnRlZ2VyVmFsdWVcIiBpbiBlIHx8IFwiZG91YmxlVmFsdWVcIiBpbiBlID8ge1xuICAgICAgICBkb3VibGVWYWx1ZTogTmFOXG4gICAgfSA6IFwidGltZXN0YW1wVmFsdWVcIiBpbiBlID8ge1xuICAgICAgICB0aW1lc3RhbXBWYWx1ZToge1xuICAgICAgICAgICAgc2Vjb25kczogTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVJcbiAgICAgICAgfVxuICAgIH0gOiBcInN0cmluZ1ZhbHVlXCIgaW4gZSA/IHtcbiAgICAgICAgc3RyaW5nVmFsdWU6IFwiXCJcbiAgICB9IDogXCJieXRlc1ZhbHVlXCIgaW4gZSA/IHtcbiAgICAgICAgYnl0ZXNWYWx1ZTogXCJcIlxuICAgIH0gOiBcInJlZmVyZW5jZVZhbHVlXCIgaW4gZSA/IF9fUFJJVkFURV9yZWZWYWx1ZShEYXRhYmFzZUlkLmVtcHR5KCksIERvY3VtZW50S2V5LmVtcHR5KCkpIDogXCJnZW9Qb2ludFZhbHVlXCIgaW4gZSA/IHtcbiAgICAgICAgZ2VvUG9pbnRWYWx1ZToge1xuICAgICAgICAgICAgbGF0aXR1ZGU6IC05MCxcbiAgICAgICAgICAgIGxvbmdpdHVkZTogLTE4MFxuICAgICAgICB9XG4gICAgfSA6IFwiYXJyYXlWYWx1ZVwiIGluIGUgPyB7XG4gICAgICAgIGFycmF5VmFsdWU6IHt9XG4gICAgfSA6IFwibWFwVmFsdWVcIiBpbiBlID8ge1xuICAgICAgICBtYXBWYWx1ZToge31cbiAgICB9IDogZmFpbCgpO1xufVxuXG4vKiogUmV0dXJucyB0aGUgbGFyZ2VzdCB2YWx1ZSBmb3IgdGhlIGdpdmVuIHZhbHVlIHR5cGUgKGV4Y2x1c2l2ZSkuICovIGZ1bmN0aW9uIF9fUFJJVkFURV92YWx1ZXNHZXRVcHBlckJvdW5kKGUpIHtcbiAgICByZXR1cm4gXCJudWxsVmFsdWVcIiBpbiBlID8ge1xuICAgICAgICBib29sZWFuVmFsdWU6ICExXG4gICAgfSA6IFwiYm9vbGVhblZhbHVlXCIgaW4gZSA/IHtcbiAgICAgICAgZG91YmxlVmFsdWU6IE5hTlxuICAgIH0gOiBcImludGVnZXJWYWx1ZVwiIGluIGUgfHwgXCJkb3VibGVWYWx1ZVwiIGluIGUgPyB7XG4gICAgICAgIHRpbWVzdGFtcFZhbHVlOiB7XG4gICAgICAgICAgICBzZWNvbmRzOiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUlxuICAgICAgICB9XG4gICAgfSA6IFwidGltZXN0YW1wVmFsdWVcIiBpbiBlID8ge1xuICAgICAgICBzdHJpbmdWYWx1ZTogXCJcIlxuICAgIH0gOiBcInN0cmluZ1ZhbHVlXCIgaW4gZSA/IHtcbiAgICAgICAgYnl0ZXNWYWx1ZTogXCJcIlxuICAgIH0gOiBcImJ5dGVzVmFsdWVcIiBpbiBlID8gX19QUklWQVRFX3JlZlZhbHVlKERhdGFiYXNlSWQuZW1wdHkoKSwgRG9jdW1lbnRLZXkuZW1wdHkoKSkgOiBcInJlZmVyZW5jZVZhbHVlXCIgaW4gZSA/IHtcbiAgICAgICAgZ2VvUG9pbnRWYWx1ZToge1xuICAgICAgICAgICAgbGF0aXR1ZGU6IC05MCxcbiAgICAgICAgICAgIGxvbmdpdHVkZTogLTE4MFxuICAgICAgICB9XG4gICAgfSA6IFwiZ2VvUG9pbnRWYWx1ZVwiIGluIGUgPyB7XG4gICAgICAgIGFycmF5VmFsdWU6IHt9XG4gICAgfSA6IFwiYXJyYXlWYWx1ZVwiIGluIGUgPyB7XG4gICAgICAgIG1hcFZhbHVlOiB7fVxuICAgIH0gOiBcIm1hcFZhbHVlXCIgaW4gZSA/IHJlIDogZmFpbCgpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfbG93ZXJCb3VuZENvbXBhcmUoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfdmFsdWVDb21wYXJlKGUudmFsdWUsIHQudmFsdWUpO1xuICAgIHJldHVybiAwICE9PSBuID8gbiA6IGUuaW5jbHVzaXZlICYmICF0LmluY2x1c2l2ZSA/IC0xIDogIWUuaW5jbHVzaXZlICYmIHQuaW5jbHVzaXZlID8gMSA6IDA7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV91cHBlckJvdW5kQ29tcGFyZShlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV92YWx1ZUNvbXBhcmUoZS52YWx1ZSwgdC52YWx1ZSk7XG4gICAgcmV0dXJuIDAgIT09IG4gPyBuIDogZS5pbmNsdXNpdmUgJiYgIXQuaW5jbHVzaXZlID8gMSA6ICFlLmluY2x1c2l2ZSAmJiB0LmluY2x1c2l2ZSA/IC0xIDogMDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gT2JqZWN0VmFsdWUgcmVwcmVzZW50cyBhIE1hcFZhbHVlIGluIHRoZSBGaXJlc3RvcmUgUHJvdG8gYW5kIG9mZmVycyB0aGVcbiAqIGFiaWxpdHkgdG8gYWRkIGFuZCByZW1vdmUgZmllbGRzICh2aWEgdGhlIE9iamVjdFZhbHVlQnVpbGRlcikuXG4gKi8gY2xhc3MgT2JqZWN0VmFsdWUge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IGU7XG4gICAgfVxuICAgIHN0YXRpYyBlbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBPYmplY3RWYWx1ZSh7XG4gICAgICAgICAgICBtYXBWYWx1ZToge31cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHZhbHVlIGF0IHRoZSBnaXZlbiBwYXRoIG9yIG51bGwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGF0aCAtIHRoZSBwYXRoIHRvIHNlYXJjaFxuICAgICAqIEByZXR1cm5zIFRoZSB2YWx1ZSBhdCB0aGUgcGF0aCBvciBudWxsIGlmIHRoZSBwYXRoIGlzIG5vdCBzZXQuXG4gICAgICovICAgIGZpZWxkKGUpIHtcbiAgICAgICAgaWYgKGUuaXNFbXB0eSgpKSByZXR1cm4gdGhpcy52YWx1ZTtcbiAgICAgICAge1xuICAgICAgICAgICAgbGV0IHQgPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBlLmxlbmd0aCAtIDE7ICsrbikgaWYgKHQgPSAodC5tYXBWYWx1ZS5maWVsZHMgfHwge30pW2UuZ2V0KG4pXSwgXG4gICAgICAgICAgICAhX19QUklWQVRFX2lzTWFwVmFsdWUodCkpIHJldHVybiBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIHQgPSAodC5tYXBWYWx1ZS5maWVsZHMgfHwge30pW2UubGFzdFNlZ21lbnQoKV0sIHQgfHwgbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBmaWVsZCB0byB0aGUgcHJvdmlkZWQgdmFsdWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGF0aCAtIFRoZSBmaWVsZCBwYXRoIHRvIHNldC5cbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gc2V0LlxuICAgICAqLyAgICBzZXQoZSwgdCkge1xuICAgICAgICB0aGlzLmdldEZpZWxkc01hcChlLnBvcExhc3QoKSlbZS5sYXN0U2VnbWVudCgpXSA9IF9fUFJJVkFURV9kZWVwQ2xvbmUodCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHByb3ZpZGVkIGZpZWxkcyB0byB0aGUgcHJvdmlkZWQgdmFsdWVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRhdGEgLSBBIG1hcCBvZiBmaWVsZHMgdG8gdmFsdWVzIChvciBudWxsIGZvciBkZWxldGVzKS5cbiAgICAgKi8gICAgc2V0QWxsKGUpIHtcbiAgICAgICAgbGV0IHQgPSBGaWVsZFBhdGgkMS5lbXB0eVBhdGgoKSwgbiA9IHt9LCByID0gW107XG4gICAgICAgIGUuZm9yRWFjaCgoKGUsIGkpID0+IHtcbiAgICAgICAgICAgIGlmICghdC5pc0ltbWVkaWF0ZVBhcmVudE9mKGkpKSB7XG4gICAgICAgICAgICAgICAgLy8gSW5zZXJ0IHRoZSBhY2N1bXVsYXRlZCBjaGFuZ2VzIGF0IHRoaXMgcGFyZW50IGxvY2F0aW9uXG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuZ2V0RmllbGRzTWFwKHQpO1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlDaGFuZ2VzKGUsIG4sIHIpLCBuID0ge30sIHIgPSBbXSwgdCA9IGkucG9wTGFzdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZSA/IG5baS5sYXN0U2VnbWVudCgpXSA9IF9fUFJJVkFURV9kZWVwQ2xvbmUoZSkgOiByLnB1c2goaS5sYXN0U2VnbWVudCgpKTtcbiAgICAgICAgfSkpO1xuICAgICAgICBjb25zdCBpID0gdGhpcy5nZXRGaWVsZHNNYXAodCk7XG4gICAgICAgIHRoaXMuYXBwbHlDaGFuZ2VzKGksIG4sIHIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBmaWVsZCBhdCB0aGUgc3BlY2lmaWVkIHBhdGguIElmIHRoZXJlIGlzIG5vIGZpZWxkIGF0IHRoZVxuICAgICAqIHNwZWNpZmllZCBwYXRoLCBub3RoaW5nIGlzIGNoYW5nZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGF0aCAtIFRoZSBmaWVsZCBwYXRoIHRvIHJlbW92ZS5cbiAgICAgKi8gICAgZGVsZXRlKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuZmllbGQoZS5wb3BMYXN0KCkpO1xuICAgICAgICBfX1BSSVZBVEVfaXNNYXBWYWx1ZSh0KSAmJiB0Lm1hcFZhbHVlLmZpZWxkcyAmJiBkZWxldGUgdC5tYXBWYWx1ZS5maWVsZHNbZS5sYXN0U2VnbWVudCgpXTtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfdmFsdWVFcXVhbHModGhpcy52YWx1ZSwgZS52YWx1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG1hcCB0aGF0IGNvbnRhaW5zIHRoZSBsZWFmIGVsZW1lbnQgb2YgYHBhdGhgLiBJZiB0aGUgcGFyZW50XG4gICAgICogZW50cnkgZG9lcyBub3QgeWV0IGV4aXN0LCBvciBpZiBpdCBpcyBub3QgYSBtYXAsIGEgbmV3IG1hcCB3aWxsIGJlIGNyZWF0ZWQuXG4gICAgICovICAgIGdldEZpZWxkc01hcChlKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcy52YWx1ZTtcbiAgICAgICAgdC5tYXBWYWx1ZS5maWVsZHMgfHwgKHQubWFwVmFsdWUgPSB7XG4gICAgICAgICAgICBmaWVsZHM6IHt9XG4gICAgICAgIH0pO1xuICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IGUubGVuZ3RoOyArK24pIHtcbiAgICAgICAgICAgIGxldCByID0gdC5tYXBWYWx1ZS5maWVsZHNbZS5nZXQobildO1xuICAgICAgICAgICAgX19QUklWQVRFX2lzTWFwVmFsdWUocikgJiYgci5tYXBWYWx1ZS5maWVsZHMgfHwgKHIgPSB7XG4gICAgICAgICAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGRzOiB7fVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHQubWFwVmFsdWUuZmllbGRzW2UuZ2V0KG4pXSA9IHIpLCB0ID0gcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdC5tYXBWYWx1ZS5maWVsZHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1vZGlmaWVzIGBmaWVsZHNNYXBgIGJ5IGFkZGluZywgcmVwbGFjaW5nIG9yIGRlbGV0aW5nIHRoZSBzcGVjaWZpZWRcbiAgICAgKiBlbnRyaWVzLlxuICAgICAqLyAgICBhcHBseUNoYW5nZXMoZSwgdCwgbikge1xuICAgICAgICBmb3JFYWNoKHQsICgodCwgbikgPT4gZVt0XSA9IG4pKTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIG4pIGRlbGV0ZSBlW3RdO1xuICAgIH1cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBPYmplY3RWYWx1ZShfX1BSSVZBVEVfZGVlcENsb25lKHRoaXMudmFsdWUpKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIEZpZWxkTWFzayBidWlsdCBmcm9tIGFsbCBmaWVsZHMgaW4gYSBNYXBWYWx1ZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZXh0cmFjdEZpZWxkTWFzayhlKSB7XG4gICAgY29uc3QgdCA9IFtdO1xuICAgIHJldHVybiBmb3JFYWNoKGUuZmllbGRzLCAoKGUsIG4pID0+IHtcbiAgICAgICAgY29uc3QgciA9IG5ldyBGaWVsZFBhdGgkMShbIGUgXSk7XG4gICAgICAgIGlmIChfX1BSSVZBVEVfaXNNYXBWYWx1ZShuKSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IF9fUFJJVkFURV9leHRyYWN0RmllbGRNYXNrKG4ubWFwVmFsdWUpLmZpZWxkcztcbiAgICAgICAgICAgIGlmICgwID09PSBlLmxlbmd0aCkgXG4gICAgICAgICAgICAvLyBQcmVzZXJ2ZSB0aGUgZW1wdHkgbWFwIGJ5IGFkZGluZyBpdCB0byB0aGUgRmllbGRNYXNrLlxuICAgICAgICAgICAgdC5wdXNoKHIpOyBlbHNlIFxuICAgICAgICAgICAgLy8gRm9yIG5lc3RlZCBhbmQgbm9uLWVtcHR5IE9iamVjdFZhbHVlcywgYWRkIHRoZSBGaWVsZFBhdGggb2YgdGhlXG4gICAgICAgICAgICAvLyBsZWFmIG5vZGVzLlxuICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIGUpIHQucHVzaChyLmNoaWxkKG4pKTtcbiAgICAgICAgfSBlbHNlIFxuICAgICAgICAvLyBGb3IgbmVzdGVkIGFuZCBub24tZW1wdHkgT2JqZWN0VmFsdWVzLCBhZGQgdGhlIEZpZWxkUGF0aCBvZiB0aGUgbGVhZlxuICAgICAgICAvLyBub2Rlcy5cbiAgICAgICAgdC5wdXNoKHIpO1xuICAgIH0pKSwgbmV3IEZpZWxkTWFzayh0KTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhIGRvY3VtZW50IGluIEZpcmVzdG9yZSB3aXRoIGEga2V5LCB2ZXJzaW9uLCBkYXRhIGFuZCB3aGV0aGVyIGl0XG4gKiBoYXMgbG9jYWwgbXV0YXRpb25zIGFwcGxpZWQgdG8gaXQuXG4gKlxuICogRG9jdW1lbnRzIGNhbiB0cmFuc2l0aW9uIGJldHdlZW4gc3RhdGVzIHZpYSBgY29udmVydFRvRm91bmREb2N1bWVudCgpYCxcbiAqIGBjb252ZXJ0VG9Ob0RvY3VtZW50KClgIGFuZCBgY29udmVydFRvVW5rbm93bkRvY3VtZW50KClgLiBJZiBhIGRvY3VtZW50IGRvZXNcbiAqIG5vdCB0cmFuc2l0aW9uIHRvIG9uZSBvZiB0aGVzZSBzdGF0ZXMgZXZlbiBhZnRlciBhbGwgbXV0YXRpb25zIGhhdmUgYmVlblxuICogYXBwbGllZCwgYGlzVmFsaWREb2N1bWVudCgpYCByZXR1cm5zIGZhbHNlIGFuZCB0aGUgZG9jdW1lbnQgc2hvdWxkIGJlIHJlbW92ZWRcbiAqIGZyb20gYWxsIHZpZXdzLlxuICovIGNsYXNzIE11dGFibGVEb2N1bWVudCB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgciwgaSwgcywgbykge1xuICAgICAgICB0aGlzLmtleSA9IGUsIHRoaXMuZG9jdW1lbnRUeXBlID0gdCwgdGhpcy52ZXJzaW9uID0gbiwgdGhpcy5yZWFkVGltZSA9IHIsIHRoaXMuY3JlYXRlVGltZSA9IGksIFxuICAgICAgICB0aGlzLmRhdGEgPSBzLCB0aGlzLmRvY3VtZW50U3RhdGUgPSBvO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZG9jdW1lbnQgd2l0aCBubyBrbm93biB2ZXJzaW9uIG9yIGRhdGEsIGJ1dCB3aGljaCBjYW4gc2VydmUgYXNcbiAgICAgKiBiYXNlIGRvY3VtZW50IGZvciBtdXRhdGlvbnMuXG4gICAgICovICAgIHN0YXRpYyBuZXdJbnZhbGlkRG9jdW1lbnQoZSkge1xuICAgICAgICByZXR1cm4gbmV3IE11dGFibGVEb2N1bWVudChlLCAwIC8qIERvY3VtZW50VHlwZS5JTlZBTElEICovICwgXG4gICAgICAgIC8qIHZlcnNpb24gKi8gU25hcHNob3RWZXJzaW9uLm1pbigpLCBcbiAgICAgICAgLyogcmVhZFRpbWUgKi8gU25hcHNob3RWZXJzaW9uLm1pbigpLCBcbiAgICAgICAgLyogY3JlYXRlVGltZSAqLyBTbmFwc2hvdFZlcnNpb24ubWluKCksIE9iamVjdFZhbHVlLmVtcHR5KCksIDAgLyogRG9jdW1lbnRTdGF0ZS5TWU5DRUQgKi8pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGRvY3VtZW50IHRoYXQgaXMga25vd24gdG8gZXhpc3Qgd2l0aCB0aGUgZ2l2ZW4gZGF0YSBhdCB0aGVcbiAgICAgKiBnaXZlbiB2ZXJzaW9uLlxuICAgICAqLyAgICBzdGF0aWMgbmV3Rm91bmREb2N1bWVudChlLCB0LCBuLCByKSB7XG4gICAgICAgIHJldHVybiBuZXcgTXV0YWJsZURvY3VtZW50KGUsIDEgLyogRG9jdW1lbnRUeXBlLkZPVU5EX0RPQ1VNRU5UICovICwgXG4gICAgICAgIC8qIHZlcnNpb24gKi8gdCwgXG4gICAgICAgIC8qIHJlYWRUaW1lICovIFNuYXBzaG90VmVyc2lvbi5taW4oKSwgXG4gICAgICAgIC8qIGNyZWF0ZVRpbWUgKi8gbiwgciwgMCAvKiBEb2N1bWVudFN0YXRlLlNZTkNFRCAqLyk7XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IGRvY3VtZW50IHRoYXQgaXMga25vd24gdG8gbm90IGV4aXN0IGF0IHRoZSBnaXZlbiB2ZXJzaW9uLiAqLyAgICBzdGF0aWMgbmV3Tm9Eb2N1bWVudChlLCB0KSB7XG4gICAgICAgIHJldHVybiBuZXcgTXV0YWJsZURvY3VtZW50KGUsIDIgLyogRG9jdW1lbnRUeXBlLk5PX0RPQ1VNRU5UICovICwgXG4gICAgICAgIC8qIHZlcnNpb24gKi8gdCwgXG4gICAgICAgIC8qIHJlYWRUaW1lICovIFNuYXBzaG90VmVyc2lvbi5taW4oKSwgXG4gICAgICAgIC8qIGNyZWF0ZVRpbWUgKi8gU25hcHNob3RWZXJzaW9uLm1pbigpLCBPYmplY3RWYWx1ZS5lbXB0eSgpLCAwIC8qIERvY3VtZW50U3RhdGUuU1lOQ0VEICovKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBkb2N1bWVudCB0aGF0IGlzIGtub3duIHRvIGV4aXN0IGF0IHRoZSBnaXZlbiB2ZXJzaW9uIGJ1dFxuICAgICAqIHdob3NlIGRhdGEgaXMgbm90IGtub3duIChlLmcuIGEgZG9jdW1lbnQgdGhhdCB3YXMgdXBkYXRlZCB3aXRob3V0IGEga25vd25cbiAgICAgKiBiYXNlIGRvY3VtZW50KS5cbiAgICAgKi8gICAgc3RhdGljIG5ld1Vua25vd25Eb2N1bWVudChlLCB0KSB7XG4gICAgICAgIHJldHVybiBuZXcgTXV0YWJsZURvY3VtZW50KGUsIDMgLyogRG9jdW1lbnRUeXBlLlVOS05PV05fRE9DVU1FTlQgKi8gLCBcbiAgICAgICAgLyogdmVyc2lvbiAqLyB0LCBcbiAgICAgICAgLyogcmVhZFRpbWUgKi8gU25hcHNob3RWZXJzaW9uLm1pbigpLCBcbiAgICAgICAgLyogY3JlYXRlVGltZSAqLyBTbmFwc2hvdFZlcnNpb24ubWluKCksIE9iamVjdFZhbHVlLmVtcHR5KCksIDIgLyogRG9jdW1lbnRTdGF0ZS5IQVNfQ09NTUlUVEVEX01VVEFUSU9OUyAqLyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoYW5nZXMgdGhlIGRvY3VtZW50IHR5cGUgdG8gaW5kaWNhdGUgdGhhdCBpdCBleGlzdHMgYW5kIHRoYXQgaXRzIHZlcnNpb25cbiAgICAgKiBhbmQgZGF0YSBhcmUga25vd24uXG4gICAgICovICAgIGNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQoZSwgdCkge1xuICAgICAgICAvLyBJZiBhIGRvY3VtZW50IGlzIHN3aXRjaGluZyBzdGF0ZSBmcm9tIGJlaW5nIGFuIGludmFsaWQgb3IgZGVsZXRlZFxuICAgICAgICAvLyBkb2N1bWVudCB0byBhIHZhbGlkIChGT1VORF9ET0NVTUVOVCkgZG9jdW1lbnQsIGVpdGhlciBkdWUgdG8gcmVjZWl2aW5nIGFuXG4gICAgICAgIC8vIHVwZGF0ZSBmcm9tIFdhdGNoIG9yIGR1ZSB0byBhcHBseWluZyBhIGxvY2FsIHNldCBtdXRhdGlvbiBvbiB0b3BcbiAgICAgICAgLy8gb2YgYSBkZWxldGVkIGRvY3VtZW50LCBvdXIgYmVzdCBndWVzcyBhYm91dCBpdHMgY3JlYXRlVGltZSB3b3VsZCBiZSB0aGVcbiAgICAgICAgLy8gdmVyc2lvbiBhdCB3aGljaCB0aGUgZG9jdW1lbnQgdHJhbnNpdGlvbmVkIHRvIGEgRk9VTkRfRE9DVU1FTlQuXG4gICAgICAgIHJldHVybiAhdGhpcy5jcmVhdGVUaW1lLmlzRXF1YWwoU25hcHNob3RWZXJzaW9uLm1pbigpKSB8fCAyIC8qIERvY3VtZW50VHlwZS5OT19ET0NVTUVOVCAqLyAhPT0gdGhpcy5kb2N1bWVudFR5cGUgJiYgMCAvKiBEb2N1bWVudFR5cGUuSU5WQUxJRCAqLyAhPT0gdGhpcy5kb2N1bWVudFR5cGUgfHwgKHRoaXMuY3JlYXRlVGltZSA9IGUpLCBcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gZSwgdGhpcy5kb2N1bWVudFR5cGUgPSAxIC8qIERvY3VtZW50VHlwZS5GT1VORF9ET0NVTUVOVCAqLyAsIHRoaXMuZGF0YSA9IHQsIFxuICAgICAgICB0aGlzLmRvY3VtZW50U3RhdGUgPSAwIC8qIERvY3VtZW50U3RhdGUuU1lOQ0VEICovICwgdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hhbmdlcyB0aGUgZG9jdW1lbnQgdHlwZSB0byBpbmRpY2F0ZSB0aGF0IGl0IGRvZXNuJ3QgZXhpc3QgYXQgdGhlIGdpdmVuXG4gICAgICogdmVyc2lvbi5cbiAgICAgKi8gICAgY29udmVydFRvTm9Eb2N1bWVudChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZlcnNpb24gPSBlLCB0aGlzLmRvY3VtZW50VHlwZSA9IDIgLyogRG9jdW1lbnRUeXBlLk5PX0RPQ1VNRU5UICovICwgXG4gICAgICAgIHRoaXMuZGF0YSA9IE9iamVjdFZhbHVlLmVtcHR5KCksIHRoaXMuZG9jdW1lbnRTdGF0ZSA9IDAgLyogRG9jdW1lbnRTdGF0ZS5TWU5DRUQgKi8gLCBcbiAgICAgICAgdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hhbmdlcyB0aGUgZG9jdW1lbnQgdHlwZSB0byBpbmRpY2F0ZSB0aGF0IGl0IGV4aXN0cyBhdCBhIGdpdmVuIHZlcnNpb24gYnV0XG4gICAgICogdGhhdCBpdHMgZGF0YSBpcyBub3Qga25vd24gKGUuZy4gYSBkb2N1bWVudCB0aGF0IHdhcyB1cGRhdGVkIHdpdGhvdXQgYSBrbm93blxuICAgICAqIGJhc2UgZG9jdW1lbnQpLlxuICAgICAqLyAgICBjb252ZXJ0VG9Vbmtub3duRG9jdW1lbnQoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uID0gZSwgdGhpcy5kb2N1bWVudFR5cGUgPSAzIC8qIERvY3VtZW50VHlwZS5VTktOT1dOX0RPQ1VNRU5UICovICwgXG4gICAgICAgIHRoaXMuZGF0YSA9IE9iamVjdFZhbHVlLmVtcHR5KCksIHRoaXMuZG9jdW1lbnRTdGF0ZSA9IDIgLyogRG9jdW1lbnRTdGF0ZS5IQVNfQ09NTUlUVEVEX01VVEFUSU9OUyAqLyAsIFxuICAgICAgICB0aGlzO1xuICAgIH1cbiAgICBzZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50U3RhdGUgPSAyIC8qIERvY3VtZW50U3RhdGUuSEFTX0NPTU1JVFRFRF9NVVRBVElPTlMgKi8gLCB0aGlzO1xuICAgIH1cbiAgICBzZXRIYXNMb2NhbE11dGF0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRTdGF0ZSA9IDEgLyogRG9jdW1lbnRTdGF0ZS5IQVNfTE9DQUxfTVVUQVRJT05TICovICwgdGhpcy52ZXJzaW9uID0gU25hcHNob3RWZXJzaW9uLm1pbigpLCBcbiAgICAgICAgdGhpcztcbiAgICB9XG4gICAgc2V0UmVhZFRpbWUoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWFkVGltZSA9IGUsIHRoaXM7XG4gICAgfVxuICAgIGdldCBoYXNMb2NhbE11dGF0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIDEgLyogRG9jdW1lbnRTdGF0ZS5IQVNfTE9DQUxfTVVUQVRJT05TICovID09PSB0aGlzLmRvY3VtZW50U3RhdGU7XG4gICAgfVxuICAgIGdldCBoYXNDb21taXR0ZWRNdXRhdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiAyIC8qIERvY3VtZW50U3RhdGUuSEFTX0NPTU1JVFRFRF9NVVRBVElPTlMgKi8gPT09IHRoaXMuZG9jdW1lbnRTdGF0ZTtcbiAgICB9XG4gICAgZ2V0IGhhc1BlbmRpbmdXcml0ZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhc0xvY2FsTXV0YXRpb25zIHx8IHRoaXMuaGFzQ29tbWl0dGVkTXV0YXRpb25zO1xuICAgIH1cbiAgICBpc1ZhbGlkRG9jdW1lbnQoKSB7XG4gICAgICAgIHJldHVybiAwIC8qIERvY3VtZW50VHlwZS5JTlZBTElEICovICE9PSB0aGlzLmRvY3VtZW50VHlwZTtcbiAgICB9XG4gICAgaXNGb3VuZERvY3VtZW50KCkge1xuICAgICAgICByZXR1cm4gMSAvKiBEb2N1bWVudFR5cGUuRk9VTkRfRE9DVU1FTlQgKi8gPT09IHRoaXMuZG9jdW1lbnRUeXBlO1xuICAgIH1cbiAgICBpc05vRG9jdW1lbnQoKSB7XG4gICAgICAgIHJldHVybiAyIC8qIERvY3VtZW50VHlwZS5OT19ET0NVTUVOVCAqLyA9PT0gdGhpcy5kb2N1bWVudFR5cGU7XG4gICAgfVxuICAgIGlzVW5rbm93bkRvY3VtZW50KCkge1xuICAgICAgICByZXR1cm4gMyAvKiBEb2N1bWVudFR5cGUuVU5LTk9XTl9ET0NVTUVOVCAqLyA9PT0gdGhpcy5kb2N1bWVudFR5cGU7XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gZSBpbnN0YW5jZW9mIE11dGFibGVEb2N1bWVudCAmJiB0aGlzLmtleS5pc0VxdWFsKGUua2V5KSAmJiB0aGlzLnZlcnNpb24uaXNFcXVhbChlLnZlcnNpb24pICYmIHRoaXMuZG9jdW1lbnRUeXBlID09PSBlLmRvY3VtZW50VHlwZSAmJiB0aGlzLmRvY3VtZW50U3RhdGUgPT09IGUuZG9jdW1lbnRTdGF0ZSAmJiB0aGlzLmRhdGEuaXNFcXVhbChlLmRhdGEpO1xuICAgIH1cbiAgICBtdXRhYmxlQ29weSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNdXRhYmxlRG9jdW1lbnQodGhpcy5rZXksIHRoaXMuZG9jdW1lbnRUeXBlLCB0aGlzLnZlcnNpb24sIHRoaXMucmVhZFRpbWUsIHRoaXMuY3JlYXRlVGltZSwgdGhpcy5kYXRhLmNsb25lKCksIHRoaXMuZG9jdW1lbnRTdGF0ZSk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gYERvY3VtZW50KCR7dGhpcy5rZXl9LCAke3RoaXMudmVyc2lvbn0sICR7SlNPTi5zdHJpbmdpZnkodGhpcy5kYXRhLnZhbHVlKX0sIHtjcmVhdGVUaW1lOiAke3RoaXMuY3JlYXRlVGltZX19KSwge2RvY3VtZW50VHlwZTogJHt0aGlzLmRvY3VtZW50VHlwZX19KSwge2RvY3VtZW50U3RhdGU6ICR7dGhpcy5kb2N1bWVudFN0YXRlfX0pYDtcbiAgICB9XG59XG5cbi8qKlxuICogQ29tcGFyZXMgdGhlIHZhbHVlIGZvciBmaWVsZCBgZmllbGRgIGluIHRoZSBwcm92aWRlZCBkb2N1bWVudHMuIFRocm93cyBpZlxuICogdGhlIGZpZWxkIGRvZXMgbm90IGV4aXN0IGluIGJvdGggZG9jdW1lbnRzLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgYm91bmQgb2YgYSBxdWVyeS5cbiAqXG4gKiBUaGUgYm91bmQgaXMgc3BlY2lmaWVkIHdpdGggdGhlIGdpdmVuIGNvbXBvbmVudHMgcmVwcmVzZW50aW5nIGEgcG9zaXRpb24gYW5kXG4gKiB3aGV0aGVyIGl0J3MganVzdCBiZWZvcmUgb3IganVzdCBhZnRlciB0aGUgcG9zaXRpb24gKHJlbGF0aXZlIHRvIHdoYXRldmVyIHRoZVxuICogcXVlcnkgb3JkZXIgaXMpLlxuICpcbiAqIFRoZSBwb3NpdGlvbiByZXByZXNlbnRzIGEgbG9naWNhbCBpbmRleCBwb3NpdGlvbiBmb3IgYSBxdWVyeS4gSXQncyBhIHByZWZpeFxuICogb2YgdmFsdWVzIGZvciB0aGUgKHBvdGVudGlhbGx5IGltcGxpY2l0KSBvcmRlciBieSBjbGF1c2VzIG9mIGEgcXVlcnkuXG4gKlxuICogQm91bmQgcHJvdmlkZXMgYSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgd2hldGhlciBhIGRvY3VtZW50IGNvbWVzIGJlZm9yZSBvclxuICogYWZ0ZXIgYSBib3VuZC4gVGhpcyBpcyBpbmZsdWVuY2VkIGJ5IHdoZXRoZXIgdGhlIHBvc2l0aW9uIGlzIGp1c3QgYmVmb3JlIG9yXG4gKiBqdXN0IGFmdGVyIHRoZSBwcm92aWRlZCB2YWx1ZXMuXG4gKi9cbmNsYXNzIEJvdW5kIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBlLCB0aGlzLmluY2x1c2l2ZSA9IHQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfYm91bmRDb21wYXJlVG9Eb2N1bWVudChlLCB0LCBuKSB7XG4gICAgbGV0IHIgPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZS5wb3NpdGlvbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBzID0gdFtpXSwgbyA9IGUucG9zaXRpb25baV07XG4gICAgICAgIGlmIChzLmZpZWxkLmlzS2V5RmllbGQoKSkgciA9IERvY3VtZW50S2V5LmNvbXBhcmF0b3IoRG9jdW1lbnRLZXkuZnJvbU5hbWUoby5yZWZlcmVuY2VWYWx1ZSksIG4ua2V5KTsgZWxzZSB7XG4gICAgICAgICAgICByID0gX19QUklWQVRFX3ZhbHVlQ29tcGFyZShvLCBuLmRhdGEuZmllbGQocy5maWVsZCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChcImRlc2NcIiAvKiBEaXJlY3Rpb24uREVTQ0VORElORyAqLyA9PT0gcy5kaXIgJiYgKHIgKj0gLTEpLCAwICE9PSByKSBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIHI7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIGEgZG9jdW1lbnQgc29ydHMgYWZ0ZXIgYSBib3VuZCB1c2luZyB0aGUgcHJvdmlkZWQgc29ydFxuICogb3JkZXIuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2JvdW5kRXF1YWxzKGUsIHQpIHtcbiAgICBpZiAobnVsbCA9PT0gZSkgcmV0dXJuIG51bGwgPT09IHQ7XG4gICAgaWYgKG51bGwgPT09IHQpIHJldHVybiAhMTtcbiAgICBpZiAoZS5pbmNsdXNpdmUgIT09IHQuaW5jbHVzaXZlIHx8IGUucG9zaXRpb24ubGVuZ3RoICE9PSB0LnBvc2l0aW9uLmxlbmd0aCkgcmV0dXJuICExO1xuICAgIGZvciAobGV0IG4gPSAwOyBuIDwgZS5wb3NpdGlvbi5sZW5ndGg7IG4rKykge1xuICAgICAgICBpZiAoIV9fUFJJVkFURV92YWx1ZUVxdWFscyhlLnBvc2l0aW9uW25dLCB0LnBvc2l0aW9uW25dKSkgcmV0dXJuICExO1xuICAgIH1cbiAgICByZXR1cm4gITA7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIG9yZGVyaW5nIG9uIGEgZmllbGQsIGluIHNvbWUgRGlyZWN0aW9uLiBEaXJlY3Rpb24gZGVmYXVsdHMgdG8gQVNDRU5ESU5HLlxuICovIGNsYXNzIE9yZGVyQnkge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQgPSBcImFzY1wiIC8qIERpcmVjdGlvbi5BU0NFTkRJTkcgKi8pIHtcbiAgICAgICAgdGhpcy5maWVsZCA9IGUsIHRoaXMuZGlyID0gdDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9vcmRlckJ5RXF1YWxzKGUsIHQpIHtcbiAgICByZXR1cm4gZS5kaXIgPT09IHQuZGlyICYmIGUuZmllbGQuaXNFcXVhbCh0LmZpZWxkKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgRmlsdGVyIHt9XG5cbmNsYXNzIEZpZWxkRmlsdGVyIGV4dGVuZHMgRmlsdGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuZmllbGQgPSBlLCB0aGlzLm9wID0gdCwgdGhpcy52YWx1ZSA9IG47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmaWx0ZXIgYmFzZWQgb24gdGhlIHByb3ZpZGVkIGFyZ3VtZW50cy5cbiAgICAgKi8gICAgc3RhdGljIGNyZWF0ZShlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBlLmlzS2V5RmllbGQoKSA/IFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyA9PT0gdCB8fCBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyA9PT0gdCA/IHRoaXMuY3JlYXRlS2V5RmllbGRJbkZpbHRlcihlLCB0LCBuKSA6IG5ldyBfX1BSSVZBVEVfS2V5RmllbGRGaWx0ZXIoZSwgdCwgbikgOiBcImFycmF5LWNvbnRhaW5zXCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlMgKi8gPT09IHQgPyBuZXcgX19QUklWQVRFX0FycmF5Q29udGFpbnNGaWx0ZXIoZSwgbikgOiBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gPT09IHQgPyBuZXcgX19QUklWQVRFX0luRmlsdGVyKGUsIG4pIDogXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gPT09IHQgPyBuZXcgX19QUklWQVRFX05vdEluRmlsdGVyKGUsIG4pIDogXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkgKi8gPT09IHQgPyBuZXcgX19QUklWQVRFX0FycmF5Q29udGFpbnNBbnlGaWx0ZXIoZSwgbikgOiBuZXcgRmllbGRGaWx0ZXIoZSwgdCwgbik7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGVLZXlGaWVsZEluRmlsdGVyKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyA9PT0gdCA/IG5ldyBfX1BSSVZBVEVfS2V5RmllbGRJbkZpbHRlcihlLCBuKSA6IG5ldyBfX1BSSVZBVEVfS2V5RmllbGROb3RJbkZpbHRlcihlLCBuKTtcbiAgICB9XG4gICAgbWF0Y2hlcyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLmRhdGEuZmllbGQodGhpcy5maWVsZCk7XG4gICAgICAgIC8vIFR5cGVzIGRvIG5vdCBoYXZlIHRvIG1hdGNoIGluIE5PVF9FUVVBTCBmaWx0ZXJzLlxuICAgICAgICAgICAgICAgIHJldHVybiBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovID09PSB0aGlzLm9wID8gbnVsbCAhPT0gdCAmJiB0aGlzLm1hdGNoZXNDb21wYXJpc29uKF9fUFJJVkFURV92YWx1ZUNvbXBhcmUodCwgdGhpcy52YWx1ZSkpIDogbnVsbCAhPT0gdCAmJiBfX1BSSVZBVEVfdHlwZU9yZGVyKHRoaXMudmFsdWUpID09PSBfX1BSSVZBVEVfdHlwZU9yZGVyKHQpICYmIHRoaXMubWF0Y2hlc0NvbXBhcmlzb24oX19QUklWQVRFX3ZhbHVlQ29tcGFyZSh0LCB0aGlzLnZhbHVlKSk7XG4gICAgICAgIC8vIE9ubHkgY29tcGFyZSB0eXBlcyB3aXRoIG1hdGNoaW5nIGJhY2tlbmQgb3JkZXIgKHN1Y2ggYXMgZG91YmxlIGFuZCBpbnQpLlxuICAgICAgICB9XG4gICAgbWF0Y2hlc0NvbXBhcmlzb24oZSkge1xuICAgICAgICBzd2l0Y2ggKHRoaXMub3ApIHtcbiAgICAgICAgICBjYXNlIFwiPFwiIC8qIE9wZXJhdG9yLkxFU1NfVEhBTiAqLyA6XG4gICAgICAgICAgICByZXR1cm4gZSA8IDA7XG5cbiAgICAgICAgICBjYXNlIFwiPD1cIiAvKiBPcGVyYXRvci5MRVNTX1RIQU5fT1JfRVFVQUwgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIGUgPD0gMDtcblxuICAgICAgICAgIGNhc2UgXCI9PVwiIC8qIE9wZXJhdG9yLkVRVUFMICovIDpcbiAgICAgICAgICAgIHJldHVybiAwID09PSBlO1xuXG4gICAgICAgICAgY2FzZSBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovIDpcbiAgICAgICAgICAgIHJldHVybiAwICE9PSBlO1xuXG4gICAgICAgICAgY2FzZSBcIj5cIiAvKiBPcGVyYXRvci5HUkVBVEVSX1RIQU4gKi8gOlxuICAgICAgICAgICAgcmV0dXJuIGUgPiAwO1xuXG4gICAgICAgICAgY2FzZSBcIj49XCIgLyogT3BlcmF0b3IuR1JFQVRFUl9USEFOX09SX0VRVUFMICovIDpcbiAgICAgICAgICAgIHJldHVybiBlID49IDA7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIGZhaWwoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpc0luZXF1YWxpdHkoKSB7XG4gICAgICAgIHJldHVybiBbIFwiPFwiIC8qIE9wZXJhdG9yLkxFU1NfVEhBTiAqLyAsIFwiPD1cIiAvKiBPcGVyYXRvci5MRVNTX1RIQU5fT1JfRVFVQUwgKi8gLCBcIj5cIiAvKiBPcGVyYXRvci5HUkVBVEVSX1RIQU4gKi8gLCBcIj49XCIgLyogT3BlcmF0b3IuR1JFQVRFUl9USEFOX09SX0VRVUFMICovICwgXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLyAsIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovIF0uaW5kZXhPZih0aGlzLm9wKSA+PSAwO1xuICAgIH1cbiAgICBnZXRGbGF0dGVuZWRGaWx0ZXJzKCkge1xuICAgICAgICByZXR1cm4gWyB0aGlzIF07XG4gICAgfVxuICAgIGdldEZpbHRlcnMoKSB7XG4gICAgICAgIHJldHVybiBbIHRoaXMgXTtcbiAgICB9XG59XG5cbmNsYXNzIENvbXBvc2l0ZUZpbHRlciBleHRlbmRzIEZpbHRlciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmZpbHRlcnMgPSBlLCB0aGlzLm9wID0gdCwgdGhpcy5hZSA9IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmaWx0ZXIgYmFzZWQgb24gdGhlIHByb3ZpZGVkIGFyZ3VtZW50cy5cbiAgICAgKi8gICAgc3RhdGljIGNyZWF0ZShlLCB0KSB7XG4gICAgICAgIHJldHVybiBuZXcgQ29tcG9zaXRlRmlsdGVyKGUsIHQpO1xuICAgIH1cbiAgICBtYXRjaGVzKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0Nvbmp1bmN0aW9uKHRoaXMpID8gdm9pZCAwID09PSB0aGlzLmZpbHRlcnMuZmluZCgodCA9PiAhdC5tYXRjaGVzKGUpKSkgOiB2b2lkIDAgIT09IHRoaXMuZmlsdGVycy5maW5kKCh0ID0+IHQubWF0Y2hlcyhlKSkpO1xuICAgIH1cbiAgICBnZXRGbGF0dGVuZWRGaWx0ZXJzKCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdGhpcy5hZSB8fCAodGhpcy5hZSA9IHRoaXMuZmlsdGVycy5yZWR1Y2UoKChlLCB0KSA9PiBlLmNvbmNhdCh0LmdldEZsYXR0ZW5lZEZpbHRlcnMoKSkpLCBbXSkpLCBcbiAgICAgICAgdGhpcy5hZTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIG11dGFibGUgY29weSBvZiBgdGhpcy5maWx0ZXJzYFxuICAgIGdldEZpbHRlcnMoKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKFtdLCB0aGlzLmZpbHRlcnMpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzQ29uanVuY3Rpb24oZSkge1xuICAgIHJldHVybiBcImFuZFwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLkFORCAqLyA9PT0gZS5vcDtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzRGlzanVuY3Rpb24oZSkge1xuICAgIHJldHVybiBcIm9yXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuT1IgKi8gPT09IGUub3A7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoaXMgZmlsdGVyIGlzIGEgY29uanVuY3Rpb24gb2YgZmllbGQgZmlsdGVycyBvbmx5LiBSZXR1cm5zIGZhbHNlIG90aGVyd2lzZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVySXNGbGF0Q29uanVuY3Rpb24oZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVySXNGbGF0KGUpICYmIF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0Nvbmp1bmN0aW9uKGUpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGZpbHRlciBkb2VzIG5vdCBjb250YWluIGFueSBjb21wb3NpdGUgZmlsdGVycy4gUmV0dXJucyBmYWxzZSBvdGhlcndpc2UuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzRmxhdChlKSB7XG4gICAgZm9yIChjb25zdCB0IG9mIGUuZmlsdGVycykgaWYgKHQgaW5zdGFuY2VvZiBDb21wb3NpdGVGaWx0ZXIpIHJldHVybiAhMTtcbiAgICByZXR1cm4gITA7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jYW5vbmlmeUZpbHRlcihlKSB7XG4gICAgaWYgKGUgaW5zdGFuY2VvZiBGaWVsZEZpbHRlcikgXG4gICAgLy8gVE9ETyhiLzI5MTgzMTY1KTogVGVjaG5pY2FsbHksIHRoaXMgd29uJ3QgYmUgdW5pcXVlIGlmIHR3byB2YWx1ZXMgaGF2ZVxuICAgIC8vIHRoZSBzYW1lIGRlc2NyaXB0aW9uLCBzdWNoIGFzIHRoZSBpbnQgMyBhbmQgdGhlIHN0cmluZyBcIjNcIi4gU28gd2Ugc2hvdWxkXG4gICAgLy8gYWRkIHRoZSB0eXBlcyBpbiBoZXJlIHNvbWVob3csIHRvby5cbiAgICByZXR1cm4gZS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSArIGUub3AudG9TdHJpbmcoKSArIGNhbm9uaWNhbElkKGUudmFsdWUpO1xuICAgIGlmIChfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVySXNGbGF0Q29uanVuY3Rpb24oZSkpIFxuICAgIC8vIE9sZGVyIFNESyB2ZXJzaW9ucyB1c2UgYW4gaW1wbGljaXQgQU5EIG9wZXJhdGlvbiBiZXR3ZWVuIHRoZWlyIGZpbHRlcnMuXG4gICAgLy8gSW4gdGhlIG5ldyBTREsgdmVyc2lvbnMsIHRoZSBkZXZlbG9wZXIgbWF5IHVzZSBhbiBleHBsaWNpdCBBTkQgZmlsdGVyLlxuICAgIC8vIFRvIHN0YXkgY29uc2lzdGVudCB3aXRoIHRoZSBvbGQgdXNhZ2VzLCB3ZSBhZGQgYSBzcGVjaWFsIGNhc2UgdG8gZW5zdXJlXG4gICAgLy8gdGhlIGNhbm9uaWNhbCBJRCBmb3IgdGhlc2UgdHdvIGFyZSB0aGUgc2FtZS4gRm9yIGV4YW1wbGU6XG4gICAgLy8gYGNvbC53aGVyZUVxdWFscyhcImFcIiwgMSkud2hlcmVFcXVhbHMoXCJiXCIsIDIpYCBzaG91bGQgaGF2ZSB0aGUgc2FtZVxuICAgIC8vIGNhbm9uaWNhbCBJRCBhcyBgY29sLndoZXJlKGFuZChlcXVhbHMoXCJhXCIsMSksIGVxdWFscyhcImJcIiwyKSkpYC5cbiAgICByZXR1cm4gZS5maWx0ZXJzLm1hcCgoZSA9PiBfX1BSSVZBVEVfY2Fub25pZnlGaWx0ZXIoZSkpKS5qb2luKFwiLFwiKTtcbiAgICB7XG4gICAgICAgIC8vIGZpbHRlciBpbnN0YW5jZW9mIENvbXBvc2l0ZUZpbHRlclxuICAgICAgICBjb25zdCB0ID0gZS5maWx0ZXJzLm1hcCgoZSA9PiBfX1BSSVZBVEVfY2Fub25pZnlGaWx0ZXIoZSkpKS5qb2luKFwiLFwiKTtcbiAgICAgICAgcmV0dXJuIGAke2Uub3B9KCR7dH0pYDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9maWx0ZXJFcXVhbHMoZSwgdCkge1xuICAgIHJldHVybiBlIGluc3RhbmNlb2YgRmllbGRGaWx0ZXIgPyBmdW5jdGlvbiBfX1BSSVZBVEVfZmllbGRGaWx0ZXJFcXVhbHMoZSwgdCkge1xuICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyICYmIGUub3AgPT09IHQub3AgJiYgZS5maWVsZC5pc0VxdWFsKHQuZmllbGQpICYmIF9fUFJJVkFURV92YWx1ZUVxdWFscyhlLnZhbHVlLCB0LnZhbHVlKTtcbiAgICB9KGUsIHQpIDogZSBpbnN0YW5jZW9mIENvbXBvc2l0ZUZpbHRlciA/IGZ1bmN0aW9uIF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJFcXVhbHMoZSwgdCkge1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIENvbXBvc2l0ZUZpbHRlciAmJiBlLm9wID09PSB0Lm9wICYmIGUuZmlsdGVycy5sZW5ndGggPT09IHQuZmlsdGVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBlLmZpbHRlcnMucmVkdWNlKCgoZSwgbiwgcikgPT4gZSAmJiBfX1BSSVZBVEVfZmlsdGVyRXF1YWxzKG4sIHQuZmlsdGVyc1tyXSkpLCAhMCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICAvKipcbiAqIFJldHVybnMgYSBuZXcgY29tcG9zaXRlIGZpbHRlciB0aGF0IGNvbnRhaW5zIGFsbCBmaWx0ZXIgZnJvbVxuICogYGNvbXBvc2l0ZUZpbHRlcmAgcGx1cyBhbGwgdGhlIGdpdmVuIGZpbHRlcnMgaW4gYG90aGVyRmlsdGVyc2AuXG4gKi8gKGUsIHQpIDogdm9pZCBmYWlsKCk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJXaXRoQWRkZWRGaWx0ZXJzKGUsIHQpIHtcbiAgICBjb25zdCBuID0gZS5maWx0ZXJzLmNvbmNhdCh0KTtcbiAgICByZXR1cm4gQ29tcG9zaXRlRmlsdGVyLmNyZWF0ZShuLCBlLm9wKTtcbn1cblxuLyoqIFJldHVybnMgYSBkZWJ1ZyBkZXNjcmlwdGlvbiBmb3IgYGZpbHRlcmAuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9zdHJpbmdpZnlGaWx0ZXIoZSkge1xuICAgIHJldHVybiBlIGluc3RhbmNlb2YgRmllbGRGaWx0ZXIgPyBmdW5jdGlvbiBfX1BSSVZBVEVfc3RyaW5naWZ5RmllbGRGaWx0ZXIoZSkge1xuICAgICAgICByZXR1cm4gYCR7ZS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKX0gJHtlLm9wfSAke2Nhbm9uaWNhbElkKGUudmFsdWUpfWA7XG4gICAgfVxuICAgIC8qKiBGaWx0ZXIgdGhhdCBtYXRjaGVzIG9uIGtleSBmaWVsZHMgKGkuZS4gJ19fbmFtZV9fJykuICovIChlKSA6IGUgaW5zdGFuY2VvZiBDb21wb3NpdGVGaWx0ZXIgPyBmdW5jdGlvbiBfX1BSSVZBVEVfc3RyaW5naWZ5Q29tcG9zaXRlRmlsdGVyKGUpIHtcbiAgICAgICAgcmV0dXJuIGUub3AudG9TdHJpbmcoKSArIFwiIHtcIiArIGUuZ2V0RmlsdGVycygpLm1hcChfX1BSSVZBVEVfc3RyaW5naWZ5RmlsdGVyKS5qb2luKFwiICxcIikgKyBcIn1cIjtcbiAgICB9KGUpIDogXCJGaWx0ZXJcIjtcbn1cblxuY2xhc3MgX19QUklWQVRFX0tleUZpZWxkRmlsdGVyIGV4dGVuZHMgRmllbGRGaWx0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4pIHtcbiAgICAgICAgc3VwZXIoZSwgdCwgbiksIHRoaXMua2V5ID0gRG9jdW1lbnRLZXkuZnJvbU5hbWUobi5yZWZlcmVuY2VWYWx1ZSk7XG4gICAgfVxuICAgIG1hdGNoZXMoZSkge1xuICAgICAgICBjb25zdCB0ID0gRG9jdW1lbnRLZXkuY29tcGFyYXRvcihlLmtleSwgdGhpcy5rZXkpO1xuICAgICAgICByZXR1cm4gdGhpcy5tYXRjaGVzQ29tcGFyaXNvbih0KTtcbiAgICB9XG59XG5cbi8qKiBGaWx0ZXIgdGhhdCBtYXRjaGVzIG9uIGtleSBmaWVsZHMgd2l0aGluIGFuIGFycmF5LiAqLyBjbGFzcyBfX1BSSVZBVEVfS2V5RmllbGRJbkZpbHRlciBleHRlbmRzIEZpZWxkRmlsdGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKGUsIFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyAsIHQpLCB0aGlzLmtleXMgPSBfX1BSSVZBVEVfZXh0cmFjdERvY3VtZW50S2V5c0Zyb21BcnJheVZhbHVlKFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyAsIHQpO1xuICAgIH1cbiAgICBtYXRjaGVzKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMua2V5cy5zb21lKCh0ID0+IHQuaXNFcXVhbChlLmtleSkpKTtcbiAgICB9XG59XG5cbi8qKiBGaWx0ZXIgdGhhdCBtYXRjaGVzIG9uIGtleSBmaWVsZHMgbm90IHByZXNlbnQgd2l0aGluIGFuIGFycmF5LiAqLyBjbGFzcyBfX1BSSVZBVEVfS2V5RmllbGROb3RJbkZpbHRlciBleHRlbmRzIEZpZWxkRmlsdGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKGUsIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovICwgdCksIHRoaXMua2V5cyA9IF9fUFJJVkFURV9leHRyYWN0RG9jdW1lbnRLZXlzRnJvbUFycmF5VmFsdWUoXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gLCB0KTtcbiAgICB9XG4gICAgbWF0Y2hlcyhlKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5rZXlzLnNvbWUoKHQgPT4gdC5pc0VxdWFsKGUua2V5KSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2V4dHJhY3REb2N1bWVudEtleXNGcm9tQXJyYXlWYWx1ZShlLCB0KSB7XG4gICAgdmFyIG47XG4gICAgcmV0dXJuICgobnVsbCA9PT0gKG4gPSB0LmFycmF5VmFsdWUpIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4udmFsdWVzKSB8fCBbXSkubWFwKChlID0+IERvY3VtZW50S2V5LmZyb21OYW1lKGUucmVmZXJlbmNlVmFsdWUpKSk7XG59XG5cbi8qKiBBIEZpbHRlciB0aGF0IGltcGxlbWVudHMgdGhlIGFycmF5LWNvbnRhaW5zIG9wZXJhdG9yLiAqLyBjbGFzcyBfX1BSSVZBVEVfQXJyYXlDb250YWluc0ZpbHRlciBleHRlbmRzIEZpZWxkRmlsdGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKGUsIFwiYXJyYXktY29udGFpbnNcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOUyAqLyAsIHQpO1xuICAgIH1cbiAgICBtYXRjaGVzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIGlzQXJyYXkodCkgJiYgX19QUklWQVRFX2FycmF5VmFsdWVDb250YWlucyh0LmFycmF5VmFsdWUsIHRoaXMudmFsdWUpO1xuICAgIH1cbn1cblxuLyoqIEEgRmlsdGVyIHRoYXQgaW1wbGVtZW50cyB0aGUgSU4gb3BlcmF0b3IuICovIGNsYXNzIF9fUFJJVkFURV9JbkZpbHRlciBleHRlbmRzIEZpZWxkRmlsdGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKGUsIFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyAsIHQpO1xuICAgIH1cbiAgICBtYXRjaGVzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHQgJiYgX19QUklWQVRFX2FycmF5VmFsdWVDb250YWlucyh0aGlzLnZhbHVlLmFycmF5VmFsdWUsIHQpO1xuICAgIH1cbn1cblxuLyoqIEEgRmlsdGVyIHRoYXQgaW1wbGVtZW50cyB0aGUgbm90LWluIG9wZXJhdG9yLiAqLyBjbGFzcyBfX1BSSVZBVEVfTm90SW5GaWx0ZXIgZXh0ZW5kcyBGaWVsZEZpbHRlciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBzdXBlcihlLCBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyAsIHQpO1xuICAgIH1cbiAgICBtYXRjaGVzKGUpIHtcbiAgICAgICAgaWYgKF9fUFJJVkFURV9hcnJheVZhbHVlQ29udGFpbnModGhpcy52YWx1ZS5hcnJheVZhbHVlLCB7XG4gICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgIH0pKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IHQgPSBlLmRhdGEuZmllbGQodGhpcy5maWVsZCk7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0ICYmICFfX1BSSVZBVEVfYXJyYXlWYWx1ZUNvbnRhaW5zKHRoaXMudmFsdWUuYXJyYXlWYWx1ZSwgdCk7XG4gICAgfVxufVxuXG4vKiogQSBGaWx0ZXIgdGhhdCBpbXBsZW1lbnRzIHRoZSBhcnJheS1jb250YWlucy1hbnkgb3BlcmF0b3IuICovIGNsYXNzIF9fUFJJVkFURV9BcnJheUNvbnRhaW5zQW55RmlsdGVyIGV4dGVuZHMgRmllbGRGaWx0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgc3VwZXIoZSwgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkgKi8gLCB0KTtcbiAgICB9XG4gICAgbWF0Y2hlcyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLmRhdGEuZmllbGQodGhpcy5maWVsZCk7XG4gICAgICAgIHJldHVybiAhKCFpc0FycmF5KHQpIHx8ICF0LmFycmF5VmFsdWUudmFsdWVzKSAmJiB0LmFycmF5VmFsdWUudmFsdWVzLnNvbWUoKGUgPT4gX19QUklWQVRFX2FycmF5VmFsdWVDb250YWlucyh0aGlzLnZhbHVlLmFycmF5VmFsdWUsIGUpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xuY2xhc3MgX19QUklWQVRFX1RhcmdldEltcGwge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQgPSBudWxsLCBuID0gW10sIHIgPSBbXSwgaSA9IG51bGwsIHMgPSBudWxsLCBvID0gbnVsbCkge1xuICAgICAgICB0aGlzLnBhdGggPSBlLCB0aGlzLmNvbGxlY3Rpb25Hcm91cCA9IHQsIHRoaXMub3JkZXJCeSA9IG4sIHRoaXMuZmlsdGVycyA9IHIsIHRoaXMubGltaXQgPSBpLCBcbiAgICAgICAgdGhpcy5zdGFydEF0ID0gcywgdGhpcy5lbmRBdCA9IG8sIHRoaXMudWUgPSBudWxsO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbml0aWFsaXplcyBhIFRhcmdldCB3aXRoIGEgcGF0aCBhbmQgb3B0aW9uYWwgYWRkaXRpb25hbCBxdWVyeSBjb25zdHJhaW50cy5cbiAqIFBhdGggbXVzdCBjdXJyZW50bHkgYmUgZW1wdHkgaWYgdGhpcyBpcyBhIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcnkuXG4gKlxuICogTk9URTogeW91IHNob3VsZCBhbHdheXMgY29uc3RydWN0IGBUYXJnZXRgIGZyb20gYFF1ZXJ5LnRvVGFyZ2V0YCBpbnN0ZWFkIG9mXG4gKiB1c2luZyB0aGlzIGZhY3RvcnkgbWV0aG9kLCBiZWNhdXNlIGBRdWVyeWAgcHJvdmlkZXMgYW4gaW1wbGljaXQgYG9yZGVyQnlgXG4gKiBwcm9wZXJ0eS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3VGFyZ2V0KGUsIHQgPSBudWxsLCBuID0gW10sIHIgPSBbXSwgaSA9IG51bGwsIHMgPSBudWxsLCBvID0gbnVsbCkge1xuICAgIHJldHVybiBuZXcgX19QUklWQVRFX1RhcmdldEltcGwoZSwgdCwgbiwgciwgaSwgcywgbyk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jYW5vbmlmeVRhcmdldChlKSB7XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgaWYgKG51bGwgPT09IHQudWUpIHtcbiAgICAgICAgbGV0IGUgPSB0LnBhdGguY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgICAgIG51bGwgIT09IHQuY29sbGVjdGlvbkdyb3VwICYmIChlICs9IFwifGNnOlwiICsgdC5jb2xsZWN0aW9uR3JvdXApLCBlICs9IFwifGY6XCIsIGUgKz0gdC5maWx0ZXJzLm1hcCgoZSA9PiBfX1BSSVZBVEVfY2Fub25pZnlGaWx0ZXIoZSkpKS5qb2luKFwiLFwiKSwgXG4gICAgICAgIGUgKz0gXCJ8b2I6XCIsIGUgKz0gdC5vcmRlckJ5Lm1hcCgoZSA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfY2Fub25pZnlPcmRlckJ5KGUpIHtcbiAgICAgICAgICAgIC8vIFRPRE8oYi8yOTE4MzE2NSk6IE1ha2UgdGhpcyBjb2xsaXNpb24gcm9idXN0LlxuICAgICAgICAgICAgcmV0dXJuIGUuZmllbGQuY2Fub25pY2FsU3RyaW5nKCkgKyBlLmRpcjtcbiAgICAgICAgfShlKSkpLmpvaW4oXCIsXCIpLCBfX1BSSVZBVEVfaXNOdWxsT3JVbmRlZmluZWQodC5saW1pdCkgfHwgKGUgKz0gXCJ8bDpcIiwgZSArPSB0LmxpbWl0KSwgXG4gICAgICAgIHQuc3RhcnRBdCAmJiAoZSArPSBcInxsYjpcIiwgZSArPSB0LnN0YXJ0QXQuaW5jbHVzaXZlID8gXCJiOlwiIDogXCJhOlwiLCBlICs9IHQuc3RhcnRBdC5wb3NpdGlvbi5tYXAoKGUgPT4gY2Fub25pY2FsSWQoZSkpKS5qb2luKFwiLFwiKSksIFxuICAgICAgICB0LmVuZEF0ICYmIChlICs9IFwifHViOlwiLCBlICs9IHQuZW5kQXQuaW5jbHVzaXZlID8gXCJhOlwiIDogXCJiOlwiLCBlICs9IHQuZW5kQXQucG9zaXRpb24ubWFwKChlID0+IGNhbm9uaWNhbElkKGUpKSkuam9pbihcIixcIikpLCBcbiAgICAgICAgdC51ZSA9IGU7XG4gICAgfVxuICAgIHJldHVybiB0LnVlO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdGFyZ2V0RXF1YWxzKGUsIHQpIHtcbiAgICBpZiAoZS5saW1pdCAhPT0gdC5saW1pdCkgcmV0dXJuICExO1xuICAgIGlmIChlLm9yZGVyQnkubGVuZ3RoICE9PSB0Lm9yZGVyQnkubGVuZ3RoKSByZXR1cm4gITE7XG4gICAgZm9yIChsZXQgbiA9IDA7IG4gPCBlLm9yZGVyQnkubGVuZ3RoOyBuKyspIGlmICghX19QUklWQVRFX29yZGVyQnlFcXVhbHMoZS5vcmRlckJ5W25dLCB0Lm9yZGVyQnlbbl0pKSByZXR1cm4gITE7XG4gICAgaWYgKGUuZmlsdGVycy5sZW5ndGggIT09IHQuZmlsdGVycy5sZW5ndGgpIHJldHVybiAhMTtcbiAgICBmb3IgKGxldCBuID0gMDsgbiA8IGUuZmlsdGVycy5sZW5ndGg7IG4rKykgaWYgKCFfX1BSSVZBVEVfZmlsdGVyRXF1YWxzKGUuZmlsdGVyc1tuXSwgdC5maWx0ZXJzW25dKSkgcmV0dXJuICExO1xuICAgIHJldHVybiBlLmNvbGxlY3Rpb25Hcm91cCA9PT0gdC5jb2xsZWN0aW9uR3JvdXAgJiYgKCEhZS5wYXRoLmlzRXF1YWwodC5wYXRoKSAmJiAoISFfX1BSSVZBVEVfYm91bmRFcXVhbHMoZS5zdGFydEF0LCB0LnN0YXJ0QXQpICYmIF9fUFJJVkFURV9ib3VuZEVxdWFscyhlLmVuZEF0LCB0LmVuZEF0KSkpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdGFyZ2V0SXNEb2N1bWVudFRhcmdldChlKSB7XG4gICAgcmV0dXJuIERvY3VtZW50S2V5LmlzRG9jdW1lbnRLZXkoZS5wYXRoKSAmJiBudWxsID09PSBlLmNvbGxlY3Rpb25Hcm91cCAmJiAwID09PSBlLmZpbHRlcnMubGVuZ3RoO1xufVxuXG4vKiogUmV0dXJucyB0aGUgZmllbGQgZmlsdGVycyB0aGF0IHRhcmdldCB0aGUgZ2l2ZW4gZmllbGQgcGF0aC4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3RhcmdldEdldEZpZWxkRmlsdGVyc0ZvclBhdGgoZSwgdCkge1xuICAgIHJldHVybiBlLmZpbHRlcnMuZmlsdGVyKChlID0+IGUgaW5zdGFuY2VvZiBGaWVsZEZpbHRlciAmJiBlLmZpZWxkLmlzRXF1YWwodCkpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSB2YWx1ZXMgdGhhdCBhcmUgdXNlZCBpbiBBUlJBWV9DT05UQUlOUyBvciBBUlJBWV9DT05UQUlOU19BTllcbiAqIGZpbHRlcnMuIFJldHVybnMgYG51bGxgIGlmIHRoZXJlIGFyZSBubyBzdWNoIGZpbHRlcnMuXG4gKi9cbi8qKlxuICogUmV0dXJucyB0aGUgdmFsdWUgdG8gdXNlIGFzIHRoZSBsb3dlciBib3VuZCBmb3IgYXNjZW5kaW5nIGluZGV4IHNlZ21lbnQgYXRcbiAqIHRoZSBwcm92aWRlZCBgZmllbGRQYXRoYCAob3IgdGhlIHVwcGVyIGJvdW5kIGZvciBhbiBkZXNjZW5kaW5nIHNlZ21lbnQpLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfdGFyZ2V0R2V0QXNjZW5kaW5nQm91bmQoZSwgdCwgbikge1xuICAgIGxldCByID0gaWUsIGkgPSAhMDtcbiAgICAvLyBQcm9jZXNzIGFsbCBmaWx0ZXJzIHRvIGZpbmQgYSB2YWx1ZSBmb3IgdGhlIGN1cnJlbnQgZmllbGQgc2VnbWVudFxuICAgIGZvciAoY29uc3QgbiBvZiBfX1BSSVZBVEVfdGFyZ2V0R2V0RmllbGRGaWx0ZXJzRm9yUGF0aChlLCB0KSkge1xuICAgICAgICBsZXQgZSA9IGllLCB0ID0gITA7XG4gICAgICAgIHN3aXRjaCAobi5vcCkge1xuICAgICAgICAgIGNhc2UgXCI8XCIgLyogT3BlcmF0b3IuTEVTU19USEFOICovIDpcbiAgICAgICAgICBjYXNlIFwiPD1cIiAvKiBPcGVyYXRvci5MRVNTX1RIQU5fT1JfRVFVQUwgKi8gOlxuICAgICAgICAgICAgZSA9IF9fUFJJVkFURV92YWx1ZXNHZXRMb3dlckJvdW5kKG4udmFsdWUpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiPT1cIiAvKiBPcGVyYXRvci5FUVVBTCAqLyA6XG4gICAgICAgICAgY2FzZSBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gOlxuICAgICAgICAgIGNhc2UgXCI+PVwiIC8qIE9wZXJhdG9yLkdSRUFURVJfVEhBTl9PUl9FUVVBTCAqLyA6XG4gICAgICAgICAgICBlID0gbi52YWx1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIj5cIiAvKiBPcGVyYXRvci5HUkVBVEVSX1RIQU4gKi8gOlxuICAgICAgICAgICAgZSA9IG4udmFsdWUsIHQgPSAhMTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovIDpcbiAgICAgICAgICBjYXNlIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovIDpcbiAgICAgICAgICAgIGUgPSBpZTtcbiAvLyBSZW1haW5pbmcgZmlsdGVycyBjYW5ub3QgYmUgdXNlZCBhcyBsb3dlciBib3VuZHMuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICBfX1BSSVZBVEVfbG93ZXJCb3VuZENvbXBhcmUoe1xuICAgICAgICAgICAgdmFsdWU6IHIsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGlcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdmFsdWU6IGUsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRcbiAgICAgICAgfSkgPCAwICYmIChyID0gZSwgaSA9IHQpO1xuICAgIH1cbiAgICAvLyBJZiB0aGVyZSBpcyBhbiBhZGRpdGlvbmFsIGJvdW5kLCBjb21wYXJlIHRoZSB2YWx1ZXMgYWdhaW5zdCB0aGUgZXhpc3RpbmdcbiAgICAvLyByYW5nZSB0byBzZWUgaWYgd2UgY2FuIG5hcnJvdyB0aGUgc2NvcGUuXG4gICAgICAgIGlmIChudWxsICE9PSBuKSBmb3IgKGxldCBzID0gMDsgcyA8IGUub3JkZXJCeS5sZW5ndGg7ICsrcykge1xuICAgICAgICBpZiAoZS5vcmRlckJ5W3NdLmZpZWxkLmlzRXF1YWwodCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuLnBvc2l0aW9uW3NdO1xuICAgICAgICAgICAgX19QUklWQVRFX2xvd2VyQm91bmRDb21wYXJlKHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogcixcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGlcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogZSxcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IG4uaW5jbHVzaXZlXG4gICAgICAgICAgICB9KSA8IDAgJiYgKHIgPSBlLCBpID0gbi5pbmNsdXNpdmUpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IHIsXG4gICAgICAgIGluY2x1c2l2ZTogaVxuICAgIH07XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgdmFsdWUgdG8gdXNlIGFzIHRoZSB1cHBlciBib3VuZCBmb3IgYXNjZW5kaW5nIGluZGV4IHNlZ21lbnQgYXRcbiAqIHRoZSBwcm92aWRlZCBgZmllbGRQYXRoYCAob3IgdGhlIGxvd2VyIGJvdW5kIGZvciBhIGRlc2NlbmRpbmcgc2VnbWVudCkuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3RhcmdldEdldERlc2NlbmRpbmdCb3VuZChlLCB0LCBuKSB7XG4gICAgbGV0IHIgPSByZSwgaSA9ICEwO1xuICAgIC8vIFByb2Nlc3MgYWxsIGZpbHRlcnMgdG8gZmluZCBhIHZhbHVlIGZvciB0aGUgY3VycmVudCBmaWVsZCBzZWdtZW50XG4gICAgZm9yIChjb25zdCBuIG9mIF9fUFJJVkFURV90YXJnZXRHZXRGaWVsZEZpbHRlcnNGb3JQYXRoKGUsIHQpKSB7XG4gICAgICAgIGxldCBlID0gcmUsIHQgPSAhMDtcbiAgICAgICAgc3dpdGNoIChuLm9wKSB7XG4gICAgICAgICAgY2FzZSBcIj49XCIgLyogT3BlcmF0b3IuR1JFQVRFUl9USEFOX09SX0VRVUFMICovIDpcbiAgICAgICAgICBjYXNlIFwiPlwiIC8qIE9wZXJhdG9yLkdSRUFURVJfVEhBTiAqLyA6XG4gICAgICAgICAgICBlID0gX19QUklWQVRFX3ZhbHVlc0dldFVwcGVyQm91bmQobi52YWx1ZSksIHQgPSAhMTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIj09XCIgLyogT3BlcmF0b3IuRVFVQUwgKi8gOlxuICAgICAgICAgIGNhc2UgXCJpblwiIC8qIE9wZXJhdG9yLklOICovIDpcbiAgICAgICAgICBjYXNlIFwiPD1cIiAvKiBPcGVyYXRvci5MRVNTX1RIQU5fT1JfRVFVQUwgKi8gOlxuICAgICAgICAgICAgZSA9IG4udmFsdWU7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCI8XCIgLyogT3BlcmF0b3IuTEVTU19USEFOICovIDpcbiAgICAgICAgICAgIGUgPSBuLnZhbHVlLCB0ID0gITE7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLyA6XG4gICAgICAgICAgY2FzZSBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyA6XG4gICAgICAgICAgICBlID0gcmU7XG4gLy8gUmVtYWluaW5nIGZpbHRlcnMgY2Fubm90IGJlIHVzZWQgYXMgdXBwZXIgYm91bmRzLlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgX19QUklWQVRFX3VwcGVyQm91bmRDb21wYXJlKHtcbiAgICAgICAgICAgIHZhbHVlOiByLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiBpXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHZhbHVlOiBlLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0XG4gICAgICAgIH0pID4gMCAmJiAociA9IGUsIGkgPSB0KTtcbiAgICB9XG4gICAgLy8gSWYgdGhlcmUgaXMgYW4gYWRkaXRpb25hbCBib3VuZCwgY29tcGFyZSB0aGUgdmFsdWVzIGFnYWluc3QgdGhlIGV4aXN0aW5nXG4gICAgLy8gcmFuZ2UgdG8gc2VlIGlmIHdlIGNhbiBuYXJyb3cgdGhlIHNjb3BlLlxuICAgICAgICBpZiAobnVsbCAhPT0gbikgZm9yIChsZXQgcyA9IDA7IHMgPCBlLm9yZGVyQnkubGVuZ3RoOyArK3MpIHtcbiAgICAgICAgaWYgKGUub3JkZXJCeVtzXS5maWVsZC5pc0VxdWFsKHQpKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gbi5wb3NpdGlvbltzXTtcbiAgICAgICAgICAgIF9fUFJJVkFURV91cHBlckJvdW5kQ29tcGFyZSh7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHIsXG4gICAgICAgICAgICAgICAgaW5jbHVzaXZlOiBpXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IGUsXG4gICAgICAgICAgICAgICAgaW5jbHVzaXZlOiBuLmluY2x1c2l2ZVxuICAgICAgICAgICAgfSkgPiAwICYmIChyID0gZSwgaSA9IG4uaW5jbHVzaXZlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiByLFxuICAgICAgICBpbmNsdXNpdmU6IGlcbiAgICB9O1xufVxuXG4vKiogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHNlZ21lbnRzIG9mIGEgcGVyZmVjdCBpbmRleCBmb3IgdGhpcyB0YXJnZXQuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBRdWVyeSBlbmNhcHN1bGF0ZXMgYWxsIHRoZSBxdWVyeSBhdHRyaWJ1dGVzIHdlIHN1cHBvcnQgaW4gdGhlIFNESy4gSXQgY2FuXG4gKiBiZSBydW4gYWdhaW5zdCB0aGUgTG9jYWxTdG9yZSwgYXMgd2VsbCBhcyBiZSBjb252ZXJ0ZWQgdG8gYSBgVGFyZ2V0YCB0b1xuICogcXVlcnkgdGhlIFJlbW90ZVN0b3JlIHJlc3VsdHMuXG4gKlxuICogVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAqL1xuY2xhc3MgX19QUklWQVRFX1F1ZXJ5SW1wbCB7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZXMgYSBRdWVyeSB3aXRoIGEgcGF0aCBhbmQgb3B0aW9uYWwgYWRkaXRpb25hbCBxdWVyeSBjb25zdHJhaW50cy5cbiAgICAgKiBQYXRoIG11c3QgY3VycmVudGx5IGJlIGVtcHR5IGlmIHRoaXMgaXMgYSBjb2xsZWN0aW9uIGdyb3VwIHF1ZXJ5LlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIHQgPSBudWxsLCBuID0gW10sIHIgPSBbXSwgaSA9IG51bGwsIHMgPSBcIkZcIiAvKiBMaW1pdFR5cGUuRmlyc3QgKi8gLCBvID0gbnVsbCwgXyA9IG51bGwpIHtcbiAgICAgICAgdGhpcy5wYXRoID0gZSwgdGhpcy5jb2xsZWN0aW9uR3JvdXAgPSB0LCB0aGlzLmV4cGxpY2l0T3JkZXJCeSA9IG4sIHRoaXMuZmlsdGVycyA9IHIsIFxuICAgICAgICB0aGlzLmxpbWl0ID0gaSwgdGhpcy5saW1pdFR5cGUgPSBzLCB0aGlzLnN0YXJ0QXQgPSBvLCB0aGlzLmVuZEF0ID0gXywgdGhpcy5jZSA9IG51bGwsIFxuICAgICAgICAvLyBUaGUgY29ycmVzcG9uZGluZyBgVGFyZ2V0YCBvZiB0aGlzIGBRdWVyeWAgaW5zdGFuY2UsIGZvciB1c2Ugd2l0aFxuICAgICAgICAvLyBub24tYWdncmVnYXRlIHF1ZXJpZXMuXG4gICAgICAgIHRoaXMubGUgPSBudWxsLCBcbiAgICAgICAgLy8gVGhlIGNvcnJlc3BvbmRpbmcgYFRhcmdldGAgb2YgdGhpcyBgUXVlcnlgIGluc3RhbmNlLCBmb3IgdXNlIHdpdGhcbiAgICAgICAgLy8gYWdncmVnYXRlIHF1ZXJpZXMuIFVubGlrZSB0YXJnZXRzIGZvciBub24tYWdncmVnYXRlIHF1ZXJpZXMsXG4gICAgICAgIC8vIGFnZ3JlZ2F0ZSBxdWVyeSB0YXJnZXRzIGRvIG5vdCBjb250YWluIG5vcm1hbGl6ZWQgb3JkZXItYnlzLCB0aGV5IG9ubHlcbiAgICAgICAgLy8gY29udGFpbiBleHBsaWNpdCBvcmRlci1ieXMuXG4gICAgICAgIHRoaXMuaGUgPSBudWxsLCB0aGlzLnN0YXJ0QXQsIHRoaXMuZW5kQXQ7XG4gICAgfVxufVxuXG4vKiogQ3JlYXRlcyBhIG5ldyBRdWVyeSBpbnN0YW5jZSB3aXRoIHRoZSBvcHRpb25zIHByb3ZpZGVkLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3UXVlcnkoZSwgdCwgbiwgciwgaSwgcywgbywgXykge1xuICAgIHJldHVybiBuZXcgX19QUklWQVRFX1F1ZXJ5SW1wbChlLCB0LCBuLCByLCBpLCBzLCBvLCBfKTtcbn1cblxuLyoqIENyZWF0ZXMgYSBuZXcgUXVlcnkgZm9yIGEgcXVlcnkgdGhhdCBtYXRjaGVzIGFsbCBkb2N1bWVudHMgYXQgYHBhdGhgICovIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdRdWVyeUZvclBhdGgoZSkge1xuICAgIHJldHVybiBuZXcgX19QUklWQVRFX1F1ZXJ5SW1wbChlKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gY29udmVydCBhIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcnkgaW50byBhIGNvbGxlY3Rpb24gcXVlcnkgYXQgYVxuICogc3BlY2lmaWMgcGF0aC4gVGhpcyBpcyB1c2VkIHdoZW4gZXhlY3V0aW5nIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcmllcywgc2luY2VcbiAqIHdlIGhhdmUgdG8gc3BsaXQgdGhlIHF1ZXJ5IGludG8gYSBzZXQgb2YgY29sbGVjdGlvbiBxdWVyaWVzIGF0IG11bHRpcGxlXG4gKiBwYXRocy5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBxdWVyeSBkb2VzIG5vdCBzcGVjaWZ5IGFueSBxdWVyeSBjb25zdHJhaW50cyB0aGF0XG4gKiBjb3VsZCByZW1vdmUgcmVzdWx0cy5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX3F1ZXJ5TWF0Y2hlc0FsbERvY3VtZW50cyhlKSB7XG4gICAgcmV0dXJuIDAgPT09IGUuZmlsdGVycy5sZW5ndGggJiYgbnVsbCA9PT0gZS5saW1pdCAmJiBudWxsID09IGUuc3RhcnRBdCAmJiBudWxsID09IGUuZW5kQXQgJiYgKDAgPT09IGUuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCB8fCAxID09PSBlLmV4cGxpY2l0T3JkZXJCeS5sZW5ndGggJiYgZS5leHBsaWNpdE9yZGVyQnlbMF0uZmllbGQuaXNLZXlGaWVsZCgpKTtcbn1cblxuLy8gUmV0dXJucyB0aGUgc29ydGVkIHNldCBvZiBpbmVxdWFsaXR5IGZpbHRlciBmaWVsZHMgdXNlZCBpbiB0aGlzIHF1ZXJ5LlxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHF1ZXJ5IG1hdGNoZXMgYSBjb2xsZWN0aW9uIGdyb3VwIHJhdGhlciB0aGFuIGEgc3BlY2lmaWNcbiAqIGNvbGxlY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9pc0NvbGxlY3Rpb25Hcm91cFF1ZXJ5KGUpIHtcbiAgICByZXR1cm4gbnVsbCAhPT0gZS5jb2xsZWN0aW9uR3JvdXA7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgbm9ybWFsaXplZCBvcmRlci1ieSBjb25zdHJhaW50IHRoYXQgaXMgdXNlZCB0byBleGVjdXRlIHRoZSBRdWVyeSxcbiAqIHdoaWNoIGNhbiBiZSBkaWZmZXJlbnQgZnJvbSB0aGUgb3JkZXItYnkgY29uc3RyYWludHMgdGhlIHVzZXIgcHJvdmlkZWQgKGUuZy5cbiAqIHRoZSBTREsgYW5kIGJhY2tlbmQgYWx3YXlzIG9yZGVycyBieSBgX19uYW1lX19gKS4gVGhlIG5vcm1hbGl6ZWQgb3JkZXItYnlcbiAqIGluY2x1ZGVzIGltcGxpY2l0IG9yZGVyLWJ5cyBpbiBhZGRpdGlvbiB0byB0aGUgZXhwbGljaXQgdXNlciBwcm92aWRlZFxuICogb3JkZXItYnlzLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9xdWVyeU5vcm1hbGl6ZWRPcmRlckJ5KGUpIHtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICBpZiAobnVsbCA9PT0gdC5jZSkge1xuICAgICAgICB0LmNlID0gW107XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgU2V0O1xuICAgICAgICAvLyBBbnkgZXhwbGljaXQgb3JkZXIgYnkgZmllbGRzIHNob3VsZCBiZSBhZGRlZCBhcyBpcy5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdC5leHBsaWNpdE9yZGVyQnkpIHQuY2UucHVzaChuKSwgZS5hZGQobi5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSk7XG4gICAgICAgIC8vIFRoZSBvcmRlciBvZiB0aGUgaW1wbGljaXQgb3JkZXJpbmcgYWx3YXlzIG1hdGNoZXMgdGhlIGxhc3QgZXhwbGljaXQgb3JkZXIgYnkuXG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHQuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCA+IDAgPyB0LmV4cGxpY2l0T3JkZXJCeVt0LmV4cGxpY2l0T3JkZXJCeS5sZW5ndGggLSAxXS5kaXIgOiBcImFzY1wiIC8qIERpcmVjdGlvbi5BU0NFTkRJTkcgKi8gLCByID0gZnVuY3Rpb24gX19QUklWQVRFX2dldEluZXF1YWxpdHlGaWx0ZXJGaWVsZHMoZSkge1xuICAgICAgICAgICAgbGV0IHQgPSBuZXcgU29ydGVkU2V0KEZpZWxkUGF0aCQxLmNvbXBhcmF0b3IpO1xuICAgICAgICAgICAgcmV0dXJuIGUuZmlsdGVycy5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgICAgICBlLmdldEZsYXR0ZW5lZEZpbHRlcnMoKS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZS5pc0luZXF1YWxpdHkoKSAmJiAodCA9IHQuYWRkKGUuZmllbGQpKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSksIHQ7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBDcmVhdGVzIGEgbmV3IFF1ZXJ5IGZvciBhIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcnkgdGhhdCBtYXRjaGVzIGFsbCBkb2N1bWVudHNcbiAqIHdpdGhpbiB0aGUgcHJvdmlkZWQgY29sbGVjdGlvbiBncm91cC5cbiAqLyAodCk7XG4gICAgICAgIC8vIEFueSBpbmVxdWFsaXR5IGZpZWxkcyBub3QgZXhwbGljaXRseSBvcmRlcmVkIHNob3VsZCBiZSBpbXBsaWNpdGx5IG9yZGVyZWQgaW4gYSBsZXhpY29ncmFwaGljYWxcbiAgICAgICAgLy8gb3JkZXIuIFdoZW4gdGhlcmUgYXJlIG11bHRpcGxlIGluZXF1YWxpdHkgZmlsdGVycyBvbiB0aGUgc2FtZSBmaWVsZCwgdGhlIGZpZWxkIHNob3VsZCBiZSBhZGRlZFxuICAgICAgICAvLyBvbmx5IG9uY2UuXG4gICAgICAgIC8vIE5vdGU6IGBTb3J0ZWRTZXQ8RmllbGRQYXRoPmAgc29ydHMgdGhlIGtleSBmaWVsZCBiZWZvcmUgb3RoZXIgZmllbGRzLiBIb3dldmVyLCB3ZSB3YW50IHRoZSBrZXlcbiAgICAgICAgLy8gZmllbGQgdG8gYmUgc29ydGVkIGxhc3QuXG4gICAgICAgICAgICAgICAgci5mb3JFYWNoKChyID0+IHtcbiAgICAgICAgICAgIGUuaGFzKHIuY2Fub25pY2FsU3RyaW5nKCkpIHx8IHIuaXNLZXlGaWVsZCgpIHx8IHQuY2UucHVzaChuZXcgT3JkZXJCeShyLCBuKSk7XG4gICAgICAgIH0pKSwgXG4gICAgICAgIC8vIEFkZCB0aGUgZG9jdW1lbnQga2V5IGZpZWxkIHRvIHRoZSBsYXN0IGlmIGl0IGlzIG5vdCBleHBsaWNpdGx5IG9yZGVyZWQuXG4gICAgICAgIGUuaGFzKEZpZWxkUGF0aCQxLmtleUZpZWxkKCkuY2Fub25pY2FsU3RyaW5nKCkpIHx8IHQuY2UucHVzaChuZXcgT3JkZXJCeShGaWVsZFBhdGgkMS5rZXlGaWVsZCgpLCBuKSk7XG4gICAgfVxuICAgIHJldHVybiB0LmNlO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIHRoaXMgYFF1ZXJ5YCBpbnN0YW5jZSB0byBpdHMgY29ycmVzcG9uZGluZyBgVGFyZ2V0YCByZXByZXNlbnRhdGlvbi5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfcXVlcnlUb1RhcmdldChlKSB7XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgcmV0dXJuIHQubGUgfHwgKHQubGUgPSBfX1BSSVZBVEVfX3F1ZXJ5VG9UYXJnZXQodCwgX19QUklWQVRFX3F1ZXJ5Tm9ybWFsaXplZE9yZGVyQnkoZSkpKSwgXG4gICAgdC5sZTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyB0aGlzIGBRdWVyeWAgaW5zdGFuY2UgdG8gaXRzIGNvcnJlc3BvbmRpbmcgYFRhcmdldGAgcmVwcmVzZW50YXRpb24sXG4gKiBmb3IgdXNlIHdpdGhpbiBhbiBhZ2dyZWdhdGUgcXVlcnkuIFVubGlrZSB0YXJnZXRzIGZvciBub24tYWdncmVnYXRlIHF1ZXJpZXMsXG4gKiBhZ2dyZWdhdGUgcXVlcnkgdGFyZ2V0cyBkbyBub3QgY29udGFpbiBub3JtYWxpemVkIG9yZGVyLWJ5cywgdGhleSBvbmx5XG4gKiBjb250YWluIGV4cGxpY2l0IG9yZGVyLWJ5cy5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfcXVlcnlUb0FnZ3JlZ2F0ZVRhcmdldChlKSB7XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgcmV0dXJuIHQuaGUgfHwgKFxuICAgIC8vIERvIG5vdCBpbmNsdWRlIGltcGxpY2l0IG9yZGVyLWJ5cyBmb3IgYWdncmVnYXRlIHF1ZXJpZXMuXG4gICAgdC5oZSA9IF9fUFJJVkFURV9fcXVlcnlUb1RhcmdldCh0LCBlLmV4cGxpY2l0T3JkZXJCeSkpLCB0LmhlO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfX3F1ZXJ5VG9UYXJnZXQoZSwgdCkge1xuICAgIGlmIChcIkZcIiAvKiBMaW1pdFR5cGUuRmlyc3QgKi8gPT09IGUubGltaXRUeXBlKSByZXR1cm4gX19QUklWQVRFX25ld1RhcmdldChlLnBhdGgsIGUuY29sbGVjdGlvbkdyb3VwLCB0LCBlLmZpbHRlcnMsIGUubGltaXQsIGUuc3RhcnRBdCwgZS5lbmRBdCk7XG4gICAge1xuICAgICAgICAvLyBGbGlwIHRoZSBvcmRlckJ5IGRpcmVjdGlvbnMgc2luY2Ugd2Ugd2FudCB0aGUgbGFzdCByZXN1bHRzXG4gICAgICAgIHQgPSB0Lm1hcCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ID0gXCJkZXNjXCIgLyogRGlyZWN0aW9uLkRFU0NFTkRJTkcgKi8gPT09IGUuZGlyID8gXCJhc2NcIiAvKiBEaXJlY3Rpb24uQVNDRU5ESU5HICovIDogXCJkZXNjXCIgLyogRGlyZWN0aW9uLkRFU0NFTkRJTkcgKi87XG4gICAgICAgICAgICByZXR1cm4gbmV3IE9yZGVyQnkoZS5maWVsZCwgdCk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgLy8gV2UgbmVlZCB0byBzd2FwIHRoZSBjdXJzb3JzIHRvIG1hdGNoIHRoZSBub3ctZmxpcHBlZCBxdWVyeSBvcmRlcmluZy5cbiAgICAgICAgY29uc3QgbiA9IGUuZW5kQXQgPyBuZXcgQm91bmQoZS5lbmRBdC5wb3NpdGlvbiwgZS5lbmRBdC5pbmNsdXNpdmUpIDogbnVsbCwgciA9IGUuc3RhcnRBdCA/IG5ldyBCb3VuZChlLnN0YXJ0QXQucG9zaXRpb24sIGUuc3RhcnRBdC5pbmNsdXNpdmUpIDogbnVsbDtcbiAgICAgICAgLy8gTm93IHJldHVybiBhcyBhIExpbWl0VHlwZS5GaXJzdCBxdWVyeS5cbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9uZXdUYXJnZXQoZS5wYXRoLCBlLmNvbGxlY3Rpb25Hcm91cCwgdCwgZS5maWx0ZXJzLCBlLmxpbWl0LCBuLCByKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9xdWVyeVdpdGhBZGRlZEZpbHRlcihlLCB0KSB7XG4gICAgY29uc3QgbiA9IGUuZmlsdGVycy5jb25jYXQoWyB0IF0pO1xuICAgIHJldHVybiBuZXcgX19QUklWQVRFX1F1ZXJ5SW1wbChlLnBhdGgsIGUuY29sbGVjdGlvbkdyb3VwLCBlLmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCBuLCBlLmxpbWl0LCBlLmxpbWl0VHlwZSwgZS5zdGFydEF0LCBlLmVuZEF0KTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3F1ZXJ5V2l0aExpbWl0KGUsIHQsIG4pIHtcbiAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9RdWVyeUltcGwoZS5wYXRoLCBlLmNvbGxlY3Rpb25Hcm91cCwgZS5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgZS5maWx0ZXJzLnNsaWNlKCksIHQsIG4sIGUuc3RhcnRBdCwgZS5lbmRBdCk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9xdWVyeUVxdWFscyhlLCB0KSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV90YXJnZXRFcXVhbHMoX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQoZSksIF9fUFJJVkFURV9xdWVyeVRvVGFyZ2V0KHQpKSAmJiBlLmxpbWl0VHlwZSA9PT0gdC5saW1pdFR5cGU7XG59XG5cbi8vIFRPRE8oYi8yOTE4MzE2NSk6IFRoaXMgaXMgdXNlZCB0byBnZXQgYSB1bmlxdWUgc3RyaW5nIGZyb20gYSBxdWVyeSB0bywgZm9yXG4vLyBleGFtcGxlLCB1c2UgYXMgYSBkaWN0aW9uYXJ5IGtleSwgYnV0IHRoZSBpbXBsZW1lbnRhdGlvbiBpcyBzdWJqZWN0IHRvXG4vLyBjb2xsaXNpb25zLiBNYWtlIGl0IGNvbGxpc2lvbi1mcmVlLlxuZnVuY3Rpb24gX19QUklWQVRFX2Nhbm9uaWZ5UXVlcnkoZSkge1xuICAgIHJldHVybiBgJHtfX1BSSVZBVEVfY2Fub25pZnlUYXJnZXQoX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQoZSkpfXxsdDoke2UubGltaXRUeXBlfWA7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9zdHJpbmdpZnlRdWVyeShlKSB7XG4gICAgcmV0dXJuIGBRdWVyeSh0YXJnZXQ9JHtmdW5jdGlvbiBfX1BSSVZBVEVfc3RyaW5naWZ5VGFyZ2V0KGUpIHtcbiAgICAgICAgbGV0IHQgPSBlLnBhdGguY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgICAgIHJldHVybiBudWxsICE9PSBlLmNvbGxlY3Rpb25Hcm91cCAmJiAodCArPSBcIiBjb2xsZWN0aW9uR3JvdXA9XCIgKyBlLmNvbGxlY3Rpb25Hcm91cCksIFxuICAgICAgICBlLmZpbHRlcnMubGVuZ3RoID4gMCAmJiAodCArPSBgLCBmaWx0ZXJzOiBbJHtlLmZpbHRlcnMubWFwKChlID0+IF9fUFJJVkFURV9zdHJpbmdpZnlGaWx0ZXIoZSkpKS5qb2luKFwiLCBcIil9XWApLCBcbiAgICAgICAgX19QUklWQVRFX2lzTnVsbE9yVW5kZWZpbmVkKGUubGltaXQpIHx8ICh0ICs9IFwiLCBsaW1pdDogXCIgKyBlLmxpbWl0KSwgZS5vcmRlckJ5Lmxlbmd0aCA+IDAgJiYgKHQgKz0gYCwgb3JkZXJCeTogWyR7ZS5vcmRlckJ5Lm1hcCgoZSA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfc3RyaW5naWZ5T3JkZXJCeShlKSB7XG4gICAgICAgICAgICByZXR1cm4gYCR7ZS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKX0gKCR7ZS5kaXJ9KWA7XG4gICAgICAgIH0oZSkpKS5qb2luKFwiLCBcIil9XWApLCBlLnN0YXJ0QXQgJiYgKHQgKz0gXCIsIHN0YXJ0QXQ6IFwiLCB0ICs9IGUuc3RhcnRBdC5pbmNsdXNpdmUgPyBcImI6XCIgOiBcImE6XCIsIFxuICAgICAgICB0ICs9IGUuc3RhcnRBdC5wb3NpdGlvbi5tYXAoKGUgPT4gY2Fub25pY2FsSWQoZSkpKS5qb2luKFwiLFwiKSksIGUuZW5kQXQgJiYgKHQgKz0gXCIsIGVuZEF0OiBcIiwgXG4gICAgICAgIHQgKz0gZS5lbmRBdC5pbmNsdXNpdmUgPyBcImE6XCIgOiBcImI6XCIsIHQgKz0gZS5lbmRBdC5wb3NpdGlvbi5tYXAoKGUgPT4gY2Fub25pY2FsSWQoZSkpKS5qb2luKFwiLFwiKSksIFxuICAgICAgICBgVGFyZ2V0KCR7dH0pYDtcbiAgICB9KF9fUFJJVkFURV9xdWVyeVRvVGFyZ2V0KGUpKX07IGxpbWl0VHlwZT0ke2UubGltaXRUeXBlfSlgO1xufVxuXG4vKiogUmV0dXJucyB3aGV0aGVyIGBkb2NgIG1hdGNoZXMgdGhlIGNvbnN0cmFpbnRzIG9mIGBxdWVyeWAuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9xdWVyeU1hdGNoZXMoZSwgdCkge1xuICAgIHJldHVybiB0LmlzRm91bmREb2N1bWVudCgpICYmIGZ1bmN0aW9uIF9fUFJJVkFURV9xdWVyeU1hdGNoZXNQYXRoQW5kQ29sbGVjdGlvbkdyb3VwKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHQua2V5LnBhdGg7XG4gICAgICAgIHJldHVybiBudWxsICE9PSBlLmNvbGxlY3Rpb25Hcm91cCA/IHQua2V5Lmhhc0NvbGxlY3Rpb25JZChlLmNvbGxlY3Rpb25Hcm91cCkgJiYgZS5wYXRoLmlzUHJlZml4T2YobikgOiBEb2N1bWVudEtleS5pc0RvY3VtZW50S2V5KGUucGF0aCkgPyBlLnBhdGguaXNFcXVhbChuKSA6IGUucGF0aC5pc0ltbWVkaWF0ZVBhcmVudE9mKG4pO1xuICAgIH1cbiAgICAvKipcbiAqIEEgZG9jdW1lbnQgbXVzdCBoYXZlIGEgdmFsdWUgZm9yIGV2ZXJ5IG9yZGVyaW5nIGNsYXVzZSBpbiBvcmRlciB0byBzaG93IHVwXG4gKiBpbiB0aGUgcmVzdWx0cy5cbiAqLyAoZSwgdCkgJiYgZnVuY3Rpb24gX19QUklWQVRFX3F1ZXJ5TWF0Y2hlc09yZGVyQnkoZSwgdCkge1xuICAgICAgICAvLyBXZSBtdXN0IHVzZSBgcXVlcnlOb3JtYWxpemVkT3JkZXJCeSgpYCB0byBnZXQgdGhlIGxpc3Qgb2YgYWxsIG9yZGVyQnlzIChib3RoIGltcGxpY2l0IGFuZCBleHBsaWNpdCkuXG4gICAgICAgIC8vIE5vdGUgdGhhdCBmb3IgT1IgcXVlcmllcywgb3JkZXJCeSBhcHBsaWVzIHRvIGFsbCBkaXNqdW5jdGlvbiB0ZXJtcyBhbmQgaW1wbGljaXQgb3JkZXJCeXMgbXVzdFxuICAgICAgICAvLyBiZSB0YWtlbiBpbnRvIGFjY291bnQuIEZvciBleGFtcGxlLCB0aGUgcXVlcnkgXCJhID4gMSB8fCBiPT0xXCIgaGFzIGFuIGltcGxpY2l0IFwib3JkZXJCeSBhXCIgZHVlXG4gICAgICAgIC8vIHRvIHRoZSBpbmVxdWFsaXR5LCBhbmQgaXMgZXZhbHVhdGVkIGFzIFwiYSA+IDEgb3JkZXJCeSBhIHx8IGI9PTEgb3JkZXJCeSBhXCIuXG4gICAgICAgIC8vIEEgZG9jdW1lbnQgd2l0aCBjb250ZW50IG9mIHtiOjF9IG1hdGNoZXMgdGhlIGZpbHRlcnMsIGJ1dCBkb2VzIG5vdCBtYXRjaCB0aGUgb3JkZXJCeSBiZWNhdXNlXG4gICAgICAgIC8vIGl0J3MgbWlzc2luZyB0aGUgZmllbGQgJ2EnLlxuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgX19QUklWQVRFX3F1ZXJ5Tm9ybWFsaXplZE9yZGVyQnkoZSkpIFxuICAgICAgICAvLyBvcmRlci1ieSBrZXkgYWx3YXlzIG1hdGNoZXNcbiAgICAgICAgaWYgKCFuLmZpZWxkLmlzS2V5RmllbGQoKSAmJiBudWxsID09PSB0LmRhdGEuZmllbGQobi5maWVsZCkpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH0oZSwgdCkgJiYgZnVuY3Rpb24gX19QUklWQVRFX3F1ZXJ5TWF0Y2hlc0ZpbHRlcnMoZSwgdCkge1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgZS5maWx0ZXJzKSBpZiAoIW4ubWF0Y2hlcyh0KSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIC8qKiBNYWtlcyBzdXJlIGEgZG9jdW1lbnQgaXMgd2l0aGluIHRoZSBib3VuZHMsIGlmIHByb3ZpZGVkLiAqLyAoZSwgdCkgJiYgZnVuY3Rpb24gX19QUklWQVRFX3F1ZXJ5TWF0Y2hlc0JvdW5kcyhlLCB0KSB7XG4gICAgICAgIGlmIChlLnN0YXJ0QXQgJiYgIVxuICAgICAgICAvKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBhIGRvY3VtZW50IHNvcnRzIGJlZm9yZSBhIGJvdW5kIHVzaW5nIHRoZSBwcm92aWRlZCBzb3J0XG4gKiBvcmRlci5cbiAqL1xuICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfYm91bmRTb3J0c0JlZm9yZURvY3VtZW50KGUsIHQsIG4pIHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfYm91bmRDb21wYXJlVG9Eb2N1bWVudChlLCB0LCBuKTtcbiAgICAgICAgICAgIHJldHVybiBlLmluY2x1c2l2ZSA/IHIgPD0gMCA6IHIgPCAwO1xuICAgICAgICB9KGUuc3RhcnRBdCwgX19QUklWQVRFX3F1ZXJ5Tm9ybWFsaXplZE9yZGVyQnkoZSksIHQpKSByZXR1cm4gITE7XG4gICAgICAgIGlmIChlLmVuZEF0ICYmICFmdW5jdGlvbiBfX1BSSVZBVEVfYm91bmRTb3J0c0FmdGVyRG9jdW1lbnQoZSwgdCwgbikge1xuICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9ib3VuZENvbXBhcmVUb0RvY3VtZW50KGUsIHQsIG4pO1xuICAgICAgICAgICAgcmV0dXJuIGUuaW5jbHVzaXZlID8gciA+PSAwIDogciA+IDA7XG4gICAgICAgIH0oZS5lbmRBdCwgX19QUklWQVRFX3F1ZXJ5Tm9ybWFsaXplZE9yZGVyQnkoZSksIHQpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgLyoqXG4gKiBSZXR1cm5zIHRoZSBjb2xsZWN0aW9uIGdyb3VwIHRoYXQgdGhpcyBxdWVyeSB0YXJnZXRzLlxuICpcbiAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgaW4gdGhlIFdlYiBTREsgdG8gZmFjaWxpdGF0ZSBtdWx0aS10YWJcbiAqIHN5bmNocm9uaXphdGlvbiBmb3IgcXVlcnkgcmVzdWx0cy5cbiAqLyAoZSwgdCk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9xdWVyeUNvbGxlY3Rpb25Hcm91cChlKSB7XG4gICAgcmV0dXJuIGUuY29sbGVjdGlvbkdyb3VwIHx8IChlLnBhdGgubGVuZ3RoICUgMiA9PSAxID8gZS5wYXRoLmxhc3RTZWdtZW50KCkgOiBlLnBhdGguZ2V0KGUucGF0aC5sZW5ndGggLSAyKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIG5ldyBjb21wYXJhdG9yIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gY29tcGFyZSB0d28gZG9jdW1lbnRzXG4gKiBiYXNlZCBvbiB0aGUgUXVlcnkncyBvcmRlcmluZyBjb25zdHJhaW50LlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdRdWVyeUNvbXBhcmF0b3IoZSkge1xuICAgIHJldHVybiAodCwgbikgPT4ge1xuICAgICAgICBsZXQgciA9ICExO1xuICAgICAgICBmb3IgKGNvbnN0IGkgb2YgX19QUklWQVRFX3F1ZXJ5Tm9ybWFsaXplZE9yZGVyQnkoZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBfX1BSSVZBVEVfY29tcGFyZURvY3MoaSwgdCwgbik7XG4gICAgICAgICAgICBpZiAoMCAhPT0gZSkgcmV0dXJuIGU7XG4gICAgICAgICAgICByID0gciB8fCBpLmZpZWxkLmlzS2V5RmllbGQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMDtcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfY29tcGFyZURvY3MoZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBlLmZpZWxkLmlzS2V5RmllbGQoKSA/IERvY3VtZW50S2V5LmNvbXBhcmF0b3IodC5rZXksIG4ua2V5KSA6IGZ1bmN0aW9uIF9fUFJJVkFURV9jb21wYXJlRG9jdW1lbnRzQnlGaWVsZChlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSB0LmRhdGEuZmllbGQoZSksIGkgPSBuLmRhdGEuZmllbGQoZSk7XG4gICAgICAgIHJldHVybiBudWxsICE9PSByICYmIG51bGwgIT09IGkgPyBfX1BSSVZBVEVfdmFsdWVDb21wYXJlKHIsIGkpIDogZmFpbCgpO1xuICAgIH0oZS5maWVsZCwgdCwgbik7XG4gICAgc3dpdGNoIChlLmRpcikge1xuICAgICAgY2FzZSBcImFzY1wiIC8qIERpcmVjdGlvbi5BU0NFTkRJTkcgKi8gOlxuICAgICAgICByZXR1cm4gcjtcblxuICAgICAgY2FzZSBcImRlc2NcIiAvKiBEaXJlY3Rpb24uREVTQ0VORElORyAqLyA6XG4gICAgICAgIHJldHVybiAtMSAqIHI7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBmYWlsKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIG1hcCBpbXBsZW1lbnRhdGlvbiB0aGF0IHVzZXMgb2JqZWN0cyBhcyBrZXlzLiBPYmplY3RzIG11c3QgaGF2ZSBhblxuICogYXNzb2NpYXRlZCBlcXVhbHMgZnVuY3Rpb24gYW5kIG11c3QgYmUgaW1tdXRhYmxlLiBFbnRyaWVzIGluIHRoZSBtYXAgYXJlXG4gKiBzdG9yZWQgdG9nZXRoZXIgd2l0aCB0aGUga2V5IGJlaW5nIHByb2R1Y2VkIGZyb20gdGhlIG1hcEtleUZuLiBUaGlzIG1hcFxuICogYXV0b21hdGljYWxseSBoYW5kbGVzIGNvbGxpc2lvbnMgb2Yga2V5cy5cbiAqLyBjbGFzcyBPYmplY3RNYXAge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5tYXBLZXlGbiA9IGUsIHRoaXMuZXF1YWxzRm4gPSB0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBpbm5lciBtYXAgZm9yIGEga2V5L3ZhbHVlIHBhaXIuIER1ZSB0byB0aGUgcG9zc2liaWxpdHkgb2YgY29sbGlzaW9ucyB3ZVxuICAgICAgICAgKiBrZWVwIGEgbGlzdCBvZiBlbnRyaWVzIHRoYXQgd2UgZG8gYSBsaW5lYXIgc2VhcmNoIHRocm91Z2ggdG8gZmluZCBhbiBhY3R1YWxcbiAgICAgICAgICogbWF0Y2guIE5vdGUgdGhhdCBjb2xsaXNpb25zIHNob3VsZCBiZSByYXJlLCBzbyB3ZSBzdGlsbCBleHBlY3QgbmVhclxuICAgICAgICAgKiBjb25zdGFudCB0aW1lIGxvb2t1cHMgaW4gcHJhY3RpY2UuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmlubmVyID0ge30sIFxuICAgICAgICAvKiogVGhlIG51bWJlciBvZiBlbnRyaWVzIHN0b3JlZCBpbiB0aGUgbWFwICovXG4gICAgICAgIHRoaXMuaW5uZXJTaXplID0gMDtcbiAgICB9XG4gICAgLyoqIEdldCBhIHZhbHVlIGZvciB0aGlzIGtleSwgb3IgdW5kZWZpbmVkIGlmIGl0IGRvZXMgbm90IGV4aXN0LiAqLyAgICBnZXQoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5tYXBLZXlGbihlKSwgbiA9IHRoaXMuaW5uZXJbdF07XG4gICAgICAgIGlmICh2b2lkIDAgIT09IG4pIGZvciAoY29uc3QgW3QsIHJdIG9mIG4pIGlmICh0aGlzLmVxdWFsc0ZuKHQsIGUpKSByZXR1cm4gcjtcbiAgICB9XG4gICAgaGFzKGUpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdGhpcy5nZXQoZSk7XG4gICAgfVxuICAgIC8qKiBQdXQgdGhpcyBrZXkgYW5kIHZhbHVlIGluIHRoZSBtYXAuICovICAgIHNldChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLm1hcEtleUZuKGUpLCByID0gdGhpcy5pbm5lcltuXTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gcikgcmV0dXJuIHRoaXMuaW5uZXJbbl0gPSBbIFsgZSwgdCBdIF0sIHZvaWQgdGhpcy5pbm5lclNpemUrKztcbiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCByLmxlbmd0aDsgbisrKSBpZiAodGhpcy5lcXVhbHNGbihyW25dWzBdLCBlKSkgXG4gICAgICAgIC8vIFRoaXMgaXMgdXBkYXRpbmcgYW4gZXhpc3RpbmcgZW50cnkgYW5kIGRvZXMgbm90IGluY3JlYXNlIGBpbm5lclNpemVgLlxuICAgICAgICByZXR1cm4gdm9pZCAocltuXSA9IFsgZSwgdCBdKTtcbiAgICAgICAgci5wdXNoKFsgZSwgdCBdKSwgdGhpcy5pbm5lclNpemUrKztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoaXMga2V5IGZyb20gdGhlIG1hcC4gUmV0dXJucyBhIGJvb2xlYW4gaWYgYW55dGhpbmcgd2FzIGRlbGV0ZWQuXG4gICAgICovICAgIGRlbGV0ZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLm1hcEtleUZuKGUpLCBuID0gdGhpcy5pbm5lclt0XTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gbikgcmV0dXJuICExO1xuICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IG4ubGVuZ3RoOyByKyspIGlmICh0aGlzLmVxdWFsc0ZuKG5bcl1bMF0sIGUpKSByZXR1cm4gMSA9PT0gbi5sZW5ndGggPyBkZWxldGUgdGhpcy5pbm5lclt0XSA6IG4uc3BsaWNlKHIsIDEpLCBcbiAgICAgICAgdGhpcy5pbm5lclNpemUtLSwgITA7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgZm9yRWFjaChlKSB7XG4gICAgICAgIGZvckVhY2godGhpcy5pbm5lciwgKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFt0LCByXSBvZiBuKSBlKHQsIHIpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiBpc0VtcHR5KHRoaXMuaW5uZXIpO1xuICAgIH1cbiAgICBzaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbm5lclNpemU7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBzZSA9IG5ldyBTb3J0ZWRNYXAoRG9jdW1lbnRLZXkuY29tcGFyYXRvcik7XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9tdXRhYmxlRG9jdW1lbnRNYXAoKSB7XG4gICAgcmV0dXJuIHNlO1xufVxuXG5jb25zdCBvZSA9IG5ldyBTb3J0ZWRNYXAoRG9jdW1lbnRLZXkuY29tcGFyYXRvcik7XG5cbmZ1bmN0aW9uIGRvY3VtZW50TWFwKC4uLmUpIHtcbiAgICBsZXQgdCA9IG9lO1xuICAgIGZvciAoY29uc3QgbiBvZiBlKSB0ID0gdC5pbnNlcnQobi5rZXksIG4pO1xuICAgIHJldHVybiB0O1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfY29udmVydE92ZXJsYXllZERvY3VtZW50TWFwVG9Eb2N1bWVudE1hcChlKSB7XG4gICAgbGV0IHQgPSBvZTtcbiAgICByZXR1cm4gZS5mb3JFYWNoKCgoZSwgbikgPT4gdCA9IHQuaW5zZXJ0KGUsIG4ub3ZlcmxheWVkRG9jdW1lbnQpKSksIHQ7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9uZXdPdmVybGF5TWFwKCkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfbmV3RG9jdW1lbnRLZXlNYXAoKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX25ld011dGF0aW9uTWFwKCkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfbmV3RG9jdW1lbnRLZXlNYXAoKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX25ld0RvY3VtZW50S2V5TWFwKCkge1xuICAgIHJldHVybiBuZXcgT2JqZWN0TWFwKChlID0+IGUudG9TdHJpbmcoKSksICgoZSwgdCkgPT4gZS5pc0VxdWFsKHQpKSk7XG59XG5cbmNvbnN0IF9lID0gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcblxuY29uc3QgYWUgPSBuZXcgU29ydGVkU2V0KERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoLi4uZSkge1xuICAgIGxldCB0ID0gYWU7XG4gICAgZm9yIChjb25zdCBuIG9mIGUpIHQgPSB0LmFkZChuKTtcbiAgICByZXR1cm4gdDtcbn1cblxuY29uc3QgdWUgPSBuZXcgU29ydGVkU2V0KF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKTtcblxuZnVuY3Rpb24gX19QUklWQVRFX3RhcmdldElkU2V0KCkge1xuICAgIHJldHVybiB1ZTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmV0dXJucyBhbiBEb3VibGVWYWx1ZSBmb3IgYHZhbHVlYCB0aGF0IGlzIGVuY29kZWQgYmFzZWQgdGhlIHNlcmlhbGl6ZXInc1xuICogYHVzZVByb3RvM0pzb25gIHNldHRpbmcuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3RvRG91YmxlKGUsIHQpIHtcbiAgICBpZiAoZS51c2VQcm90bzNKc29uKSB7XG4gICAgICAgIGlmIChpc05hTih0KSkgcmV0dXJuIHtcbiAgICAgICAgICAgIGRvdWJsZVZhbHVlOiBcIk5hTlwiXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0ID09PSAxIC8gMCkgcmV0dXJuIHtcbiAgICAgICAgICAgIGRvdWJsZVZhbHVlOiBcIkluZmluaXR5XCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHQgPT09IC0xIC8gMCkgcmV0dXJuIHtcbiAgICAgICAgICAgIGRvdWJsZVZhbHVlOiBcIi1JbmZpbml0eVwiXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGRvdWJsZVZhbHVlOiBfX1BSSVZBVEVfaXNOZWdhdGl2ZVplcm8odCkgPyBcIi0wXCIgOiB0XG4gICAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGFuIEludGVnZXJWYWx1ZSBmb3IgYHZhbHVlYC5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdG9JbnRlZ2VyKGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBpbnRlZ2VyVmFsdWU6IFwiXCIgKyBlXG4gICAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgdmFsdWUgZm9yIGEgbnVtYmVyIHRoYXQncyBhcHByb3ByaWF0ZSB0byBwdXQgaW50byBhIHByb3RvLlxuICogVGhlIHJldHVybiB2YWx1ZSBpcyBhbiBJbnRlZ2VyVmFsdWUgaWYgaXQgY2FuIHNhZmVseSByZXByZXNlbnQgdGhlIHZhbHVlLFxuICogb3RoZXJ3aXNlIGEgRG91YmxlVmFsdWUgaXMgcmV0dXJuZWQuXG4gKi8gZnVuY3Rpb24gdG9OdW1iZXIoZSwgdCkge1xuICAgIHJldHVybiBpc1NhZmVJbnRlZ2VyKHQpID8gX19QUklWQVRFX3RvSW50ZWdlcih0KSA6IF9fUFJJVkFURV90b0RvdWJsZShlLCB0KTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBVc2VkIHRvIHJlcHJlc2VudCBhIGZpZWxkIHRyYW5zZm9ybSBvbiBhIG11dGF0aW9uLiAqLyBjbGFzcyBUcmFuc2Zvcm1PcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCB0aGUgc3RydWN0dXJhbCB0eXBlIG9mIGBUcmFuc2Zvcm1PcGVyYXRpb25gIGlzIHVuaXF1ZS5cbiAgICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvVHlwZVNjcmlwdC9pc3N1ZXMvNTQ1MVxuICAgICAgICB0aGlzLl8gPSB2b2lkIDA7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbXB1dGVzIHRoZSBsb2NhbCB0cmFuc2Zvcm0gcmVzdWx0IGFnYWluc3QgdGhlIHByb3ZpZGVkIGBwcmV2aW91c1ZhbHVlYCxcbiAqIG9wdGlvbmFsbHkgdXNpbmcgdGhlIHByb3ZpZGVkIGxvY2FsV3JpdGVUaW1lLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9hcHBseVRyYW5zZm9ybU9wZXJhdGlvblRvTG9jYWxWaWV3KGUsIHQsIG4pIHtcbiAgICByZXR1cm4gZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9TZXJ2ZXJUaW1lc3RhbXBUcmFuc2Zvcm0gPyBmdW5jdGlvbiBzZXJ2ZXJUaW1lc3RhbXAkMShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB7XG4gICAgICAgICAgICBmaWVsZHM6IHtcbiAgICAgICAgICAgICAgICBfX3R5cGVfXzoge1xuICAgICAgICAgICAgICAgICAgICBzdHJpbmdWYWx1ZTogXCJzZXJ2ZXJfdGltZXN0YW1wXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF9fbG9jYWxfd3JpdGVfdGltZV9fOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmRzOiBlLnNlY29uZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW5vczogZS5uYW5vc2Vjb25kc1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyBXZSBzaG91bGQgYXZvaWQgc3RvcmluZyBkZWVwbHkgbmVzdGVkIHNlcnZlciB0aW1lc3RhbXAgbWFwIHZhbHVlc1xuICAgICAgICAvLyBiZWNhdXNlIHdlIG5ldmVyIHVzZSB0aGUgaW50ZXJtZWRpYXRlIFwicHJldmlvdXMgdmFsdWVzXCIuXG4gICAgICAgIC8vIEZvciBleGFtcGxlOlxuICAgICAgICAvLyBwcmV2aW91czogNDJMLCBhZGQ6IHQxLCByZXN1bHQ6IHQxIC0+IDQyTFxuICAgICAgICAvLyBwcmV2aW91czogdDEsICBhZGQ6IHQyLCByZXN1bHQ6IHQyIC0+IDQyTCAoTk9UIHQyIC0+IHQxIC0+IDQyTClcbiAgICAgICAgLy8gcHJldmlvdXM6IHQyLCAgYWRkOiB0MywgcmVzdWx0OiB0MyAtPiA0MkwgKE5PVCB0MyAtPiB0MiAtPiB0MSAtPiA0MkwpXG4gICAgICAgIC8vIGBnZXRQcmV2aW91c1ZhbHVlYCByZWN1cnNpdmVseSB0cmF2ZXJzZXMgc2VydmVyIHRpbWVzdGFtcHMgdG8gZmluZCB0aGVcbiAgICAgICAgLy8gbGVhc3QgcmVjZW50IFZhbHVlLlxuICAgICAgICAgICAgICAgIHJldHVybiB0ICYmIF9fUFJJVkFURV9pc1NlcnZlclRpbWVzdGFtcCh0KSAmJiAodCA9IF9fUFJJVkFURV9nZXRQcmV2aW91c1ZhbHVlKHQpKSwgXG4gICAgICAgIHQgJiYgKG4uZmllbGRzLl9fcHJldmlvdXNfdmFsdWVfXyA9IHQpLCB7XG4gICAgICAgICAgICBtYXBWYWx1ZTogblxuICAgICAgICB9O1xuICAgIH0obiwgdCkgOiBlIGluc3RhbmNlb2YgX19QUklWQVRFX0FycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24gPyBfX1BSSVZBVEVfYXBwbHlBcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uKGUsIHQpIDogZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9BcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbiA/IF9fUFJJVkFURV9hcHBseUFycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uKGUsIHQpIDogZnVuY3Rpb24gX19QUklWQVRFX2FwcGx5TnVtZXJpY0luY3JlbWVudFRyYW5zZm9ybU9wZXJhdGlvblRvTG9jYWxWaWV3KGUsIHQpIHtcbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBTaW5jZSBKYXZhU2NyaXB0J3MgaW50ZWdlciBhcml0aG1ldGljIGlzIGxpbWl0ZWQgdG8gNTMgYml0XG4gICAgICAgIC8vIHByZWNpc2lvbiBhbmQgcmVzb2x2ZXMgb3ZlcmZsb3dzIGJ5IHJlZHVjaW5nIHByZWNpc2lvbiwgd2UgZG8gbm90XG4gICAgICAgIC8vIG1hbnVhbGx5IGNhcCBvdmVyZmxvd3MgYXQgMl42My5cbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9jb21wdXRlVHJhbnNmb3JtT3BlcmF0aW9uQmFzZVZhbHVlKGUsIHQpLCByID0gYXNOdW1iZXIobikgKyBhc051bWJlcihlLlBlKTtcbiAgICAgICAgcmV0dXJuIGlzSW50ZWdlcihuKSAmJiBpc0ludGVnZXIoZS5QZSkgPyBfX1BSSVZBVEVfdG9JbnRlZ2VyKHIpIDogX19QUklWQVRFX3RvRG91YmxlKGUuc2VyaWFsaXplciwgcik7XG4gICAgfShlLCB0KTtcbn1cblxuLyoqXG4gKiBDb21wdXRlcyBhIGZpbmFsIHRyYW5zZm9ybSByZXN1bHQgYWZ0ZXIgdGhlIHRyYW5zZm9ybSBoYXMgYmVlbiBhY2tub3dsZWRnZWRcbiAqIGJ5IHRoZSBzZXJ2ZXIsIHBvdGVudGlhbGx5IHVzaW5nIHRoZSBzZXJ2ZXItcHJvdmlkZWQgdHJhbnNmb3JtUmVzdWx0LlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9hcHBseVRyYW5zZm9ybU9wZXJhdGlvblRvUmVtb3RlRG9jdW1lbnQoZSwgdCwgbikge1xuICAgIC8vIFRoZSBzZXJ2ZXIganVzdCBzZW5kcyBudWxsIGFzIHRoZSB0cmFuc2Zvcm0gcmVzdWx0IGZvciBhcnJheSBvcGVyYXRpb25zLFxuICAgIC8vIHNvIHdlIGhhdmUgdG8gY2FsY3VsYXRlIGEgcmVzdWx0IHRoZSBzYW1lIGFzIHdlIGRvIGZvciBsb2NhbFxuICAgIC8vIGFwcGxpY2F0aW9ucy5cbiAgICByZXR1cm4gZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9BcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uID8gX19QUklWQVRFX2FwcGx5QXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbihlLCB0KSA6IGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfQXJyYXlSZW1vdmVUcmFuc2Zvcm1PcGVyYXRpb24gPyBfX1BSSVZBVEVfYXBwbHlBcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbihlLCB0KSA6IG47XG59XG5cbi8qKlxuICogSWYgdGhpcyB0cmFuc2Zvcm0gb3BlcmF0aW9uIGlzIG5vdCBpZGVtcG90ZW50LCByZXR1cm5zIHRoZSBiYXNlIHZhbHVlIHRvXG4gKiBwZXJzaXN0IGZvciB0aGlzIHRyYW5zZm9ybS4gSWYgYSBiYXNlIHZhbHVlIGlzIHJldHVybmVkLCB0aGUgdHJhbnNmb3JtXG4gKiBvcGVyYXRpb24gaXMgYWx3YXlzIGFwcGxpZWQgdG8gdGhpcyBiYXNlIHZhbHVlLCBldmVuIGlmIGRvY3VtZW50IGhhc1xuICogYWxyZWFkeSBiZWVuIHVwZGF0ZWQuXG4gKlxuICogQmFzZSB2YWx1ZXMgcHJvdmlkZSBjb25zaXN0ZW50IGJlaGF2aW9yIGZvciBub24taWRlbXBvdGVudCB0cmFuc2Zvcm1zIGFuZFxuICogYWxsb3cgdXMgdG8gcmV0dXJuIHRoZSBzYW1lIGxhdGVuY3ktY29tcGVuc2F0ZWQgdmFsdWUgZXZlbiBpZiB0aGUgYmFja2VuZFxuICogaGFzIGFscmVhZHkgYXBwbGllZCB0aGUgdHJhbnNmb3JtIG9wZXJhdGlvbi4gVGhlIGJhc2UgdmFsdWUgaXMgbnVsbCBmb3JcbiAqIGlkZW1wb3RlbnQgdHJhbnNmb3JtcywgYXMgdGhleSBjYW4gYmUgcmUtcGxheWVkIGV2ZW4gaWYgdGhlIGJhY2tlbmQgaGFzXG4gKiBhbHJlYWR5IGFwcGxpZWQgdGhlbS5cbiAqXG4gKiBAcmV0dXJucyBhIGJhc2UgdmFsdWUgdG8gc3RvcmUgYWxvbmcgd2l0aCB0aGUgbXV0YXRpb24sIG9yIG51bGwgZm9yXG4gKiBpZGVtcG90ZW50IHRyYW5zZm9ybXMuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2NvbXB1dGVUcmFuc2Zvcm1PcGVyYXRpb25CYXNlVmFsdWUoZSwgdCkge1xuICAgIHJldHVybiBlIGluc3RhbmNlb2YgX19QUklWQVRFX051bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24gPyBcbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgZWl0aGVyIGFuIEludGVnZXJWYWx1ZSBvciBhIERvdWJsZVZhbHVlLiAqL1xuICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9pc051bWJlcihlKSB7XG4gICAgICAgIHJldHVybiBpc0ludGVnZXIoZSkgfHwgZnVuY3Rpb24gX19QUklWQVRFX2lzRG91YmxlKGUpIHtcbiAgICAgICAgICAgIHJldHVybiAhIWUgJiYgXCJkb3VibGVWYWx1ZVwiIGluIGU7XG4gICAgICAgIH0oZSk7XG4gICAgfSh0KSA/IHQgOiB7XG4gICAgICAgIGludGVnZXJWYWx1ZTogMFxuICAgIH0gOiBudWxsO1xufVxuXG4vKiogVHJhbnNmb3JtcyBhIHZhbHVlIGludG8gYSBzZXJ2ZXItZ2VuZXJhdGVkIHRpbWVzdGFtcC4gKi9cbmNsYXNzIF9fUFJJVkFURV9TZXJ2ZXJUaW1lc3RhbXBUcmFuc2Zvcm0gZXh0ZW5kcyBUcmFuc2Zvcm1PcGVyYXRpb24ge31cblxuLyoqIFRyYW5zZm9ybXMgYW4gYXJyYXkgdmFsdWUgdmlhIGEgdW5pb24gb3BlcmF0aW9uLiAqLyBjbGFzcyBfX1BSSVZBVEVfQXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbiBleHRlbmRzIFRyYW5zZm9ybU9wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmVsZW1lbnRzID0gZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9hcHBseUFycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24oZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfY29lcmNlZEZpZWxkVmFsdWVzQXJyYXkodCk7XG4gICAgZm9yIChjb25zdCB0IG9mIGUuZWxlbWVudHMpIG4uc29tZSgoZSA9PiBfX1BSSVZBVEVfdmFsdWVFcXVhbHMoZSwgdCkpKSB8fCBuLnB1c2godCk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYXJyYXlWYWx1ZToge1xuICAgICAgICAgICAgdmFsdWVzOiBuXG4gICAgICAgIH1cbiAgICB9O1xufVxuXG4vKiogVHJhbnNmb3JtcyBhbiBhcnJheSB2YWx1ZSB2aWEgYSByZW1vdmUgb3BlcmF0aW9uLiAqLyBjbGFzcyBfX1BSSVZBVEVfQXJyYXlSZW1vdmVUcmFuc2Zvcm1PcGVyYXRpb24gZXh0ZW5kcyBUcmFuc2Zvcm1PcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5lbGVtZW50cyA9IGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfYXBwbHlBcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbihlLCB0KSB7XG4gICAgbGV0IG4gPSBfX1BSSVZBVEVfY29lcmNlZEZpZWxkVmFsdWVzQXJyYXkodCk7XG4gICAgZm9yIChjb25zdCB0IG9mIGUuZWxlbWVudHMpIG4gPSBuLmZpbHRlcigoZSA9PiAhX19QUklWQVRFX3ZhbHVlRXF1YWxzKGUsIHQpKSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYXJyYXlWYWx1ZToge1xuICAgICAgICAgICAgdmFsdWVzOiBuXG4gICAgICAgIH1cbiAgICB9O1xufVxuXG4vKipcbiAqIEltcGxlbWVudHMgdGhlIGJhY2tlbmQgc2VtYW50aWNzIGZvciBsb2NhbGx5IGNvbXB1dGVkIE5VTUVSSUNfQUREIChpbmNyZW1lbnQpXG4gKiB0cmFuc2Zvcm1zLiBDb252ZXJ0cyBhbGwgZmllbGQgdmFsdWVzIHRvIGludGVnZXJzIG9yIGRvdWJsZXMsIGJ1dCB1bmxpa2UgdGhlXG4gKiBiYWNrZW5kIGRvZXMgbm90IGNhcCBpbnRlZ2VyIHZhbHVlcyBhdCAyXjYzLiBJbnN0ZWFkLCBKYXZhU2NyaXB0IG51bWJlclxuICogYXJpdGhtZXRpYyBpcyB1c2VkIGFuZCBwcmVjaXNpb24gbG9zcyBjYW4gb2NjdXIgZm9yIHZhbHVlcyBncmVhdGVyIHRoYW4gMl41My5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfTnVtZXJpY0luY3JlbWVudFRyYW5zZm9ybU9wZXJhdGlvbiBleHRlbmRzIFRyYW5zZm9ybU9wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLnNlcmlhbGl6ZXIgPSBlLCB0aGlzLlBlID0gdDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGFzTnVtYmVyKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcihlLmludGVnZXJWYWx1ZSB8fCBlLmRvdWJsZVZhbHVlKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2NvZXJjZWRGaWVsZFZhbHVlc0FycmF5KGUpIHtcbiAgICByZXR1cm4gaXNBcnJheShlKSAmJiBlLmFycmF5VmFsdWUudmFsdWVzID8gZS5hcnJheVZhbHVlLnZhbHVlcy5zbGljZSgpIDogW107XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogQSBmaWVsZCBwYXRoIGFuZCB0aGUgVHJhbnNmb3JtT3BlcmF0aW9uIHRvIHBlcmZvcm0gdXBvbiBpdC4gKi8gY2xhc3MgRmllbGRUcmFuc2Zvcm0ge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5maWVsZCA9IGUsIHRoaXMudHJhbnNmb3JtID0gdDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9maWVsZFRyYW5zZm9ybUVxdWFscyhlLCB0KSB7XG4gICAgcmV0dXJuIGUuZmllbGQuaXNFcXVhbCh0LmZpZWxkKSAmJiBmdW5jdGlvbiBfX1BSSVZBVEVfdHJhbnNmb3JtT3BlcmF0aW9uRXF1YWxzKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfQXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbiAmJiB0IGluc3RhbmNlb2YgX19QUklWQVRFX0FycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24gfHwgZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9BcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbiAmJiB0IGluc3RhbmNlb2YgX19QUklWQVRFX0FycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uID8gX19QUklWQVRFX2FycmF5RXF1YWxzKGUuZWxlbWVudHMsIHQuZWxlbWVudHMsIF9fUFJJVkFURV92YWx1ZUVxdWFscykgOiBlIGluc3RhbmNlb2YgX19QUklWQVRFX051bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24gJiYgdCBpbnN0YW5jZW9mIF9fUFJJVkFURV9OdW1lcmljSW5jcmVtZW50VHJhbnNmb3JtT3BlcmF0aW9uID8gX19QUklWQVRFX3ZhbHVlRXF1YWxzKGUuUGUsIHQuUGUpIDogZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9TZXJ2ZXJUaW1lc3RhbXBUcmFuc2Zvcm0gJiYgdCBpbnN0YW5jZW9mIF9fUFJJVkFURV9TZXJ2ZXJUaW1lc3RhbXBUcmFuc2Zvcm07XG4gICAgfShlLnRyYW5zZm9ybSwgdC50cmFuc2Zvcm0pO1xufVxuXG4vKiogVGhlIHJlc3VsdCBvZiBzdWNjZXNzZnVsbHkgYXBwbHlpbmcgYSBtdXRhdGlvbiB0byB0aGUgYmFja2VuZC4gKi9cbmNsYXNzIE11dGF0aW9uUmVzdWx0IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgdmVyc2lvbiBhdCB3aGljaCB0aGUgbXV0YXRpb24gd2FzIGNvbW1pdHRlZDpcbiAgICAgKlxuICAgICAqIC0gRm9yIG1vc3Qgb3BlcmF0aW9ucywgdGhpcyBpcyB0aGUgdXBkYXRlVGltZSBpbiB0aGUgV3JpdGVSZXN1bHQuXG4gICAgICogLSBGb3IgZGVsZXRlcywgdGhlIGNvbW1pdFRpbWUgb2YgdGhlIFdyaXRlUmVzcG9uc2UgKGJlY2F1c2UgZGVsZXRlcyBhcmVcbiAgICAgKiAgIG5vdCBzdG9yZWQgYW5kIGhhdmUgbm8gdXBkYXRlVGltZSkuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgdGhlc2UgdmVyc2lvbnMgY2FuIGJlIGRpZmZlcmVudDogTm8tb3Agd3JpdGVzIHdpbGwgbm90IGNoYW5nZVxuICAgICAqIHRoZSB1cGRhdGVUaW1lIGV2ZW4gdGhvdWdoIHRoZSBjb21taXRUaW1lIGFkdmFuY2VzLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIFRoZSByZXN1bHRpbmcgZmllbGRzIHJldHVybmVkIGZyb20gdGhlIGJhY2tlbmQgYWZ0ZXIgYSBtdXRhdGlvblxuICAgICAqIGNvbnRhaW5pbmcgZmllbGQgdHJhbnNmb3JtcyBoYXMgYmVlbiBjb21taXR0ZWQuIENvbnRhaW5zIG9uZSBGaWVsZFZhbHVlXG4gICAgICogZm9yIGVhY2ggRmllbGRUcmFuc2Zvcm0gdGhhdCB3YXMgaW4gdGhlIG11dGF0aW9uLlxuICAgICAqXG4gICAgICogV2lsbCBiZSBlbXB0eSBpZiB0aGUgbXV0YXRpb24gZGlkIG5vdCBjb250YWluIGFueSBmaWVsZCB0cmFuc2Zvcm1zLlxuICAgICAqL1xuICAgIHQpIHtcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gZSwgdGhpcy50cmFuc2Zvcm1SZXN1bHRzID0gdDtcbiAgICB9XG59XG5cbi8qKlxuICogRW5jb2RlcyBhIHByZWNvbmRpdGlvbiBmb3IgYSBtdXRhdGlvbi4gVGhpcyBmb2xsb3dzIHRoZSBtb2RlbCB0aGF0IHRoZVxuICogYmFja2VuZCBhY2NlcHRzIHdpdGggdGhlIHNwZWNpYWwgY2FzZSBvZiBhbiBleHBsaWNpdCBcImVtcHR5XCIgcHJlY29uZGl0aW9uXG4gKiAobWVhbmluZyBubyBwcmVjb25kaXRpb24pLlxuICovIGNsYXNzIFByZWNvbmRpdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLnVwZGF0ZVRpbWUgPSBlLCB0aGlzLmV4aXN0cyA9IHQ7XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IGVtcHR5IFByZWNvbmRpdGlvbi4gKi8gICAgc3RhdGljIG5vbmUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJlY29uZGl0aW9uO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyBQcmVjb25kaXRpb24gd2l0aCBhbiBleGlzdHMgZmxhZy4gKi8gICAgc3RhdGljIGV4aXN0cyhlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJlY29uZGl0aW9uKHZvaWQgMCwgZSk7XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IFByZWNvbmRpdGlvbiBiYXNlZCBvbiBhIHZlcnNpb24gYSBkb2N1bWVudCBleGlzdHMgYXQuICovICAgIHN0YXRpYyB1cGRhdGVUaW1lKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcmVjb25kaXRpb24oZSk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHdoZXRoZXIgdGhpcyBQcmVjb25kaXRpb24gaXMgZW1wdHkuICovICAgIGdldCBpc05vbmUoKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgPT09IHRoaXMudXBkYXRlVGltZSAmJiB2b2lkIDAgPT09IHRoaXMuZXhpc3RzO1xuICAgIH1cbiAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXhpc3RzID09PSBlLmV4aXN0cyAmJiAodGhpcy51cGRhdGVUaW1lID8gISFlLnVwZGF0ZVRpbWUgJiYgdGhpcy51cGRhdGVUaW1lLmlzRXF1YWwoZS51cGRhdGVUaW1lKSA6ICFlLnVwZGF0ZVRpbWUpO1xuICAgIH1cbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcHJlY29uZGl0aW9ucyBpcyB2YWxpZCBmb3IgdGhlIGdpdmVuIGRvY3VtZW50LiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfcHJlY29uZGl0aW9uSXNWYWxpZEZvckRvY3VtZW50KGUsIHQpIHtcbiAgICByZXR1cm4gdm9pZCAwICE9PSBlLnVwZGF0ZVRpbWUgPyB0LmlzRm91bmREb2N1bWVudCgpICYmIHQudmVyc2lvbi5pc0VxdWFsKGUudXBkYXRlVGltZSkgOiB2b2lkIDAgPT09IGUuZXhpc3RzIHx8IGUuZXhpc3RzID09PSB0LmlzRm91bmREb2N1bWVudCgpO1xufVxuXG4vKipcbiAqIEEgbXV0YXRpb24gZGVzY3JpYmVzIGEgc2VsZi1jb250YWluZWQgY2hhbmdlIHRvIGEgZG9jdW1lbnQuIE11dGF0aW9ucyBjYW5cbiAqIGNyZWF0ZSwgcmVwbGFjZSwgZGVsZXRlLCBhbmQgdXBkYXRlIHN1YnNldHMgb2YgZG9jdW1lbnRzLlxuICpcbiAqIE11dGF0aW9ucyBub3Qgb25seSBhY3Qgb24gdGhlIHZhbHVlIG9mIHRoZSBkb2N1bWVudCBidXQgYWxzbyBpdHMgdmVyc2lvbi5cbiAqXG4gKiBGb3IgbG9jYWwgbXV0YXRpb25zIChtdXRhdGlvbnMgdGhhdCBoYXZlbid0IGJlZW4gY29tbWl0dGVkIHlldCksIHdlIHByZXNlcnZlXG4gKiB0aGUgZXhpc3RpbmcgdmVyc2lvbiBmb3IgU2V0IGFuZCBQYXRjaCBtdXRhdGlvbnMuIEZvciBEZWxldGUgbXV0YXRpb25zLCB3ZVxuICogcmVzZXQgdGhlIHZlcnNpb24gdG8gMC5cbiAqXG4gKiBIZXJlJ3MgdGhlIGV4cGVjdGVkIHRyYW5zaXRpb24gdGFibGUuXG4gKlxuICogTVVUQVRJT04gICAgICAgICAgIEFQUExJRUQgVE8gICAgICAgICAgICBSRVNVTFRTIElOXG4gKlxuICogU2V0TXV0YXRpb24gICAgICAgIERvY3VtZW50KHYzKSAgICAgICAgICBEb2N1bWVudCh2MylcbiAqIFNldE11dGF0aW9uICAgICAgICBOb0RvY3VtZW50KHYzKSAgICAgICAgRG9jdW1lbnQodjApXG4gKiBTZXRNdXRhdGlvbiAgICAgICAgSW52YWxpZERvY3VtZW50KHYwKSAgIERvY3VtZW50KHYwKVxuICogUGF0Y2hNdXRhdGlvbiAgICAgIERvY3VtZW50KHYzKSAgICAgICAgICBEb2N1bWVudCh2MylcbiAqIFBhdGNoTXV0YXRpb24gICAgICBOb0RvY3VtZW50KHYzKSAgICAgICAgTm9Eb2N1bWVudCh2MylcbiAqIFBhdGNoTXV0YXRpb24gICAgICBJbnZhbGlkRG9jdW1lbnQodjApICAgVW5rbm93bkRvY3VtZW50KHYzKVxuICogRGVsZXRlTXV0YXRpb24gICAgIERvY3VtZW50KHYzKSAgICAgICAgICBOb0RvY3VtZW50KHYwKVxuICogRGVsZXRlTXV0YXRpb24gICAgIE5vRG9jdW1lbnQodjMpICAgICAgICBOb0RvY3VtZW50KHYwKVxuICogRGVsZXRlTXV0YXRpb24gICAgIEludmFsaWREb2N1bWVudCh2MCkgICBOb0RvY3VtZW50KHYwKVxuICpcbiAqIEZvciBhY2tub3dsZWRnZWQgbXV0YXRpb25zLCB3ZSB1c2UgdGhlIHVwZGF0ZVRpbWUgb2YgdGhlIFdyaXRlUmVzcG9uc2UgYXNcbiAqIHRoZSByZXN1bHRpbmcgdmVyc2lvbiBmb3IgU2V0IGFuZCBQYXRjaCBtdXRhdGlvbnMuIEFzIGRlbGV0ZXMgaGF2ZSBub1xuICogZXhwbGljaXQgdXBkYXRlIHRpbWUsIHdlIHVzZSB0aGUgY29tbWl0VGltZSBvZiB0aGUgV3JpdGVSZXNwb25zZSBmb3JcbiAqIERlbGV0ZSBtdXRhdGlvbnMuXG4gKlxuICogSWYgYSBtdXRhdGlvbiBpcyBhY2tub3dsZWRnZWQgYnkgdGhlIGJhY2tlbmQgYnV0IGZhaWxzIHRoZSBwcmVjb25kaXRpb24gY2hlY2tcbiAqIGxvY2FsbHksIHdlIHRyYW5zaXRpb24gdG8gYW4gYFVua25vd25Eb2N1bWVudGAgYW5kIHJlbHkgb24gV2F0Y2ggdG8gc2VuZCB1c1xuICogdGhlIHVwZGF0ZWQgdmVyc2lvbi5cbiAqXG4gKiBGaWVsZCB0cmFuc2Zvcm1zIGFyZSB1c2VkIG9ubHkgd2l0aCBQYXRjaCBhbmQgU2V0IE11dGF0aW9ucy4gV2UgdXNlIHRoZVxuICogYHVwZGF0ZVRyYW5zZm9ybXNgIG1lc3NhZ2UgdG8gc3RvcmUgdHJhbnNmb3JtcywgcmF0aGVyIHRoYW4gdGhlIGB0cmFuc2Zvcm1zYHNcbiAqIG1lc3NhZ2VzLlxuICpcbiAqICMjIFN1YmNsYXNzaW5nIE5vdGVzXG4gKlxuICogRXZlcnkgdHlwZSBvZiBtdXRhdGlvbiBuZWVkcyB0byBpbXBsZW1lbnQgaXRzIG93biBhcHBseVRvUmVtb3RlRG9jdW1lbnQoKSBhbmRcbiAqIGFwcGx5VG9Mb2NhbFZpZXcoKSB0byBpbXBsZW1lbnQgdGhlIGFjdHVhbCBiZWhhdmlvciBvZiBhcHBseWluZyB0aGUgbXV0YXRpb25cbiAqIHRvIHNvbWUgc291cmNlIGRvY3VtZW50IChzZWUgYHNldE11dGF0aW9uQXBwbHlUb1JlbW90ZURvY3VtZW50KClgIGZvciBhblxuICogZXhhbXBsZSkuXG4gKi8gY2xhc3MgTXV0YXRpb24ge31cblxuLyoqXG4gKiBBIHV0aWxpdHkgbWV0aG9kIHRvIGNhbGN1bGF0ZSBhIGBNdXRhdGlvbmAgcmVwcmVzZW50aW5nIHRoZSBvdmVybGF5IGZyb20gdGhlXG4gKiBmaW5hbCBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQsIGFuZCBhIGBGaWVsZE1hc2tgIHJlcHJlc2VudGluZyB0aGUgZmllbGRzIHRoYXRcbiAqIGFyZSBtdXRhdGVkIGJ5IHRoZSBsb2NhbCBtdXRhdGlvbnMuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2NhbGN1bGF0ZU92ZXJsYXlNdXRhdGlvbihlLCB0KSB7XG4gICAgaWYgKCFlLmhhc0xvY2FsTXV0YXRpb25zIHx8IHQgJiYgMCA9PT0gdC5maWVsZHMubGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgICAvLyBtYXNrIGlzIG51bGwgd2hlbiBzZXRzIG9yIGRlbGV0ZXMgYXJlIGFwcGxpZWQgdG8gdGhlIGN1cnJlbnQgZG9jdW1lbnQuXG4gICAgICAgIGlmIChudWxsID09PSB0KSByZXR1cm4gZS5pc05vRG9jdW1lbnQoKSA/IG5ldyBfX1BSSVZBVEVfRGVsZXRlTXV0YXRpb24oZS5rZXksIFByZWNvbmRpdGlvbi5ub25lKCkpIDogbmV3IF9fUFJJVkFURV9TZXRNdXRhdGlvbihlLmtleSwgZS5kYXRhLCBQcmVjb25kaXRpb24ubm9uZSgpKTtcbiAgICB7XG4gICAgICAgIGNvbnN0IG4gPSBlLmRhdGEsIHIgPSBPYmplY3RWYWx1ZS5lbXB0eSgpO1xuICAgICAgICBsZXQgaSA9IG5ldyBTb3J0ZWRTZXQoRmllbGRQYXRoJDEuY29tcGFyYXRvcik7XG4gICAgICAgIGZvciAobGV0IGUgb2YgdC5maWVsZHMpIGlmICghaS5oYXMoZSkpIHtcbiAgICAgICAgICAgIGxldCB0ID0gbi5maWVsZChlKTtcbiAgICAgICAgICAgIC8vIElmIHdlIGFyZSBkZWxldGluZyBhIG5lc3RlZCBmaWVsZCwgd2UgdGFrZSB0aGUgaW1tZWRpYXRlIHBhcmVudCBhc1xuICAgICAgICAgICAgLy8gdGhlIG1hc2sgdXNlZCB0byBjb25zdHJ1Y3QgdGhlIHJlc3VsdGluZyBtdXRhdGlvbi5cbiAgICAgICAgICAgIC8vIEp1c3RpZmljYXRpb246IE5lc3RlZCBmaWVsZHMgY2FuIGNyZWF0ZSBwYXJlbnQgZmllbGRzIGltcGxpY2l0bHkuIElmXG4gICAgICAgICAgICAvLyBvbmx5IGEgbGVhZiBlbnRyeSBpcyBkZWxldGVkIGluIGxhdGVyIG11dGF0aW9ucywgdGhlIHBhcmVudCBmaWVsZFxuICAgICAgICAgICAgLy8gc2hvdWxkIHN0aWxsIHJlbWFpbiwgYnV0IHdlIG1heSBoYXZlIGxvc3QgdGhpcyBpbmZvcm1hdGlvbi5cbiAgICAgICAgICAgIC8vIENvbnNpZGVyIG11dGF0aW9uIChmb28uYmFyIDEpLCB0aGVuIG11dGF0aW9uIChmb28uYmFyIGRlbGV0ZSgpKS5cbiAgICAgICAgICAgIC8vIFRoaXMgbGVhdmVzIHRoZSBmaW5hbCByZXN1bHQgKGZvbywge30pLiBEZXNwaXRlIHRoZSBmYWN0IHRoYXQgYGRvY2BcbiAgICAgICAgICAgIC8vIGhhcyB0aGUgY29ycmVjdCByZXN1bHQsIGBmb29gIGlzIG5vdCBpbiBgbWFza2AsIGFuZCB0aGUgcmVzdWx0aW5nXG4gICAgICAgICAgICAvLyBtdXRhdGlvbiB3b3VsZCBtaXNzIGBmb29gLlxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCA9PT0gdCAmJiBlLmxlbmd0aCA+IDEgJiYgKGUgPSBlLnBvcExhc3QoKSwgdCA9IG4uZmllbGQoZSkpLCBudWxsID09PSB0ID8gci5kZWxldGUoZSkgOiByLnNldChlLCB0KSwgXG4gICAgICAgICAgICBpID0gaS5hZGQoZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfUGF0Y2hNdXRhdGlvbihlLmtleSwgciwgbmV3IEZpZWxkTWFzayhpLnRvQXJyYXkoKSksIFByZWNvbmRpdGlvbi5ub25lKCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBcHBsaWVzIHRoaXMgbXV0YXRpb24gdG8gdGhlIGdpdmVuIGRvY3VtZW50IGZvciB0aGUgcHVycG9zZXMgb2YgY29tcHV0aW5nIGFcbiAqIG5ldyByZW1vdGUgZG9jdW1lbnQuIElmIHRoZSBpbnB1dCBkb2N1bWVudCBkb2Vzbid0IG1hdGNoIHRoZSBleHBlY3RlZCBzdGF0ZVxuICogKGUuZy4gaXQgaXMgaW52YWxpZCBvciBvdXRkYXRlZCksIHRoZSBkb2N1bWVudCB0eXBlIG1heSB0cmFuc2l0aW9uIHRvXG4gKiB1bmtub3duLlxuICpcbiAqIEBwYXJhbSBtdXRhdGlvbiAtIFRoZSBtdXRhdGlvbiB0byBhcHBseS5cbiAqIEBwYXJhbSBkb2N1bWVudCAtIFRoZSBkb2N1bWVudCB0byBtdXRhdGUuIFRoZSBpbnB1dCBkb2N1bWVudCBjYW4gYmUgYW5cbiAqICAgICBpbnZhbGlkIGRvY3VtZW50IGlmIHRoZSBjbGllbnQgaGFzIG5vIGtub3dsZWRnZSBvZiB0aGUgcHJlLW11dGF0aW9uIHN0YXRlXG4gKiAgICAgb2YgdGhlIGRvY3VtZW50LlxuICogQHBhcmFtIG11dGF0aW9uUmVzdWx0IC0gVGhlIHJlc3VsdCBvZiBhcHBseWluZyB0aGUgbXV0YXRpb24gZnJvbSB0aGUgYmFja2VuZC5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbXV0YXRpb25BcHBseVRvUmVtb3RlRG9jdW1lbnQoZSwgdCwgbikge1xuICAgIGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfU2V0TXV0YXRpb24gPyBmdW5jdGlvbiBfX1BSSVZBVEVfc2V0TXV0YXRpb25BcHBseVRvUmVtb3RlRG9jdW1lbnQoZSwgdCwgbikge1xuICAgICAgICAvLyBVbmxpa2Ugc2V0TXV0YXRpb25BcHBseVRvTG9jYWxWaWV3LCBpZiB3ZSdyZSBhcHBseWluZyBhIG11dGF0aW9uIHRvIGFcbiAgICAgICAgLy8gcmVtb3RlIGRvY3VtZW50IHRoZSBzZXJ2ZXIgaGFzIGFjY2VwdGVkIHRoZSBtdXRhdGlvbiBzbyB0aGUgcHJlY29uZGl0aW9uXG4gICAgICAgIC8vIG11c3QgaGF2ZSBoZWxkLlxuICAgICAgICBjb25zdCByID0gZS52YWx1ZS5jbG9uZSgpLCBpID0gX19QUklWQVRFX3NlcnZlclRyYW5zZm9ybVJlc3VsdHMoZS5maWVsZFRyYW5zZm9ybXMsIHQsIG4udHJhbnNmb3JtUmVzdWx0cyk7XG4gICAgICAgIHIuc2V0QWxsKGkpLCB0LmNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQobi52ZXJzaW9uLCByKS5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKTtcbiAgICB9KGUsIHQsIG4pIDogZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9QYXRjaE11dGF0aW9uID8gZnVuY3Rpb24gX19QUklWQVRFX3BhdGNoTXV0YXRpb25BcHBseVRvUmVtb3RlRG9jdW1lbnQoZSwgdCwgbikge1xuICAgICAgICBpZiAoIV9fUFJJVkFURV9wcmVjb25kaXRpb25Jc1ZhbGlkRm9yRG9jdW1lbnQoZS5wcmVjb25kaXRpb24sIHQpKSBcbiAgICAgICAgLy8gU2luY2UgdGhlIG11dGF0aW9uIHdhcyBub3QgcmVqZWN0ZWQsIHdlIGtub3cgdGhhdCB0aGUgcHJlY29uZGl0aW9uXG4gICAgICAgIC8vIG1hdGNoZWQgb24gdGhlIGJhY2tlbmQuIFdlIHRoZXJlZm9yZSBtdXN0IG5vdCBoYXZlIHRoZSBleHBlY3RlZCB2ZXJzaW9uXG4gICAgICAgIC8vIG9mIHRoZSBkb2N1bWVudCBpbiBvdXIgY2FjaGUgYW5kIGNvbnZlcnQgdG8gYW4gVW5rbm93bkRvY3VtZW50IHdpdGggYVxuICAgICAgICAvLyBrbm93biB1cGRhdGVUaW1lLlxuICAgICAgICByZXR1cm4gdm9pZCB0LmNvbnZlcnRUb1Vua25vd25Eb2N1bWVudChuLnZlcnNpb24pO1xuICAgICAgICBjb25zdCByID0gX19QUklWQVRFX3NlcnZlclRyYW5zZm9ybVJlc3VsdHMoZS5maWVsZFRyYW5zZm9ybXMsIHQsIG4udHJhbnNmb3JtUmVzdWx0cyksIGkgPSB0LmRhdGE7XG4gICAgICAgIGkuc2V0QWxsKF9fUFJJVkFURV9nZXRQYXRjaChlKSksIGkuc2V0QWxsKHIpLCB0LmNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQobi52ZXJzaW9uLCBpKS5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKTtcbiAgICB9KGUsIHQsIG4pIDogZnVuY3Rpb24gX19QUklWQVRFX2RlbGV0ZU11dGF0aW9uQXBwbHlUb1JlbW90ZURvY3VtZW50KGUsIHQsIG4pIHtcbiAgICAgICAgLy8gVW5saWtlIGFwcGx5VG9Mb2NhbFZpZXcsIGlmIHdlJ3JlIGFwcGx5aW5nIGEgbXV0YXRpb24gdG8gYSByZW1vdGVcbiAgICAgICAgLy8gZG9jdW1lbnQgdGhlIHNlcnZlciBoYXMgYWNjZXB0ZWQgdGhlIG11dGF0aW9uIHNvIHRoZSBwcmVjb25kaXRpb24gbXVzdFxuICAgICAgICAvLyBoYXZlIGhlbGQuXG4gICAgICAgIHQuY29udmVydFRvTm9Eb2N1bWVudChuLnZlcnNpb24pLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpO1xuICAgIH0oMCwgdCwgbik7XG59XG5cbi8qKlxuICogQXBwbGllcyB0aGlzIG11dGF0aW9uIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBmb3IgdGhlIHB1cnBvc2VzIG9mIGNvbXB1dGluZ1xuICogdGhlIG5ldyBsb2NhbCB2aWV3IG9mIGEgZG9jdW1lbnQuIElmIHRoZSBpbnB1dCBkb2N1bWVudCBkb2Vzbid0IG1hdGNoIHRoZVxuICogZXhwZWN0ZWQgc3RhdGUsIHRoZSBkb2N1bWVudCBpcyBub3QgbW9kaWZpZWQuXG4gKlxuICogQHBhcmFtIG11dGF0aW9uIC0gVGhlIG11dGF0aW9uIHRvIGFwcGx5LlxuICogQHBhcmFtIGRvY3VtZW50IC0gVGhlIGRvY3VtZW50IHRvIG11dGF0ZS4gVGhlIGlucHV0IGRvY3VtZW50IGNhbiBiZSBhblxuICogICAgIGludmFsaWQgZG9jdW1lbnQgaWYgdGhlIGNsaWVudCBoYXMgbm8ga25vd2xlZGdlIG9mIHRoZSBwcmUtbXV0YXRpb24gc3RhdGVcbiAqICAgICBvZiB0aGUgZG9jdW1lbnQuXG4gKiBAcGFyYW0gcHJldmlvdXNNYXNrIC0gVGhlIGZpZWxkcyB0aGF0IGhhdmUgYmVlbiB1cGRhdGVkIGJlZm9yZSBhcHBseWluZyB0aGlzIG11dGF0aW9uLlxuICogQHBhcmFtIGxvY2FsV3JpdGVUaW1lIC0gQSB0aW1lc3RhbXAgaW5kaWNhdGluZyB0aGUgbG9jYWwgd3JpdGUgdGltZSBvZiB0aGVcbiAqICAgICBiYXRjaCB0aGlzIG11dGF0aW9uIGlzIGEgcGFydCBvZi5cbiAqIEByZXR1cm5zIEEgYEZpZWxkTWFza2AgcmVwcmVzZW50aW5nIHRoZSBmaWVsZHMgdGhhdCBhcmUgY2hhbmdlZCBieSBhcHBseWluZyB0aGlzIG11dGF0aW9uLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9tdXRhdGlvbkFwcGx5VG9Mb2NhbFZpZXcoZSwgdCwgbiwgcikge1xuICAgIHJldHVybiBlIGluc3RhbmNlb2YgX19QUklWQVRFX1NldE11dGF0aW9uID8gZnVuY3Rpb24gX19QUklWQVRFX3NldE11dGF0aW9uQXBwbHlUb0xvY2FsVmlldyhlLCB0LCBuLCByKSB7XG4gICAgICAgIGlmICghX19QUklWQVRFX3ByZWNvbmRpdGlvbklzVmFsaWRGb3JEb2N1bWVudChlLnByZWNvbmRpdGlvbiwgdCkpIFxuICAgICAgICAvLyBUaGUgbXV0YXRpb24gZmFpbGVkIHRvIGFwcGx5IChlLmcuIGEgZG9jdW1lbnQgSUQgY3JlYXRlZCB3aXRoIGFkZCgpXG4gICAgICAgIC8vIGNhdXNlZCBhIG5hbWUgY29sbGlzaW9uKS5cbiAgICAgICAgcmV0dXJuIG47XG4gICAgICAgIGNvbnN0IGkgPSBlLnZhbHVlLmNsb25lKCksIHMgPSBfX1BSSVZBVEVfbG9jYWxUcmFuc2Zvcm1SZXN1bHRzKGUuZmllbGRUcmFuc2Zvcm1zLCByLCB0KTtcbiAgICAgICAgcmV0dXJuIGkuc2V0QWxsKHMpLCB0LmNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQodC52ZXJzaW9uLCBpKS5zZXRIYXNMb2NhbE11dGF0aW9ucygpLCBcbiAgICAgICAgbnVsbDtcbiAvLyBTZXRNdXRhdGlvbiBvdmVyd3JpdGVzIGFsbCBmaWVsZHMuXG4gICAgICAgIH1cbiAgICAvKipcbiAqIEEgbXV0YXRpb24gdGhhdCBtb2RpZmllcyBmaWVsZHMgb2YgdGhlIGRvY3VtZW50IGF0IHRoZSBnaXZlbiBrZXkgd2l0aCB0aGVcbiAqIGdpdmVuIHZhbHVlcy4gVGhlIHZhbHVlcyBhcmUgYXBwbGllZCB0aHJvdWdoIGEgZmllbGQgbWFzazpcbiAqXG4gKiAgKiBXaGVuIGEgZmllbGQgaXMgaW4gYm90aCB0aGUgbWFzayBhbmQgdGhlIHZhbHVlcywgdGhlIGNvcnJlc3BvbmRpbmcgZmllbGRcbiAqICAgIGlzIHVwZGF0ZWQuXG4gKiAgKiBXaGVuIGEgZmllbGQgaXMgaW4gbmVpdGhlciB0aGUgbWFzayBub3IgdGhlIHZhbHVlcywgdGhlIGNvcnJlc3BvbmRpbmdcbiAqICAgIGZpZWxkIGlzIHVubW9kaWZpZWQuXG4gKiAgKiBXaGVuIGEgZmllbGQgaXMgaW4gdGhlIG1hc2sgYnV0IG5vdCBpbiB0aGUgdmFsdWVzLCB0aGUgY29ycmVzcG9uZGluZyBmaWVsZFxuICogICAgaXMgZGVsZXRlZC5cbiAqICAqIFdoZW4gYSBmaWVsZCBpcyBub3QgaW4gdGhlIG1hc2sgYnV0IGlzIGluIHRoZSB2YWx1ZXMsIHRoZSB2YWx1ZXMgbWFwIGlzXG4gKiAgICBpZ25vcmVkLlxuICovIChlLCB0LCBuLCByKSA6IGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfUGF0Y2hNdXRhdGlvbiA/IGZ1bmN0aW9uIF9fUFJJVkFURV9wYXRjaE11dGF0aW9uQXBwbHlUb0xvY2FsVmlldyhlLCB0LCBuLCByKSB7XG4gICAgICAgIGlmICghX19QUklWQVRFX3ByZWNvbmRpdGlvbklzVmFsaWRGb3JEb2N1bWVudChlLnByZWNvbmRpdGlvbiwgdCkpIHJldHVybiBuO1xuICAgICAgICBjb25zdCBpID0gX19QUklWQVRFX2xvY2FsVHJhbnNmb3JtUmVzdWx0cyhlLmZpZWxkVHJhbnNmb3JtcywgciwgdCksIHMgPSB0LmRhdGE7XG4gICAgICAgIGlmIChzLnNldEFsbChfX1BSSVZBVEVfZ2V0UGF0Y2goZSkpLCBzLnNldEFsbChpKSwgdC5jb252ZXJ0VG9Gb3VuZERvY3VtZW50KHQudmVyc2lvbiwgcykuc2V0SGFzTG9jYWxNdXRhdGlvbnMoKSwgXG4gICAgICAgIG51bGwgPT09IG4pIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gbi51bmlvbldpdGgoZS5maWVsZE1hc2suZmllbGRzKS51bmlvbldpdGgoZS5maWVsZFRyYW5zZm9ybXMubWFwKChlID0+IGUuZmllbGQpKSk7XG4gICAgfVxuICAgIC8qKlxuICogUmV0dXJucyBhIEZpZWxkUGF0aC9WYWx1ZSBtYXAgd2l0aCB0aGUgY29udGVudCBvZiB0aGUgUGF0Y2hNdXRhdGlvbi5cbiAqLyAoZSwgdCwgbiwgcikgOiBmdW5jdGlvbiBfX1BSSVZBVEVfZGVsZXRlTXV0YXRpb25BcHBseVRvTG9jYWxWaWV3KGUsIHQsIG4pIHtcbiAgICAgICAgaWYgKF9fUFJJVkFURV9wcmVjb25kaXRpb25Jc1ZhbGlkRm9yRG9jdW1lbnQoZS5wcmVjb25kaXRpb24sIHQpKSByZXR1cm4gdC5jb252ZXJ0VG9Ob0RvY3VtZW50KHQudmVyc2lvbikuc2V0SGFzTG9jYWxNdXRhdGlvbnMoKSwgXG4gICAgICAgIG51bGw7XG4gICAgICAgIHJldHVybiBuO1xuICAgIH1cbiAgICAvKipcbiAqIEEgbXV0YXRpb24gdGhhdCB2ZXJpZmllcyB0aGUgZXhpc3RlbmNlIG9mIHRoZSBkb2N1bWVudCBhdCB0aGUgZ2l2ZW4ga2V5IHdpdGhcbiAqIHRoZSBwcm92aWRlZCBwcmVjb25kaXRpb24uXG4gKlxuICogVGhlIGB2ZXJpZnlgIG9wZXJhdGlvbiBpcyBvbmx5IHVzZWQgaW4gVHJhbnNhY3Rpb25zLCBhbmQgdGhpcyBjbGFzcyBzZXJ2ZXNcbiAqIHByaW1hcmlseSB0byBmYWNpbGl0YXRlIHNlcmlhbGl6YXRpb24gaW50byBwcm90b3MuXG4gKi8gKGUsIHQsIG4pO1xufVxuXG4vKipcbiAqIElmIHRoaXMgbXV0YXRpb24gaXMgbm90IGlkZW1wb3RlbnQsIHJldHVybnMgdGhlIGJhc2UgdmFsdWUgdG8gcGVyc2lzdCB3aXRoXG4gKiB0aGlzIG11dGF0aW9uLiBJZiBhIGJhc2UgdmFsdWUgaXMgcmV0dXJuZWQsIHRoZSBtdXRhdGlvbiBpcyBhbHdheXMgYXBwbGllZFxuICogdG8gdGhpcyBiYXNlIHZhbHVlLCBldmVuIGlmIGRvY3VtZW50IGhhcyBhbHJlYWR5IGJlZW4gdXBkYXRlZC5cbiAqXG4gKiBUaGUgYmFzZSB2YWx1ZSBpcyBhIHNwYXJzZSBvYmplY3QgdGhhdCBjb25zaXN0cyBvZiBvbmx5IHRoZSBkb2N1bWVudFxuICogZmllbGRzIGZvciB3aGljaCB0aGlzIG11dGF0aW9uIGNvbnRhaW5zIGEgbm9uLWlkZW1wb3RlbnQgdHJhbnNmb3JtYXRpb25cbiAqIChlLmcuIGEgbnVtZXJpYyBpbmNyZW1lbnQpLiBUaGUgcHJvdmlkZWQgdmFsdWUgZ3VhcmFudGVlcyBjb25zaXN0ZW50XG4gKiBiZWhhdmlvciBmb3Igbm9uLWlkZW1wb3RlbnQgdHJhbnNmb3JtcyBhbmQgYWxsb3cgdXMgdG8gcmV0dXJuIHRoZSBzYW1lXG4gKiBsYXRlbmN5LWNvbXBlbnNhdGVkIHZhbHVlIGV2ZW4gaWYgdGhlIGJhY2tlbmQgaGFzIGFscmVhZHkgYXBwbGllZCB0aGVcbiAqIG11dGF0aW9uLiBUaGUgYmFzZSB2YWx1ZSBpcyBudWxsIGZvciBpZGVtcG90ZW50IG11dGF0aW9ucywgYXMgdGhleSBjYW4gYmVcbiAqIHJlLXBsYXllZCBldmVuIGlmIHRoZSBiYWNrZW5kIGhhcyBhbHJlYWR5IGFwcGxpZWQgdGhlbS5cbiAqXG4gKiBAcmV0dXJucyBhIGJhc2UgdmFsdWUgdG8gc3RvcmUgYWxvbmcgd2l0aCB0aGUgbXV0YXRpb24sIG9yIG51bGwgZm9yXG4gKiBpZGVtcG90ZW50IG11dGF0aW9ucy5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbXV0YXRpb25FeHRyYWN0QmFzZVZhbHVlKGUsIHQpIHtcbiAgICBsZXQgbiA9IG51bGw7XG4gICAgZm9yIChjb25zdCByIG9mIGUuZmllbGRUcmFuc2Zvcm1zKSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmRhdGEuZmllbGQoci5maWVsZCksIGkgPSBfX1BSSVZBVEVfY29tcHV0ZVRyYW5zZm9ybU9wZXJhdGlvbkJhc2VWYWx1ZShyLnRyYW5zZm9ybSwgZSB8fCBudWxsKTtcbiAgICAgICAgbnVsbCAhPSBpICYmIChudWxsID09PSBuICYmIChuID0gT2JqZWN0VmFsdWUuZW1wdHkoKSksIG4uc2V0KHIuZmllbGQsIGkpKTtcbiAgICB9XG4gICAgcmV0dXJuIG4gfHwgbnVsbDtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX211dGF0aW9uRXF1YWxzKGUsIHQpIHtcbiAgICByZXR1cm4gZS50eXBlID09PSB0LnR5cGUgJiYgKCEhZS5rZXkuaXNFcXVhbCh0LmtleSkgJiYgKCEhZS5wcmVjb25kaXRpb24uaXNFcXVhbCh0LnByZWNvbmRpdGlvbikgJiYgKCEhZnVuY3Rpb24gX19QUklWQVRFX2ZpZWxkVHJhbnNmb3Jtc0FyZUVxdWFsKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gZSAmJiB2b2lkIDAgPT09IHQgfHwgISghZSB8fCAhdCkgJiYgX19QUklWQVRFX2FycmF5RXF1YWxzKGUsIHQsICgoZSwgdCkgPT4gX19QUklWQVRFX2ZpZWxkVHJhbnNmb3JtRXF1YWxzKGUsIHQpKSk7XG4gICAgfShlLmZpZWxkVHJhbnNmb3JtcywgdC5maWVsZFRyYW5zZm9ybXMpICYmICgwIC8qIE11dGF0aW9uVHlwZS5TZXQgKi8gPT09IGUudHlwZSA/IGUudmFsdWUuaXNFcXVhbCh0LnZhbHVlKSA6IDEgLyogTXV0YXRpb25UeXBlLlBhdGNoICovICE9PSBlLnR5cGUgfHwgZS5kYXRhLmlzRXF1YWwodC5kYXRhKSAmJiBlLmZpZWxkTWFzay5pc0VxdWFsKHQuZmllbGRNYXNrKSkpKSk7XG59XG5cbi8qKlxuICogQSBtdXRhdGlvbiB0aGF0IGNyZWF0ZXMgb3IgcmVwbGFjZXMgdGhlIGRvY3VtZW50IGF0IHRoZSBnaXZlbiBrZXkgd2l0aCB0aGVcbiAqIG9iamVjdCB2YWx1ZSBjb250ZW50cy5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfU2V0TXV0YXRpb24gZXh0ZW5kcyBNdXRhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgciA9IFtdKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMua2V5ID0gZSwgdGhpcy52YWx1ZSA9IHQsIHRoaXMucHJlY29uZGl0aW9uID0gbiwgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSByLCBcbiAgICAgICAgdGhpcy50eXBlID0gMCAvKiBNdXRhdGlvblR5cGUuU2V0ICovO1xuICAgIH1cbiAgICBnZXRGaWVsZE1hc2soKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX1BhdGNoTXV0YXRpb24gZXh0ZW5kcyBNdXRhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgciwgaSA9IFtdKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMua2V5ID0gZSwgdGhpcy5kYXRhID0gdCwgdGhpcy5maWVsZE1hc2sgPSBuLCB0aGlzLnByZWNvbmRpdGlvbiA9IHIsIFxuICAgICAgICB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IGksIHRoaXMudHlwZSA9IDEgLyogTXV0YXRpb25UeXBlLlBhdGNoICovO1xuICAgIH1cbiAgICBnZXRGaWVsZE1hc2soKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpZWxkTWFzaztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9nZXRQYXRjaChlKSB7XG4gICAgY29uc3QgdCA9IG5ldyBNYXA7XG4gICAgcmV0dXJuIGUuZmllbGRNYXNrLmZpZWxkcy5mb3JFYWNoKChuID0+IHtcbiAgICAgICAgaWYgKCFuLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgY29uc3QgciA9IGUuZGF0YS5maWVsZChuKTtcbiAgICAgICAgICAgIHQuc2V0KG4sIHIpO1xuICAgICAgICB9XG4gICAgfSkpLCB0O1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBsaXN0IG9mIFwidHJhbnNmb3JtIHJlc3VsdHNcIiAoYSB0cmFuc2Zvcm0gcmVzdWx0IGlzIGEgZmllbGQgdmFsdWVcbiAqIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIGEgdHJhbnNmb3JtKSBmb3IgdXNlIGFmdGVyIGEgbXV0YXRpb25cbiAqIGNvbnRhaW5pbmcgdHJhbnNmb3JtcyBoYXMgYmVlbiBhY2tub3dsZWRnZWQgYnkgdGhlIHNlcnZlci5cbiAqXG4gKiBAcGFyYW0gZmllbGRUcmFuc2Zvcm1zIC0gVGhlIGZpZWxkIHRyYW5zZm9ybXMgdG8gYXBwbHkgdGhlIHJlc3VsdCB0by5cbiAqIEBwYXJhbSBtdXRhYmxlRG9jdW1lbnQgLSBUaGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQgYWZ0ZXIgYXBwbHlpbmcgYWxsXG4gKiBwcmV2aW91cyBtdXRhdGlvbnMuXG4gKiBAcGFyYW0gc2VydmVyVHJhbnNmb3JtUmVzdWx0cyAtIFRoZSB0cmFuc2Zvcm0gcmVzdWx0cyByZWNlaXZlZCBieSB0aGUgc2VydmVyLlxuICogQHJldHVybnMgVGhlIHRyYW5zZm9ybSByZXN1bHRzIGxpc3QuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3NlcnZlclRyYW5zZm9ybVJlc3VsdHMoZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBuZXcgTWFwO1xuICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KGUubGVuZ3RoID09PSBuLmxlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHMgPSBlW2ldLCBvID0gcy50cmFuc2Zvcm0sIF8gPSB0LmRhdGEuZmllbGQocy5maWVsZCk7XG4gICAgICAgIHIuc2V0KHMuZmllbGQsIF9fUFJJVkFURV9hcHBseVRyYW5zZm9ybU9wZXJhdGlvblRvUmVtb3RlRG9jdW1lbnQobywgXywgbltpXSkpO1xuICAgIH1cbiAgICByZXR1cm4gcjtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbGlzdCBvZiBcInRyYW5zZm9ybSByZXN1bHRzXCIgKGEgdHJhbnNmb3JtIHJlc3VsdCBpcyBhIGZpZWxkIHZhbHVlXG4gKiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdCBvZiBhcHBseWluZyBhIHRyYW5zZm9ybSkgZm9yIHVzZSB3aGVuIGFwcGx5aW5nIGFcbiAqIHRyYW5zZm9ybSBsb2NhbGx5LlxuICpcbiAqIEBwYXJhbSBmaWVsZFRyYW5zZm9ybXMgLSBUaGUgZmllbGQgdHJhbnNmb3JtcyB0byBhcHBseSB0aGUgcmVzdWx0IHRvLlxuICogQHBhcmFtIGxvY2FsV3JpdGVUaW1lIC0gVGhlIGxvY2FsIHRpbWUgb2YgdGhlIG11dGF0aW9uICh1c2VkIHRvXG4gKiAgICAgZ2VuZXJhdGUgU2VydmVyVGltZXN0YW1wVmFsdWVzKS5cbiAqIEBwYXJhbSBtdXRhYmxlRG9jdW1lbnQgLSBUaGUgZG9jdW1lbnQgdG8gYXBwbHkgdHJhbnNmb3JtcyBvbi5cbiAqIEByZXR1cm5zIFRoZSB0cmFuc2Zvcm0gcmVzdWx0cyBsaXN0LlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFRyYW5zZm9ybVJlc3VsdHMoZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBuZXcgTWFwO1xuICAgIGZvciAoY29uc3QgaSBvZiBlKSB7XG4gICAgICAgIGNvbnN0IGUgPSBpLnRyYW5zZm9ybSwgcyA9IG4uZGF0YS5maWVsZChpLmZpZWxkKTtcbiAgICAgICAgci5zZXQoaS5maWVsZCwgX19QUklWQVRFX2FwcGx5VHJhbnNmb3JtT3BlcmF0aW9uVG9Mb2NhbFZpZXcoZSwgcywgdCkpO1xuICAgIH1cbiAgICByZXR1cm4gcjtcbn1cblxuLyoqIEEgbXV0YXRpb24gdGhhdCBkZWxldGVzIHRoZSBkb2N1bWVudCBhdCB0aGUgZ2l2ZW4ga2V5LiAqLyBjbGFzcyBfX1BSSVZBVEVfRGVsZXRlTXV0YXRpb24gZXh0ZW5kcyBNdXRhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmtleSA9IGUsIHRoaXMucHJlY29uZGl0aW9uID0gdCwgdGhpcy50eXBlID0gMiAvKiBNdXRhdGlvblR5cGUuRGVsZXRlICovICwgXG4gICAgICAgIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gW107XG4gICAgfVxuICAgIGdldEZpZWxkTWFzaygpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfVmVyaWZ5TXV0YXRpb24gZXh0ZW5kcyBNdXRhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmtleSA9IGUsIHRoaXMucHJlY29uZGl0aW9uID0gdCwgdGhpcy50eXBlID0gMyAvKiBNdXRhdGlvblR5cGUuVmVyaWZ5ICovICwgXG4gICAgICAgIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gW107XG4gICAgfVxuICAgIGdldEZpZWxkTWFzaygpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGJhdGNoIG9mIG11dGF0aW9ucyB0aGF0IHdpbGwgYmUgc2VudCBhcyBvbmUgdW5pdCB0byB0aGUgYmFja2VuZC5cbiAqLyBjbGFzcyBNdXRhdGlvbkJhdGNoIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gYmF0Y2hJZCAtIFRoZSB1bmlxdWUgSUQgb2YgdGhpcyBtdXRhdGlvbiBiYXRjaC5cbiAgICAgKiBAcGFyYW0gbG9jYWxXcml0ZVRpbWUgLSBUaGUgb3JpZ2luYWwgd3JpdGUgdGltZSBvZiB0aGlzIG11dGF0aW9uLlxuICAgICAqIEBwYXJhbSBiYXNlTXV0YXRpb25zIC0gTXV0YXRpb25zIHRoYXQgYXJlIHVzZWQgdG8gcG9wdWxhdGUgdGhlIGJhc2VcbiAgICAgKiB2YWx1ZXMgd2hlbiB0aGlzIG11dGF0aW9uIGlzIGFwcGxpZWQgbG9jYWxseS4gVGhpcyBjYW4gYmUgdXNlZCB0byBsb2NhbGx5XG4gICAgICogb3ZlcndyaXRlIHZhbHVlcyB0aGF0IGFyZSBwZXJzaXN0ZWQgaW4gdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZS4gQmFzZVxuICAgICAqIG11dGF0aW9ucyBhcmUgbmV2ZXIgc2VudCB0byB0aGUgYmFja2VuZC5cbiAgICAgKiBAcGFyYW0gbXV0YXRpb25zIC0gVGhlIHVzZXItcHJvdmlkZWQgbXV0YXRpb25zIGluIHRoaXMgbXV0YXRpb24gYmF0Y2guXG4gICAgICogVXNlci1wcm92aWRlZCBtdXRhdGlvbnMgYXJlIGFwcGxpZWQgYm90aCBsb2NhbGx5IGFuZCByZW1vdGVseSBvbiB0aGVcbiAgICAgKiBiYWNrZW5kLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgdGhpcy5iYXRjaElkID0gZSwgdGhpcy5sb2NhbFdyaXRlVGltZSA9IHQsIHRoaXMuYmFzZU11dGF0aW9ucyA9IG4sIHRoaXMubXV0YXRpb25zID0gcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyBhbGwgdGhlIG11dGF0aW9ucyBpbiB0aGlzIE11dGF0aW9uQmF0Y2ggdG8gdGhlIHNwZWNpZmllZCBkb2N1bWVudFxuICAgICAqIHRvIGNvbXB1dGUgdGhlIHN0YXRlIG9mIHRoZSByZW1vdGUgZG9jdW1lbnRcbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudCAtIFRoZSBkb2N1bWVudCB0byBhcHBseSBtdXRhdGlvbnMgdG8uXG4gICAgICogQHBhcmFtIGJhdGNoUmVzdWx0IC0gVGhlIHJlc3VsdCBvZiBhcHBseWluZyB0aGUgTXV0YXRpb25CYXRjaCB0byB0aGVcbiAgICAgKiBiYWNrZW5kLlxuICAgICAqLyAgICBhcHBseVRvUmVtb3RlRG9jdW1lbnQoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdC5tdXRhdGlvblJlc3VsdHM7XG4gICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgdGhpcy5tdXRhdGlvbnMubGVuZ3RoOyB0KyspIHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLm11dGF0aW9uc1t0XTtcbiAgICAgICAgICAgIGlmIChyLmtleS5pc0VxdWFsKGUua2V5KSkge1xuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9tdXRhdGlvbkFwcGx5VG9SZW1vdGVEb2N1bWVudChyLCBlLCBuW3RdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21wdXRlcyB0aGUgbG9jYWwgdmlldyBvZiBhIGRvY3VtZW50IGdpdmVuIGFsbCB0aGUgbXV0YXRpb25zIGluIHRoaXNcbiAgICAgKiBiYXRjaC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudCAtIFRoZSBkb2N1bWVudCB0byBhcHBseSBtdXRhdGlvbnMgdG8uXG4gICAgICogQHBhcmFtIG11dGF0ZWRGaWVsZHMgLSBGaWVsZHMgdGhhdCBoYXZlIGJlZW4gdXBkYXRlZCBiZWZvcmUgYXBwbHlpbmcgdGhpcyBtdXRhdGlvbiBiYXRjaC5cbiAgICAgKiBAcmV0dXJucyBBIGBGaWVsZE1hc2tgIHJlcHJlc2VudGluZyBhbGwgdGhlIGZpZWxkcyB0aGF0IGFyZSBtdXRhdGVkLlxuICAgICAqLyAgICBhcHBseVRvTG9jYWxWaWV3KGUsIHQpIHtcbiAgICAgICAgLy8gRmlyc3QsIGFwcGx5IHRoZSBiYXNlIHN0YXRlLiBUaGlzIGFsbG93cyB1cyB0byBhcHBseSBub24taWRlbXBvdGVudFxuICAgICAgICAvLyB0cmFuc2Zvcm0gYWdhaW5zdCBhIGNvbnNpc3RlbnQgc2V0IG9mIHZhbHVlcy5cbiAgICAgICAgZm9yIChjb25zdCBuIG9mIHRoaXMuYmFzZU11dGF0aW9ucykgbi5rZXkuaXNFcXVhbChlLmtleSkgJiYgKHQgPSBfX1BSSVZBVEVfbXV0YXRpb25BcHBseVRvTG9jYWxWaWV3KG4sIGUsIHQsIHRoaXMubG9jYWxXcml0ZVRpbWUpKTtcbiAgICAgICAgLy8gU2Vjb25kLCBhcHBseSBhbGwgdXNlci1wcm92aWRlZCBtdXRhdGlvbnMuXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIHRoaXMubXV0YXRpb25zKSBuLmtleS5pc0VxdWFsKGUua2V5KSAmJiAodCA9IF9fUFJJVkFURV9tdXRhdGlvbkFwcGx5VG9Mb2NhbFZpZXcobiwgZSwgdCwgdGhpcy5sb2NhbFdyaXRlVGltZSkpO1xuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tcHV0ZXMgdGhlIGxvY2FsIHZpZXcgZm9yIGFsbCBwcm92aWRlZCBkb2N1bWVudHMgZ2l2ZW4gdGhlIG11dGF0aW9ucyBpblxuICAgICAqIHRoaXMgYmF0Y2guIFJldHVybnMgYSBgRG9jdW1lbnRLZXlgIHRvIGBNdXRhdGlvbmAgbWFwIHdoaWNoIGNhbiBiZSB1c2VkIHRvXG4gICAgICogcmVwbGFjZSBhbGwgdGhlIG11dGF0aW9uIGFwcGxpY2F0aW9ucy5cbiAgICAgKi8gICAgYXBwbHlUb0xvY2FsRG9jdW1lbnRTZXQoZSwgdCkge1xuICAgICAgICAvLyBUT0RPKG1yc2NobWlkdCk6IFRoaXMgaW1wbGVtZW50YXRpb24gaXMgTyhuXjIpLiBJZiB3ZSBhcHBseSB0aGUgbXV0YXRpb25zXG4gICAgICAgIC8vIGRpcmVjdGx5IChhcyBkb25lIGluIGBhcHBseVRvTG9jYWxWaWV3KClgKSwgd2UgY2FuIHJlZHVjZSB0aGUgY29tcGxleGl0eVxuICAgICAgICAvLyB0byBPKG4pLlxuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX25ld011dGF0aW9uTWFwKCk7XG4gICAgICAgIHJldHVybiB0aGlzLm11dGF0aW9ucy5mb3JFYWNoKChyID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBlLmdldChyLmtleSksIHMgPSBpLm92ZXJsYXllZERvY3VtZW50O1xuICAgICAgICAgICAgLy8gVE9ETyhtdXRhYmxlZG9jdW1lbnRzKTogVGhpcyBtZXRob2Qgc2hvdWxkIHRha2UgYSBNdXRhYmxlRG9jdW1lbnRNYXBcbiAgICAgICAgICAgIC8vIGFuZCB3ZSBzaG91bGQgcmVtb3ZlIHRoaXMgY2FzdC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvID0gdGhpcy5hcHBseVRvTG9jYWxWaWV3KHMsIGkubXV0YXRlZEZpZWxkcyk7XG4gICAgICAgICAgICAvLyBTZXQgbXV0YXRlZEZpZWxkcyB0byBudWxsIGlmIHRoZSBkb2N1bWVudCBpcyBvbmx5IGZyb20gbG9jYWwgbXV0YXRpb25zLlxuICAgICAgICAgICAgLy8gVGhpcyBjcmVhdGVzIGEgU2V0IG9yIERlbGV0ZSBtdXRhdGlvbiwgaW5zdGVhZCBvZiB0cnlpbmcgdG8gY3JlYXRlIGFcbiAgICAgICAgICAgIC8vIHBhdGNoIG11dGF0aW9uIGFzIHRoZSBvdmVybGF5LlxuICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHQuaGFzKHIua2V5KSA/IG51bGwgOiBvO1xuICAgICAgICAgICAgY29uc3QgXyA9IF9fUFJJVkFURV9jYWxjdWxhdGVPdmVybGF5TXV0YXRpb24ocywgbyk7XG4gICAgICAgICAgICBudWxsICE9PSBfICYmIG4uc2V0KHIua2V5LCBfKSwgcy5pc1ZhbGlkRG9jdW1lbnQoKSB8fCBzLmNvbnZlcnRUb05vRG9jdW1lbnQoU25hcHNob3RWZXJzaW9uLm1pbigpKTtcbiAgICAgICAgfSkpLCBuO1xuICAgIH1cbiAgICBrZXlzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tdXRhdGlvbnMucmVkdWNlKCgoZSwgdCkgPT4gZS5hZGQodC5rZXkpKSwgX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCkpO1xuICAgIH1cbiAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmF0Y2hJZCA9PT0gZS5iYXRjaElkICYmIF9fUFJJVkFURV9hcnJheUVxdWFscyh0aGlzLm11dGF0aW9ucywgZS5tdXRhdGlvbnMsICgoZSwgdCkgPT4gX19QUklWQVRFX211dGF0aW9uRXF1YWxzKGUsIHQpKSkgJiYgX19QUklWQVRFX2FycmF5RXF1YWxzKHRoaXMuYmFzZU11dGF0aW9ucywgZS5iYXNlTXV0YXRpb25zLCAoKGUsIHQpID0+IF9fUFJJVkFURV9tdXRhdGlvbkVxdWFscyhlLCB0KSkpO1xuICAgIH1cbn1cblxuLyoqIFRoZSByZXN1bHQgb2YgYXBwbHlpbmcgYSBtdXRhdGlvbiBiYXRjaCB0byB0aGUgYmFja2VuZC4gKi8gY2xhc3MgTXV0YXRpb25CYXRjaFJlc3VsdCB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgXG4gICAgLyoqXG4gICAgICogQSBwcmUtY29tcHV0ZWQgbWFwcGluZyBmcm9tIGVhY2ggbXV0YXRlZCBkb2N1bWVudCB0byB0aGUgcmVzdWx0aW5nXG4gICAgICogdmVyc2lvbi5cbiAgICAgKi9cbiAgICByKSB7XG4gICAgICAgIHRoaXMuYmF0Y2ggPSBlLCB0aGlzLmNvbW1pdFZlcnNpb24gPSB0LCB0aGlzLm11dGF0aW9uUmVzdWx0cyA9IG4sIHRoaXMuZG9jVmVyc2lvbnMgPSByO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IE11dGF0aW9uQmF0Y2hSZXN1bHQgZm9yIHRoZSBnaXZlbiBiYXRjaCBhbmQgcmVzdWx0cy4gVGhlcmVcbiAgICAgKiBtdXN0IGJlIG9uZSByZXN1bHQgZm9yIGVhY2ggbXV0YXRpb24gaW4gdGhlIGJhdGNoLiBUaGlzIHN0YXRpYyBmYWN0b3J5XG4gICAgICogY2FjaGVzIGEgZG9jdW1lbnQ9Jmd0O3ZlcnNpb24gbWFwcGluZyAoZG9jVmVyc2lvbnMpLlxuICAgICAqLyAgICBzdGF0aWMgZnJvbShlLCB0LCBuKSB7XG4gICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KGUubXV0YXRpb25zLmxlbmd0aCA9PT0gbi5sZW5ndGgpO1xuICAgICAgICBsZXQgciA9IGZ1bmN0aW9uIF9fUFJJVkFURV9kb2N1bWVudFZlcnNpb25NYXAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX2U7XG4gICAgICAgIH0oKTtcbiAgICAgICAgY29uc3QgaSA9IGUubXV0YXRpb25zO1xuICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IGkubGVuZ3RoOyBlKyspIHIgPSByLmluc2VydChpW2VdLmtleSwgbltlXS52ZXJzaW9uKTtcbiAgICAgICAgcmV0dXJuIG5ldyBNdXRhdGlvbkJhdGNoUmVzdWx0KGUsIHQsIG4sIHIpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50YXRpb24gb2YgYW4gb3ZlcmxheSBjb21wdXRlZCBieSBGaXJlc3RvcmUuXG4gKlxuICogSG9sZHMgaW5mb3JtYXRpb24gYWJvdXQgYSBtdXRhdGlvbiBhbmQgdGhlIGxhcmdlc3QgYmF0Y2ggaWQgaW4gRmlyZXN0b3JlIHdoZW5cbiAqIHRoZSBtdXRhdGlvbiB3YXMgY3JlYXRlZC5cbiAqLyBjbGFzcyBPdmVybGF5IHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMubGFyZ2VzdEJhdGNoSWQgPSBlLCB0aGlzLm11dGF0aW9uID0gdDtcbiAgICB9XG4gICAgZ2V0S2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tdXRhdGlvbi5rZXk7XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gZSAmJiB0aGlzLm11dGF0aW9uID09PSBlLm11dGF0aW9uO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIGBPdmVybGF5e1xcbiAgICAgIGxhcmdlc3RCYXRjaElkOiAke3RoaXMubGFyZ2VzdEJhdGNoSWR9LFxcbiAgICAgIG11dGF0aW9uOiAke3RoaXMubXV0YXRpb24udG9TdHJpbmcoKX1cXG4gICAgfWA7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDb25jcmV0ZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgQWdncmVnYXRlIHR5cGUuXG4gKi8gY2xhc3MgX19QUklWQVRFX0FnZ3JlZ2F0ZUltcGwge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4pIHtcbiAgICAgICAgdGhpcy5hbGlhcyA9IGUsIHRoaXMuYWdncmVnYXRlVHlwZSA9IHQsIHRoaXMuZmllbGRQYXRoID0gbjtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIEV4aXN0ZW5jZUZpbHRlciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLmNvdW50ID0gZSwgdGhpcy51bmNoYW5nZWROYW1lcyA9IHQ7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBFcnJvciBDb2RlcyBkZXNjcmliaW5nIHRoZSBkaWZmZXJlbnQgd2F5cyBHUlBDIGNhbiBmYWlsLiBUaGVzZSBhcmUgY29waWVkXG4gKiBkaXJlY3RseSBmcm9tIEdSUEMncyBzb3VyY2VzIGhlcmU6XG4gKlxuICogaHR0cHM6Ly9naXRodWIuY29tL2dycGMvZ3JwYy9ibG9iL2JjZWVjOTRlYTRmYzVmMDA4NWQ4MTIzNWQ4ZTFjMDY3OThkYzM0MWEvaW5jbHVkZS9ncnBjJTJCJTJCL2ltcGwvY29kZWdlbi9zdGF0dXNfY29kZV9lbnVtLmhcbiAqXG4gKiBJbXBvcnRhbnQhIFRoZSBuYW1lcyBvZiB0aGVzZSBpZGVudGlmaWVycyBtYXR0ZXIgYmVjYXVzZSB0aGUgc3RyaW5nIGZvcm1zXG4gKiBhcmUgdXNlZCBmb3IgcmV2ZXJzZSBsb29rdXBzIGZyb20gdGhlIHdlYmNoYW5uZWwgc3RyZWFtLiBEbyBOT1QgY2hhbmdlIHRoZVxuICogbmFtZXMgb2YgdGhlc2UgaWRlbnRpZmllcnMgb3IgY2hhbmdlIHRoaXMgaW50byBhIGNvbnN0IGVudW0uXG4gKi8gdmFyIGNlLCBsZTtcblxuLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgYW4gZXJyb3IgY29kZSByZXByZXNlbnRzIGEgcGVybWFuZW50IGVycm9yIHdoZW4gcmVjZWl2ZWRcbiAqIGluIHJlc3BvbnNlIHRvIGEgbm9uLXdyaXRlIG9wZXJhdGlvbi5cbiAqXG4gKiBTZWUgaXNQZXJtYW5lbnRXcml0ZUVycm9yIGZvciBjbGFzc2lmeWluZyB3cml0ZSBlcnJvcnMuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9pc1Blcm1hbmVudEVycm9yKGUpIHtcbiAgICBzd2l0Y2ggKGUpIHtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBmYWlsKCk7XG5cbiAgICAgIGNhc2UgQy5DQU5DRUxMRUQ6XG4gICAgICBjYXNlIEMuVU5LTk9XTjpcbiAgICAgIGNhc2UgQy5ERUFETElORV9FWENFRURFRDpcbiAgICAgIGNhc2UgQy5SRVNPVVJDRV9FWEhBVVNURUQ6XG4gICAgICBjYXNlIEMuSU5URVJOQUw6XG4gICAgICBjYXNlIEMuVU5BVkFJTEFCTEU6XG4gLy8gVW5hdXRoZW50aWNhdGVkIG1lYW5zIHNvbWV0aGluZyB3ZW50IHdyb25nIHdpdGggb3VyIHRva2VuIGFuZCB3ZSBuZWVkXG4gICAgICAgIC8vIHRvIHJldHJ5IHdpdGggbmV3IGNyZWRlbnRpYWxzIHdoaWNoIHdpbGwgaGFwcGVuIGF1dG9tYXRpY2FsbHkuXG4gICAgICAgICAgICAgIGNhc2UgQy5VTkFVVEhFTlRJQ0FURUQ6XG4gICAgICAgIHJldHVybiAhMTtcblxuICAgICAgY2FzZSBDLklOVkFMSURfQVJHVU1FTlQ6XG4gICAgICBjYXNlIEMuTk9UX0ZPVU5EOlxuICAgICAgY2FzZSBDLkFMUkVBRFlfRVhJU1RTOlxuICAgICAgY2FzZSBDLlBFUk1JU1NJT05fREVOSUVEOlxuICAgICAgY2FzZSBDLkZBSUxFRF9QUkVDT05ESVRJT046XG4gLy8gQWJvcnRlZCBtaWdodCBiZSByZXRyaWVkIGluIHNvbWUgc2NlbmFyaW9zLCBidXQgdGhhdCBpcyBkZXBlbmRhbnQgb25cbiAgICAgICAgLy8gdGhlIGNvbnRleHQgYW5kIHNob3VsZCBoYW5kbGVkIGluZGl2aWR1YWxseSBieSB0aGUgY2FsbGluZyBjb2RlLlxuICAgICAgICAvLyBTZWUgaHR0cHM6Ly9jbG91ZC5nb29nbGUuY29tL2FwaXMvZGVzaWduL2Vycm9ycy5cbiAgICAgICAgICAgICAgY2FzZSBDLkFCT1JURUQ6XG4gICAgICBjYXNlIEMuT1VUX09GX1JBTkdFOlxuICAgICAgY2FzZSBDLlVOSU1QTEVNRU5URUQ6XG4gICAgICBjYXNlIEMuREFUQV9MT1NTOlxuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxufVxuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciBhbiBlcnJvciBjb2RlIHJlcHJlc2VudHMgYSBwZXJtYW5lbnQgZXJyb3Igd2hlbiByZWNlaXZlZFxuICogaW4gcmVzcG9uc2UgdG8gYSB3cml0ZSBvcGVyYXRpb24uXG4gKlxuICogV3JpdGUgb3BlcmF0aW9ucyBtdXN0IGJlIGhhbmRsZWQgc3BlY2lhbGx5IGJlY2F1c2UgYXMgb2YgYi8xMTk0Mzc3NjQsIEFCT1JURURcbiAqIGVycm9ycyBvbiB0aGUgd3JpdGUgc3RyZWFtIHNob3VsZCBiZSByZXRyaWVkIHRvbyAoZXZlbiB0aG91Z2ggQUJPUlRFRCBlcnJvcnNcbiAqIGFyZSBub3QgZ2VuZXJhbGx5IHJldHJ5YWJsZSkuXG4gKlxuICogTm90ZSB0aGF0IGR1cmluZyB0aGUgaW5pdGlhbCBoYW5kc2hha2Ugb24gdGhlIHdyaXRlIHN0cmVhbSBhbiBBQk9SVEVEIGVycm9yXG4gKiBzaWduYWxzIHRoYXQgd2Ugc2hvdWxkIGRpc2NhcmQgb3VyIHN0cmVhbSB0b2tlbiAoaS5lLiBpdCBpcyBwZXJtYW5lbnQpLiBUaGlzXG4gKiBtZWFucyBhIGhhbmRzaGFrZSBlcnJvciBzaG91bGQgYmUgY2xhc3NpZmllZCB3aXRoIGlzUGVybWFuZW50RXJyb3IsIGFib3ZlLlxuICovXG4vKipcbiAqIE1hcHMgYW4gZXJyb3IgQ29kZSBmcm9tIEdSUEMgc3RhdHVzIGNvZGUgbnVtYmVyLCBsaWtlIDAsIDEsIG9yIDE0LiBUaGVzZVxuICogYXJlIG5vdCB0aGUgc2FtZSBhcyBIVFRQIHN0YXR1cyBjb2Rlcy5cbiAqXG4gKiBAcmV0dXJucyBUaGUgQ29kZSBlcXVpdmFsZW50IHRvIHRoZSBnaXZlbiBHUlBDIHN0YXR1cyBjb2RlLiBGYWlscyBpZiB0aGVyZVxuICogICAgIGlzIG5vIG1hdGNoLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfbWFwQ29kZUZyb21ScGNDb2RlKGUpIHtcbiAgICBpZiAodm9pZCAwID09PSBlKSBcbiAgICAvLyBUaGlzIHNob3VsZG4ndCBub3JtYWxseSBoYXBwZW4sIGJ1dCBpbiBjZXJ0YWluIGVycm9yIGNhc2VzIChsaWtlIHRyeWluZ1xuICAgIC8vIHRvIHNlbmQgaW52YWxpZCBwcm90byBtZXNzYWdlcykgd2UgbWF5IGdldCBhbiBlcnJvciB3aXRoIG5vIEdSUEMgY29kZS5cbiAgICByZXR1cm4gX19QUklWQVRFX2xvZ0Vycm9yKFwiR1JQQyBlcnJvciBoYXMgbm8gLmNvZGVcIiksIEMuVU5LTk9XTjtcbiAgICBzd2l0Y2ggKGUpIHtcbiAgICAgIGNhc2UgY2UuT0s6XG4gICAgICAgIHJldHVybiBDLk9LO1xuXG4gICAgICBjYXNlIGNlLkNBTkNFTExFRDpcbiAgICAgICAgcmV0dXJuIEMuQ0FOQ0VMTEVEO1xuXG4gICAgICBjYXNlIGNlLlVOS05PV046XG4gICAgICAgIHJldHVybiBDLlVOS05PV047XG5cbiAgICAgIGNhc2UgY2UuREVBRExJTkVfRVhDRUVERUQ6XG4gICAgICAgIHJldHVybiBDLkRFQURMSU5FX0VYQ0VFREVEO1xuXG4gICAgICBjYXNlIGNlLlJFU09VUkNFX0VYSEFVU1RFRDpcbiAgICAgICAgcmV0dXJuIEMuUkVTT1VSQ0VfRVhIQVVTVEVEO1xuXG4gICAgICBjYXNlIGNlLklOVEVSTkFMOlxuICAgICAgICByZXR1cm4gQy5JTlRFUk5BTDtcblxuICAgICAgY2FzZSBjZS5VTkFWQUlMQUJMRTpcbiAgICAgICAgcmV0dXJuIEMuVU5BVkFJTEFCTEU7XG5cbiAgICAgIGNhc2UgY2UuVU5BVVRIRU5USUNBVEVEOlxuICAgICAgICByZXR1cm4gQy5VTkFVVEhFTlRJQ0FURUQ7XG5cbiAgICAgIGNhc2UgY2UuSU5WQUxJRF9BUkdVTUVOVDpcbiAgICAgICAgcmV0dXJuIEMuSU5WQUxJRF9BUkdVTUVOVDtcblxuICAgICAgY2FzZSBjZS5OT1RfRk9VTkQ6XG4gICAgICAgIHJldHVybiBDLk5PVF9GT1VORDtcblxuICAgICAgY2FzZSBjZS5BTFJFQURZX0VYSVNUUzpcbiAgICAgICAgcmV0dXJuIEMuQUxSRUFEWV9FWElTVFM7XG5cbiAgICAgIGNhc2UgY2UuUEVSTUlTU0lPTl9ERU5JRUQ6XG4gICAgICAgIHJldHVybiBDLlBFUk1JU1NJT05fREVOSUVEO1xuXG4gICAgICBjYXNlIGNlLkZBSUxFRF9QUkVDT05ESVRJT046XG4gICAgICAgIHJldHVybiBDLkZBSUxFRF9QUkVDT05ESVRJT047XG5cbiAgICAgIGNhc2UgY2UuQUJPUlRFRDpcbiAgICAgICAgcmV0dXJuIEMuQUJPUlRFRDtcblxuICAgICAgY2FzZSBjZS5PVVRfT0ZfUkFOR0U6XG4gICAgICAgIHJldHVybiBDLk9VVF9PRl9SQU5HRTtcblxuICAgICAgY2FzZSBjZS5VTklNUExFTUVOVEVEOlxuICAgICAgICByZXR1cm4gQy5VTklNUExFTUVOVEVEO1xuXG4gICAgICBjYXNlIGNlLkRBVEFfTE9TUzpcbiAgICAgICAgcmV0dXJuIEMuREFUQV9MT1NTO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZmFpbCgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhbiBIVFRQIHJlc3BvbnNlJ3MgZXJyb3Igc3RhdHVzIHRvIHRoZSBlcXVpdmFsZW50IGVycm9yIGNvZGUuXG4gKlxuICogQHBhcmFtIHN0YXR1cyAtIEFuIEhUVFAgZXJyb3IgcmVzcG9uc2Ugc3RhdHVzIChcIkZBSUxFRF9QUkVDT05ESVRJT05cIixcbiAqIFwiVU5LTk9XTlwiLCBldGMuKVxuICogQHJldHVybnMgVGhlIGVxdWl2YWxlbnQgQ29kZS4gTm9uLW1hdGNoaW5nIHJlc3BvbnNlcyBhcmUgbWFwcGVkIHRvXG4gKiAgICAgQ29kZS5VTktOT1dOLlxuICovIChsZSA9IGNlIHx8IChjZSA9IHt9KSlbbGUuT0sgPSAwXSA9IFwiT0tcIiwgbGVbbGUuQ0FOQ0VMTEVEID0gMV0gPSBcIkNBTkNFTExFRFwiLCBcbmxlW2xlLlVOS05PV04gPSAyXSA9IFwiVU5LTk9XTlwiLCBsZVtsZS5JTlZBTElEX0FSR1VNRU5UID0gM10gPSBcIklOVkFMSURfQVJHVU1FTlRcIiwgXG5sZVtsZS5ERUFETElORV9FWENFRURFRCA9IDRdID0gXCJERUFETElORV9FWENFRURFRFwiLCBsZVtsZS5OT1RfRk9VTkQgPSA1XSA9IFwiTk9UX0ZPVU5EXCIsIFxubGVbbGUuQUxSRUFEWV9FWElTVFMgPSA2XSA9IFwiQUxSRUFEWV9FWElTVFNcIiwgbGVbbGUuUEVSTUlTU0lPTl9ERU5JRUQgPSA3XSA9IFwiUEVSTUlTU0lPTl9ERU5JRURcIiwgXG5sZVtsZS5VTkFVVEhFTlRJQ0FURUQgPSAxNl0gPSBcIlVOQVVUSEVOVElDQVRFRFwiLCBsZVtsZS5SRVNPVVJDRV9FWEhBVVNURUQgPSA4XSA9IFwiUkVTT1VSQ0VfRVhIQVVTVEVEXCIsIFxubGVbbGUuRkFJTEVEX1BSRUNPTkRJVElPTiA9IDldID0gXCJGQUlMRURfUFJFQ09ORElUSU9OXCIsIGxlW2xlLkFCT1JURUQgPSAxMF0gPSBcIkFCT1JURURcIiwgXG5sZVtsZS5PVVRfT0ZfUkFOR0UgPSAxMV0gPSBcIk9VVF9PRl9SQU5HRVwiLCBsZVtsZS5VTklNUExFTUVOVEVEID0gMTJdID0gXCJVTklNUExFTUVOVEVEXCIsIFxubGVbbGUuSU5URVJOQUwgPSAxM10gPSBcIklOVEVSTkFMXCIsIGxlW2xlLlVOQVZBSUxBQkxFID0gMTRdID0gXCJVTkFWQUlMQUJMRVwiLCBsZVtsZS5EQVRBX0xPU1MgPSAxNV0gPSBcIkRBVEFfTE9TU1wiO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgZ2xvYmFsLCBzaW5nbGV0b24gaW5zdGFuY2Ugb2YgVGVzdGluZ0hvb2tzU3BpLlxuICpcbiAqIFRoaXMgdmFyaWFibGUgd2lsbCBiZSBgbnVsbGAgaW4gYWxsIGNhc2VzIF9leGNlcHRfIHdoZW4gcnVubmluZyBmcm9tXG4gKiBpbnRlZ3JhdGlvbiB0ZXN0cyB0aGF0IGhhdmUgcmVnaXN0ZXJlZCBjYWxsYmFja3MgdG8gYmUgbm90aWZpZWQgb2YgZXZlbnRzXG4gKiB0aGF0IGhhcHBlbiBkdXJpbmcgdGhlIHRlc3QgZXhlY3V0aW9uLlxuICovXG5sZXQgaGUgPSBudWxsO1xuXG4vKipcbiAqIFNldHMgdGhlIHZhbHVlIG9mIHRoZSBgdGVzdGluZ0hvb2tzU3BpYCBvYmplY3QuXG4gKiBAcGFyYW0gaW5zdGFuY2UgdGhlIGluc3RhbmNlIHRvIHNldC5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gaW5zdGFuY2Ugb2YgdGhlIFBsYXRmb3JtJ3MgJ1RleHRFbmNvZGVyJyBpbXBsZW1lbnRhdGlvbi5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX25ld1RleHRFbmNvZGVyKCkge1xuICAgIHJldHVybiBuZXcgVGV4dEVuY29kZXI7XG59XG5cbi8qKlxuICogQW4gaW5zdGFuY2Ugb2YgdGhlIFBsYXRmb3JtJ3MgJ1RleHREZWNvZGVyJyBpbXBsZW1lbnRhdGlvbi5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNvbnN0IFBlID0gbmV3IEludGVnZXIoWyA0Mjk0OTY3Mjk1LCA0Mjk0OTY3Mjk1IF0sIDApO1xuXG4vLyBIYXNoIGEgc3RyaW5nIHVzaW5nIG1kNSBoYXNoaW5nIGFsZ29yaXRobS5cbmZ1bmN0aW9uIF9fUFJJVkFURV9nZXRNZDVIYXNoVmFsdWUoZSkge1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfbmV3VGV4dEVuY29kZXIoKS5lbmNvZGUoZSksIG4gPSBuZXcgTWQ1O1xuICAgIHJldHVybiBuLnVwZGF0ZSh0KSwgbmV3IFVpbnQ4QXJyYXkobi5kaWdlc3QoKSk7XG59XG5cbi8vIEludGVycHJldCB0aGUgMTYgYnl0ZXMgYXJyYXkgYXMgdHdvIDY0LWJpdCB1bnNpZ25lZCBpbnRlZ2VycywgZW5jb2RlZCB1c2luZ1xuLy8gMuKAmXMgY29tcGxlbWVudCB1c2luZyBsaXR0bGUgZW5kaWFuLlxuZnVuY3Rpb24gX19QUklWQVRFX2dldDY0Qml0VWludHMoZSkge1xuICAgIGNvbnN0IHQgPSBuZXcgRGF0YVZpZXcoZS5idWZmZXIpLCBuID0gdC5nZXRVaW50MzIoMCwgLyogbGl0dGxlRW5kaWFuPSAqLyAhMCksIHIgPSB0LmdldFVpbnQzMig0LCAvKiBsaXR0bGVFbmRpYW49ICovICEwKSwgaSA9IHQuZ2V0VWludDMyKDgsIC8qIGxpdHRsZUVuZGlhbj0gKi8gITApLCBzID0gdC5nZXRVaW50MzIoMTIsIC8qIGxpdHRsZUVuZGlhbj0gKi8gITApO1xuICAgIHJldHVybiBbIG5ldyBJbnRlZ2VyKFsgbiwgciBdLCAwKSwgbmV3IEludGVnZXIoWyBpLCBzIF0sIDApIF07XG59XG5cbmNsYXNzIEJsb29tRmlsdGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuKSB7XG4gICAgICAgIGlmICh0aGlzLmJpdG1hcCA9IGUsIHRoaXMucGFkZGluZyA9IHQsIHRoaXMuaGFzaENvdW50ID0gbiwgdCA8IDAgfHwgdCA+PSA4KSB0aHJvdyBuZXcgX19QUklWQVRFX0Jsb29tRmlsdGVyRXJyb3IoYEludmFsaWQgcGFkZGluZzogJHt0fWApO1xuICAgICAgICBpZiAobiA8IDApIHRocm93IG5ldyBfX1BSSVZBVEVfQmxvb21GaWx0ZXJFcnJvcihgSW52YWxpZCBoYXNoIGNvdW50OiAke259YCk7XG4gICAgICAgIGlmIChlLmxlbmd0aCA+IDAgJiYgMCA9PT0gdGhpcy5oYXNoQ291bnQpIFxuICAgICAgICAvLyBPbmx5IGVtcHR5IGJsb29tIGZpbHRlciBjYW4gaGF2ZSAwIGhhc2ggY291bnQuXG4gICAgICAgIHRocm93IG5ldyBfX1BSSVZBVEVfQmxvb21GaWx0ZXJFcnJvcihgSW52YWxpZCBoYXNoIGNvdW50OiAke259YCk7XG4gICAgICAgIGlmICgwID09PSBlLmxlbmd0aCAmJiAwICE9PSB0KSBcbiAgICAgICAgLy8gRW1wdHkgYmxvb20gZmlsdGVyIHNob3VsZCBoYXZlIDAgcGFkZGluZy5cbiAgICAgICAgdGhyb3cgbmV3IF9fUFJJVkFURV9CbG9vbUZpbHRlckVycm9yKGBJbnZhbGlkIHBhZGRpbmcgd2hlbiBiaXRtYXAgbGVuZ3RoIGlzIDA6ICR7dH1gKTtcbiAgICAgICAgdGhpcy5JZSA9IDggKiBlLmxlbmd0aCAtIHQsIFxuICAgICAgICAvLyBTZXQgdGhlIGJpdCBjb3VudCBpbiBJbnRlZ2VyIHRvIGF2b2lkIHJlcGV0aXRpb24gaW4gbWlnaHRDb250YWluKCkuXG4gICAgICAgIHRoaXMuVGUgPSBJbnRlZ2VyLmZyb21OdW1iZXIodGhpcy5JZSk7XG4gICAgfVxuICAgIC8vIENhbGN1bGF0ZSB0aGUgaXRoIGhhc2ggdmFsdWUgYmFzZWQgb24gdGhlIGhhc2hlZCA2NGJpdCBpbnRlZ2VycyxcbiAgICAvLyBhbmQgY2FsY3VsYXRlIGl0cyBjb3JyZXNwb25kaW5nIGJpdCBpbmRleCBpbiB0aGUgYml0bWFwIHRvIGJlIGNoZWNrZWQuXG4gICAgRWUoZSwgdCwgbikge1xuICAgICAgICAvLyBDYWxjdWxhdGUgaGFzaGVkIHZhbHVlIGgoaSkgPSBoMSArIChpICogaDIpLlxuICAgICAgICBsZXQgciA9IGUuYWRkKHQubXVsdGlwbHkoSW50ZWdlci5mcm9tTnVtYmVyKG4pKSk7XG4gICAgICAgIC8vIFdyYXAgaWYgaGFzaCB2YWx1ZSBvdmVyZmxvdyA2NGJpdC5cbiAgICAgICAgICAgICAgICByZXR1cm4gMSA9PT0gci5jb21wYXJlKFBlKSAmJiAociA9IG5ldyBJbnRlZ2VyKFsgci5nZXRCaXRzKDApLCByLmdldEJpdHMoMSkgXSwgMCkpLCBcbiAgICAgICAgci5tb2R1bG8odGhpcy5UZSkudG9OdW1iZXIoKTtcbiAgICB9XG4gICAgLy8gUmV0dXJuIHdoZXRoZXIgdGhlIGJpdCBvbiB0aGUgZ2l2ZW4gaW5kZXggaW4gdGhlIGJpdG1hcCBpcyBzZXQgdG8gMS5cbiAgICBkZShlKSB7XG4gICAgICAgIHJldHVybiAwICE9ICh0aGlzLmJpdG1hcFtNYXRoLmZsb29yKGUgLyA4KV0gJiAxIDw8IGUgJSA4KTtcbiAgICB9XG4gICAgbWlnaHRDb250YWluKGUpIHtcbiAgICAgICAgLy8gRW1wdHkgYml0bWFwIHNob3VsZCBhbHdheXMgcmV0dXJuIGZhbHNlIG9uIG1lbWJlcnNoaXAgY2hlY2suXG4gICAgICAgIGlmICgwID09PSB0aGlzLkllKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZ2V0TWQ1SGFzaFZhbHVlKGUpLCBbbiwgcl0gPSBfX1BSSVZBVEVfZ2V0NjRCaXRVaW50cyh0KTtcbiAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0aGlzLmhhc2hDb3VudDsgZSsrKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5FZShuLCByLCBlKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5kZSh0KSkgcmV0dXJuICExO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgLyoqIENyZWF0ZSBibG9vbSBmaWx0ZXIgZm9yIHRlc3RpbmcgcHVycG9zZXMgb25seS4gKi8gICAgc3RhdGljIGNyZWF0ZShlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBlICUgOCA9PSAwID8gMCA6IDggLSBlICUgOCwgaSA9IG5ldyBVaW50OEFycmF5KE1hdGguY2VpbChlIC8gOCkpLCBzID0gbmV3IEJsb29tRmlsdGVyKGksIHIsIHQpO1xuICAgICAgICByZXR1cm4gbi5mb3JFYWNoKChlID0+IHMuaW5zZXJ0KGUpKSksIHM7XG4gICAgfVxuICAgIGluc2VydChlKSB7XG4gICAgICAgIGlmICgwID09PSB0aGlzLkllKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZ2V0TWQ1SGFzaFZhbHVlKGUpLCBbbiwgcl0gPSBfX1BSSVZBVEVfZ2V0NjRCaXRVaW50cyh0KTtcbiAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0aGlzLmhhc2hDb3VudDsgZSsrKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5FZShuLCByLCBlKTtcbiAgICAgICAgICAgIHRoaXMuQWUodCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgQWUoZSkge1xuICAgICAgICBjb25zdCB0ID0gTWF0aC5mbG9vcihlIC8gOCksIG4gPSBlICUgODtcbiAgICAgICAgdGhpcy5iaXRtYXBbdF0gfD0gMSA8PCBuO1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX0Jsb29tRmlsdGVyRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyksIHRoaXMubmFtZSA9IFwiQmxvb21GaWx0ZXJFcnJvclwiO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gZXZlbnQgZnJvbSB0aGUgUmVtb3RlU3RvcmUuIEl0IGlzIHNwbGl0IGludG8gdGFyZ2V0Q2hhbmdlcyAoY2hhbmdlcyB0byB0aGVcbiAqIHN0YXRlIG9yIHRoZSBzZXQgb2YgZG9jdW1lbnRzIGluIG91ciB3YXRjaGVkIHRhcmdldHMpIGFuZCBkb2N1bWVudFVwZGF0ZXNcbiAqIChjaGFuZ2VzIHRvIHRoZSBhY3R1YWwgZG9jdW1lbnRzKS5cbiAqLyBjbGFzcyBSZW1vdGVFdmVudCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIHNuYXBzaG90IHZlcnNpb24gdGhpcyBldmVudCBicmluZ3MgdXMgdXAgdG8sIG9yIE1JTiBpZiBub3Qgc2V0LlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIEEgbWFwIGZyb20gdGFyZ2V0IHRvIGNoYW5nZXMgdG8gdGhlIHRhcmdldC4gU2VlIFRhcmdldENoYW5nZS5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBBIG1hcCBvZiB0YXJnZXRzIHRoYXQgaXMga25vd24gdG8gYmUgaW5jb25zaXN0ZW50LCBhbmQgdGhlIHB1cnBvc2UgZm9yXG4gICAgICogcmUtbGlzdGVuaW5nLiBMaXN0ZW5zIGZvciB0aGVzZSB0YXJnZXRzIHNob3VsZCBiZSByZS1lc3RhYmxpc2hlZCB3aXRob3V0XG4gICAgICogcmVzdW1lIHRva2Vucy5cbiAgICAgKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBBIHNldCBvZiB3aGljaCBkb2N1bWVudHMgaGF2ZSBjaGFuZ2VkIG9yIGJlZW4gZGVsZXRlZCwgYWxvbmcgd2l0aCB0aGVcbiAgICAgKiBkb2MncyBuZXcgdmFsdWVzIChpZiBub3QgZGVsZXRlZCkuXG4gICAgICovXG4gICAgciwgXG4gICAgLyoqXG4gICAgICogQSBzZXQgb2Ygd2hpY2ggZG9jdW1lbnQgdXBkYXRlcyBhcmUgZHVlIG9ubHkgdG8gbGltYm8gcmVzb2x1dGlvbiB0YXJnZXRzLlxuICAgICAqL1xuICAgIGkpIHtcbiAgICAgICAgdGhpcy5zbmFwc2hvdFZlcnNpb24gPSBlLCB0aGlzLnRhcmdldENoYW5nZXMgPSB0LCB0aGlzLnRhcmdldE1pc21hdGNoZXMgPSBuLCB0aGlzLmRvY3VtZW50VXBkYXRlcyA9IHIsIFxuICAgICAgICB0aGlzLnJlc29sdmVkTGltYm9Eb2N1bWVudHMgPSBpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIQUNLOiBWaWV3cyByZXF1aXJlIFJlbW90ZUV2ZW50cyBpbiBvcmRlciB0byBkZXRlcm1pbmUgd2hldGhlciB0aGUgdmlldyBpc1xuICAgICAqIENVUlJFTlQsIGJ1dCBzZWNvbmRhcnkgdGFicyBkb24ndCByZWNlaXZlIHJlbW90ZSBldmVudHMuIFNvIHRoaXMgbWV0aG9kIGlzXG4gICAgICogdXNlZCB0byBjcmVhdGUgYSBzeW50aGVzaXplZCBSZW1vdGVFdmVudCB0aGF0IGNhbiBiZSB1c2VkIHRvIGFwcGx5IGFcbiAgICAgKiBDVVJSRU5UIHN0YXR1cyBjaGFuZ2UgdG8gYSBWaWV3LCBmb3IgcXVlcmllcyBleGVjdXRlZCBpbiBhIGRpZmZlcmVudCB0YWIuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seVxuICAgIHN0YXRpYyBjcmVhdGVTeW50aGVzaXplZFJlbW90ZUV2ZW50Rm9yQ3VycmVudENoYW5nZShlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgTWFwO1xuICAgICAgICByZXR1cm4gci5zZXQoZSwgVGFyZ2V0Q2hhbmdlLmNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZShlLCB0LCBuKSksIFxuICAgICAgICBuZXcgUmVtb3RlRXZlbnQoU25hcHNob3RWZXJzaW9uLm1pbigpLCByLCBuZXcgU29ydGVkTWFwKF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKSwgX19QUklWQVRFX211dGFibGVEb2N1bWVudE1hcCgpLCBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgVGFyZ2V0Q2hhbmdlIHNwZWNpZmllcyB0aGUgc2V0IG9mIGNoYW5nZXMgZm9yIGEgc3BlY2lmaWMgdGFyZ2V0IGFzIHBhcnQgb2ZcbiAqIGEgUmVtb3RlRXZlbnQuIFRoZXNlIGNoYW5nZXMgdHJhY2sgd2hpY2ggZG9jdW1lbnRzIGFyZSBhZGRlZCwgbW9kaWZpZWQgb3JcbiAqIHJlbW92ZWQsIGFzIHdlbGwgYXMgdGhlIHRhcmdldCdzIHJlc3VtZSB0b2tlbiBhbmQgd2hldGhlciB0aGUgdGFyZ2V0IGlzXG4gKiBtYXJrZWQgQ1VSUkVOVC5cbiAqIFRoZSBhY3R1YWwgY2hhbmdlcyAqdG8qIGRvY3VtZW50cyBhcmUgbm90IHBhcnQgb2YgdGhlIFRhcmdldENoYW5nZSBzaW5jZVxuICogZG9jdW1lbnRzIG1heSBiZSBwYXJ0IG9mIG11bHRpcGxlIHRhcmdldHMuXG4gKi8gY2xhc3MgVGFyZ2V0Q2hhbmdlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBBbiBvcGFxdWUsIHNlcnZlci1hc3NpZ25lZCB0b2tlbiB0aGF0IGFsbG93cyB3YXRjaGluZyBhIHF1ZXJ5IHRvIGJlIHJlc3VtZWRcbiAgICAgKiBhZnRlciBkaXNjb25uZWN0aW5nIHdpdGhvdXQgcmV0cmFuc21pdHRpbmcgYWxsIHRoZSBkYXRhIHRoYXQgbWF0Y2hlcyB0aGVcbiAgICAgKiBxdWVyeS4gVGhlIHJlc3VtZSB0b2tlbiBlc3NlbnRpYWxseSBpZGVudGlmaWVzIGEgcG9pbnQgaW4gdGltZSBmcm9tIHdoaWNoXG4gICAgICogdGhlIHNlcnZlciBzaG91bGQgcmVzdW1lIHNlbmRpbmcgcmVzdWx0cy5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBUaGUgXCJjdXJyZW50XCIgKHN5bmNlZCkgc3RhdHVzIG9mIHRoaXMgdGFyZ2V0LiBOb3RlIHRoYXQgXCJjdXJyZW50XCJcbiAgICAgKiBoYXMgc3BlY2lhbCBtZWFuaW5nIGluIHRoZSBSUEMgcHJvdG9jb2wgdGhhdCBpbXBsaWVzIHRoYXQgYSB0YXJnZXQgaXNcbiAgICAgKiBib3RoIHVwLXRvLWRhdGUgYW5kIGNvbnNpc3RlbnQgd2l0aCB0aGUgcmVzdCBvZiB0aGUgd2F0Y2ggc3RyZWFtLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoYXQgd2VyZSBuZXdseSBhc3NpZ25lZCB0byB0aGlzIHRhcmdldCBhcyBwYXJ0IG9mXG4gICAgICogdGhpcyByZW1vdGUgZXZlbnQuXG4gICAgICovXG4gICAgbiwgXG4gICAgLyoqXG4gICAgICogVGhlIHNldCBvZiBkb2N1bWVudHMgdGhhdCB3ZXJlIGFscmVhZHkgYXNzaWduZWQgdG8gdGhpcyB0YXJnZXQgYnV0IHJlY2VpdmVkXG4gICAgICogYW4gdXBkYXRlIGR1cmluZyB0aGlzIHJlbW90ZSBldmVudC5cbiAgICAgKi9cbiAgICByLCBcbiAgICAvKipcbiAgICAgKiBUaGUgc2V0IG9mIGRvY3VtZW50cyB0aGF0IHdlcmUgcmVtb3ZlZCBmcm9tIHRoaXMgdGFyZ2V0IGFzIHBhcnQgb2YgdGhpc1xuICAgICAqIHJlbW90ZSBldmVudC5cbiAgICAgKi9cbiAgICBpKSB7XG4gICAgICAgIHRoaXMucmVzdW1lVG9rZW4gPSBlLCB0aGlzLmN1cnJlbnQgPSB0LCB0aGlzLmFkZGVkRG9jdW1lbnRzID0gbiwgdGhpcy5tb2RpZmllZERvY3VtZW50cyA9IHIsIFxuICAgICAgICB0aGlzLnJlbW92ZWREb2N1bWVudHMgPSBpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyB1c2VkIHRvIGNyZWF0ZSBhIHN5bnRoZXNpemVkIFRhcmdldENoYW5nZXMgdGhhdCBjYW4gYmUgdXNlZCB0b1xuICAgICAqIGFwcGx5IGEgQ1VSUkVOVCBzdGF0dXMgY2hhbmdlIHRvIGEgVmlldyAoZm9yIHF1ZXJpZXMgZXhlY3V0ZWQgaW4gYSBkaWZmZXJlbnRcbiAgICAgKiB0YWIpIG9yIGZvciBuZXcgcXVlcmllcyAodG8gcmFpc2Ugc25hcHNob3RzIHdpdGggY29ycmVjdCBDVVJSRU5UIHN0YXR1cykuXG4gICAgICovICAgIHN0YXRpYyBjcmVhdGVTeW50aGVzaXplZFRhcmdldENoYW5nZUZvckN1cnJlbnRDaGFuZ2UoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gbmV3IFRhcmdldENoYW5nZShuLCB0LCBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSwgX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCksIF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYSBjaGFuZ2VkIGRvY3VtZW50IGFuZCBhIGxpc3Qgb2YgdGFyZ2V0IGlkcyB0byB3aGljaCB0aGlzIGNoYW5nZVxuICogYXBwbGllcy5cbiAqXG4gKiBJZiBkb2N1bWVudCBoYXMgYmVlbiBkZWxldGVkIE5vRG9jdW1lbnQgd2lsbCBiZSBwcm92aWRlZC5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfRG9jdW1lbnRXYXRjaENoYW5nZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSBuZXcgZG9jdW1lbnQgYXBwbGllcyB0byBhbGwgb2YgdGhlc2UgdGFyZ2V0cy4gKi9cbiAgICBlLCBcbiAgICAvKiogVGhlIG5ldyBkb2N1bWVudCBpcyByZW1vdmVkIGZyb20gYWxsIG9mIHRoZXNlIHRhcmdldHMuICovXG4gICAgdCwgXG4gICAgLyoqIFRoZSBrZXkgb2YgdGhlIGRvY3VtZW50IGZvciB0aGlzIGNoYW5nZS4gKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBUaGUgbmV3IGRvY3VtZW50IG9yIE5vRG9jdW1lbnQgaWYgaXQgd2FzIGRlbGV0ZWQuIElzIG51bGwgaWYgdGhlXG4gICAgICogZG9jdW1lbnQgd2VudCBvdXQgb2YgdmlldyB3aXRob3V0IHRoZSBzZXJ2ZXIgc2VuZGluZyBhIG5ldyBkb2N1bWVudC5cbiAgICAgKi9cbiAgICByKSB7XG4gICAgICAgIHRoaXMuUmUgPSBlLCB0aGlzLnJlbW92ZWRUYXJnZXRJZHMgPSB0LCB0aGlzLmtleSA9IG4sIHRoaXMuVmUgPSByO1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX0V4aXN0ZW5jZUZpbHRlckNoYW5nZSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLnRhcmdldElkID0gZSwgdGhpcy5tZSA9IHQ7XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfV2F0Y2hUYXJnZXRDaGFuZ2Uge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBXaGF0IGtpbmQgb2YgY2hhbmdlIG9jY3VycmVkIHRvIHRoZSB3YXRjaCB0YXJnZXQuICovXG4gICAgZSwgXG4gICAgLyoqIFRoZSB0YXJnZXQgSURzIHRoYXQgd2VyZSBhZGRlZC9yZW1vdmVkL3NldC4gKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBBbiBvcGFxdWUsIHNlcnZlci1hc3NpZ25lZCB0b2tlbiB0aGF0IGFsbG93cyB3YXRjaGluZyBhIHRhcmdldCB0byBiZVxuICAgICAqIHJlc3VtZWQgYWZ0ZXIgZGlzY29ubmVjdGluZyB3aXRob3V0IHJldHJhbnNtaXR0aW5nIGFsbCB0aGUgZGF0YSB0aGF0XG4gICAgICogbWF0Y2hlcyB0aGUgdGFyZ2V0LiBUaGUgcmVzdW1lIHRva2VuIGVzc2VudGlhbGx5IGlkZW50aWZpZXMgYSBwb2ludCBpblxuICAgICAqIHRpbWUgZnJvbSB3aGljaCB0aGUgc2VydmVyIHNob3VsZCByZXN1bWUgc2VuZGluZyByZXN1bHRzLlxuICAgICAqL1xuICAgIG4gPSBCeXRlU3RyaW5nLkVNUFRZX0JZVEVfU1RSSU5HXG4gICAgLyoqIEFuIFJQQyBlcnJvciBpbmRpY2F0aW5nIHdoeSB0aGUgd2F0Y2ggZmFpbGVkLiAqLyAsIHIgPSBudWxsKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBlLCB0aGlzLnRhcmdldElkcyA9IHQsIHRoaXMucmVzdW1lVG9rZW4gPSBuLCB0aGlzLmNhdXNlID0gcjtcbiAgICB9XG59XG5cbi8qKiBUcmFja3MgdGhlIGludGVybmFsIHN0YXRlIG9mIGEgV2F0Y2ggdGFyZ2V0LiAqLyBjbGFzcyBfX1BSSVZBVEVfVGFyZ2V0U3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG51bWJlciBvZiBwZW5kaW5nIHJlc3BvbnNlcyAoYWRkcyBvciByZW1vdmVzKSB0aGF0IHdlIGFyZSB3YWl0aW5nIG9uLlxuICAgICAgICAgKiBXZSBvbmx5IGNvbnNpZGVyIHRhcmdldHMgYWN0aXZlIHRoYXQgaGF2ZSBubyBwZW5kaW5nIHJlc3BvbnNlcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZmUgPSAwLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEtlZXBzIHRyYWNrIG9mIHRoZSBkb2N1bWVudCBjaGFuZ2VzIHNpbmNlIHRoZSBsYXN0IHJhaXNlZCBzbmFwc2hvdC5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlc2UgY2hhbmdlcyBhcmUgY29udGludW91c2x5IHVwZGF0ZWQgYXMgd2UgcmVjZWl2ZSBkb2N1bWVudCB1cGRhdGVzIGFuZFxuICAgICAgICAgKiBhbHdheXMgcmVmbGVjdCB0aGUgY3VycmVudCBzZXQgb2YgY2hhbmdlcyBhZ2FpbnN0IHRoZSBsYXN0IGlzc3VlZCBzbmFwc2hvdC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZ2UgPSBfX1BSSVZBVEVfc25hcHNob3RDaGFuZ2VzTWFwKCksIFxuICAgICAgICAvKiogU2VlIHB1YmxpYyBnZXR0ZXJzIGZvciBleHBsYW5hdGlvbnMgb2YgdGhlc2UgZmllbGRzLiAqL1xuICAgICAgICB0aGlzLnBlID0gQnl0ZVN0cmluZy5FTVBUWV9CWVRFX1NUUklORywgdGhpcy55ZSA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgdGhpcyB0YXJnZXQgc3RhdGUgc2hvdWxkIGJlIGluY2x1ZGVkIGluIHRoZSBuZXh0IHNuYXBzaG90LiBXZVxuICAgICAgICAgKiBpbml0aWFsaXplIHRvIHRydWUgc28gdGhhdCBuZXdseS1hZGRlZCB0YXJnZXRzIGFyZSBpbmNsdWRlZCBpbiB0aGUgbmV4dFxuICAgICAgICAgKiBSZW1vdGVFdmVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMud2UgPSAhMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGlzIHRhcmdldCBoYXMgYmVlbiBtYXJrZWQgJ2N1cnJlbnQnLlxuICAgICAqXG4gICAgICogJ0N1cnJlbnQnIGhhcyBzcGVjaWFsIG1lYW5pbmcgaW4gdGhlIFJQQyBwcm90b2NvbDogSXQgaW1wbGllcyB0aGF0IHRoZVxuICAgICAqIFdhdGNoIGJhY2tlbmQgaGFzIHNlbnQgdXMgYWxsIGNoYW5nZXMgdXAgdG8gdGhlIHBvaW50IGF0IHdoaWNoIHRoZSB0YXJnZXRcbiAgICAgKiB3YXMgYWRkZWQgYW5kIHRoYXQgdGhlIHRhcmdldCBpcyBjb25zaXN0ZW50IHdpdGggdGhlIHJlc3Qgb2YgdGhlIHdhdGNoXG4gICAgICogc3RyZWFtLlxuICAgICAqLyAgICBnZXQgY3VycmVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueWU7XG4gICAgfVxuICAgIC8qKiBUaGUgbGFzdCByZXN1bWUgdG9rZW4gc2VudCB0byB1cyBmb3IgdGhpcyB0YXJnZXQuICovICAgIGdldCByZXN1bWVUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGU7XG4gICAgfVxuICAgIC8qKiBXaGV0aGVyIHRoaXMgdGFyZ2V0IGhhcyBwZW5kaW5nIHRhcmdldCBhZGRzIG9yIHRhcmdldCByZW1vdmVzLiAqLyAgICBnZXQgU2UoKSB7XG4gICAgICAgIHJldHVybiAwICE9PSB0aGlzLmZlO1xuICAgIH1cbiAgICAvKiogV2hldGhlciB3ZSBoYXZlIG1vZGlmaWVkIGFueSBzdGF0ZSB0aGF0IHNob3VsZCB0cmlnZ2VyIGEgc25hcHNob3QuICovICAgIGdldCBiZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgdGhlIHJlc3VtZSB0b2tlbiB0byB0aGUgVGFyZ2V0Q2hhbmdlLCBidXQgb25seSB3aGVuIGl0IGhhcyBhIG5ld1xuICAgICAqIHZhbHVlLiBFbXB0eSByZXN1bWVUb2tlbnMgYXJlIGRpc2NhcmRlZC5cbiAgICAgKi8gICAgRGUoZSkge1xuICAgICAgICBlLmFwcHJveGltYXRlQnl0ZVNpemUoKSA+IDAgJiYgKHRoaXMud2UgPSAhMCwgdGhpcy5wZSA9IGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgdGFyZ2V0IGNoYW5nZSBmcm9tIHRoZSBjdXJyZW50IHNldCBvZiBjaGFuZ2VzLlxuICAgICAqXG4gICAgICogVG8gcmVzZXQgdGhlIGRvY3VtZW50IGNoYW5nZXMgYWZ0ZXIgcmFpc2luZyB0aGlzIHNuYXBzaG90LCBjYWxsXG4gICAgICogYGNsZWFyUGVuZGluZ0NoYW5nZXMoKWAuXG4gICAgICovICAgIENlKCkge1xuICAgICAgICBsZXQgZSA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpLCB0ID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCksIG4gPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2UuZm9yRWFjaCgoKHIsIGkpID0+IHtcbiAgICAgICAgICAgIHN3aXRjaCAoaSkge1xuICAgICAgICAgICAgICBjYXNlIDAgLyogQ2hhbmdlVHlwZS5BZGRlZCAqLyA6XG4gICAgICAgICAgICAgICAgZSA9IGUuYWRkKHIpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgMiAvKiBDaGFuZ2VUeXBlLk1vZGlmaWVkICovIDpcbiAgICAgICAgICAgICAgICB0ID0gdC5hZGQocik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyA6XG4gICAgICAgICAgICAgICAgbiA9IG4uYWRkKHIpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgZmFpbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSksIG5ldyBUYXJnZXRDaGFuZ2UodGhpcy5wZSwgdGhpcy55ZSwgZSwgdCwgbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0cyB0aGUgZG9jdW1lbnQgY2hhbmdlcyBhbmQgc2V0cyBgaGFzUGVuZGluZ0NoYW5nZXNgIHRvIGZhbHNlLlxuICAgICAqLyAgICB2ZSgpIHtcbiAgICAgICAgdGhpcy53ZSA9ICExLCB0aGlzLmdlID0gX19QUklWQVRFX3NuYXBzaG90Q2hhbmdlc01hcCgpO1xuICAgIH1cbiAgICBGZShlLCB0KSB7XG4gICAgICAgIHRoaXMud2UgPSAhMCwgdGhpcy5nZSA9IHRoaXMuZ2UuaW5zZXJ0KGUsIHQpO1xuICAgIH1cbiAgICBNZShlKSB7XG4gICAgICAgIHRoaXMud2UgPSAhMCwgdGhpcy5nZSA9IHRoaXMuZ2UucmVtb3ZlKGUpO1xuICAgIH1cbiAgICB4ZSgpIHtcbiAgICAgICAgdGhpcy5mZSArPSAxO1xuICAgIH1cbiAgICBPZSgpIHtcbiAgICAgICAgdGhpcy5mZSAtPSAxLCBfX1BSSVZBVEVfaGFyZEFzc2VydCh0aGlzLmZlID49IDApO1xuICAgIH1cbiAgICBOZSgpIHtcbiAgICAgICAgdGhpcy53ZSA9ICEwLCB0aGlzLnllID0gITA7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgaGVscGVyIGNsYXNzIHRvIGFjY3VtdWxhdGUgd2F0Y2ggY2hhbmdlcyBpbnRvIGEgUmVtb3RlRXZlbnQuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9XYXRjaENoYW5nZUFnZ3JlZ2F0b3Ige1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5MZSA9IGUsIFxuICAgICAgICAvKiogVGhlIGludGVybmFsIHN0YXRlIG9mIGFsbCB0cmFja2VkIHRhcmdldHMuICovXG4gICAgICAgIHRoaXMuQmUgPSBuZXcgTWFwLCBcbiAgICAgICAgLyoqIEtlZXBzIHRyYWNrIG9mIHRoZSBkb2N1bWVudHMgdG8gdXBkYXRlIHNpbmNlIHRoZSBsYXN0IHJhaXNlZCBzbmFwc2hvdC4gKi9cbiAgICAgICAgdGhpcy5rZSA9IF9fUFJJVkFURV9tdXRhYmxlRG9jdW1lbnRNYXAoKSwgXG4gICAgICAgIC8qKiBBIG1hcHBpbmcgb2YgZG9jdW1lbnQga2V5cyB0byB0aGVpciBzZXQgb2YgdGFyZ2V0IElEcy4gKi9cbiAgICAgICAgdGhpcy5xZSA9IF9fUFJJVkFURV9kb2N1bWVudFRhcmdldE1hcCgpLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbWFwIG9mIHRhcmdldHMgd2l0aCBleGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoZXMuIFRoZXNlIHRhcmdldHMgYXJlXG4gICAgICAgICAqIGtub3duIHRvIGJlIGluY29uc2lzdGVudCBhbmQgdGhlaXIgbGlzdGVucyBuZWVkcyB0byBiZSByZS1lc3RhYmxpc2hlZCBieVxuICAgICAgICAgKiBSZW1vdGVTdG9yZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuUWUgPSBuZXcgU29ydGVkTWFwKF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJvY2Vzc2VzIGFuZCBhZGRzIHRoZSBEb2N1bWVudFdhdGNoQ2hhbmdlIHRvIHRoZSBjdXJyZW50IHNldCBvZiBjaGFuZ2VzLlxuICAgICAqLyAgICBLZShlKSB7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBlLlJlKSBlLlZlICYmIGUuVmUuaXNGb3VuZERvY3VtZW50KCkgPyB0aGlzLiRlKHQsIGUuVmUpIDogdGhpcy5VZSh0LCBlLmtleSwgZS5WZSk7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBlLnJlbW92ZWRUYXJnZXRJZHMpIHRoaXMuVWUodCwgZS5rZXksIGUuVmUpO1xuICAgIH1cbiAgICAvKiogUHJvY2Vzc2VzIGFuZCBhZGRzIHRoZSBXYXRjaFRhcmdldENoYW5nZSB0byB0aGUgY3VycmVudCBzZXQgb2YgY2hhbmdlcy4gKi8gICAgV2UoZSkge1xuICAgICAgICB0aGlzLmZvckVhY2hUYXJnZXQoZSwgKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuR2UodCk7XG4gICAgICAgICAgICBzd2l0Y2ggKGUuc3RhdGUpIHtcbiAgICAgICAgICAgICAgY2FzZSAwIC8qIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuTm9DaGFuZ2UgKi8gOlxuICAgICAgICAgICAgICAgIHRoaXMuemUodCkgJiYgbi5EZShlLnJlc3VtZVRva2VuKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDEgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5BZGRlZCAqLyA6XG4gICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBkZWNyZW1lbnQgdGhlIG51bWJlciBvZiBwZW5kaW5nIGFja3MgbmVlZGVkIGZyb20gd2F0Y2hcbiAgICAgICAgICAgICAgICAvLyBmb3IgdGhpcyB0YXJnZXRJZC5cbiAgICAgICAgICAgICAgICBuLk9lKCksIG4uU2UgfHwgXG4gICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSBhIGZyZXNobHkgYWRkZWQgdGFyZ2V0LCBzbyB3ZSBuZWVkIHRvIHJlc2V0IGFueSBzdGF0ZVxuICAgICAgICAgICAgICAgIC8vIHRoYXQgd2UgaGFkIHByZXZpb3VzbHkuIFRoaXMgY2FuIGhhcHBlbiBlLmcuIHdoZW4gcmVtb3ZlIGFuZCBhZGRcbiAgICAgICAgICAgICAgICAvLyBiYWNrIGEgdGFyZ2V0IGZvciBleGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoZXMuXG4gICAgICAgICAgICAgICAgbi52ZSgpLCBuLkRlKGUucmVzdW1lVG9rZW4pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgMiAvKiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLlJlbW92ZWQgKi8gOlxuICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8ga2VlcCB0cmFjayBvZiByZW1vdmVkIHRhcmdldHMgdG8gd2UgY2FuIHBvc3QtZmlsdGVyIGFuZFxuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBhbnkgdGFyZ2V0IGNoYW5nZXMuXG4gICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBkZWNyZW1lbnQgdGhlIG51bWJlciBvZiBwZW5kaW5nIGFja3MgbmVlZGVkIGZyb20gd2F0Y2hcbiAgICAgICAgICAgICAgICAvLyBmb3IgdGhpcyB0YXJnZXRJZC5cbiAgICAgICAgICAgICAgICBuLk9lKCksIG4uU2UgfHwgdGhpcy5yZW1vdmVUYXJnZXQodCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAzIC8qIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuQ3VycmVudCAqLyA6XG4gICAgICAgICAgICAgICAgdGhpcy56ZSh0KSAmJiAobi5OZSgpLCBuLkRlKGUucmVzdW1lVG9rZW4pKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDQgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5SZXNldCAqLyA6XG4gICAgICAgICAgICAgICAgdGhpcy56ZSh0KSAmJiAoXG4gICAgICAgICAgICAgICAgLy8gUmVzZXQgdGhlIHRhcmdldCBhbmQgc3ludGhlc2l6ZXMgcmVtb3ZlcyBmb3IgYWxsIGV4aXN0aW5nXG4gICAgICAgICAgICAgICAgLy8gZG9jdW1lbnRzLiBUaGUgYmFja2VuZCB3aWxsIHJlLWFkZCBhbnkgZG9jdW1lbnRzIHRoYXQgc3RpbGxcbiAgICAgICAgICAgICAgICAvLyBtYXRjaCB0aGUgdGFyZ2V0IGJlZm9yZSBpdCBzZW5kcyB0aGUgbmV4dCBnbG9iYWwgc25hcHNob3QuXG4gICAgICAgICAgICAgICAgdGhpcy5qZSh0KSwgbi5EZShlLnJlc3VtZVRva2VuKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBmYWlsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBhbGwgdGFyZ2V0SWRzIHRoYXQgdGhlIHdhdGNoIGNoYW5nZSBhcHBsaWVzIHRvOiBlaXRoZXIgdGhlXG4gICAgICogdGFyZ2V0SWRzIGV4cGxpY2l0bHkgbGlzdGVkIGluIHRoZSBjaGFuZ2Ugb3IgdGhlIHRhcmdldElkcyBvZiBhbGwgY3VycmVudGx5XG4gICAgICogYWN0aXZlIHRhcmdldHMuXG4gICAgICovICAgIGZvckVhY2hUYXJnZXQoZSwgdCkge1xuICAgICAgICBlLnRhcmdldElkcy5sZW5ndGggPiAwID8gZS50YXJnZXRJZHMuZm9yRWFjaCh0KSA6IHRoaXMuQmUuZm9yRWFjaCgoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIHRoaXMuemUobikgJiYgdChuKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIGV4aXN0ZW5jZSBmaWx0ZXJzIGFuZCBzeW50aGVzaXplcyBkZWxldGVzIGZvciBmaWx0ZXIgbWlzbWF0Y2hlcy5cbiAgICAgKiBUYXJnZXRzIHRoYXQgYXJlIGludmFsaWRhdGVkIGJ5IGZpbHRlciBtaXNtYXRjaGVzIGFyZSBhZGRlZCB0b1xuICAgICAqIGBwZW5kaW5nVGFyZ2V0UmVzZXRzYC5cbiAgICAgKi8gICAgSGUoZSkge1xuICAgICAgICBjb25zdCB0ID0gZS50YXJnZXRJZCwgbiA9IGUubWUuY291bnQsIHIgPSB0aGlzLkplKHQpO1xuICAgICAgICBpZiAocikge1xuICAgICAgICAgICAgY29uc3QgaSA9IHIudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKF9fUFJJVkFURV90YXJnZXRJc0RvY3VtZW50VGFyZ2V0KGkpKSBpZiAoMCA9PT0gbikge1xuICAgICAgICAgICAgICAgIC8vIFRoZSBleGlzdGVuY2UgZmlsdGVyIHRvbGQgdXMgdGhlIGRvY3VtZW50IGRvZXMgbm90IGV4aXN0LiBXZSBkZWR1Y2VcbiAgICAgICAgICAgICAgICAvLyB0aGF0IHRoaXMgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3QgYW5kIGFwcGx5IGEgZGVsZXRlZCBkb2N1bWVudCB0b1xuICAgICAgICAgICAgICAgIC8vIG91ciB1cGRhdGVzLiBXaXRob3V0IGFwcGx5aW5nIHRoaXMgZGVsZXRlZCBkb2N1bWVudCB0aGVyZSBtaWdodCBiZVxuICAgICAgICAgICAgICAgIC8vIGFub3RoZXIgcXVlcnkgdGhhdCB3aWxsIHJhaXNlIHRoaXMgZG9jdW1lbnQgYXMgcGFydCBvZiBhIHNuYXBzaG90XG4gICAgICAgICAgICAgICAgLy8gdW50aWwgaXQgaXMgcmVzb2x2ZWQsIGVzc2VudGlhbGx5IGV4cG9zaW5nIGluY29uc2lzdGVuY3kgYmV0d2VlblxuICAgICAgICAgICAgICAgIC8vIHF1ZXJpZXMuXG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBEb2N1bWVudEtleShpLnBhdGgpO1xuICAgICAgICAgICAgICAgIHRoaXMuVWUodCwgZSwgTXV0YWJsZURvY3VtZW50Lm5ld05vRG9jdW1lbnQoZSwgU25hcHNob3RWZXJzaW9uLm1pbigpKSk7XG4gICAgICAgICAgICB9IGVsc2UgX19QUklWQVRFX2hhcmRBc3NlcnQoMSA9PT0gbik7IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLlllKHQpO1xuICAgICAgICAgICAgICAgIC8vIEV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2guIE1hcmsgdGhlIGRvY3VtZW50cyBhcyBiZWluZyBpbiBsaW1ibywgYW5kXG4gICAgICAgICAgICAgICAgLy8gcmFpc2UgYSBzbmFwc2hvdCB3aXRoIGBpc0Zyb21DYWNoZTp0cnVlYC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIgIT09IG4pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQXBwbHkgYmxvb20gZmlsdGVyIHRvIGlkZW50aWZ5IGFuZCBtYXJrIHJlbW92ZWQgZG9jdW1lbnRzLlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gdGhpcy5aZShlKSwgaSA9IG4gPyB0aGlzLlhlKG4sIGUsIHIpIDogMSAvKiBCbG9vbUZpbHRlckFwcGxpY2F0aW9uU3RhdHVzLlNraXBwZWQgKi87XG4gICAgICAgICAgICAgICAgICAgIGlmICgwIC8qIEJsb29tRmlsdGVyQXBwbGljYXRpb25TdGF0dXMuU3VjY2VzcyAqLyAhPT0gaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgYmxvb20gZmlsdGVyIGFwcGxpY2F0aW9uIGZhaWxzLCB3ZSByZXNldCB0aGUgbWFwcGluZyBhbmRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyaWdnZXIgcmUtcnVuIG9mIHRoZSBxdWVyeS5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuamUodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gMiAvKiBCbG9vbUZpbHRlckFwcGxpY2F0aW9uU3RhdHVzLkZhbHNlUG9zaXRpdmUgKi8gPT09IGkgPyBcIlRhcmdldFB1cnBvc2VFeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaEJsb29tXCIgLyogVGFyZ2V0UHVycG9zZS5FeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaEJsb29tICovIDogXCJUYXJnZXRQdXJwb3NlRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2hcIiAvKiBUYXJnZXRQdXJwb3NlLkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoICovO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5RZSA9IHRoaXMuUWUuaW5zZXJ0KHQsIGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG51bGwgPT0gaGUgfHwgaGUuZXQoZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZUV4aXN0ZW5jZUZpbHRlck1pc21hdGNoSW5mb0ZvclRlc3RpbmdIb29rcyhlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcywgbywgXywgYSwgdSwgYztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGwgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxDYWNoZUNvdW50OiBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0ZW5jZUZpbHRlckNvdW50OiB0LmNvdW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFiYXNlSWQ6IG4uZGF0YWJhc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvamVjdElkOiBuLnByb2plY3RJZFxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgaCA9IHQudW5jaGFuZ2VkTmFtZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBoICYmIChsLmJsb29tRmlsdGVyID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGxpZWQ6IDAgLyogQmxvb21GaWx0ZXJBcHBsaWNhdGlvblN0YXR1cy5TdWNjZXNzICovID09PSBpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc2hDb3VudDogbnVsbCAhPT0gKHMgPSBudWxsID09IGggPyB2b2lkIDAgOiBoLmhhc2hDb3VudCkgJiYgdm9pZCAwICE9PSBzID8gcyA6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYml0bWFwTGVuZ3RoOiBudWxsICE9PSAoYSA9IG51bGwgPT09IChfID0gbnVsbCA9PT0gKG8gPSBudWxsID09IGggPyB2b2lkIDAgOiBoLmJpdHMpIHx8IHZvaWQgMCA9PT0gbyA/IHZvaWQgMCA6IG8uYml0bWFwKSB8fCB2b2lkIDAgPT09IF8gPyB2b2lkIDAgOiBfLmxlbmd0aCkgJiYgdm9pZCAwICE9PSBhID8gYSA6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogbnVsbCAhPT0gKGMgPSBudWxsID09PSAodSA9IG51bGwgPT0gaCA/IHZvaWQgMCA6IGguYml0cykgfHwgdm9pZCAwID09PSB1ID8gdm9pZCAwIDogdS5wYWRkaW5nKSAmJiB2b2lkIDAgIT09IGMgPyBjIDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaWdodENvbnRhaW46IGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgIT09ICh0ID0gbnVsbCA9PSByID8gdm9pZCAwIDogci5taWdodENvbnRhaW4oZSkpICYmIHZvaWQgMCAhPT0gdCAmJiB0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKHIsIGUubWUsIHRoaXMuTGUudHQoKSwgbiwgaSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZSB0aGUgYmxvb20gZmlsdGVyIGZyb20gdGhlIFwidW5jaGFuZ2VkX25hbWVzXCIgZmllbGQgb2YgYW4gZXhpc3RlbmNlXG4gICAgICogZmlsdGVyLlxuICAgICAqLyAgICBaZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLm1lLnVuY2hhbmdlZE5hbWVzO1xuICAgICAgICBpZiAoIXQgfHwgIXQuYml0cykgcmV0dXJuIG51bGw7XG4gICAgICAgIGNvbnN0IHtiaXRzOiB7Yml0bWFwOiBuID0gXCJcIiwgcGFkZGluZzogciA9IDB9LCBoYXNoQ291bnQ6IGkgPSAwfSA9IHQ7XG4gICAgICAgIGxldCBzLCBvO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcyA9IF9fUFJJVkFURV9ub3JtYWxpemVCeXRlU3RyaW5nKG4pLnRvVWludDhBcnJheSgpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9CYXNlNjREZWNvZGVFcnJvcikgcmV0dXJuIF9fUFJJVkFURV9sb2dXYXJuKFwiRGVjb2RpbmcgdGhlIGJhc2U2NCBibG9vbSBmaWx0ZXIgaW4gZXhpc3RlbmNlIGZpbHRlciBmYWlsZWQgKFwiICsgZS5tZXNzYWdlICsgXCIpOyBpZ25vcmluZyB0aGUgYmxvb20gZmlsdGVyIGFuZCBmYWxsaW5nIGJhY2sgdG8gZnVsbCByZS1xdWVyeS5cIiksIFxuICAgICAgICAgICAgbnVsbDtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEJsb29tRmlsdGVyIHRocm93cyBlcnJvciBpZiB0aGUgaW5wdXRzIGFyZSBpbnZhbGlkLlxuICAgICAgICAgICAgbyA9IG5ldyBCbG9vbUZpbHRlcihzLCByLCBpKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9sb2dXYXJuKGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfQmxvb21GaWx0ZXJFcnJvciA/IFwiQmxvb21GaWx0ZXIgZXJyb3I6IFwiIDogXCJBcHBseWluZyBibG9vbSBmaWx0ZXIgZmFpbGVkOiBcIiwgZSksIFxuICAgICAgICAgICAgbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMCA9PT0gby5JZSA/IG51bGwgOiBvO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBseSBibG9vbSBmaWx0ZXIgdG8gcmVtb3ZlIHRoZSBkZWxldGVkIGRvY3VtZW50cywgYW5kIHJldHVybiB0aGVcbiAgICAgKiBhcHBsaWNhdGlvbiBzdGF0dXMuXG4gICAgICovICAgIFhlKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIHQubWUuY291bnQgPT09IG4gLSB0aGlzLm50KGUsIHQudGFyZ2V0SWQpID8gMCAvKiBCbG9vbUZpbHRlckFwcGxpY2F0aW9uU3RhdHVzLlN1Y2Nlc3MgKi8gOiAyIC8qIEJsb29tRmlsdGVyQXBwbGljYXRpb25TdGF0dXMuRmFsc2VQb3NpdGl2ZSAqLztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmlsdGVyIG91dCByZW1vdmVkIGRvY3VtZW50cyBiYXNlZCBvbiBibG9vbSBmaWx0ZXIgbWVtYmVyc2hpcCByZXN1bHQgYW5kXG4gICAgICogcmV0dXJuIG51bWJlciBvZiBkb2N1bWVudHMgcmVtb3ZlZC5cbiAgICAgKi8gICAgbnQoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5MZS5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KHQpO1xuICAgICAgICBsZXQgciA9IDA7XG4gICAgICAgIHJldHVybiBuLmZvckVhY2goKG4gPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMuTGUudHQoKSwgcyA9IGBwcm9qZWN0cy8ke2kucHJvamVjdElkfS9kYXRhYmFzZXMvJHtpLmRhdGFiYXNlfS9kb2N1bWVudHMvJHtuLnBhdGguY2Fub25pY2FsU3RyaW5nKCl9YDtcbiAgICAgICAgICAgIGUubWlnaHRDb250YWluKHMpIHx8ICh0aGlzLlVlKHQsIG4sIC8qdXBkYXRlZERvY3VtZW50PSovIG51bGwpLCByKyspO1xuICAgICAgICB9KSksIHI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoZSBjdXJyZW50bHkgYWNjdW11bGF0ZWQgc3RhdGUgaW50byBhIHJlbW90ZSBldmVudCBhdCB0aGVcbiAgICAgKiBwcm92aWRlZCBzbmFwc2hvdCB2ZXJzaW9uLiBSZXNldHMgdGhlIGFjY3VtdWxhdGVkIGNoYW5nZXMgYmVmb3JlIHJldHVybmluZy5cbiAgICAgKi8gICAgcnQoZSkge1xuICAgICAgICBjb25zdCB0ID0gbmV3IE1hcDtcbiAgICAgICAgdGhpcy5CZS5mb3JFYWNoKCgobiwgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMuSmUocik7XG4gICAgICAgICAgICBpZiAoaSkge1xuICAgICAgICAgICAgICAgIGlmIChuLmN1cnJlbnQgJiYgX19QUklWQVRFX3RhcmdldElzRG9jdW1lbnRUYXJnZXQoaS50YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIERvY3VtZW50IHF1ZXJpZXMgZm9yIGRvY3VtZW50IHRoYXQgZG9uJ3QgZXhpc3QgY2FuIHByb2R1Y2UgYW4gZW1wdHlcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVzdWx0IHNldC4gVG8gdXBkYXRlIG91ciBsb2NhbCBjYWNoZSwgd2Ugc3ludGhlc2l6ZSBhIGRvY3VtZW50XG4gICAgICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSBpZiB3ZSBoYXZlIG5vdCBwcmV2aW91c2x5IHJlY2VpdmVkIHRoZSBkb2N1bWVudC4gVGhpc1xuICAgICAgICAgICAgICAgICAgICAvLyByZXNvbHZlcyB0aGUgbGltYm8gc3RhdGUgb2YgdGhlIGRvY3VtZW50LCByZW1vdmluZyBpdCBmcm9tXG4gICAgICAgICAgICAgICAgICAgIC8vIGxpbWJvRG9jdW1lbnRSZWZzLlxuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IElkZWFsbHkgd2Ugd291bGQgaGF2ZSBhbiBleHBsaWNpdCBsb29rdXAgdGFyZ2V0XG4gICAgICAgICAgICAgICAgICAgIC8vIGluc3RlYWQgcmVzdWx0aW5nIGluIGFuIGV4cGxpY2l0IGRlbGV0ZSBtZXNzYWdlIGFuZCB3ZSBjb3VsZFxuICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgdGhpcyBzcGVjaWFsIGxvZ2ljLlxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gbmV3IERvY3VtZW50S2V5KGkudGFyZ2V0LnBhdGgpO1xuICAgICAgICAgICAgICAgICAgICBudWxsICE9PSB0aGlzLmtlLmdldCh0KSB8fCB0aGlzLml0KHIsIHQpIHx8IHRoaXMuVWUociwgdCwgTXV0YWJsZURvY3VtZW50Lm5ld05vRG9jdW1lbnQodCwgZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuLmJlICYmICh0LnNldChyLCBuLkNlKCkpLCBuLnZlKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIGxldCBuID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCk7XG4gICAgICAgIC8vIFdlIGV4dHJhY3QgdGhlIHNldCBvZiBsaW1iby1vbmx5IGRvY3VtZW50IHVwZGF0ZXMgYXMgdGhlIEdDIGxvZ2ljXG4gICAgICAgIC8vIHNwZWNpYWwtY2FzZXMgZG9jdW1lbnRzIHRoYXQgZG8gbm90IGFwcGVhciBpbiB0aGUgdGFyZ2V0IGNhY2hlLlxuICAgICAgICBcbiAgICAgICAgLy8gVE9ETyhnc29sdGlzKTogRXhwYW5kIG9uIHRoaXMgY29tbWVudCBvbmNlIEdDIGlzIGF2YWlsYWJsZSBpbiB0aGUgSlNcbiAgICAgICAgLy8gY2xpZW50LlxuICAgICAgICAgICAgICAgIHRoaXMucWUuZm9yRWFjaCgoKGUsIHQpID0+IHtcbiAgICAgICAgICAgIGxldCByID0gITA7XG4gICAgICAgICAgICB0LmZvckVhY2hXaGlsZSgoZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuSmUoZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuICF0IHx8IFwiVGFyZ2V0UHVycG9zZUxpbWJvUmVzb2x1dGlvblwiIC8qIFRhcmdldFB1cnBvc2UuTGltYm9SZXNvbHV0aW9uICovID09PSB0LnB1cnBvc2UgfHwgKHIgPSAhMSwgXG4gICAgICAgICAgICAgICAgITEpO1xuICAgICAgICAgICAgfSkpLCByICYmIChuID0gbi5hZGQoZSkpO1xuICAgICAgICB9KSksIHRoaXMua2UuZm9yRWFjaCgoKHQsIG4pID0+IG4uc2V0UmVhZFRpbWUoZSkpKTtcbiAgICAgICAgY29uc3QgciA9IG5ldyBSZW1vdGVFdmVudChlLCB0LCB0aGlzLlFlLCB0aGlzLmtlLCBuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMua2UgPSBfX1BSSVZBVEVfbXV0YWJsZURvY3VtZW50TWFwKCksIHRoaXMucWUgPSBfX1BSSVZBVEVfZG9jdW1lbnRUYXJnZXRNYXAoKSwgXG4gICAgICAgIHRoaXMuUWUgPSBuZXcgU29ydGVkTWFwKF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKSwgcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyB0aGUgcHJvdmlkZWQgZG9jdW1lbnQgdG8gdGhlIGludGVybmFsIGxpc3Qgb2YgZG9jdW1lbnQgdXBkYXRlcyBhbmRcbiAgICAgKiBpdHMgZG9jdW1lbnQga2V5IHRvIHRoZSBnaXZlbiB0YXJnZXQncyBtYXBwaW5nLlxuICAgICAqL1xuICAgIC8vIFZpc2libGUgZm9yIHRlc3RpbmcuXG4gICAgJGUoZSwgdCkge1xuICAgICAgICBpZiAoIXRoaXMuemUoZSkpIHJldHVybjtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuaXQoZSwgdC5rZXkpID8gMiAvKiBDaGFuZ2VUeXBlLk1vZGlmaWVkICovIDogMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovO1xuICAgICAgICB0aGlzLkdlKGUpLkZlKHQua2V5LCBuKSwgdGhpcy5rZSA9IHRoaXMua2UuaW5zZXJ0KHQua2V5LCB0KSwgdGhpcy5xZSA9IHRoaXMucWUuaW5zZXJ0KHQua2V5LCB0aGlzLnN0KHQua2V5KS5hZGQoZSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBwcm92aWRlZCBkb2N1bWVudCBmcm9tIHRoZSB0YXJnZXQgbWFwcGluZy4gSWYgdGhlXG4gICAgICogZG9jdW1lbnQgbm8gbG9uZ2VyIG1hdGNoZXMgdGhlIHRhcmdldCwgYnV0IHRoZSBkb2N1bWVudCdzIHN0YXRlIGlzIHN0aWxsXG4gICAgICoga25vd24gKGUuZy4gd2Uga25vdyB0aGF0IHRoZSBkb2N1bWVudCB3YXMgZGVsZXRlZCBvciB3ZSByZWNlaXZlZCB0aGUgY2hhbmdlXG4gICAgICogdGhhdCBjYXVzZWQgdGhlIGZpbHRlciBtaXNtYXRjaCksIHRoZSBuZXcgZG9jdW1lbnQgY2FuIGJlIHByb3ZpZGVkXG4gICAgICogdG8gdXBkYXRlIHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGUuXG4gICAgICovXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAgICBVZShlLCB0LCBuKSB7XG4gICAgICAgIGlmICghdGhpcy56ZShlKSkgcmV0dXJuO1xuICAgICAgICBjb25zdCByID0gdGhpcy5HZShlKTtcbiAgICAgICAgdGhpcy5pdChlLCB0KSA/IHIuRmUodCwgMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8pIDogXG4gICAgICAgIC8vIFRoZSBkb2N1bWVudCBtYXkgaGF2ZSBlbnRlcmVkIGFuZCBsZWZ0IHRoZSB0YXJnZXQgYmVmb3JlIHdlIHJhaXNlZCBhXG4gICAgICAgIC8vIHNuYXBzaG90LCBzbyB3ZSBjYW4ganVzdCBpZ25vcmUgdGhlIGNoYW5nZS5cbiAgICAgICAgci5NZSh0KSwgdGhpcy5xZSA9IHRoaXMucWUuaW5zZXJ0KHQsIHRoaXMuc3QodCkuZGVsZXRlKGUpKSwgbiAmJiAodGhpcy5rZSA9IHRoaXMua2UuaW5zZXJ0KHQsIG4pKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0KGUpIHtcbiAgICAgICAgdGhpcy5CZS5kZWxldGUoZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgY291bnQgb2YgZG9jdW1lbnRzIGluIHRoZSB0YXJnZXQuIFRoaXMgaW5jbHVkZXMgYm90aFxuICAgICAqIHRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIHRoYXQgdGhlIExvY2FsU3RvcmUgY29uc2lkZXJzIHRvIGJlIHBhcnQgb2YgdGhlXG4gICAgICogdGFyZ2V0IGFzIHdlbGwgYXMgYW55IGFjY3VtdWxhdGVkIGNoYW5nZXMuXG4gICAgICovICAgIFllKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuR2UoZSkuQ2UoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuTGUuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldChlKS5zaXplICsgdC5hZGRlZERvY3VtZW50cy5zaXplIC0gdC5yZW1vdmVkRG9jdW1lbnRzLnNpemU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluY3JlbWVudCB0aGUgbnVtYmVyIG9mIGFja3MgbmVlZGVkIGZyb20gd2F0Y2ggYmVmb3JlIHdlIGNhbiBjb25zaWRlciB0aGVcbiAgICAgKiBzZXJ2ZXIgdG8gYmUgJ2luLXN5bmMnIHdpdGggdGhlIGNsaWVudCdzIGFjdGl2ZSB0YXJnZXRzLlxuICAgICAqLyAgICB4ZShlKSB7XG4gICAgICAgIHRoaXMuR2UoZSkueGUoKTtcbiAgICB9XG4gICAgR2UoZSkge1xuICAgICAgICBsZXQgdCA9IHRoaXMuQmUuZ2V0KGUpO1xuICAgICAgICByZXR1cm4gdCB8fCAodCA9IG5ldyBfX1BSSVZBVEVfVGFyZ2V0U3RhdGUsIHRoaXMuQmUuc2V0KGUsIHQpKSwgdDtcbiAgICB9XG4gICAgc3QoZSkge1xuICAgICAgICBsZXQgdCA9IHRoaXMucWUuZ2V0KGUpO1xuICAgICAgICByZXR1cm4gdCB8fCAodCA9IG5ldyBTb3J0ZWRTZXQoX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IpLCB0aGlzLnFlID0gdGhpcy5xZS5pbnNlcnQoZSwgdCkpLCBcbiAgICAgICAgdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVmVyaWZpZXMgdGhhdCB0aGUgdXNlciBpcyBzdGlsbCBpbnRlcmVzdGVkIGluIHRoaXMgdGFyZ2V0IChieSBjYWxsaW5nXG4gICAgICogYGdldFRhcmdldERhdGFGb3JUYXJnZXQoKWApIGFuZCB0aGF0IHdlIGFyZSBub3Qgd2FpdGluZyBmb3IgcGVuZGluZyBBRERzXG4gICAgICogZnJvbSB3YXRjaC5cbiAgICAgKi8gICAgemUoZSkge1xuICAgICAgICBjb25zdCB0ID0gbnVsbCAhPT0gdGhpcy5KZShlKTtcbiAgICAgICAgcmV0dXJuIHQgfHwgX19QUklWQVRFX2xvZ0RlYnVnKFwiV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yXCIsIFwiRGV0ZWN0ZWQgaW5hY3RpdmUgdGFyZ2V0XCIsIGUpLCBcbiAgICAgICAgdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgVGFyZ2V0RGF0YSBmb3IgYW4gYWN0aXZlIHRhcmdldCAoaS5lLiBhIHRhcmdldCB0aGF0IHRoZSB1c2VyXG4gICAgICogaXMgc3RpbGwgaW50ZXJlc3RlZCBpbiB0aGF0IGhhcyBubyBvdXRzdGFuZGluZyB0YXJnZXQgY2hhbmdlIHJlcXVlc3RzKS5cbiAgICAgKi8gICAgSmUoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5CZS5nZXQoZSk7XG4gICAgICAgIHJldHVybiB0ICYmIHQuU2UgPyBudWxsIDogdGhpcy5MZS5vdChlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBzdGF0ZSBvZiBhIFdhdGNoIHRhcmdldCB0byBpdHMgaW5pdGlhbCBzdGF0ZSAoZS5nLiBzZXRzXG4gICAgICogJ2N1cnJlbnQnIHRvIGZhbHNlLCBjbGVhcnMgdGhlIHJlc3VtZSB0b2tlbiBhbmQgcmVtb3ZlcyBpdHMgdGFyZ2V0IG1hcHBpbmdcbiAgICAgKiBmcm9tIGFsbCBkb2N1bWVudHMpLlxuICAgICAqLyAgICBqZShlKSB7XG4gICAgICAgIHRoaXMuQmUuc2V0KGUsIG5ldyBfX1BSSVZBVEVfVGFyZ2V0U3RhdGUpO1xuICAgICAgICB0aGlzLkxlLmdldFJlbW90ZUtleXNGb3JUYXJnZXQoZSkuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICB0aGlzLlVlKGUsIHQsIC8qdXBkYXRlZERvY3VtZW50PSovIG51bGwpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciB0aGUgTG9jYWxTdG9yZSBjb25zaWRlcnMgdGhlIGRvY3VtZW50IHRvIGJlIHBhcnQgb2YgdGhlXG4gICAgICogc3BlY2lmaWVkIHRhcmdldC5cbiAgICAgKi8gICAgaXQoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5MZS5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KGUpLmhhcyh0KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9kb2N1bWVudFRhcmdldE1hcCgpIHtcbiAgICByZXR1cm4gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3NuYXBzaG90Q2hhbmdlc01hcCgpIHtcbiAgICByZXR1cm4gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcbn1cblxuY29uc3QgSWUgPSAoKCkgPT4ge1xuICAgIGNvbnN0IGUgPSB7XG4gICAgICAgIGFzYzogXCJBU0NFTkRJTkdcIixcbiAgICAgICAgZGVzYzogXCJERVNDRU5ESU5HXCJcbiAgICB9O1xuICAgIHJldHVybiBlO1xufSkoKSwgVGUgPSAoKCkgPT4ge1xuICAgIGNvbnN0IGUgPSB7XG4gICAgICAgIFwiPFwiOiBcIkxFU1NfVEhBTlwiLFxuICAgICAgICBcIjw9XCI6IFwiTEVTU19USEFOX09SX0VRVUFMXCIsXG4gICAgICAgIFwiPlwiOiBcIkdSRUFURVJfVEhBTlwiLFxuICAgICAgICBcIj49XCI6IFwiR1JFQVRFUl9USEFOX09SX0VRVUFMXCIsXG4gICAgICAgIFwiPT1cIjogXCJFUVVBTFwiLFxuICAgICAgICBcIiE9XCI6IFwiTk9UX0VRVUFMXCIsXG4gICAgICAgIFwiYXJyYXktY29udGFpbnNcIjogXCJBUlJBWV9DT05UQUlOU1wiLFxuICAgICAgICBpbjogXCJJTlwiLFxuICAgICAgICBcIm5vdC1pblwiOiBcIk5PVF9JTlwiLFxuICAgICAgICBcImFycmF5LWNvbnRhaW5zLWFueVwiOiBcIkFSUkFZX0NPTlRBSU5TX0FOWVwiXG4gICAgfTtcbiAgICByZXR1cm4gZTtcbn0pKCksIEVlID0gKCgpID0+IHtcbiAgICBjb25zdCBlID0ge1xuICAgICAgICBhbmQ6IFwiQU5EXCIsXG4gICAgICAgIG9yOiBcIk9SXCJcbiAgICB9O1xuICAgIHJldHVybiBlO1xufSkoKTtcblxuLyoqXG4gKiBUaGlzIGNsYXNzIGdlbmVyYXRlcyBKc29uT2JqZWN0IHZhbHVlcyBmb3IgdGhlIERhdGFzdG9yZSBBUEkgc3VpdGFibGUgZm9yXG4gKiBzZW5kaW5nIHRvIGVpdGhlciBHUlBDIHN0dWIgbWV0aG9kcyBvciB2aWEgdGhlIEpTT04vSFRUUCBSRVNUIEFQSS5cbiAqXG4gKiBUaGUgc2VyaWFsaXplciBzdXBwb3J0cyBib3RoIFByb3RvYnVmLmpzIGFuZCBQcm90bzMgSlNPTiBmb3JtYXRzLiBCeVxuICogc2V0dGluZyBgdXNlUHJvdG8zSnNvbmAgdG8gdHJ1ZSwgdGhlIHNlcmlhbGl6ZXIgd2lsbCB1c2UgdGhlIFByb3RvMyBKU09OXG4gKiBmb3JtYXQuXG4gKlxuICogRm9yIGEgZGVzY3JpcHRpb24gb2YgdGhlIFByb3RvMyBKU09OIGZvcm1hdCBjaGVja1xuICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vcHJvdG9jb2wtYnVmZmVycy9kb2NzL3Byb3RvMyNqc29uXG4gKlxuICogVE9ETyhrbGltdCk6IFdlIGNhbiByZW1vdmUgdGhlIGRhdGFiYXNlSWQgYXJndW1lbnQgaWYgd2Uga2VlcCB0aGUgZnVsbFxuICogcmVzb3VyY2UgbmFtZSBpbiBkb2N1bWVudHMuXG4gKi9cbmNsYXNzIEpzb25Qcm90b1NlcmlhbGl6ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5kYXRhYmFzZUlkID0gZSwgdGhpcy51c2VQcm90bzNKc29uID0gdDtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHZhbHVlIGZvciBhIG51bWJlciAob3IgbnVsbCkgdGhhdCdzIGFwcHJvcHJpYXRlIHRvIHB1dCBpbnRvXG4gKiBhIGdvb2dsZS5wcm90b2J1Zi5JbnQzMlZhbHVlIHByb3RvLlxuICogRE8gTk9UIFVTRSBUSElTIEZPUiBBTllUSElORyBFTFNFLlxuICogVGhpcyBtZXRob2QgY2hlYXRzLiBJdCdzIHR5cGVkIGFzIHJldHVybmluZyBcIm51bWJlclwiIGJlY2F1c2UgdGhhdCdzIHdoYXRcbiAqIG91ciBnZW5lcmF0ZWQgcHJvdG8gaW50ZXJmYWNlcyBzYXkgSW50MzJWYWx1ZSBtdXN0IGJlLiBCdXQgR1JQQyBhY3R1YWxseVxuICogZXhwZWN0cyBhIHsgdmFsdWU6IDxudW1iZXI+IH0gc3RydWN0LlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9JbnQzMlByb3RvKGUsIHQpIHtcbiAgICByZXR1cm4gZS51c2VQcm90bzNKc29uIHx8IF9fUFJJVkFURV9pc051bGxPclVuZGVmaW5lZCh0KSA/IHQgOiB7XG4gICAgICAgIHZhbHVlOiB0XG4gICAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgbnVtYmVyIChvciBudWxsKSBmcm9tIGEgZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWUgcHJvdG8uXG4gKi9cbi8qKlxuICogUmV0dXJucyBhIHZhbHVlIGZvciBhIERhdGUgdGhhdCdzIGFwcHJvcHJpYXRlIHRvIHB1dCBpbnRvIGEgcHJvdG8uXG4gKi9cbmZ1bmN0aW9uIHRvVGltZXN0YW1wKGUsIHQpIHtcbiAgICBpZiAoZS51c2VQcm90bzNKc29uKSB7XG4gICAgICAgIHJldHVybiBgJHtuZXcgRGF0ZSgxZTMgKiB0LnNlY29uZHMpLnRvSVNPU3RyaW5nKCkucmVwbGFjZSgvXFwuXFxkKi8sIFwiXCIpLnJlcGxhY2UoXCJaXCIsIFwiXCIpfS4keyhcIjAwMDAwMDAwMFwiICsgdC5uYW5vc2Vjb25kcykuc2xpY2UoLTkpfVpgO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBzZWNvbmRzOiBcIlwiICsgdC5zZWNvbmRzLFxuICAgICAgICBuYW5vczogdC5uYW5vc2Vjb25kc1xuICAgIH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHZhbHVlIGZvciBieXRlcyB0aGF0J3MgYXBwcm9wcmlhdGUgdG8gcHV0IGluIGEgcHJvdG8uXG4gKlxuICogVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX3RvQnl0ZXMoZSwgdCkge1xuICAgIHJldHVybiBlLnVzZVByb3RvM0pzb24gPyB0LnRvQmFzZTY0KCkgOiB0LnRvVWludDhBcnJheSgpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBCeXRlU3RyaW5nIGJhc2VkIG9uIHRoZSBwcm90byBzdHJpbmcgdmFsdWUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3RvVmVyc2lvbihlLCB0KSB7XG4gICAgcmV0dXJuIHRvVGltZXN0YW1wKGUsIHQudG9UaW1lc3RhbXAoKSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tVmVyc2lvbihlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9oYXJkQXNzZXJ0KCEhZSksIFNuYXBzaG90VmVyc2lvbi5mcm9tVGltZXN0YW1wKGZ1bmN0aW9uIGZyb21UaW1lc3RhbXAoZSkge1xuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX25vcm1hbGl6ZVRpbWVzdGFtcChlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBUaW1lc3RhbXAodC5zZWNvbmRzLCB0Lm5hbm9zKTtcbiAgICB9KGUpKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3RvUmVzb3VyY2VOYW1lKGUsIHQpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX3RvUmVzb3VyY2VQYXRoKGUsIHQpLmNhbm9uaWNhbFN0cmluZygpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9SZXNvdXJjZVBhdGgoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBmdW5jdGlvbiBfX1BSSVZBVEVfZnVsbHlRdWFsaWZpZWRQcmVmaXhQYXRoKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZXNvdXJjZVBhdGgoWyBcInByb2plY3RzXCIsIGUucHJvamVjdElkLCBcImRhdGFiYXNlc1wiLCBlLmRhdGFiYXNlIF0pO1xuICAgIH0oZSkuY2hpbGQoXCJkb2N1bWVudHNcIik7XG4gICAgcmV0dXJuIHZvaWQgMCA9PT0gdCA/IG4gOiBuLmNoaWxkKHQpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZnJvbVJlc291cmNlTmFtZShlKSB7XG4gICAgY29uc3QgdCA9IFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKGUpO1xuICAgIHJldHVybiBfX1BSSVZBVEVfaGFyZEFzc2VydChfX1BSSVZBVEVfaXNWYWxpZFJlc291cmNlTmFtZSh0KSksIHQ7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV90b05hbWUoZSwgdCkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfdG9SZXNvdXJjZU5hbWUoZS5kYXRhYmFzZUlkLCB0LnBhdGgpO1xufVxuXG5mdW5jdGlvbiBmcm9tTmFtZShlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9mcm9tUmVzb3VyY2VOYW1lKHQpO1xuICAgIGlmIChuLmdldCgxKSAhPT0gZS5kYXRhYmFzZUlkLnByb2plY3RJZCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEMuSU5WQUxJRF9BUkdVTUVOVCwgXCJUcmllZCB0byBkZXNlcmlhbGl6ZSBrZXkgZnJvbSBkaWZmZXJlbnQgcHJvamVjdDogXCIgKyBuLmdldCgxKSArIFwiIHZzIFwiICsgZS5kYXRhYmFzZUlkLnByb2plY3RJZCk7XG4gICAgaWYgKG4uZ2V0KDMpICE9PSBlLmRhdGFiYXNlSWQuZGF0YWJhc2UpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDLklOVkFMSURfQVJHVU1FTlQsIFwiVHJpZWQgdG8gZGVzZXJpYWxpemUga2V5IGZyb20gZGlmZmVyZW50IGRhdGFiYXNlOiBcIiArIG4uZ2V0KDMpICsgXCIgdnMgXCIgKyBlLmRhdGFiYXNlSWQuZGF0YWJhc2UpO1xuICAgIHJldHVybiBuZXcgRG9jdW1lbnRLZXkoX19QUklWQVRFX2V4dHJhY3RMb2NhbFBhdGhGcm9tUmVzb3VyY2VOYW1lKG4pKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3RvUXVlcnlQYXRoKGUsIHQpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX3RvUmVzb3VyY2VOYW1lKGUuZGF0YWJhc2VJZCwgdCk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tUXVlcnlQYXRoKGUpIHtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2Zyb21SZXNvdXJjZU5hbWUoZSk7XG4gICAgLy8gSW4gdjFiZXRhMSBxdWVyaWVzIGZvciBjb2xsZWN0aW9ucyBhdCB0aGUgcm9vdCBkaWQgbm90IGhhdmUgYSB0cmFpbGluZ1xuICAgIC8vIFwiL2RvY3VtZW50c1wiLiBJbiB2MSBhbGwgcmVzb3VyY2UgcGF0aHMgY29udGFpbiBcIi9kb2N1bWVudHNcIi4gUHJlc2VydmUgdGhlXG4gICAgLy8gYWJpbGl0eSB0byByZWFkIHRoZSB2MWJldGExIGZvcm0gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBxdWVyaWVzIHBlcnNpc3RlZFxuICAgIC8vIGluIHRoZSBsb2NhbCB0YXJnZXQgY2FjaGUuXG4gICAgICAgIHJldHVybiA0ID09PSB0Lmxlbmd0aCA/IFJlc291cmNlUGF0aC5lbXB0eVBhdGgoKSA6IF9fUFJJVkFURV9leHRyYWN0TG9jYWxQYXRoRnJvbVJlc291cmNlTmFtZSh0KTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2dldEVuY29kZWREYXRhYmFzZUlkKGUpIHtcbiAgICByZXR1cm4gbmV3IFJlc291cmNlUGF0aChbIFwicHJvamVjdHNcIiwgZS5kYXRhYmFzZUlkLnByb2plY3RJZCwgXCJkYXRhYmFzZXNcIiwgZS5kYXRhYmFzZUlkLmRhdGFiYXNlIF0pLmNhbm9uaWNhbFN0cmluZygpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZXh0cmFjdExvY2FsUGF0aEZyb21SZXNvdXJjZU5hbWUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfaGFyZEFzc2VydChlLmxlbmd0aCA+IDQgJiYgXCJkb2N1bWVudHNcIiA9PT0gZS5nZXQoNCkpLCBlLnBvcEZpcnN0KDUpO1xufVxuXG4vKiogQ3JlYXRlcyBhIERvY3VtZW50IHByb3RvIGZyb20ga2V5IGFuZCBmaWVsZHMgKGJ1dCBubyBjcmVhdGUvdXBkYXRlIHRpbWUpICovIGZ1bmN0aW9uIF9fUFJJVkFURV90b011dGF0aW9uRG9jdW1lbnQoZSwgdCwgbikge1xuICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IF9fUFJJVkFURV90b05hbWUoZSwgdCksXG4gICAgICAgIGZpZWxkczogbi52YWx1ZS5tYXBWYWx1ZS5maWVsZHNcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZnJvbURvY3VtZW50KGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gZnJvbU5hbWUoZSwgdC5uYW1lKSwgaSA9IF9fUFJJVkFURV9mcm9tVmVyc2lvbih0LnVwZGF0ZVRpbWUpLCBzID0gdC5jcmVhdGVUaW1lID8gX19QUklWQVRFX2Zyb21WZXJzaW9uKHQuY3JlYXRlVGltZSkgOiBTbmFwc2hvdFZlcnNpb24ubWluKCksIG8gPSBuZXcgT2JqZWN0VmFsdWUoe1xuICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgZmllbGRzOiB0LmZpZWxkc1xuICAgICAgICB9XG4gICAgfSksIF8gPSBNdXRhYmxlRG9jdW1lbnQubmV3Rm91bmREb2N1bWVudChyLCBpLCBzLCBvKTtcbiAgICByZXR1cm4gbiAmJiBfLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpLCBuID8gXy5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKSA6IF87XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tQmF0Y2hHZXREb2N1bWVudHNSZXNwb25zZShlLCB0KSB7XG4gICAgcmV0dXJuIFwiZm91bmRcIiBpbiB0ID8gZnVuY3Rpb24gX19QUklWQVRFX2Zyb21Gb3VuZChlLCB0KSB7XG4gICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KCEhdC5mb3VuZCksIHQuZm91bmQubmFtZSwgdC5mb3VuZC51cGRhdGVUaW1lO1xuICAgICAgICBjb25zdCBuID0gZnJvbU5hbWUoZSwgdC5mb3VuZC5uYW1lKSwgciA9IF9fUFJJVkFURV9mcm9tVmVyc2lvbih0LmZvdW5kLnVwZGF0ZVRpbWUpLCBpID0gdC5mb3VuZC5jcmVhdGVUaW1lID8gX19QUklWQVRFX2Zyb21WZXJzaW9uKHQuZm91bmQuY3JlYXRlVGltZSkgOiBTbmFwc2hvdFZlcnNpb24ubWluKCksIHMgPSBuZXcgT2JqZWN0VmFsdWUoe1xuICAgICAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgICAgICBmaWVsZHM6IHQuZm91bmQuZmllbGRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gTXV0YWJsZURvY3VtZW50Lm5ld0ZvdW5kRG9jdW1lbnQobiwgciwgaSwgcyk7XG4gICAgfShlLCB0KSA6IFwibWlzc2luZ1wiIGluIHQgPyBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbU1pc3NpbmcoZSwgdCkge1xuICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydCghIXQubWlzc2luZyksIF9fUFJJVkFURV9oYXJkQXNzZXJ0KCEhdC5yZWFkVGltZSk7XG4gICAgICAgIGNvbnN0IG4gPSBmcm9tTmFtZShlLCB0Lm1pc3NpbmcpLCByID0gX19QUklWQVRFX2Zyb21WZXJzaW9uKHQucmVhZFRpbWUpO1xuICAgICAgICByZXR1cm4gTXV0YWJsZURvY3VtZW50Lm5ld05vRG9jdW1lbnQobiwgcik7XG4gICAgfShlLCB0KSA6IGZhaWwoKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2Zyb21XYXRjaENoYW5nZShlLCB0KSB7XG4gICAgbGV0IG47XG4gICAgaWYgKFwidGFyZ2V0Q2hhbmdlXCIgaW4gdCkge1xuICAgICAgICB0LnRhcmdldENoYW5nZTtcbiAgICAgICAgLy8gcHJvdG8zIGRlZmF1bHQgdmFsdWUgaXMgdW5zZXQgaW4gSlNPTiAodW5kZWZpbmVkKSwgc28gdXNlICdOT19DSEFOR0UnXG4gICAgICAgIC8vIGlmIHVuc2V0XG4gICAgICAgIGNvbnN0IHIgPSBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbVdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUoZSkge1xuICAgICAgICAgICAgcmV0dXJuIFwiTk9fQ0hBTkdFXCIgPT09IGUgPyAwIC8qIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuTm9DaGFuZ2UgKi8gOiBcIkFERFwiID09PSBlID8gMSAvKiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLkFkZGVkICovIDogXCJSRU1PVkVcIiA9PT0gZSA/IDIgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5SZW1vdmVkICovIDogXCJDVVJSRU5UXCIgPT09IGUgPyAzIC8qIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuQ3VycmVudCAqLyA6IFwiUkVTRVRcIiA9PT0gZSA/IDQgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5SZXNldCAqLyA6IGZhaWwoKTtcbiAgICAgICAgfSh0LnRhcmdldENoYW5nZS50YXJnZXRDaGFuZ2VUeXBlIHx8IFwiTk9fQ0hBTkdFXCIpLCBpID0gdC50YXJnZXRDaGFuZ2UudGFyZ2V0SWRzIHx8IFtdLCBzID0gZnVuY3Rpb24gX19QUklWQVRFX2Zyb21CeXRlcyhlLCB0KSB7XG4gICAgICAgICAgICByZXR1cm4gZS51c2VQcm90bzNKc29uID8gKF9fUFJJVkFURV9oYXJkQXNzZXJ0KHZvaWQgMCA9PT0gdCB8fCBcInN0cmluZ1wiID09IHR5cGVvZiB0KSwgXG4gICAgICAgICAgICBCeXRlU3RyaW5nLmZyb21CYXNlNjRTdHJpbmcodCB8fCBcIlwiKSkgOiAoX19QUklWQVRFX2hhcmRBc3NlcnQodm9pZCAwID09PSB0IHx8IFxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHZhbHVlIGlzIGFuIGluc3RhbmNlIG9mIGJvdGggQnVmZmVyIGFuZCBVaW50OEFycmF5LFxuICAgICAgICAgICAgLy8gZGVzcGl0ZSB0aGUgZmFjdCB0aGF0IEJ1ZmZlciBleHRlbmRzIFVpbnQ4QXJyYXkuIEluIHNvbWVcbiAgICAgICAgICAgIC8vIGVudmlyb25tZW50cywgc3VjaCBhcyBqc2RvbSwgdGhlIHByb3RvdHlwZSBjaGFpbiBvZiBCdWZmZXJcbiAgICAgICAgICAgIC8vIGRvZXMgbm90IGluZGljYXRlIHRoYXQgaXQgZXh0ZW5kcyBVaW50OEFycmF5LlxuICAgICAgICAgICAgdCBpbnN0YW5jZW9mIEJ1ZmZlciB8fCB0IGluc3RhbmNlb2YgVWludDhBcnJheSksIEJ5dGVTdHJpbmcuZnJvbVVpbnQ4QXJyYXkodCB8fCBuZXcgVWludDhBcnJheSkpO1xuICAgICAgICB9KGUsIHQudGFyZ2V0Q2hhbmdlLnJlc3VtZVRva2VuKSwgbyA9IHQudGFyZ2V0Q2hhbmdlLmNhdXNlLCBfID0gbyAmJiBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbVJwY1N0YXR1cyhlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdm9pZCAwID09PSBlLmNvZGUgPyBDLlVOS05PV04gOiBfX1BSSVZBVEVfbWFwQ29kZUZyb21ScGNDb2RlKGUuY29kZSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEZpcmVzdG9yZUVycm9yKHQsIGUubWVzc2FnZSB8fCBcIlwiKTtcbiAgICAgICAgfShvKTtcbiAgICAgICAgbiA9IG5ldyBfX1BSSVZBVEVfV2F0Y2hUYXJnZXRDaGFuZ2UociwgaSwgcywgXyB8fCBudWxsKTtcbiAgICB9IGVsc2UgaWYgKFwiZG9jdW1lbnRDaGFuZ2VcIiBpbiB0KSB7XG4gICAgICAgIHQuZG9jdW1lbnRDaGFuZ2U7XG4gICAgICAgIGNvbnN0IHIgPSB0LmRvY3VtZW50Q2hhbmdlO1xuICAgICAgICByLmRvY3VtZW50LCByLmRvY3VtZW50Lm5hbWUsIHIuZG9jdW1lbnQudXBkYXRlVGltZTtcbiAgICAgICAgY29uc3QgaSA9IGZyb21OYW1lKGUsIHIuZG9jdW1lbnQubmFtZSksIHMgPSBfX1BSSVZBVEVfZnJvbVZlcnNpb24oci5kb2N1bWVudC51cGRhdGVUaW1lKSwgbyA9IHIuZG9jdW1lbnQuY3JlYXRlVGltZSA/IF9fUFJJVkFURV9mcm9tVmVyc2lvbihyLmRvY3VtZW50LmNyZWF0ZVRpbWUpIDogU25hcHNob3RWZXJzaW9uLm1pbigpLCBfID0gbmV3IE9iamVjdFZhbHVlKHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiByLmRvY3VtZW50LmZpZWxkc1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSwgYSA9IE11dGFibGVEb2N1bWVudC5uZXdGb3VuZERvY3VtZW50KGksIHMsIG8sIF8pLCB1ID0gci50YXJnZXRJZHMgfHwgW10sIGMgPSByLnJlbW92ZWRUYXJnZXRJZHMgfHwgW107XG4gICAgICAgIG4gPSBuZXcgX19QUklWQVRFX0RvY3VtZW50V2F0Y2hDaGFuZ2UodSwgYywgYS5rZXksIGEpO1xuICAgIH0gZWxzZSBpZiAoXCJkb2N1bWVudERlbGV0ZVwiIGluIHQpIHtcbiAgICAgICAgdC5kb2N1bWVudERlbGV0ZTtcbiAgICAgICAgY29uc3QgciA9IHQuZG9jdW1lbnREZWxldGU7XG4gICAgICAgIHIuZG9jdW1lbnQ7XG4gICAgICAgIGNvbnN0IGkgPSBmcm9tTmFtZShlLCByLmRvY3VtZW50KSwgcyA9IHIucmVhZFRpbWUgPyBfX1BSSVZBVEVfZnJvbVZlcnNpb24oci5yZWFkVGltZSkgOiBTbmFwc2hvdFZlcnNpb24ubWluKCksIG8gPSBNdXRhYmxlRG9jdW1lbnQubmV3Tm9Eb2N1bWVudChpLCBzKSwgXyA9IHIucmVtb3ZlZFRhcmdldElkcyB8fCBbXTtcbiAgICAgICAgbiA9IG5ldyBfX1BSSVZBVEVfRG9jdW1lbnRXYXRjaENoYW5nZShbXSwgXywgby5rZXksIG8pO1xuICAgIH0gZWxzZSBpZiAoXCJkb2N1bWVudFJlbW92ZVwiIGluIHQpIHtcbiAgICAgICAgdC5kb2N1bWVudFJlbW92ZTtcbiAgICAgICAgY29uc3QgciA9IHQuZG9jdW1lbnRSZW1vdmU7XG4gICAgICAgIHIuZG9jdW1lbnQ7XG4gICAgICAgIGNvbnN0IGkgPSBmcm9tTmFtZShlLCByLmRvY3VtZW50KSwgcyA9IHIucmVtb3ZlZFRhcmdldElkcyB8fCBbXTtcbiAgICAgICAgbiA9IG5ldyBfX1BSSVZBVEVfRG9jdW1lbnRXYXRjaENoYW5nZShbXSwgcywgaSwgbnVsbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCEoXCJmaWx0ZXJcIiBpbiB0KSkgcmV0dXJuIGZhaWwoKTtcbiAgICAgICAge1xuICAgICAgICAgICAgdC5maWx0ZXI7XG4gICAgICAgICAgICBjb25zdCBlID0gdC5maWx0ZXI7XG4gICAgICAgICAgICBlLnRhcmdldElkO1xuICAgICAgICAgICAgY29uc3Qge2NvdW50OiByID0gMCwgdW5jaGFuZ2VkTmFtZXM6IGl9ID0gZSwgcyA9IG5ldyBFeGlzdGVuY2VGaWx0ZXIociwgaSksIG8gPSBlLnRhcmdldElkO1xuICAgICAgICAgICAgbiA9IG5ldyBfX1BSSVZBVEVfRXhpc3RlbmNlRmlsdGVyQ2hhbmdlKG8sIHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuO1xufVxuXG5mdW5jdGlvbiB0b011dGF0aW9uKGUsIHQpIHtcbiAgICBsZXQgbjtcbiAgICBpZiAodCBpbnN0YW5jZW9mIF9fUFJJVkFURV9TZXRNdXRhdGlvbikgbiA9IHtcbiAgICAgICAgdXBkYXRlOiBfX1BSSVZBVEVfdG9NdXRhdGlvbkRvY3VtZW50KGUsIHQua2V5LCB0LnZhbHVlKVxuICAgIH07IGVsc2UgaWYgKHQgaW5zdGFuY2VvZiBfX1BSSVZBVEVfRGVsZXRlTXV0YXRpb24pIG4gPSB7XG4gICAgICAgIGRlbGV0ZTogX19QUklWQVRFX3RvTmFtZShlLCB0LmtleSlcbiAgICB9OyBlbHNlIGlmICh0IGluc3RhbmNlb2YgX19QUklWQVRFX1BhdGNoTXV0YXRpb24pIG4gPSB7XG4gICAgICAgIHVwZGF0ZTogX19QUklWQVRFX3RvTXV0YXRpb25Eb2N1bWVudChlLCB0LmtleSwgdC5kYXRhKSxcbiAgICAgICAgdXBkYXRlTWFzazogX19QUklWQVRFX3RvRG9jdW1lbnRNYXNrKHQuZmllbGRNYXNrKVxuICAgIH07IGVsc2Uge1xuICAgICAgICBpZiAoISh0IGluc3RhbmNlb2YgX19QUklWQVRFX1ZlcmlmeU11dGF0aW9uKSkgcmV0dXJuIGZhaWwoKTtcbiAgICAgICAgbiA9IHtcbiAgICAgICAgICAgIHZlcmlmeTogX19QUklWQVRFX3RvTmFtZShlLCB0LmtleSlcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHQuZmllbGRUcmFuc2Zvcm1zLmxlbmd0aCA+IDAgJiYgKG4udXBkYXRlVHJhbnNmb3JtcyA9IHQuZmllbGRUcmFuc2Zvcm1zLm1hcCgoZSA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfdG9GaWVsZFRyYW5zZm9ybShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0LnRyYW5zZm9ybTtcbiAgICAgICAgaWYgKG4gaW5zdGFuY2VvZiBfX1BSSVZBVEVfU2VydmVyVGltZXN0YW1wVHJhbnNmb3JtKSByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRQYXRoOiB0LmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxuICAgICAgICAgICAgc2V0VG9TZXJ2ZXJWYWx1ZTogXCJSRVFVRVNUX1RJTUVcIlxuICAgICAgICB9O1xuICAgICAgICBpZiAobiBpbnN0YW5jZW9mIF9fUFJJVkFURV9BcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uKSByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRQYXRoOiB0LmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxuICAgICAgICAgICAgYXBwZW5kTWlzc2luZ0VsZW1lbnRzOiB7XG4gICAgICAgICAgICAgICAgdmFsdWVzOiBuLmVsZW1lbnRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmIChuIGluc3RhbmNlb2YgX19QUklWQVRFX0FycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uKSByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRQYXRoOiB0LmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxuICAgICAgICAgICAgcmVtb3ZlQWxsRnJvbUFycmF5OiB7XG4gICAgICAgICAgICAgICAgdmFsdWVzOiBuLmVsZW1lbnRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmIChuIGluc3RhbmNlb2YgX19QUklWQVRFX051bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24pIHJldHVybiB7XG4gICAgICAgICAgICBmaWVsZFBhdGg6IHQuZmllbGQuY2Fub25pY2FsU3RyaW5nKCksXG4gICAgICAgICAgICBpbmNyZW1lbnQ6IG4uUGVcbiAgICAgICAgfTtcbiAgICAgICAgdGhyb3cgZmFpbCgpO1xuICAgIH0oMCwgZSkpKSksIHQucHJlY29uZGl0aW9uLmlzTm9uZSB8fCAobi5jdXJyZW50RG9jdW1lbnQgPSBmdW5jdGlvbiBfX1BSSVZBVEVfdG9QcmVjb25kaXRpb24oZSwgdCkge1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSB0LnVwZGF0ZVRpbWUgPyB7XG4gICAgICAgICAgICB1cGRhdGVUaW1lOiBfX1BSSVZBVEVfdG9WZXJzaW9uKGUsIHQudXBkYXRlVGltZSlcbiAgICAgICAgfSA6IHZvaWQgMCAhPT0gdC5leGlzdHMgPyB7XG4gICAgICAgICAgICBleGlzdHM6IHQuZXhpc3RzXG4gICAgICAgIH0gOiBmYWlsKCk7XG4gICAgfShlLCB0LnByZWNvbmRpdGlvbikpLCBuO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZnJvbU11dGF0aW9uKGUsIHQpIHtcbiAgICBjb25zdCBuID0gdC5jdXJyZW50RG9jdW1lbnQgPyBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbVByZWNvbmRpdGlvbihlKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IGUudXBkYXRlVGltZSA/IFByZWNvbmRpdGlvbi51cGRhdGVUaW1lKF9fUFJJVkFURV9mcm9tVmVyc2lvbihlLnVwZGF0ZVRpbWUpKSA6IHZvaWQgMCAhPT0gZS5leGlzdHMgPyBQcmVjb25kaXRpb24uZXhpc3RzKGUuZXhpc3RzKSA6IFByZWNvbmRpdGlvbi5ub25lKCk7XG4gICAgfSh0LmN1cnJlbnREb2N1bWVudCkgOiBQcmVjb25kaXRpb24ubm9uZSgpLCByID0gdC51cGRhdGVUcmFuc2Zvcm1zID8gdC51cGRhdGVUcmFuc2Zvcm1zLm1hcCgodCA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUZpZWxkVHJhbnNmb3JtKGUsIHQpIHtcbiAgICAgICAgbGV0IG4gPSBudWxsO1xuICAgICAgICBpZiAoXCJzZXRUb1NlcnZlclZhbHVlXCIgaW4gdCkgX19QUklWQVRFX2hhcmRBc3NlcnQoXCJSRVFVRVNUX1RJTUVcIiA9PT0gdC5zZXRUb1NlcnZlclZhbHVlKSwgXG4gICAgICAgIG4gPSBuZXcgX19QUklWQVRFX1NlcnZlclRpbWVzdGFtcFRyYW5zZm9ybTsgZWxzZSBpZiAoXCJhcHBlbmRNaXNzaW5nRWxlbWVudHNcIiBpbiB0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdC5hcHBlbmRNaXNzaW5nRWxlbWVudHMudmFsdWVzIHx8IFtdO1xuICAgICAgICAgICAgbiA9IG5ldyBfX1BSSVZBVEVfQXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbihlKTtcbiAgICAgICAgfSBlbHNlIGlmIChcInJlbW92ZUFsbEZyb21BcnJheVwiIGluIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LnJlbW92ZUFsbEZyb21BcnJheS52YWx1ZXMgfHwgW107XG4gICAgICAgICAgICBuID0gbmV3IF9fUFJJVkFURV9BcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbihlKTtcbiAgICAgICAgfSBlbHNlIFwiaW5jcmVtZW50XCIgaW4gdCA/IG4gPSBuZXcgX19QUklWQVRFX051bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24oZSwgdC5pbmNyZW1lbnQpIDogZmFpbCgpO1xuICAgICAgICBjb25zdCByID0gRmllbGRQYXRoJDEuZnJvbVNlcnZlckZvcm1hdCh0LmZpZWxkUGF0aCk7XG4gICAgICAgIHJldHVybiBuZXcgRmllbGRUcmFuc2Zvcm0ociwgbik7XG4gICAgfShlLCB0KSkpIDogW107XG4gICAgaWYgKHQudXBkYXRlKSB7XG4gICAgICAgIHQudXBkYXRlLm5hbWU7XG4gICAgICAgIGNvbnN0IGkgPSBmcm9tTmFtZShlLCB0LnVwZGF0ZS5uYW1lKSwgcyA9IG5ldyBPYmplY3RWYWx1ZSh7XG4gICAgICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgICAgIGZpZWxkczogdC51cGRhdGUuZmllbGRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodC51cGRhdGVNYXNrKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gZnVuY3Rpb24gX19QUklWQVRFX2Zyb21Eb2N1bWVudE1hc2soZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlLmZpZWxkUGF0aHMgfHwgW107XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGaWVsZE1hc2sodC5tYXAoKGUgPT4gRmllbGRQYXRoJDEuZnJvbVNlcnZlckZvcm1hdChlKSkpKTtcbiAgICAgICAgICAgIH0odC51cGRhdGVNYXNrKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1BhdGNoTXV0YXRpb24oaSwgcywgZSwgbiwgcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfU2V0TXV0YXRpb24oaSwgcywgbiwgcik7XG4gICAgfVxuICAgIGlmICh0LmRlbGV0ZSkge1xuICAgICAgICBjb25zdCByID0gZnJvbU5hbWUoZSwgdC5kZWxldGUpO1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9EZWxldGVNdXRhdGlvbihyLCBuKTtcbiAgICB9XG4gICAgaWYgKHQudmVyaWZ5KSB7XG4gICAgICAgIGNvbnN0IHIgPSBmcm9tTmFtZShlLCB0LnZlcmlmeSk7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1ZlcmlmeU11dGF0aW9uKHIsIG4pO1xuICAgIH1cbiAgICByZXR1cm4gZmFpbCgpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZnJvbVdyaXRlUmVzdWx0cyhlLCB0KSB7XG4gICAgcmV0dXJuIGUgJiYgZS5sZW5ndGggPiAwID8gKF9fUFJJVkFURV9oYXJkQXNzZXJ0KHZvaWQgMCAhPT0gdCksIGUubWFwKChlID0+IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tV3JpdGVSZXN1bHQoZSwgdCkge1xuICAgICAgICAvLyBOT1RFOiBEZWxldGVzIGRvbid0IGhhdmUgYW4gdXBkYXRlVGltZS5cbiAgICAgICAgbGV0IG4gPSBlLnVwZGF0ZVRpbWUgPyBfX1BSSVZBVEVfZnJvbVZlcnNpb24oZS51cGRhdGVUaW1lKSA6IF9fUFJJVkFURV9mcm9tVmVyc2lvbih0KTtcbiAgICAgICAgcmV0dXJuIG4uaXNFcXVhbChTbmFwc2hvdFZlcnNpb24ubWluKCkpICYmIChcbiAgICAgICAgLy8gVGhlIEZpcmVzdG9yZSBFbXVsYXRvciBjdXJyZW50bHkgcmV0dXJucyBhbiB1cGRhdGUgdGltZSBvZiAwIGZvclxuICAgICAgICAvLyBkZWxldGVzIG9mIG5vbi1leGlzdGluZyBkb2N1bWVudHMgKHJhdGhlciB0aGFuIG51bGwpLiBUaGlzIGJyZWFrcyB0aGVcbiAgICAgICAgLy8gdGVzdCBcImdldCBkZWxldGVkIGRvYyB3aGlsZSBvZmZsaW5lIHdpdGggc291cmNlPWNhY2hlXCIgYXMgTm9Eb2N1bWVudHNcbiAgICAgICAgLy8gd2l0aCB2ZXJzaW9uIDAgYXJlIGZpbHRlcmVkIGJ5IEluZGV4ZWREYidzIFJlbW90ZURvY3VtZW50Q2FjaGUuXG4gICAgICAgIC8vIFRPRE8oIzIxNDkpOiBSZW1vdmUgdGhpcyB3aGVuIEVtdWxhdG9yIGlzIGZpeGVkXG4gICAgICAgIG4gPSBfX1BSSVZBVEVfZnJvbVZlcnNpb24odCkpLCBuZXcgTXV0YXRpb25SZXN1bHQobiwgZS50cmFuc2Zvcm1SZXN1bHRzIHx8IFtdKTtcbiAgICB9KGUsIHQpKSkpIDogW107XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV90b0RvY3VtZW50c1RhcmdldChlLCB0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZG9jdW1lbnRzOiBbIF9fUFJJVkFURV90b1F1ZXJ5UGF0aChlLCB0LnBhdGgpIF1cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9RdWVyeVRhcmdldChlLCB0KSB7XG4gICAgLy8gRGlzc2VjdCB0aGUgcGF0aCBpbnRvIHBhcmVudCwgY29sbGVjdGlvbklkLCBhbmQgb3B0aW9uYWwga2V5IGZpbHRlci5cbiAgICBjb25zdCBuID0ge1xuICAgICAgICBzdHJ1Y3R1cmVkUXVlcnk6IHt9XG4gICAgfSwgciA9IHQucGF0aDtcbiAgICBsZXQgaTtcbiAgICBudWxsICE9PSB0LmNvbGxlY3Rpb25Hcm91cCA/IChpID0gciwgbi5zdHJ1Y3R1cmVkUXVlcnkuZnJvbSA9IFsge1xuICAgICAgICBjb2xsZWN0aW9uSWQ6IHQuY29sbGVjdGlvbkdyb3VwLFxuICAgICAgICBhbGxEZXNjZW5kYW50czogITBcbiAgICB9IF0pIDogKGkgPSByLnBvcExhc3QoKSwgbi5zdHJ1Y3R1cmVkUXVlcnkuZnJvbSA9IFsge1xuICAgICAgICBjb2xsZWN0aW9uSWQ6IHIubGFzdFNlZ21lbnQoKVxuICAgIH0gXSksIG4ucGFyZW50ID0gX19QUklWQVRFX3RvUXVlcnlQYXRoKGUsIGkpO1xuICAgIGNvbnN0IHMgPSBmdW5jdGlvbiBfX1BSSVZBVEVfdG9GaWx0ZXJzKGUpIHtcbiAgICAgICAgaWYgKDAgPT09IGUubGVuZ3RoKSByZXR1cm47XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfdG9GaWx0ZXIoQ29tcG9zaXRlRmlsdGVyLmNyZWF0ZShlLCBcImFuZFwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLkFORCAqLykpO1xuICAgIH0odC5maWx0ZXJzKTtcbiAgICBzICYmIChuLnN0cnVjdHVyZWRRdWVyeS53aGVyZSA9IHMpO1xuICAgIGNvbnN0IG8gPSBmdW5jdGlvbiBfX1BSSVZBVEVfdG9PcmRlcihlKSB7XG4gICAgICAgIGlmICgwID09PSBlLmxlbmd0aCkgcmV0dXJuO1xuICAgICAgICByZXR1cm4gZS5tYXAoKGUgPT4gXG4gICAgICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcbiAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX3RvUHJvcGVydHlPcmRlcihlKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGZpZWxkOiBfX1BSSVZBVEVfdG9GaWVsZFBhdGhSZWZlcmVuY2UoZS5maWVsZCksXG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uOiBfX1BSSVZBVEVfdG9EaXJlY3Rpb24oZS5kaXIpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KGUpKSk7XG4gICAgfSh0Lm9yZGVyQnkpO1xuICAgIG8gJiYgKG4uc3RydWN0dXJlZFF1ZXJ5Lm9yZGVyQnkgPSBvKTtcbiAgICBjb25zdCBfID0gX19QUklWQVRFX3RvSW50MzJQcm90byhlLCB0LmxpbWl0KTtcbiAgICByZXR1cm4gbnVsbCAhPT0gXyAmJiAobi5zdHJ1Y3R1cmVkUXVlcnkubGltaXQgPSBfKSwgdC5zdGFydEF0ICYmIChuLnN0cnVjdHVyZWRRdWVyeS5zdGFydEF0ID0gZnVuY3Rpb24gX19QUklWQVRFX3RvU3RhcnRBdEN1cnNvcihlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBiZWZvcmU6IGUuaW5jbHVzaXZlLFxuICAgICAgICAgICAgdmFsdWVzOiBlLnBvc2l0aW9uXG4gICAgICAgIH07XG4gICAgfSh0LnN0YXJ0QXQpKSwgdC5lbmRBdCAmJiAobi5zdHJ1Y3R1cmVkUXVlcnkuZW5kQXQgPSBmdW5jdGlvbiBfX1BSSVZBVEVfdG9FbmRBdEN1cnNvcihlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBiZWZvcmU6ICFlLmluY2x1c2l2ZSxcbiAgICAgICAgICAgIHZhbHVlczogZS5wb3NpdGlvblxuICAgICAgICB9O1xuICAgIH0odC5lbmRBdCkpLCB7XG4gICAgICAgIF90OiBuLFxuICAgICAgICBwYXJlbnQ6IGlcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9SdW5BZ2dyZWdhdGlvblF1ZXJ5UmVxdWVzdChlLCB0LCBuLCByKSB7XG4gICAgY29uc3Qge190OiBpLCBwYXJlbnQ6IHN9ID0gX19QUklWQVRFX3RvUXVlcnlUYXJnZXQoZSwgdCksIG8gPSB7fSwgXyA9IFtdO1xuICAgIGxldCBhID0gMDtcbiAgICByZXR1cm4gbi5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgLy8gTWFwIGFsbCBjbGllbnQtc2lkZSBhbGlhc2VzIHRvIGEgdW5pcXVlIHNob3J0LWZvcm1cbiAgICAgICAgLy8gYWxpYXMuIFRoaXMgYXZvaWRzIGlzc3VlcyB3aXRoIGNsaWVudC1zaWRlIGFsaWFzZXMgdGhhdFxuICAgICAgICAvLyBleGNlZWQgdGhlIDE1MDAtYnl0ZSBzdHJpbmcgc2l6ZSBsaW1pdC5cbiAgICAgICAgY29uc3QgdCA9IHIgPyBlLmFsaWFzIDogXCJhZ2dyZWdhdGVfXCIgKyBhKys7XG4gICAgICAgIG9bdF0gPSBlLmFsaWFzLCBcImNvdW50XCIgPT09IGUuYWdncmVnYXRlVHlwZSA/IF8ucHVzaCh7XG4gICAgICAgICAgICBhbGlhczogdCxcbiAgICAgICAgICAgIGNvdW50OiB7fVxuICAgICAgICB9KSA6IFwiYXZnXCIgPT09IGUuYWdncmVnYXRlVHlwZSA/IF8ucHVzaCh7XG4gICAgICAgICAgICBhbGlhczogdCxcbiAgICAgICAgICAgIGF2Zzoge1xuICAgICAgICAgICAgICAgIGZpZWxkOiBfX1BSSVZBVEVfdG9GaWVsZFBhdGhSZWZlcmVuY2UoZS5maWVsZFBhdGgpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pIDogXCJzdW1cIiA9PT0gZS5hZ2dyZWdhdGVUeXBlICYmIF8ucHVzaCh7XG4gICAgICAgICAgICBhbGlhczogdCxcbiAgICAgICAgICAgIHN1bToge1xuICAgICAgICAgICAgICAgIGZpZWxkOiBfX1BSSVZBVEVfdG9GaWVsZFBhdGhSZWZlcmVuY2UoZS5maWVsZFBhdGgpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pKSwge1xuICAgICAgICByZXF1ZXN0OiB7XG4gICAgICAgICAgICBzdHJ1Y3R1cmVkQWdncmVnYXRpb25RdWVyeToge1xuICAgICAgICAgICAgICAgIGFnZ3JlZ2F0aW9uczogXyxcbiAgICAgICAgICAgICAgICBzdHJ1Y3R1cmVkUXVlcnk6IGkuc3RydWN0dXJlZFF1ZXJ5XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGFyZW50OiBpLnBhcmVudFxuICAgICAgICB9LFxuICAgICAgICB1dDogbyxcbiAgICAgICAgcGFyZW50OiBzXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2NvbnZlcnRRdWVyeVRhcmdldFRvUXVlcnkoZSkge1xuICAgIGxldCB0ID0gX19QUklWQVRFX2Zyb21RdWVyeVBhdGgoZS5wYXJlbnQpO1xuICAgIGNvbnN0IG4gPSBlLnN0cnVjdHVyZWRRdWVyeSwgciA9IG4uZnJvbSA/IG4uZnJvbS5sZW5ndGggOiAwO1xuICAgIGxldCBpID0gbnVsbDtcbiAgICBpZiAociA+IDApIHtcbiAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoMSA9PT0gcik7XG4gICAgICAgIGNvbnN0IGUgPSBuLmZyb21bMF07XG4gICAgICAgIGUuYWxsRGVzY2VuZGFudHMgPyBpID0gZS5jb2xsZWN0aW9uSWQgOiB0ID0gdC5jaGlsZChlLmNvbGxlY3Rpb25JZCk7XG4gICAgfVxuICAgIGxldCBzID0gW107XG4gICAgbi53aGVyZSAmJiAocyA9IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tRmlsdGVycyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZnJvbUZpbHRlcihlKTtcbiAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBDb21wb3NpdGVGaWx0ZXIgJiYgX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzRmxhdENvbmp1bmN0aW9uKHQpKSByZXR1cm4gdC5nZXRGaWx0ZXJzKCk7XG4gICAgICAgIHJldHVybiBbIHQgXTtcbiAgICB9KG4ud2hlcmUpKTtcbiAgICBsZXQgbyA9IFtdO1xuICAgIG4ub3JkZXJCeSAmJiAobyA9IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tT3JkZXIoZSkge1xuICAgICAgICByZXR1cm4gZS5tYXAoKGUgPT4gZnVuY3Rpb24gX19QUklWQVRFX2Zyb21Qcm9wZXJ0eU9yZGVyKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgT3JkZXJCeShfX1BSSVZBVEVfZnJvbUZpZWxkUGF0aFJlZmVyZW5jZShlLmZpZWxkKSwgXG4gICAgICAgICAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbURpcmVjdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICBjYXNlIFwiQVNDRU5ESU5HXCI6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImFzY1wiIC8qIERpcmVjdGlvbi5BU0NFTkRJTkcgKi87XG5cbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJERVNDRU5ESU5HXCI6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImRlc2NcIiAvKiBEaXJlY3Rpb24uREVTQ0VORElORyAqLztcblxuICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcbiAgICAgICAgICAgIChlLmRpcmVjdGlvbikpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcbiAgICAgICAgKGUpKSk7XG4gICAgfShuLm9yZGVyQnkpKTtcbiAgICBsZXQgXyA9IG51bGw7XG4gICAgbi5saW1pdCAmJiAoXyA9IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tSW50MzJQcm90byhlKSB7XG4gICAgICAgIGxldCB0O1xuICAgICAgICByZXR1cm4gdCA9IFwib2JqZWN0XCIgPT0gdHlwZW9mIGUgPyBlLnZhbHVlIDogZSwgX19QUklWQVRFX2lzTnVsbE9yVW5kZWZpbmVkKHQpID8gbnVsbCA6IHQ7XG4gICAgfShuLmxpbWl0KSk7XG4gICAgbGV0IGEgPSBudWxsO1xuICAgIG4uc3RhcnRBdCAmJiAoYSA9IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tU3RhcnRBdEN1cnNvcihlKSB7XG4gICAgICAgIGNvbnN0IHQgPSAhIWUuYmVmb3JlLCBuID0gZS52YWx1ZXMgfHwgW107XG4gICAgICAgIHJldHVybiBuZXcgQm91bmQobiwgdCk7XG4gICAgfShuLnN0YXJ0QXQpKTtcbiAgICBsZXQgdSA9IG51bGw7XG4gICAgcmV0dXJuIG4uZW5kQXQgJiYgKHUgPSBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUVuZEF0Q3Vyc29yKGUpIHtcbiAgICAgICAgY29uc3QgdCA9ICFlLmJlZm9yZSwgbiA9IGUudmFsdWVzIHx8IFtdO1xuICAgICAgICByZXR1cm4gbmV3IEJvdW5kKG4sIHQpO1xuICAgIH1cbiAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgKG4uZW5kQXQpKSwgX19QUklWQVRFX25ld1F1ZXJ5KHQsIGksIG8sIHMsIF8sIFwiRlwiIC8qIExpbWl0VHlwZS5GaXJzdCAqLyAsIGEsIHUpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9MaXN0ZW5SZXF1ZXN0TGFiZWxzKGUsIHQpIHtcbiAgICBjb25zdCBuID0gZnVuY3Rpb24gX19QUklWQVRFX3RvTGFiZWwoZSkge1xuICAgICAgICBzd2l0Y2ggKGUpIHtcbiAgICAgICAgICBjYXNlIFwiVGFyZ2V0UHVycG9zZUxpc3RlblwiIC8qIFRhcmdldFB1cnBvc2UuTGlzdGVuICovIDpcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuXG4gICAgICAgICAgY2FzZSBcIlRhcmdldFB1cnBvc2VFeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaFwiIC8qIFRhcmdldFB1cnBvc2UuRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2ggKi8gOlxuICAgICAgICAgICAgcmV0dXJuIFwiZXhpc3RlbmNlLWZpbHRlci1taXNtYXRjaFwiO1xuXG4gICAgICAgICAgY2FzZSBcIlRhcmdldFB1cnBvc2VFeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaEJsb29tXCIgLyogVGFyZ2V0UHVycG9zZS5FeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaEJsb29tICovIDpcbiAgICAgICAgICAgIHJldHVybiBcImV4aXN0ZW5jZS1maWx0ZXItbWlzbWF0Y2gtYmxvb21cIjtcblxuICAgICAgICAgIGNhc2UgXCJUYXJnZXRQdXJwb3NlTGltYm9SZXNvbHV0aW9uXCIgLyogVGFyZ2V0UHVycG9zZS5MaW1ib1Jlc29sdXRpb24gKi8gOlxuICAgICAgICAgICAgcmV0dXJuIFwibGltYm8tZG9jdW1lbnRcIjtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gZmFpbCgpO1xuICAgICAgICB9XG4gICAgfSh0LnB1cnBvc2UpO1xuICAgIHJldHVybiBudWxsID09IG4gPyBudWxsIDoge1xuICAgICAgICBcImdvb2ctbGlzdGVuLXRhZ3NcIjogblxuICAgIH07XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tRmlsdGVyKGUpIHtcbiAgICByZXR1cm4gdm9pZCAwICE9PSBlLnVuYXJ5RmlsdGVyID8gZnVuY3Rpb24gX19QUklWQVRFX2Zyb21VbmFyeUZpbHRlcihlKSB7XG4gICAgICAgIHN3aXRjaCAoZS51bmFyeUZpbHRlci5vcCkge1xuICAgICAgICAgIGNhc2UgXCJJU19OQU5cIjpcbiAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZnJvbUZpZWxkUGF0aFJlZmVyZW5jZShlLnVuYXJ5RmlsdGVyLmZpZWxkKTtcbiAgICAgICAgICAgIHJldHVybiBGaWVsZEZpbHRlci5jcmVhdGUodCwgXCI9PVwiIC8qIE9wZXJhdG9yLkVRVUFMICovICwge1xuICAgICAgICAgICAgICAgIGRvdWJsZVZhbHVlOiBOYU5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY2FzZSBcIklTX05VTExcIjpcbiAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZnJvbUZpZWxkUGF0aFJlZmVyZW5jZShlLnVuYXJ5RmlsdGVyLmZpZWxkKTtcbiAgICAgICAgICAgIHJldHVybiBGaWVsZEZpbHRlci5jcmVhdGUobiwgXCI9PVwiIC8qIE9wZXJhdG9yLkVRVUFMICovICwge1xuICAgICAgICAgICAgICAgIG51bGxWYWx1ZTogXCJOVUxMX1ZBTFVFXCJcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY2FzZSBcIklTX05PVF9OQU5cIjpcbiAgICAgICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZnJvbUZpZWxkUGF0aFJlZmVyZW5jZShlLnVuYXJ5RmlsdGVyLmZpZWxkKTtcbiAgICAgICAgICAgIHJldHVybiBGaWVsZEZpbHRlci5jcmVhdGUociwgXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLyAsIHtcbiAgICAgICAgICAgICAgICBkb3VibGVWYWx1ZTogTmFOXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgIGNhc2UgXCJJU19OT1RfTlVMTFwiOlxuICAgICAgICAgICAgY29uc3QgaSA9IF9fUFJJVkFURV9mcm9tRmllbGRQYXRoUmVmZXJlbmNlKGUudW5hcnlGaWx0ZXIuZmllbGQpO1xuICAgICAgICAgICAgcmV0dXJuIEZpZWxkRmlsdGVyLmNyZWF0ZShpLCBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovICwge1xuICAgICAgICAgICAgICAgIG51bGxWYWx1ZTogXCJOVUxMX1ZBTFVFXCJcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBmYWlsKCk7XG4gICAgICAgIH1cbiAgICB9KGUpIDogdm9pZCAwICE9PSBlLmZpZWxkRmlsdGVyID8gZnVuY3Rpb24gX19QUklWQVRFX2Zyb21GaWVsZEZpbHRlcihlKSB7XG4gICAgICAgIHJldHVybiBGaWVsZEZpbHRlci5jcmVhdGUoX19QUklWQVRFX2Zyb21GaWVsZFBhdGhSZWZlcmVuY2UoZS5maWVsZEZpbHRlci5maWVsZCksIGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tT3BlcmF0b3JOYW1lKGUpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoZSkge1xuICAgICAgICAgICAgICBjYXNlIFwiRVFVQUxcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCI9PVwiIC8qIE9wZXJhdG9yLkVRVUFMICovO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJOT1RfRVFVQUxcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiR1JFQVRFUl9USEFOXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiPlwiIC8qIE9wZXJhdG9yLkdSRUFURVJfVEhBTiAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiR1JFQVRFUl9USEFOX09SX0VRVUFMXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiPj1cIiAvKiBPcGVyYXRvci5HUkVBVEVSX1RIQU5fT1JfRVFVQUwgKi87XG5cbiAgICAgICAgICAgICAgY2FzZSBcIkxFU1NfVEhBTlwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcIjxcIiAvKiBPcGVyYXRvci5MRVNTX1RIQU4gKi87XG5cbiAgICAgICAgICAgICAgY2FzZSBcIkxFU1NfVEhBTl9PUl9FUVVBTFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcIjw9XCIgLyogT3BlcmF0b3IuTEVTU19USEFOX09SX0VRVUFMICovO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJBUlJBWV9DT05UQUlOU1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImFycmF5LWNvbnRhaW5zXCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlMgKi87XG5cbiAgICAgICAgICAgICAgY2FzZSBcIklOXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiTk9UX0lOXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJBUlJBWV9DT05UQUlOU19BTllcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkgKi87XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KGUuZmllbGRGaWx0ZXIub3ApLCBlLmZpZWxkRmlsdGVyLnZhbHVlKTtcbiAgICB9KGUpIDogdm9pZCAwICE9PSBlLmNvbXBvc2l0ZUZpbHRlciA/IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tQ29tcG9zaXRlRmlsdGVyKGUpIHtcbiAgICAgICAgcmV0dXJuIENvbXBvc2l0ZUZpbHRlci5jcmVhdGUoZS5jb21wb3NpdGVGaWx0ZXIuZmlsdGVycy5tYXAoKGUgPT4gX19QUklWQVRFX2Zyb21GaWx0ZXIoZSkpKSwgZnVuY3Rpb24gX19QUklWQVRFX2Zyb21Db21wb3NpdGVPcGVyYXRvck5hbWUoZSkge1xuICAgICAgICAgICAgc3dpdGNoIChlKSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJBTkRcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJhbmRcIiAvKiBDb21wb3NpdGVPcGVyYXRvci5BTkQgKi87XG5cbiAgICAgICAgICAgICAgY2FzZSBcIk9SXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwib3JcIiAvKiBDb21wb3NpdGVPcGVyYXRvci5PUiAqLztcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0oZS5jb21wb3NpdGVGaWx0ZXIub3ApKTtcbiAgICB9KGUpIDogZmFpbCgpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9EaXJlY3Rpb24oZSkge1xuICAgIHJldHVybiBJZVtlXTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3RvT3BlcmF0b3JOYW1lKGUpIHtcbiAgICByZXR1cm4gVGVbZV07XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV90b0NvbXBvc2l0ZU9wZXJhdG9yTmFtZShlKSB7XG4gICAgcmV0dXJuIEVlW2VdO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9GaWVsZFBhdGhSZWZlcmVuY2UoZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGZpZWxkUGF0aDogZS5jYW5vbmljYWxTdHJpbmcoKVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tRmllbGRQYXRoUmVmZXJlbmNlKGUpIHtcbiAgICByZXR1cm4gRmllbGRQYXRoJDEuZnJvbVNlcnZlckZvcm1hdChlLmZpZWxkUGF0aCk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV90b0ZpbHRlcihlKSB7XG4gICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBGaWVsZEZpbHRlciA/IGZ1bmN0aW9uIF9fUFJJVkFURV90b1VuYXJ5T3JGaWVsZEZpbHRlcihlKSB7XG4gICAgICAgIGlmIChcIj09XCIgLyogT3BlcmF0b3IuRVFVQUwgKi8gPT09IGUub3ApIHtcbiAgICAgICAgICAgIGlmIChfX1BSSVZBVEVfaXNOYW5WYWx1ZShlLnZhbHVlKSkgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1bmFyeUZpbHRlcjoge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZDogX19QUklWQVRFX3RvRmllbGRQYXRoUmVmZXJlbmNlKGUuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICBvcDogXCJJU19OQU5cIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoX19QUklWQVRFX2lzTnVsbFZhbHVlKGUudmFsdWUpKSByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVuYXJ5RmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkOiBfX1BSSVZBVEVfdG9GaWVsZFBhdGhSZWZlcmVuY2UoZS5maWVsZCksXG4gICAgICAgICAgICAgICAgICAgIG9wOiBcIklTX05VTExcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSBpZiAoXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLyA9PT0gZS5vcCkge1xuICAgICAgICAgICAgaWYgKF9fUFJJVkFURV9pc05hblZhbHVlKGUudmFsdWUpKSByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVuYXJ5RmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkOiBfX1BSSVZBVEVfdG9GaWVsZFBhdGhSZWZlcmVuY2UoZS5maWVsZCksXG4gICAgICAgICAgICAgICAgICAgIG9wOiBcIklTX05PVF9OQU5cIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoX19QUklWQVRFX2lzTnVsbFZhbHVlKGUudmFsdWUpKSByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVuYXJ5RmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkOiBfX1BSSVZBVEVfdG9GaWVsZFBhdGhSZWZlcmVuY2UoZS5maWVsZCksXG4gICAgICAgICAgICAgICAgICAgIG9wOiBcIklTX05PVF9OVUxMXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmaWVsZEZpbHRlcjoge1xuICAgICAgICAgICAgICAgIGZpZWxkOiBfX1BSSVZBVEVfdG9GaWVsZFBhdGhSZWZlcmVuY2UoZS5maWVsZCksXG4gICAgICAgICAgICAgICAgb3A6IF9fUFJJVkFURV90b09wZXJhdG9yTmFtZShlLm9wKSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogZS52YWx1ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0oZSkgOiBlIGluc3RhbmNlb2YgQ29tcG9zaXRlRmlsdGVyID8gZnVuY3Rpb24gX19QUklWQVRFX3RvQ29tcG9zaXRlRmlsdGVyKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUuZ2V0RmlsdGVycygpLm1hcCgoZSA9PiBfX1BSSVZBVEVfdG9GaWx0ZXIoZSkpKTtcbiAgICAgICAgaWYgKDEgPT09IHQubGVuZ3RoKSByZXR1cm4gdFswXTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNvbXBvc2l0ZUZpbHRlcjoge1xuICAgICAgICAgICAgICAgIG9wOiBfX1BSSVZBVEVfdG9Db21wb3NpdGVPcGVyYXRvck5hbWUoZS5vcCksXG4gICAgICAgICAgICAgICAgZmlsdGVyczogdFxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0oZSkgOiBmYWlsKCk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV90b0RvY3VtZW50TWFzayhlKSB7XG4gICAgY29uc3QgdCA9IFtdO1xuICAgIHJldHVybiBlLmZpZWxkcy5mb3JFYWNoKChlID0+IHQucHVzaChlLmNhbm9uaWNhbFN0cmluZygpKSkpLCB7XG4gICAgICAgIGZpZWxkUGF0aHM6IHRcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfaXNWYWxpZFJlc291cmNlTmFtZShlKSB7XG4gICAgLy8gUmVzb3VyY2UgbmFtZXMgaGF2ZSBhdCBsZWFzdCA0IGNvbXBvbmVudHMgKHByb2plY3QgSUQsIGRhdGFiYXNlIElEKVxuICAgIHJldHVybiBlLmxlbmd0aCA+PSA0ICYmIFwicHJvamVjdHNcIiA9PT0gZS5nZXQoMCkgJiYgXCJkYXRhYmFzZXNcIiA9PT0gZS5nZXQoMik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGltbXV0YWJsZSBzZXQgb2YgbWV0YWRhdGEgdGhhdCB0aGUgbG9jYWwgc3RvcmUgdHJhY2tzIGZvciBlYWNoIHRhcmdldC5cbiAqLyBjbGFzcyBUYXJnZXREYXRhIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIHRhcmdldCBiZWluZyBsaXN0ZW5lZCB0by4gKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBUaGUgdGFyZ2V0IElEIHRvIHdoaWNoIHRoZSB0YXJnZXQgY29ycmVzcG9uZHM7IEFzc2lnbmVkIGJ5IHRoZVxuICAgICAqIExvY2FsU3RvcmUgZm9yIHVzZXIgbGlzdGVucyBhbmQgYnkgdGhlIFN5bmNFbmdpbmUgZm9yIGxpbWJvIHdhdGNoZXMuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqIFRoZSBwdXJwb3NlIG9mIHRoZSB0YXJnZXQuICovXG4gICAgbiwgXG4gICAgLyoqXG4gICAgICogVGhlIHNlcXVlbmNlIG51bWJlciBvZiB0aGUgbGFzdCB0cmFuc2FjdGlvbiBkdXJpbmcgd2hpY2ggdGhpcyB0YXJnZXQgZGF0YVxuICAgICAqIHdhcyBtb2RpZmllZC5cbiAgICAgKi9cbiAgICByLCBcbiAgICAvKiogVGhlIGxhdGVzdCBzbmFwc2hvdCB2ZXJzaW9uIHNlZW4gZm9yIHRoaXMgdGFyZ2V0LiAqL1xuICAgIGkgPSBTbmFwc2hvdFZlcnNpb24ubWluKClcbiAgICAvKipcbiAgICAgKiBUaGUgbWF4aW11bSBzbmFwc2hvdCB2ZXJzaW9uIGF0IHdoaWNoIHRoZSBhc3NvY2lhdGVkIHZpZXdcbiAgICAgKiBjb250YWluZWQgbm8gbGltYm8gZG9jdW1lbnRzLlxuICAgICAqLyAsIHMgPSBTbmFwc2hvdFZlcnNpb24ubWluKClcbiAgICAvKipcbiAgICAgKiBBbiBvcGFxdWUsIHNlcnZlci1hc3NpZ25lZCB0b2tlbiB0aGF0IGFsbG93cyB3YXRjaGluZyBhIHRhcmdldCB0byBiZVxuICAgICAqIHJlc3VtZWQgYWZ0ZXIgZGlzY29ubmVjdGluZyB3aXRob3V0IHJldHJhbnNtaXR0aW5nIGFsbCB0aGUgZGF0YSB0aGF0XG4gICAgICogbWF0Y2hlcyB0aGUgdGFyZ2V0LiBUaGUgcmVzdW1lIHRva2VuIGVzc2VudGlhbGx5IGlkZW50aWZpZXMgYSBwb2ludCBpblxuICAgICAqIHRpbWUgZnJvbSB3aGljaCB0aGUgc2VydmVyIHNob3VsZCByZXN1bWUgc2VuZGluZyByZXN1bHRzLlxuICAgICAqLyAsIG8gPSBCeXRlU3RyaW5nLkVNUFRZX0JZVEVfU1RSSU5HXG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiBkb2N1bWVudHMgdGhhdCBsYXN0IG1hdGNoZWQgdGhlIHF1ZXJ5IGF0IHRoZSByZXN1bWUgdG9rZW4gb3JcbiAgICAgKiByZWFkIHRpbWUuIERvY3VtZW50cyBhcmUgY291bnRlZCBvbmx5IHdoZW4gbWFraW5nIGEgbGlzdGVuIHJlcXVlc3Qgd2l0aFxuICAgICAqIHJlc3VtZSB0b2tlbiBvciByZWFkIHRpbWUsIG90aGVyd2lzZSwga2VlcCBpdCBudWxsLlxuICAgICAqLyAsIF8gPSBudWxsKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gZSwgdGhpcy50YXJnZXRJZCA9IHQsIHRoaXMucHVycG9zZSA9IG4sIHRoaXMuc2VxdWVuY2VOdW1iZXIgPSByLCB0aGlzLnNuYXBzaG90VmVyc2lvbiA9IGksIFxuICAgICAgICB0aGlzLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gPSBzLCB0aGlzLnJlc3VtZVRva2VuID0gbywgdGhpcy5leHBlY3RlZENvdW50ID0gXztcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgdGFyZ2V0IGRhdGEgaW5zdGFuY2Ugd2l0aCBhbiB1cGRhdGVkIHNlcXVlbmNlIG51bWJlci4gKi8gICAgd2l0aFNlcXVlbmNlTnVtYmVyKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUYXJnZXREYXRhKHRoaXMudGFyZ2V0LCB0aGlzLnRhcmdldElkLCB0aGlzLnB1cnBvc2UsIGUsIHRoaXMuc25hcHNob3RWZXJzaW9uLCB0aGlzLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24sIHRoaXMucmVzdW1lVG9rZW4sIHRoaXMuZXhwZWN0ZWRDb3VudCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGFyZ2V0IGRhdGEgaW5zdGFuY2Ugd2l0aCBhbiB1cGRhdGVkIHJlc3VtZSB0b2tlbiBhbmRcbiAgICAgKiBzbmFwc2hvdCB2ZXJzaW9uLlxuICAgICAqLyAgICB3aXRoUmVzdW1lVG9rZW4oZSwgdCkge1xuICAgICAgICByZXR1cm4gbmV3IFRhcmdldERhdGEodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0SWQsIHRoaXMucHVycG9zZSwgdGhpcy5zZXF1ZW5jZU51bWJlciwgdCwgdGhpcy5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLCBlLCBcbiAgICAgICAgLyogZXhwZWN0ZWRDb3VudD0gKi8gbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGFyZ2V0IGRhdGEgaW5zdGFuY2Ugd2l0aCBhbiB1cGRhdGVkIGV4cGVjdGVkIGNvdW50LlxuICAgICAqLyAgICB3aXRoRXhwZWN0ZWRDb3VudChlKSB7XG4gICAgICAgIHJldHVybiBuZXcgVGFyZ2V0RGF0YSh0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRJZCwgdGhpcy5wdXJwb3NlLCB0aGlzLnNlcXVlbmNlTnVtYmVyLCB0aGlzLnNuYXBzaG90VmVyc2lvbiwgdGhpcy5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLCB0aGlzLnJlc3VtZVRva2VuLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0YXJnZXQgZGF0YSBpbnN0YW5jZSB3aXRoIGFuIHVwZGF0ZWQgbGFzdCBsaW1ibyBmcmVlXG4gICAgICogc25hcHNob3QgdmVyc2lvbiBudW1iZXIuXG4gICAgICovICAgIHdpdGhMYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUYXJnZXREYXRhKHRoaXMudGFyZ2V0LCB0aGlzLnRhcmdldElkLCB0aGlzLnB1cnBvc2UsIHRoaXMuc2VxdWVuY2VOdW1iZXIsIHRoaXMuc25hcHNob3RWZXJzaW9uLCBlLCB0aGlzLnJlc3VtZVRva2VuLCB0aGlzLmV4cGVjdGVkQ291bnQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBTZXJpYWxpemVyIGZvciB2YWx1ZXMgc3RvcmVkIGluIHRoZSBMb2NhbFN0b3JlLiAqLyBjbGFzcyBfX1BSSVZBVEVfTG9jYWxTZXJpYWxpemVyIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuY3QgPSBlO1xuICAgIH1cbn1cblxuLyoqIERlY29kZXMgYSByZW1vdGUgZG9jdW1lbnQgZnJvbSBzdG9yYWdlIGxvY2FsbHkgdG8gYSBEb2N1bWVudC4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2Zyb21EYlJlbW90ZURvY3VtZW50KGUsIHQpIHtcbiAgICBsZXQgbjtcbiAgICBpZiAodC5kb2N1bWVudCkgbiA9IF9fUFJJVkFURV9mcm9tRG9jdW1lbnQoZS5jdCwgdC5kb2N1bWVudCwgISF0Lmhhc0NvbW1pdHRlZE11dGF0aW9ucyk7IGVsc2UgaWYgKHQubm9Eb2N1bWVudCkge1xuICAgICAgICBjb25zdCBlID0gRG9jdW1lbnRLZXkuZnJvbVNlZ21lbnRzKHQubm9Eb2N1bWVudC5wYXRoKSwgciA9IF9fUFJJVkFURV9mcm9tRGJUaW1lc3RhbXAodC5ub0RvY3VtZW50LnJlYWRUaW1lKTtcbiAgICAgICAgbiA9IE11dGFibGVEb2N1bWVudC5uZXdOb0RvY3VtZW50KGUsIHIpLCB0Lmhhc0NvbW1pdHRlZE11dGF0aW9ucyAmJiBuLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghdC51bmtub3duRG9jdW1lbnQpIHJldHVybiBmYWlsKCk7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBEb2N1bWVudEtleS5mcm9tU2VnbWVudHModC51bmtub3duRG9jdW1lbnQucGF0aCksIHIgPSBfX1BSSVZBVEVfZnJvbURiVGltZXN0YW1wKHQudW5rbm93bkRvY3VtZW50LnZlcnNpb24pO1xuICAgICAgICAgICAgbiA9IE11dGFibGVEb2N1bWVudC5uZXdVbmtub3duRG9jdW1lbnQoZSwgcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHQucmVhZFRpbWUgJiYgbi5zZXRSZWFkVGltZShmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbURiVGltZXN0YW1wS2V5KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IG5ldyBUaW1lc3RhbXAoZVswXSwgZVsxXSk7XG4gICAgICAgIHJldHVybiBTbmFwc2hvdFZlcnNpb24uZnJvbVRpbWVzdGFtcCh0KTtcbiAgICB9KHQucmVhZFRpbWUpKSwgbjtcbn1cblxuLyoqIEVuY29kZXMgYSBkb2N1bWVudCBmb3Igc3RvcmFnZSBsb2NhbGx5LiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdG9EYlJlbW90ZURvY3VtZW50KGUsIHQpIHtcbiAgICBjb25zdCBuID0gdC5rZXksIHIgPSB7XG4gICAgICAgIHByZWZpeFBhdGg6IG4uZ2V0Q29sbGVjdGlvblBhdGgoKS5wb3BMYXN0KCkudG9BcnJheSgpLFxuICAgICAgICBjb2xsZWN0aW9uR3JvdXA6IG4uY29sbGVjdGlvbkdyb3VwLFxuICAgICAgICBkb2N1bWVudElkOiBuLnBhdGgubGFzdFNlZ21lbnQoKSxcbiAgICAgICAgcmVhZFRpbWU6IF9fUFJJVkFURV90b0RiVGltZXN0YW1wS2V5KHQucmVhZFRpbWUpLFxuICAgICAgICBoYXNDb21taXR0ZWRNdXRhdGlvbnM6IHQuaGFzQ29tbWl0dGVkTXV0YXRpb25zXG4gICAgfTtcbiAgICBpZiAodC5pc0ZvdW5kRG9jdW1lbnQoKSkgci5kb2N1bWVudCA9IGZ1bmN0aW9uIF9fUFJJVkFURV90b0RvY3VtZW50KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6IF9fUFJJVkFURV90b05hbWUoZSwgdC5rZXkpLFxuICAgICAgICAgICAgZmllbGRzOiB0LmRhdGEudmFsdWUubWFwVmFsdWUuZmllbGRzLFxuICAgICAgICAgICAgdXBkYXRlVGltZTogdG9UaW1lc3RhbXAoZSwgdC52ZXJzaW9uLnRvVGltZXN0YW1wKCkpLFxuICAgICAgICAgICAgY3JlYXRlVGltZTogdG9UaW1lc3RhbXAoZSwgdC5jcmVhdGVUaW1lLnRvVGltZXN0YW1wKCkpXG4gICAgICAgIH07XG4gICAgfShlLmN0LCB0KTsgZWxzZSBpZiAodC5pc05vRG9jdW1lbnQoKSkgci5ub0RvY3VtZW50ID0ge1xuICAgICAgICBwYXRoOiBuLnBhdGgudG9BcnJheSgpLFxuICAgICAgICByZWFkVGltZTogX19QUklWQVRFX3RvRGJUaW1lc3RhbXAodC52ZXJzaW9uKVxuICAgIH07IGVsc2Uge1xuICAgICAgICBpZiAoIXQuaXNVbmtub3duRG9jdW1lbnQoKSkgcmV0dXJuIGZhaWwoKTtcbiAgICAgICAgci51bmtub3duRG9jdW1lbnQgPSB7XG4gICAgICAgICAgICBwYXRoOiBuLnBhdGgudG9BcnJheSgpLFxuICAgICAgICAgICAgdmVyc2lvbjogX19QUklWQVRFX3RvRGJUaW1lc3RhbXAodC52ZXJzaW9uKVxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gcjtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3RvRGJUaW1lc3RhbXBLZXkoZSkge1xuICAgIGNvbnN0IHQgPSBlLnRvVGltZXN0YW1wKCk7XG4gICAgcmV0dXJuIFsgdC5zZWNvbmRzLCB0Lm5hbm9zZWNvbmRzIF07XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV90b0RiVGltZXN0YW1wKGUpIHtcbiAgICBjb25zdCB0ID0gZS50b1RpbWVzdGFtcCgpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHNlY29uZHM6IHQuc2Vjb25kcyxcbiAgICAgICAgbmFub3NlY29uZHM6IHQubmFub3NlY29uZHNcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZnJvbURiVGltZXN0YW1wKGUpIHtcbiAgICBjb25zdCB0ID0gbmV3IFRpbWVzdGFtcChlLnNlY29uZHMsIGUubmFub3NlY29uZHMpO1xuICAgIHJldHVybiBTbmFwc2hvdFZlcnNpb24uZnJvbVRpbWVzdGFtcCh0KTtcbn1cblxuLyoqIEVuY29kZXMgYSBiYXRjaCBvZiBtdXRhdGlvbnMgaW50byBhIERiTXV0YXRpb25CYXRjaCBmb3IgbG9jYWwgc3RvcmFnZS4gKi9cbi8qKiBEZWNvZGVzIGEgRGJNdXRhdGlvbkJhdGNoIGludG8gYSBNdXRhdGlvbkJhdGNoICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfZnJvbURiTXV0YXRpb25CYXRjaChlLCB0KSB7XG4gICAgY29uc3QgbiA9ICh0LmJhc2VNdXRhdGlvbnMgfHwgW10pLm1hcCgodCA9PiBfX1BSSVZBVEVfZnJvbU11dGF0aW9uKGUuY3QsIHQpKSk7XG4gICAgLy8gU3F1YXNoIG9sZCB0cmFuc2Zvcm0gbXV0YXRpb25zIGludG8gZXhpc3RpbmcgcGF0Y2ggb3Igc2V0IG11dGF0aW9ucy5cbiAgICAvLyBUaGUgcmVwbGFjZW1lbnQgb2YgcmVwcmVzZW50aW5nIGB0cmFuc2Zvcm1zYCB3aXRoIGB1cGRhdGVfdHJhbnNmb3Jtc2BcbiAgICAvLyBvbiB0aGUgU0RLIG1lYW5zIHRoYXQgb2xkIGB0cmFuc2Zvcm1gIG11dGF0aW9ucyBzdG9yZWQgaW4gSW5kZXhlZERCIG5lZWRcbiAgICAvLyB0byBiZSB1cGRhdGVkIHRvIGB1cGRhdGVfdHJhbnNmb3Jtc2AuXG4gICAgLy8gVE9ETyhiLzE3NDYwODM3NCk6IFJlbW92ZSB0aGlzIGNvZGUgb25jZSB3ZSBwZXJmb3JtIGEgc2NoZW1hIG1pZ3JhdGlvbi5cbiAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0Lm11dGF0aW9ucy5sZW5ndGggLSAxOyArK2UpIHtcbiAgICAgICAgY29uc3QgbiA9IHQubXV0YXRpb25zW2VdO1xuICAgICAgICBpZiAoZSArIDEgPCB0Lm11dGF0aW9ucy5sZW5ndGggJiYgdm9pZCAwICE9PSB0Lm11dGF0aW9uc1tlICsgMV0udHJhbnNmb3JtKSB7XG4gICAgICAgICAgICBjb25zdCByID0gdC5tdXRhdGlvbnNbZSArIDFdO1xuICAgICAgICAgICAgbi51cGRhdGVUcmFuc2Zvcm1zID0gci50cmFuc2Zvcm0uZmllbGRUcmFuc2Zvcm1zLCB0Lm11dGF0aW9ucy5zcGxpY2UoZSArIDEsIDEpLCBcbiAgICAgICAgICAgICsrZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCByID0gdC5tdXRhdGlvbnMubWFwKCh0ID0+IF9fUFJJVkFURV9mcm9tTXV0YXRpb24oZS5jdCwgdCkpKSwgaSA9IFRpbWVzdGFtcC5mcm9tTWlsbGlzKHQubG9jYWxXcml0ZVRpbWVNcyk7XG4gICAgcmV0dXJuIG5ldyBNdXRhdGlvbkJhdGNoKHQuYmF0Y2hJZCwgaSwgbiwgcik7XG59XG5cbi8qKiBEZWNvZGVzIGEgRGJUYXJnZXQgaW50byBUYXJnZXREYXRhICovIGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tRGJUYXJnZXQoZSkge1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZnJvbURiVGltZXN0YW1wKGUucmVhZFRpbWUpLCBuID0gdm9pZCAwICE9PSBlLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gPyBfX1BSSVZBVEVfZnJvbURiVGltZXN0YW1wKGUubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbikgOiBTbmFwc2hvdFZlcnNpb24ubWluKCk7XG4gICAgbGV0IHI7XG4gICAgcmV0dXJuIHIgPSBcbiAgICAvKipcbiAqIEEgaGVscGVyIGZ1bmN0aW9uIGZvciBmaWd1cmluZyBvdXQgd2hhdCBraW5kIG9mIHF1ZXJ5IGhhcyBiZWVuIHN0b3JlZC5cbiAqL1xuICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9pc0RvY3VtZW50UXVlcnkoZSkge1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBlLmRvY3VtZW50cztcbiAgICB9XG4gICAgLyoqIEVuY29kZXMgYSBEYkJ1bmRsZSB0byBhIEJ1bmRsZU1ldGFkYXRhIG9iamVjdC4gKi8gKGUucXVlcnkpID8gZnVuY3Rpb24gX19QUklWQVRFX2Zyb21Eb2N1bWVudHNUYXJnZXQoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2hhcmRBc3NlcnQoMSA9PT0gZS5kb2N1bWVudHMubGVuZ3RoKSwgX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQoX19QUklWQVRFX25ld1F1ZXJ5Rm9yUGF0aChfX1BSSVZBVEVfZnJvbVF1ZXJ5UGF0aChlLmRvY3VtZW50c1swXSkpKTtcbiAgICB9KGUucXVlcnkpIDogZnVuY3Rpb24gX19QUklWQVRFX2Zyb21RdWVyeVRhcmdldChlKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcXVlcnlUb1RhcmdldChfX1BSSVZBVEVfY29udmVydFF1ZXJ5VGFyZ2V0VG9RdWVyeShlKSk7XG4gICAgfShlLnF1ZXJ5KSwgbmV3IFRhcmdldERhdGEociwgZS50YXJnZXRJZCwgXCJUYXJnZXRQdXJwb3NlTGlzdGVuXCIgLyogVGFyZ2V0UHVycG9zZS5MaXN0ZW4gKi8gLCBlLmxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciwgdCwgbiwgQnl0ZVN0cmluZy5mcm9tQmFzZTY0U3RyaW5nKGUucmVzdW1lVG9rZW4pKTtcbn1cblxuLyoqIEVuY29kZXMgVGFyZ2V0RGF0YSBpbnRvIGEgRGJUYXJnZXQgZm9yIHN0b3JhZ2UgbG9jYWxseS4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3RvRGJUYXJnZXQoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfdG9EYlRpbWVzdGFtcCh0LnNuYXBzaG90VmVyc2lvbiksIHIgPSBfX1BSSVZBVEVfdG9EYlRpbWVzdGFtcCh0Lmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24pO1xuICAgIGxldCBpO1xuICAgIGkgPSBfX1BSSVZBVEVfdGFyZ2V0SXNEb2N1bWVudFRhcmdldCh0LnRhcmdldCkgPyBfX1BSSVZBVEVfdG9Eb2N1bWVudHNUYXJnZXQoZS5jdCwgdC50YXJnZXQpIDogX19QUklWQVRFX3RvUXVlcnlUYXJnZXQoZS5jdCwgdC50YXJnZXQpLl90O1xuICAgIC8vIFdlIGNhbid0IHN0b3JlIHRoZSByZXN1bWVUb2tlbiBhcyBhIEJ5dGVTdHJpbmcgaW4gSW5kZXhlZERiLCBzbyB3ZVxuICAgIC8vIGNvbnZlcnQgaXQgdG8gYSBiYXNlNjQgc3RyaW5nIGZvciBzdG9yYWdlLlxuICAgICAgICBjb25zdCBzID0gdC5yZXN1bWVUb2tlbi50b0Jhc2U2NCgpO1xuICAgIC8vIGxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciBpcyBhbHdheXMgMCB1bnRpbCB3ZSBkbyByZWFsIEdDLlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICB0YXJnZXRJZDogdC50YXJnZXRJZCxcbiAgICAgICAgY2Fub25pY2FsSWQ6IF9fUFJJVkFURV9jYW5vbmlmeVRhcmdldCh0LnRhcmdldCksXG4gICAgICAgIHJlYWRUaW1lOiBuLFxuICAgICAgICByZXN1bWVUb2tlbjogcyxcbiAgICAgICAgbGFzdExpc3RlblNlcXVlbmNlTnVtYmVyOiB0LnNlcXVlbmNlTnVtYmVyLFxuICAgICAgICBsYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uOiByLFxuICAgICAgICBxdWVyeTogaVxuICAgIH07XG59XG5cbi8qKlxuICogRW5jb2RlcyBhIGBCdW5kbGVkUXVlcnlgIGZyb20gYnVuZGxlIHByb3RvIHRvIGEgUXVlcnkgb2JqZWN0LlxuICpcbiAqIFRoaXMgcmVjb25zdHJ1Y3RzIHRoZSBvcmlnaW5hbCBxdWVyeSB1c2VkIHRvIGJ1aWxkIHRoZSBidW5kbGUgYmVpbmcgbG9hZGVkLFxuICogaW5jbHVkaW5nIGZlYXR1cmVzIGV4aXN0cyBvbmx5IGluIFNES3MgKGZvciBleGFtcGxlOiBsaW1pdC10by1sYXN0KS5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2Zyb21CdW5kbGVkUXVlcnkoZSkge1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfY29udmVydFF1ZXJ5VGFyZ2V0VG9RdWVyeSh7XG4gICAgICAgIHBhcmVudDogZS5wYXJlbnQsXG4gICAgICAgIHN0cnVjdHVyZWRRdWVyeTogZS5zdHJ1Y3R1cmVkUXVlcnlcbiAgICB9KTtcbiAgICByZXR1cm4gXCJMQVNUXCIgPT09IGUubGltaXRUeXBlID8gX19QUklWQVRFX3F1ZXJ5V2l0aExpbWl0KHQsIHQubGltaXQsIFwiTFwiIC8qIExpbWl0VHlwZS5MYXN0ICovKSA6IHQ7XG59XG5cbi8qKiBFbmNvZGVzIGEgTmFtZWRRdWVyeSBwcm90byBvYmplY3QgdG8gYSBOYW1lZFF1ZXJ5IG1vZGVsIG9iamVjdC4gKi9cbi8qKiBFbmNvZGVzIGEgRGJEb2N1bWVudE92ZXJsYXkgb2JqZWN0IHRvIGFuIE92ZXJsYXkgbW9kZWwgb2JqZWN0LiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2Zyb21EYkRvY3VtZW50T3ZlcmxheShlLCB0KSB7XG4gICAgcmV0dXJuIG5ldyBPdmVybGF5KHQubGFyZ2VzdEJhdGNoSWQsIF9fUFJJVkFURV9mcm9tTXV0YXRpb24oZS5jdCwgdC5vdmVybGF5TXV0YXRpb24pKTtcbn1cblxuLyoqIERlY29kZXMgYW4gT3ZlcmxheSBtb2RlbCBvYmplY3QgaW50byBhIERiRG9jdW1lbnRPdmVybGF5IG9iamVjdC4gKi9cbi8qKlxuICogUmV0dXJucyB0aGUgRGJEb2N1bWVudE92ZXJsYXlLZXkgY29ycmVzcG9uZGluZyB0byB0aGUgZ2l2ZW4gdXNlciBhbmRcbiAqIGRvY3VtZW50IGtleS5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX3RvRGJEb2N1bWVudE92ZXJsYXlLZXkoZSwgdCkge1xuICAgIGNvbnN0IG4gPSB0LnBhdGgubGFzdFNlZ21lbnQoKTtcbiAgICByZXR1cm4gWyBlLCBfX1BSSVZBVEVfZW5jb2RlUmVzb3VyY2VQYXRoKHQucGF0aC5wb3BMYXN0KCkpLCBuIF07XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV90b0RiSW5kZXhTdGF0ZShlLCB0LCBuLCByKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW5kZXhJZDogZSxcbiAgICAgICAgdWlkOiB0LFxuICAgICAgICBzZXF1ZW5jZU51bWJlcjogbixcbiAgICAgICAgcmVhZFRpbWU6IF9fUFJJVkFURV90b0RiVGltZXN0YW1wKHIucmVhZFRpbWUpLFxuICAgICAgICBkb2N1bWVudEtleTogX19QUklWQVRFX2VuY29kZVJlc291cmNlUGF0aChyLmRvY3VtZW50S2V5LnBhdGgpLFxuICAgICAgICBsYXJnZXN0QmF0Y2hJZDogci5sYXJnZXN0QmF0Y2hJZFxuICAgIH07XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIF9fUFJJVkFURV9JbmRleGVkRGJCdW5kbGVDYWNoZSB7XG4gICAgZ2V0QnVuZGxlTWV0YWRhdGEoZSwgdCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2J1bmRsZXNTdG9yZShlKS5nZXQodCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBpZiAoZSkgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tRGJCdW5kbGUoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBlLmJ1bmRsZUlkLFxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVUaW1lOiBfX1BSSVZBVEVfZnJvbURiVGltZXN0YW1wKGUuY3JlYXRlVGltZSksXG4gICAgICAgICAgICAgICAgICAgIHZlcnNpb246IGUudmVyc2lvblxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKiogRW5jb2RlcyBhIEJ1bmRsZU1ldGFkYXRhIHRvIGEgRGJCdW5kbGUuICovIChlKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzYXZlQnVuZGxlTWV0YWRhdGEoZSwgdCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2J1bmRsZXNTdG9yZShlKS5wdXQoZnVuY3Rpb24gX19QUklWQVRFX3RvRGJCdW5kbGUoZSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBidW5kbGVJZDogZS5pZCxcbiAgICAgICAgICAgICAgICBjcmVhdGVUaW1lOiBfX1BSSVZBVEVfdG9EYlRpbWVzdGFtcChfX1BSSVZBVEVfZnJvbVZlcnNpb24oZS5jcmVhdGVUaW1lKSksXG4gICAgICAgICAgICAgICAgdmVyc2lvbjogZS52ZXJzaW9uXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIC8qKiBFbmNvZGVzIGEgRGJOYW1lZFF1ZXJ5IHRvIGEgTmFtZWRRdWVyeS4gKi8gKHQpKTtcbiAgICB9XG4gICAgZ2V0TmFtZWRRdWVyeShlLCB0KSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfbmFtZWRRdWVyaWVzU3RvcmUoZSkuZ2V0KHQpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgaWYgKGUpIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbURiTmFtZWRRdWVyeShlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogZS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBxdWVyeTogX19QUklWQVRFX2Zyb21CdW5kbGVkUXVlcnkoZS5idW5kbGVkUXVlcnkpLFxuICAgICAgICAgICAgICAgICAgICByZWFkVGltZTogX19QUklWQVRFX2Zyb21EYlRpbWVzdGFtcChlLnJlYWRUaW1lKVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKiogRW5jb2RlcyBhIE5hbWVkUXVlcnkgZnJvbSBhIGJ1bmRsZSBwcm90byB0byBhIERiTmFtZWRRdWVyeS4gKi8gKGUpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHNhdmVOYW1lZFF1ZXJ5KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9uYW1lZFF1ZXJpZXNTdG9yZShlKS5wdXQoZnVuY3Rpb24gX19QUklWQVRFX3RvRGJOYW1lZFF1ZXJ5KGUpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbmFtZTogZS5uYW1lLFxuICAgICAgICAgICAgICAgIHJlYWRUaW1lOiBfX1BSSVZBVEVfdG9EYlRpbWVzdGFtcChfX1BSSVZBVEVfZnJvbVZlcnNpb24oZS5yZWFkVGltZSkpLFxuICAgICAgICAgICAgICAgIGJ1bmRsZWRRdWVyeTogZS5idW5kbGVkUXVlcnlcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0odCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGJ1bmRsZXMgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9idW5kbGVzU3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgXCJidW5kbGVzXCIpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgbmFtZWRRdWVyaWVzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbmFtZWRRdWVyaWVzU3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgXCJuYW1lZFF1ZXJpZXNcIik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEltcGxlbWVudGF0aW9uIG9mIERvY3VtZW50T3ZlcmxheUNhY2hlIHVzaW5nIEluZGV4ZWREYi5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfSW5kZXhlZERiRG9jdW1lbnRPdmVybGF5Q2FjaGUge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBzZXJpYWxpemVyIC0gVGhlIGRvY3VtZW50IHNlcmlhbGl6ZXIuXG4gICAgICogQHBhcmFtIHVzZXJJZCAtIFRoZSB1c2VySWQgZm9yIHdoaWNoIHdlIGFyZSBhY2Nlc3Npbmcgb3ZlcmxheXMuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSBlLCB0aGlzLnVzZXJJZCA9IHQ7XG4gICAgfVxuICAgIHN0YXRpYyBsdChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0LnVpZCB8fCBcIlwiO1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9JbmRleGVkRGJEb2N1bWVudE92ZXJsYXlDYWNoZShlLCBuKTtcbiAgICB9XG4gICAgZ2V0T3ZlcmxheShlLCB0KSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfZG9jdW1lbnRPdmVybGF5U3RvcmUoZSkuZ2V0KF9fUFJJVkFURV90b0RiRG9jdW1lbnRPdmVybGF5S2V5KHRoaXMudXNlcklkLCB0KSkubmV4dCgoZSA9PiBlID8gX19QUklWQVRFX2Zyb21EYkRvY3VtZW50T3ZlcmxheSh0aGlzLnNlcmlhbGl6ZXIsIGUpIDogbnVsbCkpO1xuICAgIH1cbiAgICBnZXRPdmVybGF5cyhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfbmV3T3ZlcmxheU1hcCgpO1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godCwgKHQgPT4gdGhpcy5nZXRPdmVybGF5KGUsIHQpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgbnVsbCAhPT0gZSAmJiBuLnNldCh0LCBlKTtcbiAgICAgICAgfSkpKSkubmV4dCgoKCkgPT4gbikpO1xuICAgIH1cbiAgICBzYXZlT3ZlcmxheXMoZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gW107XG4gICAgICAgIHJldHVybiBuLmZvckVhY2goKChuLCBpKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gbmV3IE92ZXJsYXkodCwgaSk7XG4gICAgICAgICAgICByLnB1c2godGhpcy5odChlLCBzKSk7XG4gICAgICAgIH0pKSwgUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3Iocik7XG4gICAgfVxuICAgIHJlbW92ZU92ZXJsYXlzRm9yQmF0Y2hJZChlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgU2V0O1xuICAgICAgICAvLyBHZXQgdGhlIHNldCBvZiB1bmlxdWUgY29sbGVjdGlvbiBwYXRocy5cbiAgICAgICAgICAgICAgICB0LmZvckVhY2goKGUgPT4gci5hZGQoX19QUklWQVRFX2VuY29kZVJlc291cmNlUGF0aChlLmdldENvbGxlY3Rpb25QYXRoKCkpKSkpO1xuICAgICAgICBjb25zdCBpID0gW107XG4gICAgICAgIHJldHVybiByLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IElEQktleVJhbmdlLmJvdW5kKFsgdGhpcy51c2VySWQsIHQsIG4gXSwgWyB0aGlzLnVzZXJJZCwgdCwgbiArIDEgXSwgXG4gICAgICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCk7XG4gICAgICAgICAgICBpLnB1c2goX19QUklWQVRFX2RvY3VtZW50T3ZlcmxheVN0b3JlKGUpLmooXCJjb2xsZWN0aW9uUGF0aE92ZXJsYXlJbmRleFwiLCByKSk7XG4gICAgICAgIH0pKSwgUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IoaSk7XG4gICAgfVxuICAgIGdldE92ZXJsYXlzRm9yQ29sbGVjdGlvbihlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfbmV3T3ZlcmxheU1hcCgpLCBpID0gX19QUklWQVRFX2VuY29kZVJlc291cmNlUGF0aCh0KSwgcyA9IElEQktleVJhbmdlLmJvdW5kKFsgdGhpcy51c2VySWQsIGksIG4gXSwgWyB0aGlzLnVzZXJJZCwgaSwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMCk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfZG9jdW1lbnRPdmVybGF5U3RvcmUoZSkuVShcImNvbGxlY3Rpb25QYXRoT3ZlcmxheUluZGV4XCIsIHMpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gX19QUklWQVRFX2Zyb21EYkRvY3VtZW50T3ZlcmxheSh0aGlzLnNlcmlhbGl6ZXIsIHQpO1xuICAgICAgICAgICAgICAgIHIuc2V0KGUuZ2V0S2V5KCksIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHI7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0T3ZlcmxheXNGb3JDb2xsZWN0aW9uR3JvdXAoZSwgdCwgbiwgcikge1xuICAgICAgICBjb25zdCBpID0gX19QUklWQVRFX25ld092ZXJsYXlNYXAoKTtcbiAgICAgICAgbGV0IHM7XG4gICAgICAgIC8vIFdlIHdhbnQgYmF0Y2ggSURzIGxhcmdlciB0aGFuIGBzaW5jZUJhdGNoSWRgLCBhbmQgc28gdGhlIGxvd2VyIGJvdW5kXG4gICAgICAgIC8vIGlzIG5vdCBpbmNsdXNpdmUuXG4gICAgICAgICAgICAgICAgY29uc3QgbyA9IElEQktleVJhbmdlLmJvdW5kKFsgdGhpcy51c2VySWQsIHQsIG4gXSwgWyB0aGlzLnVzZXJJZCwgdCwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMCk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfZG9jdW1lbnRPdmVybGF5U3RvcmUoZSkuSih7XG4gICAgICAgICAgICBpbmRleDogXCJjb2xsZWN0aW9uR3JvdXBPdmVybGF5SW5kZXhcIixcbiAgICAgICAgICAgIHJhbmdlOiBvXG4gICAgICAgIH0sICgoZSwgdCwgbikgPT4ge1xuICAgICAgICAgICAgLy8gV2UgZG8gbm90IHdhbnQgdG8gcmV0dXJuIHBhcnRpYWwgYmF0Y2ggb3ZlcmxheXMsIGV2ZW4gaWYgdGhlIHNpemVcbiAgICAgICAgICAgIC8vIG9mIHRoZSByZXN1bHQgc2V0IGV4Y2VlZHMgdGhlIGdpdmVuIGBjb3VudGAgYXJndW1lbnQuIFRoZXJlZm9yZSwgd2VcbiAgICAgICAgICAgIC8vIGNvbnRpbnVlIHRvIGFnZ3JlZ2F0ZSByZXN1bHRzIGV2ZW4gYWZ0ZXIgdGhlIHJlc3VsdCBzaXplIGV4Y2VlZHNcbiAgICAgICAgICAgIC8vIGBjb3VudGAgaWYgdGhlcmUgYXJlIG1vcmUgb3ZlcmxheXMgZnJvbSB0aGUgYGN1cnJlbnRCYXRjaElkYC5cbiAgICAgICAgICAgIGNvbnN0IG8gPSBfX1BSSVZBVEVfZnJvbURiRG9jdW1lbnRPdmVybGF5KHRoaXMuc2VyaWFsaXplciwgdCk7XG4gICAgICAgICAgICBpLnNpemUoKSA8IHIgfHwgby5sYXJnZXN0QmF0Y2hJZCA9PT0gcyA/IChpLnNldChvLmdldEtleSgpLCBvKSwgcyA9IG8ubGFyZ2VzdEJhdGNoSWQpIDogbi5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIGh0KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9kb2N1bWVudE92ZXJsYXlTdG9yZShlKS5wdXQoZnVuY3Rpb24gX19QUklWQVRFX3RvRGJEb2N1bWVudE92ZXJsYXkoZSwgdCwgbikge1xuICAgICAgICAgICAgY29uc3QgW3IsIGksIHNdID0gX19QUklWQVRFX3RvRGJEb2N1bWVudE92ZXJsYXlLZXkodCwgbi5tdXRhdGlvbi5rZXkpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1c2VySWQ6IHQsXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvblBhdGg6IGksXG4gICAgICAgICAgICAgICAgZG9jdW1lbnRJZDogcyxcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uR3JvdXA6IG4ubXV0YXRpb24ua2V5LmdldENvbGxlY3Rpb25Hcm91cCgpLFxuICAgICAgICAgICAgICAgIGxhcmdlc3RCYXRjaElkOiBuLmxhcmdlc3RCYXRjaElkLFxuICAgICAgICAgICAgICAgIG92ZXJsYXlNdXRhdGlvbjogdG9NdXRhdGlvbihlLmN0LCBuLm11dGF0aW9uKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSh0aGlzLnNlcmlhbGl6ZXIsIHRoaXMudXNlcklkLCB0KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgZG9jdW1lbnQgb3ZlcmxheSBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2RvY3VtZW50T3ZlcmxheVN0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2dldFN0b3JlKGUsIFwiZG9jdW1lbnRPdmVybGF5c1wiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIE5vdGU6IFRoaXMgY29kZSBpcyBjb3BpZWQgZnJvbSB0aGUgYmFja2VuZC4gQ29kZSB0aGF0IGlzIG5vdCB1c2VkIGJ5XG4vLyBGaXJlc3RvcmUgd2FzIHJlbW92ZWQuXG4vKiogRmlyZXN0b3JlIGluZGV4IHZhbHVlIHdyaXRlci4gICovXG5jbGFzcyBfX1BSSVZBVEVfRmlyZXN0b3JlSW5kZXhWYWx1ZVdyaXRlciB7XG4gICAgY29uc3RydWN0b3IoKSB7fVxuICAgIC8vIFRoZSB3cml0ZSBtZXRob2RzIGJlbG93IHNob3J0LWNpcmN1aXQgd3JpdGluZyB0ZXJtaW5hdG9ycyBmb3IgdmFsdWVzXG4gICAgLy8gY29udGFpbmluZyBhICh0ZXJtaW5hdGluZykgdHJ1bmNhdGVkIHZhbHVlLlxuICAgIC8vIEFzIGFuIGV4YW1wbGUsIGNvbnNpZGVyIHRoZSByZXN1bHRpbmcgZW5jb2RpbmcgZm9yOlxuICAgIC8vIFtcImJhclwiLCBbMiwgXCJmb29cIl1dIC0+IChTVFJJTkcsIFwiYmFyXCIsIFRFUk0sIEFSUkFZLCBOVU1CRVIsIDIsIFNUUklORywgXCJmb29cIiwgVEVSTSwgVEVSTSwgVEVSTSlcbiAgICAvLyBbXCJiYXJcIiwgWzIsIHRydW5jYXRlZChcImZvb1wiKV1dIC0+IChTVFJJTkcsIFwiYmFyXCIsIFRFUk0sIEFSUkFZLCBOVU1CRVIsIDIsIFNUUklORywgXCJmb29cIiwgVFJVTkMpXG4gICAgLy8gW1wiYmFyXCIsIHRydW5jYXRlZChbXCJmb29cIl0pXSAtPiAoU1RSSU5HLCBcImJhclwiLCBURVJNLCBBUlJBWS4gU1RSSU5HLCBcImZvb1wiLCBURVJNLCBUUlVOQylcbiAgICAvKiogV3JpdGVzIGFuIGluZGV4IHZhbHVlLiAgKi9cbiAgICBQdChlLCB0KSB7XG4gICAgICAgIHRoaXMuSXQoZSwgdCksIFxuICAgICAgICAvLyBXcml0ZSBzZXBhcmF0b3IgdG8gc3BsaXQgaW5kZXggdmFsdWVzXG4gICAgICAgIC8vIChzZWUgZ28vZmlyZXN0b3JlLXN0b3JhZ2UtZm9ybWF0I2VuY29kaW5ncykuXG4gICAgICAgIHQuVHQoKTtcbiAgICB9XG4gICAgSXQoZSwgdCkge1xuICAgICAgICBpZiAoXCJudWxsVmFsdWVcIiBpbiBlKSB0aGlzLkV0KHQsIDUpOyBlbHNlIGlmIChcImJvb2xlYW5WYWx1ZVwiIGluIGUpIHRoaXMuRXQodCwgMTApLCBcbiAgICAgICAgdC5kdChlLmJvb2xlYW5WYWx1ZSA/IDEgOiAwKTsgZWxzZSBpZiAoXCJpbnRlZ2VyVmFsdWVcIiBpbiBlKSB0aGlzLkV0KHQsIDE1KSwgdC5kdChfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKGUuaW50ZWdlclZhbHVlKSk7IGVsc2UgaWYgKFwiZG91YmxlVmFsdWVcIiBpbiBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcihlLmRvdWJsZVZhbHVlKTtcbiAgICAgICAgICAgIGlzTmFOKG4pID8gdGhpcy5FdCh0LCAxMykgOiAodGhpcy5FdCh0LCAxNSksIF9fUFJJVkFURV9pc05lZ2F0aXZlWmVybyhuKSA/IFxuICAgICAgICAgICAgLy8gLTAuMCwgMCBhbmQgMC4wIGFyZSBhbGwgY29uc2lkZXJlZCB0aGUgc2FtZVxuICAgICAgICAgICAgdC5kdCgwKSA6IHQuZHQobikpO1xuICAgICAgICB9IGVsc2UgaWYgKFwidGltZXN0YW1wVmFsdWVcIiBpbiBlKSB7XG4gICAgICAgICAgICBsZXQgbiA9IGUudGltZXN0YW1wVmFsdWU7XG4gICAgICAgICAgICB0aGlzLkV0KHQsIDIwKSwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgbiAmJiAobiA9IF9fUFJJVkFURV9ub3JtYWxpemVUaW1lc3RhbXAobikpLCB0LkF0KGAke24uc2Vjb25kcyB8fCBcIlwifWApLCBcbiAgICAgICAgICAgIHQuZHQobi5uYW5vcyB8fCAwKTtcbiAgICAgICAgfSBlbHNlIGlmIChcInN0cmluZ1ZhbHVlXCIgaW4gZSkgdGhpcy5SdChlLnN0cmluZ1ZhbHVlLCB0KSwgdGhpcy5WdCh0KTsgZWxzZSBpZiAoXCJieXRlc1ZhbHVlXCIgaW4gZSkgdGhpcy5FdCh0LCAzMCksIFxuICAgICAgICB0LmZ0KF9fUFJJVkFURV9ub3JtYWxpemVCeXRlU3RyaW5nKGUuYnl0ZXNWYWx1ZSkpLCB0aGlzLlZ0KHQpOyBlbHNlIGlmIChcInJlZmVyZW5jZVZhbHVlXCIgaW4gZSkgdGhpcy5ndChlLnJlZmVyZW5jZVZhbHVlLCB0KTsgZWxzZSBpZiAoXCJnZW9Qb2ludFZhbHVlXCIgaW4gZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IGUuZ2VvUG9pbnRWYWx1ZTtcbiAgICAgICAgICAgIHRoaXMuRXQodCwgNDUpLCB0LmR0KG4ubGF0aXR1ZGUgfHwgMCksIHQuZHQobi5sb25naXR1ZGUgfHwgMCk7XG4gICAgICAgIH0gZWxzZSBcIm1hcFZhbHVlXCIgaW4gZSA/IF9fUFJJVkFURV9pc01heFZhbHVlKGUpID8gdGhpcy5FdCh0LCBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUikgOiAodGhpcy55dChlLm1hcFZhbHVlLCB0KSwgXG4gICAgICAgIHRoaXMuVnQodCkpIDogXCJhcnJheVZhbHVlXCIgaW4gZSA/ICh0aGlzLnd0KGUuYXJyYXlWYWx1ZSwgdCksIHRoaXMuVnQodCkpIDogZmFpbCgpO1xuICAgIH1cbiAgICBSdChlLCB0KSB7XG4gICAgICAgIHRoaXMuRXQodCwgMjUpLCB0aGlzLlN0KGUsIHQpO1xuICAgIH1cbiAgICBTdChlLCB0KSB7XG4gICAgICAgIHQuQXQoZSk7XG4gICAgfVxuICAgIHl0KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IGUuZmllbGRzIHx8IHt9O1xuICAgICAgICB0aGlzLkV0KHQsIDU1KTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIE9iamVjdC5rZXlzKG4pKSB0aGlzLlJ0KGUsIHQpLCB0aGlzLkl0KG5bZV0sIHQpO1xuICAgIH1cbiAgICB3dChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLnZhbHVlcyB8fCBbXTtcbiAgICAgICAgdGhpcy5FdCh0LCA1MCk7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiBuKSB0aGlzLkl0KGUsIHQpO1xuICAgIH1cbiAgICBndChlLCB0KSB7XG4gICAgICAgIHRoaXMuRXQodCwgMzcpO1xuICAgICAgICBEb2N1bWVudEtleS5mcm9tTmFtZShlKS5wYXRoLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5FdCh0LCA2MCksIHRoaXMuU3QoZSwgdCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgRXQoZSwgdCkge1xuICAgICAgICBlLmR0KHQpO1xuICAgIH1cbiAgICBWdChlKSB7XG4gICAgICAgIC8vIFdoaWxlIHRoZSBTREsgZG9lcyBub3QgaW1wbGVtZW50IHRydW5jYXRpb24sIHRoZSB0cnVuY2F0aW9uIG1hcmtlciBpc1xuICAgICAgICAvLyB1c2VkIHRvIHRlcm1pbmF0ZSBhbGwgdmFyaWFibGUgbGVuZ3RoIHZhbHVlcyAod2hpY2ggYXJlIHN0cmluZ3MsIGJ5dGVzLFxuICAgICAgICAvLyByZWZlcmVuY2VzLCBhcnJheXMgYW5kIG1hcHMpLlxuICAgICAgICBlLmR0KDIpO1xuICAgIH1cbn1cblxuX19QUklWQVRFX0ZpcmVzdG9yZUluZGV4VmFsdWVXcml0ZXIuYnQgPSBuZXcgX19QUklWQVRFX0ZpcmVzdG9yZUluZGV4VmFsdWVXcml0ZXI7XG5cbi8qKlxuICogQ291bnRzIHRoZSBudW1iZXIgb2YgemVyb3MgaW4gYSBieXRlLlxuICpcbiAqIFZpc2libGUgZm9yIHRlc3RpbmcuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9udW1iZXJPZkxlYWRpbmdaZXJvc0luQnl0ZShlKSB7XG4gICAgaWYgKDAgPT09IGUpIHJldHVybiA4O1xuICAgIGxldCB0ID0gMDtcbiAgICByZXR1cm4gZSA+PiA0ID09IDAgJiYgKFxuICAgIC8vIFRlc3QgaWYgdGhlIGZpcnN0IGZvdXIgYml0cyBhcmUgemVyby5cbiAgICB0ICs9IDQsIGUgPDw9IDQpLCBlID4+IDYgPT0gMCAmJiAoXG4gICAgLy8gVGVzdCBpZiB0aGUgZmlyc3QgdHdvIChvciBuZXh0IHR3bykgYml0cyBhcmUgemVyby5cbiAgICB0ICs9IDIsIGUgPDw9IDIpLCBlID4+IDcgPT0gMCAmJiAoXG4gICAgLy8gVGVzdCBpZiB0aGUgcmVtYWluaW5nIGJpdCBpcyB6ZXJvLlxuICAgIHQgKz0gMSksIHQ7XG59XG5cbi8qKiBDb3VudHMgdGhlIG51bWJlciBvZiBsZWFkaW5nIHplcm9zIGluIHRoZSBnaXZlbiBieXRlIGFycmF5LiAqL1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgYnl0ZXMgcmVxdWlyZWQgdG8gc3RvcmUgXCJ2YWx1ZVwiLiBMZWFkaW5nIHplcm8gYnl0ZXNcbiAqIGFyZSBza2lwcGVkLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfdW5zaWduZWROdW1MZW5ndGgoZSkge1xuICAgIC8vIFRoaXMgaXMganVzdCB0aGUgbnVtYmVyIG9mIGJ5dGVzIGZvciB0aGUgdW5zaWduZWQgcmVwcmVzZW50YXRpb24gb2YgdGhlIG51bWJlci5cbiAgICBjb25zdCB0ID0gNjQgLSBmdW5jdGlvbiBfX1BSSVZBVEVfbnVtYmVyT2ZMZWFkaW5nWmVyb3MoZSkge1xuICAgICAgICBsZXQgdCA9IDA7XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgODsgKytuKSB7XG4gICAgICAgICAgICBjb25zdCByID0gX19QUklWQVRFX251bWJlck9mTGVhZGluZ1plcm9zSW5CeXRlKDI1NSAmIGVbbl0pO1xuICAgICAgICAgICAgaWYgKHQgKz0gciwgOCAhPT0gcikgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfShlKTtcbiAgICByZXR1cm4gTWF0aC5jZWlsKHQgLyA4KTtcbn1cblxuLyoqXG4gKiBPcmRlcmVkQ29kZVdyaXRlciBpcyBhIG1pbmltYWwtYWxsb2NhdGlvbiBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgd3JpdGluZ1xuICogYmVoYXZpb3IgZGVmaW5lZCBieSB0aGUgYmFja2VuZC5cbiAqXG4gKiBUaGUgY29kZSBpcyBwb3J0ZWQgZnJvbSBpdHMgSmF2YSBjb3VudGVycGFydC5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfT3JkZXJlZENvZGVXcml0ZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDEwMjQpLCB0aGlzLnBvc2l0aW9uID0gMDtcbiAgICB9XG4gICAgRHQoZSkge1xuICAgICAgICBjb25zdCB0ID0gZVtTeW1ib2wuaXRlcmF0b3JdKCk7XG4gICAgICAgIGxldCBuID0gdC5uZXh0KCk7XG4gICAgICAgIGZvciAoOyFuLmRvbmU7ICkgdGhpcy5DdChuLnZhbHVlKSwgbiA9IHQubmV4dCgpO1xuICAgICAgICB0aGlzLnZ0KCk7XG4gICAgfVxuICAgIEZ0KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGVbU3ltYm9sLml0ZXJhdG9yXSgpO1xuICAgICAgICBsZXQgbiA9IHQubmV4dCgpO1xuICAgICAgICBmb3IgKDshbi5kb25lOyApIHRoaXMuTXQobi52YWx1ZSksIG4gPSB0Lm5leHQoKTtcbiAgICAgICAgdGhpcy54dCgpO1xuICAgIH1cbiAgICAvKiogV3JpdGVzIHV0ZjggYnl0ZXMgaW50byB0aGlzIGJ5dGUgc2VxdWVuY2UsIGFzY2VuZGluZy4gKi8gICAgT3QoZSkge1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQuY2hhckNvZGVBdCgwKTtcbiAgICAgICAgICAgIGlmIChlIDwgMTI4KSB0aGlzLkN0KGUpOyBlbHNlIGlmIChlIDwgMjA0OCkgdGhpcy5DdCg5NjAgfCBlID4+PiA2KSwgdGhpcy5DdCgxMjggfCA2MyAmIGUpOyBlbHNlIGlmICh0IDwgXCJcXHVkODAwXCIgfHwgXCJcXHVkYmZmXCIgPCB0KSB0aGlzLkN0KDQ4MCB8IGUgPj4+IDEyKSwgXG4gICAgICAgICAgICB0aGlzLkN0KDEyOCB8IDYzICYgZSA+Pj4gNiksIHRoaXMuQ3QoMTI4IHwgNjMgJiBlKTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQuY29kZVBvaW50QXQoMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5DdCgyNDAgfCBlID4+PiAxOCksIHRoaXMuQ3QoMTI4IHwgNjMgJiBlID4+PiAxMiksIHRoaXMuQ3QoMTI4IHwgNjMgJiBlID4+PiA2KSwgXG4gICAgICAgICAgICAgICAgdGhpcy5DdCgxMjggfCA2MyAmIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMudnQoKTtcbiAgICB9XG4gICAgLyoqIFdyaXRlcyB1dGY4IGJ5dGVzIGludG8gdGhpcyBieXRlIHNlcXVlbmNlLCBkZXNjZW5kaW5nICovICAgIE50KGUpIHtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LmNoYXJDb2RlQXQoMCk7XG4gICAgICAgICAgICBpZiAoZSA8IDEyOCkgdGhpcy5NdChlKTsgZWxzZSBpZiAoZSA8IDIwNDgpIHRoaXMuTXQoOTYwIHwgZSA+Pj4gNiksIHRoaXMuTXQoMTI4IHwgNjMgJiBlKTsgZWxzZSBpZiAodCA8IFwiXFx1ZDgwMFwiIHx8IFwiXFx1ZGJmZlwiIDwgdCkgdGhpcy5NdCg0ODAgfCBlID4+PiAxMiksIFxuICAgICAgICAgICAgdGhpcy5NdCgxMjggfCA2MyAmIGUgPj4+IDYpLCB0aGlzLk10KDEyOCB8IDYzICYgZSk7IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0LmNvZGVQb2ludEF0KDApO1xuICAgICAgICAgICAgICAgIHRoaXMuTXQoMjQwIHwgZSA+Pj4gMTgpLCB0aGlzLk10KDEyOCB8IDYzICYgZSA+Pj4gMTIpLCB0aGlzLk10KDEyOCB8IDYzICYgZSA+Pj4gNiksIFxuICAgICAgICAgICAgICAgIHRoaXMuTXQoMTI4IHwgNjMgJiBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnh0KCk7XG4gICAgfVxuICAgIEx0KGUpIHtcbiAgICAgICAgLy8gVmFsdWVzIGFyZSBlbmNvZGVkIHdpdGggYSBzaW5nbGUgYnl0ZSBsZW5ndGggcHJlZml4LCBmb2xsb3dlZCBieSB0aGVcbiAgICAgICAgLy8gYWN0dWFsIHZhbHVlIGluIGJpZy1lbmRpYW4gZm9ybWF0IHdpdGggbGVhZGluZyAwIGJ5dGVzIGRyb3BwZWQuXG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLkJ0KGUpLCBuID0gX19QUklWQVRFX3Vuc2lnbmVkTnVtTGVuZ3RoKHQpO1xuICAgICAgICB0aGlzLmt0KDEgKyBuKSwgdGhpcy5idWZmZXJbdGhpcy5wb3NpdGlvbisrXSA9IDI1NSAmIG47XG4gICAgICAgIC8vIFdyaXRlIHRoZSBsZW5ndGhcbiAgICAgICAgZm9yIChsZXQgZSA9IHQubGVuZ3RoIC0gbjsgZSA8IHQubGVuZ3RoOyArK2UpIHRoaXMuYnVmZmVyW3RoaXMucG9zaXRpb24rK10gPSAyNTUgJiB0W2VdO1xuICAgIH1cbiAgICBxdChlKSB7XG4gICAgICAgIC8vIFZhbHVlcyBhcmUgZW5jb2RlZCB3aXRoIGEgc2luZ2xlIGJ5dGUgbGVuZ3RoIHByZWZpeCwgZm9sbG93ZWQgYnkgdGhlXG4gICAgICAgIC8vIGludmVydGVkIHZhbHVlIGluIGJpZy1lbmRpYW4gZm9ybWF0IHdpdGggbGVhZGluZyAwIGJ5dGVzIGRyb3BwZWQuXG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLkJ0KGUpLCBuID0gX19QUklWQVRFX3Vuc2lnbmVkTnVtTGVuZ3RoKHQpO1xuICAgICAgICB0aGlzLmt0KDEgKyBuKSwgdGhpcy5idWZmZXJbdGhpcy5wb3NpdGlvbisrXSA9IH4oMjU1ICYgbik7XG4gICAgICAgIC8vIFdyaXRlIHRoZSBsZW5ndGhcbiAgICAgICAgZm9yIChsZXQgZSA9IHQubGVuZ3RoIC0gbjsgZSA8IHQubGVuZ3RoOyArK2UpIHRoaXMuYnVmZmVyW3RoaXMucG9zaXRpb24rK10gPSB+KDI1NSAmIHRbZV0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXcml0ZXMgdGhlIFwiaW5maW5pdHlcIiBieXRlIHNlcXVlbmNlIHRoYXQgc29ydHMgYWZ0ZXIgYWxsIG90aGVyIGJ5dGVcbiAgICAgKiBzZXF1ZW5jZXMgd3JpdHRlbiBpbiBhc2NlbmRpbmcgb3JkZXIuXG4gICAgICovICAgIFF0KCkge1xuICAgICAgICB0aGlzLkt0KDI1NSksIHRoaXMuS3QoMjU1KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV3JpdGVzIHRoZSBcImluZmluaXR5XCIgYnl0ZSBzZXF1ZW5jZSB0aGF0IHNvcnRzIGJlZm9yZSBhbGwgb3RoZXIgYnl0ZVxuICAgICAqIHNlcXVlbmNlcyB3cml0dGVuIGluIGRlc2NlbmRpbmcgb3JkZXIuXG4gICAgICovICAgICR0KCkge1xuICAgICAgICB0aGlzLlV0KDI1NSksIHRoaXMuVXQoMjU1KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBidWZmZXIgc3VjaCB0aGF0IGl0IGlzIHRoZSBzYW1lIGFzIHdoZW4gaXQgd2FzIG5ld2x5XG4gICAgICogY29uc3RydWN0ZWQuXG4gICAgICovICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gMDtcbiAgICB9XG4gICAgc2VlZChlKSB7XG4gICAgICAgIHRoaXMua3QoZS5sZW5ndGgpLCB0aGlzLmJ1ZmZlci5zZXQoZSwgdGhpcy5wb3NpdGlvbiksIHRoaXMucG9zaXRpb24gKz0gZS5sZW5ndGg7XG4gICAgfVxuICAgIC8qKiBNYWtlcyBhIGNvcHkgb2YgdGhlIGVuY29kZWQgYnl0ZXMgaW4gdGhpcyBidWZmZXIuICAqLyAgICBXdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyLnNsaWNlKDAsIHRoaXMucG9zaXRpb24pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbmNvZGVzIGB2YWxgIGludG8gYW4gZW5jb2Rpbmcgc28gdGhhdCB0aGUgb3JkZXIgbWF0Y2hlcyB0aGUgSUVFRSA3NTRcbiAgICAgKiBmbG9hdGluZy1wb2ludCBjb21wYXJpc29uIHJlc3VsdHMgd2l0aCB0aGUgZm9sbG93aW5nIGV4Y2VwdGlvbnM6XG4gICAgICogICAtMC4wIDwgMC4wXG4gICAgICogICBhbGwgbm9uLU5hTiA8IE5hTlxuICAgICAqICAgTmFOID0gTmFOXG4gICAgICovICAgIEJ0KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IFxuICAgICAgICAvKiogQ29udmVydHMgYSBKYXZhU2NyaXB0IG51bWJlciB0byBhIGJ5dGUgYXJyYXkgKHVzaW5nIGJpZyBlbmRpYW4gZW5jb2RpbmcpLiAqL1xuICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfZG91YmxlVG9Mb25nQml0cyhlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gbmV3IERhdGFWaWV3KG5ldyBBcnJheUJ1ZmZlcig4KSk7XG4gICAgICAgICAgICByZXR1cm4gdC5zZXRGbG9hdDY0KDAsIGUsIC8qIGxpdHRsZUVuZGlhbj0gKi8gITEpLCBuZXcgVWludDhBcnJheSh0LmJ1ZmZlcik7XG4gICAgICAgIH0oZSksIG4gPSAwICE9ICgxMjggJiB0WzBdKTtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGZpcnN0IGJpdCBpcyBzZXQuIFdlIHVzZSBhIGJpdCBtYXNrIHNpbmNlIHZhbHVlWzBdIGlzXG4gICAgICAgIC8vIGVuY29kZWQgYXMgYSBudW1iZXIgZnJvbSAwIHRvIDI1NS5cbiAgICAgICAgICAgICAgICAvLyBSZXZlcnQgdGhlIHR3byBjb21wbGVtZW50IHRvIGdldCBuYXR1cmFsIG9yZGVyaW5nXG4gICAgICAgIHRbMF0gXj0gbiA/IDI1NSA6IDEyODtcbiAgICAgICAgZm9yIChsZXQgZSA9IDE7IGUgPCB0Lmxlbmd0aDsgKytlKSB0W2VdIF49IG4gPyAyNTUgOiAwO1xuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG4gICAgLyoqIFdyaXRlcyBhIHNpbmdsZSBieXRlIGFzY2VuZGluZyB0byB0aGUgYnVmZmVyLiAqLyAgICBDdChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSAyNTUgJiBlO1xuICAgICAgICAwID09PSB0ID8gKHRoaXMuS3QoMCksIHRoaXMuS3QoMjU1KSkgOiAyNTUgPT09IHQgPyAodGhpcy5LdCgyNTUpLCB0aGlzLkt0KDApKSA6IHRoaXMuS3QodCk7XG4gICAgfVxuICAgIC8qKiBXcml0ZXMgYSBzaW5nbGUgYnl0ZSBkZXNjZW5kaW5nIHRvIHRoZSBidWZmZXIuICAqLyAgICBNdChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSAyNTUgJiBlO1xuICAgICAgICAwID09PSB0ID8gKHRoaXMuVXQoMCksIHRoaXMuVXQoMjU1KSkgOiAyNTUgPT09IHQgPyAodGhpcy5VdCgyNTUpLCB0aGlzLlV0KDApKSA6IHRoaXMuVXQoZSk7XG4gICAgfVxuICAgIHZ0KCkge1xuICAgICAgICB0aGlzLkt0KDApLCB0aGlzLkt0KDEpO1xuICAgIH1cbiAgICB4dCgpIHtcbiAgICAgICAgdGhpcy5VdCgwKSwgdGhpcy5VdCgxKTtcbiAgICB9XG4gICAgS3QoZSkge1xuICAgICAgICB0aGlzLmt0KDEpLCB0aGlzLmJ1ZmZlclt0aGlzLnBvc2l0aW9uKytdID0gZTtcbiAgICB9XG4gICAgVXQoZSkge1xuICAgICAgICB0aGlzLmt0KDEpLCB0aGlzLmJ1ZmZlclt0aGlzLnBvc2l0aW9uKytdID0gfmU7XG4gICAgfVxuICAgIGt0KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUgKyB0aGlzLnBvc2l0aW9uO1xuICAgICAgICBpZiAodCA8PSB0aGlzLmJ1ZmZlci5sZW5ndGgpIHJldHVybjtcbiAgICAgICAgLy8gVHJ5IGRvdWJsaW5nLlxuICAgICAgICAgICAgICAgIGxldCBuID0gMiAqIHRoaXMuYnVmZmVyLmxlbmd0aDtcbiAgICAgICAgLy8gU3RpbGwgbm90IGJpZyBlbm91Z2g/IEp1c3QgYWxsb2NhdGUgdGhlIHJpZ2h0IHNpemUuXG4gICAgICAgICAgICAgICAgbiA8IHQgJiYgKG4gPSB0KTtcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBuZXcgYnVmZmVyLlxuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgVWludDhBcnJheShuKTtcbiAgICAgICAgci5zZXQodGhpcy5idWZmZXIpLCAvLyBjb3B5IG9sZCBkYXRhXG4gICAgICAgIHRoaXMuYnVmZmVyID0gcjtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9Bc2NlbmRpbmdJbmRleEJ5dGVFbmNvZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuR3QgPSBlO1xuICAgIH1cbiAgICBmdChlKSB7XG4gICAgICAgIHRoaXMuR3QuRHQoZSk7XG4gICAgfVxuICAgIEF0KGUpIHtcbiAgICAgICAgdGhpcy5HdC5PdChlKTtcbiAgICB9XG4gICAgZHQoZSkge1xuICAgICAgICB0aGlzLkd0Lkx0KGUpO1xuICAgIH1cbiAgICBUdCgpIHtcbiAgICAgICAgdGhpcy5HdC5RdCgpO1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX0Rlc2NlbmRpbmdJbmRleEJ5dGVFbmNvZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuR3QgPSBlO1xuICAgIH1cbiAgICBmdChlKSB7XG4gICAgICAgIHRoaXMuR3QuRnQoZSk7XG4gICAgfVxuICAgIEF0KGUpIHtcbiAgICAgICAgdGhpcy5HdC5OdChlKTtcbiAgICB9XG4gICAgZHQoZSkge1xuICAgICAgICB0aGlzLkd0LnF0KGUpO1xuICAgIH1cbiAgICBUdCgpIHtcbiAgICAgICAgdGhpcy5HdC4kdCgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbXBsZW1lbnRzIGBEaXJlY3Rpb25hbEluZGV4Qnl0ZUVuY29kZXJgIHVzaW5nIGBPcmRlcmVkQ29kZVdyaXRlcmAgZm9yIHRoZVxuICogYWN0dWFsIGVuY29kaW5nLlxuICovIGNsYXNzIF9fUFJJVkFURV9JbmRleEJ5dGVFbmNvZGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5HdCA9IG5ldyBfX1BSSVZBVEVfT3JkZXJlZENvZGVXcml0ZXIsIHRoaXMuenQgPSBuZXcgX19QUklWQVRFX0FzY2VuZGluZ0luZGV4Qnl0ZUVuY29kZXIodGhpcy5HdCksIFxuICAgICAgICB0aGlzLmp0ID0gbmV3IF9fUFJJVkFURV9EZXNjZW5kaW5nSW5kZXhCeXRlRW5jb2Rlcih0aGlzLkd0KTtcbiAgICB9XG4gICAgc2VlZChlKSB7XG4gICAgICAgIHRoaXMuR3Quc2VlZChlKTtcbiAgICB9XG4gICAgSHQoZSkge1xuICAgICAgICByZXR1cm4gMCAvKiBJbmRleEtpbmQuQVNDRU5ESU5HICovID09PSBlID8gdGhpcy56dCA6IHRoaXMuanQ7XG4gICAgfVxuICAgIFd0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5HdC5XdCgpO1xuICAgIH1cbiAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy5HdC5yZXNldCgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBSZXByZXNlbnRzIGFuIGluZGV4IGVudHJ5IHNhdmVkIGJ5IHRoZSBTREsgaW4gcGVyc2lzdGVkIHN0b3JhZ2UuICovIGNsYXNzIF9fUFJJVkFURV9JbmRleEVudHJ5IHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByKSB7XG4gICAgICAgIHRoaXMuaW5kZXhJZCA9IGUsIHRoaXMuZG9jdW1lbnRLZXkgPSB0LCB0aGlzLmFycmF5VmFsdWUgPSBuLCB0aGlzLmRpcmVjdGlvbmFsVmFsdWUgPSByO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIEluZGV4RW50cnkgZW50cnkgdGhhdCBzb3J0cyBpbW1lZGlhdGVseSBhZnRlciB0aGUgY3VycmVudFxuICAgICAqIGRpcmVjdGlvbmFsIHZhbHVlLlxuICAgICAqLyAgICBKdCgpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZGlyZWN0aW9uYWxWYWx1ZS5sZW5ndGgsIHQgPSAwID09PSBlIHx8IDI1NSA9PT0gdGhpcy5kaXJlY3Rpb25hbFZhbHVlW2UgLSAxXSA/IGUgKyAxIDogZSwgbiA9IG5ldyBVaW50OEFycmF5KHQpO1xuICAgICAgICByZXR1cm4gbi5zZXQodGhpcy5kaXJlY3Rpb25hbFZhbHVlLCAwKSwgdCAhPT0gZSA/IG4uc2V0KFsgMCBdLCB0aGlzLmRpcmVjdGlvbmFsVmFsdWUubGVuZ3RoKSA6ICsrbltuLmxlbmd0aCAtIDFdLCBcbiAgICAgICAgbmV3IF9fUFJJVkFURV9JbmRleEVudHJ5KHRoaXMuaW5kZXhJZCwgdGhpcy5kb2N1bWVudEtleSwgdGhpcy5hcnJheVZhbHVlLCBuKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9pbmRleEVudHJ5Q29tcGFyYXRvcihlLCB0KSB7XG4gICAgbGV0IG4gPSBlLmluZGV4SWQgLSB0LmluZGV4SWQ7XG4gICAgcmV0dXJuIDAgIT09IG4gPyBuIDogKG4gPSBfX1BSSVZBVEVfY29tcGFyZUJ5dGVBcnJheXMoZS5hcnJheVZhbHVlLCB0LmFycmF5VmFsdWUpLCBcbiAgICAwICE9PSBuID8gbiA6IChuID0gX19QUklWQVRFX2NvbXBhcmVCeXRlQXJyYXlzKGUuZGlyZWN0aW9uYWxWYWx1ZSwgdC5kaXJlY3Rpb25hbFZhbHVlKSwgXG4gICAgMCAhPT0gbiA/IG4gOiBEb2N1bWVudEtleS5jb21wYXJhdG9yKGUuZG9jdW1lbnRLZXksIHQuZG9jdW1lbnRLZXkpKSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jb21wYXJlQnl0ZUFycmF5cyhlLCB0KSB7XG4gICAgZm9yIChsZXQgbiA9IDA7IG4gPCBlLmxlbmd0aCAmJiBuIDwgdC5sZW5ndGg7ICsrbikge1xuICAgICAgICBjb25zdCByID0gZVtuXSAtIHRbbl07XG4gICAgICAgIGlmICgwICE9PSByKSByZXR1cm4gcjtcbiAgICB9XG4gICAgcmV0dXJuIGUubGVuZ3RoIC0gdC5sZW5ndGg7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgbGlnaHQgcXVlcnkgcGxhbm5lciBmb3IgRmlyZXN0b3JlLlxuICpcbiAqIFRoaXMgY2xhc3MgbWF0Y2hlcyBhIGBGaWVsZEluZGV4YCBhZ2FpbnN0IGEgRmlyZXN0b3JlIFF1ZXJ5IGBUYXJnZXRgLiBJdFxuICogZGV0ZXJtaW5lcyB3aGV0aGVyIGEgZ2l2ZW4gaW5kZXggY2FuIGJlIHVzZWQgdG8gc2VydmUgdGhlIHNwZWNpZmllZCB0YXJnZXQuXG4gKlxuICogVGhlIGZvbGxvd2luZyB0YWJsZSBzaG93Y2FzZXMgc29tZSBwb3NzaWJsZSBpbmRleCBjb25maWd1cmF0aW9uczpcbiAqXG4gKiBRdWVyeSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBJbmRleFxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIHdoZXJlKCdhJywgJz09JywgJ2EnKS53aGVyZSgnYicsICc9PScsICdiJykgICAgICAgICB8IGEgQVNDLCBiIERFU0NcbiAqIHdoZXJlKCdhJywgJz09JywgJ2EnKS53aGVyZSgnYicsICc9PScsICdiJykgICAgICAgICB8IGEgQVNDXG4gKiB3aGVyZSgnYScsICc9PScsICdhJykud2hlcmUoJ2InLCAnPT0nLCAnYicpICAgICAgICAgfCBiIERFU0NcbiAqIHdoZXJlKCdhJywgJz49JywgJ2EnKS5vcmRlckJ5KCdhJykgICAgICAgICAgICAgICAgICB8IGEgQVNDXG4gKiB3aGVyZSgnYScsICc+PScsICdhJykub3JkZXJCeSgnYScsICdkZXNjJykgICAgICAgICAgfCBhIERFU0NcbiAqIHdoZXJlKCdhJywgJz49JywgJ2EnKS5vcmRlckJ5KCdhJykub3JkZXJCeSgnYicpICAgICB8IGEgQVNDLCBiIEFTQ1xuICogd2hlcmUoJ2EnLCAnPj0nLCAnYScpLm9yZGVyQnkoJ2EnKS5vcmRlckJ5KCdiJykgICAgIHwgYSBBU0NcbiAqIHdoZXJlKCdhJywgJ2FycmF5LWNvbnRhaW5zJywgJ2EnKS5vcmRlckJ5KCdiJykgICAgICB8IGEgQ09OVEFJTlMsIGIgQVNDRU5ESU5HXG4gKiB3aGVyZSgnYScsICdhcnJheS1jb250YWlucycsICdhJykub3JkZXJCeSgnYicpICAgICAgfCBhIENPTlRBSU5TXG4gKi8gY2xhc3MgX19QUklWQVRFX1RhcmdldEluZGV4TWF0Y2hlciB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICAvLyBUaGUgaW5lcXVhbGl0eSBmaWx0ZXJzIG9mIHRoZSB0YXJnZXQgKGlmIGl0IGV4aXN0cykuXG4gICAgICAgIC8vIE5vdGU6IFRoZSBzb3J0IG9uIEZpZWxkRmlsdGVycyBpcyBub3QgcmVxdWlyZWQuIFVzaW5nIFNvcnRlZFNldCBoZXJlIGp1c3QgdG8gdXRpbGl6ZSB0aGUgY3VzdG9tXG4gICAgICAgIC8vIGNvbXBhcmF0b3IuXG4gICAgICAgIHRoaXMuWXQgPSBuZXcgU29ydGVkU2V0KCgoZSwgdCkgPT4gRmllbGRQYXRoJDEuY29tcGFyYXRvcihlLmZpZWxkLCB0LmZpZWxkKSkpLCB0aGlzLmNvbGxlY3Rpb25JZCA9IG51bGwgIT0gZS5jb2xsZWN0aW9uR3JvdXAgPyBlLmNvbGxlY3Rpb25Hcm91cCA6IGUucGF0aC5sYXN0U2VnbWVudCgpLCBcbiAgICAgICAgdGhpcy5adCA9IGUub3JkZXJCeSwgdGhpcy5YdCA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZS5maWx0ZXJzKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdDtcbiAgICAgICAgICAgIGUuaXNJbmVxdWFsaXR5KCkgPyB0aGlzLll0ID0gdGhpcy5ZdC5hZGQoZSkgOiB0aGlzLlh0LnB1c2goZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGVuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ZdC5zaXplID4gMTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBpbmRleCBjYW4gYmUgdXNlZCB0byBzZXJ2ZSB0aGUgVGFyZ2V0SW5kZXhNYXRjaGVyJ3NcbiAgICAgKiB0YXJnZXQuXG4gICAgICpcbiAgICAgKiBBbiBpbmRleCBpcyBjb25zaWRlcmVkIGNhcGFibGUgb2Ygc2VydmluZyB0aGUgdGFyZ2V0IHdoZW46XG4gICAgICogLSBUaGUgdGFyZ2V0IHVzZXMgYWxsIGluZGV4IHNlZ21lbnRzIGZvciBpdHMgZmlsdGVycyBhbmQgb3JkZXJCeSBjbGF1c2VzLlxuICAgICAqICAgVGhlIHRhcmdldCBjYW4gaGF2ZSBhZGRpdGlvbmFsIGZpbHRlciBhbmQgb3JkZXJCeSBjbGF1c2VzLCBidXQgbm90XG4gICAgICogICBmZXdlci5cbiAgICAgKiAtIElmIGFuIEFycmF5Q29udGFpbnMvQXJyYXlDb250YWluc0FueWZpbHRlciBpcyB1c2VkLCB0aGUgaW5kZXggbXVzdCBhbHNvXG4gICAgICogICBoYXZlIGEgY29ycmVzcG9uZGluZyBgQ09OVEFJTlNgIHNlZ21lbnQuXG4gICAgICogLSBBbGwgZGlyZWN0aW9uYWwgaW5kZXggc2VnbWVudHMgY2FuIGJlIG1hcHBlZCB0byB0aGUgdGFyZ2V0IGFzIGEgc2VyaWVzIG9mXG4gICAgICogICBlcXVhbGl0eSBmaWx0ZXJzLCBhIHNpbmdsZSBpbmVxdWFsaXR5IGZpbHRlciBhbmQgYSBzZXJpZXMgb2Ygb3JkZXJCeVxuICAgICAqICAgY2xhdXNlcy5cbiAgICAgKiAtIFRoZSBzZWdtZW50cyB0aGF0IHJlcHJlc2VudCB0aGUgZXF1YWxpdHkgZmlsdGVycyBtYXkgYXBwZWFyIG91dCBvZiBvcmRlci5cbiAgICAgKiAtIFRoZSBvcHRpb25hbCBzZWdtZW50IGZvciB0aGUgaW5lcXVhbGl0eSBmaWx0ZXIgbXVzdCBhcHBlYXIgYWZ0ZXIgYWxsXG4gICAgICogICBlcXVhbGl0eSBzZWdtZW50cy5cbiAgICAgKiAtIFRoZSBzZWdtZW50cyB0aGF0IHJlcHJlc2VudCB0aGF0IG9yZGVyQnkgY2xhdXNlIG9mIHRoZSB0YXJnZXQgbXVzdCBhcHBlYXJcbiAgICAgKiAgIGluIG9yZGVyIGFmdGVyIGFsbCBlcXVhbGl0eSBhbmQgaW5lcXVhbGl0eSBzZWdtZW50cy4gU2luZ2xlIG9yZGVyQnlcbiAgICAgKiAgIGNsYXVzZXMgY2Fubm90IGJlIHNraXBwZWQsIGJ1dCBhIGNvbnRpbnVvdXMgb3JkZXJCeSBzdWZmaXggbWF5IGJlXG4gICAgICogICBvbWl0dGVkLlxuICAgICAqLyAgICB0bihlKSB7XG4gICAgICAgIGlmIChfX1BSSVZBVEVfaGFyZEFzc2VydChlLmNvbGxlY3Rpb25Hcm91cCA9PT0gdGhpcy5jb2xsZWN0aW9uSWQpLCB0aGlzLmVuKSBcbiAgICAgICAgLy8gT25seSBzaW5nbGUgaW5lcXVhbGl0eSBpcyBzdXBwb3J0ZWQgZm9yIG5vdy5cbiAgICAgICAgLy8gVE9ETyhBZGQgc3VwcG9ydCBmb3IgbXVsdGlwbGUgaW5lcXVhbGl0eSBxdWVyeSk6IGIvMjk4NDQxMDQzXG4gICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgLy8gSWYgdGhlcmUgaXMgYW4gYXJyYXkgZWxlbWVudCwgZmluZCBhIG1hdGNoaW5nIGZpbHRlci5cbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2ZpZWxkSW5kZXhHZXRBcnJheVNlZ21lbnQoZSk7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IHQgJiYgIXRoaXMubm4odCkpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9maWVsZEluZGV4R2V0RGlyZWN0aW9uYWxTZWdtZW50cyhlKTtcbiAgICAgICAgbGV0IHIgPSBuZXcgU2V0LCBpID0gMCwgcyA9IDA7XG4gICAgICAgIC8vIFByb2Nlc3MgYWxsIGVxdWFsaXRpZXMgZmlyc3QuIEVxdWFsaXRpZXMgY2FuIGFwcGVhciBvdXQgb2Ygb3JkZXIuXG4gICAgICAgIGZvciAoO2kgPCBuLmxlbmd0aCAmJiB0aGlzLm5uKG5baV0pOyArK2kpIHIgPSByLmFkZChuW2ldLmZpZWxkUGF0aC5jYW5vbmljYWxTdHJpbmcoKSk7XG4gICAgICAgIC8vIElmIHdlIGFscmVhZHkgaGF2ZSBwcm9jZXNzZWQgYWxsIHNlZ21lbnRzLCBhbGwgc2VnbWVudHMgYXJlIHVzZWQgdG8gc2VydmVcbiAgICAgICAgLy8gdGhlIGVxdWFsaXR5IGZpbHRlcnMgYW5kIHdlIGRvIG5vdCBuZWVkIHRvIG1hcCBhbnkgc2VnbWVudHMgdG8gdGhlXG4gICAgICAgIC8vIHRhcmdldCdzIGluZXF1YWxpdHkgYW5kIG9yZGVyQnkgY2xhdXNlcy5cbiAgICAgICAgICAgICAgICBpZiAoaSA9PT0gbi5sZW5ndGgpIHJldHVybiAhMDtcbiAgICAgICAgaWYgKHRoaXMuWXQuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgIC8vIE9ubHkgYSBzaW5nbGUgaW5lcXVhbGl0eSBpcyBjdXJyZW50bHkgc3VwcG9ydGVkLiBHZXQgdGhlIG9ubHkgZW50cnkgaW4gdGhlIHNldC5cbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLll0LmdldEl0ZXJhdG9yKCkuZ2V0TmV4dCgpO1xuICAgICAgICAgICAgLy8gSWYgdGhlcmUgaXMgYW4gaW5lcXVhbGl0eSBmaWx0ZXIgYW5kIHRoZSBmaWVsZCB3YXMgbm90IGluIG9uZSBvZiB0aGVcbiAgICAgICAgICAgIC8vIGVxdWFsaXR5IGZpbHRlcnMgYWJvdmUsIHRoZSBuZXh0IHNlZ21lbnQgbXVzdCBtYXRjaCBib3RoIHRoZSBmaWx0ZXJcbiAgICAgICAgICAgIC8vIGFuZCB0aGUgZmlyc3Qgb3JkZXJCeSBjbGF1c2UuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXIuaGFzKGUuZmllbGQuY2Fub25pY2FsU3RyaW5nKCkpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IG5baV07XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnJuKGUsIHQpIHx8ICF0aGlzLnNuKHRoaXMuWnRbcysrXSwgdCkpIHJldHVybiAhMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICsraTtcbiAgICAgICAgfVxuICAgICAgICAvLyBBbGwgcmVtYWluaW5nIHNlZ21lbnRzIG5lZWQgdG8gcmVwcmVzZW50IHRoZSBwcmVmaXggb2YgdGhlIHRhcmdldCdzXG4gICAgICAgIC8vIG9yZGVyQnkuXG4gICAgICAgICAgICAgICAgZm9yICg7aSA8IG4ubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuW2ldO1xuICAgICAgICAgICAgaWYgKHMgPj0gdGhpcy5adC5sZW5ndGggfHwgIXRoaXMuc24odGhpcy5adFtzKytdLCBlKSkgcmV0dXJuICExO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGZ1bGwgbWF0Y2hlZCBmaWVsZCBpbmRleCBmb3IgdGhpcyB0YXJnZXQuIEN1cnJlbnRseSBtdWx0aXBsZVxuICAgICAqIGluZXF1YWxpdHkgcXVlcnkgaXMgbm90IHN1cHBvcnRlZCBzbyBmdW5jdGlvbiByZXR1cm5zIG51bGwuXG4gICAgICovICAgIG9uKCkge1xuICAgICAgICBpZiAodGhpcy5lbikgcmV0dXJuIG51bGw7XG4gICAgICAgIC8vIFdlIHdhbnQgdG8gbWFrZSBzdXJlIG9ubHkgb25lIHNlZ21lbnQgY3JlYXRlZCBmb3Igb25lIGZpZWxkLiBGb3IgZXhhbXBsZSxcbiAgICAgICAgLy8gaW4gY2FzZSBsaWtlIGEgPT0gMyBhbmQgYSA+IDIsIEluZGV4IHthIEFTQ0VORElOR30gd2lsbCBvbmx5IGJlIGNyZWF0ZWRcbiAgICAgICAgLy8gb25jZS5cbiAgICAgICAgICAgICAgICBsZXQgZSA9IG5ldyBTb3J0ZWRTZXQoRmllbGRQYXRoJDEuY29tcGFyYXRvcik7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIHRoaXMuWHQpIHtcbiAgICAgICAgICAgIGlmIChuLmZpZWxkLmlzS2V5RmllbGQoKSkgY29udGludWU7XG4gICAgICAgICAgICBpZiAoXCJhcnJheS1jb250YWluc1wiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TICovID09PSBuLm9wIHx8IFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZICovID09PSBuLm9wKSB0LnB1c2gobmV3IEluZGV4U2VnbWVudChuLmZpZWxkLCAyIC8qIEluZGV4S2luZC5DT05UQUlOUyAqLykpOyBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZS5oYXMobi5maWVsZCkpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGUgPSBlLmFkZChuLmZpZWxkKSwgdC5wdXNoKG5ldyBJbmRleFNlZ21lbnQobi5maWVsZCwgMCAvKiBJbmRleEtpbmQuQVNDRU5ESU5HICovKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gTm90ZTogV2UgZG8gbm90IGV4cGxpY2l0bHkgY2hlY2sgYHRoaXMuaW5lcXVhbGl0eUZpbHRlcmAgYnV0IHJhdGhlciByZWx5XG4gICAgICAgIC8vIG9uIHRoZSB0YXJnZXQgZGVmaW5pbmcgYW4gYXBwcm9wcmlhdGUgXCJvcmRlciBieVwiIHRvIGVuc3VyZSB0aGF0IHRoZVxuICAgICAgICAvLyByZXF1aXJlZCBpbmRleCBzZWdtZW50IGlzIGFkZGVkLiBUaGUgcXVlcnkgZW5naW5lIHdvdWxkIHJlamVjdCBhIHF1ZXJ5XG4gICAgICAgIC8vIHdpdGggYW4gaW5lcXVhbGl0eSBmaWx0ZXIgdGhhdCBsYWNrcyB0aGUgcmVxdWlyZWQgb3JkZXItYnkgY2xhdXNlLlxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiB0aGlzLlp0KSBcbiAgICAgICAgLy8gU3RvcCBhZGRpbmcgbW9yZSBzZWdtZW50cyBpZiB3ZSBzZWUgYSBvcmRlci1ieSBvbiBrZXkuIFR5cGljYWxseSB0aGlzXG4gICAgICAgIC8vIGlzIHRoZSBkZWZhdWx0IGltcGxpY2l0IG9yZGVyLWJ5IHdoaWNoIGlzIGNvdmVyZWQgaW4gdGhlIGluZGV4X2VudHJ5XG4gICAgICAgIC8vIHRhYmxlIGFzIGEgc2VwYXJhdGUgY29sdW1uLiBJZiBpdCBpcyBub3QgdGhlIGRlZmF1bHQgb3JkZXItYnksIHRoZVxuICAgICAgICAvLyBnZW5lcmF0ZWQgaW5kZXggd2lsbCBiZSBtaXNzaW5nIHNvbWUgc2VnbWVudHMgb3B0aW1pemVkIGZvciBvcmRlci1ieXMsXG4gICAgICAgIC8vIHdoaWNoIGlzIHByb2JhYmx5IGZpbmUuXG4gICAgICAgIG4uZmllbGQuaXNLZXlGaWVsZCgpIHx8IGUuaGFzKG4uZmllbGQpIHx8IChlID0gZS5hZGQobi5maWVsZCksIHQucHVzaChuZXcgSW5kZXhTZWdtZW50KG4uZmllbGQsIFwiYXNjXCIgLyogRGlyZWN0aW9uLkFTQ0VORElORyAqLyA9PT0gbi5kaXIgPyAwIC8qIEluZGV4S2luZC5BU0NFTkRJTkcgKi8gOiAxIC8qIEluZGV4S2luZC5ERVNDRU5ESU5HICovKSkpO1xuICAgICAgICByZXR1cm4gbmV3IEZpZWxkSW5kZXgoRmllbGRJbmRleC5VTktOT1dOX0lELCB0aGlzLmNvbGxlY3Rpb25JZCwgdCwgSW5kZXhTdGF0ZS5lbXB0eSgpKTtcbiAgICB9XG4gICAgbm4oZSkge1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgdGhpcy5YdCkgaWYgKHRoaXMucm4odCwgZSkpIHJldHVybiAhMDtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICBybihlLCB0KSB7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGUgfHwgIWUuZmllbGQuaXNFcXVhbCh0LmZpZWxkUGF0aCkpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgbiA9IFwiYXJyYXktY29udGFpbnNcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOUyAqLyA9PT0gZS5vcCB8fCBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSAqLyA9PT0gZS5vcDtcbiAgICAgICAgcmV0dXJuIDIgLyogSW5kZXhLaW5kLkNPTlRBSU5TICovID09PSB0LmtpbmQgPT09IG47XG4gICAgfVxuICAgIHNuKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuICEhZS5maWVsZC5pc0VxdWFsKHQuZmllbGRQYXRoKSAmJiAoMCAvKiBJbmRleEtpbmQuQVNDRU5ESU5HICovID09PSB0LmtpbmQgJiYgXCJhc2NcIiAvKiBEaXJlY3Rpb24uQVNDRU5ESU5HICovID09PSBlLmRpciB8fCAxIC8qIEluZGV4S2luZC5ERVNDRU5ESU5HICovID09PSB0LmtpbmQgJiYgXCJkZXNjXCIgLyogRGlyZWN0aW9uLkRFU0NFTkRJTkcgKi8gPT09IGUuZGlyKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFByb3ZpZGVzIHV0aWxpdHkgZnVuY3Rpb25zIHRoYXQgaGVscCB3aXRoIGJvb2xlYW4gbG9naWMgdHJhbnNmb3JtYXRpb25zIG5lZWRlZCBmb3IgaGFuZGxpbmdcbiAqIGNvbXBsZXggZmlsdGVycyB1c2VkIGluIHF1ZXJpZXMuXG4gKi9cbi8qKlxuICogVGhlIGBpbmAgZmlsdGVyIGlzIG9ubHkgYSBzeW50YWN0aWMgc3VnYXIgb3ZlciBhIGRpc2p1bmN0aW9uIG9mIGVxdWFsaXRpZXMuIEZvciBpbnN0YW5jZTogYGEgaW5cbiAqIFsxLDIsM11gIGlzIGluIGZhY3QgYGE9PTEgfHwgYT09MiB8fCBhPT0zYC4gVGhpcyBtZXRob2QgZXhwYW5kcyBhbnkgYGluYCBmaWx0ZXIgaW4gdGhlIGdpdmVuXG4gKiBpbnB1dCBpbnRvIGEgZGlzanVuY3Rpb24gb2YgZXF1YWxpdHkgZmlsdGVycyBhbmQgcmV0dXJucyB0aGUgZXhwYW5kZWQgZmlsdGVyLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9jb21wdXRlSW5FeHBhbnNpb24oZSkge1xuICAgIHZhciB0LCBuO1xuICAgIGlmIChfX1BSSVZBVEVfaGFyZEFzc2VydChlIGluc3RhbmNlb2YgRmllbGRGaWx0ZXIgfHwgZSBpbnN0YW5jZW9mIENvbXBvc2l0ZUZpbHRlciksIFxuICAgIGUgaW5zdGFuY2VvZiBGaWVsZEZpbHRlcikge1xuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9JbkZpbHRlcikge1xuICAgICAgICAgICAgY29uc3QgciA9IChudWxsID09PSAobiA9IG51bGwgPT09ICh0ID0gZS52YWx1ZS5hcnJheVZhbHVlKSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0LnZhbHVlcykgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5tYXAoKHQgPT4gRmllbGRGaWx0ZXIuY3JlYXRlKGUuZmllbGQsIFwiPT1cIiAvKiBPcGVyYXRvci5FUVVBTCAqLyAsIHQpKSkpIHx8IFtdO1xuICAgICAgICAgICAgcmV0dXJuIENvbXBvc2l0ZUZpbHRlci5jcmVhdGUociwgXCJvclwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLk9SICovKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBXZSBoYXZlIHJlYWNoZWQgb3RoZXIga2luZHMgb2YgZmllbGQgZmlsdGVycy5cbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIC8vIFdlIGhhdmUgYSBjb21wb3NpdGUgZmlsdGVyLlxuICAgICAgICBjb25zdCByID0gZS5maWx0ZXJzLm1hcCgoZSA9PiBfX1BSSVZBVEVfY29tcHV0ZUluRXhwYW5zaW9uKGUpKSk7XG4gICAgcmV0dXJuIENvbXBvc2l0ZUZpbHRlci5jcmVhdGUociwgZS5vcCk7XG59XG5cbi8qKlxuICogR2l2ZW4gYSBjb21wb3NpdGUgZmlsdGVyLCByZXR1cm5zIHRoZSBsaXN0IG9mIHRlcm1zIGluIGl0cyBkaXNqdW5jdGl2ZSBub3JtYWwgZm9ybS5cbiAqXG4gKiA8cD5FYWNoIGVsZW1lbnQgaW4gdGhlIHJldHVybiB2YWx1ZSBpcyBvbmUgdGVybSBvZiB0aGUgcmVzdWx0aW5nIERORi4gRm9yIGluc3RhbmNlOiBGb3IgdGhlXG4gKiBpbnB1dDogKEEgfHwgQikgJiYgQywgdGhlIERORiBmb3JtIGlzOiAoQSAmJiBDKSB8fCAoQiAmJiBDKSwgYW5kIHRoZSByZXR1cm4gdmFsdWUgaXMgYSBsaXN0XG4gKiB3aXRoIHR3byBlbGVtZW50czogYSBjb21wb3NpdGUgZmlsdGVyIHRoYXQgcGVyZm9ybXMgKEEgJiYgQyksIGFuZCBhIGNvbXBvc2l0ZSBmaWx0ZXIgdGhhdFxuICogcGVyZm9ybXMgKEIgJiYgQykuXG4gKlxuICogQHBhcmFtIGZpbHRlciB0aGUgY29tcG9zaXRlIGZpbHRlciB0byBjYWxjdWxhdGUgRE5GIHRyYW5zZm9ybSBmb3IuXG4gKiBAcmV0dXJuIHRoZSB0ZXJtcyBpbiB0aGUgRE5GIHRyYW5zZm9ybS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZ2V0RG5mVGVybXMoZSkge1xuICAgIGlmICgwID09PSBlLmdldEZpbHRlcnMoKS5sZW5ndGgpIHJldHVybiBbXTtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2NvbXB1dGVEaXN0cmlidXRlZE5vcm1hbEZvcm0oX19QUklWQVRFX2NvbXB1dGVJbkV4cGFuc2lvbihlKSk7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9oYXJkQXNzZXJ0KF9fUFJJVkFURV9pc0Rpc2p1bmN0aXZlTm9ybWFsRm9ybSh0KSksIF9fUFJJVkFURV9pc1NpbmdsZUZpZWxkRmlsdGVyKHQpIHx8IF9fUFJJVkFURV9pc0ZsYXRDb25qdW5jdGlvbih0KSA/IFsgdCBdIDogdC5nZXRGaWx0ZXJzKCk7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIGZpbHRlciBpcyBhIHNpbmdsZSBmaWVsZCBmaWx0ZXIuIGUuZy4gKGEgPT0gMTApLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfaXNTaW5nbGVGaWVsZEZpbHRlcihlKSB7XG4gICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBGaWVsZEZpbHRlcjtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIGZpbHRlciBpcyB0aGUgY29uanVuY3Rpb24gb2Ygb25lIG9yIG1vcmUgZmllbGQgZmlsdGVycy4gZS5nLiAoYSA9PSAxMFxuICogJiYgYiA9PSAyMClcbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfaXNGbGF0Q29uanVuY3Rpb24oZSkge1xuICAgIHJldHVybiBlIGluc3RhbmNlb2YgQ29tcG9zaXRlRmlsdGVyICYmIF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0ZsYXRDb25qdW5jdGlvbihlKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSBnaXZlbiBmaWx0ZXIgaXMgaW4gZGlzanVuY3RpdmUgbm9ybWFsIGZvcm0gKERORikuXG4gKlxuICogPHA+SW4gYm9vbGVhbiBsb2dpYywgYSBkaXNqdW5jdGl2ZSBub3JtYWwgZm9ybSAoRE5GKSBpcyBhIGNhbm9uaWNhbCBub3JtYWwgZm9ybSBvZiBhIGxvZ2ljYWxcbiAqIGZvcm11bGEgY29uc2lzdGluZyBvZiBhIGRpc2p1bmN0aW9uIG9mIGNvbmp1bmN0aW9uczsgaXQgY2FuIGFsc28gYmUgZGVzY3JpYmVkIGFzIGFuIE9SIG9mIEFORHMuXG4gKlxuICogPHA+Rm9yIG1vcmUgaW5mbywgdmlzaXQ6IGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Rpc2p1bmN0aXZlX25vcm1hbF9mb3JtXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2lzRGlzanVuY3RpdmVOb3JtYWxGb3JtKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2lzU2luZ2xlRmllbGRGaWx0ZXIoZSkgfHwgX19QUklWQVRFX2lzRmxhdENvbmp1bmN0aW9uKGUpIHx8IFxuICAgIC8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBmaWx0ZXIgaXMgdGhlIGRpc2p1bmN0aW9uIG9mIG9uZSBvciBtb3JlIFwiZmxhdCBjb25qdW5jdGlvbnNcIiBhbmRcbiAqIGZpZWxkIGZpbHRlcnMuIGUuZy4gKGEgPT0gMTApIHx8IChiPT0yMCAmJiBjPT0zMClcbiAqL1xuICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9pc0Rpc2p1bmN0aW9uT2ZGaWVsZEZpbHRlcnNBbmRGbGF0Q29uanVuY3Rpb25zKGUpIHtcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBDb21wb3NpdGVGaWx0ZXIgJiYgX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzRGlzanVuY3Rpb24oZSkpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBlLmdldEZpbHRlcnMoKSkgaWYgKCFfX1BSSVZBVEVfaXNTaW5nbGVGaWVsZEZpbHRlcih0KSAmJiAhX19QUklWQVRFX2lzRmxhdENvbmp1bmN0aW9uKHQpKSByZXR1cm4gITE7XG4gICAgICAgICAgICByZXR1cm4gITA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICExO1xuICAgIH0oZSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jb21wdXRlRGlzdHJpYnV0ZWROb3JtYWxGb3JtKGUpIHtcbiAgICBpZiAoX19QUklWQVRFX2hhcmRBc3NlcnQoZSBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyIHx8IGUgaW5zdGFuY2VvZiBDb21wb3NpdGVGaWx0ZXIpLCBcbiAgICBlIGluc3RhbmNlb2YgRmllbGRGaWx0ZXIpIHJldHVybiBlO1xuICAgIGlmICgxID09PSBlLmZpbHRlcnMubGVuZ3RoKSByZXR1cm4gX19QUklWQVRFX2NvbXB1dGVEaXN0cmlidXRlZE5vcm1hbEZvcm0oZS5maWx0ZXJzWzBdKTtcbiAgICAvLyBDb21wdXRlIERORiBmb3IgZWFjaCBvZiB0aGUgc3ViZmlsdGVycyBmaXJzdFxuICAgICAgICBjb25zdCB0ID0gZS5maWx0ZXJzLm1hcCgoZSA9PiBfX1BSSVZBVEVfY29tcHV0ZURpc3RyaWJ1dGVkTm9ybWFsRm9ybShlKSkpO1xuICAgIGxldCBuID0gQ29tcG9zaXRlRmlsdGVyLmNyZWF0ZSh0LCBlLm9wKTtcbiAgICByZXR1cm4gbiA9IF9fUFJJVkFURV9hcHBseUFzc29jaWF0aW9uKG4pLCBfX1BSSVZBVEVfaXNEaXNqdW5jdGl2ZU5vcm1hbEZvcm0obikgPyBuIDogKF9fUFJJVkFURV9oYXJkQXNzZXJ0KG4gaW5zdGFuY2VvZiBDb21wb3NpdGVGaWx0ZXIpLCBcbiAgICBfX1BSSVZBVEVfaGFyZEFzc2VydChfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVySXNDb25qdW5jdGlvbihuKSksIF9fUFJJVkFURV9oYXJkQXNzZXJ0KG4uZmlsdGVycy5sZW5ndGggPiAxKSwgXG4gICAgbi5maWx0ZXJzLnJlZHVjZSgoKGUsIHQpID0+IF9fUFJJVkFURV9hcHBseURpc3RyaWJ1dGlvbihlLCB0KSkpKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2FwcGx5RGlzdHJpYnV0aW9uKGUsIHQpIHtcbiAgICBsZXQgbjtcbiAgICByZXR1cm4gX19QUklWQVRFX2hhcmRBc3NlcnQoZSBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyIHx8IGUgaW5zdGFuY2VvZiBDb21wb3NpdGVGaWx0ZXIpLCBcbiAgICBfX1BSSVZBVEVfaGFyZEFzc2VydCh0IGluc3RhbmNlb2YgRmllbGRGaWx0ZXIgfHwgdCBpbnN0YW5jZW9mIENvbXBvc2l0ZUZpbHRlciksIFxuICAgIC8vIEZpZWxkRmlsdGVyIEZpZWxkRmlsdGVyXG4gICAgbiA9IGUgaW5zdGFuY2VvZiBGaWVsZEZpbHRlciA/IHQgaW5zdGFuY2VvZiBGaWVsZEZpbHRlciA/IGZ1bmN0aW9uIF9fUFJJVkFURV9hcHBseURpc3RyaWJ1dGlvbkZpZWxkRmlsdGVycyhlLCB0KSB7XG4gICAgICAgIC8vIENvbmp1bmN0aW9uIGRpc3RyaWJ1dGlvbiBmb3IgdHdvIGZpZWxkIGZpbHRlcnMgaXMgdGhlIGNvbmp1bmN0aW9uIG9mIHRoZW0uXG4gICAgICAgIHJldHVybiBDb21wb3NpdGVGaWx0ZXIuY3JlYXRlKFsgZSwgdCBdLCBcImFuZFwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLkFORCAqLyk7XG4gICAgfShlLCB0KSA6IF9fUFJJVkFURV9hcHBseURpc3RyaWJ1dGlvbkZpZWxkQW5kQ29tcG9zaXRlRmlsdGVycyhlLCB0KSA6IHQgaW5zdGFuY2VvZiBGaWVsZEZpbHRlciA/IF9fUFJJVkFURV9hcHBseURpc3RyaWJ1dGlvbkZpZWxkQW5kQ29tcG9zaXRlRmlsdGVycyh0LCBlKSA6IGZ1bmN0aW9uIF9fUFJJVkFURV9hcHBseURpc3RyaWJ1dGlvbkNvbXBvc2l0ZUZpbHRlcnMoZSwgdCkge1xuICAgICAgICAvLyBUaGVyZSBhcmUgZm91ciBjYXNlczpcbiAgICAgICAgLy8gKEEgJiBCKSAmIChDICYgRCkgLS0+IChBICYgQiAmIEMgJiBEKVxuICAgICAgICAvLyAoQSAmIEIpICYgKEMgfCBEKSAtLT4gKEEgJiBCICYgQykgfCAoQSAmIEIgJiBEKVxuICAgICAgICAvLyAoQSB8IEIpICYgKEMgJiBEKSAtLT4gKEMgJiBEICYgQSkgfCAoQyAmIEQgJiBCKVxuICAgICAgICAvLyAoQSB8IEIpICYgKEMgfCBEKSAtLT4gKEEgJiBDKSB8IChBICYgRCkgfCAoQiAmIEMpIHwgKEIgJiBEKVxuICAgICAgICAvLyBDYXNlIDEgaXMgYSBtZXJnZS5cbiAgICAgICAgaWYgKF9fUFJJVkFURV9oYXJkQXNzZXJ0KGUuZmlsdGVycy5sZW5ndGggPiAwICYmIHQuZmlsdGVycy5sZW5ndGggPiAwKSwgX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzQ29uanVuY3Rpb24oZSkgJiYgX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzQ29uanVuY3Rpb24odCkpIHJldHVybiBfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVyV2l0aEFkZGVkRmlsdGVycyhlLCB0LmdldEZpbHRlcnMoKSk7XG4gICAgICAgIC8vIENhc2UgMiwzLDQgYWxsIGhhdmUgYXQgbGVhc3Qgb25lIHNpZGUgKGxocyBvciByaHMpIHRoYXQgaXMgYSBkaXNqdW5jdGlvbi4gSW4gYWxsIHRocmVlIGNhc2VzXG4gICAgICAgIC8vIHdlIHNob3VsZCB0YWtlIGVhY2ggZWxlbWVudCBvZiB0aGUgZGlzanVuY3Rpb24gYW5kIGRpc3RyaWJ1dGUgaXQgb3ZlciB0aGUgb3RoZXIgc2lkZSwgYW5kXG4gICAgICAgIC8vIHJldHVybiB0aGUgZGlzanVuY3Rpb24gb2YgdGhlIGRpc3RyaWJ1dGlvbiByZXN1bHRzLlxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVySXNEaXNqdW5jdGlvbihlKSA/IGUgOiB0LCByID0gX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzRGlzanVuY3Rpb24oZSkgPyB0IDogZSwgaSA9IG4uZmlsdGVycy5tYXAoKGUgPT4gX19QUklWQVRFX2FwcGx5RGlzdHJpYnV0aW9uKGUsIHIpKSk7XG4gICAgICAgIHJldHVybiBDb21wb3NpdGVGaWx0ZXIuY3JlYXRlKGksIFwib3JcIiAvKiBDb21wb3NpdGVPcGVyYXRvci5PUiAqLyk7XG4gICAgfShlLCB0KSwgX19QUklWQVRFX2FwcGx5QXNzb2NpYXRpb24obik7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9hcHBseURpc3RyaWJ1dGlvbkZpZWxkQW5kQ29tcG9zaXRlRmlsdGVycyhlLCB0KSB7XG4gICAgLy8gVGhlcmUgYXJlIHR3byBjYXNlczpcbiAgICAvLyBBICYgKEIgJiBDKSAtLT4gKEEgJiBCICYgQylcbiAgICAvLyBBICYgKEIgfCBDKSAtLT4gKEEgJiBCKSB8IChBICYgQylcbiAgICBpZiAoX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzQ29uanVuY3Rpb24odCkpIFxuICAgIC8vIENhc2UgMVxuICAgIHJldHVybiBfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVyV2l0aEFkZGVkRmlsdGVycyh0LCBlLmdldEZpbHRlcnMoKSk7XG4gICAge1xuICAgICAgICAvLyBDYXNlIDJcbiAgICAgICAgY29uc3QgbiA9IHQuZmlsdGVycy5tYXAoKHQgPT4gX19QUklWQVRFX2FwcGx5RGlzdHJpYnV0aW9uKGUsIHQpKSk7XG4gICAgICAgIHJldHVybiBDb21wb3NpdGVGaWx0ZXIuY3JlYXRlKG4sIFwib3JcIiAvKiBDb21wb3NpdGVPcGVyYXRvci5PUiAqLyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEFwcGxpZXMgdGhlIGFzc29jaWF0aXZpdHkgcHJvcGVydHkgdG8gdGhlIGdpdmVuIGZpbHRlciBhbmQgcmV0dXJucyB0aGUgcmVzdWx0aW5nIGZpbHRlci5cbiAqXG4gKiA8dWw+XG4gKiAgIDxsaT5BIHwgKEIgfCBDKSA9PSAoQSB8IEIpIHwgQyA9PSAoQSB8IEIgfCBDKVxuICogICA8bGk+QSAmIChCICYgQykgPT0gKEEgJiBCKSAmIEMgPT0gKEEgJiBCICYgQylcbiAqIDwvdWw+XG4gKlxuICogPHA+Rm9yIG1vcmUgaW5mbywgdmlzaXQ6IGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Fzc29jaWF0aXZlX3Byb3BlcnR5I1Byb3Bvc2l0aW9uYWxfbG9naWNcbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfYXBwbHlBc3NvY2lhdGlvbihlKSB7XG4gICAgaWYgKF9fUFJJVkFURV9oYXJkQXNzZXJ0KGUgaW5zdGFuY2VvZiBGaWVsZEZpbHRlciB8fCBlIGluc3RhbmNlb2YgQ29tcG9zaXRlRmlsdGVyKSwgXG4gICAgZSBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyKSByZXR1cm4gZTtcbiAgICBjb25zdCB0ID0gZS5nZXRGaWx0ZXJzKCk7XG4gICAgLy8gSWYgdGhlIGNvbXBvc2l0ZSBmaWx0ZXIgb25seSBjb250YWlucyAxIGZpbHRlciwgYXBwbHkgYXNzb2NpYXRpdml0eSB0byBpdC5cbiAgICAgICAgaWYgKDEgPT09IHQubGVuZ3RoKSByZXR1cm4gX19QUklWQVRFX2FwcGx5QXNzb2NpYXRpb24odFswXSk7XG4gICAgLy8gQXNzb2NpYXRpdml0eSBhcHBsaWVkIHRvIGEgZmxhdCBjb21wb3NpdGUgZmlsdGVyIHJlc3VsdHMgaXMgaXRzZWxmLlxuICAgICAgICBpZiAoX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzRmxhdChlKSkgcmV0dXJuIGU7XG4gICAgLy8gRmlyc3QgYXBwbHkgYXNzb2NpYXRpdml0eSB0byBhbGwgc3ViZmlsdGVycy4gVGhpcyB3aWxsIGluIHR1cm4gcmVjdXJzaXZlbHkgYXBwbHlcbiAgICAvLyBhc3NvY2lhdGl2aXR5IHRvIGFsbCBuZXN0ZWQgY29tcG9zaXRlIGZpbHRlcnMgYW5kIGZpZWxkIGZpbHRlcnMuXG4gICAgICAgIGNvbnN0IG4gPSB0Lm1hcCgoZSA9PiBfX1BSSVZBVEVfYXBwbHlBc3NvY2lhdGlvbihlKSkpLCByID0gW107XG4gICAgLy8gRm9yIGNvbXBvc2l0ZSBzdWJmaWx0ZXJzIHRoYXQgcGVyZm9ybSB0aGUgc2FtZSBraW5kIG9mIGxvZ2ljYWwgb3BlcmF0aW9uIGFzIGBjb21wb3NpdGVGaWx0ZXJgXG4gICAgLy8gdGFrZSBvdXQgdGhlaXIgZmlsdGVycyBhbmQgYWRkIHRoZW0gdG8gYGNvbXBvc2l0ZUZpbHRlcmAuIEZvciBleGFtcGxlOlxuICAgIC8vIGNvbXBvc2l0ZUZpbHRlciA9IChBIHwgKEIgfCBDIHwgRCkpXG4gICAgLy8gY29tcG9zaXRlU3ViZmlsdGVyID0gKEIgfCBDIHwgRClcbiAgICAvLyBSZXN1bHQ6IChBIHwgQiB8IEMgfCBEKVxuICAgIC8vIE5vdGUgdGhhdCB0aGUgYGNvbXBvc2l0ZVN1YmZpbHRlcmAgaGFzIGJlZW4gZWxpbWluYXRlZCwgYW5kIGl0cyBmaWx0ZXJzIChCLCBDLCBEKSBoYXZlIGJlZW5cbiAgICAvLyBhZGRlZCB0byB0aGUgdG9wLWxldmVsIFwiY29tcG9zaXRlRmlsdGVyXCIuXG4gICAgICAgIHJldHVybiBuLmZvckVhY2goKHQgPT4ge1xuICAgICAgICB0IGluc3RhbmNlb2YgRmllbGRGaWx0ZXIgPyByLnB1c2godCkgOiB0IGluc3RhbmNlb2YgQ29tcG9zaXRlRmlsdGVyICYmICh0Lm9wID09PSBlLm9wID8gXG4gICAgICAgIC8vIGNvbXBvc2l0ZUZpbHRlcjogKEEgfCAoQiB8IEMpKVxuICAgICAgICAvLyBjb21wb3NpdGVTdWJmaWx0ZXI6IChCIHwgQylcbiAgICAgICAgLy8gUmVzdWx0OiAoQSB8IEIgfCBDKVxuICAgICAgICByLnB1c2goLi4udC5maWx0ZXJzKSA6IFxuICAgICAgICAvLyBjb21wb3NpdGVGaWx0ZXI6IChBIHwgKEIgJiBDKSlcbiAgICAgICAgLy8gY29tcG9zaXRlU3ViZmlsdGVyOiAoQiAmIEMpXG4gICAgICAgIC8vIFJlc3VsdDogKEEgfCAoQiAmIEMpKVxuICAgICAgICByLnB1c2godCkpO1xuICAgIH0pKSwgMSA9PT0gci5sZW5ndGggPyByWzBdIDogQ29tcG9zaXRlRmlsdGVyLmNyZWF0ZShyLCBlLm9wKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gaW4tbWVtb3J5IGltcGxlbWVudGF0aW9uIG9mIEluZGV4TWFuYWdlci5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfTWVtb3J5SW5kZXhNYW5hZ2VyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5fbiA9IG5ldyBfX1BSSVZBVEVfTWVtb3J5Q29sbGVjdGlvblBhcmVudEluZGV4O1xuICAgIH1cbiAgICBhZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleChlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9uLmFkZCh0KSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0Q29sbGVjdGlvblBhcmVudHMoZSwgdCkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5fbi5nZXRFbnRyaWVzKHQpKTtcbiAgICB9XG4gICAgYWRkRmllbGRJbmRleChlLCB0KSB7XG4gICAgICAgIC8vIEZpZWxkIGluZGljZXMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aCBtZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBkZWxldGVGaWVsZEluZGV4KGUsIHQpIHtcbiAgICAgICAgLy8gRmllbGQgaW5kaWNlcyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIG1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGRlbGV0ZUFsbEZpZWxkSW5kZXhlcyhlKSB7XG4gICAgICAgIC8vIEZpZWxkIGluZGljZXMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aCBtZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBjcmVhdGVUYXJnZXRJbmRleGVzKGUsIHQpIHtcbiAgICAgICAgLy8gRmllbGQgaW5kaWNlcyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIG1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldERvY3VtZW50c01hdGNoaW5nVGFyZ2V0KGUsIHQpIHtcbiAgICAgICAgLy8gRmllbGQgaW5kaWNlcyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIG1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuICAgIH1cbiAgICBnZXRJbmRleFR5cGUoZSwgdCkge1xuICAgICAgICAvLyBGaWVsZCBpbmRpY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoMCAvKiBJbmRleFR5cGUuTk9ORSAqLyk7XG4gICAgfVxuICAgIGdldEZpZWxkSW5kZXhlcyhlLCB0KSB7XG4gICAgICAgIC8vIEZpZWxkIGluZGljZXMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aCBtZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShbXSk7XG4gICAgfVxuICAgIGdldE5leHRDb2xsZWN0aW9uR3JvdXBUb1VwZGF0ZShlKSB7XG4gICAgICAgIC8vIEZpZWxkIGluZGljZXMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aCBtZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgICB9XG4gICAgZ2V0TWluT2Zmc2V0KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKEluZGV4T2Zmc2V0Lm1pbigpKTtcbiAgICB9XG4gICAgZ2V0TWluT2Zmc2V0RnJvbUNvbGxlY3Rpb25Hcm91cChlLCB0KSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShJbmRleE9mZnNldC5taW4oKSk7XG4gICAgfVxuICAgIHVwZGF0ZUNvbGxlY3Rpb25Hcm91cChlLCB0LCBuKSB7XG4gICAgICAgIC8vIEZpZWxkIGluZGljZXMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aCBtZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICB1cGRhdGVJbmRleEVudHJpZXMoZSwgdCkge1xuICAgICAgICAvLyBGaWVsZCBpbmRpY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG59XG5cbi8qKlxuICogSW50ZXJuYWwgaW1wbGVtZW50YXRpb24gb2YgdGhlIGNvbGxlY3Rpb24tcGFyZW50IGluZGV4IGV4cG9zZWQgYnkgTWVtb3J5SW5kZXhNYW5hZ2VyLlxuICogQWxzbyB1c2VkIGZvciBpbi1tZW1vcnkgY2FjaGluZyBieSBJbmRleGVkRGJJbmRleE1hbmFnZXIgYW5kIGluaXRpYWwgaW5kZXggcG9wdWxhdGlvblxuICogaW4gaW5kZXhlZGRiX3NjaGVtYS50c1xuICovIGNsYXNzIF9fUFJJVkFURV9NZW1vcnlDb2xsZWN0aW9uUGFyZW50SW5kZXgge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmluZGV4ID0ge307XG4gICAgfVxuICAgIC8vIFJldHVybnMgZmFsc2UgaWYgdGhlIGVudHJ5IGFscmVhZHkgZXhpc3RlZC5cbiAgICBhZGQoZSkge1xuICAgICAgICBjb25zdCB0ID0gZS5sYXN0U2VnbWVudCgpLCBuID0gZS5wb3BMYXN0KCksIHIgPSB0aGlzLmluZGV4W3RdIHx8IG5ldyBTb3J0ZWRTZXQoUmVzb3VyY2VQYXRoLmNvbXBhcmF0b3IpLCBpID0gIXIuaGFzKG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleFt0XSA9IHIuYWRkKG4pLCBpO1xuICAgIH1cbiAgICBoYXMoZSkge1xuICAgICAgICBjb25zdCB0ID0gZS5sYXN0U2VnbWVudCgpLCBuID0gZS5wb3BMYXN0KCksIHIgPSB0aGlzLmluZGV4W3RdO1xuICAgICAgICByZXR1cm4gciAmJiByLmhhcyhuKTtcbiAgICB9XG4gICAgZ2V0RW50cmllcyhlKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5pbmRleFtlXSB8fCBuZXcgU29ydGVkU2V0KFJlc291cmNlUGF0aC5jb21wYXJhdG9yKSkudG9BcnJheSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgZGUgPSBuZXcgVWludDhBcnJheSgwKTtcblxuLyoqXG4gKiBBIHBlcnNpc3RlZCBpbXBsZW1lbnRhdGlvbiBvZiBJbmRleE1hbmFnZXIuXG4gKlxuICogUE9SVElORyBOT1RFOiBVbmxpa2UgaU9TIGFuZCBBbmRyb2lkLCB0aGUgV2ViIFNESyBkb2VzIG5vdCBtZW1vaXplIGluZGV4XG4gKiBkYXRhIGFzIGl0IHN1cHBvcnRzIG11bHRpLXRhYiBhY2Nlc3MuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9JbmRleGVkRGJJbmRleE1hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5kYXRhYmFzZUlkID0gdCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbiBpbi1tZW1vcnkgY29weSBvZiB0aGUgaW5kZXggZW50cmllcyB3ZSd2ZSBhbHJlYWR5IHdyaXR0ZW4gc2luY2UgdGhlIFNES1xuICAgICAgICAgKiBsYXVuY2hlZC4gVXNlZCB0byBhdm9pZCByZS13cml0aW5nIHRoZSBzYW1lIGVudHJ5IHJlcGVhdGVkbHkuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoaXMgaXMgKk5PVCogYSBjb21wbGV0ZSBjYWNoZSBvZiB3aGF0J3MgaW4gcGVyc2lzdGVuY2UgYW5kIHNvIGNhbiBuZXZlciBiZVxuICAgICAgICAgKiB1c2VkIHRvIHNhdGlzZnkgcmVhZHMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmFuID0gbmV3IF9fUFJJVkFURV9NZW1vcnlDb2xsZWN0aW9uUGFyZW50SW5kZXgsIFxuICAgICAgICAvKipcbiAgICAgICAgICogTWFwcyBmcm9tIGEgdGFyZ2V0IHRvIGl0cyBlcXVpdmFsZW50IGxpc3Qgb2Ygc3ViLXRhcmdldHMuIEVhY2ggc3ViLXRhcmdldFxuICAgICAgICAgKiBjb250YWlucyBvbmx5IG9uZSB0ZXJtIGZyb20gdGhlIHRhcmdldCdzIGRpc2p1bmN0aXZlIG5vcm1hbCBmb3JtIChETkYpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy51biA9IG5ldyBPYmplY3RNYXAoKGUgPT4gX19QUklWQVRFX2Nhbm9uaWZ5VGFyZ2V0KGUpKSwgKChlLCB0KSA9PiBfX1BSSVZBVEVfdGFyZ2V0RXF1YWxzKGUsIHQpKSksIFxuICAgICAgICB0aGlzLnVpZCA9IGUudWlkIHx8IFwiXCI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBuZXcgZW50cnkgdG8gdGhlIGNvbGxlY3Rpb24gcGFyZW50IGluZGV4LlxuICAgICAqXG4gICAgICogUmVwZWF0ZWQgY2FsbHMgZm9yIHRoZSBzYW1lIGNvbGxlY3Rpb25QYXRoIHNob3VsZCBiZSBhdm9pZGVkIHdpdGhpbiBhXG4gICAgICogdHJhbnNhY3Rpb24gYXMgSW5kZXhlZERiSW5kZXhNYW5hZ2VyIG9ubHkgY2FjaGVzIHdyaXRlcyBvbmNlIGEgdHJhbnNhY3Rpb25cbiAgICAgKiBoYXMgYmVlbiBjb21taXR0ZWQuXG4gICAgICovICAgIGFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KGUsIHQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmFuLmhhcyh0KSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQubGFzdFNlZ21lbnQoKSwgciA9IHQucG9wTGFzdCgpO1xuICAgICAgICAgICAgZS5hZGRPbkNvbW1pdHRlZExpc3RlbmVyKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBjb2xsZWN0aW9uIHRvIHRoZSBpbiBtZW1vcnkgY2FjaGUgb25seSBpZiB0aGUgdHJhbnNhY3Rpb24gd2FzXG4gICAgICAgICAgICAgICAgLy8gc3VjY2Vzc2Z1bGx5IGNvbW1pdHRlZC5cbiAgICAgICAgICAgICAgICB0aGlzLmFuLmFkZCh0KTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB7XG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbklkOiBuLFxuICAgICAgICAgICAgICAgIHBhcmVudDogX19QUklWQVRFX2VuY29kZVJlc291cmNlUGF0aChyKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfY29sbGVjdGlvblBhcmVudHNTdG9yZShlKS5wdXQoaSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldENvbGxlY3Rpb25QYXJlbnRzKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IFtdLCByID0gSURCS2V5UmFuZ2UuYm91bmQoWyB0LCBcIlwiIF0sIFsgX19QUklWQVRFX2ltbWVkaWF0ZVN1Y2Nlc3Nvcih0KSwgXCJcIiBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfY29sbGVjdGlvblBhcmVudHNTdG9yZShlKS5VKHIpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCByIG9mIGUpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGNvbGxlY3Rpb25JZCBndWFyZCBzaG91bGRuJ3QgYmUgbmVjZXNzYXJ5IChhbmQgaXNuJ3QgYXMgbG9uZ1xuICAgICAgICAgICAgICAgIC8vIGFzIHdlJ3JlIHJ1bm5pbmcgaW4gYSByZWFsIGJyb3dzZXIpLCBidXQgdGhlcmUncyBhIGJ1ZyBpblxuICAgICAgICAgICAgICAgIC8vIGluZGV4ZWRkYnNoaW0gdGhhdCBicmVha3Mgb3VyIHJhbmdlIGluIG91ciB0ZXN0cyBydW5uaW5nIGluIG5vZGU6XG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2F4ZW1jbGlvbi9JbmRleGVkREJTaGltL2lzc3Vlcy8zMzRcbiAgICAgICAgICAgICAgICBpZiAoci5jb2xsZWN0aW9uSWQgIT09IHQpIGJyZWFrO1xuICAgICAgICAgICAgICAgIG4ucHVzaChfX1BSSVZBVEVfZGVjb2RlUmVzb3VyY2VQYXRoKHIucGFyZW50KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbjtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBhZGRGaWVsZEluZGV4KGUsIHQpIHtcbiAgICAgICAgLy8gVE9ETyhpbmRleGluZyk6IFZlcmlmeSB0aGF0IHRoZSBhdXRvLWluY3JlbWVudGluZyBpbmRleCBJRCB3b3JrcyBpblxuICAgICAgICAvLyBTYWZhcmkgJiBGaXJlZm94LlxuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2luZGV4Q29uZmlndXJhdGlvblN0b3JlKGUpLCByID0gZnVuY3Rpb24gX19QUklWQVRFX3RvRGJJbmRleENvbmZpZ3VyYXRpb24oZSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpbmRleElkOiBlLmluZGV4SWQsXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbkdyb3VwOiBlLmNvbGxlY3Rpb25Hcm91cCxcbiAgICAgICAgICAgICAgICBmaWVsZHM6IGUuZmllbGRzLm1hcCgoZSA9PiBbIGUuZmllbGRQYXRoLmNhbm9uaWNhbFN0cmluZygpLCBlLmtpbmQgXSkpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KHQpO1xuICAgICAgICBkZWxldGUgci5pbmRleElkO1xuICAgICAgICAvLyBgaW5kZXhJZGAgaXMgYXV0by1wb3B1bGF0ZWQgYnkgSW5kZXhlZERiXG4gICAgICAgIGNvbnN0IGkgPSBuLmFkZChyKTtcbiAgICAgICAgaWYgKHQuaW5kZXhTdGF0ZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9pbmRleFN0YXRlU3RvcmUoZSk7XG4gICAgICAgICAgICByZXR1cm4gaS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICBuLnB1dChfX1BSSVZBVEVfdG9EYkluZGV4U3RhdGUoZSwgdGhpcy51aWQsIHQuaW5kZXhTdGF0ZS5zZXF1ZW5jZU51bWJlciwgdC5pbmRleFN0YXRlLm9mZnNldCkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpLm5leHQoKTtcbiAgICB9XG4gICAgZGVsZXRlRmllbGRJbmRleChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfaW5kZXhDb25maWd1cmF0aW9uU3RvcmUoZSksIHIgPSBfX1BSSVZBVEVfaW5kZXhTdGF0ZVN0b3JlKGUpLCBpID0gX19QUklWQVRFX2luZGV4RW50cmllc1N0b3JlKGUpO1xuICAgICAgICByZXR1cm4gbi5kZWxldGUodC5pbmRleElkKS5uZXh0KCgoKSA9PiByLmRlbGV0ZShJREJLZXlSYW5nZS5ib3VuZChbIHQuaW5kZXhJZCBdLCBbIHQuaW5kZXhJZCArIDEgXSwgXG4gICAgICAgIC8qbG93ZXJPcGVuPSovICExLCBcbiAgICAgICAgLyp1cHBlck9wZW49Ki8gITApKSkpLm5leHQoKCgpID0+IGkuZGVsZXRlKElEQktleVJhbmdlLmJvdW5kKFsgdC5pbmRleElkIF0sIFsgdC5pbmRleElkICsgMSBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCkpKSk7XG4gICAgfVxuICAgIGRlbGV0ZUFsbEZpZWxkSW5kZXhlcyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfaW5kZXhDb25maWd1cmF0aW9uU3RvcmUoZSksIG4gPSBfX1BSSVZBVEVfaW5kZXhFbnRyaWVzU3RvcmUoZSksIHIgPSBfX1BSSVZBVEVfaW5kZXhTdGF0ZVN0b3JlKGUpO1xuICAgICAgICByZXR1cm4gdC5qKCkubmV4dCgoKCkgPT4gbi5qKCkpKS5uZXh0KCgoKSA9PiByLmooKSkpO1xuICAgIH1cbiAgICBjcmVhdGVUYXJnZXRJbmRleGVzKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHRoaXMuY24odCksICh0ID0+IHRoaXMuZ2V0SW5kZXhUeXBlKGUsIHQpLm5leHQoKG4gPT4ge1xuICAgICAgICAgICAgaWYgKDAgLyogSW5kZXhUeXBlLk5PTkUgKi8gPT09IG4gfHwgMSAvKiBJbmRleFR5cGUuUEFSVElBTCAqLyA9PT0gbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgX19QUklWQVRFX1RhcmdldEluZGV4TWF0Y2hlcih0KS5vbigpO1xuICAgICAgICAgICAgICAgIGlmIChudWxsICE9IG4pIHJldHVybiB0aGlzLmFkZEZpZWxkSW5kZXgoZSwgbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSkpO1xuICAgIH1cbiAgICBnZXREb2N1bWVudHNNYXRjaGluZ1RhcmdldChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfaW5kZXhFbnRyaWVzU3RvcmUoZSk7XG4gICAgICAgIGxldCByID0gITA7XG4gICAgICAgIGNvbnN0IGkgPSBuZXcgTWFwO1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godGhpcy5jbih0KSwgKHQgPT4gdGhpcy5sbihlLCB0KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIHIgJiYgKHIgPSAhIWUpLCBpLnNldCh0LCBlKTtcbiAgICAgICAgfSkpKSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHIpIHtcbiAgICAgICAgICAgICAgICBsZXQgZSA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBbXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2goaSwgKChpLCBzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkluZGV4ZWREYkluZGV4TWFuYWdlclwiLCBgVXNpbmcgaW5kZXggJHtmdW5jdGlvbiBfX1BSSVZBVEVfZmllbGRJbmRleFRvU3RyaW5nKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgaWQ9JHtlLmluZGV4SWR9fGNnPSR7ZS5jb2xsZWN0aW9uR3JvdXB9fGY9JHtlLmZpZWxkcy5tYXAoKGUgPT4gYCR7ZS5maWVsZFBhdGh9OiR7ZS5raW5kfWApKS5qb2luKFwiLFwiKX1gO1xuICAgICAgICAgICAgICAgICAgICB9KGkpfSB0byBleGVjdXRlICR7X19QUklWQVRFX2Nhbm9uaWZ5VGFyZ2V0KHQpfWApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvID0gZnVuY3Rpb24gX19QUklWQVRFX3RhcmdldEdldEFycmF5VmFsdWVzKGUsIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZmllbGRJbmRleEdldEFycmF5U2VnbWVudCh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IG4pIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIF9fUFJJVkFURV90YXJnZXRHZXRGaWVsZEZpbHRlcnNGb3JQYXRoKGUsIG4uZmllbGRQYXRoKSkgc3dpdGNoICh0Lm9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkgKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LnZhbHVlLmFycmF5VmFsdWUudmFsdWVzIHx8IFtdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJhcnJheS1jb250YWluc1wiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyB0LnZhbHVlIF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVtYWluaW5nIGZpbHRlcnMgYXJlIG5vdCBhcnJheSBmaWx0ZXJzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gKiBSZXR1cm5zIHRoZSBsaXN0IG9mIHZhbHVlcyB0aGF0IGFyZSB1c2VkIGluICE9IG9yIE5PVF9JTiBmaWx0ZXJzLiBSZXR1cm5zXG4gKiBgbnVsbGAgaWYgdGhlcmUgYXJlIG5vIHN1Y2ggZmlsdGVycy5cbiAqLyAocywgaSksIF8gPSBmdW5jdGlvbiBfX1BSSVZBVEVfdGFyZ2V0R2V0Tm90SW5WYWx1ZXMoZSwgdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IG5ldyBNYXA7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHIgb2YgX19QUklWQVRFX2ZpZWxkSW5kZXhHZXREaXJlY3Rpb25hbFNlZ21lbnRzKHQpKSBmb3IgKGNvbnN0IHQgb2YgX19QUklWQVRFX3RhcmdldEdldEZpZWxkRmlsdGVyc0ZvclBhdGgoZSwgci5maWVsZFBhdGgpKSBzd2l0Y2ggKHQub3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIj09XCIgLyogT3BlcmF0b3IuRVFVQUwgKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRW5jb2RlIGVxdWFsaXR5IHByZWZpeCwgd2hpY2ggaXMgZW5jb2RlZCBpbiB0aGUgaW5kZXggdmFsdWUgYmVmb3JlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGluZXF1YWxpdHkgKGUuZy4gYGEgPT0gJ2EnICYmIGIgIT0gJ2InYCBpcyBlbmNvZGVkIHRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYHZhbHVlICE9ICdhYidgKS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnNldChyLmZpZWxkUGF0aC5jYW5vbmljYWxTdHJpbmcoKSwgdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90SW4vTm90RXF1YWwgaXMgYWx3YXlzIGEgc3VmZml4LiBUaGVyZSBjYW5ub3QgYmUgYW55IHJlbWFpbmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlZ21lbnRzIGFuZCBoZW5jZSB3ZSBjYW4gcmV0dXJuIGVhcmx5IGhlcmUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uc2V0KHIuZmllbGRQYXRoLmNhbm9uaWNhbFN0cmluZygpLCB0LnZhbHVlKSwgQXJyYXkuZnJvbShuLnZhbHVlcygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW1haW5pbmcgZmlsdGVycyBjYW5ub3QgYmUgdXNlZCBhcyBub3RJbiBib3VuZHMuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvKipcbiAqIFJldHVybnMgYSBsb3dlciBib3VuZCBvZiBmaWVsZCB2YWx1ZXMgdGhhdCBjYW4gYmUgdXNlZCBhcyBhIHN0YXJ0aW5nIHBvaW50IHRvXG4gKiBzY2FuIHRoZSBpbmRleCBkZWZpbmVkIGJ5IGBmaWVsZEluZGV4YC4gUmV0dXJucyBgTUlOX1ZBTFVFYCBpZiBubyBsb3dlciBib3VuZFxuICogZXhpc3RzLlxuICovIChzLCBpKSwgYSA9IGZ1bmN0aW9uIF9fUFJJVkFURV90YXJnZXRHZXRMb3dlckJvdW5kKGUsIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByID0gITA7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3IgZWFjaCBzZWdtZW50LCByZXRyaWV2ZSBhIGxvd2VyIGJvdW5kIGlmIHRoZXJlIGlzIGEgc3VpdGFibGUgZmlsdGVyIG9yXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzdGFydEF0LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBpIG9mIF9fUFJJVkFURV9maWVsZEluZGV4R2V0RGlyZWN0aW9uYWxTZWdtZW50cyh0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSAwIC8qIEluZGV4S2luZC5BU0NFTkRJTkcgKi8gPT09IGkua2luZCA/IF9fUFJJVkFURV90YXJnZXRHZXRBc2NlbmRpbmdCb3VuZChlLCBpLmZpZWxkUGF0aCwgZS5zdGFydEF0KSA6IF9fUFJJVkFURV90YXJnZXRHZXREZXNjZW5kaW5nQm91bmQoZSwgaS5maWVsZFBhdGgsIGUuc3RhcnRBdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5wdXNoKHQudmFsdWUpLCByICYmIChyID0gdC5pbmNsdXNpdmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBCb3VuZChuLCByKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvKipcbiAqIFJldHVybnMgYW4gdXBwZXIgYm91bmQgb2YgZmllbGQgdmFsdWVzIHRoYXQgY2FuIGJlIHVzZWQgYXMgYW4gZW5kaW5nIHBvaW50XG4gKiB3aGVuIHNjYW5uaW5nIHRoZSBpbmRleCBkZWZpbmVkIGJ5IGBmaWVsZEluZGV4YC4gUmV0dXJucyBgTUFYX1ZBTFVFYCBpZiBub1xuICogdXBwZXIgYm91bmQgZXhpc3RzLlxuICovIChzLCBpKSwgdSA9IGZ1bmN0aW9uIF9fUFJJVkFURV90YXJnZXRHZXRVcHBlckJvdW5kKGUsIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByID0gITA7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3IgZWFjaCBzZWdtZW50LCByZXRyaWV2ZSBhbiB1cHBlciBib3VuZCBpZiB0aGVyZSBpcyBhIHN1aXRhYmxlIGZpbHRlciBvclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZW5kQXQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGkgb2YgX19QUklWQVRFX2ZpZWxkSW5kZXhHZXREaXJlY3Rpb25hbFNlZ21lbnRzKHQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IDAgLyogSW5kZXhLaW5kLkFTQ0VORElORyAqLyA9PT0gaS5raW5kID8gX19QUklWQVRFX3RhcmdldEdldERlc2NlbmRpbmdCb3VuZChlLCBpLmZpZWxkUGF0aCwgZS5lbmRBdCkgOiBfX1BSSVZBVEVfdGFyZ2V0R2V0QXNjZW5kaW5nQm91bmQoZSwgaS5maWVsZFBhdGgsIGUuZW5kQXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4ucHVzaCh0LnZhbHVlKSwgciAmJiAociA9IHQuaW5jbHVzaXZlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQm91bmQobiwgcik7XG4gICAgICAgICAgICAgICAgICAgIH0ocywgaSksIGMgPSB0aGlzLmhuKGksIHMsIGEpLCBsID0gdGhpcy5obihpLCBzLCB1KSwgaCA9IHRoaXMuUG4oaSwgcywgXyksIFAgPSB0aGlzLkluKGkuaW5kZXhJZCwgbywgYywgYS5pbmNsdXNpdmUsIGwsIHUuaW5jbHVzaXZlLCBoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKFAsIChpID0+IG4uRyhpLCB0LmxpbWl0KS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHQuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IERvY3VtZW50S2V5LmZyb21TZWdtZW50cyh0LmRvY3VtZW50S2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmhhcyhuKSB8fCAoZSA9IGUuYWRkKG4pLCByLnB1c2gobikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICB9KSkpKTtcbiAgICAgICAgICAgICAgICB9KSkubmV4dCgoKCkgPT4gcikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGNuKGUpIHtcbiAgICAgICAgbGV0IHQgPSB0aGlzLnVuLmdldChlKTtcbiAgICAgICAgaWYgKHQpIHJldHVybiB0O1xuICAgICAgICBpZiAoMCA9PT0gZS5maWx0ZXJzLmxlbmd0aCkgdCA9IFsgZSBdOyBlbHNlIHtcbiAgICAgICAgICAgIHQgPSBfX1BSSVZBVEVfZ2V0RG5mVGVybXMoQ29tcG9zaXRlRmlsdGVyLmNyZWF0ZShlLmZpbHRlcnMsIFwiYW5kXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuQU5EICovKSkubWFwKCh0ID0+IF9fUFJJVkFURV9uZXdUYXJnZXQoZS5wYXRoLCBlLmNvbGxlY3Rpb25Hcm91cCwgZS5vcmRlckJ5LCB0LmdldEZpbHRlcnMoKSwgZS5saW1pdCwgZS5zdGFydEF0LCBlLmVuZEF0KSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnVuLnNldChlLCB0KSwgdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhIGtleSByYW5nZSBxdWVyeSBvbiBgRGJJbmRleEVudHJ5U3RvcmVgIHRoYXQgdW5pb25zIGFsbFxuICAgICAqIGJvdW5kcy5cbiAgICAgKi8gICAgSW4oZSwgdCwgbiwgciwgaSwgcywgbykge1xuICAgICAgICAvLyBUaGUgbnVtYmVyIG9mIHRvdGFsIGluZGV4IHNjYW5zIHdlIHVuaW9uIHRvZ2V0aGVyLiBUaGlzIGlzIHNpbWlsYXIgdG8gYVxuICAgICAgICAvLyBkaXN0cmlidXRlZCBub3JtYWwgZm9ybSwgYnV0IGFkYXB0ZWQgZm9yIGFycmF5IHZhbHVlcy4gV2UgY3JlYXRlIGEgc2luZ2xlXG4gICAgICAgIC8vIGluZGV4IHJhbmdlIHBlciB2YWx1ZSBpbiBhbiBBUlJBWV9DT05UQUlOUyBvciBBUlJBWV9DT05UQUlOU19BTlkgZmlsdGVyXG4gICAgICAgIC8vIGNvbWJpbmVkIHdpdGggdGhlIHZhbHVlcyBmcm9tIHRoZSBxdWVyeSBib3VuZHMuXG4gICAgICAgIGNvbnN0IF8gPSAobnVsbCAhPSB0ID8gdC5sZW5ndGggOiAxKSAqIE1hdGgubWF4KG4ubGVuZ3RoLCBpLmxlbmd0aCksIGEgPSBfIC8gKG51bGwgIT0gdCA/IHQubGVuZ3RoIDogMSksIHUgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCBfOyArK2MpIHtcbiAgICAgICAgICAgIGNvbnN0IF8gPSB0ID8gdGhpcy5Ubih0W2MgLyBhXSkgOiBkZSwgbCA9IHRoaXMuRW4oZSwgXywgbltjICUgYV0sIHIpLCBoID0gdGhpcy5kbihlLCBfLCBpW2MgJSBhXSwgcyksIFAgPSBvLm1hcCgodCA9PiB0aGlzLkVuKGUsIF8sIHQsIFxuICAgICAgICAgICAgLyogaW5jbHVzaXZlPSAqLyAhMCkpKTtcbiAgICAgICAgICAgIHUucHVzaCguLi50aGlzLmNyZWF0ZVJhbmdlKGwsIGgsIFApKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdTtcbiAgICB9XG4gICAgLyoqIEdlbmVyYXRlcyB0aGUgbG93ZXIgYm91bmQgZm9yIGBhcnJheVZhbHVlYCBhbmQgYGRpcmVjdGlvbmFsVmFsdWVgLiAqLyAgICBFbihlLCB0LCBuLCByKSB7XG4gICAgICAgIGNvbnN0IGkgPSBuZXcgX19QUklWQVRFX0luZGV4RW50cnkoZSwgRG9jdW1lbnRLZXkuZW1wdHkoKSwgdCwgbik7XG4gICAgICAgIHJldHVybiByID8gaSA6IGkuSnQoKTtcbiAgICB9XG4gICAgLyoqIEdlbmVyYXRlcyB0aGUgdXBwZXIgYm91bmQgZm9yIGBhcnJheVZhbHVlYCBhbmQgYGRpcmVjdGlvbmFsVmFsdWVgLiAqLyAgICBkbihlLCB0LCBuLCByKSB7XG4gICAgICAgIGNvbnN0IGkgPSBuZXcgX19QUklWQVRFX0luZGV4RW50cnkoZSwgRG9jdW1lbnRLZXkuZW1wdHkoKSwgdCwgbik7XG4gICAgICAgIHJldHVybiByID8gaS5KdCgpIDogaTtcbiAgICB9XG4gICAgbG4oZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gbmV3IF9fUFJJVkFURV9UYXJnZXRJbmRleE1hdGNoZXIodCksIHIgPSBudWxsICE9IHQuY29sbGVjdGlvbkdyb3VwID8gdC5jb2xsZWN0aW9uR3JvdXAgOiB0LnBhdGgubGFzdFNlZ21lbnQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RmllbGRJbmRleGVzKGUsIHIpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSBpbmRleCB3aXRoIHRoZSBtb3N0IG51bWJlciBvZiBzZWdtZW50cy5cbiAgICAgICAgICAgIGxldCB0ID0gbnVsbDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgciBvZiBlKSB7XG4gICAgICAgICAgICAgICAgbi50bihyKSAmJiAoIXQgfHwgci5maWVsZHMubGVuZ3RoID4gdC5maWVsZHMubGVuZ3RoKSAmJiAodCA9IHIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHQ7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0SW5kZXhUeXBlKGUsIHQpIHtcbiAgICAgICAgbGV0IG4gPSAyIC8qIEluZGV4VHlwZS5GVUxMICovO1xuICAgICAgICBjb25zdCByID0gdGhpcy5jbih0KTtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHIsICh0ID0+IHRoaXMubG4oZSwgdCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBlID8gMCAvKiBJbmRleFR5cGUuTk9ORSAqLyAhPT0gbiAmJiBlLmZpZWxkcy5sZW5ndGggPCBmdW5jdGlvbiBfX1BSSVZBVEVfdGFyZ2V0R2V0U2VnbWVudENvdW50KGUpIHtcbiAgICAgICAgICAgICAgICBsZXQgdCA9IG5ldyBTb3J0ZWRTZXQoRmllbGRQYXRoJDEuY29tcGFyYXRvciksIG4gPSAhMTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHIgb2YgZS5maWx0ZXJzKSBmb3IgKGNvbnN0IGUgb2Ygci5nZXRGbGF0dGVuZWRGaWx0ZXJzKCkpIFxuICAgICAgICAgICAgICAgIC8vIF9fbmFtZV9fIGlzIG5vdCBhbiBleHBsaWNpdCBzZWdtZW50IG9mIGFueSBpbmRleCwgc28gd2UgZG9uJ3QgbmVlZCB0b1xuICAgICAgICAgICAgICAgIC8vIGNvdW50IGl0LlxuICAgICAgICAgICAgICAgIGUuZmllbGQuaXNLZXlGaWVsZCgpIHx8IChcbiAgICAgICAgICAgICAgICAvLyBBUlJBWV9DT05UQUlOUyBvciBBUlJBWV9DT05UQUlOU19BTlkgZmlsdGVycyBtdXN0IGJlIGNvdW50ZWQgc2VwYXJhdGVseS5cbiAgICAgICAgICAgICAgICAvLyBGb3IgaW5zdGFuY2UsIGl0IGlzIHBvc3NpYmxlIHRvIGhhdmUgYW4gaW5kZXggZm9yIFwiYSBBUlJBWSBhIEFTQ1wiLiBFdmVuXG4gICAgICAgICAgICAgICAgLy8gdGhvdWdoIHRoZXNlIGFyZSBvbiB0aGUgc2FtZSBmaWVsZCwgdGhleSBzaG91bGQgYmUgY291bnRlZCBhcyB0d29cbiAgICAgICAgICAgICAgICAvLyBzZXBhcmF0ZSBzZWdtZW50cyBpbiBhbiBpbmRleC5cbiAgICAgICAgICAgICAgICBcImFycmF5LWNvbnRhaW5zXCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlMgKi8gPT09IGUub3AgfHwgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkgKi8gPT09IGUub3AgPyBuID0gITAgOiB0ID0gdC5hZGQoZS5maWVsZCkpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiBlLm9yZGVyQnkpIFxuICAgICAgICAgICAgICAgIC8vIF9fbmFtZV9fIGlzIG5vdCBhbiBleHBsaWNpdCBzZWdtZW50IG9mIGFueSBpbmRleCwgc28gd2UgZG9uJ3QgbmVlZCB0b1xuICAgICAgICAgICAgICAgIC8vIGNvdW50IGl0LlxuICAgICAgICAgICAgICAgIG4uZmllbGQuaXNLZXlGaWVsZCgpIHx8ICh0ID0gdC5hZGQobi5maWVsZCkpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0LnNpemUgKyAobiA/IDEgOiAwKTtcbiAgICAgICAgICAgIH0odCkgJiYgKG4gPSAxIC8qIEluZGV4VHlwZS5QQVJUSUFMICovKSA6IG4gPSAwIC8qIEluZGV4VHlwZS5OT05FICovO1xuICAgICAgICB9KSkpKS5uZXh0KCgoKSA9PiBcbiAgICAgICAgLy8gT1IgcXVlcmllcyBoYXZlIG1vcmUgdGhhbiBvbmUgc3ViLXRhcmdldCAob25lIHN1Yi10YXJnZXQgcGVyIERORiB0ZXJtKS4gV2UgY3VycmVudGx5IGNvbnNpZGVyXG4gICAgICAgIC8vIE9SIHF1ZXJpZXMgdGhhdCBoYXZlIGEgYGxpbWl0YCB0byBoYXZlIGEgcGFydGlhbCBpbmRleC4gRm9yIHN1Y2ggcXVlcmllcyB3ZSBwZXJmb3JtIHNvcnRpbmdcbiAgICAgICAgLy8gYW5kIGFwcGx5IHRoZSBsaW1pdCBpbiBtZW1vcnkgYXMgYSBwb3N0LXByb2Nlc3Npbmcgc3RlcC5cbiAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX3RhcmdldEhhc0xpbWl0KGUpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsICE9PSBlLmxpbWl0O1xuICAgICAgICB9KHQpICYmIHIubGVuZ3RoID4gMSAmJiAyIC8qIEluZGV4VHlwZS5GVUxMICovID09PSBuID8gMSAvKiBJbmRleFR5cGUuUEFSVElBTCAqLyA6IG4pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgYnl0ZSBlbmNvZGVkIGZvcm0gb2YgdGhlIGRpcmVjdGlvbmFsIHZhbHVlcyBpbiB0aGUgZmllbGQgaW5kZXguXG4gICAgICogUmV0dXJucyBgbnVsbGAgaWYgdGhlIGRvY3VtZW50IGRvZXMgbm90IGhhdmUgYWxsIGZpZWxkcyBzcGVjaWZpZWQgaW4gdGhlXG4gICAgICogaW5kZXguXG4gICAgICovICAgIEFuKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBfX1BSSVZBVEVfSW5kZXhCeXRlRW5jb2RlcjtcbiAgICAgICAgZm9yIChjb25zdCByIG9mIF9fUFJJVkFURV9maWVsZEluZGV4R2V0RGlyZWN0aW9uYWxTZWdtZW50cyhlKSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQuZGF0YS5maWVsZChyLmZpZWxkUGF0aCk7XG4gICAgICAgICAgICBpZiAobnVsbCA9PSBlKSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBuLkh0KHIua2luZCk7XG4gICAgICAgICAgICBfX1BSSVZBVEVfRmlyZXN0b3JlSW5kZXhWYWx1ZVdyaXRlci5idC5QdChlLCBpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbi5XdCgpO1xuICAgIH1cbiAgICAvKiogRW5jb2RlcyBhIHNpbmdsZSB2YWx1ZSB0byB0aGUgYXNjZW5kaW5nIGluZGV4IGZvcm1hdC4gKi8gICAgVG4oZSkge1xuICAgICAgICBjb25zdCB0ID0gbmV3IF9fUFJJVkFURV9JbmRleEJ5dGVFbmNvZGVyO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX0ZpcmVzdG9yZUluZGV4VmFsdWVXcml0ZXIuYnQuUHQoZSwgdC5IdCgwIC8qIEluZGV4S2luZC5BU0NFTkRJTkcgKi8pKSwgXG4gICAgICAgIHQuV3QoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBlbmNvZGVkIGZvcm0gb2YgdGhlIGRvY3VtZW50IGtleSB0aGF0IHNvcnRzIGJhc2VkIG9uIHRoZSBrZXlcbiAgICAgKiBvcmRlcmluZyBvZiB0aGUgZmllbGQgaW5kZXguXG4gICAgICovICAgIFJuKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBfX1BSSVZBVEVfSW5kZXhCeXRlRW5jb2RlcjtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9GaXJlc3RvcmVJbmRleFZhbHVlV3JpdGVyLmJ0LlB0KF9fUFJJVkFURV9yZWZWYWx1ZSh0aGlzLmRhdGFiYXNlSWQsIHQpLCBuLkh0KGZ1bmN0aW9uIF9fUFJJVkFURV9maWVsZEluZGV4R2V0S2V5T3JkZXIoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9maWVsZEluZGV4R2V0RGlyZWN0aW9uYWxTZWdtZW50cyhlKTtcbiAgICAgICAgICAgIHJldHVybiAwID09PSB0Lmxlbmd0aCA/IDAgLyogSW5kZXhLaW5kLkFTQ0VORElORyAqLyA6IHRbdC5sZW5ndGggLSAxXS5raW5kO1xuICAgICAgICB9KGUpKSksIG4uV3QoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5jb2RlcyB0aGUgZ2l2ZW4gZmllbGQgdmFsdWVzIGFjY29yZGluZyB0byB0aGUgc3BlY2lmaWNhdGlvbiBpbiBgdGFyZ2V0YC5cbiAgICAgKiBGb3IgSU4gcXVlcmllcywgYSBsaXN0IG9mIHBvc3NpYmxlIHZhbHVlcyBpcyByZXR1cm5lZC5cbiAgICAgKi8gICAgUG4oZSwgdCwgbikge1xuICAgICAgICBpZiAobnVsbCA9PT0gbikgcmV0dXJuIFtdO1xuICAgICAgICBsZXQgciA9IFtdO1xuICAgICAgICByLnB1c2gobmV3IF9fUFJJVkFURV9JbmRleEJ5dGVFbmNvZGVyKTtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IHMgb2YgX19QUklWQVRFX2ZpZWxkSW5kZXhHZXREaXJlY3Rpb25hbFNlZ21lbnRzKGUpKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gbltpKytdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIHIpIGlmICh0aGlzLlZuKHQsIHMuZmllbGRQYXRoKSAmJiBpc0FycmF5KGUpKSByID0gdGhpcy5tbihyLCBzLCBlKTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IG4uSHQocy5raW5kKTtcbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfRmlyZXN0b3JlSW5kZXhWYWx1ZVdyaXRlci5idC5QdChlLCB0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5mbihyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5jb2RlcyB0aGUgZ2l2ZW4gYm91bmRzIGFjY29yZGluZyB0byB0aGUgc3BlY2lmaWNhdGlvbiBpbiBgdGFyZ2V0YC4gRm9yIElOXG4gICAgICogcXVlcmllcywgYSBsaXN0IG9mIHBvc3NpYmxlIHZhbHVlcyBpcyByZXR1cm5lZC5cbiAgICAgKi8gICAgaG4oZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5QbihlLCB0LCBuLnBvc2l0aW9uKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdGhlIGJ5dGUgcmVwcmVzZW50YXRpb24gZm9yIHRoZSBwcm92aWRlZCBlbmNvZGVycy4gKi8gICAgZm4oZSkge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgZS5sZW5ndGg7ICsrbikgdFtuXSA9IGVbbl0uV3QoKTtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBzZXBhcmF0ZSBlbmNvZGVyIGZvciBlYWNoIGVsZW1lbnQgb2YgYW4gYXJyYXkuXG4gICAgICpcbiAgICAgKiBUaGUgbWV0aG9kIGFwcGVuZHMgZWFjaCB2YWx1ZSB0byBhbGwgZXhpc3RpbmcgZW5jb2RlcnMgKGUuZy4gZmlsdGVyKFwiYVwiLFxuICAgICAqIFwiPT1cIiwgXCJhMVwiKS5maWx0ZXIoXCJiXCIsIFwiaW5cIiwgW1wiYjFcIiwgXCJiMlwiXSkgYmVjb21lcyBbXCJhMSxiMVwiLCBcImExLGIyXCJdKS4gQVxuICAgICAqIGxpc3Qgb2YgbmV3IGVuY29kZXJzIGlzIHJldHVybmVkLlxuICAgICAqLyAgICBtbihlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBbIC4uLmUgXSwgaSA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2Ygbi5hcnJheVZhbHVlLnZhbHVlcyB8fCBbXSkgZm9yIChjb25zdCBuIG9mIHIpIHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgX19QUklWQVRFX0luZGV4Qnl0ZUVuY29kZXI7XG4gICAgICAgICAgICByLnNlZWQobi5XdCgpKSwgX19QUklWQVRFX0ZpcmVzdG9yZUluZGV4VmFsdWVXcml0ZXIuYnQuUHQoZSwgci5IdCh0LmtpbmQpKSwgaS5wdXNoKHIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgICBWbihlLCB0KSB7XG4gICAgICAgIHJldHVybiAhIWUuZmlsdGVycy5maW5kKChlID0+IGUgaW5zdGFuY2VvZiBGaWVsZEZpbHRlciAmJiBlLmZpZWxkLmlzRXF1YWwodCkgJiYgKFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyA9PT0gZS5vcCB8fCBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyA9PT0gZS5vcCkpKTtcbiAgICB9XG4gICAgZ2V0RmllbGRJbmRleGVzKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9pbmRleENvbmZpZ3VyYXRpb25TdG9yZShlKSwgciA9IF9fUFJJVkFURV9pbmRleFN0YXRlU3RvcmUoZSk7XG4gICAgICAgIHJldHVybiAodCA/IG4uVShcImNvbGxlY3Rpb25Hcm91cEluZGV4XCIsIElEQktleVJhbmdlLmJvdW5kKHQsIHQpKSA6IG4uVSgpKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaChlLCAoZSA9PiByLmdldChbIGUuaW5kZXhJZCwgdGhpcy51aWQgXSkubmV4dCgobiA9PiB7XG4gICAgICAgICAgICAgICAgdC5wdXNoKGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tRGJJbmRleENvbmZpZ3VyYXRpb24oZSwgdCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gdCA/IG5ldyBJbmRleFN0YXRlKHQuc2VxdWVuY2VOdW1iZXIsIG5ldyBJbmRleE9mZnNldChfX1BSSVZBVEVfZnJvbURiVGltZXN0YW1wKHQucmVhZFRpbWUpLCBuZXcgRG9jdW1lbnRLZXkoX19QUklWQVRFX2RlY29kZVJlc291cmNlUGF0aCh0LmRvY3VtZW50S2V5KSksIHQubGFyZ2VzdEJhdGNoSWQpKSA6IEluZGV4U3RhdGUuZW1wdHkoKSwgciA9IGUuZmllbGRzLm1hcCgoKFtlLCB0XSkgPT4gbmV3IEluZGV4U2VnbWVudChGaWVsZFBhdGgkMS5mcm9tU2VydmVyRm9ybWF0KGUpLCB0KSkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEZpZWxkSW5kZXgoZS5pbmRleElkLCBlLmNvbGxlY3Rpb25Hcm91cCwgciwgbik7XG4gICAgICAgICAgICAgICAgfShlLCBuKSk7XG4gICAgICAgICAgICB9KSkpKS5uZXh0KCgoKSA9PiB0KSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0TmV4dENvbGxlY3Rpb25Hcm91cFRvVXBkYXRlKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RmllbGRJbmRleGVzKGUpLm5leHQoKGUgPT4gMCA9PT0gZS5sZW5ndGggPyBudWxsIDogKGUuc29ydCgoKGUsIHQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLmluZGV4U3RhdGUuc2VxdWVuY2VOdW1iZXIgLSB0LmluZGV4U3RhdGUuc2VxdWVuY2VOdW1iZXI7XG4gICAgICAgICAgICByZXR1cm4gMCAhPT0gbiA/IG4gOiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihlLmNvbGxlY3Rpb25Hcm91cCwgdC5jb2xsZWN0aW9uR3JvdXApO1xuICAgICAgICB9KSksIGVbMF0uY29sbGVjdGlvbkdyb3VwKSkpO1xuICAgIH1cbiAgICB1cGRhdGVDb2xsZWN0aW9uR3JvdXAoZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gX19QUklWQVRFX2luZGV4Q29uZmlndXJhdGlvblN0b3JlKGUpLCBpID0gX19QUklWQVRFX2luZGV4U3RhdGVTdG9yZShlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ24oZSkubmV4dCgoZSA9PiByLlUoXCJjb2xsZWN0aW9uR3JvdXBJbmRleFwiLCBJREJLZXlSYW5nZS5ib3VuZCh0LCB0KSkubmV4dCgodCA9PiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaCh0LCAodCA9PiBpLnB1dChfX1BSSVZBVEVfdG9EYkluZGV4U3RhdGUodC5pbmRleElkLCB0aGlzLnVpZCwgZSwgbikpKSkpKSkpO1xuICAgIH1cbiAgICB1cGRhdGVJbmRleEVudHJpZXMoZSwgdCkge1xuICAgICAgICAvLyBQb3J0aW5nIE5vdGU6IGBnZXRGaWVsZEluZGV4ZXMoKWAgb24gV2ViIGRvZXMgbm90IGNhY2hlIGluZGV4IGxvb2t1cHMgYXNcbiAgICAgICAgLy8gaXQgY291bGQgYmUgdXNlZCBhY3Jvc3MgZGlmZmVyZW50IEluZGV4ZWREQiB0cmFuc2FjdGlvbnMuIEFzIGFueSBjYWNoZWRcbiAgICAgICAgLy8gZGF0YSBtaWdodCBiZSBpbnZhbGlkYXRlZCBieSBvdGhlciBtdWx0aS10YWIgY2xpZW50cywgd2UgY2FuIG9ubHkgdHJ1c3RcbiAgICAgICAgLy8gZGF0YSB3aXRoaW4gYSBzaW5nbGUgSW5kZXhlZERCIHRyYW5zYWN0aW9uLiBXZSB0aGVyZWZvcmUgYWRkIGEgY2FjaGVcbiAgICAgICAgLy8gaGVyZS5cbiAgICAgICAgY29uc3QgbiA9IG5ldyBNYXA7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaCh0LCAoKHQsIHIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBuLmdldCh0LmNvbGxlY3Rpb25Hcm91cCk7XG4gICAgICAgICAgICByZXR1cm4gKGkgPyBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShpKSA6IHRoaXMuZ2V0RmllbGRJbmRleGVzKGUsIHQuY29sbGVjdGlvbkdyb3VwKSkubmV4dCgoaSA9PiAobi5zZXQodC5jb2xsZWN0aW9uR3JvdXAsIGkpLCBcbiAgICAgICAgICAgIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKGksIChuID0+IHRoaXMucG4oZSwgdCwgbikubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMueW4ociwgbik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHQuaXNFcXVhbChpKSA/IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCkgOiB0aGlzLnduKGUsIHIsIG4sIHQsIGkpO1xuICAgICAgICAgICAgfSkpKSkpKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgU24oZSwgdCwgbiwgcikge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2luZGV4RW50cmllc1N0b3JlKGUpLnB1dCh7XG4gICAgICAgICAgICBpbmRleElkOiByLmluZGV4SWQsXG4gICAgICAgICAgICB1aWQ6IHRoaXMudWlkLFxuICAgICAgICAgICAgYXJyYXlWYWx1ZTogci5hcnJheVZhbHVlLFxuICAgICAgICAgICAgZGlyZWN0aW9uYWxWYWx1ZTogci5kaXJlY3Rpb25hbFZhbHVlLFxuICAgICAgICAgICAgb3JkZXJlZERvY3VtZW50S2V5OiB0aGlzLlJuKG4sIHQua2V5KSxcbiAgICAgICAgICAgIGRvY3VtZW50S2V5OiB0LmtleS5wYXRoLnRvQXJyYXkoKVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYm4oZSwgdCwgbiwgcikge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2luZGV4RW50cmllc1N0b3JlKGUpLmRlbGV0ZShbIHIuaW5kZXhJZCwgdGhpcy51aWQsIHIuYXJyYXlWYWx1ZSwgci5kaXJlY3Rpb25hbFZhbHVlLCB0aGlzLlJuKG4sIHQua2V5KSwgdC5rZXkucGF0aC50b0FycmF5KCkgXSk7XG4gICAgfVxuICAgIHBuKGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9pbmRleEVudHJpZXNTdG9yZShlKTtcbiAgICAgICAgbGV0IGkgPSBuZXcgU29ydGVkU2V0KF9fUFJJVkFURV9pbmRleEVudHJ5Q29tcGFyYXRvcik7XG4gICAgICAgIHJldHVybiByLkooe1xuICAgICAgICAgICAgaW5kZXg6IFwiZG9jdW1lbnRLZXlJbmRleFwiLFxuICAgICAgICAgICAgcmFuZ2U6IElEQktleVJhbmdlLm9ubHkoWyBuLmluZGV4SWQsIHRoaXMudWlkLCB0aGlzLlJuKG4sIHQpIF0pXG4gICAgICAgIH0sICgoZSwgcikgPT4ge1xuICAgICAgICAgICAgaSA9IGkuYWRkKG5ldyBfX1BSSVZBVEVfSW5kZXhFbnRyeShuLmluZGV4SWQsIHQsIHIuYXJyYXlWYWx1ZSwgci5kaXJlY3Rpb25hbFZhbHVlKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIHRoZSBpbmRleCBlbnRyaWVzIGZvciB0aGUgZ2l2ZW4gZG9jdW1lbnQuICovICAgIHluKGUsIHQpIHtcbiAgICAgICAgbGV0IG4gPSBuZXcgU29ydGVkU2V0KF9fUFJJVkFURV9pbmRleEVudHJ5Q29tcGFyYXRvcik7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLkFuKHQsIGUpO1xuICAgICAgICBpZiAobnVsbCA9PSByKSByZXR1cm4gbjtcbiAgICAgICAgY29uc3QgaSA9IF9fUFJJVkFURV9maWVsZEluZGV4R2V0QXJyYXlTZWdtZW50KHQpO1xuICAgICAgICBpZiAobnVsbCAhPSBpKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gZS5kYXRhLmZpZWxkKGkuZmllbGRQYXRoKTtcbiAgICAgICAgICAgIGlmIChpc0FycmF5KHMpKSBmb3IgKGNvbnN0IGkgb2Ygcy5hcnJheVZhbHVlLnZhbHVlcyB8fCBbXSkgbiA9IG4uYWRkKG5ldyBfX1BSSVZBVEVfSW5kZXhFbnRyeSh0LmluZGV4SWQsIGUua2V5LCB0aGlzLlRuKGkpLCByKSk7XG4gICAgICAgIH0gZWxzZSBuID0gbi5hZGQobmV3IF9fUFJJVkFURV9JbmRleEVudHJ5KHQuaW5kZXhJZCwgZS5rZXksIGRlLCByKSk7XG4gICAgICAgIHJldHVybiBuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBpbmRleCBlbnRyaWVzIGZvciB0aGUgcHJvdmlkZWQgZG9jdW1lbnQgYnkgZGVsZXRpbmcgZW50cmllc1xuICAgICAqIHRoYXQgYXJlIG5vIGxvbmdlciByZWZlcmVuY2VkIGluIGBuZXdFbnRyaWVzYCBhbmQgYWRkaW5nIGFsbCBuZXdseSBhZGRlZFxuICAgICAqIGVudHJpZXMuXG4gICAgICovICAgIHduKGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiSW5kZXhlZERiSW5kZXhNYW5hZ2VyXCIsIFwiVXBkYXRpbmcgaW5kZXggZW50cmllcyBmb3IgZG9jdW1lbnQgJyVzJ1wiLCB0LmtleSk7XG4gICAgICAgIGNvbnN0IHMgPSBbXTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9kaWZmU29ydGVkU2V0cyhlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gZS5nZXRJdGVyYXRvcigpLCBvID0gdC5nZXRJdGVyYXRvcigpO1xuICAgICAgICAgICAgbGV0IF8gPSBfX1BSSVZBVEVfYWR2YW5jZUl0ZXJhdG9yKHMpLCBhID0gX19QUklWQVRFX2FkdmFuY2VJdGVyYXRvcihvKTtcbiAgICAgICAgICAgIC8vIFdhbGsgdGhyb3VnaCB0aGUgdHdvIHNldHMgYXQgdGhlIHNhbWUgdGltZSwgdXNpbmcgdGhlIG9yZGVyaW5nIGRlZmluZWQgYnlcbiAgICAgICAgICAgIC8vIGBjb21wYXJhdG9yYC5cbiAgICAgICAgICAgIGZvciAoO18gfHwgYTsgKSB7XG4gICAgICAgICAgICAgICAgbGV0IGUgPSAhMSwgdCA9ICExO1xuICAgICAgICAgICAgICAgIGlmIChfICYmIGEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IG4oXywgYSk7XG4gICAgICAgICAgICAgICAgICAgIHIgPCAwID8gXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBlbGVtZW50IHdhcyByZW1vdmVkIGlmIHRoZSBuZXh0IGVsZW1lbnQgaW4gb3VyIG9yZGVyZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gd2Fsa3Rocm91Z2ggaXMgb25seSBpbiBgYmVmb3JlYC5cbiAgICAgICAgICAgICAgICAgICAgdCA9ICEwIDogciA+IDAgJiYgKFxuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZWxlbWVudCB3YXMgYWRkZWQgaWYgdGhlIG5leHQgZWxlbWVudCBpbiBvdXIgb3JkZXJlZCB3YWxrdGhyb3VnaFxuICAgICAgICAgICAgICAgICAgICAvLyBpcyBvbmx5IGluIGBhZnRlcmAuXG4gICAgICAgICAgICAgICAgICAgIGUgPSAhMCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIG51bGwgIT0gXyA/IHQgPSAhMCA6IGUgPSAhMDtcbiAgICAgICAgICAgICAgICBlID8gKHIoYSksIGEgPSBfX1BSSVZBVEVfYWR2YW5jZUl0ZXJhdG9yKG8pKSA6IHQgPyAoaShfKSwgXyA9IF9fUFJJVkFURV9hZHZhbmNlSXRlcmF0b3IocykpIDogKF8gPSBfX1BSSVZBVEVfYWR2YW5jZUl0ZXJhdG9yKHMpLCBcbiAgICAgICAgICAgICAgICBhID0gX19QUklWQVRFX2FkdmFuY2VJdGVyYXRvcihvKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0ociwgaSwgX19QUklWQVRFX2luZGV4RW50cnlDb21wYXJhdG9yLCAoXG4gICAgICAgIC8qIG9uQWRkPSAqLyByID0+IHtcbiAgICAgICAgICAgIHMucHVzaCh0aGlzLlNuKGUsIHQsIG4sIHIpKTtcbiAgICAgICAgfSksIChcbiAgICAgICAgLyogb25SZW1vdmU9ICovIHIgPT4ge1xuICAgICAgICAgICAgcy5wdXNoKHRoaXMuYm4oZSwgdCwgbiwgcikpO1xuICAgICAgICB9KSksIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHMpO1xuICAgIH1cbiAgICBnbihlKSB7XG4gICAgICAgIGxldCB0ID0gMTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9pbmRleFN0YXRlU3RvcmUoZSkuSih7XG4gICAgICAgICAgICBpbmRleDogXCJzZXF1ZW5jZU51bWJlckluZGV4XCIsXG4gICAgICAgICAgICByZXZlcnNlOiAhMCxcbiAgICAgICAgICAgIHJhbmdlOiBJREJLZXlSYW5nZS51cHBlckJvdW5kKFsgdGhpcy51aWQsIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSIF0pXG4gICAgICAgIH0sICgoZSwgbiwgcikgPT4ge1xuICAgICAgICAgICAgci5kb25lKCksIHQgPSBuLnNlcXVlbmNlTnVtYmVyICsgMTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIG5ldyBzZXQgb2YgSURCIHJhbmdlcyB0aGF0IHNwbGl0cyB0aGUgZXhpc3RpbmcgcmFuZ2UgYW5kIGV4Y2x1ZGVzXG4gICAgICogYW55IHZhbHVlcyB0aGF0IG1hdGNoIHRoZSBgbm90SW5WYWx1ZWAgZnJvbSB0aGVzZSByYW5nZXMuIEFzIGFuIGV4YW1wbGUsXG4gICAgICogJ1tmb28gPiAyICYmIGZvbyAhPSAzXWAgYmVjb21lcyAgYFtmb28gPiAyICYmIDwgMywgZm9vID4gM11gLlxuICAgICAqLyAgICBjcmVhdGVSYW5nZShlLCB0LCBuKSB7XG4gICAgICAgIC8vIFRoZSBub3RJbiB2YWx1ZXMgbmVlZCB0byBiZSBzb3J0ZWQgYW5kIHVuaXF1ZSBzbyB0aGF0IHdlIGNhbiByZXR1cm4gYVxuICAgICAgICAvLyBzb3J0ZWQgc2V0IG9mIG5vbi1vdmVybGFwcGluZyByYW5nZXMuXG4gICAgICAgIG4gPSBuLnNvcnQoKChlLCB0KSA9PiBfX1BSSVZBVEVfaW5kZXhFbnRyeUNvbXBhcmF0b3IoZSwgdCkpKS5maWx0ZXIoKChlLCB0LCBuKSA9PiAhdCB8fCAwICE9PSBfX1BSSVZBVEVfaW5kZXhFbnRyeUNvbXBhcmF0b3IoZSwgblt0IC0gMV0pKSk7XG4gICAgICAgIGNvbnN0IHIgPSBbXTtcbiAgICAgICAgci5wdXNoKGUpO1xuICAgICAgICBmb3IgKGNvbnN0IGkgb2Ygbikge1xuICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9pbmRleEVudHJ5Q29tcGFyYXRvcihpLCBlKSwgcyA9IF9fUFJJVkFURV9pbmRleEVudHJ5Q29tcGFyYXRvcihpLCB0KTtcbiAgICAgICAgICAgIGlmICgwID09PSBuKSBcbiAgICAgICAgICAgIC8vIGBub3RJblZhbHVlYCBpcyB0aGUgbG93ZXIgYm91bmQuIFdlIHRoZXJlZm9yZSBuZWVkIHRvIHJhaXNlIHRoZSBib3VuZFxuICAgICAgICAgICAgLy8gdG8gdGhlIG5leHQgdmFsdWUuXG4gICAgICAgICAgICByWzBdID0gZS5KdCgpOyBlbHNlIGlmIChuID4gMCAmJiBzIDwgMCkgXG4gICAgICAgICAgICAvLyBgbm90SW5WYWx1ZWAgaXMgaW4gdGhlIG1pZGRsZSBvZiB0aGUgcmFuZ2VcbiAgICAgICAgICAgIHIucHVzaChpKSwgci5wdXNoKGkuSnQoKSk7IGVsc2UgaWYgKHMgPiAwKSBcbiAgICAgICAgICAgIC8vIGBub3RJblZhbHVlYCAoYW5kIGFsbCBmb2xsb3dpbmcgdmFsdWVzKSBhcmUgb3V0IG9mIHRoZSByYW5nZVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgci5wdXNoKHQpO1xuICAgICAgICBjb25zdCBpID0gW107XG4gICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgci5sZW5ndGg7IGUgKz0gMikge1xuICAgICAgICAgICAgLy8gSWYgd2UgZW5jb3VudGVyIHR3byBib3VuZHMgdGhhdCB3aWxsIGNyZWF0ZSBhbiB1bm1hdGNoYWJsZSBrZXkgcmFuZ2UsXG4gICAgICAgICAgICAvLyB0aGVuIHdlIHJldHVybiBhbiBlbXB0eSBzZXQgb2Yga2V5IHJhbmdlcy5cbiAgICAgICAgICAgIGlmICh0aGlzLkRuKHJbZV0sIHJbZSArIDFdKSkgcmV0dXJuIFtdO1xuICAgICAgICAgICAgY29uc3QgdCA9IFsgcltlXS5pbmRleElkLCB0aGlzLnVpZCwgcltlXS5hcnJheVZhbHVlLCByW2VdLmRpcmVjdGlvbmFsVmFsdWUsIGRlLCBbXSBdLCBuID0gWyByW2UgKyAxXS5pbmRleElkLCB0aGlzLnVpZCwgcltlICsgMV0uYXJyYXlWYWx1ZSwgcltlICsgMV0uZGlyZWN0aW9uYWxWYWx1ZSwgZGUsIFtdIF07XG4gICAgICAgICAgICBpLnB1c2goSURCS2V5UmFuZ2UuYm91bmQodCwgbikpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgICBEbihlLCB0KSB7XG4gICAgICAgIC8vIElmIGxvd2VyIGJvdW5kIGlzIGdyZWF0ZXIgdGhhbiB0aGUgdXBwZXIgYm91bmQsIHRoZW4gdGhlIGtleVxuICAgICAgICAvLyByYW5nZSBjYW4gbmV2ZXIgYmUgbWF0Y2hlZC5cbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9pbmRleEVudHJ5Q29tcGFyYXRvcihlLCB0KSA+IDA7XG4gICAgfVxuICAgIGdldE1pbk9mZnNldEZyb21Db2xsZWN0aW9uR3JvdXAoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRGaWVsZEluZGV4ZXMoZSwgdCkubmV4dChfX1BSSVZBVEVfZ2V0TWluT2Zmc2V0RnJvbUZpZWxkSW5kZXhlcyk7XG4gICAgfVxuICAgIGdldE1pbk9mZnNldChlLCB0KSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UubWFwQXJyYXkodGhpcy5jbih0KSwgKHQgPT4gdGhpcy5sbihlLCB0KS5uZXh0KChlID0+IGUgfHwgZmFpbCgpKSkpKS5uZXh0KF9fUFJJVkFURV9nZXRNaW5PZmZzZXRGcm9tRmllbGRJbmRleGVzKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBjb2xsZWN0aW9uUGFyZW50c1xuICogZG9jdW1lbnQgc3RvcmUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2NvbGxlY3Rpb25QYXJlbnRzU3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgXCJjb2xsZWN0aW9uUGFyZW50c1wiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGluZGV4IGVudHJ5IG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfaW5kZXhFbnRyaWVzU3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgXCJpbmRleEVudHJpZXNcIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBpbmRleCBjb25maWd1cmF0aW9uIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfaW5kZXhDb25maWd1cmF0aW9uU3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgXCJpbmRleENvbmZpZ3VyYXRpb25cIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBpbmRleCBzdGF0ZSBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2luZGV4U3RhdGVTdG9yZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9nZXRTdG9yZShlLCBcImluZGV4U3RhdGVcIik7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9nZXRNaW5PZmZzZXRGcm9tRmllbGRJbmRleGVzKGUpIHtcbiAgICBfX1BSSVZBVEVfaGFyZEFzc2VydCgwICE9PSBlLmxlbmd0aCk7XG4gICAgbGV0IHQgPSBlWzBdLmluZGV4U3RhdGUub2Zmc2V0LCBuID0gdC5sYXJnZXN0QmF0Y2hJZDtcbiAgICBmb3IgKGxldCByID0gMTsgciA8IGUubGVuZ3RoOyByKyspIHtcbiAgICAgICAgY29uc3QgaSA9IGVbcl0uaW5kZXhTdGF0ZS5vZmZzZXQ7XG4gICAgICAgIF9fUFJJVkFURV9pbmRleE9mZnNldENvbXBhcmF0b3IoaSwgdCkgPCAwICYmICh0ID0gaSksIG4gPCBpLmxhcmdlc3RCYXRjaElkICYmIChuID0gaS5sYXJnZXN0QmF0Y2hJZCk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgSW5kZXhPZmZzZXQodC5yZWFkVGltZSwgdC5kb2N1bWVudEtleSwgbik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IEFlID0ge1xuICAgIGRpZFJ1bjogITEsXG4gICAgc2VxdWVuY2VOdW1iZXJzQ29sbGVjdGVkOiAwLFxuICAgIHRhcmdldHNSZW1vdmVkOiAwLFxuICAgIGRvY3VtZW50c1JlbW92ZWQ6IDBcbn07XG5cbmNsYXNzIExydVBhcmFtcyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLy8gV2hlbiB3ZSBhdHRlbXB0IHRvIGNvbGxlY3QsIHdlIHdpbGwgb25seSBkbyBzbyBpZiB0aGUgY2FjaGUgc2l6ZSBpcyBncmVhdGVyIHRoYW4gdGhpc1xuICAgIC8vIHRocmVzaG9sZC4gUGFzc2luZyBgQ09MTEVDVElPTl9ESVNBQkxFRGAgaGVyZSB3aWxsIGNhdXNlIGNvbGxlY3Rpb24gdG8gYWx3YXlzIGJlIHNraXBwZWQuXG4gICAgZSwgXG4gICAgLy8gVGhlIHBlcmNlbnRhZ2Ugb2Ygc2VxdWVuY2UgbnVtYmVycyB0aGF0IHdlIHdpbGwgYXR0ZW1wdCB0byBjb2xsZWN0XG4gICAgdCwgXG4gICAgLy8gQSBjYXAgb24gdGhlIHRvdGFsIG51bWJlciBvZiBzZXF1ZW5jZSBudW1iZXJzIHRoYXQgd2lsbCBiZSBjb2xsZWN0ZWQuIFRoaXMgcHJldmVudHNcbiAgICAvLyB1cyBmcm9tIGNvbGxlY3RpbmcgYSBodWdlIG51bWJlciBvZiBzZXF1ZW5jZSBudW1iZXJzIGlmIHRoZSBjYWNoZSBoYXMgZ3Jvd24gdmVyeSBsYXJnZS5cbiAgICBuKSB7XG4gICAgICAgIHRoaXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZCA9IGUsIHRoaXMucGVyY2VudGlsZVRvQ29sbGVjdCA9IHQsIHRoaXMubWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCA9IG47XG4gICAgfVxuICAgIHN0YXRpYyB3aXRoQ2FjaGVTaXplKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBMcnVQYXJhbXMoZSwgTHJ1UGFyYW1zLkRFRkFVTFRfQ09MTEVDVElPTl9QRVJDRU5USUxFLCBMcnVQYXJhbXMuREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIERlbGV0ZSBhIG11dGF0aW9uIGJhdGNoIGFuZCB0aGUgYXNzb2NpYXRlZCBkb2N1bWVudCBtdXRhdGlvbnMuXG4gKiBAcmV0dXJucyBBIFBlcnNpc3RlbmNlUHJvbWlzZSBvZiB0aGUgZG9jdW1lbnQgbXV0YXRpb25zIHRoYXQgd2VyZSByZW1vdmVkLlxuICovXG5mdW5jdGlvbiByZW1vdmVNdXRhdGlvbkJhdGNoKGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gZS5zdG9yZShcIm11dGF0aW9uc1wiKSwgaSA9IGUuc3RvcmUoXCJkb2N1bWVudE11dGF0aW9uc1wiKSwgcyA9IFtdLCBvID0gSURCS2V5UmFuZ2Uub25seShuLmJhdGNoSWQpO1xuICAgIGxldCBfID0gMDtcbiAgICBjb25zdCBhID0gci5KKHtcbiAgICAgICAgcmFuZ2U6IG9cbiAgICB9LCAoKGUsIHQsIG4pID0+IChfKyssIG4uZGVsZXRlKCkpKSk7XG4gICAgcy5wdXNoKGEubmV4dCgoKCkgPT4ge1xuICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydCgxID09PSBfKTtcbiAgICB9KSkpO1xuICAgIGNvbnN0IHUgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGUgb2Ygbi5tdXRhdGlvbnMpIHtcbiAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9uZXdEYkRvY3VtZW50TXV0YXRpb25LZXkodCwgZS5rZXkucGF0aCwgbi5iYXRjaElkKTtcbiAgICAgICAgcy5wdXNoKGkuZGVsZXRlKHIpKSwgdS5wdXNoKGUua2V5KTtcbiAgICB9XG4gICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHMpLm5leHQoKCgpID0+IHUpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGFuIGFwcHJveGltYXRlIHNpemUgZm9yIHRoZSBnaXZlbiBkb2N1bWVudC5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZGJEb2N1bWVudFNpemUoZSkge1xuICAgIGlmICghZSkgcmV0dXJuIDA7XG4gICAgbGV0IHQ7XG4gICAgaWYgKGUuZG9jdW1lbnQpIHQgPSBlLmRvY3VtZW50OyBlbHNlIGlmIChlLnVua25vd25Eb2N1bWVudCkgdCA9IGUudW5rbm93bkRvY3VtZW50OyBlbHNlIHtcbiAgICAgICAgaWYgKCFlLm5vRG9jdW1lbnQpIHRocm93IGZhaWwoKTtcbiAgICAgICAgdCA9IGUubm9Eb2N1bWVudDtcbiAgICB9XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHQpLmxlbmd0aDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBBIG11dGF0aW9uIHF1ZXVlIGZvciBhIHNwZWNpZmljIHVzZXIsIGJhY2tlZCBieSBJbmRleGVkREIuICovIExydVBhcmFtcy5ERUZBVUxUX0NPTExFQ1RJT05fUEVSQ0VOVElMRSA9IDEwLCBcbkxydVBhcmFtcy5ERUZBVUxUX01BWF9TRVFVRU5DRV9OVU1CRVJTX1RPX0NPTExFQ1QgPSAxZTMsIExydVBhcmFtcy5ERUZBVUxUID0gbmV3IExydVBhcmFtcyg0MTk0MzA0MCwgTHJ1UGFyYW1zLkRFRkFVTFRfQ09MTEVDVElPTl9QRVJDRU5USUxFLCBMcnVQYXJhbXMuREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUKSwgXG5McnVQYXJhbXMuRElTQUJMRUQgPSBuZXcgTHJ1UGFyYW1zKC0xLCAwLCAwKTtcblxuY2xhc3MgX19QUklWQVRFX0luZGV4ZWREYk11dGF0aW9uUXVldWUge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBub3JtYWxpemVkIHVzZXJJZCAoZS5nLiBudWxsIFVJRCA9PiBcIlwiIHVzZXJJZCkgdXNlZCB0byBzdG9yZSAvXG4gICAgICogcmV0cmlldmUgbXV0YXRpb25zLlxuICAgICAqL1xuICAgIGUsIHQsIG4sIHIpIHtcbiAgICAgICAgdGhpcy51c2VySWQgPSBlLCB0aGlzLnNlcmlhbGl6ZXIgPSB0LCB0aGlzLmluZGV4TWFuYWdlciA9IG4sIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUgPSByLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhY2hlcyB0aGUgZG9jdW1lbnQga2V5cyBmb3IgcGVuZGluZyBtdXRhdGlvbiBiYXRjaGVzLiBJZiB0aGUgbXV0YXRpb25cbiAgICAgICAgICogaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIEluZGV4ZWREYiwgdGhlIGNhY2hlZCB2YWx1ZSBtYXkgY29udGludWUgdG9cbiAgICAgICAgICogYmUgdXNlZCB0byByZXRyaWV2ZSB0aGUgYmF0Y2gncyBkb2N1bWVudCBrZXlzLiBUbyByZW1vdmUgYSBjYWNoZWQgdmFsdWVcbiAgICAgICAgICogbG9jYWxseSwgYHJlbW92ZUNhY2hlZE11dGF0aW9uS2V5cygpYCBzaG91bGQgYmUgaW52b2tlZCBlaXRoZXIgZGlyZWN0bHlcbiAgICAgICAgICogb3IgdGhyb3VnaCBgcmVtb3ZlTXV0YXRpb25CYXRjaGVzKClgLlxuICAgICAgICAgKlxuICAgICAgICAgKiBXaXRoIG11bHRpLXRhYiwgd2hlbiB0aGUgcHJpbWFyeSBjbGllbnQgYWNrbm93bGVkZ2VzIG9yIHJlamVjdHMgYSBtdXRhdGlvbixcbiAgICAgICAgICogdGhpcyBjYWNoZSBpcyB1c2VkIGJ5IHNlY29uZGFyeSBjbGllbnRzIHRvIGludmFsaWRhdGUgdGhlIGxvY2FsXG4gICAgICAgICAqIHZpZXcgb2YgdGhlIGRvY3VtZW50cyB0aGF0IHdlcmUgcHJldmlvdXNseSBhZmZlY3RlZCBieSB0aGUgbXV0YXRpb24uXG4gICAgICAgICAqL1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxuICAgICAgICB0aGlzLkNuID0ge307XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgbXV0YXRpb24gcXVldWUgZm9yIHRoZSBnaXZlbiB1c2VyLlxuICAgICAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIgZm9yIHdoaWNoIHRvIGNyZWF0ZSBhIG11dGF0aW9uIHF1ZXVlLlxuICAgICAqIEBwYXJhbSBzZXJpYWxpemVyIC0gVGhlIHNlcmlhbGl6ZXIgdG8gdXNlIHdoZW4gcGVyc2lzdGluZyB0byBJbmRleGVkRGIuXG4gICAgICovICAgIHN0YXRpYyBsdChlLCB0LCBuLCByKSB7XG4gICAgICAgIC8vIFRPRE8obWNnKTogRmlndXJlIG91dCB3aGF0IGNvbnN0cmFpbnRzIHRoZXJlIGFyZSBvbiB1c2VySURzXG4gICAgICAgIC8vIEluIHBhcnRpY3VsYXIsIGFyZSB0aGVyZSBhbnkgcmVzZXJ2ZWQgY2hhcmFjdGVycz8gYXJlIGVtcHR5IGlkcyBhbGxvd2VkP1xuICAgICAgICAvLyBGb3IgdGhlIG1vbWVudCBzdG9yZSB0aGVzZSB0b2dldGhlciBpbiB0aGUgc2FtZSBtdXRhdGlvbnMgdGFibGUgYXNzdW1pbmdcbiAgICAgICAgLy8gdGhhdCBlbXB0eSB1c2VySURzIGFyZW4ndCBhbGxvd2VkLlxuICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydChcIlwiICE9PSBlLnVpZCk7XG4gICAgICAgIGNvbnN0IGkgPSBlLmlzQXV0aGVudGljYXRlZCgpID8gZS51aWQgOiBcIlwiO1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9JbmRleGVkRGJNdXRhdGlvblF1ZXVlKGksIHQsIG4sIHIpO1xuICAgIH1cbiAgICBjaGVja0VtcHR5KGUpIHtcbiAgICAgICAgbGV0IHQgPSAhMDtcbiAgICAgICAgY29uc3QgbiA9IElEQktleVJhbmdlLmJvdW5kKFsgdGhpcy51c2VySWQsIE51bWJlci5ORUdBVElWRV9JTkZJTklUWSBdLCBbIHRoaXMudXNlcklkLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgXSk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfbXV0YXRpb25zU3RvcmUoZSkuSih7XG4gICAgICAgICAgICBpbmRleDogXCJ1c2VyTXV0YXRpb25zSW5kZXhcIixcbiAgICAgICAgICAgIHJhbmdlOiBuXG4gICAgICAgIH0sICgoZSwgbiwgcikgPT4ge1xuICAgICAgICAgICAgdCA9ICExLCByLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHQpKTtcbiAgICB9XG4gICAgYWRkTXV0YXRpb25CYXRjaChlLCB0LCBuLCByKSB7XG4gICAgICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfZG9jdW1lbnRNdXRhdGlvbnNTdG9yZShlKSwgcyA9IF9fUFJJVkFURV9tdXRhdGlvbnNTdG9yZShlKTtcbiAgICAgICAgLy8gVGhlIEluZGV4ZWREYiBpbXBsZW1lbnRhdGlvbiBpbiBDaHJvbWUgKGFuZCBGaXJlZm94KSBkb2VzIG5vdCBoYW5kbGVcbiAgICAgICAgLy8gY29tcG91bmQgaW5kaWNlcyB0aGF0IGluY2x1ZGUgYXV0by1nZW5lcmF0ZWQga2V5cyBjb3JyZWN0bHkuIFRvIGVuc3VyZVxuICAgICAgICAvLyB0aGF0IHRoZSBpbmRleCBlbnRyeSBpcyBhZGRlZCBjb3JyZWN0bHkgaW4gYWxsIGJyb3dzZXJzLCB3ZSBwZXJmb3JtIHR3b1xuICAgICAgICAvLyB3cml0ZXM6IFRoZSBmaXJzdCB3cml0ZSBpcyB1c2VkIHRvIHJldHJpZXZlIHRoZSBuZXh0IGF1dG8tZ2VuZXJhdGVkIEJhdGNoXG4gICAgICAgIC8vIElELCBhbmQgdGhlIHNlY29uZCB3cml0ZSBwb3B1bGF0ZXMgdGhlIGluZGV4IGFuZCBzdG9yZXMgdGhlIGFjdHVhbFxuICAgICAgICAvLyBtdXRhdGlvbiBiYXRjaC5cbiAgICAgICAgLy8gU2VlOiBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD03MDE5NzJcbiAgICAgICAgLy8gV2Ugd3JpdGUgYW4gZW1wdHkgb2JqZWN0IHRvIG9idGFpbiBrZXlcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgcmV0dXJuIHMuYWRkKHt9KS5uZXh0KChvID0+IHtcbiAgICAgICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KFwibnVtYmVyXCIgPT0gdHlwZW9mIG8pO1xuICAgICAgICAgICAgY29uc3QgXyA9IG5ldyBNdXRhdGlvbkJhdGNoKG8sIHQsIG4sIHIpLCBhID0gZnVuY3Rpb24gX19QUklWQVRFX3RvRGJNdXRhdGlvbkJhdGNoKGUsIHQsIG4pIHtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gbi5iYXNlTXV0YXRpb25zLm1hcCgodCA9PiB0b011dGF0aW9uKGUuY3QsIHQpKSksIGkgPSBuLm11dGF0aW9ucy5tYXAoKHQgPT4gdG9NdXRhdGlvbihlLmN0LCB0KSkpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHVzZXJJZDogdCxcbiAgICAgICAgICAgICAgICAgICAgYmF0Y2hJZDogbi5iYXRjaElkLFxuICAgICAgICAgICAgICAgICAgICBsb2NhbFdyaXRlVGltZU1zOiBuLmxvY2FsV3JpdGVUaW1lLnRvTWlsbGlzKCksXG4gICAgICAgICAgICAgICAgICAgIGJhc2VNdXRhdGlvbnM6IHIsXG4gICAgICAgICAgICAgICAgICAgIG11dGF0aW9uczogaVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KHRoaXMuc2VyaWFsaXplciwgdGhpcy51c2VySWQsIF8pLCB1ID0gW107XG4gICAgICAgICAgICBsZXQgYyA9IG5ldyBTb3J0ZWRTZXQoKChlLCB0KSA9PiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihlLmNhbm9uaWNhbFN0cmluZygpLCB0LmNhbm9uaWNhbFN0cmluZygpKSkpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX25ld0RiRG9jdW1lbnRNdXRhdGlvbktleSh0aGlzLnVzZXJJZCwgZS5rZXkucGF0aCwgbyk7XG4gICAgICAgICAgICAgICAgYyA9IGMuYWRkKGUua2V5LnBhdGgucG9wTGFzdCgpKSwgdS5wdXNoKHMucHV0KGEpKSwgdS5wdXNoKGkucHV0KHQsIE8pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgIHUucHVzaCh0aGlzLmluZGV4TWFuYWdlci5hZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleChlLCB0KSk7XG4gICAgICAgICAgICB9KSksIGUuYWRkT25Db21taXR0ZWRMaXN0ZW5lcigoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuQ25bb10gPSBfLmtleXMoKTtcbiAgICAgICAgICAgIH0pKSwgUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IodSkubmV4dCgoKCkgPT4gXykpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGxvb2t1cE11dGF0aW9uQmF0Y2goZSwgdCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX211dGF0aW9uc1N0b3JlKGUpLmdldCh0KS5uZXh0KChlID0+IGUgPyAoX19QUklWQVRFX2hhcmRBc3NlcnQoZS51c2VySWQgPT09IHRoaXMudXNlcklkKSwgXG4gICAgICAgIF9fUFJJVkFURV9mcm9tRGJNdXRhdGlvbkJhdGNoKHRoaXMuc2VyaWFsaXplciwgZSkpIDogbnVsbCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBkb2N1bWVudCBrZXlzIGZvciB0aGUgbXV0YXRpb24gYmF0Y2ggd2l0aCB0aGUgZ2l2ZW4gYmF0Y2hJZC5cbiAgICAgKiBGb3IgcHJpbWFyeSBjbGllbnRzLCB0aGlzIG1ldGhvZCByZXR1cm5zIGBudWxsYCBhZnRlclxuICAgICAqIGByZW1vdmVNdXRhdGlvbkJhdGNoZXMoKWAgaGFzIGJlZW4gY2FsbGVkLiBTZWNvbmRhcnkgY2xpZW50cyByZXR1cm4gYVxuICAgICAqIGNhY2hlZCByZXN1bHQgdW50aWwgYHJlbW92ZUNhY2hlZE11dGF0aW9uS2V5cygpYCBpcyBpbnZva2VkLlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgdm4oZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Dblt0XSA/IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMuQ25bdF0pIDogdGhpcy5sb29rdXBNdXRhdGlvbkJhdGNoKGUsIHQpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gZS5rZXlzKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuQ25bdF0gPSBuLCBuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0TmV4dE11dGF0aW9uQmF0Y2hBZnRlckJhdGNoSWQoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdCArIDEsIHIgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKFsgdGhpcy51c2VySWQsIG4gXSk7XG4gICAgICAgIGxldCBpID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9tdXRhdGlvbnNTdG9yZShlKS5KKHtcbiAgICAgICAgICAgIGluZGV4OiBcInVzZXJNdXRhdGlvbnNJbmRleFwiLFxuICAgICAgICAgICAgcmFuZ2U6IHJcbiAgICAgICAgfSwgKChlLCB0LCByKSA9PiB7XG4gICAgICAgICAgICB0LnVzZXJJZCA9PT0gdGhpcy51c2VySWQgJiYgKF9fUFJJVkFURV9oYXJkQXNzZXJ0KHQuYmF0Y2hJZCA+PSBuKSwgaSA9IF9fUFJJVkFURV9mcm9tRGJNdXRhdGlvbkJhdGNoKHRoaXMuc2VyaWFsaXplciwgdCkpLCBcbiAgICAgICAgICAgIHIuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICBnZXRIaWdoZXN0VW5hY2tub3dsZWRnZWRCYXRjaElkKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IElEQktleVJhbmdlLnVwcGVyQm91bmQoWyB0aGlzLnVzZXJJZCwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIF0pO1xuICAgICAgICBsZXQgbiA9IC0xO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX211dGF0aW9uc1N0b3JlKGUpLkooe1xuICAgICAgICAgICAgaW5kZXg6IFwidXNlck11dGF0aW9uc0luZGV4XCIsXG4gICAgICAgICAgICByYW5nZTogdCxcbiAgICAgICAgICAgIHJldmVyc2U6ICEwXG4gICAgICAgIH0sICgoZSwgdCwgcikgPT4ge1xuICAgICAgICAgICAgbiA9IHQuYmF0Y2hJZCwgci5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlcyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBJREJLZXlSYW5nZS5ib3VuZChbIHRoaXMudXNlcklkLCAtMSBdLCBbIHRoaXMudXNlcklkLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgXSk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfbXV0YXRpb25zU3RvcmUoZSkuVShcInVzZXJNdXRhdGlvbnNJbmRleFwiLCB0KS5uZXh0KChlID0+IGUubWFwKChlID0+IF9fUFJJVkFURV9mcm9tRGJNdXRhdGlvbkJhdGNoKHRoaXMuc2VyaWFsaXplciwgZSkpKSkpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleShlLCB0KSB7XG4gICAgICAgIC8vIFNjYW4gdGhlIGRvY3VtZW50LW11dGF0aW9uIGluZGV4IHN0YXJ0aW5nIHdpdGggYSBwcmVmaXggc3RhcnRpbmcgd2l0aFxuICAgICAgICAvLyB0aGUgZ2l2ZW4gZG9jdW1lbnRLZXkuXG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfbmV3RGJEb2N1bWVudE11dGF0aW9uUHJlZml4Rm9yUGF0aCh0aGlzLnVzZXJJZCwgdC5wYXRoKSwgciA9IElEQktleVJhbmdlLmxvd2VyQm91bmQobiksIGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9kb2N1bWVudE11dGF0aW9uc1N0b3JlKGUpLkooe1xuICAgICAgICAgICAgcmFuZ2U6IHJcbiAgICAgICAgfSwgKChuLCByLCBzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBbbywgXywgYV0gPSBuLCB1ID0gX19QUklWQVRFX2RlY29kZVJlc291cmNlUGF0aChfKTtcbiAgICAgICAgICAgIC8vIE9ubHkgY29uc2lkZXIgcm93cyBtYXRjaGluZyBleGFjdGx5IHRoZSBzcGVjaWZpYyBrZXkgb2ZcbiAgICAgICAgICAgIC8vIGludGVyZXN0LiBOb3RlIHRoYXQgYmVjYXVzZSB3ZSBvcmRlciBieSBwYXRoIGZpcnN0LCBhbmQgd2VcbiAgICAgICAgICAgIC8vIG9yZGVyIHRlcm1pbmF0b3JzIGJlZm9yZSBwYXRoIHNlcGFyYXRvcnMsIHdlJ2xsIGVuY291bnRlciBhbGxcbiAgICAgICAgICAgIC8vIHRoZSBpbmRleCByb3dzIGZvciBkb2N1bWVudEtleSBjb250aWd1b3VzbHkuIEluIHBhcnRpY3VsYXIsIGFsbFxuICAgICAgICAgICAgLy8gdGhlIHJvd3MgZm9yIGRvY3VtZW50S2V5IHdpbGwgb2NjdXIgYmVmb3JlIGFueSByb3dzIGZvclxuICAgICAgICAgICAgLy8gZG9jdW1lbnRzIG5lc3RlZCBpbiBhIHN1YmNvbGxlY3Rpb24gYmVuZWF0aCBkb2N1bWVudEtleSBzbyB3ZVxuICAgICAgICAgICAgLy8gY2FuIHN0b3AgYXMgc29vbiBhcyB3ZSBoaXQgYW55IHN1Y2ggcm93LlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8gPT09IHRoaXMudXNlcklkICYmIHQucGF0aC5pc0VxdWFsKHUpKSBcbiAgICAgICAgICAgIC8vIExvb2sgdXAgdGhlIG11dGF0aW9uIGJhdGNoIGluIHRoZSBzdG9yZS5cbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfbXV0YXRpb25zU3RvcmUoZSkuZ2V0KGEpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghZSkgdGhyb3cgZmFpbCgpO1xuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KGUudXNlcklkID09PSB0aGlzLnVzZXJJZCksIGkucHVzaChfX1BSSVZBVEVfZnJvbURiTXV0YXRpb25CYXRjaCh0aGlzLnNlcmlhbGl6ZXIsIGUpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHMuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleXMoZSwgdCkge1xuICAgICAgICBsZXQgbiA9IG5ldyBTb3J0ZWRTZXQoX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IpO1xuICAgICAgICBjb25zdCByID0gW107XG4gICAgICAgIHJldHVybiB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IF9fUFJJVkFURV9uZXdEYkRvY3VtZW50TXV0YXRpb25QcmVmaXhGb3JQYXRoKHRoaXMudXNlcklkLCB0LnBhdGgpLCBzID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChpKSwgbyA9IF9fUFJJVkFURV9kb2N1bWVudE11dGF0aW9uc1N0b3JlKGUpLkooe1xuICAgICAgICAgICAgICAgIHJhbmdlOiBzXG4gICAgICAgICAgICB9LCAoKGUsIHIsIGkpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBbcywgbywgX10gPSBlLCBhID0gX19QUklWQVRFX2RlY29kZVJlc291cmNlUGF0aChvKTtcbiAgICAgICAgICAgICAgICAvLyBPbmx5IGNvbnNpZGVyIHJvd3MgbWF0Y2hpbmcgZXhhY3RseSB0aGUgc3BlY2lmaWMga2V5IG9mXG4gICAgICAgICAgICAgICAgLy8gaW50ZXJlc3QuIE5vdGUgdGhhdCBiZWNhdXNlIHdlIG9yZGVyIGJ5IHBhdGggZmlyc3QsIGFuZCB3ZVxuICAgICAgICAgICAgICAgIC8vIG9yZGVyIHRlcm1pbmF0b3JzIGJlZm9yZSBwYXRoIHNlcGFyYXRvcnMsIHdlJ2xsIGVuY291bnRlciBhbGxcbiAgICAgICAgICAgICAgICAvLyB0aGUgaW5kZXggcm93cyBmb3IgZG9jdW1lbnRLZXkgY29udGlndW91c2x5LiBJbiBwYXJ0aWN1bGFyLCBhbGxcbiAgICAgICAgICAgICAgICAvLyB0aGUgcm93cyBmb3IgZG9jdW1lbnRLZXkgd2lsbCBvY2N1ciBiZWZvcmUgYW55IHJvd3MgZm9yXG4gICAgICAgICAgICAgICAgLy8gZG9jdW1lbnRzIG5lc3RlZCBpbiBhIHN1YmNvbGxlY3Rpb24gYmVuZWF0aCBkb2N1bWVudEtleSBzbyB3ZVxuICAgICAgICAgICAgICAgIC8vIGNhbiBzdG9wIGFzIHNvb24gYXMgd2UgaGl0IGFueSBzdWNoIHJvdy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9PT0gdGhpcy51c2VySWQgJiYgdC5wYXRoLmlzRXF1YWwoYSkgPyBuID0gbi5hZGQoXykgOiBpLmRvbmUoKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHIucHVzaChvKTtcbiAgICAgICAgfSkpLCBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihyKS5uZXh0KCgoKSA9PiB0aGlzLkZuKGUsIG4pKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ1F1ZXJ5KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHQucGF0aCwgciA9IG4ubGVuZ3RoICsgMSwgaSA9IF9fUFJJVkFURV9uZXdEYkRvY3VtZW50TXV0YXRpb25QcmVmaXhGb3JQYXRoKHRoaXMudXNlcklkLCBuKSwgcyA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoaSk7XG4gICAgICAgIC8vIENvbGxlY3QgdXAgdW5pcXVlIGJhdGNoSURzIGVuY291bnRlcmVkIGR1cmluZyBhIHNjYW4gb2YgdGhlIGluZGV4LiBVc2UgYVxuICAgICAgICAvLyBTb3J0ZWRTZXQgdG8gYWNjdW11bGF0ZSBiYXRjaCBJRHMgc28gdGhleSBjYW4gYmUgdHJhdmVyc2VkIGluIG9yZGVyIGluIGFcbiAgICAgICAgLy8gc2NhbiBvZiB0aGUgbWFpbiB0YWJsZS5cbiAgICAgICAgbGV0IG8gPSBuZXcgU29ydGVkU2V0KF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9kb2N1bWVudE11dGF0aW9uc1N0b3JlKGUpLkooe1xuICAgICAgICAgICAgcmFuZ2U6IHNcbiAgICAgICAgfSwgKChlLCB0LCBpKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBbcywgXywgYV0gPSBlLCB1ID0gX19QUklWQVRFX2RlY29kZVJlc291cmNlUGF0aChfKTtcbiAgICAgICAgICAgIHMgPT09IHRoaXMudXNlcklkICYmIG4uaXNQcmVmaXhPZih1KSA/IFxuICAgICAgICAgICAgLy8gUm93cyB3aXRoIGRvY3VtZW50IGtleXMgbW9yZSB0aGFuIG9uZSBzZWdtZW50IGxvbmdlciB0aGFuIHRoZVxuICAgICAgICAgICAgLy8gcXVlcnkgcGF0aCBjYW4ndCBiZSBtYXRjaGVzLiBGb3IgZXhhbXBsZSwgYSBxdWVyeSBvbiAncm9vbXMnXG4gICAgICAgICAgICAvLyBjYW4ndCBtYXRjaCB0aGUgZG9jdW1lbnQgL3Jvb21zL2FiYy9tZXNzYWdlcy94eXguXG4gICAgICAgICAgICAvLyBUT0RPKG1jZyk6IHdlJ2xsIG5lZWQgYSBkaWZmZXJlbnQgc2Nhbm5lciB3aGVuIHdlIGltcGxlbWVudFxuICAgICAgICAgICAgLy8gYW5jZXN0b3IgcXVlcmllcy5cbiAgICAgICAgICAgIHUubGVuZ3RoID09PSByICYmIChvID0gby5hZGQoYSkpIDogaS5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB0aGlzLkZuKGUsIG8pKSk7XG4gICAgfVxuICAgIEZuKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IFtdLCByID0gW107XG4gICAgICAgIC8vIFRPRE8ocm9ja3dvb2QpOiBJbXBsZW1lbnQgdGhpcyB1c2luZyBpdGVyYXRlLlxuICAgICAgICByZXR1cm4gdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIHIucHVzaChfX1BSSVZBVEVfbXV0YXRpb25zU3RvcmUoZSkuZ2V0KHQpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChudWxsID09PSBlKSB0aHJvdyBmYWlsKCk7XG4gICAgICAgICAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoZS51c2VySWQgPT09IHRoaXMudXNlcklkKSwgbi5wdXNoKF9fUFJJVkFURV9mcm9tRGJNdXRhdGlvbkJhdGNoKHRoaXMuc2VyaWFsaXplciwgZSkpO1xuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgfSkpLCBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihyKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIHJlbW92ZU11dGF0aW9uQmF0Y2goZSwgdCkge1xuICAgICAgICByZXR1cm4gcmVtb3ZlTXV0YXRpb25CYXRjaChlLl9lLCB0aGlzLnVzZXJJZCwgdCkubmV4dCgobiA9PiAoZS5hZGRPbkNvbW1pdHRlZExpc3RlbmVyKCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLk1uKHQuYmF0Y2hJZCk7XG4gICAgICAgIH0pKSwgUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2gobiwgKHQgPT4gdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5tYXJrUG90ZW50aWFsbHlPcnBoYW5lZChlLCB0KSkpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbGVhcnMgdGhlIGNhY2hlZCBrZXlzIGZvciBhIG11dGF0aW9uIGJhdGNoLiBUaGlzIG1ldGhvZCBzaG91bGQgYmVcbiAgICAgKiBjYWxsZWQgYnkgc2Vjb25kYXJ5IGNsaWVudHMgYWZ0ZXIgdGhleSBwcm9jZXNzIG11dGF0aW9uIHVwZGF0ZXMuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgdGhpcyBtZXRob2QgZG9lcyBub3QgaGF2ZSB0byBiZSBjYWxsZWQgZnJvbSBwcmltYXJ5IGNsaWVudHMgYXNcbiAgICAgKiB0aGUgY29ycmVzcG9uZGluZyBjYWNoZSBlbnRyaWVzIGFyZSBjbGVhcmVkIHdoZW4gYW4gYWNrbm93bGVkZ2VkIG9yXG4gICAgICogcmVqZWN0ZWQgYmF0Y2ggaXMgcmVtb3ZlZCBmcm9tIHRoZSBtdXRhdGlvbiBxdWV1ZS5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5XG4gICAgTW4oZSkge1xuICAgICAgICBkZWxldGUgdGhpcy5DbltlXTtcbiAgICB9XG4gICAgcGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2soZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGVja0VtcHR5KGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgaWYgKCF0KSByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgIC8vIFZlcmlmeSB0aGF0IHRoZXJlIGFyZSBubyBlbnRyaWVzIGluIHRoZSBkb2N1bWVudE11dGF0aW9ucyBpbmRleCBpZlxuICAgICAgICAgICAgLy8gdGhlIHF1ZXVlIGlzIGVtcHR5LlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoXG4gICAgICAgICAgICAvKipcbiAqIENyZWF0ZXMgYSBbdXNlcklkXSBrZXkgZm9yIHVzZSBpbiB0aGUgRGJEb2N1bWVudE11dGF0aW9ucyBpbmRleCB0byBpdGVyYXRlXG4gKiBvdmVyIGFsbCBvZiBhIHVzZXIncyBkb2N1bWVudCBtdXRhdGlvbnMuXG4gKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdEYkRvY3VtZW50TXV0YXRpb25QcmVmaXhGb3JVc2VyKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWyBlIF07XG4gICAgICAgICAgICB9KHRoaXMudXNlcklkKSksIHIgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfZG9jdW1lbnRNdXRhdGlvbnNTdG9yZShlKS5KKHtcbiAgICAgICAgICAgICAgICByYW5nZTogblxuICAgICAgICAgICAgfSwgKChlLCB0LCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVbMF0gPT09IHRoaXMudXNlcklkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZGVjb2RlUmVzb3VyY2VQYXRoKGVbMV0pO1xuICAgICAgICAgICAgICAgICAgICByLnB1c2godCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIG4uZG9uZSgpO1xuICAgICAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydCgwID09PSByLmxlbmd0aCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgY29udGFpbnNLZXkoZSwgdCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX211dGF0aW9uUXVldWVDb250YWluc0tleShlLCB0aGlzLnVzZXJJZCwgdCk7XG4gICAgfVxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkgKHN0YXRlIGlzIGhlbGQgaW4gbWVtb3J5IGluIG90aGVyIGNsaWVudHMpLlxuICAgIC8qKiBSZXR1cm5zIHRoZSBtdXRhdGlvbiBxdWV1ZSdzIG1ldGFkYXRhIGZyb20gSW5kZXhlZERiLiAqL1xuICAgIHhuKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9tdXRhdGlvblF1ZXVlc1N0b3JlKGUpLmdldCh0aGlzLnVzZXJJZCkubmV4dCgoZSA9PiBlIHx8IHtcbiAgICAgICAgICAgIHVzZXJJZDogdGhpcy51c2VySWQsXG4gICAgICAgICAgICBsYXN0QWNrbm93bGVkZ2VkQmF0Y2hJZDogLTEsXG4gICAgICAgICAgICBsYXN0U3RyZWFtVG9rZW46IFwiXCJcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBtdXRhdGlvbiBxdWV1ZSBmb3IgdGhlIGdpdmVuIHVzZXIgY29udGFpbnMgYSBwZW5kaW5nXG4gKiAgICAgICAgIG11dGF0aW9uIGZvciB0aGUgZ2l2ZW4ga2V5LlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9tdXRhdGlvblF1ZXVlQ29udGFpbnNLZXkoZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfbmV3RGJEb2N1bWVudE11dGF0aW9uUHJlZml4Rm9yUGF0aCh0LCBuLnBhdGgpLCBpID0gclsxXSwgcyA9IElEQktleVJhbmdlLmxvd2VyQm91bmQocik7XG4gICAgbGV0IG8gPSAhMTtcbiAgICByZXR1cm4gX19QUklWQVRFX2RvY3VtZW50TXV0YXRpb25zU3RvcmUoZSkuSih7XG4gICAgICAgIHJhbmdlOiBzLFxuICAgICAgICBIOiAhMFxuICAgIH0sICgoZSwgbiwgcikgPT4ge1xuICAgICAgICBjb25zdCBbcywgXywgLypiYXRjaElEKi8gYV0gPSBlO1xuICAgICAgICBzID09PSB0ICYmIF8gPT09IGkgJiYgKG8gPSAhMCksIHIuZG9uZSgpO1xuICAgIH0pKS5uZXh0KCgoKSA9PiBvKSk7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYW55IG11dGF0aW9uIHF1ZXVlIGNvbnRhaW5zIHRoZSBnaXZlbiBkb2N1bWVudC4gKi9cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBtdXRhdGlvbnMgb2JqZWN0IHN0b3JlLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfbXV0YXRpb25zU3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgXCJtdXRhdGlvbnNcIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBtdXRhdGlvblF1ZXVlcyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2RvY3VtZW50TXV0YXRpb25zU3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgXCJkb2N1bWVudE11dGF0aW9uc1wiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIG11dGF0aW9uUXVldWVzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbXV0YXRpb25RdWV1ZXNTdG9yZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9nZXRTdG9yZShlLCBcIm11dGF0aW9uUXVldWVzXCIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIE9mZnNldCB0byBlbnN1cmUgbm9uLW92ZXJsYXBwaW5nIHRhcmdldCBpZHMuICovXG4vKipcbiAqIEdlbmVyYXRlcyBtb25vdG9uaWNhbGx5IGluY3JlYXNpbmcgdGFyZ2V0IElEcyBmb3Igc2VuZGluZyB0YXJnZXRzIHRvIHRoZVxuICogd2F0Y2ggc3RyZWFtLlxuICpcbiAqIFRoZSBjbGllbnQgY29uc3RydWN0cyB0d28gZ2VuZXJhdG9ycywgb25lIGZvciB0aGUgdGFyZ2V0IGNhY2hlLCBhbmQgb25lIGZvclxuICogZm9yIHRoZSBzeW5jIGVuZ2luZSAodG8gZ2VuZXJhdGUgbGltYm8gZG9jdW1lbnRzIHRhcmdldHMpLiBUaGVzZVxuICogZ2VuZXJhdG9ycyBwcm9kdWNlIG5vbi1vdmVybGFwcGluZyBJRHMgKGJ5IHVzaW5nIGV2ZW4gYW5kIG9kZCBJRHNcbiAqIHJlc3BlY3RpdmVseSkuXG4gKlxuICogQnkgc2VwYXJhdGluZyB0aGUgdGFyZ2V0IElEIHNwYWNlLCB0aGUgcXVlcnkgY2FjaGUgY2FuIGdlbmVyYXRlIHRhcmdldCBJRHNcbiAqIHRoYXQgcGVyc2lzdCBhY3Jvc3MgY2xpZW50IHJlc3RhcnRzLCB3aGlsZSBzeW5jIGVuZ2luZSBjYW4gaW5kZXBlbmRlbnRseVxuICogZ2VuZXJhdGUgaW4tbWVtb3J5IHRhcmdldCBJRHMgdGhhdCBhcmUgdHJhbnNpZW50IGFuZCBjYW4gYmUgcmV1c2VkIGFmdGVyIGFcbiAqIHJlc3RhcnQuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9UYXJnZXRJZEdlbmVyYXRvciB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLk9uID0gZTtcbiAgICB9XG4gICAgbmV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuT24gKz0gMiwgdGhpcy5PbjtcbiAgICB9XG4gICAgc3RhdGljIE5uKCkge1xuICAgICAgICAvLyBUaGUgdGFyZ2V0IGNhY2hlIGdlbmVyYXRvciBtdXN0IHJldHVybiAnMicgaW4gaXRzIGZpcnN0IGNhbGwgdG8gYG5leHQoKWBcbiAgICAgICAgLy8gYXMgdGhlcmUgaXMgbm8gZGlmZmVyZW50aWF0aW9uIGluIHRoZSBwcm90b2NvbCBsYXllciBiZXR3ZWVuIGFuIHVuc2V0XG4gICAgICAgIC8vIG51bWJlciBhbmQgdGhlIG51bWJlciAnMCcuIElmIHdlIHdlcmUgdG8gc2VudCBhIHRhcmdldCB3aXRoIHRhcmdldCBJRFxuICAgICAgICAvLyAnMCcsIHRoZSBiYWNrZW5kIHdvdWxkIGNvbnNpZGVyIGl0IHVuc2V0IGFuZCByZXBsYWNlIGl0IHdpdGggaXRzIG93biBJRC5cbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfVGFyZ2V0SWRHZW5lcmF0b3IoMCk7XG4gICAgfVxuICAgIHN0YXRpYyBMbigpIHtcbiAgICAgICAgLy8gU3luYyBlbmdpbmUgYXNzaWducyB0YXJnZXQgSURzIGZvciBsaW1ibyBkb2N1bWVudCBkZXRlY3Rpb24uXG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1RhcmdldElkR2VuZXJhdG9yKC0xKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIF9fUFJJVkFURV9JbmRleGVkRGJUYXJnZXRDYWNoZSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gZSwgdGhpcy5zZXJpYWxpemVyID0gdDtcbiAgICB9XG4gICAgLy8gUE9SVElORyBOT1RFOiBXZSBkb24ndCBjYWNoZSBnbG9iYWwgbWV0YWRhdGEgZm9yIHRoZSB0YXJnZXQgY2FjaGUsIHNpbmNlXG4gICAgLy8gc29tZSBvZiBpdCAoaW4gcGFydGljdWxhciBgaGlnaGVzdFRhcmdldElkYCkgY2FuIGJlIG1vZGlmaWVkIGJ5IHNlY29uZGFyeVxuICAgIC8vIHRhYnMuIFdlIGNvdWxkIHBlcmhhcHMgYmUgbW9yZSBncmFudWxhciAoYW5kIGUuZy4gc3RpbGwgY2FjaGVcbiAgICAvLyBgbGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbmAgaW4gbWVtb3J5KSBidXQgZm9yIHNpbXBsaWNpdHkgd2UgY3VycmVudGx5IGdvXG4gICAgLy8gdG8gSW5kZXhlZERiIHdoZW5ldmVyIHdlIG5lZWQgdG8gcmVhZCBtZXRhZGF0YS4gV2UgY2FuIHJldmlzaXQgaWYgaXQgdHVybnNcbiAgICAvLyBvdXQgdG8gaGF2ZSBhIG1lYW5pbmdmdWwgcGVyZm9ybWFuY2UgaW1wYWN0LlxuICAgIGFsbG9jYXRlVGFyZ2V0SWQoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5CbihlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgX19QUklWQVRFX1RhcmdldElkR2VuZXJhdG9yKHQuaGlnaGVzdFRhcmdldElkKTtcbiAgICAgICAgICAgIHJldHVybiB0LmhpZ2hlc3RUYXJnZXRJZCA9IG4ubmV4dCgpLCB0aGlzLmtuKGUsIHQpLm5leHQoKCgpID0+IHQuaGlnaGVzdFRhcmdldElkKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbihlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkJuKGUpLm5leHQoKGUgPT4gU25hcHNob3RWZXJzaW9uLmZyb21UaW1lc3RhbXAobmV3IFRpbWVzdGFtcChlLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24uc2Vjb25kcywgZS5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uLm5hbm9zZWNvbmRzKSkpKTtcbiAgICB9XG4gICAgZ2V0SGlnaGVzdFNlcXVlbmNlTnVtYmVyKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQm4oZSkubmV4dCgoZSA9PiBlLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcikpO1xuICAgIH1cbiAgICBzZXRUYXJnZXRzTWV0YWRhdGEoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5CbihlKS5uZXh0KChyID0+IChyLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA9IHQsIG4gJiYgKHIubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiA9IG4udG9UaW1lc3RhbXAoKSksIFxuICAgICAgICB0ID4gci5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgJiYgKHIuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyID0gdCksIHRoaXMua24oZSwgcikpKSk7XG4gICAgfVxuICAgIGFkZFRhcmdldERhdGEoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5xbihlLCB0KS5uZXh0KCgoKSA9PiB0aGlzLkJuKGUpLm5leHQoKG4gPT4gKG4udGFyZ2V0Q291bnQgKz0gMSwgdGhpcy5Rbih0LCBuKSwgXG4gICAgICAgIHRoaXMua24oZSwgbikpKSkpKTtcbiAgICB9XG4gICAgdXBkYXRlVGFyZ2V0RGF0YShlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnFuKGUsIHQpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXREYXRhKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQoZSwgdC50YXJnZXRJZCkubmV4dCgoKCkgPT4gX19QUklWQVRFX3RhcmdldHNTdG9yZShlKS5kZWxldGUodC50YXJnZXRJZCkpKS5uZXh0KCgoKSA9PiB0aGlzLkJuKGUpKSkubmV4dCgodCA9PiAoX19QUklWQVRFX2hhcmRBc3NlcnQodC50YXJnZXRDb3VudCA+IDApLCBcbiAgICAgICAgdC50YXJnZXRDb3VudCAtPSAxLCB0aGlzLmtuKGUsIHQpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEcm9wcyBhbnkgdGFyZ2V0cyB3aXRoIHNlcXVlbmNlIG51bWJlciBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHVwcGVyIGJvdW5kLCBleGNlcHRpbmcgdGhvc2VcbiAgICAgKiBwcmVzZW50IGluIGBhY3RpdmVUYXJnZXRJZHNgLiBEb2N1bWVudCBhc3NvY2lhdGlvbnMgZm9yIHRoZSByZW1vdmVkIHRhcmdldHMgYXJlIGFsc28gcmVtb3ZlZC5cbiAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgdGFyZ2V0cyByZW1vdmVkLlxuICAgICAqLyAgICByZW1vdmVUYXJnZXRzKGUsIHQsIG4pIHtcbiAgICAgICAgbGV0IHIgPSAwO1xuICAgICAgICBjb25zdCBpID0gW107XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfdGFyZ2V0c1N0b3JlKGUpLkooKChzLCBvKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBfID0gX19QUklWQVRFX2Zyb21EYlRhcmdldChvKTtcbiAgICAgICAgICAgIF8uc2VxdWVuY2VOdW1iZXIgPD0gdCAmJiBudWxsID09PSBuLmdldChfLnRhcmdldElkKSAmJiAocisrLCBpLnB1c2godGhpcy5yZW1vdmVUYXJnZXREYXRhKGUsIF8pKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihpKSkpLm5leHQoKCgpID0+IHIpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbCBwcm92aWRlZCBmdW5jdGlvbiB3aXRoIGVhY2ggYFRhcmdldERhdGFgIHRoYXQgd2UgaGF2ZSBjYWNoZWQuXG4gICAgICovICAgIGZvckVhY2hUYXJnZXQoZSwgdCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3RhcmdldHNTdG9yZShlKS5KKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9mcm9tRGJUYXJnZXQobik7XG4gICAgICAgICAgICB0KHIpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIEJuKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9nbG9iYWxUYXJnZXRTdG9yZShlKS5nZXQoXCJ0YXJnZXRHbG9iYWxLZXlcIikubmV4dCgoZSA9PiAoX19QUklWQVRFX2hhcmRBc3NlcnQobnVsbCAhPT0gZSksIFxuICAgICAgICBlKSkpO1xuICAgIH1cbiAgICBrbihlLCB0KSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfZ2xvYmFsVGFyZ2V0U3RvcmUoZSkucHV0KFwidGFyZ2V0R2xvYmFsS2V5XCIsIHQpO1xuICAgIH1cbiAgICBxbihlLCB0KSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfdGFyZ2V0c1N0b3JlKGUpLnB1dChfX1BSSVZBVEVfdG9EYlRhcmdldCh0aGlzLnNlcmlhbGl6ZXIsIHQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW4tcGxhY2UgdXBkYXRlcyB0aGUgcHJvdmlkZWQgbWV0YWRhdGEgdG8gYWNjb3VudCBmb3IgdmFsdWVzIGluIHRoZSBnaXZlblxuICAgICAqIFRhcmdldERhdGEuIFNhdmluZyBpcyBkb25lIHNlcGFyYXRlbHkuIFJldHVybnMgdHJ1ZSBpZiB0aGVyZSB3ZXJlIGFueVxuICAgICAqIGNoYW5nZXMgdG8gdGhlIG1ldGFkYXRhLlxuICAgICAqLyAgICBRbihlLCB0KSB7XG4gICAgICAgIGxldCBuID0gITE7XG4gICAgICAgIHJldHVybiBlLnRhcmdldElkID4gdC5oaWdoZXN0VGFyZ2V0SWQgJiYgKHQuaGlnaGVzdFRhcmdldElkID0gZS50YXJnZXRJZCwgbiA9ICEwKSwgXG4gICAgICAgIGUuc2VxdWVuY2VOdW1iZXIgPiB0LmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciAmJiAodC5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgPSBlLnNlcXVlbmNlTnVtYmVyLCBcbiAgICAgICAgbiA9ICEwKSwgbjtcbiAgICB9XG4gICAgZ2V0VGFyZ2V0Q291bnQoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5CbihlKS5uZXh0KChlID0+IGUudGFyZ2V0Q291bnQpKTtcbiAgICB9XG4gICAgZ2V0VGFyZ2V0RGF0YShlLCB0KSB7XG4gICAgICAgIC8vIEl0ZXJhdGluZyBieSB0aGUgY2Fub25pY2FsSWQgbWF5IHlpZWxkIG1vcmUgdGhhbiBvbmUgcmVzdWx0IGJlY2F1c2VcbiAgICAgICAgLy8gY2Fub25pY2FsSWQgdmFsdWVzIGFyZSBub3QgcmVxdWlyZWQgdG8gYmUgdW5pcXVlIHBlciB0YXJnZXQuIFRoaXMgcXVlcnlcbiAgICAgICAgLy8gZGVwZW5kcyBvbiB0aGUgcXVlcnlUYXJnZXRzIGluZGV4IHRvIGJlIGVmZmljaWVudC5cbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9jYW5vbmlmeVRhcmdldCh0KSwgciA9IElEQktleVJhbmdlLmJvdW5kKFsgbiwgTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZIF0sIFsgbiwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIF0pO1xuICAgICAgICBsZXQgaSA9IG51bGw7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfdGFyZ2V0c1N0b3JlKGUpLkooe1xuICAgICAgICAgICAgcmFuZ2U6IHIsXG4gICAgICAgICAgICBpbmRleDogXCJxdWVyeVRhcmdldHNJbmRleFwiXG4gICAgICAgIH0sICgoZSwgbiwgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IF9fUFJJVkFURV9mcm9tRGJUYXJnZXQobik7XG4gICAgICAgICAgICAvLyBBZnRlciBmaW5kaW5nIGEgcG90ZW50aWFsIG1hdGNoLCBjaGVjayB0aGF0IHRoZSB0YXJnZXQgaXNcbiAgICAgICAgICAgIC8vIGFjdHVhbGx5IGVxdWFsIHRvIHRoZSByZXF1ZXN0ZWQgdGFyZ2V0LlxuICAgICAgICAgICAgICAgICAgICAgICAgX19QUklWQVRFX3RhcmdldEVxdWFscyh0LCBzLnRhcmdldCkgJiYgKGkgPSBzLCByLmRvbmUoKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIGFkZE1hdGNoaW5nS2V5cyhlLCB0LCBuKSB7XG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogVGhlIHJldmVyc2UgaW5kZXggKGRvY3VtZW50c1RhcmdldHMpIGlzIG1haW50YWluZWQgYnlcbiAgICAgICAgLy8gSW5kZXhlZERiLlxuICAgICAgICBjb25zdCByID0gW10sIGkgPSBfX1BSSVZBVEVfZG9jdW1lbnRUYXJnZXRTdG9yZShlKTtcbiAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gX19QUklWQVRFX2VuY29kZVJlc291cmNlUGF0aCh0LnBhdGgpO1xuICAgICAgICAgICAgci5wdXNoKGkucHV0KHtcbiAgICAgICAgICAgICAgICB0YXJnZXRJZDogbixcbiAgICAgICAgICAgICAgICBwYXRoOiBzXG4gICAgICAgICAgICB9KSksIHIucHVzaCh0aGlzLnJlZmVyZW5jZURlbGVnYXRlLmFkZFJlZmVyZW5jZShlLCBuLCB0KSk7XG4gICAgICAgIH0pKSwgUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3Iocik7XG4gICAgfVxuICAgIHJlbW92ZU1hdGNoaW5nS2V5cyhlLCB0LCBuKSB7XG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogVGhlIHJldmVyc2UgaW5kZXggKGRvY3VtZW50c1RhcmdldHMpIGlzIG1haW50YWluZWQgYnlcbiAgICAgICAgLy8gSW5kZXhlZERiLlxuICAgICAgICBjb25zdCByID0gX19QUklWQVRFX2RvY3VtZW50VGFyZ2V0U3RvcmUoZSk7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaCh0LCAodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gX19QUklWQVRFX2VuY29kZVJlc291cmNlUGF0aCh0LnBhdGgpO1xuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKFsgci5kZWxldGUoWyBuLCBpIF0pLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLnJlbW92ZVJlZmVyZW5jZShlLCBuLCB0KSBdKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICByZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZG9jdW1lbnRUYXJnZXRTdG9yZShlKSwgciA9IElEQktleVJhbmdlLmJvdW5kKFsgdCBdLCBbIHQgKyAxIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgIC8qdXBwZXJPcGVuPSovICEwKTtcbiAgICAgICAgcmV0dXJuIG4uZGVsZXRlKHIpO1xuICAgIH1cbiAgICBnZXRNYXRjaGluZ0tleXNGb3JUYXJnZXRJZChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBJREJLZXlSYW5nZS5ib3VuZChbIHQgXSwgWyB0ICsgMSBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCksIHIgPSBfX1BSSVZBVEVfZG9jdW1lbnRUYXJnZXRTdG9yZShlKTtcbiAgICAgICAgbGV0IGkgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKTtcbiAgICAgICAgcmV0dXJuIHIuSih7XG4gICAgICAgICAgICByYW5nZTogbixcbiAgICAgICAgICAgIEg6ICEwXG4gICAgICAgIH0sICgoZSwgdCwgbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9kZWNvZGVSZXNvdXJjZVBhdGgoZVsxXSksIHMgPSBuZXcgRG9jdW1lbnRLZXkocik7XG4gICAgICAgICAgICBpID0gaS5hZGQocyk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIGNvbnRhaW5zS2V5KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgodC5wYXRoKSwgciA9IElEQktleVJhbmdlLmJvdW5kKFsgbiBdLCBbIF9fUFJJVkFURV9pbW1lZGlhdGVTdWNjZXNzb3IobikgXSwgXG4gICAgICAgIC8qbG93ZXJPcGVuPSovICExLCBcbiAgICAgICAgLyp1cHBlck9wZW49Ki8gITApO1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfZG9jdW1lbnRUYXJnZXRTdG9yZShlKS5KKHtcbiAgICAgICAgICAgIGluZGV4OiBcImRvY3VtZW50VGFyZ2V0c0luZGV4XCIsXG4gICAgICAgICAgICBIOiAhMCxcbiAgICAgICAgICAgIHJhbmdlOiByXG4gICAgICAgIH0sICgoW2UsIHRdLCBuLCByKSA9PiB7XG4gICAgICAgICAgICAvLyBIYXZpbmcgYSBzZW50aW5lbCByb3cgZm9yIGEgZG9jdW1lbnQgZG9lcyBub3QgY291bnQgYXMgY29udGFpbmluZyB0aGF0IGRvY3VtZW50O1xuICAgICAgICAgICAgLy8gRm9yIHRoZSB0YXJnZXQgY2FjaGUsIGNvbnRhaW5pbmcgdGhlIGRvY3VtZW50IG1lYW5zIHRoZSBkb2N1bWVudCBpcyBwYXJ0IG9mIHNvbWVcbiAgICAgICAgICAgIC8vIHRhcmdldC5cbiAgICAgICAgICAgIDAgIT09IGUgJiYgKGkrKywgci5kb25lKCkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSA+IDApKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgYSBUYXJnZXREYXRhIGVudHJ5IGJ5IHRhcmdldCBJRC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0YXJnZXRJZCAtIFRoZSB0YXJnZXQgSUQgb2YgdGhlIFRhcmdldERhdGEgZW50cnkgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBUaGUgY2FjaGVkIFRhcmdldERhdGEgZW50cnksIG9yIG51bGwgaWYgdGhlIGNhY2hlIGhhcyBubyBlbnRyeSBmb3JcbiAgICAgKiB0aGUgdGFyZ2V0LlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgb3QoZSwgdCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3RhcmdldHNTdG9yZShlKS5nZXQodCkubmV4dCgoZSA9PiBlID8gX19QUklWQVRFX2Zyb21EYlRhcmdldChlKSA6IG51bGwpKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBxdWVyaWVzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdGFyZ2V0c1N0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2dldFN0b3JlKGUsIFwidGFyZ2V0c1wiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIHRhcmdldCBnbG9iYWxzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZ2xvYmFsVGFyZ2V0U3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgXCJ0YXJnZXRHbG9iYWxcIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBkb2N1bWVudCB0YXJnZXQgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9kb2N1bWVudFRhcmdldFN0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2dldFN0b3JlKGUsIFwidGFyZ2V0RG9jdW1lbnRzXCIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfYnVmZmVyRW50cnlDb21wYXJhdG9yKFtlLCB0XSwgW24sIHJdKSB7XG4gICAgY29uc3QgaSA9IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKGUsIG4pO1xuICAgIHJldHVybiAwID09PSBpID8gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IodCwgcikgOiBpO1xufVxuXG4vKipcbiAqIFVzZWQgdG8gY2FsY3VsYXRlIHRoZSBudGggc2VxdWVuY2UgbnVtYmVyLiBLZWVwcyBhIHJvbGxpbmcgYnVmZmVyIG9mIHRoZVxuICogbG93ZXN0IG4gdmFsdWVzIHBhc3NlZCB0byBgYWRkRWxlbWVudGAsIGFuZCBmaW5hbGx5IHJlcG9ydHMgdGhlIGxhcmdlc3Qgb2ZcbiAqIHRoZW0gaW4gYG1heFZhbHVlYC5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfUm9sbGluZ1NlcXVlbmNlTnVtYmVyQnVmZmVyIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuS24gPSBlLCB0aGlzLmJ1ZmZlciA9IG5ldyBTb3J0ZWRTZXQoX19QUklWQVRFX2J1ZmZlckVudHJ5Q29tcGFyYXRvciksIHRoaXMuJG4gPSAwO1xuICAgIH1cbiAgICBVbigpIHtcbiAgICAgICAgcmV0dXJuICsrdGhpcy4kbjtcbiAgICB9XG4gICAgV24oZSkge1xuICAgICAgICBjb25zdCB0ID0gWyBlLCB0aGlzLlVuKCkgXTtcbiAgICAgICAgaWYgKHRoaXMuYnVmZmVyLnNpemUgPCB0aGlzLktuKSB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLmFkZCh0KTsgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5idWZmZXIubGFzdCgpO1xuICAgICAgICAgICAgX19QUklWQVRFX2J1ZmZlckVudHJ5Q29tcGFyYXRvcih0LCBlKSA8IDAgJiYgKHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuZGVsZXRlKGUpLmFkZCh0KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IG1heFZhbHVlKCkge1xuICAgICAgICAvLyBHdWFyYW50ZWVkIHRvIGJlIG5vbi1lbXB0eS4gSWYgd2UgZGVjaWRlIHdlIGFyZSBub3QgY29sbGVjdGluZyBhbnlcbiAgICAgICAgLy8gc2VxdWVuY2UgbnVtYmVycywgbnRoU2VxdWVuY2VOdW1iZXIgYmVsb3cgc2hvcnQtY2lyY3VpdHMuIElmIHdlIGhhdmVcbiAgICAgICAgLy8gZGVjaWRlZCB0aGF0IHdlIGFyZSBjb2xsZWN0aW5nIG4gc2VxdWVuY2UgbnVtYmVycywgaXQncyBiZWNhdXNlIG4gaXMgc29tZVxuICAgICAgICAvLyBwZXJjZW50YWdlIG9mIHRoZSBleGlzdGluZyBzZXF1ZW5jZSBudW1iZXJzLiBUaGF0IG1lYW5zIHdlIHNob3VsZCBuZXZlclxuICAgICAgICAvLyBiZSBpbiBhIHNpdHVhdGlvbiB3aGVyZSB3ZSBhcmUgY29sbGVjdGluZyBzZXF1ZW5jZSBudW1iZXJzIGJ1dCBkb24ndFxuICAgICAgICAvLyBhY3R1YWxseSBoYXZlIGFueS5cbiAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyLmxhc3QoKVswXTtcbiAgICB9XG59XG5cbi8qKlxuICogVGhpcyBjbGFzcyBpcyByZXNwb25zaWJsZSBmb3IgdGhlIHNjaGVkdWxpbmcgb2YgTFJVIGdhcmJhZ2UgY29sbGVjdGlvbi4gSXQgaGFuZGxlcyBjaGVja2luZ1xuICogd2hldGhlciBvciBub3QgR0MgaXMgZW5hYmxlZCwgYXMgd2VsbCBhcyB3aGljaCBkZWxheSB0byB1c2UgYmVmb3JlIHRoZSBuZXh0IHJ1bi5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfTHJ1U2NoZWR1bGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuKSB7XG4gICAgICAgIHRoaXMuZ2FyYmFnZUNvbGxlY3RvciA9IGUsIHRoaXMuYXN5bmNRdWV1ZSA9IHQsIHRoaXMubG9jYWxTdG9yZSA9IG4sIHRoaXMuR24gPSBudWxsO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgLTEgIT09IHRoaXMuZ2FyYmFnZUNvbGxlY3Rvci5wYXJhbXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZCAmJiB0aGlzLnpuKDZlNCk7XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIHRoaXMuR24gJiYgKHRoaXMuR24uY2FuY2VsKCksIHRoaXMuR24gPSBudWxsKTtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWQoKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLkduO1xuICAgIH1cbiAgICB6bihlKSB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgYEdhcmJhZ2UgY29sbGVjdGlvbiBzY2hlZHVsZWQgaW4gJHtlfW1zYCksIFxuICAgICAgICB0aGlzLkduID0gdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBZnRlckRlbGF5KFwibHJ1X2dhcmJhZ2VfY29sbGVjdGlvblwiIC8qIFRpbWVySWQuTHJ1R2FyYmFnZUNvbGxlY3Rpb24gKi8gLCBlLCAoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5HbiA9IG51bGw7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubG9jYWxTdG9yZS5jb2xsZWN0R2FyYmFnZSh0aGlzLmdhcmJhZ2VDb2xsZWN0b3IpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9pc0luZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IoZSkgPyBfX1BSSVZBVEVfbG9nRGVidWcoXCJMcnVHYXJiYWdlQ29sbGVjdG9yXCIsIFwiSWdub3JpbmcgSW5kZXhlZERCIGVycm9yIGR1cmluZyBnYXJiYWdlIGNvbGxlY3Rpb246IFwiLCBlKSA6IGF3YWl0IF9fUFJJVkFURV9pZ25vcmVJZlByaW1hcnlMZWFzZUxvc3MoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnpuKDNlNSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbi8qKlxuICogSW1wbGVtZW50cyB0aGUgc3RlcHMgZm9yIExSVSBnYXJiYWdlIGNvbGxlY3Rpb24uXG4gKi8gY2xhc3MgX19QUklWQVRFX0xydUdhcmJhZ2VDb2xsZWN0b3JJbXBsIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMuam4gPSBlLCB0aGlzLnBhcmFtcyA9IHQ7XG4gICAgfVxuICAgIGNhbGN1bGF0ZVRhcmdldENvdW50KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuam4uSG4oZSkubmV4dCgoZSA9PiBNYXRoLmZsb29yKHQgLyAxMDAgKiBlKSkpO1xuICAgIH1cbiAgICBudGhTZXF1ZW5jZU51bWJlcihlLCB0KSB7XG4gICAgICAgIGlmICgwID09PSB0KSByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoX19QUklWQVRFX0xpc3RlblNlcXVlbmNlLm9lKTtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBfX1BSSVZBVEVfUm9sbGluZ1NlcXVlbmNlTnVtYmVyQnVmZmVyKHQpO1xuICAgICAgICByZXR1cm4gdGhpcy5qbi5mb3JFYWNoVGFyZ2V0KGUsIChlID0+IG4uV24oZS5zZXF1ZW5jZU51bWJlcikpKS5uZXh0KCgoKSA9PiB0aGlzLmpuLkpuKGUsIChlID0+IG4uV24oZSkpKSkpLm5leHQoKCgpID0+IG4ubWF4VmFsdWUpKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0cyhlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmpuLnJlbW92ZVRhcmdldHMoZSwgdCwgbik7XG4gICAgfVxuICAgIHJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuam4ucmVtb3ZlT3JwaGFuZWREb2N1bWVudHMoZSwgdCk7XG4gICAgfVxuICAgIGNvbGxlY3QoZSwgdCkge1xuICAgICAgICByZXR1cm4gLTEgPT09IHRoaXMucGFyYW1zLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQgPyAoX19QUklWQVRFX2xvZ0RlYnVnKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBcIkdhcmJhZ2UgY29sbGVjdGlvbiBza2lwcGVkOyBkaXNhYmxlZFwiKSwgXG4gICAgICAgIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKEFlKSkgOiB0aGlzLmdldENhY2hlU2l6ZShlKS5uZXh0KChuID0+IG4gPCB0aGlzLnBhcmFtcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkID8gKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgYEdhcmJhZ2UgY29sbGVjdGlvbiBza2lwcGVkOyBDYWNoZSBzaXplICR7bn0gaXMgbG93ZXIgdGhhbiB0aHJlc2hvbGQgJHt0aGlzLnBhcmFtcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkfWApLCBcbiAgICAgICAgQWUpIDogdGhpcy5ZbihlLCB0KSkpO1xuICAgIH1cbiAgICBnZXRDYWNoZVNpemUoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5qbi5nZXRDYWNoZVNpemUoZSk7XG4gICAgfVxuICAgIFluKGUsIHQpIHtcbiAgICAgICAgbGV0IG4sIHIsIGksIHMsIG8sIGEsIHU7XG4gICAgICAgIGNvbnN0IGMgPSBEYXRlLm5vdygpO1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxjdWxhdGVUYXJnZXRDb3VudChlLCB0aGlzLnBhcmFtcy5wZXJjZW50aWxlVG9Db2xsZWN0KS5uZXh0KCh0ID0+IChcbiAgICAgICAgLy8gQ2FwIGF0IHRoZSBjb25maWd1cmVkIG1heFxuICAgICAgICB0ID4gdGhpcy5wYXJhbXMubWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCA/IChfX1BSSVZBVEVfbG9nRGVidWcoXCJMcnVHYXJiYWdlQ29sbGVjdG9yXCIsIGBDYXBwaW5nIHNlcXVlbmNlIG51bWJlcnMgdG8gY29sbGVjdCBkb3duIHRvIHRoZSBtYXhpbXVtIG9mICR7dGhpcy5wYXJhbXMubWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdH0gZnJvbSAke3R9YCksIFxuICAgICAgICByID0gdGhpcy5wYXJhbXMubWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCkgOiByID0gdCwgcyA9IERhdGUubm93KCksIHRoaXMubnRoU2VxdWVuY2VOdW1iZXIoZSwgcikpKSkubmV4dCgociA9PiAobiA9IHIsIFxuICAgICAgICBvID0gRGF0ZS5ub3coKSwgdGhpcy5yZW1vdmVUYXJnZXRzKGUsIG4sIHQpKSkpLm5leHQoKHQgPT4gKGkgPSB0LCBhID0gRGF0ZS5ub3coKSwgXG4gICAgICAgIHRoaXMucmVtb3ZlT3JwaGFuZWREb2N1bWVudHMoZSwgbikpKSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBpZiAodSA9IERhdGUubm93KCksIF9fUFJJVkFURV9nZXRMb2dMZXZlbCgpIDw9IExvZ0xldmVsLkRFQlVHKSB7XG4gICAgICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBgTFJVIEdhcmJhZ2UgQ29sbGVjdGlvblxcblxcdENvdW50ZWQgdGFyZ2V0cyBpbiAke3MgLSBjfW1zXFxuXFx0RGV0ZXJtaW5lZCBsZWFzdCByZWNlbnRseSB1c2VkICR7cn0gaW4gYCArIChvIC0gcykgKyBcIm1zXFxuXCIgKyBgXFx0UmVtb3ZlZCAke2l9IHRhcmdldHMgaW4gYCArIChhIC0gbykgKyBcIm1zXFxuXCIgKyBgXFx0UmVtb3ZlZCAke2V9IGRvY3VtZW50cyBpbiBgICsgKHUgLSBhKSArIFwibXNcXG5cIiArIGBUb3RhbCBEdXJhdGlvbjogJHt1IC0gY31tc2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgICBkaWRSdW46ICEwLFxuICAgICAgICAgICAgICAgIHNlcXVlbmNlTnVtYmVyc0NvbGxlY3RlZDogcixcbiAgICAgICAgICAgICAgICB0YXJnZXRzUmVtb3ZlZDogaSxcbiAgICAgICAgICAgICAgICBkb2N1bWVudHNSZW1vdmVkOiBlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX25ld0xydUdhcmJhZ2VDb2xsZWN0b3IoZSwgdCkge1xuICAgIHJldHVybiBuZXcgX19QUklWQVRFX0xydUdhcmJhZ2VDb2xsZWN0b3JJbXBsKGUsIHQpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFByb3ZpZGVzIExSVSBmdW5jdGlvbmFsaXR5IGZvciBJbmRleGVkREIgcGVyc2lzdGVuY2UuICovIGNsYXNzIF9fUFJJVkFURV9JbmRleGVkRGJMcnVEZWxlZ2F0ZUltcGwge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5kYiA9IGUsIHRoaXMuZ2FyYmFnZUNvbGxlY3RvciA9IF9fUFJJVkFURV9uZXdMcnVHYXJiYWdlQ29sbGVjdG9yKHRoaXMsIHQpO1xuICAgIH1cbiAgICBIbihlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLlpuKGUpO1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRUYXJnZXRDYWNoZSgpLmdldFRhcmdldENvdW50KGUpLm5leHQoKGUgPT4gdC5uZXh0KCh0ID0+IGUgKyB0KSkpKTtcbiAgICB9XG4gICAgWm4oZSkge1xuICAgICAgICBsZXQgdCA9IDA7XG4gICAgICAgIHJldHVybiB0aGlzLkpuKGUsIChlID0+IHtcbiAgICAgICAgICAgIHQrKztcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHQpKTtcbiAgICB9XG4gICAgZm9yRWFjaFRhcmdldChlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRiLmdldFRhcmdldENhY2hlKCkuZm9yRWFjaFRhcmdldChlLCB0KTtcbiAgICB9XG4gICAgSm4oZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5YbihlLCAoKGUsIG4pID0+IHQobikpKTtcbiAgICB9XG4gICAgYWRkUmVmZXJlbmNlKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV93cml0ZVNlbnRpbmVsS2V5KGUsIG4pO1xuICAgIH1cbiAgICByZW1vdmVSZWZlcmVuY2UoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3dyaXRlU2VudGluZWxLZXkoZSwgbik7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldHMoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRUYXJnZXRDYWNoZSgpLnJlbW92ZVRhcmdldHMoZSwgdCwgbik7XG4gICAgfVxuICAgIG1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV93cml0ZVNlbnRpbmVsS2V5KGUsIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgYW55dGhpbmcgd291bGQgcHJldmVudCB0aGlzIGRvY3VtZW50IGZyb20gYmVpbmcgZ2FyYmFnZVxuICAgICAqIGNvbGxlY3RlZCwgZ2l2ZW4gdGhhdCB0aGUgZG9jdW1lbnQgaW4gcXVlc3Rpb24gaXMgbm90IHByZXNlbnQgaW4gYW55XG4gICAgICogdGFyZ2V0cyBhbmQgaGFzIGEgc2VxdWVuY2UgbnVtYmVyIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgdXBwZXIgYm91bmQgZm9yXG4gICAgICogdGhlIGNvbGxlY3Rpb24gcnVuLlxuICAgICAqLyAgICBlcihlLCB0KSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfbXV0YXRpb25RdWV1ZXNDb250YWluS2V5KGUsIHQpIHtcbiAgICAgICAgICAgIGxldCBuID0gITE7XG4gICAgICAgICAgICByZXR1cm4gX19QUklWQVRFX211dGF0aW9uUXVldWVzU3RvcmUoZSkuWSgociA9PiBfX1BSSVZBVEVfbXV0YXRpb25RdWV1ZUNvbnRhaW5zS2V5KGUsIHIsIHQpLm5leHQoKGUgPT4gKGUgJiYgKG4gPSAhMCksIFxuICAgICAgICAgICAgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoIWUpKSkpKSkubmV4dCgoKCkgPT4gbikpO1xuICAgICAgICB9KGUsIHQpO1xuICAgIH1cbiAgICByZW1vdmVPcnBoYW5lZERvY3VtZW50cyhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLmRiLmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKS5uZXdDaGFuZ2VCdWZmZXIoKSwgciA9IFtdO1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIHJldHVybiB0aGlzLlhuKGUsICgocywgbykgPT4ge1xuICAgICAgICAgICAgaWYgKG8gPD0gdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmVyKGUsIHMpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXQpIFxuICAgICAgICAgICAgICAgICAgICAvLyBPdXIgc2l6ZSBhY2NvdW50aW5nIHJlcXVpcmVzIHVzIHRvIHJlYWQgYWxsIGRvY3VtZW50cyBiZWZvcmVcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZpbmcgdGhlbS5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkrKywgbi5nZXRFbnRyeShlLCBzKS5uZXh0KCgoKSA9PiAobi5yZW1vdmVFbnRyeShzLCBTbmFwc2hvdFZlcnNpb24ubWluKCkpLCBcbiAgICAgICAgICAgICAgICAgICAgX19QUklWQVRFX2RvY3VtZW50VGFyZ2V0U3RvcmUoZSkuZGVsZXRlKGZ1bmN0aW9uIF9fUFJJVkFURV9zZW50aW5lbEtleSQxKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbIDAsIF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgoZS5wYXRoKSBdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICogQHJldHVybnMgQSB2YWx1ZSBzdWl0YWJsZSBmb3Igd3JpdGluZyBhIHNlbnRpbmVsIHJvdyBpbiB0aGUgdGFyZ2V0LWRvY3VtZW50XG4gKiBzdG9yZS5cbiAqLyAocykpKSkpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICByLnB1c2godCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihyKSkpLm5leHQoKCgpID0+IG4uYXBwbHkoZSkpKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0LndpdGhTZXF1ZW5jZU51bWJlcihlLmN1cnJlbnRTZXF1ZW5jZU51bWJlcik7XG4gICAgICAgIHJldHVybiB0aGlzLmRiLmdldFRhcmdldENhY2hlKCkudXBkYXRlVGFyZ2V0RGF0YShlLCBuKTtcbiAgICB9XG4gICAgdXBkYXRlTGltYm9Eb2N1bWVudChlLCB0KSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfd3JpdGVTZW50aW5lbEtleShlLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbCBwcm92aWRlZCBmdW5jdGlvbiBmb3IgZWFjaCBkb2N1bWVudCBpbiB0aGUgY2FjaGUgdGhhdCBpcyAnb3JwaGFuZWQnLiBPcnBoYW5lZFxuICAgICAqIG1lYW5zIG5vdCBhIHBhcnQgb2YgYW55IHRhcmdldCwgc28gdGhlIG9ubHkgZW50cnkgaW4gdGhlIHRhcmdldC1kb2N1bWVudCBpbmRleCBmb3JcbiAgICAgKiB0aGF0IGRvY3VtZW50IHdpbGwgYmUgdGhlIHNlbnRpbmVsIHJvdyAodGFyZ2V0SWQgMCksIHdoaWNoIHdpbGwgYWxzbyBoYXZlIHRoZSBzZXF1ZW5jZVxuICAgICAqIG51bWJlciBmb3IgdGhlIGxhc3QgdGltZSB0aGUgZG9jdW1lbnQgd2FzIGFjY2Vzc2VkLlxuICAgICAqLyAgICBYbihlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZG9jdW1lbnRUYXJnZXRTdG9yZShlKTtcbiAgICAgICAgbGV0IHIsIGkgPSBfX1BSSVZBVEVfTGlzdGVuU2VxdWVuY2Uub2U7XG4gICAgICAgIHJldHVybiBuLkooe1xuICAgICAgICAgICAgaW5kZXg6IFwiZG9jdW1lbnRUYXJnZXRzSW5kZXhcIlxuICAgICAgICB9LCAoKFtlLCBuXSwge3BhdGg6IHMsIHNlcXVlbmNlTnVtYmVyOiBvfSkgPT4ge1xuICAgICAgICAgICAgMCA9PT0gZSA/IChcbiAgICAgICAgICAgIC8vIGlmIG5leHRUb1JlcG9ydCBpcyB2YWxpZCwgcmVwb3J0IGl0LCB0aGlzIGlzIGEgbmV3IGtleSBzbyB0aGVcbiAgICAgICAgICAgIC8vIGxhc3Qgb25lIG11c3Qgbm90IGJlIGEgbWVtYmVyIG9mIGFueSB0YXJnZXRzLlxuICAgICAgICAgICAgaSAhPT0gX19QUklWQVRFX0xpc3RlblNlcXVlbmNlLm9lICYmIHQobmV3IERvY3VtZW50S2V5KF9fUFJJVkFURV9kZWNvZGVSZXNvdXJjZVBhdGgocikpLCBpKSwgXG4gICAgICAgICAgICAvLyBzZXQgbmV4dFRvUmVwb3J0IHRvIGJlIHRoaXMgc2VxdWVuY2UgbnVtYmVyLiBJdCdzIHRoZSBuZXh0IG9uZSB3ZVxuICAgICAgICAgICAgLy8gbWlnaHQgcmVwb3J0LCBpZiB3ZSBkb24ndCBmaW5kIGFueSB0YXJnZXRzIGZvciB0aGlzIGRvY3VtZW50LlxuICAgICAgICAgICAgLy8gTm90ZSB0aGF0IHRoZSBzZXF1ZW5jZSBudW1iZXIgbXVzdCBiZSBkZWZpbmVkIHdoZW4gdGhlIHRhcmdldElkXG4gICAgICAgICAgICAvLyBpcyAwLlxuICAgICAgICAgICAgaSA9IG8sIHIgPSBzKSA6IFxuICAgICAgICAgICAgLy8gc2V0IG5leHRUb1JlcG9ydCB0byBiZSBpbnZhbGlkLCB3ZSBrbm93IHdlIGRvbid0IG5lZWQgdG8gcmVwb3J0XG4gICAgICAgICAgICAvLyB0aGlzIG9uZSBzaW5jZSB3ZSBmb3VuZCBhIHRhcmdldCBmb3IgaXQuXG4gICAgICAgICAgICBpID0gX19QUklWQVRFX0xpc3RlblNlcXVlbmNlLm9lO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgLy8gU2luY2Ugd2UgcmVwb3J0IHNlcXVlbmNlIG51bWJlcnMgYWZ0ZXIgZ2V0dGluZyB0byB0aGUgbmV4dCBrZXksIHdlXG4gICAgICAgICAgICAvLyBuZWVkIHRvIGNoZWNrIGlmIHRoZSBsYXN0IGtleSB3ZSBpdGVyYXRlZCBvdmVyIHdhcyBhbiBvcnBoYW5lZFxuICAgICAgICAgICAgLy8gZG9jdW1lbnQgYW5kIHJlcG9ydCBpdC5cbiAgICAgICAgICAgIGkgIT09IF9fUFJJVkFURV9MaXN0ZW5TZXF1ZW5jZS5vZSAmJiB0KG5ldyBEb2N1bWVudEtleShfX1BSSVZBVEVfZGVjb2RlUmVzb3VyY2VQYXRoKHIpKSwgaSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0Q2FjaGVTaXplKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpLmdldFNpemUoZSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfd3JpdGVTZW50aW5lbEtleShlLCB0KSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9kb2N1bWVudFRhcmdldFN0b3JlKGUpLnB1dChmdW5jdGlvbiBfX1BSSVZBVEVfc2VudGluZWxSb3coZSwgdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGFyZ2V0SWQ6IDAsXG4gICAgICAgICAgICBwYXRoOiBfX1BSSVZBVEVfZW5jb2RlUmVzb3VyY2VQYXRoKGUucGF0aCksXG4gICAgICAgICAgICBzZXF1ZW5jZU51bWJlcjogdFxuICAgICAgICB9O1xuICAgIH0odCwgZS5jdXJyZW50U2VxdWVuY2VOdW1iZXIpKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gaW4tbWVtb3J5IGJ1ZmZlciBvZiBlbnRyaWVzIHRvIGJlIHdyaXR0ZW4gdG8gYSBSZW1vdGVEb2N1bWVudENhY2hlLlxuICogSXQgY2FuIGJlIHVzZWQgdG8gYmF0Y2ggdXAgYSBzZXQgb2YgY2hhbmdlcyB0byBiZSB3cml0dGVuIHRvIHRoZSBjYWNoZSwgYnV0XG4gKiBhZGRpdGlvbmFsbHkgc3VwcG9ydHMgcmVhZGluZyBlbnRyaWVzIGJhY2sgd2l0aCB0aGUgYGdldEVudHJ5KClgIG1ldGhvZCxcbiAqIGZhbGxpbmcgYmFjayB0byB0aGUgdW5kZXJseWluZyBSZW1vdGVEb2N1bWVudENhY2hlIGlmIG5vIGVudHJ5IGlzXG4gKiBidWZmZXJlZC5cbiAqXG4gKiBFbnRyaWVzIGFkZGVkIHRvIHRoZSBjYWNoZSAqbXVzdCogYmUgcmVhZCBmaXJzdC4gVGhpcyBpcyB0byBmYWNpbGl0YXRlXG4gKiBjYWxjdWxhdGluZyB0aGUgc2l6ZSBkZWx0YSBvZiB0aGUgcGVuZGluZyBjaGFuZ2VzLlxuICpcbiAqIFBPUlRJTkcgTk9URTogVGhpcyBjbGFzcyB3YXMgaW1wbGVtZW50ZWQgdGhlbiByZW1vdmVkIGZyb20gb3RoZXIgcGxhdGZvcm1zLlxuICogSWYgYnl0ZS1jb3VudGluZyBlbmRzIHVwIGJlaW5nIG5lZWRlZCBvbiB0aGUgb3RoZXIgcGxhdGZvcm1zLCBjb25zaWRlclxuICogcG9ydGluZyB0aGlzIGNsYXNzIGFzIHBhcnQgb2YgdGhhdCBpbXBsZW1lbnRhdGlvbiB3b3JrLlxuICovIGNsYXNzIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gQSBtYXBwaW5nIG9mIGRvY3VtZW50IGtleSB0byB0aGUgbmV3IGNhY2hlIGVudHJ5IHRoYXQgc2hvdWxkIGJlIHdyaXR0ZW4uXG4gICAgICAgIHRoaXMuY2hhbmdlcyA9IG5ldyBPYmplY3RNYXAoKGUgPT4gZS50b1N0cmluZygpKSwgKChlLCB0KSA9PiBlLmlzRXF1YWwodCkpKSwgdGhpcy5jaGFuZ2VzQXBwbGllZCA9ICExO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCdWZmZXJzIGEgYFJlbW90ZURvY3VtZW50Q2FjaGUuYWRkRW50cnkoKWAgY2FsbC5cbiAgICAgKlxuICAgICAqIFlvdSBjYW4gb25seSBtb2RpZnkgZG9jdW1lbnRzIHRoYXQgaGF2ZSBhbHJlYWR5IGJlZW4gcmV0cmlldmVkIHZpYVxuICAgICAqIGBnZXRFbnRyeSgpL2dldEVudHJpZXMoKWAgKGVuZm9yY2VkIHZpYSBJbmRleGVkRGJzIGBhcHBseSgpYCkuXG4gICAgICovICAgIGFkZEVudHJ5KGUpIHtcbiAgICAgICAgdGhpcy5hc3NlcnROb3RBcHBsaWVkKCksIHRoaXMuY2hhbmdlcy5zZXQoZS5rZXksIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCdWZmZXJzIGEgYFJlbW90ZURvY3VtZW50Q2FjaGUucmVtb3ZlRW50cnkoKWAgY2FsbC5cbiAgICAgKlxuICAgICAqIFlvdSBjYW4gb25seSByZW1vdmUgZG9jdW1lbnRzIHRoYXQgaGF2ZSBhbHJlYWR5IGJlZW4gcmV0cmlldmVkIHZpYVxuICAgICAqIGBnZXRFbnRyeSgpL2dldEVudHJpZXMoKWAgKGVuZm9yY2VkIHZpYSBJbmRleGVkRGJzIGBhcHBseSgpYCkuXG4gICAgICovICAgIHJlbW92ZUVudHJ5KGUsIHQpIHtcbiAgICAgICAgdGhpcy5hc3NlcnROb3RBcHBsaWVkKCksIHRoaXMuY2hhbmdlcy5zZXQoZSwgTXV0YWJsZURvY3VtZW50Lm5ld0ludmFsaWREb2N1bWVudChlKS5zZXRSZWFkVGltZSh0KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvb2tzIHVwIGFuIGVudHJ5IGluIHRoZSBjYWNoZS4gVGhlIGJ1ZmZlcmVkIGNoYW5nZXMgd2lsbCBmaXJzdCBiZSBjaGVja2VkLFxuICAgICAqIGFuZCBpZiBubyBidWZmZXJlZCBjaGFuZ2UgYXBwbGllcywgdGhpcyB3aWxsIGZvcndhcmQgdG9cbiAgICAgKiBgUmVtb3RlRG9jdW1lbnRDYWNoZS5nZXRFbnRyeSgpYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvbiAtIFRoZSB0cmFuc2FjdGlvbiBpbiB3aGljaCB0byBwZXJmb3JtIGFueSBwZXJzaXN0ZW5jZVxuICAgICAqICAgICBvcGVyYXRpb25zLlxuICAgICAqIEBwYXJhbSBkb2N1bWVudEtleSAtIFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGxvb2sgdXAuXG4gICAgICogQHJldHVybnMgVGhlIGNhY2hlZCBkb2N1bWVudCBvciBhbiBpbnZhbGlkIGRvY3VtZW50IGlmIHdlIGhhdmUgbm90aGluZ1xuICAgICAqIGNhY2hlZC5cbiAgICAgKi8gICAgZ2V0RW50cnkoZSwgdCkge1xuICAgICAgICB0aGlzLmFzc2VydE5vdEFwcGxpZWQoKTtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuY2hhbmdlcy5nZXQodCk7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IG4gPyBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShuKSA6IHRoaXMuZ2V0RnJvbUNhY2hlKGUsIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb29rcyB1cCBzZXZlcmFsIGVudHJpZXMgaW4gdGhlIGNhY2hlLCBmb3J3YXJkaW5nIHRvXG4gICAgICogYFJlbW90ZURvY3VtZW50Q2FjaGUuZ2V0RW50cnkoKWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb24gLSBUaGUgdHJhbnNhY3Rpb24gaW4gd2hpY2ggdG8gcGVyZm9ybSBhbnkgcGVyc2lzdGVuY2VcbiAgICAgKiAgICAgb3BlcmF0aW9ucy5cbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRLZXlzIC0gVGhlIGtleXMgb2YgdGhlIGVudHJpZXMgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBBIG1hcCBvZiBjYWNoZWQgZG9jdW1lbnRzLCBpbmRleGVkIGJ5IGtleS4gSWYgYW4gZW50cnkgY2Fubm90IGJlXG4gICAgICogICAgIGZvdW5kLCB0aGUgY29ycmVzcG9uZGluZyBrZXkgd2lsbCBiZSBtYXBwZWQgdG8gYW4gaW52YWxpZCBkb2N1bWVudC5cbiAgICAgKi8gICAgZ2V0RW50cmllcyhlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEFsbEZyb21DYWNoZShlLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyBidWZmZXJlZCBjaGFuZ2VzIHRvIHRoZSB1bmRlcmx5aW5nIFJlbW90ZURvY3VtZW50Q2FjaGUsIHVzaW5nXG4gICAgICogdGhlIHByb3ZpZGVkIHRyYW5zYWN0aW9uLlxuICAgICAqLyAgICBhcHBseShlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFzc2VydE5vdEFwcGxpZWQoKSwgdGhpcy5jaGFuZ2VzQXBwbGllZCA9ICEwLCB0aGlzLmFwcGx5Q2hhbmdlcyhlKTtcbiAgICB9XG4gICAgLyoqIEhlbHBlciB0byBhc3NlcnQgdGhpcy5jaGFuZ2VzIGlzIG5vdCBudWxsICAqLyAgICBhc3NlcnROb3RBcHBsaWVkKCkge31cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVGhlIFJlbW90ZURvY3VtZW50Q2FjaGUgZm9yIEluZGV4ZWREYi4gVG8gY29uc3RydWN0LCBpbnZva2VcbiAqIGBuZXdJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlKClgLlxuICovIGNsYXNzIF9fUFJJVkFURV9JbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlSW1wbCB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSBlO1xuICAgIH1cbiAgICBzZXRJbmRleE1hbmFnZXIoZSkge1xuICAgICAgICB0aGlzLmluZGV4TWFuYWdlciA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgdGhlIHN1cHBsaWVkIGVudHJpZXMgdG8gdGhlIGNhY2hlLlxuICAgICAqXG4gICAgICogQWxsIGNhbGxzIG9mIGBhZGRFbnRyeWAgYXJlIHJlcXVpcmVkIHRvIGdvIHRocm91Z2ggdGhlIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyXG4gICAgICogcmV0dXJuZWQgYnkgYG5ld0NoYW5nZUJ1ZmZlcigpYCB0byBlbnN1cmUgcHJvcGVyIGFjY291bnRpbmcgb2YgbWV0YWRhdGEuXG4gICAgICovICAgIGFkZEVudHJ5KGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9yZW1vdGVEb2N1bWVudHNTdG9yZShlKS5wdXQobik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSBkb2N1bWVudCBmcm9tIHRoZSBjYWNoZS5cbiAgICAgKlxuICAgICAqIEFsbCBjYWxscyBvZiBgcmVtb3ZlRW50cnlgICBhcmUgcmVxdWlyZWQgdG8gZ28gdGhyb3VnaCB0aGUgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXJcbiAgICAgKiByZXR1cm5lZCBieSBgbmV3Q2hhbmdlQnVmZmVyKClgIHRvIGVuc3VyZSBwcm9wZXIgYWNjb3VudGluZyBvZiBtZXRhZGF0YS5cbiAgICAgKi8gICAgcmVtb3ZlRW50cnkoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3JlbW90ZURvY3VtZW50c1N0b3JlKGUpLmRlbGV0ZShcbiAgICAgICAgLyoqXG4gKiBSZXR1cm5zIGEga2V5IHRoYXQgY2FuIGJlIHVzZWQgZm9yIGRvY3VtZW50IGxvb2t1cHMgdmlhIHRoZSBwcmltYXJ5IGtleSBvZlxuICogdGhlIERiUmVtb3RlRG9jdW1lbnQgb2JqZWN0IHN0b3JlLlxuICovXG4gICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9kYlJlYWRUaW1lS2V5KGUsIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLnBhdGgudG9BcnJheSgpO1xuICAgICAgICAgICAgcmV0dXJuIFsgXG4gICAgICAgICAgICAvKiBwcmVmaXggcGF0aCAqLyBuLnNsaWNlKDAsIG4ubGVuZ3RoIC0gMiksIFxuICAgICAgICAgICAgLyogY29sbGVjdGlvbiBpZCAqLyBuW24ubGVuZ3RoIC0gMl0sIF9fUFJJVkFURV90b0RiVGltZXN0YW1wS2V5KHQpLCBcbiAgICAgICAgICAgIC8qIGRvY3VtZW50IGlkICovIG5bbi5sZW5ndGggLSAxXSBdO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmV0dXJucyBhIGtleSB0aGF0IGNhbiBiZSB1c2VkIGZvciBkb2N1bWVudCBsb29rdXBzIG9uIHRoZVxuICogYERiUmVtb3RlRG9jdW1lbnREb2N1bWVudENvbGxlY3Rpb25Hcm91cEluZGV4YCBpbmRleC5cbiAqLyAodCwgbikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBjdXJyZW50IGNhY2hlIHNpemUuXG4gICAgICpcbiAgICAgKiBDYWxsZXJzIHRvIGBhZGRFbnRyeSgpYCBhbmQgYHJlbW92ZUVudHJ5KClgICptdXN0KiBjYWxsIHRoaXMgYWZ0ZXJ3YXJkcyB0byB1cGRhdGUgdGhlXG4gICAgICogY2FjaGUncyBtZXRhZGF0YS5cbiAgICAgKi8gICAgdXBkYXRlTWV0YWRhdGEoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRNZXRhZGF0YShlKS5uZXh0KChuID0+IChuLmJ5dGVTaXplICs9IHQsIHRoaXMudHIoZSwgbikpKSk7XG4gICAgfVxuICAgIGdldEVudHJ5KGUsIHQpIHtcbiAgICAgICAgbGV0IG4gPSBNdXRhYmxlRG9jdW1lbnQubmV3SW52YWxpZERvY3VtZW50KHQpO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3JlbW90ZURvY3VtZW50c1N0b3JlKGUpLkooe1xuICAgICAgICAgICAgaW5kZXg6IFwiZG9jdW1lbnRLZXlJbmRleFwiLFxuICAgICAgICAgICAgcmFuZ2U6IElEQktleVJhbmdlLm9ubHkoX19QUklWQVRFX2RiS2V5KHQpKVxuICAgICAgICB9LCAoKGUsIHIpID0+IHtcbiAgICAgICAgICAgIG4gPSB0aGlzLm5yKHQsIHIpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gbikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb29rcyB1cCBhbiBlbnRyeSBpbiB0aGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRLZXkgLSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBsb29rIHVwLlxuICAgICAqIEByZXR1cm5zIFRoZSBjYWNoZWQgZG9jdW1lbnQgZW50cnkgYW5kIGl0cyBzaXplLlxuICAgICAqLyAgICBycihlLCB0KSB7XG4gICAgICAgIGxldCBuID0ge1xuICAgICAgICAgICAgc2l6ZTogMCxcbiAgICAgICAgICAgIGRvY3VtZW50OiBNdXRhYmxlRG9jdW1lbnQubmV3SW52YWxpZERvY3VtZW50KHQpXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcmVtb3RlRG9jdW1lbnRzU3RvcmUoZSkuSih7XG4gICAgICAgICAgICBpbmRleDogXCJkb2N1bWVudEtleUluZGV4XCIsXG4gICAgICAgICAgICByYW5nZTogSURCS2V5UmFuZ2Uub25seShfX1BSSVZBVEVfZGJLZXkodCkpXG4gICAgICAgIH0sICgoZSwgcikgPT4ge1xuICAgICAgICAgICAgbiA9IHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudDogdGhpcy5ucih0LCByKSxcbiAgICAgICAgICAgICAgICBzaXplOiBfX1BSSVZBVEVfZGJEb2N1bWVudFNpemUocilcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIGdldEVudHJpZXMoZSwgdCkge1xuICAgICAgICBsZXQgbiA9IF9fUFJJVkFURV9tdXRhYmxlRG9jdW1lbnRNYXAoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXIoZSwgdCwgKChlLCB0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gdGhpcy5ucihlLCB0KTtcbiAgICAgICAgICAgIG4gPSBuLmluc2VydChlLCByKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgc2V2ZXJhbCBlbnRyaWVzIGluIHRoZSBjYWNoZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudEtleXMgLSBUaGUgc2V0IG9mIGtleXMgZW50cmllcyB0byBsb29rIHVwLlxuICAgICAqIEByZXR1cm5zIEEgbWFwIG9mIGRvY3VtZW50cyBpbmRleGVkIGJ5IGtleSBhbmQgYSBtYXAgb2Ygc2l6ZXMgaW5kZXhlZCBieVxuICAgICAqICAgICBrZXkgKHplcm8gaWYgdGhlIGRvY3VtZW50IGRvZXMgbm90IGV4aXN0KS5cbiAgICAgKi8gICAgc3IoZSwgdCkge1xuICAgICAgICBsZXQgbiA9IF9fUFJJVkFURV9tdXRhYmxlRG9jdW1lbnRNYXAoKSwgciA9IG5ldyBTb3J0ZWRNYXAoRG9jdW1lbnRLZXkuY29tcGFyYXRvcik7XG4gICAgICAgIHJldHVybiB0aGlzLmlyKGUsIHQsICgoZSwgdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMubnIoZSwgdCk7XG4gICAgICAgICAgICBuID0gbi5pbnNlcnQoZSwgaSksIHIgPSByLmluc2VydChlLCBfX1BSSVZBVEVfZGJEb2N1bWVudFNpemUodCkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gKHtcbiAgICAgICAgICAgIGRvY3VtZW50czogbixcbiAgICAgICAgICAgIF9yOiByXG4gICAgICAgIH0pKSk7XG4gICAgfVxuICAgIGlyKGUsIHQsIG4pIHtcbiAgICAgICAgaWYgKHQuaXNFbXB0eSgpKSByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgbGV0IHIgPSBuZXcgU29ydGVkU2V0KF9fUFJJVkFURV9kYktleUNvbXBhcmF0b3IpO1xuICAgICAgICB0LmZvckVhY2goKGUgPT4gciA9IHIuYWRkKGUpKSk7XG4gICAgICAgIGNvbnN0IGkgPSBJREJLZXlSYW5nZS5ib3VuZChfX1BSSVZBVEVfZGJLZXkoci5maXJzdCgpKSwgX19QUklWQVRFX2RiS2V5KHIubGFzdCgpKSksIHMgPSByLmdldEl0ZXJhdG9yKCk7XG4gICAgICAgIGxldCBvID0gcy5nZXROZXh0KCk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcmVtb3RlRG9jdW1lbnRzU3RvcmUoZSkuSih7XG4gICAgICAgICAgICBpbmRleDogXCJkb2N1bWVudEtleUluZGV4XCIsXG4gICAgICAgICAgICByYW5nZTogaVxuICAgICAgICB9LCAoKGUsIHQsIHIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBEb2N1bWVudEtleS5mcm9tU2VnbWVudHMoWyAuLi50LnByZWZpeFBhdGgsIHQuY29sbGVjdGlvbkdyb3VwLCB0LmRvY3VtZW50SWQgXSk7XG4gICAgICAgICAgICAvLyBHbyB0aHJvdWdoIGtleXMgbm90IGZvdW5kIGluIGNhY2hlLlxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7byAmJiBfX1BSSVZBVEVfZGJLZXlDb21wYXJhdG9yKG8sIGkpIDwgMDsgKSBuKG8sIG51bGwpLCBvID0gcy5nZXROZXh0KCk7XG4gICAgICAgICAgICBvICYmIG8uaXNFcXVhbChpKSAmJiAoXG4gICAgICAgICAgICAvLyBLZXkgZm91bmQgaW4gY2FjaGUuXG4gICAgICAgICAgICBuKG8sIHQpLCBvID0gcy5oYXNOZXh0KCkgPyBzLmdldE5leHQoKSA6IG51bGwpLCBcbiAgICAgICAgICAgIC8vIFNraXAgdG8gdGhlIG5leHQga2V5IChpZiB0aGVyZSBpcyBvbmUpLlxuICAgICAgICAgICAgbyA/IHIuJChfX1BSSVZBVEVfZGJLZXkobykpIDogci5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBUaGUgcmVzdCBvZiB0aGUga2V5cyBhcmUgbm90IGluIHRoZSBjYWNoZS4gT25lIGNhc2Ugd2hlcmUgYGl0ZXJhdGVgXG4gICAgICAgICAgICAvLyBhYm92ZSB3b24ndCBnbyB0aHJvdWdoIHRoZW0gaXMgd2hlbiB0aGUgY2FjaGUgaXMgZW1wdHkuXG4gICAgICAgICAgICBmb3IgKDtvOyApIG4obywgbnVsbCksIG8gPSBzLmhhc05leHQoKSA/IHMuZ2V0TmV4dCgpIDogbnVsbDtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IHQucGF0aCwgbyA9IFsgcy5wb3BMYXN0KCkudG9BcnJheSgpLCBzLmxhc3RTZWdtZW50KCksIF9fUFJJVkFURV90b0RiVGltZXN0YW1wS2V5KG4ucmVhZFRpbWUpLCBuLmRvY3VtZW50S2V5LnBhdGguaXNFbXB0eSgpID8gXCJcIiA6IG4uZG9jdW1lbnRLZXkucGF0aC5sYXN0U2VnbWVudCgpIF0sIF8gPSBbIHMucG9wTGFzdCgpLnRvQXJyYXkoKSwgcy5sYXN0U2VnbWVudCgpLCBbIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSLCBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiBdLCBcIlwiIF07XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcmVtb3RlRG9jdW1lbnRzU3RvcmUoZSkuVShJREJLZXlSYW5nZS5ib3VuZChvLCBfLCAhMCkpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgbnVsbCA9PSBpIHx8IGkuaW5jcmVtZW50RG9jdW1lbnRSZWFkQ291bnQoZS5sZW5ndGgpO1xuICAgICAgICAgICAgbGV0IG4gPSBfX1BSSVZBVEVfbXV0YWJsZURvY3VtZW50TWFwKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGkgb2YgZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLm5yKERvY3VtZW50S2V5LmZyb21TZWdtZW50cyhpLnByZWZpeFBhdGguY29uY2F0KGkuY29sbGVjdGlvbkdyb3VwLCBpLmRvY3VtZW50SWQpKSwgaSk7XG4gICAgICAgICAgICAgICAgZS5pc0ZvdW5kRG9jdW1lbnQoKSAmJiAoX19QUklWQVRFX3F1ZXJ5TWF0Y2hlcyh0LCBlKSB8fCByLmhhcyhlLmtleSkpICYmIChcbiAgICAgICAgICAgICAgICAvLyBFaXRoZXIgdGhlIGRvY3VtZW50IG1hdGNoZXMgdGhlIGdpdmVuIHF1ZXJ5LCBvciBpdCBpcyBtdXRhdGVkLlxuICAgICAgICAgICAgICAgIG4gPSBuLmluc2VydChlLmtleSwgZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG47XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0QWxsRnJvbUNvbGxlY3Rpb25Hcm91cChlLCB0LCBuLCByKSB7XG4gICAgICAgIGxldCBpID0gX19QUklWQVRFX211dGFibGVEb2N1bWVudE1hcCgpO1xuICAgICAgICBjb25zdCBzID0gX19QUklWQVRFX2RiQ29sbGVjdGlvbkdyb3VwS2V5KHQsIG4pLCBvID0gX19QUklWQVRFX2RiQ29sbGVjdGlvbkdyb3VwS2V5KHQsIEluZGV4T2Zmc2V0Lm1heCgpKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9yZW1vdGVEb2N1bWVudHNTdG9yZShlKS5KKHtcbiAgICAgICAgICAgIGluZGV4OiBcImNvbGxlY3Rpb25Hcm91cEluZGV4XCIsXG4gICAgICAgICAgICByYW5nZTogSURCS2V5UmFuZ2UuYm91bmQocywgbywgITApXG4gICAgICAgIH0sICgoZSwgdCwgbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMubnIoRG9jdW1lbnRLZXkuZnJvbVNlZ21lbnRzKHQucHJlZml4UGF0aC5jb25jYXQodC5jb2xsZWN0aW9uR3JvdXAsIHQuZG9jdW1lbnRJZCkpLCB0KTtcbiAgICAgICAgICAgIGkgPSBpLmluc2VydChzLmtleSwgcyksIGkuc2l6ZSA9PT0gciAmJiBuLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgbmV3Q2hhbmdlQnVmZmVyKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIodGhpcywgISFlICYmIGUudHJhY2tSZW1vdmFscyk7XG4gICAgfVxuICAgIGdldFNpemUoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRNZXRhZGF0YShlKS5uZXh0KChlID0+IGUuYnl0ZVNpemUpKTtcbiAgICB9XG4gICAgZ2V0TWV0YWRhdGEoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2RvY3VtZW50R2xvYmFsU3RvcmUoZSkuZ2V0KFwicmVtb3RlRG9jdW1lbnRHbG9iYWxLZXlcIikubmV4dCgoZSA9PiAoX19QUklWQVRFX2hhcmRBc3NlcnQoISFlKSwgXG4gICAgICAgIGUpKSk7XG4gICAgfVxuICAgIHRyKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9kb2N1bWVudEdsb2JhbFN0b3JlKGUpLnB1dChcInJlbW90ZURvY3VtZW50R2xvYmFsS2V5XCIsIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWNvZGVzIGBkYlJlbW90ZURvY2AgYW5kIHJldHVybnMgdGhlIGRvY3VtZW50IChvciBhbiBpbnZhbGlkIGRvY3VtZW50IGlmXG4gICAgICogdGhlIGRvY3VtZW50IGNvcnJlc3BvbmRzIHRvIHRoZSBmb3JtYXQgdXNlZCBmb3Igc2VudGluZWwgZGVsZXRlcykuXG4gICAgICovICAgIG5yKGUsIHQpIHtcbiAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBfX1BSSVZBVEVfZnJvbURiUmVtb3RlRG9jdW1lbnQodGhpcy5zZXJpYWxpemVyLCB0KTtcbiAgICAgICAgICAgIC8vIFdoZXRoZXIgdGhlIGRvY3VtZW50IGlzIGEgc2VudGluZWwgcmVtb3ZhbCBhbmQgc2hvdWxkIG9ubHkgYmUgdXNlZCBpbiB0aGVcbiAgICAgICAgICAgIC8vIGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGUuaXNOb0RvY3VtZW50KCkgJiYgZS52ZXJzaW9uLmlzRXF1YWwoU25hcHNob3RWZXJzaW9uLm1pbigpKSkpIHJldHVybiBlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBNdXRhYmxlRG9jdW1lbnQubmV3SW52YWxpZERvY3VtZW50KGUpO1xuICAgIH1cbn1cblxuLyoqIENyZWF0ZXMgYSBuZXcgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS4gKi8gZnVuY3Rpb24gX19QUklWQVRFX25ld0luZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUoZSkge1xuICAgIHJldHVybiBuZXcgX19QUklWQVRFX0luZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGVJbXBsKGUpO1xufVxuXG4vKipcbiAqIEhhbmRsZXMgdGhlIGRldGFpbHMgb2YgYWRkaW5nIGFuZCB1cGRhdGluZyBkb2N1bWVudHMgaW4gdGhlIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKlxuICogVW5saWtlIHRoZSBNZW1vcnlSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlciwgdGhlIEluZGV4ZWREYiBpbXBsZW1lbnRhdGlvbiBjb21wdXRlcyB0aGUgc2l6ZVxuICogZGVsdGEgZm9yIGFsbCBzdWJtaXR0ZWQgY2hhbmdlcy4gVGhpcyBhdm9pZHMgaGF2aW5nIHRvIHJlLXJlYWQgYWxsIGRvY3VtZW50cyBmcm9tIEluZGV4ZWREYlxuICogd2hlbiB3ZSBhcHBseSB0aGUgY2hhbmdlcy5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIgZXh0ZW5kcyBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlciB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGRvY3VtZW50Q2FjaGUgLSBUaGUgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZSB0byBhcHBseSB0aGUgY2hhbmdlcyB0by5cbiAgICAgKiBAcGFyYW0gdHJhY2tSZW1vdmFscyAtIFdoZXRoZXIgdG8gY3JlYXRlIHNlbnRpbmVsIGRlbGV0ZXMgdGhhdCBjYW4gYmUgdHJhY2tlZCBieVxuICAgICAqIGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWAuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmFyID0gZSwgdGhpcy50cmFja1JlbW92YWxzID0gdCwgXG4gICAgICAgIC8vIEEgbWFwIG9mIGRvY3VtZW50IHNpemVzIGFuZCByZWFkIHRpbWVzIHByaW9yIHRvIGFwcGx5aW5nIHRoZSBjaGFuZ2VzIGluXG4gICAgICAgIC8vIHRoaXMgYnVmZmVyLlxuICAgICAgICB0aGlzLnVyID0gbmV3IE9iamVjdE1hcCgoZSA9PiBlLnRvU3RyaW5nKCkpLCAoKGUsIHQpID0+IGUuaXNFcXVhbCh0KSkpO1xuICAgIH1cbiAgICBhcHBseUNoYW5nZXMoZSkge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIGxldCBuID0gMCwgciA9IG5ldyBTb3J0ZWRTZXQoKChlLCB0KSA9PiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihlLmNhbm9uaWNhbFN0cmluZygpLCB0LmNhbm9uaWNhbFN0cmluZygpKSkpO1xuICAgICAgICByZXR1cm4gdGhpcy5jaGFuZ2VzLmZvckVhY2goKChpLCBzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvID0gdGhpcy51ci5nZXQoaSk7XG4gICAgICAgICAgICBpZiAodC5wdXNoKHRoaXMuYXIucmVtb3ZlRW50cnkoZSwgaSwgby5yZWFkVGltZSkpLCBzLmlzVmFsaWREb2N1bWVudCgpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgXyA9IF9fUFJJVkFURV90b0RiUmVtb3RlRG9jdW1lbnQodGhpcy5hci5zZXJpYWxpemVyLCBzKTtcbiAgICAgICAgICAgICAgICByID0gci5hZGQoaS5wYXRoLnBvcExhc3QoKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYSA9IF9fUFJJVkFURV9kYkRvY3VtZW50U2l6ZShfKTtcbiAgICAgICAgICAgICAgICBuICs9IGEgLSBvLnNpemUsIHQucHVzaCh0aGlzLmFyLmFkZEVudHJ5KGUsIGksIF8pKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobiAtPSBvLnNpemUsIHRoaXMudHJhY2tSZW1vdmFscykge1xuICAgICAgICAgICAgICAgIC8vIEluIG9yZGVyIHRvIHRyYWNrIHJlbW92YWxzLCB3ZSBzdG9yZSBhIFwic2VudGluZWwgZGVsZXRlXCIgaW4gdGhlXG4gICAgICAgICAgICAgICAgLy8gUmVtb3RlRG9jdW1lbnRDYWNoZS4gVGhpcyBlbnRyeSBpcyByZXByZXNlbnRlZCBieSBhIE5vRG9jdW1lbnRcbiAgICAgICAgICAgICAgICAvLyB3aXRoIGEgdmVyc2lvbiBvZiAwIGFuZCBpZ25vcmVkIGJ5IGBtYXliZURlY29kZURvY3VtZW50KClgIGJ1dFxuICAgICAgICAgICAgICAgIC8vIHByZXNlcnZlZCBpbiBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgLlxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfdG9EYlJlbW90ZURvY3VtZW50KHRoaXMuYXIuc2VyaWFsaXplciwgcy5jb252ZXJ0VG9Ob0RvY3VtZW50KFNuYXBzaG90VmVyc2lvbi5taW4oKSkpO1xuICAgICAgICAgICAgICAgIHQucHVzaCh0aGlzLmFyLmFkZEVudHJ5KGUsIGksIG4pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpLCByLmZvckVhY2goKG4gPT4ge1xuICAgICAgICAgICAgdC5wdXNoKHRoaXMuYXIuaW5kZXhNYW5hZ2VyLmFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KGUsIG4pKTtcbiAgICAgICAgfSkpLCB0LnB1c2godGhpcy5hci51cGRhdGVNZXRhZGF0YShlLCBuKSksIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHQpO1xuICAgIH1cbiAgICBnZXRGcm9tQ2FjaGUoZSwgdCkge1xuICAgICAgICAvLyBSZWNvcmQgdGhlIHNpemUgb2YgZXZlcnl0aGluZyB3ZSBsb2FkIGZyb20gdGhlIGNhY2hlIHNvIHdlIGNhbiBjb21wdXRlIGEgZGVsdGEgbGF0ZXIuXG4gICAgICAgIHJldHVybiB0aGlzLmFyLnJyKGUsIHQpLm5leHQoKGUgPT4gKHRoaXMudXIuc2V0KHQsIHtcbiAgICAgICAgICAgIHNpemU6IGUuc2l6ZSxcbiAgICAgICAgICAgIHJlYWRUaW1lOiBlLmRvY3VtZW50LnJlYWRUaW1lXG4gICAgICAgIH0pLCBlLmRvY3VtZW50KSkpO1xuICAgIH1cbiAgICBnZXRBbGxGcm9tQ2FjaGUoZSwgdCkge1xuICAgICAgICAvLyBSZWNvcmQgdGhlIHNpemUgb2YgZXZlcnl0aGluZyB3ZSBsb2FkIGZyb20gdGhlIGNhY2hlIHNvIHdlIGNhbiBjb21wdXRlXG4gICAgICAgIC8vIGEgZGVsdGEgbGF0ZXIuXG4gICAgICAgIHJldHVybiB0aGlzLmFyLnNyKGUsIHQpLm5leHQoKCh7ZG9jdW1lbnRzOiBlLCBfcjogdH0pID0+IChcbiAgICAgICAgLy8gTm90ZTogYGdldEFsbEZyb21DYWNoZWAgcmV0dXJucyB0d28gbWFwcyBpbnN0ZWFkIG9mIGEgc2luZ2xlIG1hcCBmcm9tXG4gICAgICAgIC8vIGtleXMgdG8gYERvY3VtZW50U2l6ZUVudHJ5YHMuIFRoaXMgaXMgdG8gYWxsb3cgcmV0dXJuaW5nIHRoZVxuICAgICAgICAvLyBgTXV0YWJsZURvY3VtZW50TWFwYCBkaXJlY3RseSwgd2l0aG91dCBhIGNvbnZlcnNpb24uXG4gICAgICAgIHQuZm9yRWFjaCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIHRoaXMudXIuc2V0KHQsIHtcbiAgICAgICAgICAgICAgICBzaXplOiBuLFxuICAgICAgICAgICAgICAgIHJlYWRUaW1lOiBlLmdldCh0KS5yZWFkVGltZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKSwgZSkpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9kb2N1bWVudEdsb2JhbFN0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2dldFN0b3JlKGUsIFwicmVtb3RlRG9jdW1lbnRHbG9iYWxcIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSByZW1vdGVEb2N1bWVudHMgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9yZW1vdGVEb2N1bWVudHNTdG9yZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9nZXRTdG9yZShlLCBcInJlbW90ZURvY3VtZW50c1YxNFwiKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEga2V5IHRoYXQgY2FuIGJlIHVzZWQgZm9yIGRvY3VtZW50IGxvb2t1cHMgb24gdGhlXG4gKiBgRGJSZW1vdGVEb2N1bWVudERvY3VtZW50S2V5SW5kZXhgIGluZGV4LlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9kYktleShlKSB7XG4gICAgY29uc3QgdCA9IGUucGF0aC50b0FycmF5KCk7XG4gICAgcmV0dXJuIFsgXG4gICAgLyogcHJlZml4IHBhdGggKi8gdC5zbGljZSgwLCB0Lmxlbmd0aCAtIDIpLCBcbiAgICAvKiBjb2xsZWN0aW9uIGlkICovIHRbdC5sZW5ndGggLSAyXSwgXG4gICAgLyogZG9jdW1lbnQgaWQgKi8gdFt0Lmxlbmd0aCAtIDFdIF07XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9kYkNvbGxlY3Rpb25Hcm91cEtleShlLCB0KSB7XG4gICAgY29uc3QgbiA9IHQuZG9jdW1lbnRLZXkucGF0aC50b0FycmF5KCk7XG4gICAgcmV0dXJuIFsgXG4gICAgLyogY29sbGVjdGlvbiBpZCAqLyBlLCBfX1BSSVZBVEVfdG9EYlRpbWVzdGFtcEtleSh0LnJlYWRUaW1lKSwgXG4gICAgLyogcHJlZml4IHBhdGggKi8gbi5zbGljZSgwLCBuLmxlbmd0aCAtIDIpLCBcbiAgICAvKiBkb2N1bWVudCBpZCAqLyBuLmxlbmd0aCA+IDAgPyBuW24ubGVuZ3RoIC0gMV0gOiBcIlwiIF07XG59XG5cbi8qKlxuICogQ29tcGFyYXRvciB0aGF0IGNvbXBhcmVzIGRvY3VtZW50IGtleXMgYWNjb3JkaW5nIHRvIHRoZSBwcmltYXJ5IGtleSBzb3J0aW5nXG4gKiB1c2VkIGJ5IHRoZSBgRGJSZW1vdGVEb2N1bWVudERvY3VtZW50YCBzdG9yZSAoYnkgcHJlZml4IHBhdGgsIGNvbGxlY3Rpb24gaWRcbiAqIGFuZCB0aGVuIGRvY3VtZW50IElEKS5cbiAqXG4gKiBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9kYktleUNvbXBhcmF0b3IoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBlLnBhdGgudG9BcnJheSgpLCByID0gdC5wYXRoLnRvQXJyYXkoKTtcbiAgICAvLyBUaGUgb3JkZXJpbmcgaXMgYmFzZWQgb24gaHR0cHM6Ly9jaHJvbWl1bS5nb29nbGVzb3VyY2UuY29tL2Nocm9taXVtL2JsaW5rLysvZmU1YzIxZmVmOTRkYWU3MWMxYzMzNDQ3NzViOGQ4YTdmN2U2ZDllYy9Tb3VyY2UvbW9kdWxlcy9pbmRleGVkZGIvSURCS2V5LmNwcCM3NFxuICAgIGxldCBpID0gMDtcbiAgICBmb3IgKGxldCBlID0gMDsgZSA8IG4ubGVuZ3RoIC0gMiAmJiBlIDwgci5sZW5ndGggLSAyOyArK2UpIGlmIChpID0gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IobltlXSwgcltlXSksIFxuICAgIGkpIHJldHVybiBpO1xuICAgIHJldHVybiBpID0gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3Iobi5sZW5ndGgsIHIubGVuZ3RoKSwgaSB8fCAoaSA9IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKG5bbi5sZW5ndGggLSAyXSwgcltyLmxlbmd0aCAtIDJdKSwgXG4gICAgaSB8fCBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihuW24ubGVuZ3RoIC0gMV0sIHJbci5sZW5ndGggLSAxXSkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBTY2hlbWEgVmVyc2lvbiBmb3IgdGhlIFdlYiBjbGllbnQ6XG4gKiAxLiAgSW5pdGlhbCB2ZXJzaW9uIGluY2x1ZGluZyBNdXRhdGlvbiBRdWV1ZSwgUXVlcnkgQ2FjaGUsIGFuZCBSZW1vdGVcbiAqICAgICBEb2N1bWVudCBDYWNoZVxuICogMi4gIFVzZWQgdG8gZW5zdXJlIGEgdGFyZ2V0R2xvYmFsIG9iamVjdCBleGlzdHMgYW5kIGFkZCB0YXJnZXRDb3VudCB0byBpdC4gTm9cbiAqICAgICBsb25nZXIgcmVxdWlyZWQgYmVjYXVzZSBtaWdyYXRpb24gMyB1bmNvbmRpdGlvbmFsbHkgY2xlYXJzIGl0LlxuICogMy4gIERyb3BwZWQgYW5kIHJlLWNyZWF0ZWQgUXVlcnkgQ2FjaGUgdG8gZGVhbCB3aXRoIGNhY2hlIGNvcnJ1cHRpb24gcmVsYXRlZFxuICogICAgIHRvIGxpbWJvIHJlc29sdXRpb24uIEFkZHJlc3Nlc1xuICogICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1pb3Mtc2RrL2lzc3Vlcy8xNTQ4XG4gKiA0LiAgTXVsdGktVGFiIFN1cHBvcnQuXG4gKiA1LiAgUmVtb3ZhbCBvZiBoZWxkIHdyaXRlIGFja3MuXG4gKiA2LiAgQ3JlYXRlIGRvY3VtZW50IGdsb2JhbCBmb3IgdHJhY2tpbmcgZG9jdW1lbnQgY2FjaGUgc2l6ZS5cbiAqIDcuICBFbnN1cmUgZXZlcnkgY2FjaGVkIGRvY3VtZW50IGhhcyBhIHNlbnRpbmVsIHJvdyB3aXRoIGEgc2VxdWVuY2UgbnVtYmVyLlxuICogOC4gIEFkZCBjb2xsZWN0aW9uLXBhcmVudCBpbmRleCBmb3IgQ29sbGVjdGlvbiBHcm91cCBxdWVyaWVzLlxuICogOS4gIENoYW5nZSBSZW1vdGVEb2N1bWVudENoYW5nZXMgc3RvcmUgdG8gYmUga2V5ZWQgYnkgcmVhZFRpbWUgcmF0aGVyIHRoYW5cbiAqICAgICBhbiBhdXRvLWluY3JlbWVudGluZyBJRC4gVGhpcyBpcyByZXF1aXJlZCBmb3IgSW5kZXgtRnJlZSBxdWVyaWVzLlxuICogMTAuIFJld3JpdGUgdGhlIGNhbm9uaWNhbCBJRHMgdG8gdGhlIGV4cGxpY2l0IFByb3RvYnVmLWJhc2VkIGZvcm1hdC5cbiAqIDExLiBBZGQgYnVuZGxlcyBhbmQgbmFtZWRfcXVlcmllcyBmb3IgYnVuZGxlIHN1cHBvcnQuXG4gKiAxMi4gQWRkIGRvY3VtZW50IG92ZXJsYXlzLlxuICogMTMuIFJld3JpdGUgdGhlIGtleXMgb2YgdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZSB0byBhbGxvdyBmb3IgZWZmaWNpZW50XG4gKiAgICAgZG9jdW1lbnQgbG9va3VwIHZpYSBgZ2V0QWxsKClgLlxuICogMTQuIEFkZCBvdmVybGF5cy5cbiAqIDE1LiBBZGQgaW5kZXhpbmcgc3VwcG9ydC5cbiAqIDE2LiBQYXJzZSB0aW1lc3RhbXAgc3RyaW5ncyBiZWZvcmUgY3JlYXRpbmcgaW5kZXggZW50cmllcy5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhIGxvY2FsIHZpZXcgKG92ZXJsYXkpIG9mIGEgZG9jdW1lbnQsIGFuZCB0aGUgZmllbGRzIHRoYXQgYXJlXG4gKiBsb2NhbGx5IG11dGF0ZWQuXG4gKi9cbmNsYXNzIE92ZXJsYXllZERvY3VtZW50IHtcbiAgICBjb25zdHJ1Y3RvcihlLCBcbiAgICAvKipcbiAgICAgKiBUaGUgZmllbGRzIHRoYXQgYXJlIGxvY2FsbHkgbXV0YXRlZCBieSBwYXRjaCBtdXRhdGlvbnMuXG4gICAgICpcbiAgICAgKiBJZiB0aGUgb3ZlcmxheWVkXHRkb2N1bWVudCBpcyBmcm9tIHNldCBvciBkZWxldGUgbXV0YXRpb25zLCB0aGlzIGlzIGBudWxsYC5cbiAgICAgKiBJZiB0aGVyZSBpcyBubyBvdmVybGF5IChtdXRhdGlvbikgZm9yIHRoZSBkb2N1bWVudCwgdGhpcyBpcyBhbiBlbXB0eSBgRmllbGRNYXNrYC5cbiAgICAgKi9cbiAgICB0KSB7XG4gICAgICAgIHRoaXMub3ZlcmxheWVkRG9jdW1lbnQgPSBlLCB0aGlzLm11dGF0ZWRGaWVsZHMgPSB0O1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSByZWFkb25seSB2aWV3IG9mIHRoZSBsb2NhbCBzdGF0ZSBvZiBhbGwgZG9jdW1lbnRzIHdlJ3JlIHRyYWNraW5nIChpLmUuIHdlXG4gKiBoYXZlIGEgY2FjaGVkIHZlcnNpb24gaW4gcmVtb3RlRG9jdW1lbnRDYWNoZSBvciBsb2NhbCBtdXRhdGlvbnMgZm9yIHRoZVxuICogZG9jdW1lbnQpLiBUaGUgdmlldyBpcyBjb21wdXRlZCBieSBhcHBseWluZyB0aGUgbXV0YXRpb25zIGluIHRoZVxuICogTXV0YXRpb25RdWV1ZSB0byB0aGUgUmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAqLyBjbGFzcyBMb2NhbERvY3VtZW50c1ZpZXcge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlID0gZSwgdGhpcy5tdXRhdGlvblF1ZXVlID0gdCwgdGhpcy5kb2N1bWVudE92ZXJsYXlDYWNoZSA9IG4sIFxuICAgICAgICB0aGlzLmluZGV4TWFuYWdlciA9IHI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbG9jYWwgdmlldyBvZiB0aGUgZG9jdW1lbnQgaWRlbnRpZmllZCBieSBga2V5YC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIExvY2FsIHZpZXcgb2YgdGhlIGRvY3VtZW50IG9yIG51bGwgaWYgd2UgZG9uJ3QgaGF2ZSBhbnkgY2FjaGVkXG4gICAgICogc3RhdGUgZm9yIGl0LlxuICAgICAqLyAgICBnZXREb2N1bWVudChlLCB0KSB7XG4gICAgICAgIGxldCBuID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRPdmVybGF5Q2FjaGUuZ2V0T3ZlcmxheShlLCB0KS5uZXh0KChyID0+IChuID0gciwgdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJ5KGUsIHQpKSkpLm5leHQoKGUgPT4gKG51bGwgIT09IG4gJiYgX19QUklWQVRFX211dGF0aW9uQXBwbHlUb0xvY2FsVmlldyhuLm11dGF0aW9uLCBlLCBGaWVsZE1hc2suZW1wdHkoKSwgVGltZXN0YW1wLm5vdygpKSwgXG4gICAgICAgIGUpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGxvY2FsIHZpZXcgb2YgdGhlIGRvY3VtZW50cyBpZGVudGlmaWVkIGJ5IGBrZXlzYC5cbiAgICAgKlxuICAgICAqIElmIHdlIGRvbid0IGhhdmUgY2FjaGVkIHN0YXRlIGZvciBhIGRvY3VtZW50IGluIGBrZXlzYCwgYSBOb0RvY3VtZW50IHdpbGxcbiAgICAgKiBiZSBzdG9yZWQgZm9yIHRoYXQga2V5IGluIHRoZSByZXN1bHRpbmcgc2V0LlxuICAgICAqLyAgICBnZXREb2N1bWVudHMoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJpZXMoZSwgdCkubmV4dCgodCA9PiB0aGlzLmdldExvY2FsVmlld09mRG9jdW1lbnRzKGUsIHQsIF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpKS5uZXh0KCgoKSA9PiB0KSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2ltaWxhciB0byBgZ2V0RG9jdW1lbnRzYCwgYnV0IGNyZWF0ZXMgdGhlIGxvY2FsIHZpZXcgZnJvbSB0aGUgZ2l2ZW5cbiAgICAgKiBgYmFzZURvY3NgIHdpdGhvdXQgcmV0cmlldmluZyBkb2N1bWVudHMgZnJvbSB0aGUgbG9jYWwgc3RvcmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb24gLSBUaGUgdHJhbnNhY3Rpb24gdGhpcyBvcGVyYXRpb24gaXMgc2NvcGVkIHRvLlxuICAgICAqIEBwYXJhbSBkb2NzIC0gVGhlIGRvY3VtZW50cyB0byBhcHBseSBsb2NhbCBtdXRhdGlvbnMgdG8gZ2V0IHRoZSBsb2NhbCB2aWV3cy5cbiAgICAgKiBAcGFyYW0gZXhpc3RlbmNlU3RhdGVDaGFuZ2VkIC0gVGhlIHNldCBvZiBkb2N1bWVudCBrZXlzIHdob3NlIGV4aXN0ZW5jZSBzdGF0ZVxuICAgICAqICAgaXMgY2hhbmdlZC4gVGhpcyBpcyB1c2VmdWwgdG8gZGV0ZXJtaW5lIGlmIHNvbWUgZG9jdW1lbnRzIG92ZXJsYXkgbmVlZHNcbiAgICAgKiAgIHRvIGJlIHJlY2FsY3VsYXRlZC5cbiAgICAgKi8gICAgZ2V0TG9jYWxWaWV3T2ZEb2N1bWVudHMoZSwgdCwgbiA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpKSB7XG4gICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfbmV3T3ZlcmxheU1hcCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5wb3B1bGF0ZU92ZXJsYXlzKGUsIHIsIHQpLm5leHQoKCgpID0+IHRoaXMuY29tcHV0ZVZpZXdzKGUsIHQsIHIsIG4pLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgbGV0IHQgPSBkb2N1bWVudE1hcCgpO1xuICAgICAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgoKGUsIG4pID0+IHtcbiAgICAgICAgICAgICAgICB0ID0gdC5pbnNlcnQoZSwgbi5vdmVybGF5ZWREb2N1bWVudCk7XG4gICAgICAgICAgICB9KSksIHQ7XG4gICAgICAgIH0pKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBvdmVybGF5ZWQgZG9jdW1lbnRzIGZvciB0aGUgZ2l2ZW4gZG9jdW1lbnQgbWFwLCB3aGljaCB3aWxsIGluY2x1ZGVcbiAgICAgKiB0aGUgbG9jYWwgdmlldyBvZiB0aG9zZSBkb2N1bWVudHMgYW5kIGEgYEZpZWxkTWFza2AgaW5kaWNhdGluZyB3aGljaCBmaWVsZHNcbiAgICAgKiBhcmUgbXV0YXRlZCBsb2NhbGx5LCBgbnVsbGAgaWYgb3ZlcmxheSBpcyBhIFNldCBvciBEZWxldGUgbXV0YXRpb24uXG4gICAgICovICAgIGdldE92ZXJsYXllZERvY3VtZW50cyhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfbmV3T3ZlcmxheU1hcCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5wb3B1bGF0ZU92ZXJsYXlzKGUsIG4sIHQpLm5leHQoKCgpID0+IHRoaXMuY29tcHV0ZVZpZXdzKGUsIHQsIG4sIF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGZXRjaGVzIHRoZSBvdmVybGF5cyBmb3Ige0Bjb2RlIGRvY3N9IGFuZCBhZGRzIHRoZW0gdG8gcHJvdmlkZWQgb3ZlcmxheSBtYXBcbiAgICAgKiBpZiB0aGUgbWFwIGRvZXMgbm90IGFscmVhZHkgY29udGFpbiBhbiBlbnRyeSBmb3IgdGhlIGdpdmVuIGRvY3VtZW50IGtleS5cbiAgICAgKi8gICAgcG9wdWxhdGVPdmVybGF5cyhlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBbXTtcbiAgICAgICAgcmV0dXJuIG4uZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0LmhhcyhlKSB8fCByLnB1c2goZSk7XG4gICAgICAgIH0pKSwgdGhpcy5kb2N1bWVudE92ZXJsYXlDYWNoZS5nZXRPdmVybGF5cyhlLCByKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGUuZm9yRWFjaCgoKGUsIG4pID0+IHtcbiAgICAgICAgICAgICAgICB0LnNldChlLCBuKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21wdXRlcyB0aGUgbG9jYWwgdmlldyBmb3IgdGhlIGdpdmVuIGRvY3VtZW50cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2NzIC0gVGhlIGRvY3VtZW50cyB0byBjb21wdXRlIHZpZXdzIGZvci4gSXQgYWxzbyBoYXMgdGhlIGJhc2VcbiAgICAgKiAgIHZlcnNpb24gb2YgdGhlIGRvY3VtZW50cy5cbiAgICAgKiBAcGFyYW0gb3ZlcmxheXMgLSBUaGUgb3ZlcmxheXMgdGhhdCBuZWVkIHRvIGJlIGFwcGxpZWQgdG8gdGhlIGdpdmVuIGJhc2VcbiAgICAgKiAgIHZlcnNpb24gb2YgdGhlIGRvY3VtZW50cy5cbiAgICAgKiBAcGFyYW0gZXhpc3RlbmNlU3RhdGVDaGFuZ2VkIC0gQSBzZXQgb2YgZG9jdW1lbnRzIHdob3NlIGV4aXN0ZW5jZSBzdGF0ZXNcbiAgICAgKiAgIG1pZ2h0IGhhdmUgY2hhbmdlZC4gVGhpcyBpcyB1c2VkIHRvIGRldGVybWluZSBpZiB3ZSBuZWVkIHRvIHJlLWNhbGN1bGF0ZVxuICAgICAqICAgb3ZlcmxheXMgZnJvbSBtdXRhdGlvbiBxdWV1ZXMuXG4gICAgICogQHJldHVybiBBIG1hcCByZXByZXNlbnRzIHRoZSBsb2NhbCBkb2N1bWVudHMgdmlldy5cbiAgICAgKi8gICAgY29tcHV0ZVZpZXdzKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgbGV0IGkgPSBfX1BSSVZBVEVfbXV0YWJsZURvY3VtZW50TWFwKCk7XG4gICAgICAgIGNvbnN0IHMgPSBfX1BSSVZBVEVfbmV3RG9jdW1lbnRLZXlNYXAoKSwgbyA9IGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdPdmVybGF5ZWREb2N1bWVudE1hcCgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfbmV3RG9jdW1lbnRLZXlNYXAoKTtcbiAgICAgICAgfSgpO1xuICAgICAgICByZXR1cm4gdC5mb3JFYWNoKCgoZSwgdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbyA9IG4uZ2V0KHQua2V5KTtcbiAgICAgICAgICAgIC8vIFJlY2FsY3VsYXRlIGFuIG92ZXJsYXkgaWYgdGhlIGRvY3VtZW50J3MgZXhpc3RlbmNlIHN0YXRlIGNoYW5nZWQgZHVlIHRvXG4gICAgICAgICAgICAvLyBhIHJlbW90ZSBldmVudCAqYW5kKiB0aGUgb3ZlcmxheSBpcyBhIFBhdGNoTXV0YXRpb24uIFRoaXMgaXMgYmVjYXVzZVxuICAgICAgICAgICAgLy8gZG9jdW1lbnQgZXhpc3RlbmNlIHN0YXRlIGNhbiBjaGFuZ2UgaWYgc29tZSBwYXRjaCBtdXRhdGlvbidzXG4gICAgICAgICAgICAvLyBwcmVjb25kaXRpb25zIGFyZSBtZXQuXG4gICAgICAgICAgICAvLyBOT1RFOiB3ZSByZWNhbGN1bGF0ZSB3aGVuIGBvdmVybGF5YCBpcyB1bmRlZmluZWQgYXMgd2VsbCwgYmVjYXVzZSB0aGVyZVxuICAgICAgICAgICAgLy8gbWlnaHQgYmUgYSBwYXRjaCBtdXRhdGlvbiB3aG9zZSBwcmVjb25kaXRpb24gZG9lcyBub3QgbWF0Y2ggYmVmb3JlIHRoZVxuICAgICAgICAgICAgLy8gY2hhbmdlIChoZW5jZSBvdmVybGF5IGlzIHVuZGVmaW5lZCksIGJ1dCB3b3VsZCBub3cgbWF0Y2guXG4gICAgICAgICAgICAgICAgICAgICAgICByLmhhcyh0LmtleSkgJiYgKHZvaWQgMCA9PT0gbyB8fCBvLm11dGF0aW9uIGluc3RhbmNlb2YgX19QUklWQVRFX1BhdGNoTXV0YXRpb24pID8gaSA9IGkuaW5zZXJ0KHQua2V5LCB0KSA6IHZvaWQgMCAhPT0gbyA/IChzLnNldCh0LmtleSwgby5tdXRhdGlvbi5nZXRGaWVsZE1hc2soKSksIFxuICAgICAgICAgICAgX19QUklWQVRFX211dGF0aW9uQXBwbHlUb0xvY2FsVmlldyhvLm11dGF0aW9uLCB0LCBvLm11dGF0aW9uLmdldEZpZWxkTWFzaygpLCBUaW1lc3RhbXAubm93KCkpKSA6IFxuICAgICAgICAgICAgLy8gbm8gb3ZlcmxheSBleGlzdHNcbiAgICAgICAgICAgIC8vIFVzaW5nIEVNUFRZIHRvIGluZGljYXRlIHRoZXJlIGlzIG5vIG92ZXJsYXkgZm9yIHRoZSBkb2N1bWVudC5cbiAgICAgICAgICAgIHMuc2V0KHQua2V5LCBGaWVsZE1hc2suZW1wdHkoKSk7XG4gICAgICAgIH0pKSwgdGhpcy5yZWNhbGN1bGF0ZUFuZFNhdmVPdmVybGF5cyhlLCBpKS5uZXh0KChlID0+IChlLmZvckVhY2goKChlLCB0KSA9PiBzLnNldChlLCB0KSkpLCBcbiAgICAgICAgdC5mb3JFYWNoKCgoZSwgdCkgPT4ge1xuICAgICAgICAgICAgdmFyIG47XG4gICAgICAgICAgICByZXR1cm4gby5zZXQoZSwgbmV3IE92ZXJsYXllZERvY3VtZW50KHQsIG51bGwgIT09IChuID0gcy5nZXQoZSkpICYmIHZvaWQgMCAhPT0gbiA/IG4gOiBudWxsKSk7XG4gICAgICAgIH0pKSwgbykpKTtcbiAgICB9XG4gICAgcmVjYWxjdWxhdGVBbmRTYXZlT3ZlcmxheXMoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX25ld0RvY3VtZW50S2V5TWFwKCk7XG4gICAgICAgIC8vIEEgcmV2ZXJzZSBsb29rdXAgbWFwIGZyb20gYmF0Y2ggaWQgdG8gdGhlIGRvY3VtZW50cyB3aXRoaW4gdGhhdCBiYXRjaC5cbiAgICAgICAgICAgICAgICBsZXQgciA9IG5ldyBTb3J0ZWRNYXAoKChlLCB0KSA9PiBlIC0gdCkpLCBpID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCk7XG4gICAgICAgIHJldHVybiB0aGlzLm11dGF0aW9uUXVldWUuZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzKGUsIHQpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBpIG9mIGUpIGkua2V5cygpLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSB0LmdldChlKTtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gcykgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGxldCBvID0gbi5nZXQoZSkgfHwgRmllbGRNYXNrLmVtcHR5KCk7XG4gICAgICAgICAgICAgICAgbyA9IGkuYXBwbHlUb0xvY2FsVmlldyhzLCBvKSwgbi5zZXQoZSwgbyk7XG4gICAgICAgICAgICAgICAgY29uc3QgXyA9IChyLmdldChpLmJhdGNoSWQpIHx8IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpKS5hZGQoZSk7XG4gICAgICAgICAgICAgICAgciA9IHIuaW5zZXJ0KGkuYmF0Y2hJZCwgXyk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gW10sIG8gPSByLmdldFJldmVyc2VJdGVyYXRvcigpO1xuICAgICAgICAgICAgLy8gSXRlcmF0ZSBpbiBkZXNjZW5kaW5nIG9yZGVyIG9mIGJhdGNoIElEcywgYW5kIHNraXAgZG9jdW1lbnRzIHRoYXQgYXJlXG4gICAgICAgICAgICAvLyBhbHJlYWR5IHNhdmVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7by5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBvLmdldE5leHQoKSwgXyA9IHIua2V5LCBhID0gci52YWx1ZSwgdSA9IF9fUFJJVkFURV9uZXdNdXRhdGlvbk1hcCgpO1xuICAgICAgICAgICAgICAgIGEuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaS5oYXMoZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfY2FsY3VsYXRlT3ZlcmxheU11dGF0aW9uKHQuZ2V0KGUpLCBuLmdldChlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsICE9PSByICYmIHUuc2V0KGUsIHIpLCBpID0gaS5hZGQoZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSksIHMucHVzaCh0aGlzLmRvY3VtZW50T3ZlcmxheUNhY2hlLnNhdmVPdmVybGF5cyhlLCBfLCB1KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3Iocyk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlY2FsY3VsYXRlcyBvdmVybGF5cyBieSByZWFkaW5nIHRoZSBkb2N1bWVudHMgZnJvbSByZW1vdGUgZG9jdW1lbnQgY2FjaGVcbiAgICAgKiBmaXJzdCwgYW5kIHNhdmVzIHRoZW0gYWZ0ZXIgdGhleSBhcmUgY2FsY3VsYXRlZC5cbiAgICAgKi8gICAgcmVjYWxjdWxhdGVBbmRTYXZlT3ZlcmxheXNGb3JEb2N1bWVudEtleXMoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJpZXMoZSwgdCkubmV4dCgodCA9PiB0aGlzLnJlY2FsY3VsYXRlQW5kU2F2ZU92ZXJsYXlzKGUsIHQpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIGEgcXVlcnkgYWdhaW5zdCB0aGUgbG9jYWwgdmlldyBvZiBhbGwgZG9jdW1lbnRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRyYW5zYWN0aW9uIC0gVGhlIHBlcnNpc3RlbmNlIHRyYW5zYWN0aW9uLlxuICAgICAqIEBwYXJhbSBxdWVyeSAtIFRoZSBxdWVyeSB0byBtYXRjaCBkb2N1bWVudHMgYWdhaW5zdC5cbiAgICAgKiBAcGFyYW0gb2Zmc2V0IC0gUmVhZCB0aW1lIGFuZCBrZXkgdG8gc3RhcnQgc2Nhbm5pbmcgYnkgKGV4Y2x1c2l2ZSkuXG4gICAgICogQHBhcmFtIGNvbnRleHQgLSBBIG9wdGlvbmFsIHRyYWNrZXIgdG8ga2VlcCBhIHJlY29yZCBvZiBpbXBvcnRhbnQgZGV0YWlsc1xuICAgICAqICAgZHVyaW5nIGRhdGFiYXNlIGxvY2FsIHF1ZXJ5IGV4ZWN1dGlvbi5cbiAgICAgKi8gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeShlLCB0LCBuLCByKSB7XG4gICAgICAgIC8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoZSBxdWVyeSBtYXRjaGVzIGEgc2luZ2xlIGRvY3VtZW50IGJ5IHBhdGggKHJhdGhlciB0aGFuIGFcbiAqIGNvbGxlY3Rpb24pLlxuICovXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfaXNEb2N1bWVudFF1ZXJ5JDEoZSkge1xuICAgICAgICAgICAgcmV0dXJuIERvY3VtZW50S2V5LmlzRG9jdW1lbnRLZXkoZS5wYXRoKSAmJiBudWxsID09PSBlLmNvbGxlY3Rpb25Hcm91cCAmJiAwID09PSBlLmZpbHRlcnMubGVuZ3RoO1xuICAgICAgICB9KHQpID8gdGhpcy5nZXREb2N1bWVudHNNYXRjaGluZ0RvY3VtZW50UXVlcnkoZSwgdC5wYXRoKSA6IF9fUFJJVkFURV9pc0NvbGxlY3Rpb25Hcm91cFF1ZXJ5KHQpID8gdGhpcy5nZXREb2N1bWVudHNNYXRjaGluZ0NvbGxlY3Rpb25Hcm91cFF1ZXJ5KGUsIHQsIG4sIHIpIDogdGhpcy5nZXREb2N1bWVudHNNYXRjaGluZ0NvbGxlY3Rpb25RdWVyeShlLCB0LCBuLCByKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2l2ZW4gYSBjb2xsZWN0aW9uIGdyb3VwLCByZXR1cm5zIHRoZSBuZXh0IGRvY3VtZW50cyB0aGF0IGZvbGxvdyB0aGUgcHJvdmlkZWQgb2Zmc2V0LCBhbG9uZ1xuICAgICAqIHdpdGggYW4gdXBkYXRlZCBiYXRjaCBJRC5cbiAgICAgKlxuICAgICAqIDxwPlRoZSBkb2N1bWVudHMgcmV0dXJuZWQgYnkgdGhpcyBtZXRob2QgYXJlIG9yZGVyZWQgYnkgcmVtb3RlIHZlcnNpb24gZnJvbSB0aGUgcHJvdmlkZWRcbiAgICAgKiBvZmZzZXQuIElmIHRoZXJlIGFyZSBubyBtb3JlIHJlbW90ZSBkb2N1bWVudHMgYWZ0ZXIgdGhlIHByb3ZpZGVkIG9mZnNldCwgZG9jdW1lbnRzIHdpdGhcbiAgICAgKiBtdXRhdGlvbnMgaW4gb3JkZXIgb2YgYmF0Y2ggaWQgZnJvbSB0aGUgb2Zmc2V0IGFyZSByZXR1cm5lZC4gU2luY2UgYWxsIGRvY3VtZW50cyBpbiBhIGJhdGNoIGFyZVxuICAgICAqIHJldHVybmVkIHRvZ2V0aGVyLCB0aGUgdG90YWwgbnVtYmVyIG9mIGRvY3VtZW50cyByZXR1cm5lZCBjYW4gZXhjZWVkIHtAY29kZSBjb3VudH0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb25cbiAgICAgKiBAcGFyYW0gY29sbGVjdGlvbkdyb3VwIFRoZSBjb2xsZWN0aW9uIGdyb3VwIGZvciB0aGUgZG9jdW1lbnRzLlxuICAgICAqIEBwYXJhbSBvZmZzZXQgVGhlIG9mZnNldCB0byBpbmRleCBpbnRvLlxuICAgICAqIEBwYXJhbSBjb3VudCBUaGUgbnVtYmVyIG9mIGRvY3VtZW50cyB0byByZXR1cm5cbiAgICAgKiBAcmV0dXJuIEEgTG9jYWxXcml0ZVJlc3VsdCB3aXRoIHRoZSBkb2N1bWVudHMgdGhhdCBmb2xsb3cgdGhlIHByb3ZpZGVkIG9mZnNldCBhbmQgdGhlIGxhc3QgcHJvY2Vzc2VkIGJhdGNoIGlkLlxuICAgICAqLyAgICBnZXROZXh0RG9jdW1lbnRzKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZS5nZXRBbGxGcm9tQ29sbGVjdGlvbkdyb3VwKGUsIHQsIG4sIHIpLm5leHQoKGkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IHIgLSBpLnNpemUgPiAwID8gdGhpcy5kb2N1bWVudE92ZXJsYXlDYWNoZS5nZXRPdmVybGF5c0ZvckNvbGxlY3Rpb25Hcm91cChlLCB0LCBuLmxhcmdlc3RCYXRjaElkLCByIC0gaS5zaXplKSA6IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKF9fUFJJVkFURV9uZXdPdmVybGF5TWFwKCkpO1xuICAgICAgICAgICAgLy8gVGhlIGNhbGxzaXRlIHdpbGwgdXNlIHRoZSBsYXJnZXN0IGJhdGNoIElEIHRvZ2V0aGVyIHdpdGggdGhlIGxhdGVzdCByZWFkIHRpbWUgdG8gY3JlYXRlXG4gICAgICAgICAgICAvLyBhIG5ldyBpbmRleCBvZmZzZXQuIFNpbmNlIHdlIG9ubHkgcHJvY2VzcyBiYXRjaCBJRHMgaWYgYWxsIHJlbW90ZSBkb2N1bWVudHMgaGF2ZSBiZWVuIHJlYWQsXG4gICAgICAgICAgICAvLyBubyBvdmVybGF5IHdpbGwgaW5jcmVhc2UgdGhlIG92ZXJhbGwgcmVhZCB0aW1lLiBUaGlzIGlzIHdoeSB3ZSBvbmx5IG5lZWQgdG8gc3BlY2lhbCBjYXNlXG4gICAgICAgICAgICAvLyB0aGUgYmF0Y2ggaWQuXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbyA9IC0xLCBfID0gaTtcbiAgICAgICAgICAgIHJldHVybiBzLm5leHQoKHQgPT4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godCwgKCh0LCBuKSA9PiAobyA8IG4ubGFyZ2VzdEJhdGNoSWQgJiYgKG8gPSBuLmxhcmdlc3RCYXRjaElkKSwgXG4gICAgICAgICAgICBpLmdldCh0KSA/IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCkgOiB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGUuZ2V0RW50cnkoZSwgdCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgXyA9IF8uaW5zZXJ0KHQsIGUpO1xuICAgICAgICAgICAgfSkpKSkpLm5leHQoKCgpID0+IHRoaXMucG9wdWxhdGVPdmVybGF5cyhlLCB0LCBpKSkpLm5leHQoKCgpID0+IHRoaXMuY29tcHV0ZVZpZXdzKGUsIF8sIHQsIF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpKSkpLm5leHQoKGUgPT4gKHtcbiAgICAgICAgICAgICAgICBiYXRjaElkOiBvLFxuICAgICAgICAgICAgICAgIGNoYW5nZXM6IF9fUFJJVkFURV9jb252ZXJ0T3ZlcmxheWVkRG9jdW1lbnRNYXBUb0RvY3VtZW50TWFwKGUpXG4gICAgICAgICAgICB9KSkpKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdEb2N1bWVudFF1ZXJ5KGUsIHQpIHtcbiAgICAgICAgLy8gSnVzdCBkbyBhIHNpbXBsZSBkb2N1bWVudCBsb29rdXAuXG4gICAgICAgIHJldHVybiB0aGlzLmdldERvY3VtZW50KGUsIG5ldyBEb2N1bWVudEtleSh0KSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBsZXQgdCA9IGRvY3VtZW50TWFwKCk7XG4gICAgICAgICAgICByZXR1cm4gZS5pc0ZvdW5kRG9jdW1lbnQoKSAmJiAodCA9IHQuaW5zZXJ0KGUua2V5LCBlKSksIHQ7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdDb2xsZWN0aW9uR3JvdXBRdWVyeShlLCB0LCBuLCByKSB7XG4gICAgICAgIGNvbnN0IGkgPSB0LmNvbGxlY3Rpb25Hcm91cDtcbiAgICAgICAgbGV0IHMgPSBkb2N1bWVudE1hcCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleE1hbmFnZXIuZ2V0Q29sbGVjdGlvblBhcmVudHMoZSwgaSkubmV4dCgobyA9PiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaChvLCAobyA9PiB7XG4gICAgICAgICAgICBjb25zdCBfID0gZnVuY3Rpb24gX19QUklWQVRFX2FzQ29sbGVjdGlvblF1ZXJ5QXRQYXRoKGUsIHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9RdWVyeUltcGwodCwgXG4gICAgICAgICAgICAgICAgLypjb2xsZWN0aW9uR3JvdXA9Ki8gbnVsbCwgZS5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgZS5maWx0ZXJzLnNsaWNlKCksIGUubGltaXQsIGUubGltaXRUeXBlLCBlLnN0YXJ0QXQsIGUuZW5kQXQpO1xuICAgICAgICAgICAgfSh0LCBvLmNoaWxkKGkpKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldERvY3VtZW50c01hdGNoaW5nQ29sbGVjdGlvblF1ZXJ5KGUsIF8sIG4sIHIpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgIGUuZm9yRWFjaCgoKGUsIHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcyA9IHMuaW5zZXJ0KGUsIHQpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHMpKSkpO1xuICAgIH1cbiAgICBnZXREb2N1bWVudHNNYXRjaGluZ0NvbGxlY3Rpb25RdWVyeShlLCB0LCBuLCByKSB7XG4gICAgICAgIC8vIFF1ZXJ5IHRoZSByZW1vdGUgZG9jdW1lbnRzIGFuZCBvdmVybGF5IG11dGF0aW9ucy5cbiAgICAgICAgbGV0IGk7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50T3ZlcmxheUNhY2hlLmdldE92ZXJsYXlzRm9yQ29sbGVjdGlvbihlLCB0LnBhdGgsIG4ubGFyZ2VzdEJhdGNoSWQpLm5leHQoKHMgPT4gKGkgPSBzLCBcbiAgICAgICAgdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkoZSwgdCwgbiwgaSwgcikpKSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAvLyBBcyBkb2N1bWVudHMgbWlnaHQgbWF0Y2ggdGhlIHF1ZXJ5IGJlY2F1c2Ugb2YgdGhlaXIgb3ZlcmxheSB3ZSBuZWVkIHRvXG4gICAgICAgICAgICAvLyBpbmNsdWRlIGRvY3VtZW50cyBmb3IgYWxsIG92ZXJsYXlzIGluIHRoZSBpbml0aWFsIGRvY3VtZW50IHNldC5cbiAgICAgICAgICAgIGkuZm9yRWFjaCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gbi5nZXRLZXkoKTtcbiAgICAgICAgICAgICAgICBudWxsID09PSBlLmdldChyKSAmJiAoZSA9IGUuaW5zZXJ0KHIsIE11dGFibGVEb2N1bWVudC5uZXdJbnZhbGlkRG9jdW1lbnQocikpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIC8vIEFwcGx5IHRoZSBvdmVybGF5cyBhbmQgbWF0Y2ggYWdhaW5zdCB0aGUgcXVlcnkuXG4gICAgICAgICAgICBsZXQgbiA9IGRvY3VtZW50TWFwKCk7XG4gICAgICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCgoZSwgcikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBpLmdldChlKTtcbiAgICAgICAgICAgICAgICB2b2lkIDAgIT09IHMgJiYgX19QUklWQVRFX211dGF0aW9uQXBwbHlUb0xvY2FsVmlldyhzLm11dGF0aW9uLCByLCBGaWVsZE1hc2suZW1wdHkoKSwgVGltZXN0YW1wLm5vdygpKSwgXG4gICAgICAgICAgICAgICAgLy8gRmluYWxseSwgaW5zZXJ0IHRoZSBkb2N1bWVudHMgdGhhdCBzdGlsbCBtYXRjaCB0aGUgcXVlcnlcbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfcXVlcnlNYXRjaGVzKHQsIHIpICYmIChuID0gbi5pbnNlcnQoZSwgcikpO1xuICAgICAgICAgICAgfSkpLCBuO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfTWVtb3J5QnVuZGxlQ2FjaGUge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gZSwgdGhpcy5jciA9IG5ldyBNYXAsIHRoaXMubHIgPSBuZXcgTWFwO1xuICAgIH1cbiAgICBnZXRCdW5kbGVNZXRhZGF0YShlLCB0KSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLmNyLmdldCh0KSk7XG4gICAgfVxuICAgIHNhdmVCdW5kbGVNZXRhZGF0YShlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNyLnNldCh0LmlkLCBcbiAgICAgICAgLyoqIERlY29kZXMgYSBCdW5kbGVNZXRhZGF0YSBwcm90byBpbnRvIGEgQnVuZGxlTWV0YWRhdGEgb2JqZWN0LiAqL1xuICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUJ1bmRsZU1ldGFkYXRhKGUpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaWQ6IGUuaWQsXG4gICAgICAgICAgICAgICAgdmVyc2lvbjogZS52ZXJzaW9uLFxuICAgICAgICAgICAgICAgIGNyZWF0ZVRpbWU6IF9fUFJJVkFURV9mcm9tVmVyc2lvbihlLmNyZWF0ZVRpbWUpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KHQpKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0TmFtZWRRdWVyeShlLCB0KSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLmxyLmdldCh0KSk7XG4gICAgfVxuICAgIHNhdmVOYW1lZFF1ZXJ5KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubHIuc2V0KHQubmFtZSwgZnVuY3Rpb24gX19QUklWQVRFX2Zyb21Qcm90b05hbWVkUXVlcnkoZSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBlLm5hbWUsXG4gICAgICAgICAgICAgICAgcXVlcnk6IF9fUFJJVkFURV9mcm9tQnVuZGxlZFF1ZXJ5KGUuYnVuZGxlZFF1ZXJ5KSxcbiAgICAgICAgICAgICAgICByZWFkVGltZTogX19QUklWQVRFX2Zyb21WZXJzaW9uKGUucmVhZFRpbWUpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KHQpKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGluLW1lbW9yeSBpbXBsZW1lbnRhdGlvbiBvZiBEb2N1bWVudE92ZXJsYXlDYWNoZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfTWVtb3J5RG9jdW1lbnRPdmVybGF5Q2FjaGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBBIG1hcCBzb3J0ZWQgYnkgRG9jdW1lbnRLZXksIHdob3NlIHZhbHVlIGlzIGEgcGFpciBvZiB0aGUgbGFyZ2VzdCBiYXRjaCBpZFxuICAgICAgICAvLyBmb3IgdGhlIG92ZXJsYXkgYW5kIHRoZSBvdmVybGF5IGl0c2VsZi5cbiAgICAgICAgdGhpcy5vdmVybGF5cyA9IG5ldyBTb3J0ZWRNYXAoRG9jdW1lbnRLZXkuY29tcGFyYXRvciksIHRoaXMuaHIgPSBuZXcgTWFwO1xuICAgIH1cbiAgICBnZXRPdmVybGF5KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMub3ZlcmxheXMuZ2V0KHQpKTtcbiAgICB9XG4gICAgZ2V0T3ZlcmxheXMoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX25ld092ZXJsYXlNYXAoKTtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHQsICh0ID0+IHRoaXMuZ2V0T3ZlcmxheShlLCB0KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIG51bGwgIT09IGUgJiYgbi5zZXQodCwgZSk7XG4gICAgICAgIH0pKSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgc2F2ZU92ZXJsYXlzKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIG4uZm9yRWFjaCgoKG4sIHIpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaHQoZSwgdCwgcik7XG4gICAgICAgIH0pKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlT3ZlcmxheXNGb3JCYXRjaElkKGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IHRoaXMuaHIuZ2V0KG4pO1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSByICYmIChyLmZvckVhY2goKGUgPT4gdGhpcy5vdmVybGF5cyA9IHRoaXMub3ZlcmxheXMucmVtb3ZlKGUpKSksIFxuICAgICAgICB0aGlzLmhyLmRlbGV0ZShuKSksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldE92ZXJsYXlzRm9yQ29sbGVjdGlvbihlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfbmV3T3ZlcmxheU1hcCgpLCBpID0gdC5sZW5ndGggKyAxLCBzID0gbmV3IERvY3VtZW50S2V5KHQuY2hpbGQoXCJcIikpLCBvID0gdGhpcy5vdmVybGF5cy5nZXRJdGVyYXRvckZyb20ocyk7XG4gICAgICAgIGZvciAoO28uaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBvLmdldE5leHQoKS52YWx1ZSwgcyA9IGUuZ2V0S2V5KCk7XG4gICAgICAgICAgICBpZiAoIXQuaXNQcmVmaXhPZihzLnBhdGgpKSBicmVhaztcbiAgICAgICAgICAgIC8vIERvY3VtZW50cyBmcm9tIHN1Yi1jb2xsZWN0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgcy5wYXRoLmxlbmd0aCA9PT0gaSAmJiAoZS5sYXJnZXN0QmF0Y2hJZCA+IG4gJiYgci5zZXQoZS5nZXRLZXkoKSwgZSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShyKTtcbiAgICB9XG4gICAgZ2V0T3ZlcmxheXNGb3JDb2xsZWN0aW9uR3JvdXAoZSwgdCwgbiwgcikge1xuICAgICAgICBsZXQgaSA9IG5ldyBTb3J0ZWRNYXAoKChlLCB0KSA9PiBlIC0gdCkpO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5vdmVybGF5cy5nZXRJdGVyYXRvcigpO1xuICAgICAgICBmb3IgKDtzLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gcy5nZXROZXh0KCkudmFsdWU7XG4gICAgICAgICAgICBpZiAoZS5nZXRLZXkoKS5nZXRDb2xsZWN0aW9uR3JvdXAoKSA9PT0gdCAmJiBlLmxhcmdlc3RCYXRjaElkID4gbikge1xuICAgICAgICAgICAgICAgIGxldCB0ID0gaS5nZXQoZS5sYXJnZXN0QmF0Y2hJZCk7XG4gICAgICAgICAgICAgICAgbnVsbCA9PT0gdCAmJiAodCA9IF9fUFJJVkFURV9uZXdPdmVybGF5TWFwKCksIGkgPSBpLmluc2VydChlLmxhcmdlc3RCYXRjaElkLCB0KSksIFxuICAgICAgICAgICAgICAgIHQuc2V0KGUuZ2V0S2V5KCksIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG8gPSBfX1BSSVZBVEVfbmV3T3ZlcmxheU1hcCgpLCBfID0gaS5nZXRJdGVyYXRvcigpO1xuICAgICAgICBmb3IgKDtfLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBpZiAoXy5nZXROZXh0KCkudmFsdWUuZm9yRWFjaCgoKGUsIHQpID0+IG8uc2V0KGUsIHQpKSksIG8uc2l6ZSgpID49IHIpIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShvKTtcbiAgICB9XG4gICAgaHQoZSwgdCwgbikge1xuICAgICAgICAvLyBSZW1vdmUgdGhlIGFzc29jaWF0aW9uIG9mIHRoZSBvdmVybGF5IHRvIGl0cyBiYXRjaCBpZC5cbiAgICAgICAgY29uc3QgciA9IHRoaXMub3ZlcmxheXMuZ2V0KG4ua2V5KTtcbiAgICAgICAgaWYgKG51bGwgIT09IHIpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLmhyLmdldChyLmxhcmdlc3RCYXRjaElkKS5kZWxldGUobi5rZXkpO1xuICAgICAgICAgICAgdGhpcy5oci5zZXQoci5sYXJnZXN0QmF0Y2hJZCwgZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vdmVybGF5cyA9IHRoaXMub3ZlcmxheXMuaW5zZXJ0KG4ua2V5LCBuZXcgT3ZlcmxheSh0LCBuKSk7XG4gICAgICAgIC8vIENyZWF0ZSB0aGUgYXNzb2NpYXRpb24gb2YgdGhpcyBvdmVybGF5IHRvIHRoZSBnaXZlbiBsYXJnZXN0QmF0Y2hJZC5cbiAgICAgICAgbGV0IGkgPSB0aGlzLmhyLmdldCh0KTtcbiAgICAgICAgdm9pZCAwID09PSBpICYmIChpID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCksIHRoaXMuaHIuc2V0KHQsIGkpKSwgdGhpcy5oci5zZXQodCwgaS5hZGQobi5rZXkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgY29sbGVjdGlvbiBvZiByZWZlcmVuY2VzIHRvIGEgZG9jdW1lbnQgZnJvbSBzb21lIGtpbmQgb2YgbnVtYmVyZWQgZW50aXR5XG4gKiAoZWl0aGVyIGEgdGFyZ2V0IElEIG9yIGJhdGNoIElEKS4gQXMgcmVmZXJlbmNlcyBhcmUgYWRkZWQgdG8gb3IgcmVtb3ZlZCBmcm9tXG4gKiB0aGUgc2V0IGNvcnJlc3BvbmRpbmcgZXZlbnRzIGFyZSBlbWl0dGVkIHRvIGEgcmVnaXN0ZXJlZCBnYXJiYWdlIGNvbGxlY3Rvci5cbiAqXG4gKiBFYWNoIHJlZmVyZW5jZSBpcyByZXByZXNlbnRlZCBieSBhIERvY3VtZW50UmVmZXJlbmNlIG9iamVjdC4gRWFjaCBvZiB0aGVtXG4gKiBjb250YWlucyBlbm91Z2ggaW5mb3JtYXRpb24gdG8gdW5pcXVlbHkgaWRlbnRpZnkgdGhlIHJlZmVyZW5jZS4gVGhleSBhcmUgYWxsXG4gKiBzdG9yZWQgcHJpbWFyaWx5IGluIGEgc2V0IHNvcnRlZCBieSBrZXkuIEEgZG9jdW1lbnQgaXMgY29uc2lkZXJlZCBnYXJiYWdlIGlmXG4gKiB0aGVyZSdzIG5vIHJlZmVyZW5jZXMgaW4gdGhhdCBzZXQgKHRoaXMgY2FuIGJlIGVmZmljaWVudGx5IGNoZWNrZWQgdGhhbmtzIHRvXG4gKiBzb3J0aW5nIGJ5IGtleSkuXG4gKlxuICogUmVmZXJlbmNlU2V0IGFsc28ga2VlcHMgYSBzZWNvbmRhcnkgc2V0IHRoYXQgY29udGFpbnMgcmVmZXJlbmNlcyBzb3J0ZWQgYnlcbiAqIElEcy4gVGhpcyBvbmUgaXMgdXNlZCB0byBlZmZpY2llbnRseSBpbXBsZW1lbnQgcmVtb3ZhbCBvZiBhbGwgcmVmZXJlbmNlcyBieVxuICogc29tZSB0YXJnZXQgSUQuXG4gKi8gY2xhc3MgX19QUklWQVRFX1JlZmVyZW5jZVNldCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIEEgc2V0IG9mIG91dHN0YW5kaW5nIHJlZmVyZW5jZXMgdG8gYSBkb2N1bWVudCBzb3J0ZWQgYnkga2V5LlxuICAgICAgICB0aGlzLlByID0gbmV3IFNvcnRlZFNldChfX1BSSVZBVEVfRG9jUmVmZXJlbmNlLklyKSwgXG4gICAgICAgIC8vIEEgc2V0IG9mIG91dHN0YW5kaW5nIHJlZmVyZW5jZXMgdG8gYSBkb2N1bWVudCBzb3J0ZWQgYnkgdGFyZ2V0IGlkLlxuICAgICAgICB0aGlzLlRyID0gbmV3IFNvcnRlZFNldChfX1BSSVZBVEVfRG9jUmVmZXJlbmNlLkVyKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcmVmZXJlbmNlIHNldCBjb250YWlucyBubyByZWZlcmVuY2VzLiAqLyAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Qci5pc0VtcHR5KCk7XG4gICAgfVxuICAgIC8qKiBBZGRzIGEgcmVmZXJlbmNlIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBrZXkgZm9yIHRoZSBnaXZlbiBJRC4gKi8gICAgYWRkUmVmZXJlbmNlKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBfX1BSSVZBVEVfRG9jUmVmZXJlbmNlKGUsIHQpO1xuICAgICAgICB0aGlzLlByID0gdGhpcy5Qci5hZGQobiksIHRoaXMuVHIgPSB0aGlzLlRyLmFkZChuKTtcbiAgICB9XG4gICAgLyoqIEFkZCByZWZlcmVuY2VzIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBrZXlzIGZvciB0aGUgZ2l2ZW4gSUQuICovICAgIGRyKGUsIHQpIHtcbiAgICAgICAgZS5mb3JFYWNoKChlID0+IHRoaXMuYWRkUmVmZXJlbmNlKGUsIHQpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSByZWZlcmVuY2UgdG8gdGhlIGdpdmVuIGRvY3VtZW50IGtleSBmb3IgdGhlIGdpdmVuXG4gICAgICogSUQuXG4gICAgICovICAgIHJlbW92ZVJlZmVyZW5jZShlLCB0KSB7XG4gICAgICAgIHRoaXMuQXIobmV3IF9fUFJJVkFURV9Eb2NSZWZlcmVuY2UoZSwgdCkpO1xuICAgIH1cbiAgICBScihlLCB0KSB7XG4gICAgICAgIGUuZm9yRWFjaCgoZSA9PiB0aGlzLnJlbW92ZVJlZmVyZW5jZShlLCB0KSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbGVhcnMgYWxsIHJlZmVyZW5jZXMgd2l0aCBhIGdpdmVuIElELiBDYWxscyByZW1vdmVSZWYoKSBmb3IgZWFjaCBrZXlcbiAgICAgKiByZW1vdmVkLlxuICAgICAqLyAgICBWcihlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBuZXcgRG9jdW1lbnRLZXkobmV3IFJlc291cmNlUGF0aChbXSkpLCBuID0gbmV3IF9fUFJJVkFURV9Eb2NSZWZlcmVuY2UodCwgZSksIHIgPSBuZXcgX19QUklWQVRFX0RvY1JlZmVyZW5jZSh0LCBlICsgMSksIGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuVHIuZm9yRWFjaEluUmFuZ2UoWyBuLCByIF0sIChlID0+IHtcbiAgICAgICAgICAgIHRoaXMuQXIoZSksIGkucHVzaChlLmtleSk7XG4gICAgICAgIH0pKSwgaTtcbiAgICB9XG4gICAgbXIoKSB7XG4gICAgICAgIHRoaXMuUHIuZm9yRWFjaCgoZSA9PiB0aGlzLkFyKGUpKSk7XG4gICAgfVxuICAgIEFyKGUpIHtcbiAgICAgICAgdGhpcy5QciA9IHRoaXMuUHIuZGVsZXRlKGUpLCB0aGlzLlRyID0gdGhpcy5Uci5kZWxldGUoZSk7XG4gICAgfVxuICAgIGdyKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IG5ldyBEb2N1bWVudEtleShuZXcgUmVzb3VyY2VQYXRoKFtdKSksIG4gPSBuZXcgX19QUklWQVRFX0RvY1JlZmVyZW5jZSh0LCBlKSwgciA9IG5ldyBfX1BSSVZBVEVfRG9jUmVmZXJlbmNlKHQsIGUgKyAxKTtcbiAgICAgICAgbGV0IGkgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuVHIuZm9yRWFjaEluUmFuZ2UoWyBuLCByIF0sIChlID0+IHtcbiAgICAgICAgICAgIGkgPSBpLmFkZChlLmtleSk7XG4gICAgICAgIH0pKSwgaTtcbiAgICB9XG4gICAgY29udGFpbnNLZXkoZSkge1xuICAgICAgICBjb25zdCB0ID0gbmV3IF9fUFJJVkFURV9Eb2NSZWZlcmVuY2UoZSwgMCksIG4gPSB0aGlzLlByLmZpcnN0QWZ0ZXJPckVxdWFsKHQpO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gbiAmJiBlLmlzRXF1YWwobi5rZXkpO1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX0RvY1JlZmVyZW5jZSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLmtleSA9IGUsIHRoaXMucHIgPSB0O1xuICAgIH1cbiAgICAvKiogQ29tcGFyZSBieSBrZXkgdGhlbiBieSBJRCAqLyAgICBzdGF0aWMgSXIoZSwgdCkge1xuICAgICAgICByZXR1cm4gRG9jdW1lbnRLZXkuY29tcGFyYXRvcihlLmtleSwgdC5rZXkpIHx8IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKGUucHIsIHQucHIpO1xuICAgIH1cbiAgICAvKiogQ29tcGFyZSBieSBJRCB0aGVuIGJ5IGtleSAqLyAgICBzdGF0aWMgRXIoZSwgdCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IoZS5wciwgdC5wcikgfHwgRG9jdW1lbnRLZXkuY29tcGFyYXRvcihlLmtleSwgdC5rZXkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgX19QUklWQVRFX01lbW9yeU11dGF0aW9uUXVldWUge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5pbmRleE1hbmFnZXIgPSBlLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gdCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgc2V0IG9mIGFsbCBtdXRhdGlvbnMgdGhhdCBoYXZlIGJlZW4gc2VudCBidXQgbm90IHlldCBiZWVuIGFwcGxpZWQgdG9cbiAgICAgICAgICogdGhlIGJhY2tlbmQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm11dGF0aW9uUXVldWUgPSBbXSwgXG4gICAgICAgIC8qKiBOZXh0IHZhbHVlIHRvIHVzZSB3aGVuIGFzc2lnbmluZyBzZXF1ZW50aWFsIElEcyB0byBlYWNoIG11dGF0aW9uIGJhdGNoLiAqL1xuICAgICAgICB0aGlzLnlyID0gMSwgXG4gICAgICAgIC8qKiBBbiBvcmRlcmVkIG1hcHBpbmcgYmV0d2VlbiBkb2N1bWVudHMgYW5kIHRoZSBtdXRhdGlvbnMgYmF0Y2ggSURzLiAqL1xuICAgICAgICB0aGlzLndyID0gbmV3IFNvcnRlZFNldChfX1BSSVZBVEVfRG9jUmVmZXJlbmNlLklyKTtcbiAgICB9XG4gICAgY2hlY2tFbXB0eShlKSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgwID09PSB0aGlzLm11dGF0aW9uUXVldWUubGVuZ3RoKTtcbiAgICB9XG4gICAgYWRkTXV0YXRpb25CYXRjaChlLCB0LCBuLCByKSB7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnlyO1xuICAgICAgICB0aGlzLnlyKyssIHRoaXMubXV0YXRpb25RdWV1ZS5sZW5ndGggPiAwICYmIHRoaXMubXV0YXRpb25RdWV1ZVt0aGlzLm11dGF0aW9uUXVldWUubGVuZ3RoIC0gMV07XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgTXV0YXRpb25CYXRjaChpLCB0LCBuLCByKTtcbiAgICAgICAgdGhpcy5tdXRhdGlvblF1ZXVlLnB1c2gocyk7XG4gICAgICAgIC8vIFRyYWNrIHJlZmVyZW5jZXMgYnkgZG9jdW1lbnQga2V5IGFuZCBpbmRleCBjb2xsZWN0aW9uIHBhcmVudHMuXG4gICAgICAgIGZvciAoY29uc3QgdCBvZiByKSB0aGlzLndyID0gdGhpcy53ci5hZGQobmV3IF9fUFJJVkFURV9Eb2NSZWZlcmVuY2UodC5rZXksIGkpKSwgXG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyLmFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KGUsIHQua2V5LnBhdGgucG9wTGFzdCgpKTtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHMpO1xuICAgIH1cbiAgICBsb29rdXBNdXRhdGlvbkJhdGNoKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMuU3IodCkpO1xuICAgIH1cbiAgICBnZXROZXh0TXV0YXRpb25CYXRjaEFmdGVyQmF0Y2hJZChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0ICsgMSwgciA9IHRoaXMuYnIobiksIGkgPSByIDwgMCA/IDAgOiByO1xuICAgICAgICAvLyBUaGUgcmVxdWVzdGVkIGJhdGNoSWQgbWF5IHN0aWxsIGJlIG91dCBvZiByYW5nZSBzbyBub3JtYWxpemUgaXQgdG8gdGhlXG4gICAgICAgIC8vIHN0YXJ0IG9mIHRoZSBxdWV1ZS5cbiAgICAgICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCA+IGkgPyB0aGlzLm11dGF0aW9uUXVldWVbaV0gOiBudWxsKTtcbiAgICB9XG4gICAgZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZCgpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKDAgPT09IHRoaXMubXV0YXRpb25RdWV1ZS5sZW5ndGggPyAtMSA6IHRoaXMueXIgLSAxKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzKGUpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMubXV0YXRpb25RdWV1ZS5zbGljZSgpKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXkoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gbmV3IF9fUFJJVkFURV9Eb2NSZWZlcmVuY2UodCwgMCksIHIgPSBuZXcgX19QUklWQVRFX0RvY1JlZmVyZW5jZSh0LCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpLCBpID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLndyLmZvckVhY2hJblJhbmdlKFsgbiwgciBdLCAoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5TcihlLnByKTtcbiAgICAgICAgICAgIGkucHVzaCh0KTtcbiAgICAgICAgfSkpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShpKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzKGUsIHQpIHtcbiAgICAgICAgbGV0IG4gPSBuZXcgU29ydGVkU2V0KF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKTtcbiAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ID0gbmV3IF9fUFJJVkFURV9Eb2NSZWZlcmVuY2UoZSwgMCksIHIgPSBuZXcgX19QUklWQVRFX0RvY1JlZmVyZW5jZShlLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpO1xuICAgICAgICAgICAgdGhpcy53ci5mb3JFYWNoSW5SYW5nZShbIHQsIHIgXSwgKGUgPT4ge1xuICAgICAgICAgICAgICAgIG4gPSBuLmFkZChlLnByKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLkRyKG4pKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nUXVlcnkoZSwgdCkge1xuICAgICAgICAvLyBVc2UgdGhlIHF1ZXJ5IHBhdGggYXMgYSBwcmVmaXggZm9yIHRlc3RpbmcgaWYgYSBkb2N1bWVudCBtYXRjaGVzIHRoZVxuICAgICAgICAvLyBxdWVyeS5cbiAgICAgICAgY29uc3QgbiA9IHQucGF0aCwgciA9IG4ubGVuZ3RoICsgMTtcbiAgICAgICAgLy8gQ29uc3RydWN0IGEgZG9jdW1lbnQgcmVmZXJlbmNlIGZvciBhY3R1YWxseSBzY2FubmluZyB0aGUgaW5kZXguIFVubGlrZVxuICAgICAgICAvLyB0aGUgcHJlZml4IHRoZSBkb2N1bWVudCBrZXkgaW4gdGhpcyByZWZlcmVuY2UgbXVzdCBoYXZlIGFuIGV2ZW4gbnVtYmVyIG9mXG4gICAgICAgIC8vIHNlZ21lbnRzLiBUaGUgZW1wdHkgc2VnbWVudCBjYW4gYmUgdXNlZCBhIHN1ZmZpeCBvZiB0aGUgcXVlcnkgcGF0aFxuICAgICAgICAvLyBiZWNhdXNlIGl0IHByZWNlZGVzIGFsbCBvdGhlciBzZWdtZW50cyBpbiBhbiBvcmRlcmVkIHRyYXZlcnNhbC5cbiAgICAgICAgbGV0IGkgPSBuO1xuICAgICAgICBEb2N1bWVudEtleS5pc0RvY3VtZW50S2V5KGkpIHx8IChpID0gaS5jaGlsZChcIlwiKSk7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgX19QUklWQVRFX0RvY1JlZmVyZW5jZShuZXcgRG9jdW1lbnRLZXkoaSksIDApO1xuICAgICAgICAvLyBGaW5kIHVuaXF1ZSBiYXRjaElEcyByZWZlcmVuY2VkIGJ5IGFsbCBkb2N1bWVudHMgcG90ZW50aWFsbHkgbWF0Y2hpbmcgdGhlXG4gICAgICAgIC8vIHF1ZXJ5LlxuICAgICAgICAgICAgICAgIGxldCBvID0gbmV3IFNvcnRlZFNldChfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcik7XG4gICAgICAgIHJldHVybiB0aGlzLndyLmZvckVhY2hXaGlsZSgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS5rZXkucGF0aDtcbiAgICAgICAgICAgIHJldHVybiAhIW4uaXNQcmVmaXhPZih0KSAmJiAoXG4gICAgICAgICAgICAvLyBSb3dzIHdpdGggZG9jdW1lbnQga2V5cyBtb3JlIHRoYW4gb25lIHNlZ21lbnQgbG9uZ2VyIHRoYW4gdGhlIHF1ZXJ5XG4gICAgICAgICAgICAvLyBwYXRoIGNhbid0IGJlIG1hdGNoZXMuIEZvciBleGFtcGxlLCBhIHF1ZXJ5IG9uICdyb29tcycgY2FuJ3QgbWF0Y2hcbiAgICAgICAgICAgIC8vIHRoZSBkb2N1bWVudCAvcm9vbXMvYWJjL21lc3NhZ2VzL3h5eC5cbiAgICAgICAgICAgIC8vIFRPRE8obWNnKTogd2UnbGwgbmVlZCBhIGRpZmZlcmVudCBzY2FubmVyIHdoZW4gd2UgaW1wbGVtZW50XG4gICAgICAgICAgICAvLyBhbmNlc3RvciBxdWVyaWVzLlxuICAgICAgICAgICAgdC5sZW5ndGggPT09IHIgJiYgKG8gPSBvLmFkZChlLnByKSksICEwKTtcbiAgICAgICAgfSksIHMpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLkRyKG8pKTtcbiAgICB9XG4gICAgRHIoZSkge1xuICAgICAgICAvLyBDb25zdHJ1Y3QgYW4gYXJyYXkgb2YgbWF0Y2hpbmcgYmF0Y2hlcywgc29ydGVkIGJ5IGJhdGNoSUQgdG8gZW5zdXJlIHRoYXRcbiAgICAgICAgLy8gbXVsdGlwbGUgbXV0YXRpb25zIGFmZmVjdGluZyB0aGUgc2FtZSBkb2N1bWVudCBrZXkgYXJlIGFwcGxpZWQgaW4gb3JkZXIuXG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5TcihlKTtcbiAgICAgICAgICAgIG51bGwgIT09IG4gJiYgdC5wdXNoKG4pO1xuICAgICAgICB9KSksIHQ7XG4gICAgfVxuICAgIHJlbW92ZU11dGF0aW9uQmF0Y2goZSwgdCkge1xuICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydCgwID09PSB0aGlzLkNyKHQuYmF0Y2hJZCwgXCJyZW1vdmVkXCIpKSwgdGhpcy5tdXRhdGlvblF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgIGxldCBuID0gdGhpcy53cjtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHQubXV0YXRpb25zLCAociA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gbmV3IF9fUFJJVkFURV9Eb2NSZWZlcmVuY2Uoci5rZXksIHQuYmF0Y2hJZCk7XG4gICAgICAgICAgICByZXR1cm4gbiA9IG4uZGVsZXRlKGkpLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLm1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKGUsIHIua2V5KTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMud3IgPSBuO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIE1uKGUpIHtcbiAgICAgICAgLy8gTm8tb3Agc2luY2UgdGhlIG1lbW9yeSBtdXRhdGlvbiBxdWV1ZSBkb2VzIG5vdCBtYWludGFpbiBhIHNlcGFyYXRlIGNhY2hlLlxuICAgIH1cbiAgICBjb250YWluc0tleShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgX19QUklWQVRFX0RvY1JlZmVyZW5jZSh0LCAwKSwgciA9IHRoaXMud3IuZmlyc3RBZnRlck9yRXF1YWwobik7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0LmlzRXF1YWwociAmJiByLmtleSkpO1xuICAgIH1cbiAgICBwZXJmb3JtQ29uc2lzdGVuY3lDaGVjayhlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm11dGF0aW9uUXVldWUubGVuZ3RoLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaW5kcyB0aGUgaW5kZXggb2YgdGhlIGdpdmVuIGJhdGNoSWQgaW4gdGhlIG11dGF0aW9uIHF1ZXVlIGFuZCBhc3NlcnRzIHRoYXRcbiAgICAgKiB0aGUgcmVzdWx0aW5nIGluZGV4IGlzIHdpdGhpbiB0aGUgYm91bmRzIG9mIHRoZSBxdWV1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiYXRjaElkIC0gVGhlIGJhdGNoSWQgdG8gc2VhcmNoIGZvclxuICAgICAqIEBwYXJhbSBhY3Rpb24gLSBBIGRlc2NyaXB0aW9uIG9mIHdoYXQgdGhlIGNhbGxlciBpcyBkb2luZywgcGhyYXNlZCBpbiBwYXNzaXZlXG4gICAgICogZm9ybSAoZS5nLiBcImFja25vd2xlZGdlZFwiIGluIGEgcm91dGluZSB0aGF0IGFja25vd2xlZGdlcyBiYXRjaGVzKS5cbiAgICAgKi8gICAgQ3IoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5icihlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmluZHMgdGhlIGluZGV4IG9mIHRoZSBnaXZlbiBiYXRjaElkIGluIHRoZSBtdXRhdGlvbiBxdWV1ZS4gVGhpcyBvcGVyYXRpb25cbiAgICAgKiBpcyBPKDEpLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIGNvbXB1dGVkIGluZGV4IG9mIHRoZSBiYXRjaCB3aXRoIHRoZSBnaXZlbiBiYXRjaElkLCBiYXNlZCBvblxuICAgICAqIHRoZSBzdGF0ZSBvZiB0aGUgcXVldWUuIE5vdGUgdGhpcyBpbmRleCBjYW4gYmUgbmVnYXRpdmUgaWYgdGhlIHJlcXVlc3RlZFxuICAgICAqIGJhdGNoSWQgaGFzIGFscmVhZHkgYmVlbiByZW12b2VkIGZyb20gdGhlIHF1ZXVlIG9yIHBhc3QgdGhlIGVuZCBvZiB0aGVcbiAgICAgKiBxdWV1ZSBpZiB0aGUgYmF0Y2hJZCBpcyBsYXJnZXIgdGhhbiB0aGUgbGFzdCBhZGRlZCBiYXRjaC5cbiAgICAgKi8gICAgYnIoZSkge1xuICAgICAgICBpZiAoMCA9PT0gdGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCkgXG4gICAgICAgIC8vIEFzIGFuIGluZGV4IHRoaXMgaXMgcGFzdCB0aGUgZW5kIG9mIHRoZSBxdWV1ZVxuICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgLy8gRXhhbWluZSB0aGUgZnJvbnQgb2YgdGhlIHF1ZXVlIHRvIGZpZ3VyZSBvdXQgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGVcbiAgICAgICAgLy8gYmF0Y2hJZCBhbmQgaW5kZXhlcyBpbiB0aGUgYXJyYXkuIE5vdGUgdGhhdCBzaW5jZSB0aGUgcXVldWUgaXMgb3JkZXJlZFxuICAgICAgICAvLyBieSBiYXRjaElkLCBpZiB0aGUgZmlyc3QgYmF0Y2ggaGFzIGEgbGFyZ2VyIGJhdGNoSWQgdGhlbiB0aGUgcmVxdWVzdGVkXG4gICAgICAgIC8vIGJhdGNoSWQgZG9lc24ndCBleGlzdCBpbiB0aGUgcXVldWUuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGUgLSB0aGlzLm11dGF0aW9uUXVldWVbMF0uYmF0Y2hJZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSB2ZXJzaW9uIG9mIGxvb2t1cE11dGF0aW9uQmF0Y2ggdGhhdCBkb2Vzbid0IHJldHVybiBhIHByb21pc2UsIHRoaXMgbWFrZXNcbiAgICAgKiBvdGhlciBmdW5jdGlvbnMgdGhhdCB1c2VzIHRoaXMgY29kZSBlYXNpZXIgdG8gcmVhZCBhbmQgbW9yZSBlZmZpY2VudC5cbiAgICAgKi8gICAgU3IoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5icihlKTtcbiAgICAgICAgaWYgKHQgPCAwIHx8IHQgPj0gdGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiB0aGlzLm11dGF0aW9uUXVldWVbdF07XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgbWVtb3J5LW9ubHkgUmVtb3RlRG9jdW1lbnRDYWNoZSBmb3IgSW5kZXhlZERiLiBUbyBjb25zdHJ1Y3QsIGludm9rZVxuICogYG5ld01lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUoKWAuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9NZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlSW1wbCB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHNpemVyIC0gVXNlZCB0byBhc3Nlc3MgdGhlIHNpemUgb2YgYSBkb2N1bWVudC4gRm9yIGVhZ2VyIEdDLCB0aGlzIGlzXG4gICAgICogZXhwZWN0ZWQgdG8ganVzdCByZXR1cm4gMCB0byBhdm9pZCB1bm5lY2Vzc2FyaWx5IGRvaW5nIHRoZSB3b3JrIG9mXG4gICAgICogY2FsY3VsYXRpbmcgdGhlIHNpemUuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLnZyID0gZSwgXG4gICAgICAgIC8qKiBVbmRlcmx5aW5nIGNhY2hlIG9mIGRvY3VtZW50cyBhbmQgdGhlaXIgcmVhZCB0aW1lcy4gKi9cbiAgICAgICAgdGhpcy5kb2NzID0gZnVuY3Rpb24gX19QUklWQVRFX2RvY3VtZW50RW50cnlNYXAoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcbiAgICAgICAgfSgpLCBcbiAgICAgICAgLyoqIFNpemUgb2YgYWxsIGNhY2hlZCBkb2N1bWVudHMuICovXG4gICAgICAgIHRoaXMuc2l6ZSA9IDA7XG4gICAgfVxuICAgIHNldEluZGV4TWFuYWdlcihlKSB7XG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyB0aGUgc3VwcGxpZWQgZW50cnkgdG8gdGhlIGNhY2hlIGFuZCB1cGRhdGVzIHRoZSBjYWNoZSBzaXplIGFzIGFwcHJvcHJpYXRlLlxuICAgICAqXG4gICAgICogQWxsIGNhbGxzIG9mIGBhZGRFbnRyeWAgIGFyZSByZXF1aXJlZCB0byBnbyB0aHJvdWdoIHRoZSBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlclxuICAgICAqIHJldHVybmVkIGJ5IGBuZXdDaGFuZ2VCdWZmZXIoKWAuXG4gICAgICovICAgIGFkZEVudHJ5KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHQua2V5LCByID0gdGhpcy5kb2NzLmdldChuKSwgaSA9IHIgPyByLnNpemUgOiAwLCBzID0gdGhpcy52cih0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jcyA9IHRoaXMuZG9jcy5pbnNlcnQobiwge1xuICAgICAgICAgICAgZG9jdW1lbnQ6IHQubXV0YWJsZUNvcHkoKSxcbiAgICAgICAgICAgIHNpemU6IHNcbiAgICAgICAgfSksIHRoaXMuc2l6ZSArPSBzIC0gaSwgdGhpcy5pbmRleE1hbmFnZXIuYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgoZSwgbi5wYXRoLnBvcExhc3QoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIHNwZWNpZmllZCBlbnRyeSBmcm9tIHRoZSBjYWNoZSBhbmQgdXBkYXRlcyB0aGUgY2FjaGUgc2l6ZSBhcyBhcHByb3ByaWF0ZS5cbiAgICAgKlxuICAgICAqIEFsbCBjYWxscyBvZiBgcmVtb3ZlRW50cnlgIGFyZSByZXF1aXJlZCB0byBnbyB0aHJvdWdoIHRoZSBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlclxuICAgICAqIHJldHVybmVkIGJ5IGBuZXdDaGFuZ2VCdWZmZXIoKWAuXG4gICAgICovICAgIHJlbW92ZUVudHJ5KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuZG9jcy5nZXQoZSk7XG4gICAgICAgIHQgJiYgKHRoaXMuZG9jcyA9IHRoaXMuZG9jcy5yZW1vdmUoZSksIHRoaXMuc2l6ZSAtPSB0LnNpemUpO1xuICAgIH1cbiAgICBnZXRFbnRyeShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLmRvY3MuZ2V0KHQpO1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUobiA/IG4uZG9jdW1lbnQubXV0YWJsZUNvcHkoKSA6IE11dGFibGVEb2N1bWVudC5uZXdJbnZhbGlkRG9jdW1lbnQodCkpO1xuICAgIH1cbiAgICBnZXRFbnRyaWVzKGUsIHQpIHtcbiAgICAgICAgbGV0IG4gPSBfX1BSSVZBVEVfbXV0YWJsZURvY3VtZW50TWFwKCk7XG4gICAgICAgIHJldHVybiB0LmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuZG9jcy5nZXQoZSk7XG4gICAgICAgICAgICBuID0gbi5pbnNlcnQoZSwgdCA/IHQuZG9jdW1lbnQubXV0YWJsZUNvcHkoKSA6IE11dGFibGVEb2N1bWVudC5uZXdJbnZhbGlkRG9jdW1lbnQoZSkpO1xuICAgICAgICB9KSksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKG4pO1xuICAgIH1cbiAgICBnZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KGUsIHQsIG4sIHIpIHtcbiAgICAgICAgbGV0IGkgPSBfX1BSSVZBVEVfbXV0YWJsZURvY3VtZW50TWFwKCk7XG4gICAgICAgIC8vIERvY3VtZW50cyBhcmUgb3JkZXJlZCBieSBrZXksIHNvIHdlIGNhbiB1c2UgYSBwcmVmaXggc2NhbiB0byBuYXJyb3cgZG93blxuICAgICAgICAvLyB0aGUgZG9jdW1lbnRzIHdlIG5lZWQgdG8gbWF0Y2ggdGhlIHF1ZXJ5IGFnYWluc3QuXG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IHQucGF0aCwgbyA9IG5ldyBEb2N1bWVudEtleShzLmNoaWxkKFwiXCIpKSwgXyA9IHRoaXMuZG9jcy5nZXRJdGVyYXRvckZyb20obyk7XG4gICAgICAgIGZvciAoO18uaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHtrZXk6IGUsIHZhbHVlOiB7ZG9jdW1lbnQ6IG99fSA9IF8uZ2V0TmV4dCgpO1xuICAgICAgICAgICAgaWYgKCFzLmlzUHJlZml4T2YoZS5wYXRoKSkgYnJlYWs7XG4gICAgICAgICAgICBlLnBhdGgubGVuZ3RoID4gcy5sZW5ndGggKyAxIHx8IChfX1BSSVZBVEVfaW5kZXhPZmZzZXRDb21wYXJhdG9yKF9fUFJJVkFURV9uZXdJbmRleE9mZnNldEZyb21Eb2N1bWVudChvKSwgbikgPD0gMCB8fCAoci5oYXMoby5rZXkpIHx8IF9fUFJJVkFURV9xdWVyeU1hdGNoZXModCwgbykpICYmIChpID0gaS5pbnNlcnQoby5rZXksIG8ubXV0YWJsZUNvcHkoKSkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoaSk7XG4gICAgfVxuICAgIGdldEFsbEZyb21Db2xsZWN0aW9uR3JvdXAoZSwgdCwgbiwgcikge1xuICAgICAgICAvLyBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWQgZnJvbSB0aGUgSW5kZXhCYWNrZmlsbGVyIGlmIHBlcnNpc3RlbmNlXG4gICAgICAgIC8vIGlzIGVuYWJsZWQuXG4gICAgICAgIGZhaWwoKTtcbiAgICB9XG4gICAgRnIoZSwgdCkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godGhpcy5kb2NzLCAoZSA9PiB0KGUpKSk7XG4gICAgfVxuICAgIG5ld0NoYW5nZUJ1ZmZlcihlKSB7XG4gICAgICAgIC8vIGB0cmFja1JlbW92YWxzYCBpcyBpZ25vcmVzIHNpbmNlIHRoZSBNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlIGtlZXBzXG4gICAgICAgIC8vIGEgc2VwYXJhdGUgY2hhbmdlbG9nIGFuZCBkb2VzIG5vdCBuZWVkIHNwZWNpYWwgaGFuZGxpbmcgZm9yIHJlbW92YWxzLlxuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9NZW1vcnlSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlcih0aGlzKTtcbiAgICB9XG4gICAgZ2V0U2l6ZShlKSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLnNpemUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IG1lbW9yeS1vbmx5IFJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKlxuICogQHBhcmFtIHNpemVyIC0gVXNlZCB0byBhc3Nlc3MgdGhlIHNpemUgb2YgYSBkb2N1bWVudC4gRm9yIGVhZ2VyIEdDLCB0aGlzIGlzXG4gKiBleHBlY3RlZCB0byBqdXN0IHJldHVybiAwIHRvIGF2b2lkIHVubmVjZXNzYXJpbHkgZG9pbmcgdGhlIHdvcmsgb2ZcbiAqIGNhbGN1bGF0aW5nIHRoZSBzaXplLlxuICovXG4vKipcbiAqIEhhbmRsZXMgdGhlIGRldGFpbHMgb2YgYWRkaW5nIGFuZCB1cGRhdGluZyBkb2N1bWVudHMgaW4gdGhlIE1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9NZW1vcnlSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlciBleHRlbmRzIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuYXIgPSBlO1xuICAgIH1cbiAgICBhcHBseUNoYW5nZXMoZSkge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmNoYW5nZXMuZm9yRWFjaCgoKG4sIHIpID0+IHtcbiAgICAgICAgICAgIHIuaXNWYWxpZERvY3VtZW50KCkgPyB0LnB1c2godGhpcy5hci5hZGRFbnRyeShlLCByKSkgOiB0aGlzLmFyLnJlbW92ZUVudHJ5KG4pO1xuICAgICAgICB9KSksIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHQpO1xuICAgIH1cbiAgICBnZXRGcm9tQ2FjaGUoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hci5nZXRFbnRyeShlLCB0KTtcbiAgICB9XG4gICAgZ2V0QWxsRnJvbUNhY2hlKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXIuZ2V0RW50cmllcyhlLCB0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIF9fUFJJVkFURV9NZW1vcnlUYXJnZXRDYWNoZSB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gZSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXBzIGEgdGFyZ2V0IHRvIHRoZSBkYXRhIGFib3V0IHRoYXQgdGFyZ2V0XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLk1yID0gbmV3IE9iamVjdE1hcCgoZSA9PiBfX1BSSVZBVEVfY2Fub25pZnlUYXJnZXQoZSkpLCBfX1BSSVZBVEVfdGFyZ2V0RXF1YWxzKSwgXG4gICAgICAgIC8qKiBUaGUgbGFzdCByZWNlaXZlZCBzbmFwc2hvdCB2ZXJzaW9uLiAqL1xuICAgICAgICB0aGlzLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24gPSBTbmFwc2hvdFZlcnNpb24ubWluKCksIFxuICAgICAgICAvKiogVGhlIGhpZ2hlc3QgbnVtYmVyZWQgdGFyZ2V0IElEIGVuY291bnRlcmVkLiAqL1xuICAgICAgICB0aGlzLmhpZ2hlc3RUYXJnZXRJZCA9IDAsIFxuICAgICAgICAvKiogVGhlIGhpZ2hlc3Qgc2VxdWVuY2UgbnVtYmVyIGVuY291bnRlcmVkLiAqL1xuICAgICAgICB0aGlzLk9yID0gMCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIG9yZGVyZWQgYmlkaXJlY3Rpb25hbCBtYXBwaW5nIGJldHdlZW4gZG9jdW1lbnRzIGFuZCB0aGUgcmVtb3RlIHRhcmdldFxuICAgICAgICAgKiBJRHMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLk5yID0gbmV3IF9fUFJJVkFURV9SZWZlcmVuY2VTZXQsIHRoaXMudGFyZ2V0Q291bnQgPSAwLCB0aGlzLkxyID0gX19QUklWQVRFX1RhcmdldElkR2VuZXJhdG9yLk5uKCk7XG4gICAgfVxuICAgIGZvckVhY2hUYXJnZXQoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Nci5mb3JFYWNoKCgoZSwgbikgPT4gdChuKSkpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKGUpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbik7XG4gICAgfVxuICAgIGdldEhpZ2hlc3RTZXF1ZW5jZU51bWJlcihlKSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLk9yKTtcbiAgICB9XG4gICAgYWxsb2NhdGVUYXJnZXRJZChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhpZ2hlc3RUYXJnZXRJZCA9IHRoaXMuTHIubmV4dCgpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLmhpZ2hlc3RUYXJnZXRJZCk7XG4gICAgfVxuICAgIHNldFRhcmdldHNNZXRhZGF0YShlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBuICYmICh0aGlzLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24gPSBuKSwgdCA+IHRoaXMuT3IgJiYgKHRoaXMuT3IgPSB0KSwgXG4gICAgICAgIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHFuKGUpIHtcbiAgICAgICAgdGhpcy5Nci5zZXQoZS50YXJnZXQsIGUpO1xuICAgICAgICBjb25zdCB0ID0gZS50YXJnZXRJZDtcbiAgICAgICAgdCA+IHRoaXMuaGlnaGVzdFRhcmdldElkICYmICh0aGlzLkxyID0gbmV3IF9fUFJJVkFURV9UYXJnZXRJZEdlbmVyYXRvcih0KSwgdGhpcy5oaWdoZXN0VGFyZ2V0SWQgPSB0KSwgXG4gICAgICAgIGUuc2VxdWVuY2VOdW1iZXIgPiB0aGlzLk9yICYmICh0aGlzLk9yID0gZS5zZXF1ZW5jZU51bWJlcik7XG4gICAgfVxuICAgIGFkZFRhcmdldERhdGEoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5xbih0KSwgdGhpcy50YXJnZXRDb3VudCArPSAxLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICB1cGRhdGVUYXJnZXREYXRhKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucW4odCksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldERhdGEoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Nci5kZWxldGUodC50YXJnZXQpLCB0aGlzLk5yLlZyKHQudGFyZ2V0SWQpLCB0aGlzLnRhcmdldENvdW50IC09IDEsIFxuICAgICAgICBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXRzKGUsIHQsIG4pIHtcbiAgICAgICAgbGV0IHIgPSAwO1xuICAgICAgICBjb25zdCBpID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLk1yLmZvckVhY2goKChzLCBvKSA9PiB7XG4gICAgICAgICAgICBvLnNlcXVlbmNlTnVtYmVyIDw9IHQgJiYgbnVsbCA9PT0gbi5nZXQoby50YXJnZXRJZCkgJiYgKHRoaXMuTXIuZGVsZXRlKHMpLCBpLnB1c2godGhpcy5yZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZChlLCBvLnRhcmdldElkKSksIFxuICAgICAgICAgICAgcisrKTtcbiAgICAgICAgfSkpLCBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihpKS5uZXh0KCgoKSA9PiByKSk7XG4gICAgfVxuICAgIGdldFRhcmdldENvdW50KGUpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMudGFyZ2V0Q291bnQpO1xuICAgIH1cbiAgICBnZXRUYXJnZXREYXRhKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuTXIuZ2V0KHQpIHx8IG51bGw7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShuKTtcbiAgICB9XG4gICAgYWRkTWF0Y2hpbmdLZXlzKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuTnIuZHIodCwgbiksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZU1hdGNoaW5nS2V5cyhlLCB0LCBuKSB7XG4gICAgICAgIHRoaXMuTnIuUnIodCwgbik7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLCBpID0gW107XG4gICAgICAgIHJldHVybiByICYmIHQuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBpLnB1c2goci5tYXJrUG90ZW50aWFsbHlPcnBoYW5lZChlLCB0KSk7XG4gICAgICAgIH0pKSwgUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IoaSk7XG4gICAgfVxuICAgIHJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuTnIuVnIodCksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuTnIuZ3IodCk7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShuKTtcbiAgICB9XG4gICAgY29udGFpbnNLZXkoZSwgdCkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5Oci5jb250YWluc0tleSh0KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIG1lbW9yeS1iYWNrZWQgaW5zdGFuY2Ugb2YgUGVyc2lzdGVuY2UuIERhdGEgaXMgc3RvcmVkIG9ubHkgaW4gUkFNIGFuZFxuICogbm90IHBlcnNpc3RlZCBhY3Jvc3Mgc2Vzc2lvbnMuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9NZW1vcnlQZXJzaXN0ZW5jZSB7XG4gICAgLyoqXG4gICAgICogVGhlIGNvbnN0cnVjdG9yIGFjY2VwdHMgYSBmYWN0b3J5IGZvciBjcmVhdGluZyBhIHJlZmVyZW5jZSBkZWxlZ2F0ZS4gVGhpc1xuICAgICAqIGFsbG93cyBib3RoIHRoZSBkZWxlZ2F0ZSBhbmQgdGhpcyBpbnN0YW5jZSB0byBoYXZlIHN0cm9uZyByZWZlcmVuY2VzIHRvXG4gICAgICogZWFjaCBvdGhlciB3aXRob3V0IGhhdmluZyBudWxsYWJsZSBmaWVsZHMgdGhhdCB3b3VsZCB0aGVuIG5lZWQgdG8gYmVcbiAgICAgKiBjaGVja2VkIG9yIGFzc2VydGVkIG9uIGV2ZXJ5IGFjY2Vzcy5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMuQnIgPSB7fSwgdGhpcy5vdmVybGF5cyA9IHt9LCB0aGlzLmtyID0gbmV3IF9fUFJJVkFURV9MaXN0ZW5TZXF1ZW5jZSgwKSwgdGhpcy5xciA9ICExLCBcbiAgICAgICAgdGhpcy5xciA9ICEwLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gZSh0aGlzKSwgdGhpcy5RciA9IG5ldyBfX1BSSVZBVEVfTWVtb3J5VGFyZ2V0Q2FjaGUodGhpcyk7XG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyID0gbmV3IF9fUFJJVkFURV9NZW1vcnlJbmRleE1hbmFnZXIsIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZSA9IGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX01lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGVJbXBsKGUpO1xuICAgICAgICB9KChlID0+IHRoaXMucmVmZXJlbmNlRGVsZWdhdGUuS3IoZSkpKSwgdGhpcy5zZXJpYWxpemVyID0gbmV3IF9fUFJJVkFURV9Mb2NhbFNlcmlhbGl6ZXIodCksIFxuICAgICAgICB0aGlzLiRyID0gbmV3IF9fUFJJVkFURV9NZW1vcnlCdW5kbGVDYWNoZSh0aGlzLnNlcmlhbGl6ZXIpO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgLy8gTm8gZHVyYWJsZSBzdGF0ZSB0byBlbnN1cmUgaXMgY2xvc2VkIG9uIHNodXRkb3duLlxuICAgICAgICByZXR1cm4gdGhpcy5xciA9ICExLCBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnFyO1xuICAgIH1cbiAgICBzZXREYXRhYmFzZURlbGV0ZWRMaXN0ZW5lcigpIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIHNldE5ldHdvcmtFbmFibGVkKCkge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgZ2V0SW5kZXhNYW5hZ2VyKGUpIHtcbiAgICAgICAgLy8gV2UgZG8gbm90IGN1cnJlbnRseSBzdXBwb3J0IGluZGljZXMgZm9yIG1lbW9yeSBwZXJzaXN0ZW5jZSwgc28gd2UgY2FuXG4gICAgICAgIC8vIHJldHVybiB0aGUgc2FtZSBzaGFyZWQgaW5zdGFuY2Ugb2YgdGhlIG1lbW9yeSBpbmRleCBtYW5hZ2VyLlxuICAgICAgICByZXR1cm4gdGhpcy5pbmRleE1hbmFnZXI7XG4gICAgfVxuICAgIGdldERvY3VtZW50T3ZlcmxheUNhY2hlKGUpIHtcbiAgICAgICAgbGV0IHQgPSB0aGlzLm92ZXJsYXlzW2UudG9LZXkoKV07XG4gICAgICAgIHJldHVybiB0IHx8ICh0ID0gbmV3IF9fUFJJVkFURV9NZW1vcnlEb2N1bWVudE92ZXJsYXlDYWNoZSwgdGhpcy5vdmVybGF5c1tlLnRvS2V5KCldID0gdCksIFxuICAgICAgICB0O1xuICAgIH1cbiAgICBnZXRNdXRhdGlvblF1ZXVlKGUsIHQpIHtcbiAgICAgICAgbGV0IG4gPSB0aGlzLkJyW2UudG9LZXkoKV07XG4gICAgICAgIHJldHVybiBuIHx8IChuID0gbmV3IF9fUFJJVkFURV9NZW1vcnlNdXRhdGlvblF1ZXVlKHQsIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUpLCB0aGlzLkJyW2UudG9LZXkoKV0gPSBuKSwgXG4gICAgICAgIG47XG4gICAgfVxuICAgIGdldFRhcmdldENhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5RcjtcbiAgICB9XG4gICAgZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZTtcbiAgICB9XG4gICAgZ2V0QnVuZGxlQ2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRyO1xuICAgIH1cbiAgICBydW5UcmFuc2FjdGlvbihlLCB0LCBuKSB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIk1lbW9yeVBlcnNpc3RlbmNlXCIsIFwiU3RhcnRpbmcgdHJhbnNhY3Rpb246XCIsIGUpO1xuICAgICAgICBjb25zdCByID0gbmV3IF9fUFJJVkFURV9NZW1vcnlUcmFuc2FjdGlvbih0aGlzLmtyLm5leHQoKSk7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLlVyKCksIG4ocikubmV4dCgoZSA9PiB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLldyKHIpLm5leHQoKCgpID0+IGUpKSkpLnRvUHJvbWlzZSgpLnRoZW4oKGUgPT4gKHIucmFpc2VPbkNvbW1pdHRlZEV2ZW50KCksIFxuICAgICAgICBlKSkpO1xuICAgIH1cbiAgICBHcihlLCB0KSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uub3IoT2JqZWN0LnZhbHVlcyh0aGlzLkJyKS5tYXAoKG4gPT4gKCkgPT4gbi5jb250YWluc0tleShlLCB0KSkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogTWVtb3J5IHBlcnNpc3RlbmNlIGlzIG5vdCBhY3R1YWxseSB0cmFuc2FjdGlvbmFsLCBidXQgZnV0dXJlIGltcGxlbWVudGF0aW9uc1xuICogbWF5IGhhdmUgdHJhbnNhY3Rpb24tc2NvcGVkIHN0YXRlLlxuICovIGNsYXNzIF9fUFJJVkFURV9NZW1vcnlUcmFuc2FjdGlvbiBleHRlbmRzIFBlcnNpc3RlbmNlVHJhbnNhY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5jdXJyZW50U2VxdWVuY2VOdW1iZXIgPSBlO1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX01lbW9yeUVhZ2VyRGVsZWdhdGUge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IGUsIFxuICAgICAgICAvKiogVHJhY2tzIGFsbCBkb2N1bWVudHMgdGhhdCBhcmUgYWN0aXZlIGluIFF1ZXJ5IHZpZXdzLiAqL1xuICAgICAgICB0aGlzLnpyID0gbmV3IF9fUFJJVkFURV9SZWZlcmVuY2VTZXQsIFxuICAgICAgICAvKiogVGhlIGxpc3Qgb2YgZG9jdW1lbnRzIHRoYXQgYXJlIHBvdGVudGlhbGx5IEdDZWQgYWZ0ZXIgZWFjaCB0cmFuc2FjdGlvbi4gKi9cbiAgICAgICAgdGhpcy5qciA9IG51bGw7XG4gICAgfVxuICAgIHN0YXRpYyBIcihlKSB7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX01lbW9yeUVhZ2VyRGVsZWdhdGUoZSk7XG4gICAgfVxuICAgIGdldCBKcigpIHtcbiAgICAgICAgaWYgKHRoaXMuanIpIHJldHVybiB0aGlzLmpyO1xuICAgICAgICB0aHJvdyBmYWlsKCk7XG4gICAgfVxuICAgIGFkZFJlZmVyZW5jZShlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnpyLmFkZFJlZmVyZW5jZShuLCB0KSwgdGhpcy5Kci5kZWxldGUobi50b1N0cmluZygpKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlUmVmZXJlbmNlKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuenIucmVtb3ZlUmVmZXJlbmNlKG4sIHQpLCB0aGlzLkpyLmFkZChuLnRvU3RyaW5nKCkpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBtYXJrUG90ZW50aWFsbHlPcnBoYW5lZChlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLkpyLmFkZCh0LnRvU3RyaW5nKCkpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXQoZSwgdCkge1xuICAgICAgICB0aGlzLnpyLlZyKHQudGFyZ2V0SWQpLmZvckVhY2goKGUgPT4gdGhpcy5Kci5hZGQoZS50b1N0cmluZygpKSkpO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpO1xuICAgICAgICByZXR1cm4gbi5nZXRNYXRjaGluZ0tleXNGb3JUYXJnZXRJZChlLCB0LnRhcmdldElkKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGUuZm9yRWFjaCgoZSA9PiB0aGlzLkpyLmFkZChlLnRvU3RyaW5nKCkpKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuLnJlbW92ZVRhcmdldERhdGEoZSwgdCkpKTtcbiAgICB9XG4gICAgVXIoKSB7XG4gICAgICAgIHRoaXMuanIgPSBuZXcgU2V0O1xuICAgIH1cbiAgICBXcihlKSB7XG4gICAgICAgIC8vIFJlbW92ZSBuZXdseSBvcnBoYW5lZCBkb2N1bWVudHMuXG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnBlcnNpc3RlbmNlLmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKS5uZXdDaGFuZ2VCdWZmZXIoKTtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHRoaXMuSnIsIChuID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBEb2N1bWVudEtleS5mcm9tUGF0aChuKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLllyKGUsIHIpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgIGUgfHwgdC5yZW1vdmVFbnRyeShyLCBTbmFwc2hvdFZlcnNpb24ubWluKCkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gKHRoaXMuanIgPSBudWxsLCB0LmFwcGx5KGUpKSkpO1xuICAgIH1cbiAgICB1cGRhdGVMaW1ib0RvY3VtZW50KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuWXIoZSwgdCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBlID8gdGhpcy5Kci5kZWxldGUodC50b1N0cmluZygpKSA6IHRoaXMuSnIuYWRkKHQudG9TdHJpbmcoKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgS3IoZSkge1xuICAgICAgICAvLyBGb3IgZWFnZXIgR0MsIHdlIGRvbid0IGNhcmUgYWJvdXQgdGhlIGRvY3VtZW50IHNpemUsIHRoZXJlIGFyZSBubyBzaXplIHRocmVzaG9sZHMuXG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBZcihlLCB0KSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uub3IoWyAoKSA9PiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLnpyLmNvbnRhaW5zS2V5KHQpKSwgKCkgPT4gdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpLmNvbnRhaW5zS2V5KGUsIHQpLCAoKSA9PiB0aGlzLnBlcnNpc3RlbmNlLkdyKGUsIHQpIF0pO1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX01lbW9yeUxydURlbGVnYXRlIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSBlLCB0aGlzLlpyID0gbmV3IE9iamVjdE1hcCgoZSA9PiBfX1BSSVZBVEVfZW5jb2RlUmVzb3VyY2VQYXRoKGUucGF0aCkpLCAoKGUsIHQpID0+IGUuaXNFcXVhbCh0KSkpLCBcbiAgICAgICAgdGhpcy5nYXJiYWdlQ29sbGVjdG9yID0gX19QUklWQVRFX25ld0xydUdhcmJhZ2VDb2xsZWN0b3IodGhpcywgdCk7XG4gICAgfVxuICAgIHN0YXRpYyBIcihlLCB0KSB7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX01lbW9yeUxydURlbGVnYXRlKGUsIHQpO1xuICAgIH1cbiAgICAvLyBOby1vcHMsIHByZXNlbnQgc28gbWVtb3J5IHBlcnNpc3RlbmNlIGRvZXNuJ3QgaGF2ZSB0byBjYXJlIHdoaWNoIGRlbGVnYXRlXG4gICAgLy8gaXQgaGFzLlxuICAgIFVyKCkge31cbiAgICBXcihlKSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBmb3JFYWNoVGFyZ2V0KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UuZ2V0VGFyZ2V0Q2FjaGUoKS5mb3JFYWNoVGFyZ2V0KGUsIHQpO1xuICAgIH1cbiAgICBIbihlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLlpuKGUpO1xuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpLmdldFRhcmdldENvdW50KGUpLm5leHQoKGUgPT4gdC5uZXh0KCh0ID0+IGUgKyB0KSkpKTtcbiAgICB9XG4gICAgWm4oZSkge1xuICAgICAgICBsZXQgdCA9IDA7XG4gICAgICAgIHJldHVybiB0aGlzLkpuKGUsIChlID0+IHtcbiAgICAgICAgICAgIHQrKztcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHQpKTtcbiAgICB9XG4gICAgSm4oZSwgdCkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godGhpcy5aciwgKChuLCByKSA9PiB0aGlzLmVyKGUsIG4sIHIpLm5leHQoKGUgPT4gZSA/IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCkgOiB0KHIpKSkpKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0cyhlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLmdldFRhcmdldENhY2hlKCkucmVtb3ZlVGFyZ2V0cyhlLCB0LCBuKTtcbiAgICB9XG4gICAgcmVtb3ZlT3JwaGFuZWREb2N1bWVudHMoZSwgdCkge1xuICAgICAgICBsZXQgbiA9IDA7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLnBlcnNpc3RlbmNlLmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKSwgaSA9IHIubmV3Q2hhbmdlQnVmZmVyKCk7XG4gICAgICAgIHJldHVybiByLkZyKGUsIChyID0+IHRoaXMuZXIoZSwgciwgdCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBlIHx8IChuKyssIGkucmVtb3ZlRW50cnkociwgU25hcHNob3RWZXJzaW9uLm1pbigpKSk7XG4gICAgICAgIH0pKSkpLm5leHQoKCgpID0+IGkuYXBwbHkoZSkpKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIG1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuWnIuc2V0KHQsIGUuY3VycmVudFNlcXVlbmNlTnVtYmVyKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHQud2l0aFNlcXVlbmNlTnVtYmVyKGUuY3VycmVudFNlcXVlbmNlTnVtYmVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UuZ2V0VGFyZ2V0Q2FjaGUoKS51cGRhdGVUYXJnZXREYXRhKGUsIG4pO1xuICAgIH1cbiAgICBhZGRSZWZlcmVuY2UoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5aci5zZXQobiwgZS5jdXJyZW50U2VxdWVuY2VOdW1iZXIpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVSZWZlcmVuY2UoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5aci5zZXQobiwgZS5jdXJyZW50U2VxdWVuY2VOdW1iZXIpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICB1cGRhdGVMaW1ib0RvY3VtZW50KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuWnIuc2V0KHQsIGUuY3VycmVudFNlcXVlbmNlTnVtYmVyKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgS3IoZSkge1xuICAgICAgICBsZXQgdCA9IGUua2V5LnRvU3RyaW5nKCkubGVuZ3RoO1xuICAgICAgICByZXR1cm4gZS5pc0ZvdW5kRG9jdW1lbnQoKSAmJiAodCArPSBfX1BSSVZBVEVfZXN0aW1hdGVCeXRlU2l6ZShlLmRhdGEudmFsdWUpKSwgdDtcbiAgICB9XG4gICAgZXIoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLm9yKFsgKCkgPT4gdGhpcy5wZXJzaXN0ZW5jZS5HcihlLCB0KSwgKCkgPT4gdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpLmNvbnRhaW5zS2V5KGUsIHQpLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5aci5nZXQodCk7XG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodm9pZCAwICE9PSBlICYmIGUgPiBuKTtcbiAgICAgICAgfSBdKTtcbiAgICB9XG4gICAgZ2V0Q2FjaGVTaXplKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpLmdldFNpemUoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFBlcmZvcm1zIGRhdGFiYXNlIGNyZWF0aW9uIGFuZCBzY2hlbWEgdXBncmFkZXMuICovIGNsYXNzIF9fUFJJVkFURV9TY2hlbWFDb252ZXJ0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgZGF0YWJhc2UgY3JlYXRpb24gYW5kIHNjaGVtYSB1cGdyYWRlcy5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCBpbiBwcm9kdWN0aW9uLCB0aGlzIG1ldGhvZCBpcyBvbmx5IGV2ZXIgdXNlZCB0byB1cGdyYWRlIHRoZSBzY2hlbWFcbiAgICAgKiB0byBTQ0hFTUFfVkVSU0lPTi4gRGlmZmVyZW50IHZhbHVlcyBvZiB0b1ZlcnNpb24gYXJlIG9ubHkgdXNlZCBmb3IgdGVzdGluZ1xuICAgICAqIGFuZCBsb2NhbCBmZWF0dXJlIGRldmVsb3BtZW50LlxuICAgICAqLyAgICBPKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgY29uc3QgaSA9IG5ldyBfX1BSSVZBVEVfU2ltcGxlRGJUcmFuc2FjdGlvbihcImNyZWF0ZU9yVXBncmFkZVwiLCB0KTtcbiAgICAgICAgbiA8IDEgJiYgciA+PSAxICYmICghZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZVByaW1hcnlDbGllbnRTdG9yZShlKSB7XG4gICAgICAgICAgICBlLmNyZWF0ZU9iamVjdFN0b3JlKFwib3duZXJcIik7XG4gICAgICAgIH0oZSksIGZ1bmN0aW9uIF9fUFJJVkFURV9jcmVhdGVNdXRhdGlvblF1ZXVlKGUpIHtcbiAgICAgICAgICAgIGUuY3JlYXRlT2JqZWN0U3RvcmUoXCJtdXRhdGlvblF1ZXVlc1wiLCB7XG4gICAgICAgICAgICAgICAga2V5UGF0aDogXCJ1c2VySWRcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlLmNyZWF0ZU9iamVjdFN0b3JlKFwibXV0YXRpb25zXCIsIHtcbiAgICAgICAgICAgICAgICBrZXlQYXRoOiBcImJhdGNoSWRcIixcbiAgICAgICAgICAgICAgICBhdXRvSW5jcmVtZW50OiAhMFxuICAgICAgICAgICAgfSkuY3JlYXRlSW5kZXgoXCJ1c2VyTXV0YXRpb25zSW5kZXhcIiwgeCwge1xuICAgICAgICAgICAgICAgIHVuaXF1ZTogITBcbiAgICAgICAgICAgIH0pLCBlLmNyZWF0ZU9iamVjdFN0b3JlKFwiZG9jdW1lbnRNdXRhdGlvbnNcIik7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBVcGdyYWRlIGZ1bmN0aW9uIHRvIG1pZ3JhdGUgdGhlICdtdXRhdGlvbnMnIHN0b3JlIGZyb20gVjEgdG8gVjMuIExvYWRzXG4gKiBhbmQgcmV3cml0ZXMgYWxsIGRhdGEuXG4gKi8gKGUpLCBfX1BSSVZBVEVfY3JlYXRlUXVlcnlDYWNoZShlKSwgZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZUxlZ2FjeVJlbW90ZURvY3VtZW50Q2FjaGUoZSkge1xuICAgICAgICAgICAgZS5jcmVhdGVPYmplY3RTdG9yZShcInJlbW90ZURvY3VtZW50c1wiKTtcbiAgICAgICAgfShlKSk7XG4gICAgICAgIC8vIE1pZ3JhdGlvbiAyIHRvIHBvcHVsYXRlIHRoZSB0YXJnZXRHbG9iYWwgb2JqZWN0IG5vIGxvbmdlciBuZWVkZWQgc2luY2VcbiAgICAgICAgLy8gbWlncmF0aW9uIDMgdW5jb25kaXRpb25hbGx5IGNsZWFycyBpdC5cbiAgICAgICAgICAgICAgICBsZXQgcyA9IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIHJldHVybiBuIDwgMyAmJiByID49IDMgJiYgKFxuICAgICAgICAvLyBCcmFuZCBuZXcgY2xpZW50cyBkb24ndCBuZWVkIHRvIGRyb3AgYW5kIHJlY3JlYXRlLS1vbmx5IGNsaWVudHMgdGhhdFxuICAgICAgICAvLyBwb3RlbnRpYWxseSBoYXZlIGNvcnJ1cHQgZGF0YS5cbiAgICAgICAgMCAhPT0gbiAmJiAoIWZ1bmN0aW9uIF9fUFJJVkFURV9kcm9wUXVlcnlDYWNoZShlKSB7XG4gICAgICAgICAgICBlLmRlbGV0ZU9iamVjdFN0b3JlKFwidGFyZ2V0RG9jdW1lbnRzXCIpLCBlLmRlbGV0ZU9iamVjdFN0b3JlKFwidGFyZ2V0c1wiKSwgZS5kZWxldGVPYmplY3RTdG9yZShcInRhcmdldEdsb2JhbFwiKTtcbiAgICAgICAgfShlKSwgX19QUklWQVRFX2NyZWF0ZVF1ZXJ5Q2FjaGUoZSkpLCBzID0gcy5uZXh0KCgoKSA9PiBcbiAgICAgICAgLyoqXG4gKiBDcmVhdGVzIHRoZSB0YXJnZXQgZ2xvYmFsIHNpbmdsZXRvbiByb3cuXG4gKlxuICogQHBhcmFtIHR4biAtIFRoZSB2ZXJzaW9uIHVwZ3JhZGUgdHJhbnNhY3Rpb24gZm9yIGluZGV4ZWRkYlxuICovXG4gICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV93cml0ZUVtcHR5VGFyZ2V0R2xvYmFsRW50cnkoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGUuc3RvcmUoXCJ0YXJnZXRHbG9iYWxcIiksIG4gPSB7XG4gICAgICAgICAgICAgICAgaGlnaGVzdFRhcmdldElkOiAwLFxuICAgICAgICAgICAgICAgIGhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcjogMCxcbiAgICAgICAgICAgICAgICBsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uOiBTbmFwc2hvdFZlcnNpb24ubWluKCkudG9UaW1lc3RhbXAoKSxcbiAgICAgICAgICAgICAgICB0YXJnZXRDb3VudDogMFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiB0LnB1dChcInRhcmdldEdsb2JhbEtleVwiLCBuKTtcbiAgICAgICAgfShpKSkpKSwgbiA8IDQgJiYgciA+PSA0ICYmICgwICE9PSBuICYmIChcbiAgICAgICAgLy8gU2NoZW1hIHZlcnNpb24gMyB1c2VzIGF1dG8tZ2VuZXJhdGVkIGtleXMgdG8gZ2VuZXJhdGUgZ2xvYmFsbHkgdW5pcXVlXG4gICAgICAgIC8vIG11dGF0aW9uIGJhdGNoIElEcyAodGhpcyB3YXMgcHJldmlvdXNseSBlbnN1cmVkIGludGVybmFsbHkgYnkgdGhlXG4gICAgICAgIC8vIGNsaWVudCkuIFRvIG1pZ3JhdGUgdG8gdGhlIG5ldyBzY2hlbWEsIHdlIGhhdmUgdG8gcmVhZCBhbGwgbXV0YXRpb25zXG4gICAgICAgIC8vIGFuZCB3cml0ZSB0aGVtIGJhY2sgb3V0LiBXZSBwcmVzZXJ2ZSB0aGUgZXhpc3RpbmcgYmF0Y2ggSURzIHRvIGd1YXJhbnRlZVxuICAgICAgICAvLyBjb25zaXN0ZW5jeSB3aXRoIG90aGVyIG9iamVjdCBzdG9yZXMuIEFueSBmdXJ0aGVyIG11dGF0aW9uIGJhdGNoIElEcyB3aWxsXG4gICAgICAgIC8vIGJlIGF1dG8tZ2VuZXJhdGVkLlxuICAgICAgICBzID0gcy5uZXh0KCgoKSA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfdXBncmFkZU11dGF0aW9uQmF0Y2hTY2hlbWFBbmRNaWdyYXRlRGF0YShlLCB0KSB7XG4gICAgICAgICAgICByZXR1cm4gdC5zdG9yZShcIm11dGF0aW9uc1wiKS5VKCkubmV4dCgobiA9PiB7XG4gICAgICAgICAgICAgICAgZS5kZWxldGVPYmplY3RTdG9yZShcIm11dGF0aW9uc1wiKTtcbiAgICAgICAgICAgICAgICBlLmNyZWF0ZU9iamVjdFN0b3JlKFwibXV0YXRpb25zXCIsIHtcbiAgICAgICAgICAgICAgICAgICAga2V5UGF0aDogXCJiYXRjaElkXCIsXG4gICAgICAgICAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6ICEwXG4gICAgICAgICAgICAgICAgfSkuY3JlYXRlSW5kZXgoXCJ1c2VyTXV0YXRpb25zSW5kZXhcIiwgeCwge1xuICAgICAgICAgICAgICAgICAgICB1bmlxdWU6ICEwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IHQuc3RvcmUoXCJtdXRhdGlvbnNcIiksIGkgPSBuLm1hcCgoZSA9PiByLnB1dChlKSkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfShlLCBpKSkpKSwgcyA9IHMubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgIWZ1bmN0aW9uIF9fUFJJVkFURV9jcmVhdGVDbGllbnRNZXRhZGF0YVN0b3JlKGUpIHtcbiAgICAgICAgICAgICAgICBlLmNyZWF0ZU9iamVjdFN0b3JlKFwiY2xpZW50TWV0YWRhdGFcIiwge1xuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiBcImNsaWVudElkXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0oZSk7XG4gICAgICAgIH0pKSksIG4gPCA1ICYmIHIgPj0gNSAmJiAocyA9IHMubmV4dCgoKCkgPT4gdGhpcy5YcihpKSkpKSwgbiA8IDYgJiYgciA+PSA2ICYmIChzID0gcy5uZXh0KCgoKSA9PiAoZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZURvY3VtZW50R2xvYmFsU3RvcmUoZSkge1xuICAgICAgICAgICAgZS5jcmVhdGVPYmplY3RTdG9yZShcInJlbW90ZURvY3VtZW50R2xvYmFsXCIpO1xuICAgICAgICB9KGUpLCB0aGlzLmVpKGkpKSkpKSwgbiA8IDcgJiYgciA+PSA3ICYmIChzID0gcy5uZXh0KCgoKSA9PiB0aGlzLnRpKGkpKSkpLCBuIDwgOCAmJiByID49IDggJiYgKHMgPSBzLm5leHQoKCgpID0+IHRoaXMubmkoZSwgaSkpKSksIFxuICAgICAgICBuIDwgOSAmJiByID49IDkgJiYgKHMgPSBzLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIC8vIE11bHRpLVRhYiB1c2VkIHRvIG1hbmFnZSBpdHMgb3duIGNoYW5nZWxvZywgYnV0IHRoaXMgaGFzIGJlZW4gbW92ZWRcbiAgICAgICAgICAgIC8vIHRvIHRoZSBEYlJlbW90ZURvY3VtZW50IG9iamVjdCBzdG9yZSBpdHNlbGYuIFNpbmNlIHRoZSBwcmV2aW91cyBjaGFuZ2VcbiAgICAgICAgICAgIC8vIGxvZyBvbmx5IGNvbnRhaW5lZCB0cmFuc2llbnQgZGF0YSwgd2UgY2FuIGRyb3AgaXRzIG9iamVjdCBzdG9yZS5cbiAgICAgICAgICAgICFmdW5jdGlvbiBfX1BSSVZBVEVfZHJvcFJlbW90ZURvY3VtZW50Q2hhbmdlc1N0b3JlKGUpIHtcbiAgICAgICAgICAgICAgICBlLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoXCJyZW1vdGVEb2N1bWVudENoYW5nZXNcIikgJiYgZS5kZWxldGVPYmplY3RTdG9yZShcInJlbW90ZURvY3VtZW50Q2hhbmdlc1wiKTtcbiAgICAgICAgICAgIH0oZSk7XG4gICAgICAgICAgICAvLyBOb3RlOiBTY2hlbWEgdmVyc2lvbiA5IHVzZWQgdG8gY3JlYXRlIGEgcmVhZCB0aW1lIGluZGV4IGZvciB0aGVcbiAgICAgICAgICAgIC8vIFJlbW90ZURvY3VtZW50Q2FjaGUuIFRoaXMgaXMgbm93IGRvbmUgd2l0aCBzY2hlbWEgdmVyc2lvbiAxMy5cbiAgICAgICAgICAgICAgICB9KSkpLCBuIDwgMTAgJiYgciA+PSAxMCAmJiAocyA9IHMubmV4dCgoKCkgPT4gdGhpcy5yaShpKSkpKSwgbiA8IDExICYmIHIgPj0gMTEgJiYgKHMgPSBzLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICFmdW5jdGlvbiBfX1BSSVZBVEVfY3JlYXRlQnVuZGxlc1N0b3JlKGUpIHtcbiAgICAgICAgICAgICAgICBlLmNyZWF0ZU9iamVjdFN0b3JlKFwiYnVuZGxlc1wiLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleVBhdGg6IFwiYnVuZGxlSWRcIlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfShlKSwgZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZU5hbWVkUXVlcmllc1N0b3JlKGUpIHtcbiAgICAgICAgICAgICAgICBlLmNyZWF0ZU9iamVjdFN0b3JlKFwibmFtZWRRdWVyaWVzXCIsIHtcbiAgICAgICAgICAgICAgICAgICAga2V5UGF0aDogXCJuYW1lXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0oZSk7XG4gICAgICAgIH0pKSksIG4gPCAxMiAmJiByID49IDEyICYmIChzID0gcy5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAhZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZURvY3VtZW50T3ZlcmxheVN0b3JlKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZS5jcmVhdGVPYmplY3RTdG9yZShcImRvY3VtZW50T3ZlcmxheXNcIiwge1xuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiB6XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdC5jcmVhdGVJbmRleChcImNvbGxlY3Rpb25QYXRoT3ZlcmxheUluZGV4XCIsIGosIHtcbiAgICAgICAgICAgICAgICAgICAgdW5pcXVlOiAhMVxuICAgICAgICAgICAgICAgIH0pLCB0LmNyZWF0ZUluZGV4KFwiY29sbGVjdGlvbkdyb3VwT3ZlcmxheUluZGV4XCIsIEgsIHtcbiAgICAgICAgICAgICAgICAgICAgdW5pcXVlOiAhMVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfShlKTtcbiAgICAgICAgfSkpKSwgbiA8IDEzICYmIHIgPj0gMTMgJiYgKHMgPSBzLm5leHQoKCgpID0+IGZ1bmN0aW9uIF9fUFJJVkFURV9jcmVhdGVSZW1vdGVEb2N1bWVudENhY2hlKGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLmNyZWF0ZU9iamVjdFN0b3JlKFwicmVtb3RlRG9jdW1lbnRzVjE0XCIsIHtcbiAgICAgICAgICAgICAgICBrZXlQYXRoOiBOXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHQuY3JlYXRlSW5kZXgoXCJkb2N1bWVudEtleUluZGV4XCIsIEwpLCB0LmNyZWF0ZUluZGV4KFwiY29sbGVjdGlvbkdyb3VwSW5kZXhcIiwgQik7XG4gICAgICAgIH0oZSkpKS5uZXh0KCgoKSA9PiB0aGlzLmlpKGUsIGkpKSkubmV4dCgoKCkgPT4gZS5kZWxldGVPYmplY3RTdG9yZShcInJlbW90ZURvY3VtZW50c1wiKSkpKSwgXG4gICAgICAgIG4gPCAxNCAmJiByID49IDE0ICYmIChzID0gcy5uZXh0KCgoKSA9PiB0aGlzLnNpKGUsIGkpKSkpLCBuIDwgMTUgJiYgciA+PSAxNSAmJiAocyA9IHMubmV4dCgoKCkgPT4gZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZUZpZWxkSW5kZXgoZSkge1xuICAgICAgICAgICAgZS5jcmVhdGVPYmplY3RTdG9yZShcImluZGV4Q29uZmlndXJhdGlvblwiLCB7XG4gICAgICAgICAgICAgICAga2V5UGF0aDogXCJpbmRleElkXCIsXG4gICAgICAgICAgICAgICAgYXV0b0luY3JlbWVudDogITBcbiAgICAgICAgICAgIH0pLmNyZWF0ZUluZGV4KFwiY29sbGVjdGlvbkdyb3VwSW5kZXhcIiwgXCJjb2xsZWN0aW9uR3JvdXBcIiwge1xuICAgICAgICAgICAgICAgIHVuaXF1ZTogITFcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZS5jcmVhdGVPYmplY3RTdG9yZShcImluZGV4U3RhdGVcIiwge1xuICAgICAgICAgICAgICAgIGtleVBhdGg6ICRcbiAgICAgICAgICAgIH0pLmNyZWF0ZUluZGV4KFwic2VxdWVuY2VOdW1iZXJJbmRleFwiLCBVLCB7XG4gICAgICAgICAgICAgICAgdW5pcXVlOiAhMVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlLmNyZWF0ZU9iamVjdFN0b3JlKFwiaW5kZXhFbnRyaWVzXCIsIHtcbiAgICAgICAgICAgICAgICBrZXlQYXRoOiBXXG4gICAgICAgICAgICB9KS5jcmVhdGVJbmRleChcImRvY3VtZW50S2V5SW5kZXhcIiwgRywge1xuICAgICAgICAgICAgICAgIHVuaXF1ZTogITFcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KGUpKSkpLCBuIDwgMTYgJiYgciA+PSAxNiAmJiAoXG4gICAgICAgIC8vIENsZWFyIHRoZSBvYmplY3Qgc3RvcmVzIHRvIHJlbW92ZSBwb3NzaWJseSBjb3JydXB0ZWQgaW5kZXggZW50cmllc1xuICAgICAgICBzID0gcy5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICB0Lm9iamVjdFN0b3JlKFwiaW5kZXhTdGF0ZVwiKS5jbGVhcigpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgdC5vYmplY3RTdG9yZShcImluZGV4RW50cmllc1wiKS5jbGVhcigpO1xuICAgICAgICB9KSkpLCBzO1xuICAgIH1cbiAgICBlaShlKSB7XG4gICAgICAgIGxldCB0ID0gMDtcbiAgICAgICAgcmV0dXJuIGUuc3RvcmUoXCJyZW1vdGVEb2N1bWVudHNcIikuSigoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIHQgKz0gX19QUklWQVRFX2RiRG9jdW1lbnRTaXplKG4pO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IHtcbiAgICAgICAgICAgICAgICBieXRlU2l6ZTogdFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBlLnN0b3JlKFwicmVtb3RlRG9jdW1lbnRHbG9iYWxcIikucHV0KFwicmVtb3RlRG9jdW1lbnRHbG9iYWxLZXlcIiwgbik7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgWHIoZSkge1xuICAgICAgICBjb25zdCB0ID0gZS5zdG9yZShcIm11dGF0aW9uUXVldWVzXCIpLCBuID0gZS5zdG9yZShcIm11dGF0aW9uc1wiKTtcbiAgICAgICAgcmV0dXJuIHQuVSgpLm5leHQoKHQgPT4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godCwgKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IElEQktleVJhbmdlLmJvdW5kKFsgdC51c2VySWQsIC0xIF0sIFsgdC51c2VySWQsIHQubGFzdEFja25vd2xlZGdlZEJhdGNoSWQgXSk7XG4gICAgICAgICAgICByZXR1cm4gbi5VKFwidXNlck11dGF0aW9uc0luZGV4XCIsIHIpLm5leHQoKG4gPT4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2gobiwgKG4gPT4ge1xuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KG4udXNlcklkID09PSB0LnVzZXJJZCk7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9mcm9tRGJNdXRhdGlvbkJhdGNoKHRoaXMuc2VyaWFsaXplciwgbik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlbW92ZU11dGF0aW9uQmF0Y2goZSwgdC51c2VySWQsIHIpLm5leHQoKCgpID0+IHt9KSk7XG4gICAgICAgICAgICB9KSkpKTtcbiAgICAgICAgfSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuc3VyZXMgdGhhdCBldmVyeSBkb2N1bWVudCBpbiB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlIGhhcyBhIGNvcnJlc3BvbmRpbmcgc2VudGluZWwgcm93XG4gICAgICogd2l0aCBhIHNlcXVlbmNlIG51bWJlci4gTWlzc2luZyByb3dzIGFyZSBnaXZlbiB0aGUgbW9zdCByZWNlbnRseSB1c2VkIHNlcXVlbmNlIG51bWJlci5cbiAgICAgKi8gICAgdGkoZSkge1xuICAgICAgICBjb25zdCB0ID0gZS5zdG9yZShcInRhcmdldERvY3VtZW50c1wiKSwgbiA9IGUuc3RvcmUoXCJyZW1vdGVEb2N1bWVudHNcIik7XG4gICAgICAgIHJldHVybiBlLnN0b3JlKFwidGFyZ2V0R2xvYmFsXCIpLmdldChcInRhcmdldEdsb2JhbEtleVwiKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiBuLkooKChuLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IG5ldyBSZXNvdXJjZVBhdGgobiksIG8gPSBmdW5jdGlvbiBfX1BSSVZBVEVfc2VudGluZWxLZXkoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyAwLCBfX1BSSVZBVEVfZW5jb2RlUmVzb3VyY2VQYXRoKGUpIF07XG4gICAgICAgICAgICAgICAgfShzKTtcbiAgICAgICAgICAgICAgICByLnB1c2godC5nZXQobykubmV4dCgobiA9PiBuID8gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKSA6IChuID0+IHQucHV0KHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SWQ6IDAsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgobiksXG4gICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlTnVtYmVyOiBlLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlclxuICAgICAgICAgICAgICAgIH0pKShzKSkpKTtcbiAgICAgICAgICAgIH0pKS5uZXh0KCgoKSA9PiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihyKSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIG5pKGUsIHQpIHtcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBpbmRleC5cbiAgICAgICAgZS5jcmVhdGVPYmplY3RTdG9yZShcImNvbGxlY3Rpb25QYXJlbnRzXCIsIHtcbiAgICAgICAgICAgIGtleVBhdGg6IEtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IG4gPSB0LnN0b3JlKFwiY29sbGVjdGlvblBhcmVudHNcIiksIHIgPSBuZXcgX19QUklWQVRFX01lbW9yeUNvbGxlY3Rpb25QYXJlbnRJbmRleCwgYWRkRW50cnkgPSBlID0+IHtcbiAgICAgICAgICAgIGlmIChyLmFkZChlKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlLmxhc3RTZWdtZW50KCksIHIgPSBlLnBvcExhc3QoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5wdXQoe1xuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uSWQ6IHQsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogX19QUklWQVRFX2VuY29kZVJlc291cmNlUGF0aChyKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyBIZWxwZXIgdG8gYWRkIGFuIGluZGV4IGVudHJ5IGlmZiB3ZSBoYXZlbid0IGFscmVhZHkgd3JpdHRlbiBpdC5cbiAgICAgICAgICAgICAgICAvLyBJbmRleCBleGlzdGluZyByZW1vdGUgZG9jdW1lbnRzLlxuICAgICAgICByZXR1cm4gdC5zdG9yZShcInJlbW90ZURvY3VtZW50c1wiKS5KKHtcbiAgICAgICAgICAgIEg6ICEwXG4gICAgICAgIH0sICgoZSwgdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IG5ldyBSZXNvdXJjZVBhdGgoZSk7XG4gICAgICAgICAgICByZXR1cm4gYWRkRW50cnkobi5wb3BMYXN0KCkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gdC5zdG9yZShcImRvY3VtZW50TXV0YXRpb25zXCIpLkooe1xuICAgICAgICAgICAgSDogITBcbiAgICAgICAgfSwgKChbZSwgdCwgbl0sIHIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfZGVjb2RlUmVzb3VyY2VQYXRoKHQpO1xuICAgICAgICAgICAgcmV0dXJuIGFkZEVudHJ5KGkucG9wTGFzdCgpKTtcbiAgICAgICAgfSkpKSk7XG4gICAgfVxuICAgIHJpKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUuc3RvcmUoXCJ0YXJnZXRzXCIpO1xuICAgICAgICByZXR1cm4gdC5KKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9mcm9tRGJUYXJnZXQobiksIGkgPSBfX1BSSVZBVEVfdG9EYlRhcmdldCh0aGlzLnNlcmlhbGl6ZXIsIHIpO1xuICAgICAgICAgICAgcmV0dXJuIHQucHV0KGkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGlpKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHQuc3RvcmUoXCJyZW1vdGVEb2N1bWVudHNcIiksIHIgPSBbXTtcbiAgICAgICAgcmV0dXJuIG4uSigoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB0LnN0b3JlKFwicmVtb3RlRG9jdW1lbnRzVjE0XCIpLCBzID0gZnVuY3Rpb24gX19QUklWQVRFX2V4dHJhY3RLZXkoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlLmRvY3VtZW50ID8gbmV3IERvY3VtZW50S2V5KFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKGUuZG9jdW1lbnQubmFtZSkucG9wRmlyc3QoNSkpIDogZS5ub0RvY3VtZW50ID8gRG9jdW1lbnRLZXkuZnJvbVNlZ21lbnRzKGUubm9Eb2N1bWVudC5wYXRoKSA6IGUudW5rbm93bkRvY3VtZW50ID8gRG9jdW1lbnRLZXkuZnJvbVNlZ21lbnRzKGUudW5rbm93bkRvY3VtZW50LnBhdGgpIDogZmFpbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKG4pLnBhdGgudG9BcnJheSgpLCBvID0ge1xuICAgICAgICAgICAgICAgIHByZWZpeFBhdGg6IHMuc2xpY2UoMCwgcy5sZW5ndGggLSAyKSxcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uR3JvdXA6IHNbcy5sZW5ndGggLSAyXSxcbiAgICAgICAgICAgICAgICBkb2N1bWVudElkOiBzW3MubGVuZ3RoIC0gMV0sXG4gICAgICAgICAgICAgICAgcmVhZFRpbWU6IG4ucmVhZFRpbWUgfHwgWyAwLCAwIF0sXG4gICAgICAgICAgICAgICAgdW5rbm93bkRvY3VtZW50OiBuLnVua25vd25Eb2N1bWVudCxcbiAgICAgICAgICAgICAgICBub0RvY3VtZW50OiBuLm5vRG9jdW1lbnQsXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQ6IG4uZG9jdW1lbnQsXG4gICAgICAgICAgICAgICAgaGFzQ29tbWl0dGVkTXV0YXRpb25zOiAhIW4uaGFzQ29tbWl0dGVkTXV0YXRpb25zXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgci5wdXNoKGkucHV0KG8pKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHIpKSk7XG4gICAgfVxuICAgIHNpKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHQuc3RvcmUoXCJtdXRhdGlvbnNcIiksIHIgPSBfX1BSSVZBVEVfbmV3SW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZSh0aGlzLnNlcmlhbGl6ZXIpLCBpID0gbmV3IF9fUFJJVkFURV9NZW1vcnlQZXJzaXN0ZW5jZShfX1BSSVZBVEVfTWVtb3J5RWFnZXJEZWxlZ2F0ZS5IciwgdGhpcy5zZXJpYWxpemVyLmN0KTtcbiAgICAgICAgcmV0dXJuIG4uVSgpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IG5ldyBNYXA7XG4gICAgICAgICAgICByZXR1cm4gZS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgdDtcbiAgICAgICAgICAgICAgICBsZXQgciA9IG51bGwgIT09ICh0ID0gbi5nZXQoZS51c2VySWQpKSAmJiB2b2lkIDAgIT09IHQgPyB0IDogX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCk7XG4gICAgICAgICAgICAgICAgX19QUklWQVRFX2Zyb21EYk11dGF0aW9uQmF0Y2godGhpcy5zZXJpYWxpemVyLCBlKS5rZXlzKCkuZm9yRWFjaCgoZSA9PiByID0gci5hZGQoZSkpKSwgXG4gICAgICAgICAgICAgICAgbi5zZXQoZS51c2VySWQsIHIpO1xuICAgICAgICAgICAgfSkpLCBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaChuLCAoKGUsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gbmV3IFVzZXIobiksIG8gPSBfX1BSSVZBVEVfSW5kZXhlZERiRG9jdW1lbnRPdmVybGF5Q2FjaGUubHQodGhpcy5zZXJpYWxpemVyLCBzKSwgXyA9IGkuZ2V0SW5kZXhNYW5hZ2VyKHMpLCBhID0gX19QUklWQVRFX0luZGV4ZWREYk11dGF0aW9uUXVldWUubHQocywgdGhpcy5zZXJpYWxpemVyLCBfLCBpLnJlZmVyZW5jZURlbGVnYXRlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IExvY2FsRG9jdW1lbnRzVmlldyhyLCBhLCBvLCBfKS5yZWNhbGN1bGF0ZUFuZFNhdmVPdmVybGF5c0ZvckRvY3VtZW50S2V5cyhuZXcgX19QUklWQVRFX0luZGV4ZWREYlRyYW5zYWN0aW9uKHQsIF9fUFJJVkFURV9MaXN0ZW5TZXF1ZW5jZS5vZSksIGUpLm5leHQoKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZVF1ZXJ5Q2FjaGUoZSkge1xuICAgIGUuY3JlYXRlT2JqZWN0U3RvcmUoXCJ0YXJnZXREb2N1bWVudHNcIiwge1xuICAgICAgICBrZXlQYXRoOiBxXG4gICAgfSkuY3JlYXRlSW5kZXgoXCJkb2N1bWVudFRhcmdldHNJbmRleFwiLCBRLCB7XG4gICAgICAgIHVuaXF1ZTogITBcbiAgICB9KTtcbiAgICAvLyBOT1RFOiBUaGlzIGlzIHVuaXF1ZSBvbmx5IGJlY2F1c2UgdGhlIFRhcmdldElkIGlzIHRoZSBzdWZmaXguXG4gICAgZS5jcmVhdGVPYmplY3RTdG9yZShcInRhcmdldHNcIiwge1xuICAgICAgICBrZXlQYXRoOiBcInRhcmdldElkXCJcbiAgICB9KS5jcmVhdGVJbmRleChcInF1ZXJ5VGFyZ2V0c0luZGV4XCIsIGssIHtcbiAgICAgICAgdW5pcXVlOiAhMFxuICAgIH0pLCBlLmNyZWF0ZU9iamVjdFN0b3JlKFwidGFyZ2V0R2xvYmFsXCIpO1xufVxuXG5jb25zdCBSZSA9IFwiRmFpbGVkIHRvIG9idGFpbiBleGNsdXNpdmUgYWNjZXNzIHRvIHRoZSBwZXJzaXN0ZW5jZSBsYXllci4gVG8gYWxsb3cgc2hhcmVkIGFjY2VzcywgbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbiBoYXMgdG8gYmUgZW5hYmxlZCBpbiBhbGwgdGFicy4gSWYgeW91IGFyZSB1c2luZyBgZXhwZXJpbWVudGFsRm9yY2VPd25pbmdUYWI6dHJ1ZWAsIG1ha2Ugc3VyZSB0aGF0IG9ubHkgb25lIHRhYiBoYXMgcGVyc2lzdGVuY2UgZW5hYmxlZCBhdCBhbnkgZ2l2ZW4gdGltZS5cIjtcblxuLyoqXG4gKiBPbGRlc3QgYWNjZXB0YWJsZSBhZ2UgaW4gbWlsbGlzZWNvbmRzIGZvciBjbGllbnQgbWV0YWRhdGEgYmVmb3JlIHRoZSBjbGllbnRcbiAqIGlzIGNvbnNpZGVyZWQgaW5hY3RpdmUgYW5kIGl0cyBhc3NvY2lhdGVkIGRhdGEgaXMgZ2FyYmFnZSBjb2xsZWN0ZWQuXG4gKi9cbi8qKlxuICogQW4gSW5kZXhlZERCLWJhY2tlZCBpbnN0YW5jZSBvZiBQZXJzaXN0ZW5jZS4gRGF0YSBpcyBzdG9yZWQgcGVyc2lzdGVudGx5XG4gKiBhY3Jvc3Mgc2Vzc2lvbnMuXG4gKlxuICogT24gV2ViIG9ubHksIHRoZSBGaXJlc3RvcmUgU0RLcyBzdXBwb3J0IHNoYXJlZCBhY2Nlc3MgdG8gaXRzIHBlcnNpc3RlbmNlXG4gKiBsYXllci4gVGhpcyBhbGxvd3MgbXVsdGlwbGUgYnJvd3NlciB0YWJzIHRvIHJlYWQgYW5kIHdyaXRlIHRvIEluZGV4ZWREYiBhbmRcbiAqIHRvIHN5bmNocm9uaXplIHN0YXRlIGV2ZW4gd2l0aG91dCBuZXR3b3JrIGNvbm5lY3Rpdml0eS4gU2hhcmVkIGFjY2VzcyBpc1xuICogY3VycmVudGx5IG9wdGlvbmFsIGFuZCBub3QgZW5hYmxlZCB1bmxlc3MgYWxsIGNsaWVudHMgaW52b2tlXG4gKiBgZW5hYmxlUGVyc2lzdGVuY2UoKWAgd2l0aCBge3N5bmNocm9uaXplVGFiczp0cnVlfWAuXG4gKlxuICogSW4gbXVsdGktdGFiIG1vZGUsIGlmIG11bHRpcGxlIGNsaWVudHMgYXJlIGFjdGl2ZSBhdCB0aGUgc2FtZSB0aW1lLCB0aGUgU0RLXG4gKiB3aWxsIGRlc2lnbmF0ZSBvbmUgY2xpZW50IGFzIHRoZSDigJxwcmltYXJ5IGNsaWVudOKAnS4gQW4gZWZmb3J0IGlzIG1hZGUgdG8gcGlja1xuICogYSB2aXNpYmxlLCBuZXR3b3JrLWNvbm5lY3RlZCBhbmQgYWN0aXZlIGNsaWVudCwgYW5kIHRoaXMgY2xpZW50IGlzXG4gKiByZXNwb25zaWJsZSBmb3IgbGV0dGluZyBvdGhlciBjbGllbnRzIGtub3cgYWJvdXQgaXRzIHByZXNlbmNlLiBUaGUgcHJpbWFyeVxuICogY2xpZW50IHdyaXRlcyBhIHVuaXF1ZSBjbGllbnQtZ2VuZXJhdGVkIGlkZW50aWZpZXIgKHRoZSBjbGllbnQgSUQpIHRvXG4gKiBJbmRleGVkRGLigJlzIOKAnG93bmVy4oCdIHN0b3JlIGV2ZXJ5IDQgc2Vjb25kcy4gSWYgdGhlIHByaW1hcnkgY2xpZW50IGZhaWxzIHRvXG4gKiB1cGRhdGUgdGhpcyBlbnRyeSwgYW5vdGhlciBjbGllbnQgY2FuIGFjcXVpcmUgdGhlIGxlYXNlIGFuZCB0YWtlIG92ZXIgYXNcbiAqIHByaW1hcnkuXG4gKlxuICogU29tZSBwZXJzaXN0ZW5jZSBvcGVyYXRpb25zIGluIHRoZSBTREsgYXJlIGRlc2lnbmF0ZWQgYXMgcHJpbWFyeS1jbGllbnQgb25seVxuICogb3BlcmF0aW9ucy4gVGhpcyBpbmNsdWRlcyB0aGUgYWNrbm93bGVkZ21lbnQgb2YgbXV0YXRpb25zIGFuZCBhbGwgdXBkYXRlcyBvZlxuICogcmVtb3RlIGRvY3VtZW50cy4gVGhlIGVmZmVjdHMgb2YgdGhlc2Ugb3BlcmF0aW9ucyBhcmUgd3JpdHRlbiB0byBwZXJzaXN0ZW5jZVxuICogYW5kIHRoZW4gYnJvYWRjYXN0IHRvIG90aGVyIHRhYnMgdmlhIExvY2FsU3RvcmFnZSAoc2VlXG4gKiBgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlYCksIHdoaWNoIHRoZW4gcmVmcmVzaCB0aGVpciBzdGF0ZSBmcm9tXG4gKiBwZXJzaXN0ZW5jZS5cbiAqXG4gKiBTaW1pbGFybHksIHRoZSBwcmltYXJ5IGNsaWVudCBsaXN0ZW5zIHRvIG5vdGlmaWNhdGlvbnMgc2VudCBieSBzZWNvbmRhcnlcbiAqIGNsaWVudHMgdG8gZGlzY292ZXIgcGVyc2lzdGVuY2UgY2hhbmdlcyB3cml0dGVuIGJ5IHNlY29uZGFyeSBjbGllbnRzLCBzdWNoIGFzXG4gKiB0aGUgYWRkaXRpb24gb2YgbmV3IG11dGF0aW9ucyBhbmQgcXVlcnkgdGFyZ2V0cy5cbiAqXG4gKiBJZiBtdWx0aS10YWIgaXMgbm90IGVuYWJsZWQgYW5kIGFub3RoZXIgdGFiIGFscmVhZHkgb2J0YWluZWQgdGhlIHByaW1hcnlcbiAqIGxlYXNlLCBJbmRleGVkRGJQZXJzaXN0ZW5jZSBlbnRlcnMgYSBmYWlsZWQgc3RhdGUgYW5kIGFsbCBzdWJzZXF1ZW50XG4gKiBvcGVyYXRpb25zIHdpbGwgYXV0b21hdGljYWxseSBmYWlsLlxuICpcbiAqIEFkZGl0aW9uYWxseSwgdGhlcmUgaXMgYW4gb3B0aW1pemF0aW9uIHNvIHRoYXQgd2hlbiBhIHRhYiBpcyBjbG9zZWQsIHRoZVxuICogcHJpbWFyeSBsZWFzZSBpcyByZWxlYXNlZCBpbW1lZGlhdGVseSAodGhpcyBpcyBlc3BlY2lhbGx5IGltcG9ydGFudCB0byBtYWtlXG4gKiBzdXJlIHRoYXQgYSByZWZyZXNoZWQgdGFiIGlzIGFibGUgdG8gaW1tZWRpYXRlbHkgcmUtYWNxdWlyZSB0aGUgcHJpbWFyeVxuICogbGVhc2UpLiBVbmZvcnR1bmF0ZWx5LCBJbmRleGVkREIgY2Fubm90IGJlIHJlbGlhYmx5IHVzZWQgaW4gd2luZG93LnVubG9hZFxuICogc2luY2UgaXQgaXMgYW4gYXN5bmNocm9ub3VzIEFQSS4gU28gaW4gYWRkaXRpb24gdG8gYXR0ZW1wdGluZyB0byBnaXZlIHVwIHRoZVxuICogbGVhc2UsIHRoZSBsZWFzZWhvbGRlciB3cml0ZXMgaXRzIGNsaWVudCBJRCB0byBhIFwiem9tYmllZENsaWVudFwiIGVudHJ5IGluXG4gKiBMb2NhbFN0b3JhZ2Ugd2hpY2ggYWN0cyBhcyBhbiBpbmRpY2F0b3IgdGhhdCBhbm90aGVyIHRhYiBzaG91bGQgZ28gYWhlYWQgYW5kXG4gKiB0YWtlIHRoZSBwcmltYXJ5IGxlYXNlIGltbWVkaWF0ZWx5IHJlZ2FyZGxlc3Mgb2YgdGhlIGN1cnJlbnQgbGVhc2UgdGltZXN0YW1wLlxuICpcbiAqIFRPRE8oYi8xMTQyMjYyMzQpOiBSZW1vdmUgYHN5bmNocm9uaXplVGFic2Agc2VjdGlvbiB3aGVuIG11bHRpLXRhYiBpcyBub1xuICogbG9uZ2VyIG9wdGlvbmFsLlxuICovXG5jbGFzcyBfX1BSSVZBVEVfSW5kZXhlZERiUGVyc2lzdGVuY2Uge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdG8gc3luY2hyb25pemUgdGhlIGluLW1lbW9yeSBzdGF0ZSBvZiBtdWx0aXBsZSB0YWJzIGFuZCBzaGFyZVxuICAgICAqIGFjY2VzcyB0byBsb2NhbCBwZXJzaXN0ZW5jZS5cbiAgICAgKi9cbiAgICBlLCB0LCBuLCByLCBpLCBzLCBvLCBfLCBhLCBcbiAgICAvKipcbiAgICAgKiBJZiBzZXQgdG8gdHJ1ZSwgZm9yY2VmdWxseSBvYnRhaW5zIGRhdGFiYXNlIGFjY2Vzcy4gRXhpc3RpbmcgdGFicyB3aWxsXG4gICAgICogbm8gbG9uZ2VyIGJlIGFibGUgdG8gYWNjZXNzIEluZGV4ZWREQi5cbiAgICAgKi9cbiAgICB1LCBjID0gMTYpIHtcbiAgICAgICAgaWYgKHRoaXMuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24gPSBlLCB0aGlzLnBlcnNpc3RlbmNlS2V5ID0gdCwgdGhpcy5jbGllbnRJZCA9IG4sIFxuICAgICAgICB0aGlzLm9pID0gaSwgdGhpcy53aW5kb3cgPSBzLCB0aGlzLmRvY3VtZW50ID0gbywgdGhpcy5faSA9IGEsIHRoaXMuYWkgPSB1LCB0aGlzLnVpID0gYywgXG4gICAgICAgIHRoaXMua3IgPSBudWxsLCB0aGlzLnFyID0gITEsIHRoaXMuaXNQcmltYXJ5ID0gITEsIHRoaXMubmV0d29ya0VuYWJsZWQgPSAhMCwgXG4gICAgICAgIC8qKiBPdXIgd2luZG93LnVubG9hZCBoYW5kbGVyLCBpZiByZWdpc3RlcmVkLiAqL1xuICAgICAgICB0aGlzLmNpID0gbnVsbCwgdGhpcy5pbkZvcmVncm91bmQgPSAhMSwgXG4gICAgICAgIC8qKiBPdXIgJ3Zpc2liaWxpdHljaGFuZ2UnIGxpc3RlbmVyIGlmIHJlZ2lzdGVyZWQuICovXG4gICAgICAgIHRoaXMubGkgPSBudWxsLCBcbiAgICAgICAgLyoqIFRoZSBjbGllbnQgbWV0YWRhdGEgcmVmcmVzaCB0YXNrLiAqL1xuICAgICAgICB0aGlzLmhpID0gbnVsbCwgXG4gICAgICAgIC8qKiBUaGUgbGFzdCB0aW1lIHdlIGdhcmJhZ2UgY29sbGVjdGVkIHRoZSBjbGllbnQgbWV0YWRhdGEgb2JqZWN0IHN0b3JlLiAqL1xuICAgICAgICB0aGlzLlBpID0gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLCBcbiAgICAgICAgLyoqIEEgbGlzdGVuZXIgdG8gbm90aWZ5IG9uIHByaW1hcnkgc3RhdGUgY2hhbmdlcy4gKi9cbiAgICAgICAgdGhpcy5JaSA9IGUgPT4gUHJvbWlzZS5yZXNvbHZlKCksICFfX1BSSVZBVEVfSW5kZXhlZERiUGVyc2lzdGVuY2UuRCgpKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQy5VTklNUExFTUVOVEVELCBcIlRoaXMgcGxhdGZvcm0gaXMgZWl0aGVyIG1pc3NpbmcgSW5kZXhlZERCIG9yIGlzIGtub3duIHRvIGhhdmUgYW4gaW5jb21wbGV0ZSBpbXBsZW1lbnRhdGlvbi4gT2ZmbGluZSBwZXJzaXN0ZW5jZSBoYXMgYmVlbiBkaXNhYmxlZC5cIik7XG4gICAgICAgIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUgPSBuZXcgX19QUklWQVRFX0luZGV4ZWREYkxydURlbGVnYXRlSW1wbCh0aGlzLCByKSwgdGhpcy5UaSA9IHQgKyBcIm1haW5cIiwgXG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IG5ldyBfX1BSSVZBVEVfTG9jYWxTZXJpYWxpemVyKF8pLCB0aGlzLkVpID0gbmV3IF9fUFJJVkFURV9TaW1wbGVEYih0aGlzLlRpLCB0aGlzLnVpLCBuZXcgX19QUklWQVRFX1NjaGVtYUNvbnZlcnRlcih0aGlzLnNlcmlhbGl6ZXIpKSwgXG4gICAgICAgIHRoaXMuUXIgPSBuZXcgX19QUklWQVRFX0luZGV4ZWREYlRhcmdldENhY2hlKHRoaXMucmVmZXJlbmNlRGVsZWdhdGUsIHRoaXMuc2VyaWFsaXplciksIFxuICAgICAgICB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGUgPSBfX1BSSVZBVEVfbmV3SW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZSh0aGlzLnNlcmlhbGl6ZXIpLCBcbiAgICAgICAgdGhpcy4kciA9IG5ldyBfX1BSSVZBVEVfSW5kZXhlZERiQnVuZGxlQ2FjaGUsIHRoaXMud2luZG93ICYmIHRoaXMud2luZG93LmxvY2FsU3RvcmFnZSA/IHRoaXMuZGkgPSB0aGlzLndpbmRvdy5sb2NhbFN0b3JhZ2UgOiAodGhpcy5kaSA9IG51bGwsIFxuICAgICAgICAhMSA9PT0gdSAmJiBfX1BSSVZBVEVfbG9nRXJyb3IoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIkxvY2FsU3RvcmFnZSBpcyB1bmF2YWlsYWJsZS4gQXMgYSByZXN1bHQsIHBlcnNpc3RlbmNlIG1heSBub3Qgd29yayByZWxpYWJseS4gSW4gcGFydGljdWxhciBlbmFibGVQZXJzaXN0ZW5jZSgpIGNvdWxkIGZhaWwgaW1tZWRpYXRlbHkgYWZ0ZXIgcmVmcmVzaGluZyB0aGUgcGFnZS5cIikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBdHRlbXB0IHRvIHN0YXJ0IEluZGV4ZWREYiBwZXJzaXN0ZW5jZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFdoZXRoZXIgcGVyc2lzdGVuY2Ugd2FzIGVuYWJsZWQuXG4gICAgICovICAgIHN0YXJ0KCkge1xuICAgICAgICAvLyBOT1RFOiBUaGlzIGlzIGV4cGVjdGVkIHRvIGZhaWwgc29tZXRpbWVzIChpbiB0aGUgY2FzZSBvZiBhbm90aGVyIHRhYlxuICAgICAgICAvLyBhbHJlYWR5IGhhdmluZyB0aGUgcGVyc2lzdGVuY2UgbG9jayksIHNvIGl0J3MgdGhlIGZpcnN0IHRoaW5nIHdlIHNob3VsZFxuICAgICAgICAvLyBkby5cbiAgICAgICAgcmV0dXJuIHRoaXMuQWkoKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNQcmltYXJ5ICYmICF0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uKSBcbiAgICAgICAgICAgIC8vIEZhaWwgYHN0YXJ0KClgIGlmIGBzeW5jaHJvbml6ZVRhYnNgIGlzIGRpc2FibGVkIGFuZCB3ZSBjYW5ub3RcbiAgICAgICAgICAgIC8vIG9idGFpbiB0aGUgcHJpbWFyeSBsZWFzZS5cbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDLkZBSUxFRF9QUkVDT05ESVRJT04sIFJlKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLlJpKCksIHRoaXMuVmkoKSwgdGhpcy5taSgpLCB0aGlzLnJ1blRyYW5zYWN0aW9uKFwiZ2V0SGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyXCIsIFwicmVhZG9ubHlcIiwgKGUgPT4gdGhpcy5Rci5nZXRIaWdoZXN0U2VxdWVuY2VOdW1iZXIoZSkpKTtcbiAgICAgICAgfSkpLnRoZW4oKGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5rciA9IG5ldyBfX1BSSVZBVEVfTGlzdGVuU2VxdWVuY2UoZSwgdGhpcy5faSk7XG4gICAgICAgIH0pKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnFyID0gITA7XG4gICAgICAgIH0pKS5jYXRjaCgoZSA9PiAodGhpcy5FaSAmJiB0aGlzLkVpLmNsb3NlKCksIFByb21pc2UucmVqZWN0KGUpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgYSBsaXN0ZW5lciB0aGF0IGdldHMgY2FsbGVkIHdoZW4gdGhlIHByaW1hcnkgc3RhdGUgb2YgdGhlXG4gICAgICogaW5zdGFuY2UgY2hhbmdlcy4gVXBvbiByZWdpc3RlcmluZywgdGhpcyBsaXN0ZW5lciBpcyBpbnZva2VkIGltbWVkaWF0ZWx5XG4gICAgICogd2l0aCB0aGUgY3VycmVudCBwcmltYXJ5IHN0YXRlLlxuICAgICAqXG4gICAgICogUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgV2ViIG11bHRpLXRhYi5cbiAgICAgKi8gICAgZmkoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5JaSA9IGFzeW5jIHQgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhcnRlZCkgcmV0dXJuIGUodCk7XG4gICAgICAgIH0sIGUodGhpcy5pc1ByaW1hcnkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgYSBsaXN0ZW5lciB0aGF0IGdldHMgY2FsbGVkIHdoZW4gdGhlIGRhdGFiYXNlIHJlY2VpdmVzIGFcbiAgICAgKiB2ZXJzaW9uIGNoYW5nZSBldmVudCBpbmRpY2F0aW5nIHRoYXQgaXQgaGFzIGRlbGV0ZWQuXG4gICAgICpcbiAgICAgKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBXZWIgbXVsdGktdGFiLlxuICAgICAqLyAgICBzZXREYXRhYmFzZURlbGV0ZWRMaXN0ZW5lcihlKSB7XG4gICAgICAgIHRoaXMuRWkuTCgoYXN5bmMgdCA9PiB7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiBhbiBhdHRlbXB0IGlzIG1hZGUgdG8gZGVsZXRlIEluZGV4ZWREQi5cbiAgICAgICAgICAgIG51bGwgPT09IHQubmV3VmVyc2lvbiAmJiBhd2FpdCBlKCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRqdXN0cyB0aGUgY3VycmVudCBuZXR3b3JrIHN0YXRlIGluIHRoZSBjbGllbnQncyBtZXRhZGF0YSwgcG90ZW50aWFsbHlcbiAgICAgKiBhZmZlY3RpbmcgdGhlIHByaW1hcnkgbGVhc2UuXG4gICAgICpcbiAgICAgKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBXZWIgbXVsdGktdGFiLlxuICAgICAqLyAgICBzZXROZXR3b3JrRW5hYmxlZChlKSB7XG4gICAgICAgIHRoaXMubmV0d29ya0VuYWJsZWQgIT09IGUgJiYgKHRoaXMubmV0d29ya0VuYWJsZWQgPSBlLCBcbiAgICAgICAgLy8gU2NoZWR1bGUgYSBwcmltYXJ5IGxlYXNlIHJlZnJlc2ggZm9yIGltbWVkaWF0ZSBleGVjdXRpb24uIFRoZSBldmVudHVhbFxuICAgICAgICAvLyBsZWFzZSB1cGRhdGUgd2lsbCBiZSBwcm9wYWdhdGVkIHZpYSBgcHJpbWFyeVN0YXRlTGlzdGVuZXJgLlxuICAgICAgICB0aGlzLm9pLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRlZCAmJiBhd2FpdCB0aGlzLkFpKCk7XG4gICAgICAgIH0pKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGNsaWVudCBtZXRhZGF0YSBpbiBJbmRleGVkRGIgYW5kIGF0dGVtcHRzIHRvIGVpdGhlciBvYnRhaW4gb3JcbiAgICAgKiBleHRlbmQgdGhlIHByaW1hcnkgbGVhc2UgZm9yIHRoZSBsb2NhbCBjbGllbnQuIEFzeW5jaHJvbm91c2x5IG5vdGlmaWVzIHRoZVxuICAgICAqIHByaW1hcnkgc3RhdGUgbGlzdGVuZXIgaWYgdGhlIGNsaWVudCBlaXRoZXIgbmV3bHkgb2J0YWluZWQgb3IgcmVsZWFzZWQgaXRzXG4gICAgICogcHJpbWFyeSBsZWFzZS5cbiAgICAgKi8gICAgQWkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJ1blRyYW5zYWN0aW9uKFwidXBkYXRlQ2xpZW50TWV0YWRhdGFBbmRUcnlCZWNvbWVQcmltYXJ5XCIsIFwicmVhZHdyaXRlXCIsIChlID0+IF9fUFJJVkFURV9jbGllbnRNZXRhZGF0YVN0b3JlKGUpLnB1dCh7XG4gICAgICAgICAgICBjbGllbnRJZDogdGhpcy5jbGllbnRJZCxcbiAgICAgICAgICAgIHVwZGF0ZVRpbWVNczogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgIG5ldHdvcmtFbmFibGVkOiB0aGlzLm5ldHdvcmtFbmFibGVkLFxuICAgICAgICAgICAgaW5Gb3JlZ3JvdW5kOiB0aGlzLmluRm9yZWdyb3VuZFxuICAgICAgICB9KS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1ByaW1hcnkpIHJldHVybiB0aGlzLmdpKGUpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgIGUgfHwgKHRoaXMuaXNQcmltYXJ5ID0gITEsIHRoaXMub2kuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gdGhpcy5JaSghMSkpKSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB0aGlzLnBpKGUpKSkubmV4dCgodCA9PiB0aGlzLmlzUHJpbWFyeSAmJiAhdCA/IHRoaXMueWkoZSkubmV4dCgoKCkgPT4gITEpKSA6ICEhdCAmJiB0aGlzLndpKGUpLm5leHQoKCgpID0+ICEwKSkpKSkpLmNhdGNoKChlID0+IHtcbiAgICAgICAgICAgIGlmIChfX1BSSVZBVEVfaXNJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yKGUpKSBcbiAgICAgICAgICAgIC8vIFByb2NlZWQgd2l0aCB0aGUgZXhpc3Rpbmcgc3RhdGUuIEFueSBzdWJzZXF1ZW50IGFjY2VzcyB0b1xuICAgICAgICAgICAgLy8gSW5kZXhlZERCIHdpbGwgdmVyaWZ5IHRoZSBsZWFzZS5cbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfbG9nRGVidWcoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIkZhaWxlZCB0byBleHRlbmQgb3duZXIgbGVhc2U6IFwiLCBlKSwgXG4gICAgICAgICAgICB0aGlzLmlzUHJpbWFyeTtcbiAgICAgICAgICAgIGlmICghdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbikgdGhyb3cgZTtcbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfbG9nRGVidWcoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIlJlbGVhc2luZyBvd25lciBsZWFzZSBhZnRlciBlcnJvciBkdXJpbmcgbGVhc2UgcmVmcmVzaFwiLCBlKSwgXG4gICAgICAgICAgICAvKiBpc1ByaW1hcnk9ICovICExO1xuICAgICAgICB9KSkudGhlbigoZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzUHJpbWFyeSAhPT0gZSAmJiB0aGlzLm9pLmVucXVldWVSZXRyeWFibGUoKCgpID0+IHRoaXMuSWkoZSkpKSwgdGhpcy5pc1ByaW1hcnkgPSBlO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdpKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9wcmltYXJ5Q2xpZW50U3RvcmUoZSkuZ2V0KFwib3duZXJcIikubmV4dCgoZSA9PiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLlNpKGUpKSkpO1xuICAgIH1cbiAgICBiaShlKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfY2xpZW50TWV0YWRhdGFTdG9yZShlKS5kZWxldGUodGhpcy5jbGllbnRJZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElmIHRoZSBnYXJiYWdlIGNvbGxlY3Rpb24gdGhyZXNob2xkIGhhcyBwYXNzZWQsIHBydW5lcyB0aGVcbiAgICAgKiBSZW1vdGVEb2N1bWVudENoYW5nZXMgYW5kIHRoZSBDbGllbnRNZXRhZGF0YSBzdG9yZSBiYXNlZCBvbiB0aGUgbGFzdCB1cGRhdGVcbiAgICAgKiB0aW1lIG9mIGFsbCBjbGllbnRzLlxuICAgICAqLyAgICBhc3luYyBEaSgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNQcmltYXJ5ICYmICF0aGlzLkNpKHRoaXMuUGksIDE4ZTUpKSB7XG4gICAgICAgICAgICB0aGlzLlBpID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBhd2FpdCB0aGlzLnJ1blRyYW5zYWN0aW9uKFwibWF5YmVHYXJiYWdlQ29sbGVjdE11bHRpQ2xpZW50U3RhdGVcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAoZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9nZXRTdG9yZShlLCBcImNsaWVudE1ldGFkYXRhXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0LlUoKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMudmkoZSwgMThlNSksIHIgPSBlLmZpbHRlcigoZSA9PiAtMSA9PT0gbi5pbmRleE9mKGUpKSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBtZXRhZGF0YSBmb3IgY2xpZW50cyB0aGF0IGFyZSBubyBsb25nZXIgY29uc2lkZXJlZCBhY3RpdmUuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaChyLCAoZSA9PiB0LmRlbGV0ZShlLmNsaWVudElkKSkpLm5leHQoKCgpID0+IHIpKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSkuY2F0Y2goKCgpID0+IFtdKSk7XG4gICAgICAgICAgICAvLyBEZWxldGUgcG90ZW50aWFsIGxlZnRvdmVyIGVudHJpZXMgdGhhdCBtYXkgY29udGludWUgdG8gbWFyayB0aGVcbiAgICAgICAgICAgIC8vIGluYWN0aXZlIGNsaWVudHMgYXMgem9tYmllZCBpbiBMb2NhbFN0b3JhZ2UuXG4gICAgICAgICAgICAvLyBJZGVhbGx5IHdlJ2QgZGVsZXRlIHRoZSBJbmRleGVkRGIgYW5kIExvY2FsU3RvcmFnZSB6b21iaWUgZW50cmllcyBmb3JcbiAgICAgICAgICAgIC8vIHRoZSBjbGllbnQgYXRvbWljYWxseSwgYnV0IHdlIGNhbid0LiBTbyB3ZSBvcHQgdG8gZGVsZXRlIHRoZSBJbmRleGVkRGJcbiAgICAgICAgICAgIC8vIGVudHJpZXMgZmlyc3QgdG8gYXZvaWQgcG90ZW50aWFsbHkgcmV2aXZpbmcgYSB6b21iaWVkIGNsaWVudC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRpKSBmb3IgKGNvbnN0IHQgb2YgZSkgdGhpcy5kaS5yZW1vdmVJdGVtKHRoaXMuRmkodC5jbGllbnRJZCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNjaGVkdWxlcyBhIHJlY3VycmluZyB0aW1lciB0byB1cGRhdGUgdGhlIGNsaWVudCBtZXRhZGF0YSBhbmQgdG8gZWl0aGVyXG4gICAgICogZXh0ZW5kIG9yIGFjcXVpcmUgdGhlIHByaW1hcnkgbGVhc2UgaWYgdGhlIGNsaWVudCBpcyBlbGlnaWJsZS5cbiAgICAgKi8gICAgbWkoKSB7XG4gICAgICAgIHRoaXMuaGkgPSB0aGlzLm9pLmVucXVldWVBZnRlckRlbGF5KFwiY2xpZW50X21ldGFkYXRhX3JlZnJlc2hcIiAvKiBUaW1lcklkLkNsaWVudE1ldGFkYXRhUmVmcmVzaCAqLyAsIDRlMywgKCgpID0+IHRoaXMuQWkoKS50aGVuKCgoKSA9PiB0aGlzLkRpKCkpKS50aGVuKCgoKSA9PiB0aGlzLm1pKCkpKSkpO1xuICAgIH1cbiAgICAvKiogQ2hlY2tzIHdoZXRoZXIgYGNsaWVudGAgaXMgdGhlIGxvY2FsIGNsaWVudC4gKi8gICAgU2koZSkge1xuICAgICAgICByZXR1cm4gISFlICYmIGUub3duZXJJZCA9PT0gdGhpcy5jbGllbnRJZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXZhbHVhdGUgdGhlIHN0YXRlIG9mIGFsbCBhY3RpdmUgY2xpZW50cyBhbmQgZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIGxvY2FsXG4gICAgICogY2xpZW50IGlzIG9yIGNhbiBhY3QgYXMgdGhlIGhvbGRlciBvZiB0aGUgcHJpbWFyeSBsZWFzZS4gUmV0dXJucyB3aGV0aGVyXG4gICAgICogdGhlIGNsaWVudCBpcyBlbGlnaWJsZSBmb3IgdGhlIGxlYXNlLCBidXQgZG9lcyBub3QgYWN0dWFsbHkgYWNxdWlyZSBpdC5cbiAgICAgKiBNYXkgcmV0dXJuICdmYWxzZScgZXZlbiBpZiB0aGVyZSBpcyBubyBhY3RpdmUgbGVhc2Vob2xkZXIgYW5kIGFub3RoZXJcbiAgICAgKiAoZm9yZWdyb3VuZCkgY2xpZW50IHNob3VsZCBiZWNvbWUgbGVhc2Vob2xkZXIgaW5zdGVhZC5cbiAgICAgKi8gICAgcGkoZSkge1xuICAgICAgICBpZiAodGhpcy5haSkgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCEwKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9wcmltYXJ5Q2xpZW50U3RvcmUoZSkuZ2V0KFwib3duZXJcIikubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAvLyBBIGNsaWVudCBpcyBlbGlnaWJsZSBmb3IgdGhlIHByaW1hcnkgbGVhc2UgaWY6XG4gICAgICAgICAgICAvLyAtIGl0cyBuZXR3b3JrIGlzIGVuYWJsZWQgYW5kIHRoZSBjbGllbnQncyB0YWIgaXMgaW4gdGhlIGZvcmVncm91bmQuXG4gICAgICAgICAgICAvLyAtIGl0cyBuZXR3b3JrIGlzIGVuYWJsZWQgYW5kIG5vIG90aGVyIGNsaWVudCdzIHRhYiBpcyBpbiB0aGVcbiAgICAgICAgICAgIC8vICAgZm9yZWdyb3VuZC5cbiAgICAgICAgICAgIC8vIC0gZXZlcnkgY2xpZW50cyBuZXR3b3JrIGlzIGRpc2FibGVkIGFuZCB0aGUgY2xpZW50J3MgdGFiIGlzIGluIHRoZVxuICAgICAgICAgICAgLy8gICBmb3JlZ3JvdW5kLlxuICAgICAgICAgICAgLy8gLSBldmVyeSBjbGllbnRzIG5ldHdvcmsgaXMgZGlzYWJsZWQgYW5kIG5vIG90aGVyIGNsaWVudCdzIHRhYiBpcyBpblxuICAgICAgICAgICAgLy8gICB0aGUgZm9yZWdyb3VuZC5cbiAgICAgICAgICAgIC8vIC0gdGhlIGBmb3JjZU93bmluZ1RhYmAgc2V0dGluZyB3YXMgcGFzc2VkIGluLlxuICAgICAgICAgICAgaWYgKG51bGwgIT09IHQgJiYgdGhpcy5DaSh0LmxlYXNlVGltZXN0YW1wTXMsIDVlMykgJiYgIXRoaXMuTWkodC5vd25lcklkKSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLlNpKHQpICYmIHRoaXMubmV0d29ya0VuYWJsZWQpIHJldHVybiAhMDtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuU2kodCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0LmFsbG93VGFiU3luY2hyb25pemF0aW9uKSBcbiAgICAgICAgICAgICAgICAgICAgLy8gRmFpbCB0aGUgYGNhbkFjdEFzUHJpbWFyeWAgY2hlY2sgaWYgdGhlIGN1cnJlbnQgbGVhc2Vob2xkZXIgaGFzXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdCBvcHRlZCBpbnRvIG11bHRpLXRhYiBzeW5jaHJvbml6YXRpb24uIElmIHRoaXMgaGFwcGVucyBhdFxuICAgICAgICAgICAgICAgICAgICAvLyBjbGllbnQgc3RhcnR1cCwgd2UgcmVqZWN0IHRoZSBQcm9taXNlIHJldHVybmVkIGJ5XG4gICAgICAgICAgICAgICAgICAgIC8vIGBlbmFibGVQZXJzaXN0ZW5jZSgpYCBhbmQgdGhlIHVzZXIgY2FuIGNvbnRpbnVlIHRvIHVzZSBGaXJlc3RvcmVcbiAgICAgICAgICAgICAgICAgICAgLy8gd2l0aCBpbi1tZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoaXMgZmFpbHMgZHVyaW5nIGEgbGVhc2UgcmVmcmVzaCwgd2Ugd2lsbCBpbnN0ZWFkIGJsb2NrIHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyBBc3luY1F1ZXVlIGZyb20gZXhlY3V0aW5nIGZ1cnRoZXIgb3BlcmF0aW9ucy4gTm90ZSB0aGF0IHRoaXMgaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gYWNjZXB0YWJsZSBzaW5jZSBtaXhpbmcgJiBtYXRjaGluZyBkaWZmZXJlbnQgYHN5bmNocm9uaXplVGFic2BcbiAgICAgICAgICAgICAgICAgICAgLy8gc2V0dGluZ3MgaXMgbm90IHN1cHBvcnRlZC5cbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyhiLzExNDIyNjIzNCk6IFJlbW92ZSB0aGlzIGNoZWNrIHdoZW4gYHN5bmNocm9uaXplVGFic2AgY2FuXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vIGxvbmdlciBiZSB0dXJuZWQgb2ZmLlxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQy5GQUlMRURfUFJFQ09ORElUSU9OLCBSZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gISghdGhpcy5uZXR3b3JrRW5hYmxlZCB8fCAhdGhpcy5pbkZvcmVncm91bmQpIHx8IF9fUFJJVkFURV9jbGllbnRNZXRhZGF0YVN0b3JlKGUpLlUoKS5uZXh0KChlID0+IHZvaWQgMCA9PT0gdGhpcy52aShlLCA1ZTMpLmZpbmQoKGUgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNsaWVudElkICE9PSBlLmNsaWVudElkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSAhdGhpcy5uZXR3b3JrRW5hYmxlZCAmJiBlLm5ldHdvcmtFbmFibGVkLCBuID0gIXRoaXMuaW5Gb3JlZ3JvdW5kICYmIGUuaW5Gb3JlZ3JvdW5kLCByID0gdGhpcy5uZXR3b3JrRW5hYmxlZCA9PT0gZS5uZXR3b3JrRW5hYmxlZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgfHwgbiAmJiByKSByZXR1cm4gITA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgICAgIH0pKSkpO1xuICAgICAgICB9KSkubmV4dCgoZSA9PiAodGhpcy5pc1ByaW1hcnkgIT09IGUgJiYgX19QUklWQVRFX2xvZ0RlYnVnKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgYENsaWVudCAke2UgPyBcImlzXCIgOiBcImlzIG5vdFwifSBlbGlnaWJsZSBmb3IgYSBwcmltYXJ5IGxlYXNlLmApLCBcbiAgICAgICAgZSkpKTtcbiAgICB9XG4gICAgYXN5bmMgc2h1dGRvd24oKSB7XG4gICAgICAgIC8vIFRoZSBzaHV0ZG93bigpIG9wZXJhdGlvbnMgYXJlIGlkZW1wb3RlbnQgYW5kIGNhbiBiZSBjYWxsZWQgZXZlbiB3aGVuXG4gICAgICAgIC8vIHN0YXJ0KCkgYWJvcnRlZCAoZS5nLiBiZWNhdXNlIGl0IGNvdWxkbid0IGFjcXVpcmUgdGhlIHBlcnNpc3RlbmNlIGxlYXNlKS5cbiAgICAgICAgdGhpcy5xciA9ICExLCB0aGlzLnhpKCksIHRoaXMuaGkgJiYgKHRoaXMuaGkuY2FuY2VsKCksIHRoaXMuaGkgPSBudWxsKSwgdGhpcy5PaSgpLCBcbiAgICAgICAgdGhpcy5OaSgpLCBcbiAgICAgICAgLy8gVXNlIGBTaW1wbGVEYi5ydW5UcmFuc2FjdGlvbmAgZGlyZWN0bHkgdG8gYXZvaWQgZmFpbGluZyBpZiBhbm90aGVyIHRhYlxuICAgICAgICAvLyBoYXMgb2J0YWluZWQgdGhlIHByaW1hcnkgbGVhc2UuXG4gICAgICAgIGF3YWl0IHRoaXMuRWkucnVuVHJhbnNhY3Rpb24oXCJzaHV0ZG93blwiLCBcInJlYWR3cml0ZVwiLCBbIFwib3duZXJcIiwgXCJjbGllbnRNZXRhZGF0YVwiIF0sIChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgX19QUklWQVRFX0luZGV4ZWREYlRyYW5zYWN0aW9uKGUsIF9fUFJJVkFURV9MaXN0ZW5TZXF1ZW5jZS5vZSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy55aSh0KS5uZXh0KCgoKSA9PiB0aGlzLmJpKHQpKSk7XG4gICAgICAgIH0pKSwgdGhpcy5FaS5jbG9zZSgpLCBcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBlbnRyeSBtYXJraW5nIHRoZSBjbGllbnQgYXMgem9tYmllZCBmcm9tIExvY2FsU3RvcmFnZSBzaW5jZVxuICAgICAgICAvLyB3ZSBzdWNjZXNzZnVsbHkgZGVsZXRlZCBpdHMgbWV0YWRhdGEgZnJvbSBJbmRleGVkRGIuXG4gICAgICAgIHRoaXMuTGkoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBjbGllbnRzIHRoYXQgYXJlIG5vdCB6b21iaWVkIGFuZCBoYXZlIGFuIHVwZGF0ZVRpbWUgd2l0aGluIHRoZVxuICAgICAqIHByb3ZpZGVkIHRocmVzaG9sZC5cbiAgICAgKi8gICAgdmkoZSwgdCkge1xuICAgICAgICByZXR1cm4gZS5maWx0ZXIoKGUgPT4gdGhpcy5DaShlLnVwZGF0ZVRpbWVNcywgdCkgJiYgIXRoaXMuTWkoZS5jbGllbnRJZCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgSURzIG9mIHRoZSBjbGllbnRzIHRoYXQgYXJlIGN1cnJlbnRseSBhY3RpdmUuIElmIG11bHRpLXRhYlxuICAgICAqIGlzIG5vdCBzdXBwb3J0ZWQsIHJldHVybnMgYW4gYXJyYXkgdGhhdCBvbmx5IGNvbnRhaW5zIHRoZSBsb2NhbCBjbGllbnQnc1xuICAgICAqIElELlxuICAgICAqXG4gICAgICogUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgV2ViIG11bHRpLXRhYi5cbiAgICAgKi8gICAgQmkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJ1blRyYW5zYWN0aW9uKFwiZ2V0QWN0aXZlQ2xpZW50c1wiLCBcInJlYWRvbmx5XCIsIChlID0+IF9fUFJJVkFURV9jbGllbnRNZXRhZGF0YVN0b3JlKGUpLlUoKS5uZXh0KChlID0+IHRoaXMudmkoZSwgMThlNSkubWFwKChlID0+IGUuY2xpZW50SWQpKSkpKSk7XG4gICAgfVxuICAgIGdldCBzdGFydGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5xcjtcbiAgICB9XG4gICAgZ2V0TXV0YXRpb25RdWV1ZShlLCB0KSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfSW5kZXhlZERiTXV0YXRpb25RdWV1ZS5sdChlLCB0aGlzLnNlcmlhbGl6ZXIsIHQsIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUpO1xuICAgIH1cbiAgICBnZXRUYXJnZXRDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuUXI7XG4gICAgfVxuICAgIGdldFJlbW90ZURvY3VtZW50Q2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGU7XG4gICAgfVxuICAgIGdldEluZGV4TWFuYWdlcihlKSB7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX0luZGV4ZWREYkluZGV4TWFuYWdlcihlLCB0aGlzLnNlcmlhbGl6ZXIuY3QuZGF0YWJhc2VJZCk7XG4gICAgfVxuICAgIGdldERvY3VtZW50T3ZlcmxheUNhY2hlKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9JbmRleGVkRGJEb2N1bWVudE92ZXJsYXlDYWNoZS5sdCh0aGlzLnNlcmlhbGl6ZXIsIGUpO1xuICAgIH1cbiAgICBnZXRCdW5kbGVDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJHI7XG4gICAgfVxuICAgIHJ1blRyYW5zYWN0aW9uKGUsIHQsIG4pIHtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJTdGFydGluZyB0cmFuc2FjdGlvbjpcIiwgZSk7XG4gICAgICAgIGNvbnN0IHIgPSBcInJlYWRvbmx5XCIgPT09IHQgPyBcInJlYWRvbmx5XCIgOiBcInJlYWR3cml0ZVwiLCBpID0gXG4gICAgICAgIC8qKiBSZXR1cm5zIHRoZSBvYmplY3Qgc3RvcmVzIGZvciB0aGUgcHJvdmlkZWQgc2NoZW1hLiAqL1xuICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfZ2V0T2JqZWN0U3RvcmVzKGUpIHtcbiAgICAgICAgICAgIHJldHVybiAxNiA9PT0gZSA/IHRlIDogMTUgPT09IGUgPyBlZSA6IDE0ID09PSBlID8gWCA6IDEzID09PSBlID8gWiA6IDEyID09PSBlID8gWSA6IDExID09PSBlID8gSiA6IHZvaWQgZmFpbCgpO1xuICAgICAgICB9KHRoaXMudWkpO1xuICAgICAgICBsZXQgcztcbiAgICAgICAgLy8gRG8gYWxsIHRyYW5zYWN0aW9ucyBhcyByZWFkd3JpdGUgYWdhaW5zdCBhbGwgb2JqZWN0IHN0b3Jlcywgc2luY2Ugd2VcbiAgICAgICAgLy8gYXJlIHRoZSBvbmx5IHJlYWRlci93cml0ZXIuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuRWkucnVuVHJhbnNhY3Rpb24oZSwgciwgaSwgKHIgPT4gKHMgPSBuZXcgX19QUklWQVRFX0luZGV4ZWREYlRyYW5zYWN0aW9uKHIsIHRoaXMua3IgPyB0aGlzLmtyLm5leHQoKSA6IF9fUFJJVkFURV9MaXN0ZW5TZXF1ZW5jZS5vZSksIFxuICAgICAgICBcInJlYWR3cml0ZS1wcmltYXJ5XCIgPT09IHQgPyB0aGlzLmdpKHMpLm5leHQoKGUgPT4gISFlIHx8IHRoaXMucGkocykpKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGlmICghdCkgdGhyb3cgX19QUklWQVRFX2xvZ0Vycm9yKGBGYWlsZWQgdG8gb2J0YWluIHByaW1hcnkgbGVhc2UgZm9yIGFjdGlvbiAnJHtlfScuYCksIFxuICAgICAgICAgICAgdGhpcy5pc1ByaW1hcnkgPSAhMSwgdGhpcy5vaS5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiB0aGlzLklpKCExKSkpLCBuZXcgRmlyZXN0b3JlRXJyb3IoQy5GQUlMRURfUFJFQ09ORElUSU9OLCBGKTtcbiAgICAgICAgICAgIHJldHVybiBuKHMpO1xuICAgICAgICB9KSkubmV4dCgoZSA9PiB0aGlzLndpKHMpLm5leHQoKCgpID0+IGUpKSkpIDogdGhpcy5raShzKS5uZXh0KCgoKSA9PiBuKHMpKSkpKSkudGhlbigoZSA9PiAocy5yYWlzZU9uQ29tbWl0dGVkRXZlbnQoKSwgXG4gICAgICAgIGUpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZlcmlmaWVzIHRoYXQgdGhlIGN1cnJlbnQgdGFiIGlzIHRoZSBwcmltYXJ5IGxlYXNlaG9sZGVyIG9yIGFsdGVybmF0aXZlbHlcbiAgICAgKiB0aGF0IHRoZSBsZWFzZWhvbGRlciBoYXMgb3B0ZWQgaW50byBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uLlxuICAgICAqL1xuICAgIC8vIFRPRE8oYi8xMTQyMjYyMzQpOiBSZW1vdmUgdGhpcyBjaGVjayB3aGVuIGBzeW5jaHJvbml6ZVRhYnNgIGNhbiBubyBsb25nZXJcbiAgICAvLyBiZSB0dXJuZWQgb2ZmLlxuICAgIGtpKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9wcmltYXJ5Q2xpZW50U3RvcmUoZSkuZ2V0KFwib3duZXJcIikubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gZSAmJiB0aGlzLkNpKGUubGVhc2VUaW1lc3RhbXBNcywgNWUzKSAmJiAhdGhpcy5NaShlLm93bmVySWQpICYmICF0aGlzLlNpKGUpICYmICEodGhpcy5haSB8fCB0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uICYmIGUuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24pKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQy5GQUlMRURfUFJFQ09ORElUSU9OLCBSZSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogT2J0YWlucyBvciBleHRlbmRzIHRoZSBuZXcgcHJpbWFyeSBsZWFzZSBmb3IgdGhlIGxvY2FsIGNsaWVudC4gVGhpc1xuICAgICAqIG1ldGhvZCBkb2VzIG5vdCB2ZXJpZnkgdGhhdCB0aGUgY2xpZW50IGlzIGVsaWdpYmxlIGZvciB0aGlzIGxlYXNlLlxuICAgICAqLyAgICB3aShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB7XG4gICAgICAgICAgICBvd25lcklkOiB0aGlzLmNsaWVudElkLFxuICAgICAgICAgICAgYWxsb3dUYWJTeW5jaHJvbml6YXRpb246IHRoaXMuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24sXG4gICAgICAgICAgICBsZWFzZVRpbWVzdGFtcE1zOiBEYXRlLm5vdygpXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcHJpbWFyeUNsaWVudFN0b3JlKGUpLnB1dChcIm93bmVyXCIsIHQpO1xuICAgIH1cbiAgICBzdGF0aWMgRCgpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9TaW1wbGVEYi5EKCk7XG4gICAgfVxuICAgIC8qKiBDaGVja3MgdGhlIHByaW1hcnkgbGVhc2UgYW5kIHJlbW92ZXMgaXQgaWYgd2UgYXJlIHRoZSBjdXJyZW50IHByaW1hcnkuICovICAgIHlpKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9wcmltYXJ5Q2xpZW50U3RvcmUoZSk7XG4gICAgICAgIHJldHVybiB0LmdldChcIm93bmVyXCIpLm5leHQoKGUgPT4gdGhpcy5TaShlKSA/IChfX1BSSVZBVEVfbG9nRGVidWcoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIlJlbGVhc2luZyBwcmltYXJ5IGxlYXNlLlwiKSwgXG4gICAgICAgIHQuZGVsZXRlKFwib3duZXJcIikpIDogUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKSkpO1xuICAgIH1cbiAgICAvKiogVmVyaWZpZXMgdGhhdCBgdXBkYXRlVGltZU1zYCBpcyB3aXRoaW4gYG1heEFnZU1zYC4gKi8gICAgQ2koZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcmV0dXJuICEoZSA8IG4gLSB0KSAmJiAoIShlID4gbikgfHwgKF9fUFJJVkFURV9sb2dFcnJvcihgRGV0ZWN0ZWQgYW4gdXBkYXRlIHRpbWUgdGhhdCBpcyBpbiB0aGUgZnV0dXJlOiAke2V9ID4gJHtufWApLCBcbiAgICAgICAgITEpKTtcbiAgICB9XG4gICAgUmkoKSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMuZG9jdW1lbnQgJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiB0aGlzLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIgJiYgKHRoaXMubGkgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9pLmVucXVldWVBbmRGb3JnZXQoKCgpID0+ICh0aGlzLmluRm9yZWdyb3VuZCA9IFwidmlzaWJsZVwiID09PSB0aGlzLmRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSwgXG4gICAgICAgICAgICB0aGlzLkFpKCkpKSk7XG4gICAgICAgIH0sIHRoaXMuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgdGhpcy5saSksIHRoaXMuaW5Gb3JlZ3JvdW5kID0gXCJ2aXNpYmxlXCIgPT09IHRoaXMuZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlKTtcbiAgICB9XG4gICAgT2koKSB7XG4gICAgICAgIHRoaXMubGkgJiYgKHRoaXMuZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgdGhpcy5saSksIHRoaXMubGkgPSBudWxsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXR0YWNoZXMgYSB3aW5kb3cudW5sb2FkIGhhbmRsZXIgdGhhdCB3aWxsIHN5bmNocm9ub3VzbHkgd3JpdGUgb3VyXG4gICAgICogY2xpZW50SWQgdG8gYSBcInpvbWJpZSBjbGllbnQgaWRcIiBsb2NhdGlvbiBpbiBMb2NhbFN0b3JhZ2UuIFRoaXMgY2FuIGJlIHVzZWRcbiAgICAgKiBieSB0YWJzIHRyeWluZyB0byBhY3F1aXJlIHRoZSBwcmltYXJ5IGxlYXNlIHRvIGRldGVybWluZSB0aGF0IHRoZSBsZWFzZVxuICAgICAqIGlzIG5vIGxvbmdlciB2YWxpZCBldmVuIGlmIHRoZSB0aW1lc3RhbXAgaXMgcmVjZW50LiBUaGlzIGlzIHBhcnRpY3VsYXJseVxuICAgICAqIGltcG9ydGFudCBmb3IgdGhlIHJlZnJlc2ggY2FzZSAoc28gdGhlIHRhYiBjb3JyZWN0bHkgcmUtYWNxdWlyZXMgdGhlXG4gICAgICogcHJpbWFyeSBsZWFzZSkuIExvY2FsU3RvcmFnZSBpcyB1c2VkIGZvciB0aGlzIHJhdGhlciB0aGFuIEluZGV4ZWREYiBiZWNhdXNlXG4gICAgICogaXQgaXMgYSBzeW5jaHJvbm91cyBBUEkgYW5kIHNvIGNhbiBiZSB1c2VkIHJlbGlhYmx5IGZyb20gIGFuIHVubG9hZFxuICAgICAqIGhhbmRsZXIuXG4gICAgICovICAgIFZpKCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgXCJmdW5jdGlvblwiID09IHR5cGVvZiAobnVsbCA9PT0gKGUgPSB0aGlzLndpbmRvdykgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5hZGRFdmVudExpc3RlbmVyKSAmJiAodGhpcy5jaSA9ICgpID0+IHtcbiAgICAgICAgICAgIC8vIE5vdGU6IEluIHRoZW9yeSwgdGhpcyBzaG91bGQgYmUgc2NoZWR1bGVkIG9uIHRoZSBBc3luY1F1ZXVlIHNpbmNlIGl0XG4gICAgICAgICAgICAvLyBhY2Nlc3NlcyBpbnRlcm5hbCBzdGF0ZS4gV2UgZXhlY3V0ZSB0aGlzIGNvZGUgZGlyZWN0bHkgZHVyaW5nIHNodXRkb3duXG4gICAgICAgICAgICAvLyB0byBtYWtlIHN1cmUgaXQgZ2V0cyBhIGNoYW5jZSB0byBydW4uXG4gICAgICAgICAgICB0aGlzLnhpKCk7XG4gICAgICAgICAgICBjb25zdCBlID0gLyg/OlZlcnNpb258TW9iaWxlKVxcLzFbNDU2XS87XG4gICAgICAgICAgICBpc1NhZmFyaSgpICYmIChuYXZpZ2F0b3IuYXBwVmVyc2lvbi5tYXRjaChlKSB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKGUpKSAmJiBcbiAgICAgICAgICAgIC8vIE9uIFNhZmFyaSAxNCwgMTUsIGFuZCAxNiwgd2UgZG8gbm90IHJ1biBhbnkgY2xlYW51cCBhY3Rpb25zIGFzIGl0IG1pZ2h0XG4gICAgICAgICAgICAvLyB0cmlnZ2VyIGEgYnVnIHRoYXQgcHJldmVudHMgU2FmYXJpIGZyb20gcmUtb3BlbmluZyBJbmRleGVkREIgZHVyaW5nXG4gICAgICAgICAgICAvLyB0aGUgbmV4dCBwYWdlIGxvYWQuXG4gICAgICAgICAgICAvLyBTZWUgaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTIyNjU0N1xuICAgICAgICAgICAgdGhpcy5vaS5lbnRlclJlc3RyaWN0ZWRNb2RlKC8qIHB1cmdlRXhpc3RpbmdUYXNrcz0gKi8gITApLCB0aGlzLm9pLmVucXVldWVBbmRGb3JnZXQoKCgpID0+IHRoaXMuc2h1dGRvd24oKSkpO1xuICAgICAgICB9LCB0aGlzLndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGFnZWhpZGVcIiwgdGhpcy5jaSkpO1xuICAgIH1cbiAgICBOaSgpIHtcbiAgICAgICAgdGhpcy5jaSAmJiAodGhpcy53aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBhZ2VoaWRlXCIsIHRoaXMuY2kpLCB0aGlzLmNpID0gbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciBhIGNsaWVudCBpcyBcInpvbWJpZWRcIiBiYXNlZCBvbiBpdHMgTG9jYWxTdG9yYWdlIGVudHJ5LlxuICAgICAqIENsaWVudHMgYmVjb21lIHpvbWJpZWQgd2hlbiB0aGVpciB0YWIgY2xvc2VzIHdpdGhvdXQgcnVubmluZyBhbGwgb2YgdGhlXG4gICAgICogY2xlYW51cCBsb2dpYyBpbiBgc2h1dGRvd24oKWAuXG4gICAgICovICAgIE1pKGUpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBuID0gbnVsbCAhPT0gKG51bGwgPT09ICh0ID0gdGhpcy5kaSkgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5nZXRJdGVtKHRoaXMuRmkoZSkpKTtcbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfbG9nRGVidWcoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBgQ2xpZW50ICcke2V9JyAke24gPyBcImlzXCIgOiBcImlzIG5vdFwifSB6b21iaWVkIGluIExvY2FsU3RvcmFnZWApLCBcbiAgICAgICAgICAgIG47XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIEdyYWNlZnVsbHkgaGFuZGxlIGlmIExvY2FsU3RvcmFnZSBpc24ndCB3b3JraW5nLlxuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9sb2dFcnJvcihcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIFwiRmFpbGVkIHRvIGdldCB6b21iaWVkIGNsaWVudCBpZC5cIiwgZSksIFxuICAgICAgICAgICAgITE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVjb3JkIGNsaWVudCBhcyB6b21iaWVkIChhIGNsaWVudCB0aGF0IGhhZCBpdHMgdGFiIGNsb3NlZCkuIFpvbWJpZWRcbiAgICAgKiBjbGllbnRzIGFyZSBpZ25vcmVkIGR1cmluZyBwcmltYXJ5IHRhYiBzZWxlY3Rpb24uXG4gICAgICovICAgIHhpKCkge1xuICAgICAgICBpZiAodGhpcy5kaSkgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuZGkuc2V0SXRlbSh0aGlzLkZpKHRoaXMuY2xpZW50SWQpLCBTdHJpbmcoRGF0ZS5ub3coKSkpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBHcmFjZWZ1bGx5IGhhbmRsZSBpZiBMb2NhbFN0b3JhZ2UgaXNuJ3QgYXZhaWxhYmxlIC8gd29ya2luZy5cbiAgICAgICAgICAgIF9fUFJJVkFURV9sb2dFcnJvcihcIkZhaWxlZCB0byBzZXQgem9tYmllIGNsaWVudCBpZC5cIiwgZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIFJlbW92ZXMgdGhlIHpvbWJpZWQgY2xpZW50IGVudHJ5IGlmIGl0IGV4aXN0cy4gKi8gICAgTGkoKSB7XG4gICAgICAgIGlmICh0aGlzLmRpKSB0cnkge1xuICAgICAgICAgICAgdGhpcy5kaS5yZW1vdmVJdGVtKHRoaXMuRmkodGhpcy5jbGllbnRJZCkpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBJZ25vcmVcbiAgICAgICAgfVxuICAgIH1cbiAgICBGaShlKSB7XG4gICAgICAgIHJldHVybiBgZmlyZXN0b3JlX3pvbWJpZV8ke3RoaXMucGVyc2lzdGVuY2VLZXl9XyR7ZX1gO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIHByaW1hcnkgY2xpZW50IG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfcHJpbWFyeUNsaWVudFN0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2dldFN0b3JlKGUsIFwib3duZXJcIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBjbGllbnQgbWV0YWRhdGEgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9jbGllbnRNZXRhZGF0YVN0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2dldFN0b3JlKGUsIFwiY2xpZW50TWV0YWRhdGFcIik7XG59XG5cbi8qKlxuICogR2VuZXJhdGVzIGEgc3RyaW5nIHVzZWQgYXMgYSBwcmVmaXggd2hlbiBzdG9yaW5nIGRhdGEgaW4gSW5kZXhlZERCIGFuZFxuICogTG9jYWxTdG9yYWdlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9pbmRleGVkRGJTdG9yYWdlUHJlZml4KGUsIHQpIHtcbiAgICAvLyBVc2UgdHdvIGRpZmZlcmVudCBwcmVmaXggZm9ybWF0czpcbiAgICAvLyAgICogZmlyZXN0b3JlIC8gcGVyc2lzdGVuY2VLZXkgLyBwcm9qZWN0SUQgLiBkYXRhYmFzZUlEIC8gLi4uXG4gICAgLy8gICAqIGZpcmVzdG9yZSAvIHBlcnNpc3RlbmNlS2V5IC8gcHJvamVjdElEIC8gLi4uXG4gICAgLy8gcHJvamVjdElEcyBhcmUgRE5TLWNvbXBhdGlibGUgbmFtZXMgYW5kIGNhbm5vdCBjb250YWluIGRvdHNcbiAgICAvLyBzbyB0aGVyZSdzIG5vIGRhbmdlciBvZiBjb2xsaXNpb25zLlxuICAgIGxldCBuID0gZS5wcm9qZWN0SWQ7XG4gICAgcmV0dXJuIGUuaXNEZWZhdWx0RGF0YWJhc2UgfHwgKG4gKz0gXCIuXCIgKyBlLmRhdGFiYXNlKSwgXCJmaXJlc3RvcmUvXCIgKyB0ICsgXCIvXCIgKyBuICsgXCIvXCI7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgc2V0IG9mIGNoYW5nZXMgdG8gd2hhdCBkb2N1bWVudHMgYXJlIGN1cnJlbnRseSBpbiB2aWV3IGFuZCBvdXQgb2YgdmlldyBmb3JcbiAqIGEgZ2l2ZW4gcXVlcnkuIFRoZXNlIGNoYW5nZXMgYXJlIHNlbnQgdG8gdGhlIExvY2FsU3RvcmUgYnkgdGhlIFZpZXcgKHZpYVxuICogdGhlIFN5bmNFbmdpbmUpIGFuZCBhcmUgdXNlZCB0byBwaW4gLyB1bnBpbiBkb2N1bWVudHMgYXMgYXBwcm9wcmlhdGUuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9Mb2NhbFZpZXdDaGFuZ2VzIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0SWQgPSBlLCB0aGlzLmZyb21DYWNoZSA9IHQsIHRoaXMucWkgPSBuLCB0aGlzLlFpID0gcjtcbiAgICB9XG4gICAgc3RhdGljIEtpKGUsIHQpIHtcbiAgICAgICAgbGV0IG4gPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSwgciA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpO1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdC5kb2NDaGFuZ2VzKSBzd2l0Y2ggKGUudHlwZSkge1xuICAgICAgICAgIGNhc2UgMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovIDpcbiAgICAgICAgICAgIG4gPSBuLmFkZChlLmRvYy5rZXkpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDEgLyogQ2hhbmdlVHlwZS5SZW1vdmVkICovIDpcbiAgICAgICAgICAgIHIgPSByLmFkZChlLmRvYy5rZXkpO1xuIC8vIGRvIG5vdGhpbmdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX0xvY2FsVmlld0NoYW5nZXMoZSwgdC5mcm9tQ2FjaGUsIG4sIHIpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSB0cmFja2VyIHRvIGtlZXAgYSByZWNvcmQgb2YgaW1wb3J0YW50IGRldGFpbHMgZHVyaW5nIGRhdGFiYXNlIGxvY2FsIHF1ZXJ5XG4gKiBleGVjdXRpb24uXG4gKi8gY2xhc3MgUXVlcnlDb250ZXh0IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvdW50cyB0aGUgbnVtYmVyIG9mIGRvY3VtZW50cyBwYXNzZWQgdGhyb3VnaCBkdXJpbmcgbG9jYWwgcXVlcnkgZXhlY3V0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fZG9jdW1lbnRSZWFkQ291bnQgPSAwO1xuICAgIH1cbiAgICBnZXQgZG9jdW1lbnRSZWFkQ291bnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kb2N1bWVudFJlYWRDb3VudDtcbiAgICB9XG4gICAgaW5jcmVtZW50RG9jdW1lbnRSZWFkQ291bnQoZSkge1xuICAgICAgICB0aGlzLl9kb2N1bWVudFJlYWRDb3VudCArPSBlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVGhlIEZpcmVzdG9yZSBxdWVyeSBlbmdpbmUuXG4gKlxuICogRmlyZXN0b3JlIHF1ZXJpZXMgY2FuIGJlIGV4ZWN1dGVkIGluIHRocmVlIG1vZGVzLiBUaGUgUXVlcnkgRW5naW5lIGRldGVybWluZXNcbiAqIHdoYXQgbW9kZSB0byB1c2UgYmFzZWQgb24gd2hhdCBkYXRhIGlzIHBlcnNpc3RlZC4gVGhlIG1vZGUgb25seSBkZXRlcm1pbmVzXG4gKiB0aGUgcnVudGltZSBjb21wbGV4aXR5IG9mIHRoZSBxdWVyeSAtIHRoZSByZXN1bHQgc2V0IGlzIGVxdWl2YWxlbnQgYWNyb3NzIGFsbFxuICogaW1wbGVtZW50YXRpb25zLlxuICpcbiAqIFRoZSBRdWVyeSBlbmdpbmUgd2lsbCB1c2UgaW5kZXhlZC1iYXNlZCBleGVjdXRpb24gaWYgYSB1c2VyIGhhcyBjb25maWd1cmVkXG4gKiBhbnkgaW5kZXggdGhhdCBjYW4gYmUgdXNlZCB0byBleGVjdXRlIHF1ZXJ5ICh2aWEgYHNldEluZGV4Q29uZmlndXJhdGlvbigpYCkuXG4gKiBPdGhlcndpc2UsIHRoZSBlbmdpbmUgd2lsbCB0cnkgdG8gb3B0aW1pemUgdGhlIHF1ZXJ5IGJ5IHJlLXVzaW5nIGEgcHJldmlvdXNseVxuICogcGVyc2lzdGVkIHF1ZXJ5IHJlc3VsdC4gSWYgdGhhdCBpcyBub3QgcG9zc2libGUsIHRoZSBxdWVyeSB3aWxsIGJlIGV4ZWN1dGVkXG4gKiB2aWEgYSBmdWxsIGNvbGxlY3Rpb24gc2Nhbi5cbiAqXG4gKiBJbmRleC1iYXNlZCBleGVjdXRpb24gaXMgdGhlIGRlZmF1bHQgd2hlbiBhdmFpbGFibGUuIFRoZSBxdWVyeSBlbmdpbmVcbiAqIHN1cHBvcnRzIHBhcnRpYWwgaW5kZXhlZCBleGVjdXRpb24gYW5kIG1lcmdlcyB0aGUgcmVzdWx0IGZyb20gdGhlIGluZGV4XG4gKiBsb29rdXAgd2l0aCBkb2N1bWVudHMgdGhhdCBoYXZlIG5vdCB5ZXQgYmVlbiBpbmRleGVkLiBUaGUgaW5kZXggZXZhbHVhdGlvblxuICogbWF0Y2hlcyB0aGUgYmFja2VuZCdzIGZvcm1hdCBhbmQgYXMgc3VjaCwgdGhlIFNESyBjYW4gdXNlIGluZGV4aW5nIGZvciBhbGxcbiAqIHF1ZXJpZXMgdGhhdCB0aGUgYmFja2VuZCBzdXBwb3J0cy5cbiAqXG4gKiBJZiBubyBpbmRleCBleGlzdHMsIHRoZSBxdWVyeSBlbmdpbmUgdHJpZXMgdG8gdGFrZSBhZHZhbnRhZ2Ugb2YgdGhlIHRhcmdldFxuICogZG9jdW1lbnQgbWFwcGluZyBpbiB0aGUgVGFyZ2V0Q2FjaGUuIFRoZXNlIG1hcHBpbmdzIGV4aXN0cyBmb3IgYWxsIHF1ZXJpZXNcbiAqIHRoYXQgaGF2ZSBiZWVuIHN5bmNlZCB3aXRoIHRoZSBiYWNrZW5kIGF0IGxlYXN0IG9uY2UgYW5kIGFsbG93IHRoZSBxdWVyeVxuICogZW5naW5lIHRvIG9ubHkgcmVhZCBkb2N1bWVudHMgdGhhdCBwcmV2aW91c2x5IG1hdGNoZWQgYSBxdWVyeSBwbHVzIGFueVxuICogZG9jdW1lbnRzIHRoYXQgd2VyZSBlZGl0ZWQgYWZ0ZXIgdGhlIHF1ZXJ5IHdhcyBsYXN0IGxpc3RlbmVkIHRvLlxuICpcbiAqIFRoZXJlIGFyZSBzb21lIGNhc2VzIHdoZW4gdGhpcyBvcHRpbWl6YXRpb24gaXMgbm90IGd1YXJhbnRlZWQgdG8gcHJvZHVjZVxuICogdGhlIHNhbWUgcmVzdWx0cyBhcyBmdWxsIGNvbGxlY3Rpb24gc2NhbnMuIEluIHRoZXNlIGNhc2VzLCBxdWVyeVxuICogcHJvY2Vzc2luZyBmYWxscyBiYWNrIHRvIGZ1bGwgc2NhbnMuIFRoZXNlIGNhc2VzIGFyZTpcbiAqXG4gKiAtIExpbWl0IHF1ZXJpZXMgd2hlcmUgYSBkb2N1bWVudCB0aGF0IG1hdGNoZWQgdGhlIHF1ZXJ5IHByZXZpb3VzbHkgbm8gbG9uZ2VyXG4gKiAgIG1hdGNoZXMgdGhlIHF1ZXJ5LlxuICpcbiAqIC0gTGltaXQgcXVlcmllcyB3aGVyZSBhIGRvY3VtZW50IGVkaXQgbWF5IGNhdXNlIHRoZSBkb2N1bWVudCB0byBzb3J0IGJlbG93XG4gKiAgIGFub3RoZXIgZG9jdW1lbnQgdGhhdCBpcyBpbiB0aGUgbG9jYWwgY2FjaGUuXG4gKlxuICogLSBRdWVyaWVzIHRoYXQgaGF2ZSBuZXZlciBiZWVuIENVUlJFTlQgb3IgZnJlZSBvZiBsaW1ibyBkb2N1bWVudHMuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9RdWVyeUVuZ2luZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuJGkgPSAhMSwgdGhpcy5VaSA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNESyBvbmx5IGRlY2lkZXMgd2hldGhlciBpdCBzaG91bGQgY3JlYXRlIGluZGV4IHdoZW4gY29sbGVjdGlvbiBzaXplIGlzXG4gICAgICAgICAqIGxhcmdlciB0aGFuIHRoaXMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLldpID0gMTAwLCB0aGlzLkdpID0gXG4gICAgICAgIC8qKlxuICogVGhpcyBjb3N0IHJlcHJlc2VudHMgdGhlIGV2YWx1YXRpb24gcmVzdWx0IG9mXG4gKiAoKFtpbmRleCwgZG9jS2V5XSArIFtkb2NLZXksIGRvY0NvbnRlbnRdKSBwZXIgZG9jdW1lbnQgaW4gdGhlIHJlc3VsdCBzZXQpXG4gKiAvIChbZG9jS2V5LCBkb2NDb250ZW50XSBwZXIgZG9jdW1lbnRzIGluIGZ1bGwgY29sbGVjdGlvbiBzY2FuKSBjb21pbmcgZnJvbVxuICogZXhwZXJpbWVudCBbZW50ZXIgUFIgZXhwZXJpbWVudCBVUkwgaGVyZV0uXG4gKi9cbiAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX2dldERlZmF1bHRSZWxhdGl2ZUluZGV4UmVhZENvc3RQZXJEb2N1bWVudCgpIHtcbiAgICAgICAgICAgIC8vIFRoZXNlIHZhbHVlcyB3ZXJlIGRlcml2ZWQgZnJvbSBhbiBleHBlcmltZW50IHdoZXJlIHNldmVyYWwgbWVtYmVycyBvZiB0aGVcbiAgICAgICAgICAgIC8vIEZpcmVzdG9yZSBTREsgdGVhbSByYW4gYSBwZXJmb3JtYW5jZSB0ZXN0IGluIHZhcmlvdXMgZW52aXJvbm1lbnRzLlxuICAgICAgICAgICAgLy8gR29vZ2xlcnMgY2FuIHNlZSBiLzI5OTI4NDI4NyBmb3IgZGV0YWlscy5cbiAgICAgICAgICAgIHJldHVybiBpc1NhZmFyaSgpID8gOCA6IF9fUFJJVkFURV9nZXRBbmRyb2lkVmVyc2lvbihnZXRVQSgpKSA+IDAgPyA2IDogNDtcbiAgICAgICAgfSgpO1xuICAgIH1cbiAgICAvKiogU2V0cyB0aGUgZG9jdW1lbnQgdmlldyB0byBxdWVyeSBhZ2FpbnN0LiAqLyAgICBpbml0aWFsaXplKGUsIHQpIHtcbiAgICAgICAgdGhpcy56aSA9IGUsIHRoaXMuaW5kZXhNYW5hZ2VyID0gdCwgdGhpcy4kaSA9ICEwO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhbGwgbG9jYWwgZG9jdW1lbnRzIG1hdGNoaW5nIHRoZSBzcGVjaWZpZWQgcXVlcnkuICovICAgIGdldERvY3VtZW50c01hdGNoaW5nUXVlcnkoZSwgdCwgbiwgcikge1xuICAgICAgICAvLyBTdG9yZXMgdGhlIHJlc3VsdCBmcm9tIGV4ZWN1dGluZyB0aGUgcXVlcnk7IHVzaW5nIHRoaXMgb2JqZWN0IGlzIG1vcmVcbiAgICAgICAgLy8gY29udmVuaWVudCB0aGFuIHBhc3NpbmcgdGhlIHJlc3VsdCBiZXR3ZWVuIHN0ZXBzIG9mIHRoZSBwZXJzaXN0ZW5jZVxuICAgICAgICAvLyB0cmFuc2FjdGlvbiBhbmQgaW1wcm92ZXMgcmVhZGFiaWxpdHkgY29tcGFyYXRpdmVseS5cbiAgICAgICAgY29uc3QgaSA9IHtcbiAgICAgICAgICAgIHJlc3VsdDogbnVsbFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5qaShlLCB0KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGkucmVzdWx0ID0gZTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIGlmICghaS5yZXN1bHQpIHJldHVybiB0aGlzLkhpKGUsIHQsIHIsIG4pLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgIGkucmVzdWx0ID0gZTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIGlmIChpLnJlc3VsdCkgcmV0dXJuO1xuICAgICAgICAgICAgY29uc3QgbiA9IG5ldyBRdWVyeUNvbnRleHQ7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5KaShlLCB0LCBuKS5uZXh0KChyID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaS5yZXN1bHQgPSByLCB0aGlzLlVpKSByZXR1cm4gdGhpcy5ZaShlLCB0LCBuLCByLnNpemUpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaS5yZXN1bHQpKTtcbiAgICB9XG4gICAgWWkoZSwgdCwgbiwgcikge1xuICAgICAgICByZXR1cm4gbi5kb2N1bWVudFJlYWRDb3VudCA8IHRoaXMuV2kgPyAoX19QUklWQVRFX2dldExvZ0xldmVsKCkgPD0gTG9nTGV2ZWwuREVCVUcgJiYgX19QUklWQVRFX2xvZ0RlYnVnKFwiUXVlcnlFbmdpbmVcIiwgXCJTREsgd2lsbCBub3QgY3JlYXRlIGNhY2hlIGluZGV4ZXMgZm9yIHF1ZXJ5OlwiLCBfX1BSSVZBVEVfc3RyaW5naWZ5UXVlcnkodCksIFwic2luY2UgaXQgb25seSBjcmVhdGVzIGNhY2hlIGluZGV4ZXMgZm9yIGNvbGxlY3Rpb24gY29udGFpbnNcIiwgXCJtb3JlIHRoYW4gb3IgZXF1YWwgdG9cIiwgdGhpcy5XaSwgXCJkb2N1bWVudHNcIiksIFxuICAgICAgICBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpKSA6IChfX1BSSVZBVEVfZ2V0TG9nTGV2ZWwoKSA8PSBMb2dMZXZlbC5ERUJVRyAmJiBfX1BSSVZBVEVfbG9nRGVidWcoXCJRdWVyeUVuZ2luZVwiLCBcIlF1ZXJ5OlwiLCBfX1BSSVZBVEVfc3RyaW5naWZ5UXVlcnkodCksIFwic2NhbnNcIiwgbi5kb2N1bWVudFJlYWRDb3VudCwgXCJsb2NhbCBkb2N1bWVudHMgYW5kIHJldHVybnNcIiwgciwgXCJkb2N1bWVudHMgYXMgcmVzdWx0cy5cIiksIFxuICAgICAgICBuLmRvY3VtZW50UmVhZENvdW50ID4gdGhpcy5HaSAqIHIgPyAoX19QUklWQVRFX2dldExvZ0xldmVsKCkgPD0gTG9nTGV2ZWwuREVCVUcgJiYgX19QUklWQVRFX2xvZ0RlYnVnKFwiUXVlcnlFbmdpbmVcIiwgXCJUaGUgU0RLIGRlY2lkZXMgdG8gY3JlYXRlIGNhY2hlIGluZGV4ZXMgZm9yIHF1ZXJ5OlwiLCBfX1BSSVZBVEVfc3RyaW5naWZ5UXVlcnkodCksIFwiYXMgdXNpbmcgY2FjaGUgaW5kZXhlcyBtYXkgaGVscCBpbXByb3ZlIHBlcmZvcm1hbmNlLlwiKSwgXG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyLmNyZWF0ZVRhcmdldEluZGV4ZXMoZSwgX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQodCkpKSA6IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBhbiBpbmRleGVkIHF1ZXJ5IHRoYXQgZXZhbHVhdGVzIHRoZSBxdWVyeSBiYXNlZCBvbiBhIGNvbGxlY3Rpb24nc1xuICAgICAqIHBlcnNpc3RlZCBpbmRleCB2YWx1ZXMuIFJldHVybnMgYG51bGxgIGlmIGFuIGluZGV4IGlzIG5vdCBhdmFpbGFibGUuXG4gICAgICovICAgIGppKGUsIHQpIHtcbiAgICAgICAgaWYgKF9fUFJJVkFURV9xdWVyeU1hdGNoZXNBbGxEb2N1bWVudHModCkpIFxuICAgICAgICAvLyBRdWVyaWVzIHRoYXQgbWF0Y2ggYWxsIGRvY3VtZW50cyBkb24ndCBiZW5lZml0IGZyb20gdXNpbmdcbiAgICAgICAgLy8ga2V5LWJhc2VkIGxvb2t1cHMuIEl0IGlzIG1vcmUgZWZmaWNpZW50IHRvIHNjYW4gYWxsIGRvY3VtZW50cyBpbiBhXG4gICAgICAgIC8vIGNvbGxlY3Rpb24sIHJhdGhlciB0aGFuIHRvIHBlcmZvcm0gaW5kaXZpZHVhbCBsb29rdXBzLlxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUobnVsbCk7XG4gICAgICAgIGxldCBuID0gX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQodCk7XG4gICAgICAgIHJldHVybiB0aGlzLmluZGV4TWFuYWdlci5nZXRJbmRleFR5cGUoZSwgbikubmV4dCgociA9PiAwIC8qIEluZGV4VHlwZS5OT05FICovID09PSByID8gbnVsbCA6IChudWxsICE9PSB0LmxpbWl0ICYmIDEgLyogSW5kZXhUeXBlLlBBUlRJQUwgKi8gPT09IHIgJiYgKFxuICAgICAgICAvLyBXZSBjYW5ub3QgYXBwbHkgYSBsaW1pdCBmb3IgdGFyZ2V0cyB0aGF0IGFyZSBzZXJ2ZWQgdXNpbmcgYSBwYXJ0aWFsXG4gICAgICAgIC8vIGluZGV4LiBJZiBhIHBhcnRpYWwgaW5kZXggd2lsbCBiZSB1c2VkIHRvIHNlcnZlIHRoZSB0YXJnZXQsIHRoZVxuICAgICAgICAvLyBxdWVyeSBtYXkgcmV0dXJuIGEgc3VwZXJzZXQgb2YgZG9jdW1lbnRzIHRoYXQgbWF0Y2ggdGhlIHRhcmdldFxuICAgICAgICAvLyAoZS5nLiBpZiB0aGUgaW5kZXggZG9lc24ndCBpbmNsdWRlIGFsbCB0aGUgdGFyZ2V0J3MgZmlsdGVycyksIG9yXG4gICAgICAgIC8vIG1heSByZXR1cm4gdGhlIGNvcnJlY3Qgc2V0IG9mIGRvY3VtZW50cyBpbiB0aGUgd3Jvbmcgb3JkZXIgKGUuZy4gaWZcbiAgICAgICAgLy8gdGhlIGluZGV4IGRvZXNuJ3QgaW5jbHVkZSBhIHNlZ21lbnQgZm9yIG9uZSBvZiB0aGUgb3JkZXJCeXMpLlxuICAgICAgICAvLyBUaGVyZWZvcmUsIGEgbGltaXQgc2hvdWxkIG5vdCBiZSBhcHBsaWVkIGluIHN1Y2ggY2FzZXMuXG4gICAgICAgIHQgPSBfX1BSSVZBVEVfcXVlcnlXaXRoTGltaXQodCwgbnVsbCwgXCJGXCIgLyogTGltaXRUeXBlLkZpcnN0ICovKSwgbiA9IF9fUFJJVkFURV9xdWVyeVRvVGFyZ2V0KHQpKSwgXG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyLmdldERvY3VtZW50c01hdGNoaW5nVGFyZ2V0KGUsIG4pLm5leHQoKHIgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCguLi5yKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnppLmdldERvY3VtZW50cyhlLCBpKS5uZXh0KChyID0+IHRoaXMuaW5kZXhNYW5hZ2VyLmdldE1pbk9mZnNldChlLCBuKS5uZXh0KChuID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gdGhpcy5aaSh0LCByKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5YaSh0LCBzLCBpLCBuLnJlYWRUaW1lKSA/IHRoaXMuamkoZSwgX19QUklWQVRFX3F1ZXJ5V2l0aExpbWl0KHQsIG51bGwsIFwiRlwiIC8qIExpbWl0VHlwZS5GaXJzdCAqLykpIDogdGhpcy5lcyhlLCBzLCB0LCBuKTtcbiAgICAgICAgICAgIH0pKSkpO1xuICAgICAgICB9KSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIGEgcXVlcnkgYmFzZWQgb24gdGhlIHRhcmdldCdzIHBlcnNpc3RlZCBxdWVyeSBtYXBwaW5nLiBSZXR1cm5zXG4gICAgICogYG51bGxgIGlmIHRoZSBtYXBwaW5nIGlzIG5vdCBhdmFpbGFibGUgb3IgY2Fubm90IGJlIHVzZWQuXG4gICAgICovICAgIEhpKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9xdWVyeU1hdGNoZXNBbGxEb2N1bWVudHModCkgfHwgci5pc0VxdWFsKFNuYXBzaG90VmVyc2lvbi5taW4oKSkgPyBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShudWxsKSA6IHRoaXMuemkuZ2V0RG9jdW1lbnRzKGUsIG4pLm5leHQoKGkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMuWmkodCwgaSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5YaSh0LCBzLCBuLCByKSA/IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKG51bGwpIDogKF9fUFJJVkFURV9nZXRMb2dMZXZlbCgpIDw9IExvZ0xldmVsLkRFQlVHICYmIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlF1ZXJ5RW5naW5lXCIsIFwiUmUtdXNpbmcgcHJldmlvdXMgcmVzdWx0IGZyb20gJXMgdG8gZXhlY3V0ZSBxdWVyeTogJXNcIiwgci50b1N0cmluZygpLCBfX1BSSVZBVEVfc3RyaW5naWZ5UXVlcnkodCkpLCBcbiAgICAgICAgICAgIHRoaXMuZXMoZSwgcywgdCwgX19QUklWQVRFX25ld0luZGV4T2Zmc2V0U3VjY2Vzc29yRnJvbVJlYWRUaW1lKHIsIC0xKSkubmV4dCgoZSA9PiBlKSkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIC8vIFF1ZXJpZXMgdGhhdCBoYXZlIG5ldmVyIHNlZW4gYSBzbmFwc2hvdCB3aXRob3V0IGxpbWJvIGZyZWUgZG9jdW1lbnRzXG4gICAgICAgIC8vIHNob3VsZCBhbHNvIGJlIHJ1biBhcyBhIGZ1bGwgY29sbGVjdGlvbiBzY2FuLlxuICAgICAgICB9XG4gICAgLyoqIEFwcGxpZXMgdGhlIHF1ZXJ5IGZpbHRlciBhbmQgc29ydGluZyB0byB0aGUgcHJvdmlkZWQgZG9jdW1lbnRzLiAgKi8gICAgWmkoZSwgdCkge1xuICAgICAgICAvLyBTb3J0IHRoZSBkb2N1bWVudHMgYW5kIHJlLWFwcGx5IHRoZSBxdWVyeSBmaWx0ZXIgc2luY2UgcHJldmlvdXNseVxuICAgICAgICAvLyBtYXRjaGluZyBkb2N1bWVudHMgZG8gbm90IG5lY2Vzc2FyaWx5IHN0aWxsIG1hdGNoIHRoZSBxdWVyeS5cbiAgICAgICAgbGV0IG4gPSBuZXcgU29ydGVkU2V0KF9fUFJJVkFURV9uZXdRdWVyeUNvbXBhcmF0b3IoZSkpO1xuICAgICAgICByZXR1cm4gdC5mb3JFYWNoKCgodCwgcikgPT4ge1xuICAgICAgICAgICAgX19QUklWQVRFX3F1ZXJ5TWF0Y2hlcyhlLCByKSAmJiAobiA9IG4uYWRkKHIpKTtcbiAgICAgICAgfSkpLCBuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIGlmIGEgbGltaXQgcXVlcnkgbmVlZHMgdG8gYmUgcmVmaWxsZWQgZnJvbSBjYWNoZSwgbWFraW5nIGl0XG4gICAgICogaW5lbGlnaWJsZSBmb3IgaW5kZXgtZnJlZSBleGVjdXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcXVlcnkgLSBUaGUgcXVlcnkuXG4gICAgICogQHBhcmFtIHNvcnRlZFByZXZpb3VzUmVzdWx0cyAtIFRoZSBkb2N1bWVudHMgdGhhdCBtYXRjaGVkIHRoZSBxdWVyeSB3aGVuIGl0XG4gICAgICogd2FzIGxhc3Qgc3luY2hyb25pemVkLCBzb3J0ZWQgYnkgdGhlIHF1ZXJ5J3MgY29tcGFyYXRvci5cbiAgICAgKiBAcGFyYW0gcmVtb3RlS2V5cyAtIFRoZSBkb2N1bWVudCBrZXlzIHRoYXQgbWF0Y2hlZCB0aGUgcXVlcnkgYXQgdGhlIGxhc3RcbiAgICAgKiBzbmFwc2hvdC5cbiAgICAgKiBAcGFyYW0gbGltYm9GcmVlU25hcHNob3RWZXJzaW9uIC0gVGhlIHZlcnNpb24gb2YgdGhlIHNuYXBzaG90IHdoZW4gdGhlXG4gICAgICogcXVlcnkgd2FzIGxhc3Qgc3luY2hyb25pemVkLlxuICAgICAqLyAgICBYaShlLCB0LCBuLCByKSB7XG4gICAgICAgIGlmIChudWxsID09PSBlLmxpbWl0KSBcbiAgICAgICAgLy8gUXVlcmllcyB3aXRob3V0IGxpbWl0cyBkbyBub3QgbmVlZCB0byBiZSByZWZpbGxlZC5cbiAgICAgICAgcmV0dXJuICExO1xuICAgICAgICBpZiAobi5zaXplICE9PSB0LnNpemUpIFxuICAgICAgICAvLyBUaGUgcXVlcnkgbmVlZHMgdG8gYmUgcmVmaWxsZWQgaWYgYSBwcmV2aW91c2x5IG1hdGNoaW5nIGRvY3VtZW50IG5vXG4gICAgICAgIC8vIGxvbmdlciBtYXRjaGVzLlxuICAgICAgICByZXR1cm4gITA7XG4gICAgICAgIC8vIExpbWl0IHF1ZXJpZXMgYXJlIG5vdCBlbGlnaWJsZSBmb3IgaW5kZXgtZnJlZSBxdWVyeSBleGVjdXRpb24gaWYgdGhlcmUgaXNcbiAgICAgICAgLy8gYSBwb3RlbnRpYWwgdGhhdCBhbiBvbGRlciBkb2N1bWVudCBmcm9tIGNhY2hlIG5vdyBzb3J0cyBiZWZvcmUgYSBkb2N1bWVudFxuICAgICAgICAvLyB0aGF0IHdhcyBwcmV2aW91c2x5IHBhcnQgb2YgdGhlIGxpbWl0LiBUaGlzLCBob3dldmVyLCBjYW4gb25seSBoYXBwZW4gaWZcbiAgICAgICAgLy8gdGhlIGRvY3VtZW50IGF0IHRoZSBlZGdlIG9mIHRoZSBsaW1pdCBnb2VzIG91dCBvZiBsaW1pdC5cbiAgICAgICAgLy8gSWYgYSBkb2N1bWVudCB0aGF0IGlzIG5vdCB0aGUgbGltaXQgYm91bmRhcnkgc29ydHMgZGlmZmVyZW50bHksXG4gICAgICAgIC8vIHRoZSBib3VuZGFyeSBvZiB0aGUgbGltaXQgaXRzZWxmIGRpZCBub3QgY2hhbmdlIGFuZCBkb2N1bWVudHMgZnJvbSBjYWNoZVxuICAgICAgICAvLyB3aWxsIGNvbnRpbnVlIHRvIGJlIFwicmVqZWN0ZWRcIiBieSB0aGlzIGJvdW5kYXJ5LiBUaGVyZWZvcmUsIHdlIGNhbiBpZ25vcmVcbiAgICAgICAgLy8gYW55IG1vZGlmaWNhdGlvbnMgdGhhdCBkb24ndCBhZmZlY3QgdGhlIGxhc3QgZG9jdW1lbnQuXG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IFwiRlwiIC8qIExpbWl0VHlwZS5GaXJzdCAqLyA9PT0gZS5saW1pdFR5cGUgPyB0Lmxhc3QoKSA6IHQuZmlyc3QoKTtcbiAgICAgICAgcmV0dXJuICEhaSAmJiAoaS5oYXNQZW5kaW5nV3JpdGVzIHx8IGkudmVyc2lvbi5jb21wYXJlVG8ocikgPiAwKTtcbiAgICB9XG4gICAgSmkoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2dldExvZ0xldmVsKCkgPD0gTG9nTGV2ZWwuREVCVUcgJiYgX19QUklWQVRFX2xvZ0RlYnVnKFwiUXVlcnlFbmdpbmVcIiwgXCJVc2luZyBmdWxsIGNvbGxlY3Rpb24gc2NhbiB0byBleGVjdXRlIHF1ZXJ5OlwiLCBfX1BSSVZBVEVfc3RyaW5naWZ5UXVlcnkodCkpLCBcbiAgICAgICAgdGhpcy56aS5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KGUsIHQsIEluZGV4T2Zmc2V0Lm1pbigpLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tYmluZXMgdGhlIHJlc3VsdHMgZnJvbSBhbiBpbmRleGVkIGV4ZWN1dGlvbiB3aXRoIHRoZSByZW1haW5pbmcgZG9jdW1lbnRzXG4gICAgICogdGhhdCBoYXZlIG5vdCB5ZXQgYmVlbiBpbmRleGVkLlxuICAgICAqLyAgICBlcyhlLCB0LCBuLCByKSB7XG4gICAgICAgIC8vIFJldHJpZXZlIGFsbCByZXN1bHRzIGZvciBkb2N1bWVudHMgdGhhdCB3ZXJlIHVwZGF0ZWQgc2luY2UgdGhlIG9mZnNldC5cbiAgICAgICAgcmV0dXJuIHRoaXMuemkuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeShlLCBuLCByKS5uZXh0KChlID0+IChcbiAgICAgICAgLy8gTWVyZ2Ugd2l0aCBleGlzdGluZyByZXN1bHRzXG4gICAgICAgIHQuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBlID0gZS5pbnNlcnQodC5rZXksIHQpO1xuICAgICAgICB9KSksIGUpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBJbXBsZW1lbnRzIGBMb2NhbFN0b3JlYCBpbnRlcmZhY2UuXG4gKlxuICogTm90ZTogc29tZSBmaWVsZCBkZWZpbmVkIGluIHRoaXMgY2xhc3MgbWlnaHQgaGF2ZSBwdWJsaWMgYWNjZXNzIGxldmVsLCBidXRcbiAqIHRoZSBjbGFzcyBpcyBub3QgZXhwb3J0ZWQgc28gdGhleSBhcmUgb25seSBhY2Nlc3NpYmxlIGZyb20gdGhpcyBtb2R1bGUuXG4gKiBUaGlzIGlzIHVzZWZ1bCB0byBpbXBsZW1lbnQgb3B0aW9uYWwgZmVhdHVyZXMgKGxpa2UgYnVuZGxlcykgaW4gZnJlZVxuICogZnVuY3Rpb25zLCBzdWNoIHRoYXQgdGhleSBhcmUgdHJlZS1zaGFrZWFibGUuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9Mb2NhbFN0b3JlSW1wbCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIE1hbmFnZXMgb3VyIGluLW1lbW9yeSBvciBkdXJhYmxlIHBlcnNpc3RlbmNlLiAqL1xuICAgIGUsIHQsIG4sIHIpIHtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IGUsIHRoaXMudHMgPSB0LCB0aGlzLnNlcmlhbGl6ZXIgPSByLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1hcHMgYSB0YXJnZXRJRCB0byBkYXRhIGFib3V0IGl0cyB0YXJnZXQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFBPUlRJTkcgTk9URTogV2UgYXJlIHVzaW5nIGFuIGltbXV0YWJsZSBkYXRhIHN0cnVjdHVyZSBvbiBXZWIgdG8gbWFrZSByZS1ydW5zXG4gICAgICAgICAqIG9mIGBhcHBseVJlbW90ZUV2ZW50KClgIGlkZW1wb3RlbnQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm5zID0gbmV3IFNvcnRlZE1hcChfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvciksIFxuICAgICAgICAvKiogTWFwcyBhIHRhcmdldCB0byBpdHMgdGFyZ2V0SUQuICovXG4gICAgICAgIC8vIFRPRE8od3VhbmR5KTogRXZhbHVhdGUgaWYgVGFyZ2V0SWQgY2FuIGJlIHBhcnQgb2YgVGFyZ2V0LlxuICAgICAgICB0aGlzLnJzID0gbmV3IE9iamVjdE1hcCgoZSA9PiBfX1BSSVZBVEVfY2Fub25pZnlUYXJnZXQoZSkpLCBfX1BSSVZBVEVfdGFyZ2V0RXF1YWxzKSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIHBlciBjb2xsZWN0aW9uIGdyb3VwIGluZGV4IG9mIHRoZSBsYXN0IHJlYWQgdGltZSBwcm9jZXNzZWQgYnlcbiAgICAgICAgICogYGdldE5ld0RvY3VtZW50Q2hhbmdlcygpYC5cbiAgICAgICAgICpcbiAgICAgICAgICogUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc3MgPSBuZXcgTWFwLCB0aGlzLm9zID0gZS5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCksIHRoaXMuUXIgPSBlLmdldFRhcmdldENhY2hlKCksIFxuICAgICAgICB0aGlzLiRyID0gZS5nZXRCdW5kbGVDYWNoZSgpLCB0aGlzLl9zKG4pO1xuICAgIH1cbiAgICBfcyhlKSB7XG4gICAgICAgIC8vIFRPRE8oaW5kZXhpbmcpOiBBZGQgc3BlYyB0ZXN0cyB0aGF0IHRlc3QgdGhlc2UgY29tcG9uZW50cyBjaGFuZ2UgYWZ0ZXIgYVxuICAgICAgICAvLyB1c2VyIGNoYW5nZVxuICAgICAgICB0aGlzLmRvY3VtZW50T3ZlcmxheUNhY2hlID0gdGhpcy5wZXJzaXN0ZW5jZS5nZXREb2N1bWVudE92ZXJsYXlDYWNoZShlKSwgdGhpcy5pbmRleE1hbmFnZXIgPSB0aGlzLnBlcnNpc3RlbmNlLmdldEluZGV4TWFuYWdlcihlKSwgXG4gICAgICAgIHRoaXMubXV0YXRpb25RdWV1ZSA9IHRoaXMucGVyc2lzdGVuY2UuZ2V0TXV0YXRpb25RdWV1ZShlLCB0aGlzLmluZGV4TWFuYWdlciksIHRoaXMubG9jYWxEb2N1bWVudHMgPSBuZXcgTG9jYWxEb2N1bWVudHNWaWV3KHRoaXMub3MsIHRoaXMubXV0YXRpb25RdWV1ZSwgdGhpcy5kb2N1bWVudE92ZXJsYXlDYWNoZSwgdGhpcy5pbmRleE1hbmFnZXIpLCBcbiAgICAgICAgdGhpcy5vcy5zZXRJbmRleE1hbmFnZXIodGhpcy5pbmRleE1hbmFnZXIpLCB0aGlzLnRzLmluaXRpYWxpemUodGhpcy5sb2NhbERvY3VtZW50cywgdGhpcy5pbmRleE1hbmFnZXIpO1xuICAgIH1cbiAgICBjb2xsZWN0R2FyYmFnZShlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQ29sbGVjdCBnYXJiYWdlXCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKHQgPT4gZS5jb2xsZWN0KHQsIHRoaXMubnMpKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfbmV3TG9jYWxTdG9yZShcbi8qKiBNYW5hZ2VzIG91ciBpbi1tZW1vcnkgb3IgZHVyYWJsZSBwZXJzaXN0ZW5jZS4gKi9cbmUsIHQsIG4sIHIpIHtcbiAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9Mb2NhbFN0b3JlSW1wbChlLCB0LCBuLCByKTtcbn1cblxuLyoqXG4gKiBUZWxscyB0aGUgTG9jYWxTdG9yZSB0aGF0IHRoZSBjdXJyZW50bHkgYXV0aGVudGljYXRlZCB1c2VyIGhhcyBjaGFuZ2VkLlxuICpcbiAqIEluIHJlc3BvbnNlIHRoZSBsb2NhbCBzdG9yZSBzd2l0Y2hlcyB0aGUgbXV0YXRpb24gcXVldWUgdG8gdGhlIG5ldyB1c2VyIGFuZFxuICogcmV0dXJucyBhbnkgcmVzdWx0aW5nIGRvY3VtZW50IGNoYW5nZXMuXG4gKi9cbi8vIFBPUlRJTkcgTk9URTogQW5kcm9pZCBhbmQgaU9TIG9ubHkgcmV0dXJuIHRoZSBkb2N1bWVudHMgYWZmZWN0ZWQgYnkgdGhlXG4vLyBjaGFuZ2UuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUhhbmRsZVVzZXJDaGFuZ2UoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIHJldHVybiBhd2FpdCBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiSGFuZGxlIHVzZXIgY2hhbmdlXCIsIFwicmVhZG9ubHlcIiwgKGUgPT4ge1xuICAgICAgICAvLyBTd2FwIG91dCB0aGUgbXV0YXRpb24gcXVldWUsIGdyYWJiaW5nIHRoZSBwZW5kaW5nIG11dGF0aW9uIGJhdGNoZXNcbiAgICAgICAgLy8gYmVmb3JlIGFuZCBhZnRlci5cbiAgICAgICAgbGV0IHI7XG4gICAgICAgIHJldHVybiBuLm11dGF0aW9uUXVldWUuZ2V0QWxsTXV0YXRpb25CYXRjaGVzKGUpLm5leHQoKGkgPT4gKHIgPSBpLCBuLl9zKHQpLCBuLm11dGF0aW9uUXVldWUuZ2V0QWxsTXV0YXRpb25CYXRjaGVzKGUpKSkpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IFtdLCBzID0gW107XG4gICAgICAgICAgICAvLyBVbmlvbiB0aGUgb2xkL25ldyBjaGFuZ2VkIGtleXMuXG4gICAgICAgICAgICBsZXQgbyA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHIpIHtcbiAgICAgICAgICAgICAgICBpLnB1c2goZS5iYXRjaElkKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZS5tdXRhdGlvbnMpIG8gPSBvLmFkZCh0LmtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdCkge1xuICAgICAgICAgICAgICAgIHMucHVzaChlLmJhdGNoSWQpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBlLm11dGF0aW9ucykgbyA9IG8uYWRkKHQua2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFJldHVybiB0aGUgc2V0IG9mIGFsbCAocG90ZW50aWFsbHkpIGNoYW5nZWQgZG9jdW1lbnRzIGFuZCB0aGUgbGlzdFxuICAgICAgICAgICAgLy8gb2YgbXV0YXRpb24gYmF0Y2ggSURzIHRoYXQgd2VyZSBhZmZlY3RlZCBieSBjaGFuZ2UuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5sb2NhbERvY3VtZW50cy5nZXREb2N1bWVudHMoZSwgbykubmV4dCgoZSA9PiAoe1xuICAgICAgICAgICAgICAgIHVzOiBlLFxuICAgICAgICAgICAgICAgIHJlbW92ZWRCYXRjaElkczogaSxcbiAgICAgICAgICAgICAgICBhZGRlZEJhdGNoSWRzOiBzXG4gICAgICAgICAgICB9KSkpO1xuICAgICAgICB9KSk7XG4gICAgfSkpO1xufVxuXG4vKiBBY2NlcHRzIGxvY2FsbHkgZ2VuZXJhdGVkIE11dGF0aW9ucyBhbmQgY29tbWl0IHRoZW0gdG8gc3RvcmFnZS4gKi9cbi8qKlxuICogQWNrbm93bGVkZ2VzIHRoZSBnaXZlbiBiYXRjaC5cbiAqXG4gKiBPbiB0aGUgaGFwcHkgcGF0aCB3aGVuIGEgYmF0Y2ggaXMgYWNrbm93bGVkZ2VkLCB0aGUgbG9jYWwgc3RvcmUgd2lsbFxuICpcbiAqICArIHJlbW92ZSB0aGUgYmF0Y2ggZnJvbSB0aGUgbXV0YXRpb24gcXVldWU7XG4gKiAgKyBhcHBseSB0aGUgY2hhbmdlcyB0byB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlO1xuICogICsgcmVjYWxjdWxhdGUgdGhlIGxhdGVuY3kgY29tcGVuc2F0ZWQgdmlldyBpbXBsaWVkIGJ5IHRob3NlIGNoYW5nZXMgKHRoZXJlXG4gKiAgICBtYXkgYmUgbXV0YXRpb25zIGluIHRoZSBxdWV1ZSB0aGF0IGFmZmVjdCB0aGUgZG9jdW1lbnRzIGJ1dCBoYXZlbid0IGJlZW5cbiAqICAgIGFja25vd2xlZGdlZCB5ZXQpOyBhbmRcbiAqICArIGdpdmUgdGhlIGNoYW5nZWQgZG9jdW1lbnRzIGJhY2sgdGhlIHN5bmMgZW5naW5lXG4gKlxuICogQHJldHVybnMgVGhlIHJlc3VsdGluZyAobW9kaWZpZWQpIGRvY3VtZW50cy5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVBY2tub3dsZWRnZUJhdGNoKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkFja25vd2xlZGdlIGJhdGNoXCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKGUgPT4ge1xuICAgICAgICBjb25zdCByID0gdC5iYXRjaC5rZXlzKCksIGkgPSBuLm9zLm5ld0NoYW5nZUJ1ZmZlcih7XG4gICAgICAgICAgICB0cmFja1JlbW92YWxzOiAhMFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9hcHBseVdyaXRlVG9SZW1vdGVEb2N1bWVudHMoZSwgdCwgbiwgcikge1xuICAgICAgICAgICAgY29uc3QgaSA9IG4uYmF0Y2gsIHMgPSBpLmtleXMoKTtcbiAgICAgICAgICAgIGxldCBvID0gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgIHJldHVybiBzLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgICAgIG8gPSBvLm5leHQoKCgpID0+IHIuZ2V0RW50cnkodCwgZSkpKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcyA9IG4uZG9jVmVyc2lvbnMuZ2V0KGUpO1xuICAgICAgICAgICAgICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydChudWxsICE9PSBzKSwgdC52ZXJzaW9uLmNvbXBhcmVUbyhzKSA8IDAgJiYgKGkuYXBwbHlUb1JlbW90ZURvY3VtZW50KHQsIG4pLCBcbiAgICAgICAgICAgICAgICAgICAgdC5pc1ZhbGlkRG9jdW1lbnQoKSAmJiAoXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIHVzZSB0aGUgY29tbWl0VmVyc2lvbiBhcyB0aGUgcmVhZFRpbWUgcmF0aGVyIHRoYW4gdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIGRvY3VtZW50J3MgdXBkYXRlVGltZSBzaW5jZSB0aGUgdXBkYXRlVGltZSBpcyBub3QgYWR2YW5jZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gZm9yIHVwZGF0ZXMgdGhhdCBkbyBub3QgbW9kaWZ5IHRoZSB1bmRlcmx5aW5nIGRvY3VtZW50LlxuICAgICAgICAgICAgICAgICAgICB0LnNldFJlYWRUaW1lKG4uY29tbWl0VmVyc2lvbiksIHIuYWRkRW50cnkodCkpKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSksIG8ubmV4dCgoKCkgPT4gZS5tdXRhdGlvblF1ZXVlLnJlbW92ZU11dGF0aW9uQmF0Y2godCwgaSkpKTtcbiAgICAgICAgfVxuICAgICAgICAvKiogUmV0dXJucyB0aGUgbG9jYWwgdmlldyBvZiB0aGUgZG9jdW1lbnRzIGFmZmVjdGVkIGJ5IGEgbXV0YXRpb24gYmF0Y2guICovXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG4gICAgICAgIChuLCBlLCB0LCBpKS5uZXh0KCgoKSA9PiBpLmFwcGx5KGUpKSkubmV4dCgoKCkgPT4gbi5tdXRhdGlvblF1ZXVlLnBlcmZvcm1Db25zaXN0ZW5jeUNoZWNrKGUpKSkubmV4dCgoKCkgPT4gbi5kb2N1bWVudE92ZXJsYXlDYWNoZS5yZW1vdmVPdmVybGF5c0ZvckJhdGNoSWQoZSwgciwgdC5iYXRjaC5iYXRjaElkKSkpLm5leHQoKCgpID0+IG4ubG9jYWxEb2N1bWVudHMucmVjYWxjdWxhdGVBbmRTYXZlT3ZlcmxheXNGb3JEb2N1bWVudEtleXMoZSwgZnVuY3Rpb24gX19QUklWQVRFX2dldEtleXNXaXRoVHJhbnNmb3JtUmVzdWx0cyhlKSB7XG4gICAgICAgICAgICBsZXQgdCA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpO1xuICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBlLm11dGF0aW9uUmVzdWx0cy5sZW5ndGg7ICsrbikge1xuICAgICAgICAgICAgICAgIGUubXV0YXRpb25SZXN1bHRzW25dLnRyYW5zZm9ybVJlc3VsdHMubGVuZ3RoID4gMCAmJiAodCA9IHQuYWRkKGUuYmF0Y2gubXV0YXRpb25zW25dLmtleSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHQ7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBSZW1vdmVzIG11dGF0aW9ucyBmcm9tIHRoZSBNdXRhdGlvblF1ZXVlIGZvciB0aGUgc3BlY2lmaWVkIGJhdGNoO1xuICogTG9jYWxEb2N1bWVudHMgd2lsbCBiZSByZWNhbGN1bGF0ZWQuXG4gKlxuICogQHJldHVybnMgVGhlIHJlc3VsdGluZyBtb2RpZmllZCBkb2N1bWVudHMuXG4gKi8gKHQpKSkpLm5leHQoKCgpID0+IG4ubG9jYWxEb2N1bWVudHMuZ2V0RG9jdW1lbnRzKGUsIHIpKSk7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGxhc3QgY29uc2lzdGVudCBzbmFwc2hvdCBwcm9jZXNzZWQgKHVzZWQgYnkgdGhlIFJlbW90ZVN0b3JlIHRvXG4gKiBkZXRlcm1pbmUgd2hldGhlciB0byBidWZmZXIgaW5jb21pbmcgc25hcHNob3RzIGZyb20gdGhlIGJhY2tlbmQpLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24oZSkge1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIHJldHVybiB0LnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IGxhc3QgcmVtb3RlIHNuYXBzaG90IHZlcnNpb25cIiwgXCJyZWFkb25seVwiLCAoZSA9PiB0LlFyLmdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24oZSkpKTtcbn1cblxuLyoqXG4gKiBVcGRhdGVzIHRoZSBcImdyb3VuZC1zdGF0ZVwiIChyZW1vdGUpIGRvY3VtZW50cy4gV2UgYXNzdW1lIHRoYXQgdGhlIHJlbW90ZVxuICogZXZlbnQgcmVmbGVjdHMgYW55IHdyaXRlIGJhdGNoZXMgdGhhdCBoYXZlIGJlZW4gYWNrbm93bGVkZ2VkIG9yIHJlamVjdGVkXG4gKiAoaS5lLiB3ZSBkbyBub3QgcmUtYXBwbHkgbG9jYWwgbXV0YXRpb25zIHRvIHVwZGF0ZXMgZnJvbSB0aGlzIGV2ZW50KS5cbiAqXG4gKiBMb2NhbERvY3VtZW50cyBhcmUgcmUtY2FsY3VsYXRlZCBpZiB0aGVyZSBhcmUgcmVtYWluaW5nIG11dGF0aW9ucyBpbiB0aGVcbiAqIHF1ZXVlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlQXBwbHlSZW1vdGVFdmVudFRvTG9jYWxDYWNoZShlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIHIgPSB0LnNuYXBzaG90VmVyc2lvbjtcbiAgICBsZXQgaSA9IG4ubnM7XG4gICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJBcHBseSByZW1vdGUgZXZlbnRcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAoZSA9PiB7XG4gICAgICAgIGNvbnN0IHMgPSBuLm9zLm5ld0NoYW5nZUJ1ZmZlcih7XG4gICAgICAgICAgICB0cmFja1JlbW92YWxzOiAhMFxuICAgICAgICB9KTtcbiAgICAgICAgLy8gUmVzZXQgbmV3VGFyZ2V0RGF0YUJ5VGFyZ2V0TWFwIGluIGNhc2UgdGhpcyB0cmFuc2FjdGlvbiBnZXRzIHJlLXJ1bi5cbiAgICAgICAgICAgICAgICBpID0gbi5ucztcbiAgICAgICAgY29uc3QgbyA9IFtdO1xuICAgICAgICB0LnRhcmdldENoYW5nZXMuZm9yRWFjaCgoKHMsIF8pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGEgPSBpLmdldChfKTtcbiAgICAgICAgICAgIGlmICghYSkgcmV0dXJuO1xuICAgICAgICAgICAgLy8gT25seSB1cGRhdGUgdGhlIHJlbW90ZSBrZXlzIGlmIHRoZSB0YXJnZXQgaXMgc3RpbGwgYWN0aXZlLiBUaGlzXG4gICAgICAgICAgICAvLyBlbnN1cmVzIHRoYXQgd2UgY2FuIHBlcnNpc3QgdGhlIHVwZGF0ZWQgdGFyZ2V0IGRhdGEgYWxvbmcgd2l0aFxuICAgICAgICAgICAgLy8gdGhlIHVwZGF0ZWQgYXNzaWdubWVudC5cbiAgICAgICAgICAgICAgICAgICAgICAgIG8ucHVzaChuLlFyLnJlbW92ZU1hdGNoaW5nS2V5cyhlLCBzLnJlbW92ZWREb2N1bWVudHMsIF8pLm5leHQoKCgpID0+IG4uUXIuYWRkTWF0Y2hpbmdLZXlzKGUsIHMuYWRkZWREb2N1bWVudHMsIF8pKSkpO1xuICAgICAgICAgICAgbGV0IHUgPSBhLndpdGhTZXF1ZW5jZU51bWJlcihlLmN1cnJlbnRTZXF1ZW5jZU51bWJlcik7XG4gICAgICAgICAgICBudWxsICE9PSB0LnRhcmdldE1pc21hdGNoZXMuZ2V0KF8pID8gdSA9IHUud2l0aFJlc3VtZVRva2VuKEJ5dGVTdHJpbmcuRU1QVFlfQllURV9TVFJJTkcsIFNuYXBzaG90VmVyc2lvbi5taW4oKSkud2l0aExhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24oU25hcHNob3RWZXJzaW9uLm1pbigpKSA6IHMucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCAmJiAodSA9IHUud2l0aFJlc3VtZVRva2VuKHMucmVzdW1lVG9rZW4sIHIpKSwgXG4gICAgICAgICAgICBpID0gaS5pbnNlcnQoXywgdSksIFxuICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSB0YXJnZXQgZGF0YSBpZiB0aGVyZSBhcmUgdGFyZ2V0IGNoYW5nZXMgKG9yIGlmXG4gICAgICAgICAgICAvLyBzdWZmaWNpZW50IHRpbWUgaGFzIHBhc3NlZCBzaW5jZSB0aGUgbGFzdCB1cGRhdGUpLlxuICAgICAgICAgICAgLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIG5ld1RhcmdldERhdGEgc2hvdWxkIGJlIHBlcnNpc3RlZCBkdXJpbmcgYW4gdXBkYXRlIG9mXG4gKiBhbiBhY3RpdmUgdGFyZ2V0LiBUYXJnZXREYXRhIHNob3VsZCBhbHdheXMgYmUgcGVyc2lzdGVkIHdoZW4gYSB0YXJnZXQgaXNcbiAqIGJlaW5nIHJlbGVhc2VkIGFuZCBzaG91bGQgbm90IGNhbGwgdGhpcyBmdW5jdGlvbi5cbiAqXG4gKiBXaGlsZSB0aGUgdGFyZ2V0IGlzIGFjdGl2ZSwgVGFyZ2V0RGF0YSB1cGRhdGVzIGNhbiBiZSBvbWl0dGVkIHdoZW4gbm90aGluZ1xuICogYWJvdXQgdGhlIHRhcmdldCBoYXMgY2hhbmdlZCBleGNlcHQgbWV0YWRhdGEgbGlrZSB0aGUgcmVzdW1lIHRva2VuIG9yXG4gKiBzbmFwc2hvdCB2ZXJzaW9uLiBPY2Nhc2lvbmFsbHkgaXQncyB3b3J0aCB0aGUgZXh0cmEgd3JpdGUgdG8gcHJldmVudCB0aGVzZVxuICogdmFsdWVzIGZyb20gZ2V0dGluZyB0b28gc3RhbGUgYWZ0ZXIgYSBjcmFzaCwgYnV0IHRoaXMgZG9lc24ndCBoYXZlIHRvIGJlXG4gKiB0b28gZnJlcXVlbnQuXG4gKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9zaG91bGRQZXJzaXN0VGFyZ2V0RGF0YShlLCB0LCBuKSB7XG4gICAgICAgICAgICAgICAgLy8gQWx3YXlzIHBlcnNpc3QgdGFyZ2V0IGRhdGEgaWYgd2UgZG9uJ3QgYWxyZWFkeSBoYXZlIGEgcmVzdW1lIHRva2VuLlxuICAgICAgICAgICAgICAgIGlmICgwID09PSBlLnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKSkgcmV0dXJuICEwO1xuICAgICAgICAgICAgICAgIC8vIERvbid0IGFsbG93IHJlc3VtZSB0b2tlbiBjaGFuZ2VzIHRvIGJlIGJ1ZmZlcmVkIGluZGVmaW5pdGVseS4gVGhpc1xuICAgICAgICAgICAgICAgIC8vIGFsbG93cyB1cyB0byBiZSByZWFzb25hYmx5IHVwLXRvLWRhdGUgYWZ0ZXIgYSBjcmFzaCBhbmQgYXZvaWRzIG5lZWRpbmdcbiAgICAgICAgICAgICAgICAvLyB0byBsb29wIG92ZXIgYWxsIGFjdGl2ZSBxdWVyaWVzIG9uIHNodXRkb3duLiBFc3BlY2lhbGx5IGluIHRoZSBicm93c2VyXG4gICAgICAgICAgICAgICAgLy8gd2UgbWF5IG5vdCBnZXQgdGltZSB0byBkbyBhbnl0aGluZyBpbnRlcmVzdGluZyB3aGlsZSB0aGUgY3VycmVudCB0YWIgaXNcbiAgICAgICAgICAgICAgICAvLyBjbG9zaW5nLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodC5zbmFwc2hvdFZlcnNpb24udG9NaWNyb3NlY29uZHMoKSAtIGUuc25hcHNob3RWZXJzaW9uLnRvTWljcm9zZWNvbmRzKCkgPj0gM2U4KSByZXR1cm4gITA7XG4gICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIGlmIHRoZSBvbmx5IHRoaW5nIHRoYXQgaGFzIGNoYW5nZWQgYWJvdXQgYSB0YXJnZXQgaXMgaXRzIHJlc3VtZVxuICAgICAgICAgICAgICAgIC8vIHRva2VuIGl0J3Mgbm90IHdvcnRoIHBlcnNpc3RpbmcuIE5vdGUgdGhhdCB0aGUgUmVtb3RlU3RvcmUga2VlcHMgYW5cbiAgICAgICAgICAgICAgICAvLyBpbi1tZW1vcnkgdmlldyBvZiB0aGUgY3VycmVudGx5IGFjdGl2ZSB0YXJnZXRzIHdoaWNoIGluY2x1ZGVzIHRoZSBjdXJyZW50XG4gICAgICAgICAgICAgICAgLy8gcmVzdW1lIHRva2VuLCBzbyBzdHJlYW0gZmFpbHVyZSBvciB1c2VyIGNoYW5nZXMgd2lsbCBzdGlsbCB1c2UgYW5cbiAgICAgICAgICAgICAgICAvLyB1cC10by1kYXRlIHJlc3VtZSB0b2tlbiByZWdhcmRsZXNzIG9mIHdoYXQgd2UgZG8gaGVyZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uYWRkZWREb2N1bWVudHMuc2l6ZSArIG4ubW9kaWZpZWREb2N1bWVudHMuc2l6ZSArIG4ucmVtb3ZlZERvY3VtZW50cy5zaXplID4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICogTm90aWZpZXMgbG9jYWwgc3RvcmUgb2YgdGhlIGNoYW5nZWQgdmlld3MgdG8gbG9jYWxseSBwaW4gZG9jdW1lbnRzLlxuICovIChhLCB1LCBzKSAmJiBvLnB1c2gobi5Rci51cGRhdGVUYXJnZXREYXRhKGUsIHUpKTtcbiAgICAgICAgfSkpO1xuICAgICAgICBsZXQgXyA9IF9fUFJJVkFURV9tdXRhYmxlRG9jdW1lbnRNYXAoKSwgYSA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpO1xuICAgICAgICAvLyBIQUNLOiBUaGUgb25seSByZWFzb24gd2UgYWxsb3cgYSBudWxsIHNuYXBzaG90IHZlcnNpb24gaXMgc28gdGhhdCB3ZVxuICAgICAgICAvLyBjYW4gc3ludGhlc2l6ZSByZW1vdGUgZXZlbnRzIHdoZW4gd2UgZ2V0IHBlcm1pc3Npb24gZGVuaWVkIGVycm9ycyB3aGlsZVxuICAgICAgICAvLyB0cnlpbmcgdG8gcmVzb2x2ZSB0aGUgc3RhdGUgb2YgYSBsb2NhbGx5IGNhY2hlZCBkb2N1bWVudCB0aGF0IGlzIGluXG4gICAgICAgIC8vIGxpbWJvLlxuICAgICAgICBpZiAodC5kb2N1bWVudFVwZGF0ZXMuZm9yRWFjaCgociA9PiB7XG4gICAgICAgICAgICB0LnJlc29sdmVkTGltYm9Eb2N1bWVudHMuaGFzKHIpICYmIG8ucHVzaChuLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLnVwZGF0ZUxpbWJvRG9jdW1lbnQoZSwgcikpO1xuICAgICAgICB9KSksIFxuICAgICAgICAvLyBFYWNoIGxvb3AgaXRlcmF0aW9uIG9ubHkgYWZmZWN0cyBpdHMgXCJvd25cIiBkb2MsIHNvIGl0J3Mgc2FmZSB0byBnZXQgYWxsXG4gICAgICAgIC8vIHRoZSByZW1vdGUgZG9jdW1lbnRzIGluIGFkdmFuY2UgaW4gYSBzaW5nbGUgY2FsbC5cbiAgICAgICAgby5wdXNoKF9fUFJJVkFURV9wb3B1bGF0ZURvY3VtZW50Q2hhbmdlQnVmZmVyKGUsIHMsIHQuZG9jdW1lbnRVcGRhdGVzKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIF8gPSBlLmNzLCBhID0gZS5scztcbiAgICAgICAgfSkpKSwgIXIuaXNFcXVhbChTbmFwc2hvdFZlcnNpb24ubWluKCkpKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gbi5Rci5nZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKGUpLm5leHQoKHQgPT4gbi5Rci5zZXRUYXJnZXRzTWV0YWRhdGEoZSwgZS5jdXJyZW50U2VxdWVuY2VOdW1iZXIsIHIpKSk7XG4gICAgICAgICAgICBvLnB1c2godCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKG8pLm5leHQoKCgpID0+IHMuYXBwbHkoZSkpKS5uZXh0KCgoKSA9PiBuLmxvY2FsRG9jdW1lbnRzLmdldExvY2FsVmlld09mRG9jdW1lbnRzKGUsIF8sIGEpKSkubmV4dCgoKCkgPT4gXykpO1xuICAgIH0pKS50aGVuKChlID0+IChuLm5zID0gaSwgZSkpKTtcbn1cblxuLyoqXG4gKiBQb3B1bGF0ZXMgZG9jdW1lbnQgY2hhbmdlIGJ1ZmZlciB3aXRoIGRvY3VtZW50cyBmcm9tIGJhY2tlbmQgb3IgYSBidW5kbGUuXG4gKiBSZXR1cm5zIHRoZSBkb2N1bWVudCBjaGFuZ2VzIHJlc3VsdGluZyBmcm9tIGFwcGx5aW5nIHRob3NlIGRvY3VtZW50cywgYW5kXG4gKiBhbHNvIGEgc2V0IG9mIGRvY3VtZW50cyB3aG9zZSBleGlzdGVuY2Ugc3RhdGUgYXJlIGNoYW5nZWQgYXMgYSByZXN1bHQuXG4gKlxuICogQHBhcmFtIHR4biAtIFRyYW5zYWN0aW9uIHRvIHVzZSB0byByZWFkIGV4aXN0aW5nIGRvY3VtZW50cyBmcm9tIHN0b3JhZ2UuXG4gKiBAcGFyYW0gZG9jdW1lbnRCdWZmZXIgLSBEb2N1bWVudCBidWZmZXIgdG8gY29sbGVjdCB0aGUgcmVzdWx0ZWQgY2hhbmdlcyB0byBiZVxuICogICAgICAgIGFwcGxpZWQgdG8gc3RvcmFnZS5cbiAqIEBwYXJhbSBkb2N1bWVudHMgLSBEb2N1bWVudHMgdG8gYmUgYXBwbGllZC5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfcG9wdWxhdGVEb2N1bWVudENoYW5nZUJ1ZmZlcihlLCB0LCBuKSB7XG4gICAgbGV0IHIgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSwgaSA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpO1xuICAgIHJldHVybiBuLmZvckVhY2goKGUgPT4gciA9IHIuYWRkKGUpKSksIHQuZ2V0RW50cmllcyhlLCByKS5uZXh0KChlID0+IHtcbiAgICAgICAgbGV0IHIgPSBfX1BSSVZBVEVfbXV0YWJsZURvY3VtZW50TWFwKCk7XG4gICAgICAgIHJldHVybiBuLmZvckVhY2goKChuLCBzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvID0gZS5nZXQobik7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiBzZWUgaWYgdGhlcmUgaXMgYSBleGlzdGVuY2Ugc3RhdGUgY2hhbmdlIGZvciB0aGlzIGRvY3VtZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgcy5pc0ZvdW5kRG9jdW1lbnQoKSAhPT0gby5pc0ZvdW5kRG9jdW1lbnQoKSAmJiAoaSA9IGkuYWRkKG4pKSwgXG4gICAgICAgICAgICAvLyBOb3RlOiBUaGUgb3JkZXIgb2YgdGhlIHN0ZXBzIGJlbG93IGlzIGltcG9ydGFudCwgc2luY2Ugd2Ugd2FudFxuICAgICAgICAgICAgLy8gdG8gZW5zdXJlIHRoYXQgcmVqZWN0ZWQgbGltYm8gcmVzb2x1dGlvbnMgKHdoaWNoIGZhYnJpY2F0ZVxuICAgICAgICAgICAgLy8gTm9Eb2N1bWVudHMgd2l0aCBTbmFwc2hvdFZlcnNpb24ubWluKCkpIG5ldmVyIGFkZCBkb2N1bWVudHMgdG9cbiAgICAgICAgICAgIC8vIGNhY2hlLlxuICAgICAgICAgICAgcy5pc05vRG9jdW1lbnQoKSAmJiBzLnZlcnNpb24uaXNFcXVhbChTbmFwc2hvdFZlcnNpb24ubWluKCkpID8gKFxuICAgICAgICAgICAgLy8gTm9Eb2N1bWVudHMgd2l0aCBTbmFwc2hvdFZlcnNpb24ubWluKCkgYXJlIHVzZWQgaW4gbWFudWZhY3R1cmVkXG4gICAgICAgICAgICAvLyBldmVudHMuIFdlIHJlbW92ZSB0aGVzZSBkb2N1bWVudHMgZnJvbSBjYWNoZSBzaW5jZSB3ZSBsb3N0XG4gICAgICAgICAgICAvLyBhY2Nlc3MuXG4gICAgICAgICAgICB0LnJlbW92ZUVudHJ5KG4sIHMucmVhZFRpbWUpLCByID0gci5pbnNlcnQobiwgcykpIDogIW8uaXNWYWxpZERvY3VtZW50KCkgfHwgcy52ZXJzaW9uLmNvbXBhcmVUbyhvLnZlcnNpb24pID4gMCB8fCAwID09PSBzLnZlcnNpb24uY29tcGFyZVRvKG8udmVyc2lvbikgJiYgby5oYXNQZW5kaW5nV3JpdGVzID8gKHQuYWRkRW50cnkocyksIFxuICAgICAgICAgICAgciA9IHIuaW5zZXJ0KG4sIHMpKSA6IF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkxvY2FsU3RvcmVcIiwgXCJJZ25vcmluZyBvdXRkYXRlZCB3YXRjaCB1cGRhdGUgZm9yIFwiLCBuLCBcIi4gQ3VycmVudCB2ZXJzaW9uOlwiLCBvLnZlcnNpb24sIFwiIFdhdGNoIHZlcnNpb246XCIsIHMudmVyc2lvbik7XG4gICAgICAgIH0pKSwge1xuICAgICAgICAgICAgY3M6IHIsXG4gICAgICAgICAgICBsczogaVxuICAgICAgICB9O1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBtdXRhdGlvbiBiYXRjaCBhZnRlciB0aGUgcGFzc2VkIGluIGJhdGNoSWQgaW4gdGhlIG11dGF0aW9uIHF1ZXVlXG4gKiBvciBudWxsIGlmIGVtcHR5LlxuICogQHBhcmFtIGFmdGVyQmF0Y2hJZCAtIElmIHByb3ZpZGVkLCB0aGUgYmF0Y2ggdG8gc2VhcmNoIGFmdGVyLlxuICogQHJldHVybnMgVGhlIG5leHQgbXV0YXRpb24gb3IgbnVsbCBpZiB0aGVyZSB3YXNuJ3Qgb25lLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUdldE5leHRNdXRhdGlvbkJhdGNoKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkdldCBuZXh0IG11dGF0aW9uIGJhdGNoXCIsIFwicmVhZG9ubHlcIiwgKGUgPT4gKHZvaWQgMCA9PT0gdCAmJiAodCA9IC0xKSwgXG4gICAgbi5tdXRhdGlvblF1ZXVlLmdldE5leHRNdXRhdGlvbkJhdGNoQWZ0ZXJCYXRjaElkKGUsIHQpKSkpO1xufVxuXG4vKipcbiAqIFJlYWRzIHRoZSBjdXJyZW50IHZhbHVlIG9mIGEgRG9jdW1lbnQgd2l0aCBhIGdpdmVuIGtleSBvciBudWxsIGlmIG5vdFxuICogZm91bmQgLSB1c2VkIGZvciB0ZXN0aW5nLlxuICovXG4vKipcbiAqIEFzc2lnbnMgdGhlIGdpdmVuIHRhcmdldCBhbiBpbnRlcm5hbCBJRCBzbyB0aGF0IGl0cyByZXN1bHRzIGNhbiBiZSBwaW5uZWQgc29cbiAqIHRoZXkgZG9uJ3QgZ2V0IEdDJ2QuIEEgdGFyZ2V0IG11c3QgYmUgYWxsb2NhdGVkIGluIHRoZSBsb2NhbCBzdG9yZSBiZWZvcmVcbiAqIHRoZSBzdG9yZSBjYW4gYmUgdXNlZCB0byBtYW5hZ2UgaXRzIHZpZXcuXG4gKlxuICogQWxsb2NhdGluZyBhbiBhbHJlYWR5IGFsbG9jYXRlZCBgVGFyZ2V0YCB3aWxsIHJldHVybiB0aGUgZXhpc3RpbmcgYFRhcmdldERhdGFgXG4gKiBmb3IgdGhhdCBgVGFyZ2V0YC5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVBbGxvY2F0ZVRhcmdldChlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJBbGxvY2F0ZSB0YXJnZXRcIiwgXCJyZWFkd3JpdGVcIiwgKGUgPT4ge1xuICAgICAgICBsZXQgcjtcbiAgICAgICAgcmV0dXJuIG4uUXIuZ2V0VGFyZ2V0RGF0YShlLCB0KS5uZXh0KChpID0+IGkgPyAoXG4gICAgICAgIC8vIFRoaXMgdGFyZ2V0IGhhcyBiZWVuIGxpc3RlbmVkIHRvIHByZXZpb3VzbHksIHNvIHJldXNlIHRoZVxuICAgICAgICAvLyBwcmV2aW91cyB0YXJnZXRJRC5cbiAgICAgICAgLy8gVE9ETyhtY2cpOiBmcmVzaGVuIGxhc3QgYWNjZXNzZWQgZGF0ZT9cbiAgICAgICAgciA9IGksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHIpKSA6IG4uUXIuYWxsb2NhdGVUYXJnZXRJZChlKS5uZXh0KChpID0+IChyID0gbmV3IFRhcmdldERhdGEodCwgaSwgXCJUYXJnZXRQdXJwb3NlTGlzdGVuXCIgLyogVGFyZ2V0UHVycG9zZS5MaXN0ZW4gKi8gLCBlLmN1cnJlbnRTZXF1ZW5jZU51bWJlciksIFxuICAgICAgICBuLlFyLmFkZFRhcmdldERhdGEoZSwgcikubmV4dCgoKCkgPT4gcikpKSkpKSk7XG4gICAgfSkpLnRoZW4oKGUgPT4ge1xuICAgICAgICAvLyBJZiBNdWx0aS1UYWIgaXMgZW5hYmxlZCwgdGhlIGV4aXN0aW5nIHRhcmdldCBkYXRhIG1heSBiZSBuZXdlciB0aGFuXG4gICAgICAgIC8vIHRoZSBpbi1tZW1vcnkgZGF0YVxuICAgICAgICBjb25zdCByID0gbi5ucy5nZXQoZS50YXJnZXRJZCk7XG4gICAgICAgIHJldHVybiAobnVsbCA9PT0gciB8fCBlLnNuYXBzaG90VmVyc2lvbi5jb21wYXJlVG8oci5zbmFwc2hvdFZlcnNpb24pID4gMCkgJiYgKG4ubnMgPSBuLm5zLmluc2VydChlLnRhcmdldElkLCBlKSwgXG4gICAgICAgIG4ucnMuc2V0KHQsIGUudGFyZ2V0SWQpKSwgZTtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgVGFyZ2V0RGF0YSBhcyBzZWVuIGJ5IHRoZSBMb2NhbFN0b3JlLCBpbmNsdWRpbmcgdXBkYXRlcyB0aGF0IG1heVxuICogaGF2ZSBub3QgeWV0IGJlZW4gcGVyc2lzdGVkIHRvIHRoZSBUYXJnZXRDYWNoZS5cbiAqL1xuLy8gVmlzaWJsZSBmb3IgdGVzdGluZy5cbi8qKlxuICogVW5waW5zIGFsbCB0aGUgZG9jdW1lbnRzIGFzc29jaWF0ZWQgd2l0aCB0aGUgZ2l2ZW4gdGFyZ2V0LiBJZlxuICogYGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhYCBpcyBzZXQgdG8gZmFsc2UgYW5kIEVhZ2VyIEdDIGVuYWJsZWQsIHRoZSBtZXRob2RcbiAqIGRpcmVjdGx5IHJlbW92ZXMgdGhlIGFzc29jaWF0ZWQgdGFyZ2V0IGRhdGEgZnJvbSB0aGUgdGFyZ2V0IGNhY2hlLlxuICpcbiAqIFJlbGVhc2luZyBhIG5vbi1leGlzdGluZyBgVGFyZ2V0YCBpcyBhIG5vLW9wLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IGBrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YWAgaXMgbXVsdGktdGFiIG9ubHkuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZVJlbGVhc2VUYXJnZXQoZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCBpID0gci5ucy5nZXQodCksIHMgPSBuID8gXCJyZWFkd3JpdGVcIiA6IFwicmVhZHdyaXRlLXByaW1hcnlcIjtcbiAgICB0cnkge1xuICAgICAgICBuIHx8IGF3YWl0IHIucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJSZWxlYXNlIHRhcmdldFwiLCBzLCAoZSA9PiByLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLnJlbW92ZVRhcmdldChlLCBpKSkpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgaWYgKCFfX1BSSVZBVEVfaXNJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yKGUpKSB0aHJvdyBlO1xuICAgICAgICAvLyBBbGwgYHJlbGVhc2VUYXJnZXRgIGRvZXMgaXMgcmVjb3JkIHRoZSBmaW5hbCBtZXRhZGF0YSBzdGF0ZSBmb3IgdGhlXG4gICAgICAgIC8vIHRhcmdldCwgYnV0IHdlJ3ZlIGJlZW4gcmVjb3JkaW5nIHRoaXMgcGVyaW9kaWNhbGx5IGR1cmluZyB0YXJnZXRcbiAgICAgICAgLy8gYWN0aXZpdHkuIElmIHdlIGxvc2UgdGhpcyB3cml0ZSB0aGlzIGNvdWxkIGNhdXNlIGEgdmVyeSBzbGlnaHRcbiAgICAgICAgLy8gZGlmZmVyZW5jZSBpbiB0aGUgb3JkZXIgb2YgdGFyZ2V0IGRlbGV0aW9uIGR1cmluZyBHQywgYnV0IHdlXG4gICAgICAgIC8vIGRvbid0IGRlZmluZSBleGFjdCBMUlUgc2VtYW50aWNzIHNvIHRoaXMgaXMgYWNjZXB0YWJsZS5cbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiTG9jYWxTdG9yZVwiLCBgRmFpbGVkIHRvIHVwZGF0ZSBzZXF1ZW5jZSBudW1iZXJzIGZvciB0YXJnZXQgJHt0fTogJHtlfWApO1xuICAgIH1cbiAgICByLm5zID0gci5ucy5yZW1vdmUodCksIHIucnMuZGVsZXRlKGkudGFyZ2V0KTtcbn1cblxuLyoqXG4gKiBSdW5zIHRoZSBzcGVjaWZpZWQgcXVlcnkgYWdhaW5zdCB0aGUgbG9jYWwgc3RvcmUgYW5kIHJldHVybnMgdGhlIHJlc3VsdHMsXG4gKiBwb3RlbnRpYWxseSB0YWtpbmcgYWR2YW50YWdlIG9mIHF1ZXJ5IGRhdGEgZnJvbSBwcmV2aW91cyBleGVjdXRpb25zIChzdWNoXG4gKiBhcyB0aGUgc2V0IG9mIHJlbW90ZSBrZXlzKS5cbiAqXG4gKiBAcGFyYW0gdXNlUHJldmlvdXNSZXN1bHRzIC0gV2hldGhlciByZXN1bHRzIGZyb20gcHJldmlvdXMgZXhlY3V0aW9ucyBjYW5cbiAqIGJlIHVzZWQgdG8gb3B0aW1pemUgdGhpcyBxdWVyeSBleGVjdXRpb24uXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVFeGVjdXRlUXVlcnkoZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIGxldCBpID0gU25hcHNob3RWZXJzaW9uLm1pbigpLCBzID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCk7XG4gICAgcmV0dXJuIHIucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJFeGVjdXRlIHF1ZXJ5XCIsIFwicmVhZHdyaXRlXCIsICgvLyBVc2UgcmVhZHdyaXRlIGluc3RlYWQgb2YgcmVhZG9ubHkgc28gaW5kZXhlcyBjYW4gYmUgY3JlYXRlZFxuICAgIC8vIFVzZSByZWFkd3JpdGUgaW5zdGVhZCBvZiByZWFkb25seSBzbyBpbmRleGVzIGNhbiBiZSBjcmVhdGVkXG4gICAgZSA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUdldFRhcmdldERhdGEoZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgaSA9IHIucnMuZ2V0KG4pO1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBpID8gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoci5ucy5nZXQoaSkpIDogci5Rci5nZXRUYXJnZXREYXRhKHQsIG4pO1xuICAgIH0ociwgZSwgX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQodCkpLm5leHQoKHQgPT4ge1xuICAgICAgICBpZiAodCkgcmV0dXJuIGkgPSB0Lmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24sIHIuUXIuZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQoZSwgdC50YXJnZXRJZCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBzID0gZTtcbiAgICAgICAgfSkpO1xuICAgIH0pKS5uZXh0KCgoKSA9PiByLnRzLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkoZSwgdCwgbiA/IGkgOiBTbmFwc2hvdFZlcnNpb24ubWluKCksIG4gPyBzIDogX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCkpKSkubmV4dCgoZSA9PiAoX19QUklWQVRFX3NldE1heFJlYWRUaW1lKHIsIF9fUFJJVkFURV9xdWVyeUNvbGxlY3Rpb25Hcm91cCh0KSwgZSksIFxuICAgIHtcbiAgICAgICAgZG9jdW1lbnRzOiBlLFxuICAgICAgICBoczogc1xuICAgIH0pKSkpKTtcbn1cblxuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlR2V0Q2FjaGVkVGFyZ2V0KGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgciA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3Qobi5RciksIGkgPSBuLm5zLmdldCh0KTtcbiAgICByZXR1cm4gaSA/IFByb21pc2UucmVzb2x2ZShpLnRhcmdldCkgOiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IHRhcmdldCBkYXRhXCIsIFwicmVhZG9ubHlcIiwgKGUgPT4gci5vdChlLCB0KS5uZXh0KChlID0+IGUgPyBlLnRhcmdldCA6IG51bGwpKSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHNldCBvZiBkb2N1bWVudHMgdGhhdCBoYXZlIGJlZW4gdXBkYXRlZCBzaW5jZSB0aGUgbGFzdCBjYWxsLlxuICogSWYgdGhpcyBpcyB0aGUgZmlyc3QgY2FsbCwgcmV0dXJucyB0aGUgc2V0IG9mIGNoYW5nZXMgc2luY2UgY2xpZW50XG4gKiBpbml0aWFsaXphdGlvbi4gRnVydGhlciBpbnZvY2F0aW9ucyB3aWxsIHJldHVybiBkb2N1bWVudCB0aGF0IGhhdmUgY2hhbmdlZFxuICogc2luY2UgdGhlIHByaW9yIGNhbGwuXG4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5mdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUdldE5ld0RvY3VtZW50Q2hhbmdlcyhlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIHIgPSBuLnNzLmdldCh0KSB8fCBTbmFwc2hvdFZlcnNpb24ubWluKCk7XG4gICAgLy8gR2V0IHRoZSBjdXJyZW50IG1heGltdW0gcmVhZCB0aW1lIGZvciB0aGUgY29sbGVjdGlvbi4gVGhpcyBzaG91bGQgYWx3YXlzXG4gICAgLy8gZXhpc3QsIGJ1dCB0byByZWR1Y2UgdGhlIGNoYW5jZSBmb3IgcmVncmVzc2lvbnMgd2UgZGVmYXVsdCB0b1xuICAgIC8vIFNuYXBzaG90VmVyc2lvbi5NaW4oKVxuICAgIC8vIFRPRE8oaW5kZXhpbmcpOiBDb25zaWRlciByZW1vdmluZyB0aGUgZGVmYXVsdCB2YWx1ZS5cbiAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgbmV3IGRvY3VtZW50IGNoYW5nZXNcIiwgXCJyZWFkb25seVwiLCAoZSA9PiBuLm9zLmdldEFsbEZyb21Db2xsZWN0aW9uR3JvdXAoZSwgdCwgX19QUklWQVRFX25ld0luZGV4T2Zmc2V0U3VjY2Vzc29yRnJvbVJlYWRUaW1lKHIsIC0xKSwgXG4gICAgLyogbGltaXQ9ICovIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSKSkpLnRoZW4oKGUgPT4gKF9fUFJJVkFURV9zZXRNYXhSZWFkVGltZShuLCB0LCBlKSwgXG4gICAgZSkpKTtcbn1cblxuLyoqIFNldHMgdGhlIGNvbGxlY3Rpb24gZ3JvdXAncyBtYXhpbXVtIHJlYWQgdGltZSBmcm9tIHRoZSBnaXZlbiBkb2N1bWVudHMuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuZnVuY3Rpb24gX19QUklWQVRFX3NldE1heFJlYWRUaW1lKGUsIHQsIG4pIHtcbiAgICBsZXQgciA9IGUuc3MuZ2V0KHQpIHx8IFNuYXBzaG90VmVyc2lvbi5taW4oKTtcbiAgICBuLmZvckVhY2goKChlLCB0KSA9PiB7XG4gICAgICAgIHQucmVhZFRpbWUuY29tcGFyZVRvKHIpID4gMCAmJiAociA9IHQucmVhZFRpbWUpO1xuICAgIH0pKSwgZS5zcy5zZXQodCwgcik7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyB0YXJnZXQgdXNpbmcgdGhlIGdpdmVuIGJ1bmRsZSBuYW1lLCB3aGljaCB3aWxsIGJlIHVzZWQgdG9cbiAqIGhvbGQgdGhlIGtleXMgb2YgYWxsIGRvY3VtZW50cyBmcm9tIHRoZSBidW5kbGUgaW4gcXVlcnktZG9jdW1lbnQgbWFwcGluZ3MuXG4gKiBUaGlzIGVuc3VyZXMgdGhhdCB0aGUgbG9hZGVkIGRvY3VtZW50cyBkbyBub3QgZ2V0IGdhcmJhZ2UgY29sbGVjdGVkXG4gKiByaWdodCBhd2F5LlxuICovXG4vKipcbiAqIEFwcGxpZXMgdGhlIGRvY3VtZW50cyBmcm9tIGEgYnVuZGxlIHRvIHRoZSBcImdyb3VuZC1zdGF0ZVwiIChyZW1vdGUpXG4gKiBkb2N1bWVudHMuXG4gKlxuICogTG9jYWxEb2N1bWVudHMgYXJlIHJlLWNhbGN1bGF0ZWQgaWYgdGhlcmUgYXJlIHJlbWFpbmluZyBtdXRhdGlvbnMgaW4gdGhlXG4gKiBxdWV1ZS5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVBcHBseUJ1bmRsZWREb2N1bWVudHMoZSwgdCwgbiwgcikge1xuICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIGxldCBzID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCksIG8gPSBfX1BSSVZBVEVfbXV0YWJsZURvY3VtZW50TWFwKCk7XG4gICAgZm9yIChjb25zdCBlIG9mIG4pIHtcbiAgICAgICAgY29uc3QgbiA9IHQuUHMoZS5tZXRhZGF0YS5uYW1lKTtcbiAgICAgICAgZS5kb2N1bWVudCAmJiAocyA9IHMuYWRkKG4pKTtcbiAgICAgICAgY29uc3QgciA9IHQuSXMoZSk7XG4gICAgICAgIHIuc2V0UmVhZFRpbWUodC5UcyhlLm1ldGFkYXRhLnJlYWRUaW1lKSksIG8gPSBvLmluc2VydChuLCByKTtcbiAgICB9XG4gICAgY29uc3QgXyA9IGkub3MubmV3Q2hhbmdlQnVmZmVyKHtcbiAgICAgICAgdHJhY2tSZW1vdmFsczogITBcbiAgICB9KSwgYSA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlQWxsb2NhdGVUYXJnZXQoaSwgZnVuY3Rpb24gX19QUklWQVRFX3VtYnJlbGxhVGFyZ2V0KGUpIHtcbiAgICAgICAgLy8gSXQgaXMgT0sgdGhhdCB0aGUgcGF0aCB1c2VkIGZvciB0aGUgcXVlcnkgaXMgbm90IHZhbGlkLCBiZWNhdXNlIHRoaXMgd2lsbFxuICAgICAgICAvLyBub3QgYmUgcmVhZCBhbmQgcXVlcmllZC5cbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9xdWVyeVRvVGFyZ2V0KF9fUFJJVkFURV9uZXdRdWVyeUZvclBhdGgoUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcoYF9fYnVuZGxlX18vZG9jcy8ke2V9YCkpKTtcbiAgICB9KHIpKTtcbiAgICAvLyBBbGxvY2F0ZXMgYSB0YXJnZXQgdG8gaG9sZCBhbGwgZG9jdW1lbnQga2V5cyBmcm9tIHRoZSBidW5kbGUsIHN1Y2ggdGhhdFxuICAgIC8vIHRoZXkgd2lsbCBub3QgZ2V0IGdhcmJhZ2UgY29sbGVjdGVkIHJpZ2h0IGF3YXkuXG4gICAgICAgIHJldHVybiBpLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQXBwbHkgYnVuZGxlIGRvY3VtZW50c1wiLCBcInJlYWR3cml0ZVwiLCAoZSA9PiBfX1BSSVZBVEVfcG9wdWxhdGVEb2N1bWVudENoYW5nZUJ1ZmZlcihlLCBfLCBvKS5uZXh0KCh0ID0+IChfLmFwcGx5KGUpLCBcbiAgICB0KSkpLm5leHQoKHQgPT4gaS5Rci5yZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZChlLCBhLnRhcmdldElkKS5uZXh0KCgoKSA9PiBpLlFyLmFkZE1hdGNoaW5nS2V5cyhlLCBzLCBhLnRhcmdldElkKSkpLm5leHQoKCgpID0+IGkubG9jYWxEb2N1bWVudHMuZ2V0TG9jYWxWaWV3T2ZEb2N1bWVudHMoZSwgdC5jcywgdC5scykpKS5uZXh0KCgoKSA9PiB0LmNzKSkpKSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBwcm9taXNlIG9mIGEgYm9vbGVhbiB0byBpbmRpY2F0ZSBpZiB0aGUgZ2l2ZW4gYnVuZGxlIGhhcyBhbHJlYWR5XG4gKiBiZWVuIGxvYWRlZCBhbmQgdGhlIGNyZWF0ZSB0aW1lIGlzIG5ld2VyIHRoYW4gdGhlIGN1cnJlbnQgbG9hZGluZyBidW5kbGUuXG4gKi9cbi8qKlxuICogU2F2ZXMgdGhlIGdpdmVuIGBOYW1lZFF1ZXJ5YCB0byBsb2NhbCBwZXJzaXN0ZW5jZS5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVTYXZlTmFtZWRRdWVyeShlLCB0LCBuID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCkpIHtcbiAgICAvLyBBbGxvY2F0ZSBhIHRhcmdldCBmb3IgdGhlIG5hbWVkIHF1ZXJ5IHN1Y2ggdGhhdCBpdCBjYW4gYmUgcmVzdW1lZFxuICAgIC8vIGZyb20gYXNzb2NpYXRlZCByZWFkIHRpbWUgaWYgdXNlcnMgdXNlIGl0IHRvIGxpc3Rlbi5cbiAgICAvLyBOT1RFOiB0aGlzIGFsc28gbWVhbnMgaWYgbm8gY29ycmVzcG9uZGluZyB0YXJnZXQgZXhpc3RzLCB0aGUgbmV3IHRhcmdldFxuICAgIC8vIHdpbGwgcmVtYWluIGFjdGl2ZSBhbmQgd2lsbCBub3QgZ2V0IGNvbGxlY3RlZCwgdW5sZXNzIHVzZXJzIGhhcHBlbiB0b1xuICAgIC8vIHVubGlzdGVuIHRoZSBxdWVyeSBzb21laG93LlxuICAgIGNvbnN0IHIgPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUFsbG9jYXRlVGFyZ2V0KGUsIF9fUFJJVkFURV9xdWVyeVRvVGFyZ2V0KF9fUFJJVkFURV9mcm9tQnVuZGxlZFF1ZXJ5KHQuYnVuZGxlZFF1ZXJ5KSkpLCBpID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICByZXR1cm4gaS5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIlNhdmUgbmFtZWQgcXVlcnlcIiwgXCJyZWFkd3JpdGVcIiwgKGUgPT4ge1xuICAgICAgICBjb25zdCBzID0gX19QUklWQVRFX2Zyb21WZXJzaW9uKHQucmVhZFRpbWUpO1xuICAgICAgICAvLyBTaW1wbHkgc2F2ZSB0aGUgcXVlcnkgaXRzZWxmIGlmIGl0IGlzIG9sZGVyIHRoYW4gd2hhdCB0aGUgU0RLIGFscmVhZHlcbiAgICAgICAgLy8gaGFzLlxuICAgICAgICAgICAgICAgIGlmIChyLnNuYXBzaG90VmVyc2lvbi5jb21wYXJlVG8ocykgPj0gMCkgcmV0dXJuIGkuJHIuc2F2ZU5hbWVkUXVlcnkoZSwgdCk7XG4gICAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyB0YXJnZXQgZGF0YSBiZWNhdXNlIHRoZSBxdWVyeSBmcm9tIHRoZSBidW5kbGUgaXMgbmV3ZXIuXG4gICAgICAgICAgICAgICAgY29uc3QgbyA9IHIud2l0aFJlc3VtZVRva2VuKEJ5dGVTdHJpbmcuRU1QVFlfQllURV9TVFJJTkcsIHMpO1xuICAgICAgICByZXR1cm4gaS5ucyA9IGkubnMuaW5zZXJ0KG8udGFyZ2V0SWQsIG8pLCBpLlFyLnVwZGF0ZVRhcmdldERhdGEoZSwgbykubmV4dCgoKCkgPT4gaS5Rci5yZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZChlLCByLnRhcmdldElkKSkpLm5leHQoKCgpID0+IGkuUXIuYWRkTWF0Y2hpbmdLZXlzKGUsIG4sIHIudGFyZ2V0SWQpKSkubmV4dCgoKCkgPT4gaS4kci5zYXZlTmFtZWRRdWVyeShlLCB0KSkpO1xuICAgIH0pKTtcbn1cblxuLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciBhIGNsaWVudCBzdGF0ZSBpbiBXZWJTdG9yYWdlICovXG5mdW5jdGlvbiBjcmVhdGVXZWJTdG9yYWdlQ2xpZW50U3RhdGVLZXkoZSwgdCkge1xuICAgIHJldHVybiBgZmlyZXN0b3JlX2NsaWVudHNfJHtlfV8ke3R9YDtcbn1cblxuLy8gVGhlIGZvcm1hdCBvZiB0aGUgV2ViU3RvcmFnZSBrZXkgdGhhdCBzdG9yZXMgdGhlIG11dGF0aW9uIHN0YXRlIGlzOlxuLy8gICAgIGZpcmVzdG9yZV9tdXRhdGlvbnNfPHBlcnNpc3RlbmNlX3ByZWZpeD5fPGJhdGNoX2lkPlxuLy8gICAgIChmb3IgdW5hdXRoZW50aWNhdGVkIHVzZXJzKVxuLy8gb3I6IGZpcmVzdG9yZV9tdXRhdGlvbnNfPHBlcnNpc3RlbmNlX3ByZWZpeD5fPGJhdGNoX2lkPl88dXNlcl91aWQ+XG5cbi8vICd1c2VyX3VpZCcgaXMgbGFzdCB0byBhdm9pZCBuZWVkaW5nIHRvIGVzY2FwZSAnXycgY2hhcmFjdGVycyB0aGF0IGl0IG1pZ2h0XG4vLyBjb250YWluLlxuLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciBhIG11dGF0aW9uIGJhdGNoIGluIFdlYlN0b3JhZ2UgKi9cbmZ1bmN0aW9uIGNyZWF0ZVdlYlN0b3JhZ2VNdXRhdGlvbkJhdGNoS2V5KGUsIHQsIG4pIHtcbiAgICBsZXQgciA9IGBmaXJlc3RvcmVfbXV0YXRpb25zXyR7ZX1fJHtufWA7XG4gICAgcmV0dXJuIHQuaXNBdXRoZW50aWNhdGVkKCkgJiYgKHIgKz0gYF8ke3QudWlkfWApLCByO1xufVxuXG4vLyBUaGUgZm9ybWF0IG9mIHRoZSBXZWJTdG9yYWdlIGtleSB0aGF0IHN0b3JlcyBhIHF1ZXJ5IHRhcmdldCdzIG1ldGFkYXRhIGlzOlxuLy8gICAgIGZpcmVzdG9yZV90YXJnZXRzXzxwZXJzaXN0ZW5jZV9wcmVmaXg+Xzx0YXJnZXRfaWQ+XG4vKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIGEgcXVlcnkgc3RhdGUgaW4gV2ViU3RvcmFnZSAqL1xuZnVuY3Rpb24gY3JlYXRlV2ViU3RvcmFnZVF1ZXJ5VGFyZ2V0TWV0YWRhdGFLZXkoZSwgdCkge1xuICAgIHJldHVybiBgZmlyZXN0b3JlX3RhcmdldHNfJHtlfV8ke3R9YDtcbn1cblxuLy8gVGhlIFdlYlN0b3JhZ2UgcHJlZml4IHRoYXQgc3RvcmVzIHRoZSBwcmltYXJ5IHRhYidzIG9ubGluZSBzdGF0ZS4gVGhlXG4vLyBmb3JtYXQgb2YgdGhlIGtleSBpczpcbi8vICAgICBmaXJlc3RvcmVfb25saW5lX3N0YXRlXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XG4vKipcbiAqIEhvbGRzIHRoZSBzdGF0ZSBvZiBhIG11dGF0aW9uIGJhdGNoLCBpbmNsdWRpbmcgaXRzIHVzZXIgSUQsIGJhdGNoIElEIGFuZFxuICogd2hldGhlciB0aGUgYmF0Y2ggaXMgJ3BlbmRpbmcnLCAnYWNrbm93bGVkZ2VkJyBvciAncmVqZWN0ZWQnLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXG5jbGFzcyBfX1BSSVZBVEVfTXV0YXRpb25NZXRhZGF0YSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgcikge1xuICAgICAgICB0aGlzLnVzZXIgPSBlLCB0aGlzLmJhdGNoSWQgPSB0LCB0aGlzLnN0YXRlID0gbiwgdGhpcy5lcnJvciA9IHI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIE11dGF0aW9uTWV0YWRhdGEgZnJvbSBpdHMgSlNPTiByZXByZXNlbnRhdGlvbiBpbiBXZWJTdG9yYWdlLlxuICAgICAqIExvZ3MgYSB3YXJuaW5nIGFuZCByZXR1cm5zIG51bGwgaWYgdGhlIGZvcm1hdCBvZiB0aGUgZGF0YSBpcyBub3QgdmFsaWQuXG4gICAgICovICAgIHN0YXRpYyBFcyhlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBKU09OLnBhcnNlKG4pO1xuICAgICAgICBsZXQgaSwgcyA9IFwib2JqZWN0XCIgPT0gdHlwZW9mIHIgJiYgLTEgIT09IFsgXCJwZW5kaW5nXCIsIFwiYWNrbm93bGVkZ2VkXCIsIFwicmVqZWN0ZWRcIiBdLmluZGV4T2Yoci5zdGF0ZSkgJiYgKHZvaWQgMCA9PT0gci5lcnJvciB8fCBcIm9iamVjdFwiID09IHR5cGVvZiByLmVycm9yKTtcbiAgICAgICAgcmV0dXJuIHMgJiYgci5lcnJvciAmJiAocyA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIHIuZXJyb3IubWVzc2FnZSAmJiBcInN0cmluZ1wiID09IHR5cGVvZiByLmVycm9yLmNvZGUsIFxuICAgICAgICBzICYmIChpID0gbmV3IEZpcmVzdG9yZUVycm9yKHIuZXJyb3IuY29kZSwgci5lcnJvci5tZXNzYWdlKSkpLCBzID8gbmV3IF9fUFJJVkFURV9NdXRhdGlvbk1ldGFkYXRhKGUsIHQsIHIuc3RhdGUsIGkpIDogKF9fUFJJVkFURV9sb2dFcnJvcihcIlNoYXJlZENsaWVudFN0YXRlXCIsIGBGYWlsZWQgdG8gcGFyc2UgbXV0YXRpb24gc3RhdGUgZm9yIElEICcke3R9JzogJHtufWApLCBcbiAgICAgICAgbnVsbCk7XG4gICAgfVxuICAgIGRzKCkge1xuICAgICAgICBjb25zdCBlID0ge1xuICAgICAgICAgICAgc3RhdGU6IHRoaXMuc3RhdGUsXG4gICAgICAgICAgICB1cGRhdGVUaW1lTXM6IERhdGUubm93KClcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3IgJiYgKGUuZXJyb3IgPSB7XG4gICAgICAgICAgICBjb2RlOiB0aGlzLmVycm9yLmNvZGUsXG4gICAgICAgICAgICBtZXNzYWdlOiB0aGlzLmVycm9yLm1lc3NhZ2VcbiAgICAgICAgfSksIEpTT04uc3RyaW5naWZ5KGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIb2xkcyB0aGUgc3RhdGUgb2YgYSBxdWVyeSB0YXJnZXQsIGluY2x1ZGluZyBpdHMgdGFyZ2V0IElEIGFuZCB3aGV0aGVyIHRoZVxuICogdGFyZ2V0IGlzICdub3QtY3VycmVudCcsICdjdXJyZW50JyBvciAncmVqZWN0ZWQnLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXG5jbGFzcyBfX1BSSVZBVEVfUXVlcnlUYXJnZXRNZXRhZGF0YSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICB0aGlzLnRhcmdldElkID0gZSwgdGhpcy5zdGF0ZSA9IHQsIHRoaXMuZXJyb3IgPSBuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBRdWVyeVRhcmdldE1ldGFkYXRhIGZyb20gaXRzIEpTT04gcmVwcmVzZW50YXRpb24gaW4gV2ViU3RvcmFnZS5cbiAgICAgKiBMb2dzIGEgd2FybmluZyBhbmQgcmV0dXJucyBudWxsIGlmIHRoZSBmb3JtYXQgb2YgdGhlIGRhdGEgaXMgbm90IHZhbGlkLlxuICAgICAqLyAgICBzdGF0aWMgRXMoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gSlNPTi5wYXJzZSh0KTtcbiAgICAgICAgbGV0IHIsIGkgPSBcIm9iamVjdFwiID09IHR5cGVvZiBuICYmIC0xICE9PSBbIFwibm90LWN1cnJlbnRcIiwgXCJjdXJyZW50XCIsIFwicmVqZWN0ZWRcIiBdLmluZGV4T2Yobi5zdGF0ZSkgJiYgKHZvaWQgMCA9PT0gbi5lcnJvciB8fCBcIm9iamVjdFwiID09IHR5cGVvZiBuLmVycm9yKTtcbiAgICAgICAgcmV0dXJuIGkgJiYgbi5lcnJvciAmJiAoaSA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIG4uZXJyb3IubWVzc2FnZSAmJiBcInN0cmluZ1wiID09IHR5cGVvZiBuLmVycm9yLmNvZGUsIFxuICAgICAgICBpICYmIChyID0gbmV3IEZpcmVzdG9yZUVycm9yKG4uZXJyb3IuY29kZSwgbi5lcnJvci5tZXNzYWdlKSkpLCBpID8gbmV3IF9fUFJJVkFURV9RdWVyeVRhcmdldE1ldGFkYXRhKGUsIG4uc3RhdGUsIHIpIDogKF9fUFJJVkFURV9sb2dFcnJvcihcIlNoYXJlZENsaWVudFN0YXRlXCIsIGBGYWlsZWQgdG8gcGFyc2UgdGFyZ2V0IHN0YXRlIGZvciBJRCAnJHtlfSc6ICR7dH1gKSwgXG4gICAgICAgIG51bGwpO1xuICAgIH1cbiAgICBkcygpIHtcbiAgICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgICAgIHN0YXRlOiB0aGlzLnN0YXRlLFxuICAgICAgICAgICAgdXBkYXRlVGltZU1zOiBEYXRlLm5vdygpXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLmVycm9yICYmIChlLmVycm9yID0ge1xuICAgICAgICAgICAgY29kZTogdGhpcy5lcnJvci5jb2RlLFxuICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5lcnJvci5tZXNzYWdlXG4gICAgICAgIH0pLCBKU09OLnN0cmluZ2lmeShlKTtcbiAgICB9XG59XG5cbi8qKlxuICogVGhpcyBjbGFzcyByZXByZXNlbnRzIHRoZSBpbW11dGFibGUgQ2xpZW50U3RhdGUgZm9yIGEgY2xpZW50IHJlYWQgZnJvbVxuICogV2ViU3RvcmFnZSwgY29udGFpbmluZyB0aGUgbGlzdCBvZiBhY3RpdmUgcXVlcnkgdGFyZ2V0cy5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfUmVtb3RlQ2xpZW50U3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IGUsIHRoaXMuYWN0aXZlVGFyZ2V0SWRzID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgUmVtb3RlQ2xpZW50U3RhdGUgZnJvbSB0aGUgSlNPTiByZXByZXNlbnRhdGlvbiBpbiBXZWJTdG9yYWdlLlxuICAgICAqIExvZ3MgYSB3YXJuaW5nIGFuZCByZXR1cm5zIG51bGwgaWYgdGhlIGZvcm1hdCBvZiB0aGUgZGF0YSBpcyBub3QgdmFsaWQuXG4gICAgICovICAgIHN0YXRpYyBFcyhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBKU09OLnBhcnNlKHQpO1xuICAgICAgICBsZXQgciA9IFwib2JqZWN0XCIgPT0gdHlwZW9mIG4gJiYgbi5hY3RpdmVUYXJnZXRJZHMgaW5zdGFuY2VvZiBBcnJheSwgaSA9IF9fUFJJVkFURV90YXJnZXRJZFNldCgpO1xuICAgICAgICBmb3IgKGxldCBlID0gMDsgciAmJiBlIDwgbi5hY3RpdmVUYXJnZXRJZHMubGVuZ3RoOyArK2UpIHIgPSBpc1NhZmVJbnRlZ2VyKG4uYWN0aXZlVGFyZ2V0SWRzW2VdKSwgXG4gICAgICAgIGkgPSBpLmFkZChuLmFjdGl2ZVRhcmdldElkc1tlXSk7XG4gICAgICAgIHJldHVybiByID8gbmV3IF9fUFJJVkFURV9SZW1vdGVDbGllbnRTdGF0ZShlLCBpKSA6IChfX1BSSVZBVEVfbG9nRXJyb3IoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBgRmFpbGVkIHRvIHBhcnNlIGNsaWVudCBkYXRhIGZvciBpbnN0YW5jZSAnJHtlfSc6ICR7dH1gKSwgXG4gICAgICAgIG51bGwpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUaGlzIGNsYXNzIHJlcHJlc2VudHMgdGhlIG9ubGluZSBzdGF0ZSBmb3IgYWxsIGNsaWVudHMgcGFydGljaXBhdGluZyBpblxuICogbXVsdGktdGFiLiBUaGUgb25saW5lIHN0YXRlIGlzIG9ubHkgd3JpdHRlbiB0byBieSB0aGUgcHJpbWFyeSBjbGllbnQsIGFuZFxuICogdXNlZCBpbiBzZWNvbmRhcnkgY2xpZW50cyB0byB1cGRhdGUgdGhlaXIgcXVlcnkgdmlld3MuXG4gKi8gY2xhc3MgX19QUklWQVRFX1NoYXJlZE9ubGluZVN0YXRlIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMuY2xpZW50SWQgPSBlLCB0aGlzLm9ubGluZVN0YXRlID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgU2hhcmVkT25saW5lU3RhdGUgZnJvbSBpdHMgSlNPTiByZXByZXNlbnRhdGlvbiBpbiBXZWJTdG9yYWdlLlxuICAgICAqIExvZ3MgYSB3YXJuaW5nIGFuZCByZXR1cm5zIG51bGwgaWYgdGhlIGZvcm1hdCBvZiB0aGUgZGF0YSBpcyBub3QgdmFsaWQuXG4gICAgICovICAgIHN0YXRpYyBFcyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBKU09OLnBhcnNlKGUpO1xuICAgICAgICByZXR1cm4gXCJvYmplY3RcIiA9PSB0eXBlb2YgdCAmJiAtMSAhPT0gWyBcIlVua25vd25cIiwgXCJPbmxpbmVcIiwgXCJPZmZsaW5lXCIgXS5pbmRleE9mKHQub25saW5lU3RhdGUpICYmIFwic3RyaW5nXCIgPT0gdHlwZW9mIHQuY2xpZW50SWQgPyBuZXcgX19QUklWQVRFX1NoYXJlZE9ubGluZVN0YXRlKHQuY2xpZW50SWQsIHQub25saW5lU3RhdGUpIDogKF9fUFJJVkFURV9sb2dFcnJvcihcIlNoYXJlZENsaWVudFN0YXRlXCIsIGBGYWlsZWQgdG8gcGFyc2Ugb25saW5lIHN0YXRlOiAke2V9YCksIFxuICAgICAgICBudWxsKTtcbiAgICB9XG59XG5cbi8qKlxuICogTWV0YWRhdGEgc3RhdGUgb2YgdGhlIGxvY2FsIGNsaWVudC4gVW5saWtlIGBSZW1vdGVDbGllbnRTdGF0ZWAsIHRoaXMgY2xhc3MgaXNcbiAqIG11dGFibGUgYW5kIGtlZXBzIHRyYWNrIG9mIGFsbCBwZW5kaW5nIG11dGF0aW9ucywgd2hpY2ggYWxsb3dzIHVzIHRvXG4gKiB1cGRhdGUgdGhlIHJhbmdlIG9mIHBlbmRpbmcgbXV0YXRpb24gYmF0Y2ggSURzIGFzIG5ldyBtdXRhdGlvbnMgYXJlIGFkZGVkIG9yXG4gKiByZW1vdmVkLlxuICpcbiAqIFRoZSBkYXRhIGluIGBMb2NhbENsaWVudFN0YXRlYCBpcyBub3QgcmVhZCBmcm9tIFdlYlN0b3JhZ2UgYW5kIGluc3RlYWRcbiAqIHVwZGF0ZWQgdmlhIGl0cyBpbnN0YW5jZSBtZXRob2RzLiBUaGUgdXBkYXRlZCBzdGF0ZSBjYW4gYmUgc2VyaWFsaXplZCB2aWFcbiAqIGB0b1dlYlN0b3JhZ2VKU09OKClgLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuY2xhc3MgX19QUklWQVRFX0xvY2FsQ2xpZW50U3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmFjdGl2ZVRhcmdldElkcyA9IF9fUFJJVkFURV90YXJnZXRJZFNldCgpO1xuICAgIH1cbiAgICBBcyhlKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlVGFyZ2V0SWRzID0gdGhpcy5hY3RpdmVUYXJnZXRJZHMuYWRkKGUpO1xuICAgIH1cbiAgICBScyhlKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlVGFyZ2V0SWRzID0gdGhpcy5hY3RpdmVUYXJnZXRJZHMuZGVsZXRlKGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGlzIGVudHJ5IGludG8gYSBKU09OLWVuY29kZWQgZm9ybWF0IHdlIGNhbiB1c2UgZm9yIFdlYlN0b3JhZ2UuXG4gICAgICogRG9lcyBub3QgZW5jb2RlIGBjbGllbnRJZGAgYXMgaXQgaXMgcGFydCBvZiB0aGUga2V5IGluIFdlYlN0b3JhZ2UuXG4gICAgICovICAgIGRzKCkge1xuICAgICAgICBjb25zdCBlID0ge1xuICAgICAgICAgICAgYWN0aXZlVGFyZ2V0SWRzOiB0aGlzLmFjdGl2ZVRhcmdldElkcy50b0FycmF5KCksXG4gICAgICAgICAgICB1cGRhdGVUaW1lTXM6IERhdGUubm93KClcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlYCB1c2VzIFdlYlN0b3JhZ2UgKHdpbmRvdy5sb2NhbFN0b3JhZ2UpIGFzIHRoZVxuICogYmFja2luZyBzdG9yZSBmb3IgdGhlIFNoYXJlZENsaWVudFN0YXRlLiBJdCBrZWVwcyB0cmFjayBvZiBhbGwgYWN0aXZlXG4gKiBjbGllbnRzIGFuZCBzdXBwb3J0cyBtb2RpZmljYXRpb25zIG9mIHRoZSBsb2NhbCBjbGllbnQncyBkYXRhLlxuICovIGNsYXNzIF9fUFJJVkFURV9XZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgdGhpcy53aW5kb3cgPSBlLCB0aGlzLm9pID0gdCwgdGhpcy5wZXJzaXN0ZW5jZUtleSA9IG4sIHRoaXMuVnMgPSByLCB0aGlzLnN5bmNFbmdpbmUgPSBudWxsLCBcbiAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIgPSBudWxsLCB0aGlzLnNlcXVlbmNlTnVtYmVySGFuZGxlciA9IG51bGwsIHRoaXMuZnMgPSB0aGlzLmdzLmJpbmQodGhpcyksIFxuICAgICAgICB0aGlzLnBzID0gbmV3IFNvcnRlZE1hcChfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvciksIHRoaXMuc3RhcnRlZCA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhcHR1cmVzIFdlYlN0b3JhZ2UgZXZlbnRzIHRoYXQgb2NjdXIgYmVmb3JlIGBzdGFydCgpYCBpcyBjYWxsZWQuIFRoZXNlXG4gICAgICAgICAqIGV2ZW50cyBhcmUgcmVwbGF5ZWQgb25jZSBgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlYCBpcyBzdGFydGVkLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy55cyA9IFtdO1xuICAgICAgICAvLyBFc2NhcGUgdGhlIHNwZWNpYWwgY2hhcmFjdGVycyBtZW50aW9uZWQgaGVyZTpcbiAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9HdWlkZS9SZWd1bGFyX0V4cHJlc3Npb25zXG4gICAgICAgIGNvbnN0IHMgPSBuLnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXF1cXFxcXS9nLCBcIlxcXFwkJlwiKTtcbiAgICAgICAgdGhpcy5zdG9yYWdlID0gdGhpcy53aW5kb3cubG9jYWxTdG9yYWdlLCB0aGlzLmN1cnJlbnRVc2VyID0gaSwgdGhpcy53cyA9IGNyZWF0ZVdlYlN0b3JhZ2VDbGllbnRTdGF0ZUtleSh0aGlzLnBlcnNpc3RlbmNlS2V5LCB0aGlzLlZzKSwgXG4gICAgICAgIHRoaXMuU3MgPSBcbiAgICAgICAgLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciB0aGUgY3VycmVudCBzZXF1ZW5jZSBudW1iZXIuICovXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVdlYlN0b3JhZ2VTZXF1ZW5jZU51bWJlcktleShlKSB7XG4gICAgICAgICAgICByZXR1cm4gYGZpcmVzdG9yZV9zZXF1ZW5jZV9udW1iZXJfJHtlfWA7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKHRoaXMucGVyc2lzdGVuY2VLZXkpLCB0aGlzLnBzID0gdGhpcy5wcy5pbnNlcnQodGhpcy5WcywgbmV3IF9fUFJJVkFURV9Mb2NhbENsaWVudFN0YXRlKSwgXG4gICAgICAgIHRoaXMuYnMgPSBuZXcgUmVnRXhwKGBeZmlyZXN0b3JlX2NsaWVudHNfJHtzfV8oW15fXSopJGApLCB0aGlzLkRzID0gbmV3IFJlZ0V4cChgXmZpcmVzdG9yZV9tdXRhdGlvbnNfJHtzfV8oXFxcXGQrKSg/Ol8oLiopKT8kYCksIFxuICAgICAgICB0aGlzLkNzID0gbmV3IFJlZ0V4cChgXmZpcmVzdG9yZV90YXJnZXRzXyR7c31fKFxcXFxkKykkYCksIHRoaXMudnMgPSBcbiAgICAgICAgLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciB0aGUgb25saW5lIHN0YXRlIG9mIHRoZSBwcmltYXJ5IHRhYi4gKi9cbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlV2ViU3RvcmFnZU9ubGluZVN0YXRlS2V5KGUpIHtcbiAgICAgICAgICAgIHJldHVybiBgZmlyZXN0b3JlX29ubGluZV9zdGF0ZV8ke2V9YDtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGUgV2ViU3RvcmFnZSBwcmVmaXggdGhhdCBwbGF5cyBhcyBhIGV2ZW50IHRvIGluZGljYXRlIHRoZSByZW1vdGUgZG9jdW1lbnRzXG4gICAgICAgIC8vIG1pZ2h0IGhhdmUgY2hhbmdlZCBkdWUgdG8gc29tZSBzZWNvbmRhcnkgdGFicyBsb2FkaW5nIGEgYnVuZGxlLlxuICAgICAgICAvLyBmb3JtYXQgb2YgdGhlIGtleSBpczpcbiAgICAgICAgLy8gICAgIGZpcmVzdG9yZV9idW5kbGVfbG9hZGVkX3YyXzxwZXJzaXN0ZW5jZUtleT5cbiAgICAgICAgLy8gVGhlIHZlcnNpb24gZW5kaW5nIHdpdGggXCJ2MlwiIHN0b3JlcyB0aGUgbGlzdCBvZiBtb2RpZmllZCBjb2xsZWN0aW9uIGdyb3Vwcy5cbiAgICAgICAgKHRoaXMucGVyc2lzdGVuY2VLZXkpLCB0aGlzLkZzID0gZnVuY3Rpb24gY3JlYXRlQnVuZGxlTG9hZGVkS2V5KGUpIHtcbiAgICAgICAgICAgIHJldHVybiBgZmlyZXN0b3JlX2J1bmRsZV9sb2FkZWRfdjJfJHtlfWA7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhlIFdlYlN0b3JhZ2Uga2V5IHByZWZpeCBmb3IgdGhlIGtleSB0aGF0IHN0b3JlcyB0aGUgbGFzdCBzZXF1ZW5jZSBudW1iZXIgYWxsb2NhdGVkLiBUaGUga2V5XG4gICAgICAgIC8vIGxvb2tzIGxpa2UgJ2ZpcmVzdG9yZV9zZXF1ZW5jZV9udW1iZXJfPHBlcnNpc3RlbmNlX3ByZWZpeD4nLlxuICAgICAgICAodGhpcy5wZXJzaXN0ZW5jZUtleSksIFxuICAgICAgICAvLyBSYXRoZXIgdGhhbiBhZGRpbmcgdGhlIHN0b3JhZ2Ugb2JzZXJ2ZXIgZHVyaW5nIHN0YXJ0KCksIHdlIGFkZCB0aGVcbiAgICAgICAgLy8gc3RvcmFnZSBvYnNlcnZlciBkdXJpbmcgaW5pdGlhbGl6YXRpb24uIFRoaXMgZW5zdXJlcyB0aGF0IHdlIGNvbGxlY3RcbiAgICAgICAgLy8gZXZlbnRzIGJlZm9yZSBvdGhlciBjb21wb25lbnRzIHBvcHVsYXRlIHRoZWlyIGluaXRpYWwgc3RhdGUgKGR1cmluZyB0aGVpclxuICAgICAgICAvLyByZXNwZWN0aXZlIHN0YXJ0KCkgY2FsbHMpLiBPdGhlcndpc2UsIHdlIG1pZ2h0IGZvciBleGFtcGxlIG1pc3MgYVxuICAgICAgICAvLyBtdXRhdGlvbiB0aGF0IGlzIGFkZGVkIGFmdGVyIExvY2FsU3RvcmUncyBzdGFydCgpIHByb2Nlc3NlZCB0aGUgZXhpc3RpbmdcbiAgICAgICAgLy8gbXV0YXRpb25zIGJ1dCBiZWZvcmUgd2Ugb2JzZXJ2ZSBXZWJTdG9yYWdlIGV2ZW50cy5cbiAgICAgICAgdGhpcy53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInN0b3JhZ2VcIiwgdGhpcy5mcyk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zICd0cnVlJyBpZiBXZWJTdG9yYWdlIGlzIGF2YWlsYWJsZSBpbiB0aGUgY3VycmVudCBlbnZpcm9ubWVudC4gKi8gICAgc3RhdGljIEQoZSkge1xuICAgICAgICByZXR1cm4gISghZSB8fCAhZS5sb2NhbFN0b3JhZ2UpO1xuICAgIH1cbiAgICBhc3luYyBzdGFydCgpIHtcbiAgICAgICAgLy8gUmV0cmlldmUgdGhlIGxpc3Qgb2YgZXhpc3RpbmcgY2xpZW50cyB0byBiYWNrZmlsbCB0aGUgZGF0YSBpblxuICAgICAgICAvLyBTaGFyZWRDbGllbnRTdGF0ZS5cbiAgICAgICAgY29uc3QgZSA9IGF3YWl0IHRoaXMuc3luY0VuZ2luZS5CaSgpO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICAgICAgaWYgKHQgPT09IHRoaXMuVnMpIGNvbnRpbnVlO1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuZ2V0SXRlbShjcmVhdGVXZWJTdG9yYWdlQ2xpZW50U3RhdGVLZXkodGhpcy5wZXJzaXN0ZW5jZUtleSwgdCkpO1xuICAgICAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX1JlbW90ZUNsaWVudFN0YXRlLkVzKHQsIGUpO1xuICAgICAgICAgICAgICAgIG4gJiYgKHRoaXMucHMgPSB0aGlzLnBzLmluc2VydChuLmNsaWVudElkLCBuKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5NcygpO1xuICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBhbiBleGlzdGluZyBvbmxpbmUgc3RhdGUgYW5kIGNhbGwgdGhlIGNhbGxiYWNrIGhhbmRsZXJcbiAgICAgICAgLy8gaWYgYXBwbGljYWJsZS5cbiAgICAgICAgY29uc3QgdCA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKHRoaXMudnMpO1xuICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMueHModCk7XG4gICAgICAgICAgICBlICYmIHRoaXMuT3MoZSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMueXMpIHRoaXMuZ3MoZSk7XG4gICAgICAgIHRoaXMueXMgPSBbXSwgXG4gICAgICAgIC8vIFJlZ2lzdGVyIGEgd2luZG93IHVubG9hZCBob29rIHRvIHJlbW92ZSB0aGUgY2xpZW50IG1ldGFkYXRhIGVudHJ5IGZyb21cbiAgICAgICAgLy8gV2ViU3RvcmFnZSBldmVuIGlmIGBzaHV0ZG93bigpYCB3YXMgbm90IGNhbGxlZC5cbiAgICAgICAgdGhpcy53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBhZ2VoaWRlXCIsICgoKSA9PiB0aGlzLnNodXRkb3duKCkpKSwgdGhpcy5zdGFydGVkID0gITA7XG4gICAgfVxuICAgIHdyaXRlU2VxdWVuY2VOdW1iZXIoZSkge1xuICAgICAgICB0aGlzLnNldEl0ZW0odGhpcy5TcywgSlNPTi5zdHJpbmdpZnkoZSkpO1xuICAgIH1cbiAgICBnZXRBbGxBY3RpdmVRdWVyeVRhcmdldHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLk5zKHRoaXMucHMpO1xuICAgIH1cbiAgICBpc0FjdGl2ZVF1ZXJ5VGFyZ2V0KGUpIHtcbiAgICAgICAgbGV0IHQgPSAhMTtcbiAgICAgICAgcmV0dXJuIHRoaXMucHMuZm9yRWFjaCgoKG4sIHIpID0+IHtcbiAgICAgICAgICAgIHIuYWN0aXZlVGFyZ2V0SWRzLmhhcyhlKSAmJiAodCA9ICEwKTtcbiAgICAgICAgfSkpLCB0O1xuICAgIH1cbiAgICBhZGRQZW5kaW5nTXV0YXRpb24oZSkge1xuICAgICAgICB0aGlzLkxzKGUsIFwicGVuZGluZ1wiKTtcbiAgICB9XG4gICAgdXBkYXRlTXV0YXRpb25TdGF0ZShlLCB0LCBuKSB7XG4gICAgICAgIHRoaXMuTHMoZSwgdCwgbiksIFxuICAgICAgICAvLyBPbmNlIGEgZmluYWwgbXV0YXRpb24gcmVzdWx0IGlzIG9ic2VydmVkIGJ5IG90aGVyIGNsaWVudHMsIHRoZXkgbm8gbG9uZ2VyXG4gICAgICAgIC8vIGFjY2VzcyB0aGUgbXV0YXRpb24ncyBtZXRhZGF0YSBlbnRyeS4gU2luY2UgV2ViU3RvcmFnZSByZXBsYXlzIGV2ZW50c1xuICAgICAgICAvLyBpbiBvcmRlciwgaXQgaXMgc2FmZSB0byBkZWxldGUgdGhlIGVudHJ5IHJpZ2h0IGFmdGVyIHVwZGF0aW5nIGl0LlxuICAgICAgICB0aGlzLkJzKGUpO1xuICAgIH1cbiAgICBhZGRMb2NhbFF1ZXJ5VGFyZ2V0KGUpIHtcbiAgICAgICAgbGV0IHQgPSBcIm5vdC1jdXJyZW50XCI7XG4gICAgICAgIC8vIExvb2t1cCBhbiBleGlzdGluZyBxdWVyeSBzdGF0ZSBpZiB0aGUgdGFyZ2V0IElEIHdhcyBhbHJlYWR5IHJlZ2lzdGVyZWRcbiAgICAgICAgLy8gYnkgYW5vdGhlciB0YWJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0FjdGl2ZVF1ZXJ5VGFyZ2V0KGUpKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0oY3JlYXRlV2ViU3RvcmFnZVF1ZXJ5VGFyZ2V0TWV0YWRhdGFLZXkodGhpcy5wZXJzaXN0ZW5jZUtleSwgZSkpO1xuICAgICAgICAgICAgaWYgKG4pIHtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gX19QUklWQVRFX1F1ZXJ5VGFyZ2V0TWV0YWRhdGEuRXMoZSwgbik7XG4gICAgICAgICAgICAgICAgciAmJiAodCA9IHIuc3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmtzLkFzKGUpLCB0aGlzLk1zKCksIHQ7XG4gICAgfVxuICAgIHJlbW92ZUxvY2FsUXVlcnlUYXJnZXQoZSkge1xuICAgICAgICB0aGlzLmtzLlJzKGUpLCB0aGlzLk1zKCk7XG4gICAgfVxuICAgIGlzTG9jYWxRdWVyeVRhcmdldChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmtzLmFjdGl2ZVRhcmdldElkcy5oYXMoZSk7XG4gICAgfVxuICAgIGNsZWFyUXVlcnlTdGF0ZShlKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlSXRlbShjcmVhdGVXZWJTdG9yYWdlUXVlcnlUYXJnZXRNZXRhZGF0YUtleSh0aGlzLnBlcnNpc3RlbmNlS2V5LCBlKSk7XG4gICAgfVxuICAgIHVwZGF0ZVF1ZXJ5U3RhdGUoZSwgdCwgbikge1xuICAgICAgICB0aGlzLnFzKGUsIHQsIG4pO1xuICAgIH1cbiAgICBoYW5kbGVVc2VyQ2hhbmdlKGUsIHQsIG4pIHtcbiAgICAgICAgdC5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHRoaXMuQnMoZSk7XG4gICAgICAgIH0pKSwgdGhpcy5jdXJyZW50VXNlciA9IGUsIG4uZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFkZFBlbmRpbmdNdXRhdGlvbihlKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzZXRPbmxpbmVTdGF0ZShlKSB7XG4gICAgICAgIHRoaXMuUXMoZSk7XG4gICAgfVxuICAgIG5vdGlmeUJ1bmRsZUxvYWRlZChlKSB7XG4gICAgICAgIHRoaXMuS3MoZSk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICB0aGlzLnN0YXJ0ZWQgJiYgKHRoaXMud2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdG9yYWdlXCIsIHRoaXMuZnMpLCB0aGlzLnJlbW92ZUl0ZW0odGhpcy53cyksIFxuICAgICAgICB0aGlzLnN0YXJ0ZWQgPSAhMSk7XG4gICAgfVxuICAgIGdldEl0ZW0oZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0oZSk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfbG9nRGVidWcoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBcIlJFQURcIiwgZSwgdCksIHQ7XG4gICAgfVxuICAgIHNldEl0ZW0oZSwgdCkge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBcIlNFVFwiLCBlLCB0KSwgdGhpcy5zdG9yYWdlLnNldEl0ZW0oZSwgdCk7XG4gICAgfVxuICAgIHJlbW92ZUl0ZW0oZSkge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBcIlJFTU9WRVwiLCBlKSwgdGhpcy5zdG9yYWdlLnJlbW92ZUl0ZW0oZSk7XG4gICAgfVxuICAgIGdzKGUpIHtcbiAgICAgICAgLy8gTm90ZTogVGhlIGZ1bmN0aW9uIGlzIHR5cGVkIHRvIHRha2UgRXZlbnQgdG8gYmUgaW50ZXJmYWNlLWNvbXBhdGlibGUgd2l0aFxuICAgICAgICAvLyBgV2luZG93LmFkZEV2ZW50TGlzdGVuZXJgLlxuICAgICAgICBjb25zdCB0ID0gZTtcbiAgICAgICAgaWYgKHQuc3RvcmFnZUFyZWEgPT09IHRoaXMuc3RvcmFnZSkge1xuICAgICAgICAgICAgaWYgKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlNoYXJlZENsaWVudFN0YXRlXCIsIFwiRVZFTlRcIiwgdC5rZXksIHQubmV3VmFsdWUpLCB0LmtleSA9PT0gdGhpcy53cykgcmV0dXJuIHZvaWQgX19QUklWQVRFX2xvZ0Vycm9yKFwiUmVjZWl2ZWQgV2ViU3RvcmFnZSBub3RpZmljYXRpb24gZm9yIGxvY2FsIGNoYW5nZS4gQW5vdGhlciBjbGllbnQgbWlnaHQgaGF2ZSBnYXJiYWdlLWNvbGxlY3RlZCBvdXIgc3RhdGVcIik7XG4gICAgICAgICAgICB0aGlzLm9pLmVucXVldWVSZXRyeWFibGUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGFydGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSB0LmtleSkgaWYgKHRoaXMuYnMudGVzdCh0LmtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IHQubmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy4kcyh0LmtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuVXMoZSwgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuV3ModC5rZXksIHQubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlKSByZXR1cm4gdGhpcy5VcyhlLmNsaWVudElkLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLkRzLnRlc3QodC5rZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gdC5uZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLkdzKHQua2V5LCB0Lm5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSkgcmV0dXJuIHRoaXMuenMoZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5Dcy50ZXN0KHQua2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IHQubmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy5qcyh0LmtleSwgdC5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUpIHJldHVybiB0aGlzLkhzKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHQua2V5ID09PSB0aGlzLnZzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gdC5uZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLnhzKHQubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlKSByZXR1cm4gdGhpcy5PcyhlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0LmtleSA9PT0gdGhpcy5Tcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tV2ViU3RvcmFnZVNlcXVlbmNlTnVtYmVyKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdCA9IF9fUFJJVkFURV9MaXN0ZW5TZXF1ZW5jZS5vZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBlKSB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gSlNPTi5wYXJzZShlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoXCJudW1iZXJcIiA9PSB0eXBlb2YgbiksIHQgPSBuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX19QUklWQVRFX2xvZ0Vycm9yKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgXCJGYWlsZWQgdG8gcmVhZCBzZXF1ZW5jZSBudW1iZXIgZnJvbSBXZWJTdG9yYWdlXCIsIGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICogYE1lbW9yeVNoYXJlZENsaWVudFN0YXRlYCBpcyBhIHNpbXBsZSBpbXBsZW1lbnRhdGlvbiBvZiBTaGFyZWRDbGllbnRTdGF0ZSBmb3JcbiAqIGNsaWVudHMgdXNpbmcgbWVtb3J5IHBlcnNpc3RlbmNlLiBUaGUgc3RhdGUgaW4gdGhpcyBjbGFzcyByZW1haW5zIGZ1bGx5XG4gKiBpc29sYXRlZCBhbmQgbm8gc3luY2hyb25pemF0aW9uIGlzIHBlcmZvcm1lZC5cbiAqLyAodC5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlICE9PSBfX1BSSVZBVEVfTGlzdGVuU2VxdWVuY2Uub2UgJiYgdGhpcy5zZXF1ZW5jZU51bWJlckhhbmRsZXIoZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodC5rZXkgPT09IHRoaXMuRnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLkpzKHQubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoZS5tYXAoKGUgPT4gdGhpcy5zeW5jRW5naW5lLllzKGUpKSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHRoaXMueXMucHVzaCh0KTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQga3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBzLmdldCh0aGlzLlZzKTtcbiAgICB9XG4gICAgTXMoKSB7XG4gICAgICAgIHRoaXMuc2V0SXRlbSh0aGlzLndzLCB0aGlzLmtzLmRzKCkpO1xuICAgIH1cbiAgICBMcyhlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgX19QUklWQVRFX011dGF0aW9uTWV0YWRhdGEodGhpcy5jdXJyZW50VXNlciwgZSwgdCwgbiksIGkgPSBjcmVhdGVXZWJTdG9yYWdlTXV0YXRpb25CYXRjaEtleSh0aGlzLnBlcnNpc3RlbmNlS2V5LCB0aGlzLmN1cnJlbnRVc2VyLCBlKTtcbiAgICAgICAgdGhpcy5zZXRJdGVtKGksIHIuZHMoKSk7XG4gICAgfVxuICAgIEJzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGNyZWF0ZVdlYlN0b3JhZ2VNdXRhdGlvbkJhdGNoS2V5KHRoaXMucGVyc2lzdGVuY2VLZXksIHRoaXMuY3VycmVudFVzZXIsIGUpO1xuICAgICAgICB0aGlzLnJlbW92ZUl0ZW0odCk7XG4gICAgfVxuICAgIFFzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHtcbiAgICAgICAgICAgIGNsaWVudElkOiB0aGlzLlZzLFxuICAgICAgICAgICAgb25saW5lU3RhdGU6IGVcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zdG9yYWdlLnNldEl0ZW0odGhpcy52cywgSlNPTi5zdHJpbmdpZnkodCkpO1xuICAgIH1cbiAgICBxcyhlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBjcmVhdGVXZWJTdG9yYWdlUXVlcnlUYXJnZXRNZXRhZGF0YUtleSh0aGlzLnBlcnNpc3RlbmNlS2V5LCBlKSwgaSA9IG5ldyBfX1BSSVZBVEVfUXVlcnlUYXJnZXRNZXRhZGF0YShlLCB0LCBuKTtcbiAgICAgICAgdGhpcy5zZXRJdGVtKHIsIGkuZHMoKSk7XG4gICAgfVxuICAgIEtzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IEpTT04uc3RyaW5naWZ5KEFycmF5LmZyb20oZSkpO1xuICAgICAgICB0aGlzLnNldEl0ZW0odGhpcy5GcywgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIGNsaWVudCBzdGF0ZSBrZXkgaW4gV2ViU3RvcmFnZS4gUmV0dXJucyBudWxsIGlmIHRoZSBrZXkgZG9lcyBub3RcbiAgICAgKiBtYXRjaCB0aGUgZXhwZWN0ZWQga2V5IGZvcm1hdC5cbiAgICAgKi8gICAgJHMoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5icy5leGVjKGUpO1xuICAgICAgICByZXR1cm4gdCA/IHRbMV0gOiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBjbGllbnQgc3RhdGUgaW4gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlIGNvdWxkIG5vdFxuICAgICAqIGJlIHBhcnNlZC5cbiAgICAgKi8gICAgV3MoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy4kcyhlKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9SZW1vdGVDbGllbnRTdGF0ZS5FcyhuLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgbXV0YXRpb24gYmF0Y2ggc3RhdGUgaW4gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlXG4gICAgICogY291bGQgbm90IGJlIHBhcnNlZC5cbiAgICAgKi8gICAgR3MoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5Ecy5leGVjKGUpLCByID0gTnVtYmVyKG5bMV0pLCBpID0gdm9pZCAwICE9PSBuWzJdID8gblsyXSA6IG51bGw7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfTXV0YXRpb25NZXRhZGF0YS5FcyhuZXcgVXNlcihpKSwgciwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIHF1ZXJ5IHRhcmdldCBzdGF0ZSBmcm9tIFdlYlN0b3JhZ2UuIFJldHVybnMgJ251bGwnIGlmIHRoZSB2YWx1ZVxuICAgICAqIGNvdWxkIG5vdCBiZSBwYXJzZWQuXG4gICAgICovICAgIGpzKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuQ3MuZXhlYyhlKSwgciA9IE51bWJlcihuWzFdKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9RdWVyeVRhcmdldE1ldGFkYXRhLkVzKHIsIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYW4gb25saW5lIHN0YXRlIGZyb20gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlXG4gICAgICogY291bGQgbm90IGJlIHBhcnNlZC5cbiAgICAgKi8gICAgeHMoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX1NoYXJlZE9ubGluZVN0YXRlLkVzKGUpO1xuICAgIH1cbiAgICBKcyhlKSB7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGUpO1xuICAgIH1cbiAgICBhc3luYyB6cyhlKSB7XG4gICAgICAgIGlmIChlLnVzZXIudWlkID09PSB0aGlzLmN1cnJlbnRVc2VyLnVpZCkgcmV0dXJuIHRoaXMuc3luY0VuZ2luZS5acyhlLmJhdGNoSWQsIGUuc3RhdGUsIGUuZXJyb3IpO1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBgSWdub3JpbmcgbXV0YXRpb24gZm9yIG5vbi1hY3RpdmUgdXNlciAke2UudXNlci51aWR9YCk7XG4gICAgfVxuICAgIEhzKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3luY0VuZ2luZS5YcyhlLnRhcmdldElkLCBlLnN0YXRlLCBlLmVycm9yKTtcbiAgICB9XG4gICAgVXMoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdCA/IHRoaXMucHMuaW5zZXJ0KGUsIHQpIDogdGhpcy5wcy5yZW1vdmUoZSksIHIgPSB0aGlzLk5zKHRoaXMucHMpLCBpID0gdGhpcy5OcyhuKSwgcyA9IFtdLCBvID0gW107XG4gICAgICAgIHJldHVybiBpLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgci5oYXMoZSkgfHwgcy5wdXNoKGUpO1xuICAgICAgICB9KSksIHIuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICBpLmhhcyhlKSB8fCBvLnB1c2goZSk7XG4gICAgICAgIH0pKSwgdGhpcy5zeW5jRW5naW5lLmVvKHMsIG8pLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucHMgPSBuO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIE9zKGUpIHtcbiAgICAgICAgLy8gV2UgY2hlY2sgd2hldGhlciB0aGUgY2xpZW50IHRoYXQgd3JvdGUgdGhpcyBvbmxpbmUgc3RhdGUgaXMgc3RpbGwgYWN0aXZlXG4gICAgICAgIC8vIGJ5IGNvbXBhcmluZyBpdHMgY2xpZW50IElEIHRvIHRoZSBsaXN0IG9mIGNsaWVudHMga2VwdCBhY3RpdmUgaW5cbiAgICAgICAgLy8gSW5kZXhlZERiLiBJZiBhIGNsaWVudCBkb2VzIG5vdCB1cGRhdGUgdGhlaXIgSW5kZXhlZERiIGNsaWVudCBzdGF0ZVxuICAgICAgICAvLyB3aXRoaW4gNSBzZWNvbmRzLCBpdCBpcyBjb25zaWRlcmVkIGluYWN0aXZlIGFuZCB3ZSBkb24ndCBlbWl0IGFuIG9ubGluZVxuICAgICAgICAvLyBzdGF0ZSBldmVudC5cbiAgICAgICAgdGhpcy5wcy5nZXQoZS5jbGllbnRJZCkgJiYgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIoZS5vbmxpbmVTdGF0ZSk7XG4gICAgfVxuICAgIE5zKGUpIHtcbiAgICAgICAgbGV0IHQgPSBfX1BSSVZBVEVfdGFyZ2V0SWRTZXQoKTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIHQgPSB0LnVuaW9uV2l0aChuLmFjdGl2ZVRhcmdldElkcyk7XG4gICAgICAgIH0pKSwgdDtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9NZW1vcnlTaGFyZWRDbGllbnRTdGF0ZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMubm8gPSBuZXcgX19QUklWQVRFX0xvY2FsQ2xpZW50U3RhdGUsIHRoaXMucm8gPSB7fSwgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIgPSBudWxsLCBcbiAgICAgICAgdGhpcy5zZXF1ZW5jZU51bWJlckhhbmRsZXIgPSBudWxsO1xuICAgIH1cbiAgICBhZGRQZW5kaW5nTXV0YXRpb24oZSkge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgdXBkYXRlTXV0YXRpb25TdGF0ZShlLCB0LCBuKSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbiAgICBhZGRMb2NhbFF1ZXJ5VGFyZ2V0KGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm8uQXMoZSksIHRoaXMucm9bZV0gfHwgXCJub3QtY3VycmVudFwiO1xuICAgIH1cbiAgICB1cGRhdGVRdWVyeVN0YXRlKGUsIHQsIG4pIHtcbiAgICAgICAgdGhpcy5yb1tlXSA9IHQ7XG4gICAgfVxuICAgIHJlbW92ZUxvY2FsUXVlcnlUYXJnZXQoZSkge1xuICAgICAgICB0aGlzLm5vLlJzKGUpO1xuICAgIH1cbiAgICBpc0xvY2FsUXVlcnlUYXJnZXQoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5uby5hY3RpdmVUYXJnZXRJZHMuaGFzKGUpO1xuICAgIH1cbiAgICBjbGVhclF1ZXJ5U3RhdGUoZSkge1xuICAgICAgICBkZWxldGUgdGhpcy5yb1tlXTtcbiAgICB9XG4gICAgZ2V0QWxsQWN0aXZlUXVlcnlUYXJnZXRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5uby5hY3RpdmVUYXJnZXRJZHM7XG4gICAgfVxuICAgIGlzQWN0aXZlUXVlcnlUYXJnZXQoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5uby5hY3RpdmVUYXJnZXRJZHMuaGFzKGUpO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm8gPSBuZXcgX19QUklWQVRFX0xvY2FsQ2xpZW50U3RhdGUsIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBoYW5kbGVVc2VyQ2hhbmdlKGUsIHQsIG4pIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIHNldE9ubGluZVN0YXRlKGUpIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIHNodXRkb3duKCkge31cbiAgICB3cml0ZVNlcXVlbmNlTnVtYmVyKGUpIHt9XG4gICAgbm90aWZ5QnVuZGxlTG9hZGVkKGUpIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfTm9vcENvbm5lY3Rpdml0eU1vbml0b3Ige1xuICAgIGlvKGUpIHtcbiAgICAgICAgLy8gTm8tb3AuXG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICAvLyBOby1vcC5cbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBSZWZlcmVuY2VzIHRvIGB3aW5kb3dgIGFyZSBndWFyZGVkIGJ5IEJyb3dzZXJDb25uZWN0aXZpdHlNb25pdG9yLmlzQXZhaWxhYmxlKClcbi8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtZ2xvYmFscyAqL1xuLyoqXG4gKiBCcm93c2VyIGltcGxlbWVudGF0aW9uIG9mIENvbm5lY3Rpdml0eU1vbml0b3IuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9Ccm93c2VyQ29ubmVjdGl2aXR5TW9uaXRvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuc28gPSAoKSA9PiB0aGlzLm9vKCksIHRoaXMuX28gPSAoKSA9PiB0aGlzLmFvKCksIHRoaXMudW8gPSBbXSwgdGhpcy5jbygpO1xuICAgIH1cbiAgICBpbyhlKSB7XG4gICAgICAgIHRoaXMudW8ucHVzaChlKTtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwib25saW5lXCIsIHRoaXMuc28pLCB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm9mZmxpbmVcIiwgdGhpcy5fbyk7XG4gICAgfVxuICAgIGNvKCkge1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9ubGluZVwiLCB0aGlzLnNvKSwgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvZmZsaW5lXCIsIHRoaXMuX28pO1xuICAgIH1cbiAgICBvbygpIHtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiQ29ubmVjdGl2aXR5TW9uaXRvclwiLCBcIk5ldHdvcmsgY29ubmVjdGl2aXR5IGNoYW5nZWQ6IEFWQUlMQUJMRVwiKTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMudW8pIGUoMCAvKiBOZXR3b3JrU3RhdHVzLkFWQUlMQUJMRSAqLyk7XG4gICAgfVxuICAgIGFvKCkge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJDb25uZWN0aXZpdHlNb25pdG9yXCIsIFwiTmV0d29yayBjb25uZWN0aXZpdHkgY2hhbmdlZDogVU5BVkFJTEFCTEVcIik7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLnVvKSBlKDEgLyogTmV0d29ya1N0YXR1cy5VTkFWQUlMQUJMRSAqLyk7XG4gICAgfVxuICAgIC8vIFRPRE8oY2hlbmJyaWFuKTogQ29uc2lkZXIgcGFzc2luZyBpbiB3aW5kb3cgZWl0aGVyIGludG8gdGhpcyBjb21wb25lbnQgb3JcbiAgICAvLyBoZXJlIGZvciB0ZXN0aW5nIHZpYSBGYWtlV2luZG93LlxuICAgIC8qKiBDaGVja3MgdGhhdCBhbGwgdXNlZCBhdHRyaWJ1dGVzIG9mIHdpbmRvdyBhcmUgYXZhaWxhYmxlLiAqL1xuICAgIHN0YXRpYyBEKCkge1xuICAgICAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2Ygd2luZG93ICYmIHZvaWQgMCAhPT0gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgJiYgdm9pZCAwICE9PSB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcjtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRoZSB2YWx1ZSByZXR1cm5lZCBmcm9tIHRoZSBtb3N0IHJlY2VudCBpbnZvY2F0aW9uIG9mXG4gKiBgZ2VuZXJhdGVVbmlxdWVEZWJ1Z0lkKClgLCBvciBudWxsIGlmIGl0IGhhcyBuZXZlciBiZWVuIGludm9rZWQuXG4gKi8gbGV0IFZlID0gbnVsbDtcblxuLyoqXG4gKiBHZW5lcmF0ZXMgYW5kIHJldHVybnMgYW4gaW5pdGlhbCB2YWx1ZSBmb3IgYGxhc3RVbmlxdWVEZWJ1Z0lkYC5cbiAqXG4gKiBUaGUgcmV0dXJuZWQgdmFsdWUgaXMgcmFuZG9tbHkgc2VsZWN0ZWQgZnJvbSBhIHJhbmdlIG9mIGludGVnZXJzIHRoYXQgYXJlXG4gKiByZXByZXNlbnRlZCBhcyA4IGhleGFkZWNpbWFsIGRpZ2l0cy4gVGhpcyBtZWFucyB0aGF0ICh3aXRoaW4gcmVhc29uKSBhbnlcbiAqIG51bWJlcnMgZ2VuZXJhdGVkIGJ5IGluY3JlbWVudGluZyB0aGUgcmV0dXJuZWQgbnVtYmVyIGJ5IDEgd2lsbCBhbHNvIGJlXG4gKiByZXByZXNlbnRlZCBieSA4IGhleGFkZWNpbWFsIGRpZ2l0cy4gVGhpcyBsZWFkcyB0byBhbGwgXCJJRHNcIiBoYXZpbmcgdGhlIHNhbWVcbiAqIGxlbmd0aCB3aGVuIGNvbnZlcnRlZCB0byBhIGhleGFkZWNpbWFsIHN0cmluZywgbWFraW5nIHJlYWRpbmcgbG9ncyBjb250YWluaW5nXG4gKiB0aGVzZSBJRHMgZWFzaWVyIHRvIGZvbGxvdy4gQW5kIHNpbmNlIHRoZSByZXR1cm4gdmFsdWUgaXMgcmFuZG9tbHkgc2VsZWN0ZWRcbiAqIGl0IHdpbGwgaGVscCB0byBkaWZmZXJlbnRpYXRlIGJldHdlZW4gbG9ncyBmcm9tIGRpZmZlcmVudCBleGVjdXRpb25zLlxuICovXG4vKipcbiAqIEdlbmVyYXRlcyBhbmQgcmV0dXJucyBhIHVuaXF1ZSBJRCBhcyBhIGhleGFkZWNpbWFsIHN0cmluZy5cbiAqXG4gKiBUaGUgcmV0dXJuZWQgSUQgaXMgaW50ZW5kZWQgdG8gYmUgdXNlZCBpbiBkZWJ1ZyBsb2dnaW5nIG1lc3NhZ2VzIHRvIGhlbHBcbiAqIGNvcnJlbGF0ZSBsb2cgbWVzc2FnZXMgdGhhdCBtYXkgYmUgc3BhdGlhbGx5IHNlcGFyYXRlZCBpbiB0aGUgbG9ncywgYnV0XG4gKiBsb2dpY2FsbHkgcmVsYXRlZC4gRm9yIGV4YW1wbGUsIGEgbmV0d29yayBjb25uZWN0aW9uIGNvdWxkIGluY2x1ZGUgdGhlIHNhbWVcbiAqIFwiZGVidWcgSURcIiBzdHJpbmcgaW4gYWxsIG9mIGl0cyBsb2cgbWVzc2FnZXMgdG8gaGVscCB0cmFjZSBhIHNwZWNpZmljXG4gKiBjb25uZWN0aW9uIG92ZXIgdGltZS5cbiAqXG4gKiBAcmV0dXJuIHRoZSAxMC1jaGFyYWN0ZXIgZ2VuZXJhdGVkIElEIChlLmcuIFwiMHhhMWIyYzNkNFwiKS5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2dlbmVyYXRlVW5pcXVlRGVidWdJZCgpIHtcbiAgICByZXR1cm4gbnVsbCA9PT0gVmUgPyBWZSA9IGZ1bmN0aW9uIF9fUFJJVkFURV9nZW5lcmF0ZUluaXRpYWxVbmlxdWVEZWJ1Z0lkKCkge1xuICAgICAgICByZXR1cm4gMjY4NDM1NDU2ICsgTWF0aC5yb3VuZCgyMTQ3NDgzNjQ4ICogTWF0aC5yYW5kb20oKSk7XG4gICAgfSgpIDogVmUrKywgXCIweFwiICsgVmUudG9TdHJpbmcoMTYpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBtZSA9IHtcbiAgICBCYXRjaEdldERvY3VtZW50czogXCJiYXRjaEdldFwiLFxuICAgIENvbW1pdDogXCJjb21taXRcIixcbiAgICBSdW5RdWVyeTogXCJydW5RdWVyeVwiLFxuICAgIFJ1bkFnZ3JlZ2F0aW9uUXVlcnk6IFwicnVuQWdncmVnYXRpb25RdWVyeVwiXG59O1xuXG4vKipcbiAqIE1hcHMgUlBDIG5hbWVzIHRvIHRoZSBjb3JyZXNwb25kaW5nIFJFU1QgZW5kcG9pbnQgbmFtZS5cbiAqXG4gKiBXZSB1c2UgYXJyYXkgbm90YXRpb24gdG8gYXZvaWQgbWFuZ2xpbmcuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFByb3ZpZGVzIGEgc2ltcGxlIGhlbHBlciBjbGFzcyB0aGF0IGltcGxlbWVudHMgdGhlIFN0cmVhbSBpbnRlcmZhY2UgdG9cbiAqIGJyaWRnZSB0byBvdGhlciBpbXBsZW1lbnRhdGlvbnMgdGhhdCBhcmUgc3RyZWFtcyBidXQgZG8gbm90IGltcGxlbWVudCB0aGVcbiAqIGludGVyZmFjZS4gVGhlIHN0cmVhbSBjYWxsYmFja3MgYXJlIGludm9rZWQgd2l0aCB0aGUgY2FsbE9uLi4uIG1ldGhvZHMuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9TdHJlYW1CcmlkZ2Uge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5sbyA9IGUubG8sIHRoaXMuaG8gPSBlLmhvO1xuICAgIH1cbiAgICBQbyhlKSB7XG4gICAgICAgIHRoaXMuSW8gPSBlO1xuICAgIH1cbiAgICBUbyhlKSB7XG4gICAgICAgIHRoaXMuRW8gPSBlO1xuICAgIH1cbiAgICBBbyhlKSB7XG4gICAgICAgIHRoaXMuUm8gPSBlO1xuICAgIH1cbiAgICBvbk1lc3NhZ2UoZSkge1xuICAgICAgICB0aGlzLlZvID0gZTtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuaG8oKTtcbiAgICB9XG4gICAgc2VuZChlKSB7XG4gICAgICAgIHRoaXMubG8oZSk7XG4gICAgfVxuICAgIG1vKCkge1xuICAgICAgICB0aGlzLklvKCk7XG4gICAgfVxuICAgIGZvKCkge1xuICAgICAgICB0aGlzLkVvKCk7XG4gICAgfVxuICAgIHBvKGUpIHtcbiAgICAgICAgdGhpcy5SbyhlKTtcbiAgICB9XG4gICAgeW8oZSkge1xuICAgICAgICB0aGlzLlZvKGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgZmUgPSBcIldlYkNoYW5uZWxDb25uZWN0aW9uXCI7XG5cbmNsYXNzIF9fUFJJVkFURV9XZWJDaGFubmVsQ29ubmVjdGlvbiBleHRlbmRzIFxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBhbGwgUmVzdC1iYXNlZCBjb25uZWN0aW9ucyB0byB0aGUgYmFja2VuZCAoV2ViQ2hhbm5lbCBhbmRcbiAqIEhUVFApLlxuICovXG5jbGFzcyBfX1BSSVZBVEVfUmVzdENvbm5lY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5kYXRhYmFzZUluZm8gPSBlLCB0aGlzLmRhdGFiYXNlSWQgPSBlLmRhdGFiYXNlSWQ7XG4gICAgICAgIGNvbnN0IHQgPSBlLnNzbCA/IFwiaHR0cHNcIiA6IFwiaHR0cFwiLCBuID0gZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuZGF0YWJhc2VJZC5wcm9qZWN0SWQpLCByID0gZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuZGF0YWJhc2VJZC5kYXRhYmFzZSk7XG4gICAgICAgIHRoaXMud28gPSB0ICsgXCI6Ly9cIiArIGUuaG9zdCwgdGhpcy5TbyA9IGBwcm9qZWN0cy8ke259L2RhdGFiYXNlcy8ke3J9YCwgdGhpcy5ibyA9IFwiKGRlZmF1bHQpXCIgPT09IHRoaXMuZGF0YWJhc2VJZC5kYXRhYmFzZSA/IGBwcm9qZWN0X2lkPSR7bn1gIDogYHByb2plY3RfaWQ9JHtufSZkYXRhYmFzZV9pZD0ke3J9YDtcbiAgICB9XG4gICAgZ2V0IERvKCkge1xuICAgICAgICAvLyBCb3RoIGBpbnZva2VSUEMoKWAgYW5kIGBpbnZva2VTdHJlYW1pbmdSUEMoKWAgdXNlIHRoZWlyIGBwYXRoYCBhcmd1bWVudHMgdG8gZGV0ZXJtaW5lXG4gICAgICAgIC8vIHdoZXJlIHRvIHJ1biB0aGUgcXVlcnksIGFuZCBleHBlY3QgdGhlIGByZXF1ZXN0YCB0byBOT1Qgc3BlY2lmeSB0aGUgXCJwYXRoXCIuXG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgQ28oZSwgdCwgbiwgciwgaSkge1xuICAgICAgICBjb25zdCBzID0gX19QUklWQVRFX2dlbmVyYXRlVW5pcXVlRGVidWdJZCgpLCBvID0gdGhpcy52byhlLCB0LnRvVXJpRW5jb2RlZFN0cmluZygpKTtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiUmVzdENvbm5lY3Rpb25cIiwgYFNlbmRpbmcgUlBDICcke2V9JyAke3N9OmAsIG8sIG4pO1xuICAgICAgICBjb25zdCBfID0ge1xuICAgICAgICAgICAgXCJnb29nbGUtY2xvdWQtcmVzb3VyY2UtcHJlZml4XCI6IHRoaXMuU28sXG4gICAgICAgICAgICBcIngtZ29vZy1yZXF1ZXN0LXBhcmFtc1wiOiB0aGlzLmJvXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLkZvKF8sIHIsIGkpLCB0aGlzLk1vKGUsIG8sIF8sIG4pLnRoZW4oKHQgPT4gKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlJlc3RDb25uZWN0aW9uXCIsIGBSZWNlaXZlZCBSUEMgJyR7ZX0nICR7c306IGAsIHQpLCBcbiAgICAgICAgdCkpLCAodCA9PiB7XG4gICAgICAgICAgICB0aHJvdyBfX1BSSVZBVEVfbG9nV2FybihcIlJlc3RDb25uZWN0aW9uXCIsIGBSUEMgJyR7ZX0nICR7c30gZmFpbGVkIHdpdGggZXJyb3I6IGAsIHQsIFwidXJsOiBcIiwgbywgXCJyZXF1ZXN0OlwiLCBuKSwgXG4gICAgICAgICAgICB0O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHhvKGUsIHQsIG4sIHIsIGksIHMpIHtcbiAgICAgICAgLy8gVGhlIFJFU1QgQVBJIGF1dG9tYXRpY2FsbHkgYWdncmVnYXRlcyBhbGwgb2YgdGhlIHN0cmVhbWVkIHJlc3VsdHMsIHNvIHdlXG4gICAgICAgIC8vIGNhbiBqdXN0IHVzZSB0aGUgbm9ybWFsIGludm9rZSgpIG1ldGhvZC5cbiAgICAgICAgcmV0dXJuIHRoaXMuQ28oZSwgdCwgbiwgciwgaSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1vZGlmaWVzIHRoZSBoZWFkZXJzIGZvciBhIHJlcXVlc3QsIGFkZGluZyBhbnkgYXV0aG9yaXphdGlvbiB0b2tlbiBpZlxuICAgICAqIHByZXNlbnQgYW5kIGFueSBhZGRpdGlvbmFsIGhlYWRlcnMgZm9yIHRoZSByZXF1ZXN0LlxuICAgICAqLyAgICBGbyhlLCB0LCBuKSB7XG4gICAgICAgIGVbXCJYLUdvb2ctQXBpLUNsaWVudFwiXSA9IFxuICAgICAgICAvLyBTREtfVkVSU0lPTiBpcyB1cGRhdGVkIHRvIGRpZmZlcmVudCB2YWx1ZSBhdCBydW50aW1lIGRlcGVuZGluZyBvbiB0aGUgZW50cnkgcG9pbnQsXG4gICAgICAgIC8vIHNvIHdlIG5lZWQgdG8gZ2V0IGl0cyB2YWx1ZSB3aGVuIHdlIG5lZWQgaXQgaW4gYSBmdW5jdGlvbi5cbiAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX2dldEdvb2dBcGlDbGllbnRWYWx1ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBcImdsLWpzLyBmaXJlL1wiICsgYjtcbiAgICAgICAgfSgpLCBcbiAgICAgICAgLy8gQ29udGVudC1UeXBlOiB0ZXh0L3BsYWluIHdpbGwgYXZvaWQgcHJlZmxpZ2h0IHJlcXVlc3RzIHdoaWNoIG1pZ2h0XG4gICAgICAgIC8vIG1lc3Mgd2l0aCBDT1JTIGFuZCByZWRpcmVjdHMgYnkgcHJveGllcy4gSWYgd2UgYWRkIGN1c3RvbSBoZWFkZXJzXG4gICAgICAgIC8vIHdlIHdpbGwgbmVlZCB0byBjaGFuZ2UgdGhpcyBjb2RlIHRvIHBvdGVudGlhbGx5IHVzZSB0aGUgJGh0dHBPdmVyd3JpdGVcbiAgICAgICAgLy8gcGFyYW1ldGVyIHN1cHBvcnRlZCBieSBFU0YgdG8gYXZvaWQgdHJpZ2dlcmluZyBwcmVmbGlnaHQgcmVxdWVzdHMuXG4gICAgICAgIGVbXCJDb250ZW50LVR5cGVcIl0gPSBcInRleHQvcGxhaW5cIiwgdGhpcy5kYXRhYmFzZUluZm8uYXBwSWQgJiYgKGVbXCJYLUZpcmViYXNlLUdNUElEXCJdID0gdGhpcy5kYXRhYmFzZUluZm8uYXBwSWQpLCBcbiAgICAgICAgdCAmJiB0LmhlYWRlcnMuZm9yRWFjaCgoKHQsIG4pID0+IGVbbl0gPSB0KSksIG4gJiYgbi5oZWFkZXJzLmZvckVhY2goKCh0LCBuKSA9PiBlW25dID0gdCkpO1xuICAgIH1cbiAgICB2byhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBtZVtlXTtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMud299L3YxLyR7dH06JHtufWA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlcyBhbmQgY2xlYW5zIHVwIGFueSByZXNvdXJjZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBjb25uZWN0aW9uLiBUaGlzXG4gICAgICogaW1wbGVtZW50YXRpb24gaXMgYSBuby1vcCBiZWNhdXNlIHRoZXJlIGFyZSBubyByZXNvdXJjZXMgYXNzb2NpYXRlZFxuICAgICAqIHdpdGggdGhlIFJlc3RDb25uZWN0aW9uIHRoYXQgbmVlZCB0byBiZSBjbGVhbmVkIHVwLlxuICAgICAqLyAgICB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIC8vIE5vLW9wXG4gICAgfVxufSB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICBzdXBlcihlKSwgdGhpcy5mb3JjZUxvbmdQb2xsaW5nID0gZS5mb3JjZUxvbmdQb2xsaW5nLCB0aGlzLmF1dG9EZXRlY3RMb25nUG9sbGluZyA9IGUuYXV0b0RldGVjdExvbmdQb2xsaW5nLCBcbiAgICAgICAgdGhpcy51c2VGZXRjaFN0cmVhbXMgPSBlLnVzZUZldGNoU3RyZWFtcywgdGhpcy5sb25nUG9sbGluZ09wdGlvbnMgPSBlLmxvbmdQb2xsaW5nT3B0aW9ucztcbiAgICB9XG4gICAgTW8oZSwgdCwgbiwgcikge1xuICAgICAgICBjb25zdCBpID0gX19QUklWQVRFX2dlbmVyYXRlVW5pcXVlRGVidWdJZCgpO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKChzLCBvKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBfID0gbmV3IFhocklvO1xuICAgICAgICAgICAgXy5zZXRXaXRoQ3JlZGVudGlhbHMoITApLCBfLmxpc3Rlbk9uY2UoRXZlbnRUeXBlLkNPTVBMRVRFLCAoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoXy5nZXRMYXN0RXJyb3JDb2RlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVycm9yQ29kZS5OT19FUlJPUjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBfLmdldFJlc3BvbnNlSnNvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKGZlLCBgWEhSIGZvciBSUEMgJyR7ZX0nICR7aX0gcmVjZWl2ZWQ6YCwgSlNPTi5zdHJpbmdpZnkodCkpLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIHModCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRXJyb3JDb2RlLlRJTUVPVVQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoZmUsIGBSUEMgJyR7ZX0nICR7aX0gdGltZWQgb3V0YCksIG8obmV3IEZpcmVzdG9yZUVycm9yKEMuREVBRExJTkVfRVhDRUVERUQsIFwiUmVxdWVzdCB0aW1lIG91dFwiKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRXJyb3JDb2RlLkhUVFBfRVJST1I6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gXy5nZXRTdGF0dXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfX1BSSVZBVEVfbG9nRGVidWcoZmUsIGBSUEMgJyR7ZX0nICR7aX0gZmFpbGVkIHdpdGggc3RhdHVzOmAsIG4sIFwicmVzcG9uc2UgdGV4dDpcIiwgXy5nZXRSZXNwb25zZVRleHQoKSksIFxuICAgICAgICAgICAgICAgICAgICAgICAgbiA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZSA9IF8uZ2V0UmVzcG9uc2VKc29uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXkuaXNBcnJheShlKSAmJiAoZSA9IGVbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBudWxsID09IGUgPyB2b2lkIDAgOiBlLmVycm9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIHQuc3RhdHVzICYmIHQubWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gZnVuY3Rpb24gX19QUklWQVRFX21hcENvZGVGcm9tSHR0cFJlc3BvbnNlRXJyb3JTdGF0dXMoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IGUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9fL2csIFwiLVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QudmFsdWVzKEMpLmluZGV4T2YodCkgPj0gMCA/IHQgOiBDLlVOS05PV047XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0odC5zdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvKG5ldyBGaXJlc3RvcmVFcnJvcihlLCB0Lm1lc3NhZ2UpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgbyhuZXcgRmlyZXN0b3JlRXJyb3IoQy5VTktOT1dOLCBcIlNlcnZlciByZXNwb25kZWQgd2l0aCBzdGF0dXMgXCIgKyBfLmdldFN0YXR1cygpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSByZWNlaXZlZCBhbiBIVFRQX0VSUk9SIGJ1dCB0aGVyZSdzIG5vIHN0YXR1cyBjb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaXQncyBtb3N0IHByb2JhYmx5IGEgY29ubmVjdGlvbiBpc3N1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgbyhuZXcgRmlyZXN0b3JlRXJyb3IoQy5VTkFWQUlMQUJMRSwgXCJDb25uZWN0aW9uIGZhaWxlZC5cIikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgZmFpbCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKGZlLCBgUlBDICcke2V9JyAke2l9IGNvbXBsZXRlZC5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBjb25zdCBhID0gSlNPTi5zdHJpbmdpZnkocik7XG4gICAgICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoZmUsIGBSUEMgJyR7ZX0nICR7aX0gc2VuZGluZyByZXF1ZXN0OmAsIHIpLCBfLnNlbmQodCwgXCJQT1NUXCIsIGEsIG4sIDE1KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBPbyhlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZ2VuZXJhdGVVbmlxdWVEZWJ1Z0lkKCksIGkgPSBbIHRoaXMud28sIFwiL1wiLCBcImdvb2dsZS5maXJlc3RvcmUudjEuRmlyZXN0b3JlXCIsIFwiL1wiLCBlLCBcIi9jaGFubmVsXCIgXSwgcyA9IGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQoKSwgbyA9IGdldFN0YXRFdmVudFRhcmdldCgpLCBfID0ge1xuICAgICAgICAgICAgLy8gUmVxdWlyZWQgZm9yIGJhY2tlbmQgc3RpY2tpbmVzcywgcm91dGluZyBiZWhhdmlvciBpcyBiYXNlZCBvbiB0aGlzXG4gICAgICAgICAgICAvLyBwYXJhbWV0ZXIuXG4gICAgICAgICAgICBodHRwU2Vzc2lvbklkUGFyYW06IFwiZ3Nlc3Npb25pZFwiLFxuICAgICAgICAgICAgaW5pdE1lc3NhZ2VIZWFkZXJzOiB7fSxcbiAgICAgICAgICAgIG1lc3NhZ2VVcmxQYXJhbXM6IHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIHBhcmFtIGlzIHVzZWQgdG8gaW1wcm92ZSByb3V0aW5nIGFuZCBwcm9qZWN0IGlzb2xhdGlvbiBieSB0aGVcbiAgICAgICAgICAgICAgICAvLyBiYWNrZW5kIGFuZCBtdXN0IGJlIGluY2x1ZGVkIGluIGV2ZXJ5IHJlcXVlc3QuXG4gICAgICAgICAgICAgICAgZGF0YWJhc2U6IGBwcm9qZWN0cy8ke3RoaXMuZGF0YWJhc2VJZC5wcm9qZWN0SWR9L2RhdGFiYXNlcy8ke3RoaXMuZGF0YWJhc2VJZC5kYXRhYmFzZX1gXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2VuZFJhd0pzb246ICEwLFxuICAgICAgICAgICAgc3VwcG9ydHNDcm9zc0RvbWFpblhocjogITAsXG4gICAgICAgICAgICBpbnRlcm5hbENoYW5uZWxQYXJhbXM6IHtcbiAgICAgICAgICAgICAgICAvLyBPdmVycmlkZSB0aGUgZGVmYXVsdCB0aW1lb3V0IChyYW5kb21pemVkIGJldHdlZW4gMTAtMjAgc2Vjb25kcykgc2luY2VcbiAgICAgICAgICAgICAgICAvLyBhIGxhcmdlIHdyaXRlIGJhdGNoIG9uIGEgc2xvdyBpbnRlcm5ldCBjb25uZWN0aW9uIG1heSB0YWtlIGEgbG9uZ1xuICAgICAgICAgICAgICAgIC8vIHRpbWUgdG8gc2VuZCB0byB0aGUgYmFja2VuZC4gUmF0aGVyIHRoYW4gaGF2ZSBXZWJDaGFubmVsIGltcG9zZSBhXG4gICAgICAgICAgICAgICAgLy8gdGlnaHQgdGltZW91dCB3aGljaCBjb3VsZCBsZWFkIHRvIGluZmluaXRlIHRpbWVvdXRzIGFuZCByZXRyaWVzLCB3ZVxuICAgICAgICAgICAgICAgIC8vIHNldCBpdCB2ZXJ5IGxhcmdlICg1LTEwIG1pbnV0ZXMpIGFuZCByZWx5IG9uIHRoZSBicm93c2VyJ3MgYnVpbHRpblxuICAgICAgICAgICAgICAgIC8vIHRpbWVvdXRzIHRvIGtpY2sgaW4gaWYgdGhlIHJlcXVlc3QgaXNuJ3Qgd29ya2luZy5cbiAgICAgICAgICAgICAgICBmb3J3YXJkQ2hhbm5lbFJlcXVlc3RUaW1lb3V0TXM6IDZlNVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZvcmNlTG9uZ1BvbGxpbmc6IHRoaXMuZm9yY2VMb25nUG9sbGluZyxcbiAgICAgICAgICAgIGRldGVjdEJ1ZmZlcmluZ1Byb3h5OiB0aGlzLmF1dG9EZXRlY3RMb25nUG9sbGluZ1xuICAgICAgICB9LCBhID0gdGhpcy5sb25nUG9sbGluZ09wdGlvbnMudGltZW91dFNlY29uZHM7XG4gICAgICAgIHZvaWQgMCAhPT0gYSAmJiAoXy5sb25nUG9sbGluZ1RpbWVvdXQgPSBNYXRoLnJvdW5kKDFlMyAqIGEpKSwgdGhpcy51c2VGZXRjaFN0cmVhbXMgJiYgKF8ueG1sSHR0cEZhY3RvcnkgPSBuZXcgRmV0Y2hYbWxIdHRwRmFjdG9yeSh7fSkpLCBcbiAgICAgICAgdGhpcy5GbyhfLmluaXRNZXNzYWdlSGVhZGVycywgdCwgbiksIFxuICAgICAgICAvLyBTZW5kaW5nIHRoZSBjdXN0b20gaGVhZGVycyB3ZSBqdXN0IGFkZGVkIHRvIHJlcXVlc3QuaW5pdE1lc3NhZ2VIZWFkZXJzXG4gICAgICAgIC8vIChBdXRob3JpemF0aW9uLCBldGMuKSB3aWxsIHRyaWdnZXIgdGhlIGJyb3dzZXIgdG8gbWFrZSBhIENPUlMgcHJlZmxpZ2h0XG4gICAgICAgIC8vIHJlcXVlc3QgYmVjYXVzZSB0aGUgWEhSIHdpbGwgbm8gbG9uZ2VyIG1lZXQgdGhlIGNyaXRlcmlhIGZvciBhIFwic2ltcGxlXCJcbiAgICAgICAgLy8gQ09SUyByZXF1ZXN0OlxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVFRQL0NPUlMjU2ltcGxlX3JlcXVlc3RzXG4gICAgICAgIC8vIFRoZXJlZm9yZSB0byBhdm9pZCB0aGUgQ09SUyBwcmVmbGlnaHQgcmVxdWVzdCAoYW4gZXh0cmEgbmV0d29ya1xuICAgICAgICAvLyByb3VuZHRyaXApLCB3ZSB1c2UgdGhlIGVuY29kZUluaXRNZXNzYWdlSGVhZGVycyBvcHRpb24gdG8gc3BlY2lmeSB0aGF0XG4gICAgICAgIC8vIHRoZSBoZWFkZXJzIHNob3VsZCBpbnN0ZWFkIGJlIGVuY29kZWQgaW4gdGhlIHJlcXVlc3QncyBQT1NUIHBheWxvYWQsXG4gICAgICAgIC8vIHdoaWNoIGlzIHJlY29nbml6ZWQgYnkgdGhlIHdlYmNoYW5uZWwgYmFja2VuZC5cbiAgICAgICAgXy5lbmNvZGVJbml0TWVzc2FnZUhlYWRlcnMgPSAhMDtcbiAgICAgICAgY29uc3QgdSA9IGkuam9pbihcIlwiKTtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKGZlLCBgQ3JlYXRpbmcgUlBDICcke2V9JyBzdHJlYW0gJHtyfTogJHt1fWAsIF8pO1xuICAgICAgICBjb25zdCBjID0gcy5jcmVhdGVXZWJDaGFubmVsKHUsIF8pO1xuICAgICAgICAvLyBXZWJDaGFubmVsIHN1cHBvcnRzIHNlbmRpbmcgdGhlIGZpcnN0IG1lc3NhZ2Ugd2l0aCB0aGUgaGFuZHNoYWtlIC0gc2F2aW5nXG4gICAgICAgIC8vIGEgbmV0d29yayByb3VuZCB0cmlwLiBIb3dldmVyLCBpdCB3aWxsIGhhdmUgdG8gY2FsbCBzZW5kIGluIHRoZSBzYW1lXG4gICAgICAgIC8vIEpTIGV2ZW50IGxvb3AgYXMgb3Blbi4gSW4gb3JkZXIgdG8gZW5mb3JjZSB0aGlzLCB3ZSBkZWxheSBhY3R1YWxseVxuICAgICAgICAvLyBvcGVuaW5nIHRoZSBXZWJDaGFubmVsIHVudGlsIHNlbmQgaXMgY2FsbGVkLiBXaGV0aGVyIHdlIGhhdmUgY2FsbGVkXG4gICAgICAgIC8vIG9wZW4gaXMgdHJhY2tlZCB3aXRoIHRoaXMgdmFyaWFibGUuXG4gICAgICAgICAgICAgICAgbGV0IGwgPSAhMSwgaCA9ICExO1xuICAgICAgICAvLyBBIGZsYWcgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIHN0cmVhbSB3YXMgY2xvc2VkIChieSB1cyBvciB0aHJvdWdoIGFuXG4gICAgICAgIC8vIGVycm9yL2Nsb3NlIGV2ZW50KSB0byBhdm9pZCBkZWxpdmVyaW5nIG11bHRpcGxlIGNsb3NlIGV2ZW50cyBvciBzZW5kaW5nXG4gICAgICAgIC8vIG9uIGEgY2xvc2VkIHN0cmVhbVxuICAgICAgICAgICAgICAgIGNvbnN0IFAgPSBuZXcgX19QUklWQVRFX1N0cmVhbUJyaWRnZSh7XG4gICAgICAgICAgICBsbzogdCA9PiB7XG4gICAgICAgICAgICAgICAgaCA/IF9fUFJJVkFURV9sb2dEZWJ1ZyhmZSwgYE5vdCBzZW5kaW5nIGJlY2F1c2UgUlBDICcke2V9JyBzdHJlYW0gJHtyfSBpcyBjbG9zZWQ6YCwgdCkgOiAobCB8fCAoX19QUklWQVRFX2xvZ0RlYnVnKGZlLCBgT3BlbmluZyBSUEMgJyR7ZX0nIHN0cmVhbSAke3J9IHRyYW5zcG9ydC5gKSwgXG4gICAgICAgICAgICAgICAgYy5vcGVuKCksIGwgPSAhMCksIF9fUFJJVkFURV9sb2dEZWJ1ZyhmZSwgYFJQQyAnJHtlfScgc3RyZWFtICR7cn0gc2VuZGluZzpgLCB0KSwgXG4gICAgICAgICAgICAgICAgYy5zZW5kKHQpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBobzogKCkgPT4gYy5jbG9zZSgpXG4gICAgICAgIH0pLCBfX1BSSVZBVEVfdW5ndWFyZGVkRXZlbnRMaXN0ZW4gPSAoZSwgdCwgbikgPT4ge1xuICAgICAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiBjbG9zdXJlIHR5cGluZyBzZWVtcyBicm9rZW4gYmVjYXVzZSBXZWJDaGFubmVsIGRvZXNcbiAgICAgICAgICAgIC8vIG5vdCBpbXBsZW1lbnQgZ29vZy5ldmVudHMuTGlzdGVuYWJsZVxuICAgICAgICAgICAgZS5saXN0ZW4odCwgKGUgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG4oZSk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgICAgICAgICB9KSwgMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9O1xuICAgICAgICAvLyBDbG9zdXJlIGV2ZW50cyBhcmUgZ3VhcmRlZCBhbmQgZXhjZXB0aW9ucyBhcmUgc3dhbGxvd2VkLCBzbyBjYXRjaCBhbnlcbiAgICAgICAgLy8gZXhjZXB0aW9uIGFuZCByZXRocm93IHVzaW5nIGEgc2V0VGltZW91dCBzbyB0aGV5IGJlY29tZSB2aXNpYmxlIGFnYWluLlxuICAgICAgICAvLyBOb3RlIHRoYXQgZXZlbnR1YWxseSB0aGlzIGZ1bmN0aW9uIGNvdWxkIGdvIGF3YXkgaWYgd2UgYXJlIGNvbmZpZGVudFxuICAgICAgICAvLyBlbm91Z2ggdGhlIGNvZGUgaXMgZXhjZXB0aW9uIGZyZWUuXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV91bmd1YXJkZWRFdmVudExpc3RlbihjLCBXZWJDaGFubmVsLkV2ZW50VHlwZS5PUEVOLCAoKCkgPT4ge1xuICAgICAgICAgICAgaCB8fCAoX19QUklWQVRFX2xvZ0RlYnVnKGZlLCBgUlBDICcke2V9JyBzdHJlYW0gJHtyfSB0cmFuc3BvcnQgb3BlbmVkLmApLCBQLm1vKCkpO1xuICAgICAgICB9KSksIF9fUFJJVkFURV91bmd1YXJkZWRFdmVudExpc3RlbihjLCBXZWJDaGFubmVsLkV2ZW50VHlwZS5DTE9TRSwgKCgpID0+IHtcbiAgICAgICAgICAgIGggfHwgKGggPSAhMCwgX19QUklWQVRFX2xvZ0RlYnVnKGZlLCBgUlBDICcke2V9JyBzdHJlYW0gJHtyfSB0cmFuc3BvcnQgY2xvc2VkYCksIFxuICAgICAgICAgICAgUC5wbygpKTtcbiAgICAgICAgfSkpLCBfX1BSSVZBVEVfdW5ndWFyZGVkRXZlbnRMaXN0ZW4oYywgV2ViQ2hhbm5lbC5FdmVudFR5cGUuRVJST1IsICh0ID0+IHtcbiAgICAgICAgICAgIGggfHwgKGggPSAhMCwgX19QUklWQVRFX2xvZ1dhcm4oZmUsIGBSUEMgJyR7ZX0nIHN0cmVhbSAke3J9IHRyYW5zcG9ydCBlcnJvcmVkOmAsIHQpLCBcbiAgICAgICAgICAgIFAucG8obmV3IEZpcmVzdG9yZUVycm9yKEMuVU5BVkFJTEFCTEUsIFwiVGhlIG9wZXJhdGlvbiBjb3VsZCBub3QgYmUgY29tcGxldGVkXCIpKSk7XG4gICAgICAgIH0pKSwgX19QUklWQVRFX3VuZ3VhcmRlZEV2ZW50TGlzdGVuKGMsIFdlYkNoYW5uZWwuRXZlbnRUeXBlLk1FU1NBR0UsICh0ID0+IHtcbiAgICAgICAgICAgIHZhciBuO1xuICAgICAgICAgICAgaWYgKCFoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IHQuZGF0YVswXTtcbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydCghIWkpO1xuICAgICAgICAgICAgICAgIC8vIFRPRE8oYi8zNTE0Mzg5MSk6IFRoZXJlIGlzIGEgYnVnIGluIE9uZSBQbGF0Zm9ybSB0aGF0IGNhdXNlZCBlcnJvcnNcbiAgICAgICAgICAgICAgICAvLyAoYW5kIG9ubHkgZXJyb3JzKSB0byBiZSB3cmFwcGVkIGluIGFuIGV4dHJhIGFycmF5LiBUbyBiZSBmb3J3YXJkXG4gICAgICAgICAgICAgICAgLy8gY29tcGF0aWJsZSB3aXRoIHRoZSBidWcgd2UgbmVlZCB0byBjaGVjayBlaXRoZXIgY29uZGl0aW9uLiBUaGUgbGF0dGVyXG4gICAgICAgICAgICAgICAgLy8gY2FuIGJlIHJlbW92ZWQgb25jZSB0aGUgZml4IGhhcyBiZWVuIHJvbGxlZCBvdXQuXG4gICAgICAgICAgICAgICAgLy8gVXNlIGFueSBiZWNhdXNlIG1zZ0RhdGEuZXJyb3IgaXMgbm90IHR5cGVkLlxuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBpLCBvID0gcy5lcnJvciB8fCAobnVsbCA9PT0gKG4gPSBzWzBdKSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLmVycm9yKTtcbiAgICAgICAgICAgICAgICBpZiAobykge1xuICAgICAgICAgICAgICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoZmUsIGBSUEMgJyR7ZX0nIHN0cmVhbSAke3J9IHJlY2VpdmVkIGVycm9yOmAsIG8pO1xuICAgICAgICAgICAgICAgICAgICAvLyBlcnJvci5zdGF0dXMgd2lsbCBiZSBhIHN0cmluZyBsaWtlICdPSycgb3IgJ05PVF9GT1VORCcuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBvLnN0YXR1cztcbiAgICAgICAgICAgICAgICAgICAgbGV0IG4gPSBcbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gKiBNYXBzIGFuIGVycm9yIENvZGUgZnJvbSBhIEdSUEMgc3RhdHVzIGlkZW50aWZpZXIgbGlrZSAnTk9UX0ZPVU5EJy5cbiAqXG4gKiBAcmV0dXJucyBUaGUgQ29kZSBlcXVpdmFsZW50IHRvIHRoZSBnaXZlbiBzdGF0dXMgc3RyaW5nIG9yIHVuZGVmaW5lZCBpZlxuICogICAgIHRoZXJlIGlzIG5vIG1hdGNoLlxuICovXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9tYXBDb2RlRnJvbVJwY1N0YXR1cyhlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBsb29rdXAgYnkgc3RyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IGNlW2VdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gdCkgcmV0dXJuIF9fUFJJVkFURV9tYXBDb2RlRnJvbVJwY0NvZGUodCk7XG4gICAgICAgICAgICAgICAgICAgIH0odCksIGkgPSBvLm1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICAgIHZvaWQgMCA9PT0gbiAmJiAobiA9IEMuSU5URVJOQUwsIGkgPSBcIlVua25vd24gZXJyb3Igc3RhdHVzOiBcIiArIHQgKyBcIiB3aXRoIG1lc3NhZ2UgXCIgKyBvLm1lc3NhZ2UpLCBcbiAgICAgICAgICAgICAgICAgICAgLy8gTWFyayBjbG9zZWQgc28gbm8gZnVydGhlciBldmVudHMgYXJlIHByb3BhZ2F0ZWRcbiAgICAgICAgICAgICAgICAgICAgaCA9ICEwLCBQLnBvKG5ldyBGaXJlc3RvcmVFcnJvcihuLCBpKSksIGMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgX19QUklWQVRFX2xvZ0RlYnVnKGZlLCBgUlBDICcke2V9JyBzdHJlYW0gJHtyfSByZWNlaXZlZDpgLCBpKSwgUC55byhpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpLCBfX1BSSVZBVEVfdW5ndWFyZGVkRXZlbnRMaXN0ZW4obywgRXZlbnQuU1RBVF9FVkVOVCwgKHQgPT4ge1xuICAgICAgICAgICAgdC5zdGF0ID09PSBTdGF0LlBST1hZID8gX19QUklWQVRFX2xvZ0RlYnVnKGZlLCBgUlBDICcke2V9JyBzdHJlYW0gJHtyfSBkZXRlY3RlZCBidWZmZXJpbmcgcHJveHlgKSA6IHQuc3RhdCA9PT0gU3RhdC5OT1BST1hZICYmIF9fUFJJVkFURV9sb2dEZWJ1ZyhmZSwgYFJQQyAnJHtlfScgc3RyZWFtICR7cn0gZGV0ZWN0ZWQgbm8gYnVmZmVyaW5nIHByb3h5YCk7XG4gICAgICAgIH0pKSwgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICAgICAgLy8gVGVjaG5pY2FsbHkgd2UgY291bGQvc2hvdWxkIHdhaXQgZm9yIHRoZSBXZWJDaGFubmVsIG9wZW5lZCBldmVudCxcbiAgICAgICAgICAgIC8vIGJ1dCBiZWNhdXNlIHdlIHdhbnQgdG8gc2VuZCB0aGUgZmlyc3QgbWVzc2FnZSB3aXRoIHRoZSBXZWJDaGFubmVsXG4gICAgICAgICAgICAvLyBoYW5kc2hha2Ugd2UgcHJldGVuZCB0aGUgY2hhbm5lbCBvcGVuZWQgaGVyZSAoYXN5bmNocm9ub3VzbHkpLCBhbmRcbiAgICAgICAgICAgIC8vIHRoZW4gZGVsYXkgdGhlIGFjdHVhbCBvcGVuIHVudGlsIHRoZSBmaXJzdCBtZXNzYWdlIGlzIHNlbnQuXG4gICAgICAgICAgICBQLmZvKCk7XG4gICAgICAgIH0pLCAwKSwgUDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogSW5pdGlhbGl6ZXMgdGhlIFdlYkNoYW5uZWxDb25uZWN0aW9uIGZvciB0aGUgYnJvd3Nlci4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogVGhlIFBsYXRmb3JtJ3MgJ3dpbmRvdycgaW1wbGVtZW50YXRpb24gb3IgbnVsbCBpZiBub3QgYXZhaWxhYmxlLiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2dldFdpbmRvdygpIHtcbiAgICAvLyBgd2luZG93YCBpcyBub3QgYWx3YXlzIGF2YWlsYWJsZSwgZS5nLiBpbiBSZWFjdE5hdGl2ZSBhbmQgV2ViV29ya2Vycy5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzXG4gICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHdpbmRvdyA/IHdpbmRvdyA6IG51bGw7XG59XG5cbi8qKiBUaGUgUGxhdGZvcm0ncyAnZG9jdW1lbnQnIGltcGxlbWVudGF0aW9uIG9yIG51bGwgaWYgbm90IGF2YWlsYWJsZS4gKi8gZnVuY3Rpb24gZ2V0RG9jdW1lbnQoKSB7XG4gICAgLy8gYGRvY3VtZW50YCBpcyBub3QgYWx3YXlzIGF2YWlsYWJsZSwgZS5nLiBpbiBSZWFjdE5hdGl2ZSBhbmQgV2ViV29ya2Vycy5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzXG4gICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIGRvY3VtZW50ID8gZG9jdW1lbnQgOiBudWxsO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3U2VyaWFsaXplcihlKSB7XG4gICAgcmV0dXJuIG5ldyBKc29uUHJvdG9TZXJpYWxpemVyKGUsIC8qIHVzZVByb3RvM0pzb249ICovICEwKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBoZWxwZXIgZm9yIHJ1bm5pbmcgZGVsYXllZCB0YXNrcyBmb2xsb3dpbmcgYW4gZXhwb25lbnRpYWwgYmFja29mZiBjdXJ2ZVxuICogYmV0d2VlbiBhdHRlbXB0cy5cbiAqXG4gKiBFYWNoIGRlbGF5IGlzIG1hZGUgdXAgb2YgYSBcImJhc2VcIiBkZWxheSB3aGljaCBmb2xsb3dzIHRoZSBleHBvbmVudGlhbFxuICogYmFja29mZiBjdXJ2ZSwgYW5kIGEgKy8tIDUwJSBcImppdHRlclwiIHRoYXQgaXMgY2FsY3VsYXRlZCBhbmQgYWRkZWQgdG8gdGhlXG4gKiBiYXNlIGRlbGF5LiBUaGlzIHByZXZlbnRzIGNsaWVudHMgZnJvbSBhY2NpZGVudGFsbHkgc3luY2hyb25pemluZyB0aGVpclxuICogZGVsYXlzIGNhdXNpbmcgc3Bpa2VzIG9mIGxvYWQgdG8gdGhlIGJhY2tlbmQuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9FeHBvbmVudGlhbEJhY2tvZmYge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBBc3luY1F1ZXVlIHRvIHJ1biBiYWNrb2ZmIG9wZXJhdGlvbnMgb24uXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIElEIHRvIHVzZSB3aGVuIHNjaGVkdWxpbmcgYmFja29mZiBvcGVyYXRpb25zIG9uIHRoZSBBc3luY1F1ZXVlLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSBpbml0aWFsIGRlbGF5ICh1c2VkIGFzIHRoZSBiYXNlIGRlbGF5IG9uIHRoZSBmaXJzdCByZXRyeSBhdHRlbXB0KS5cbiAgICAgKiBOb3RlIHRoYXQgaml0dGVyIHdpbGwgc3RpbGwgYmUgYXBwbGllZCwgc28gdGhlIGFjdHVhbCBkZWxheSBjb3VsZCBiZSBhc1xuICAgICAqIGxpdHRsZSBhcyAwLjUqaW5pdGlhbERlbGF5TXMuXG4gICAgICovXG4gICAgbiA9IDFlM1xuICAgIC8qKlxuICAgICAqIFRoZSBtdWx0aXBsaWVyIHRvIHVzZSB0byBkZXRlcm1pbmUgdGhlIGV4dGVuZGVkIGJhc2UgZGVsYXkgYWZ0ZXIgZWFjaFxuICAgICAqIGF0dGVtcHQuXG4gICAgICovICwgciA9IDEuNVxuICAgIC8qKlxuICAgICAqIFRoZSBtYXhpbXVtIGJhc2UgZGVsYXkgYWZ0ZXIgd2hpY2ggbm8gZnVydGhlciBiYWNrb2ZmIGlzIHBlcmZvcm1lZC5cbiAgICAgKiBOb3RlIHRoYXQgaml0dGVyIHdpbGwgc3RpbGwgYmUgYXBwbGllZCwgc28gdGhlIGFjdHVhbCBkZWxheSBjb3VsZCBiZSBhc1xuICAgICAqIG11Y2ggYXMgMS41Km1heERlbGF5TXMuXG4gICAgICovICwgaSA9IDZlNCkge1xuICAgICAgICB0aGlzLm9pID0gZSwgdGhpcy50aW1lcklkID0gdCwgdGhpcy5ObyA9IG4sIHRoaXMuTG8gPSByLCB0aGlzLkJvID0gaSwgdGhpcy5rbyA9IDAsIFxuICAgICAgICB0aGlzLnFvID0gbnVsbCwgXG4gICAgICAgIC8qKiBUaGUgbGFzdCBiYWNrb2ZmIGF0dGVtcHQsIGFzIGVwb2NoIG1pbGxpc2Vjb25kcy4gKi9cbiAgICAgICAgdGhpcy5RbyA9IERhdGUubm93KCksIHRoaXMucmVzZXQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBiYWNrb2ZmIGRlbGF5LlxuICAgICAqXG4gICAgICogVGhlIHZlcnkgbmV4dCBiYWNrb2ZmQW5kV2FpdCgpIHdpbGwgaGF2ZSBubyBkZWxheS4gSWYgaXQgaXMgY2FsbGVkIGFnYWluXG4gICAgICogKGkuZS4gZHVlIHRvIGFuIGVycm9yKSwgaW5pdGlhbERlbGF5TXMgKHBsdXMgaml0dGVyKSB3aWxsIGJlIHVzZWQsIGFuZFxuICAgICAqIHN1YnNlcXVlbnQgb25lcyB3aWxsIGluY3JlYXNlIGFjY29yZGluZyB0byB0aGUgYmFja29mZkZhY3Rvci5cbiAgICAgKi8gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMua28gPSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIGJhY2tvZmYgZGVsYXkgdG8gdGhlIG1heGltdW0gZGVsYXkgKGUuZy4gZm9yIHVzZSBhZnRlciBhXG4gICAgICogUkVTT1VSQ0VfRVhIQVVTVEVEIGVycm9yKS5cbiAgICAgKi8gICAgS28oKSB7XG4gICAgICAgIHRoaXMua28gPSB0aGlzLkJvO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIGFmdGVyIGN1cnJlbnREZWxheU1zLCBhbmQgaW5jcmVhc2VzIHRoZVxuICAgICAqIGRlbGF5IGZvciBhbnkgc3Vic2VxdWVudCBhdHRlbXB0cy4gSWYgdGhlcmUgd2FzIGEgcGVuZGluZyBiYWNrb2ZmIG9wZXJhdGlvblxuICAgICAqIGFscmVhZHksIGl0IHdpbGwgYmUgY2FuY2VsZWQuXG4gICAgICovICAgICRvKGUpIHtcbiAgICAgICAgLy8gQ2FuY2VsIGFueSBwZW5kaW5nIGJhY2tvZmYgb3BlcmF0aW9uLlxuICAgICAgICB0aGlzLmNhbmNlbCgpO1xuICAgICAgICAvLyBGaXJzdCBzY2hlZHVsZSB1c2luZyB0aGUgY3VycmVudCBiYXNlICh3aGljaCBtYXkgYmUgMCBhbmQgc2hvdWxkIGJlXG4gICAgICAgIC8vIGhvbm9yZWQgYXMgc3VjaCkuXG4gICAgICAgIGNvbnN0IHQgPSBNYXRoLmZsb29yKHRoaXMua28gKyB0aGlzLlVvKCkpLCBuID0gTWF0aC5tYXgoMCwgRGF0ZS5ub3coKSAtIHRoaXMuUW8pLCByID0gTWF0aC5tYXgoMCwgdCAtIG4pO1xuICAgICAgICAvLyBHdWFyZCBhZ2FpbnN0IGxhc3RBdHRlbXB0VGltZSBiZWluZyBpbiB0aGUgZnV0dXJlIGR1ZSB0byBhIGNsb2NrIGNoYW5nZS5cbiAgICAgICAgICAgICAgICByID4gMCAmJiBfX1BSSVZBVEVfbG9nRGVidWcoXCJFeHBvbmVudGlhbEJhY2tvZmZcIiwgYEJhY2tpbmcgb2ZmIGZvciAke3J9IG1zIChiYXNlIGRlbGF5OiAke3RoaXMua299IG1zLCBkZWxheSB3aXRoIGppdHRlcjogJHt0fSBtcywgbGFzdCBhdHRlbXB0OiAke259IG1zIGFnbylgKSwgXG4gICAgICAgIHRoaXMucW8gPSB0aGlzLm9pLmVucXVldWVBZnRlckRlbGF5KHRoaXMudGltZXJJZCwgciwgKCgpID0+ICh0aGlzLlFvID0gRGF0ZS5ub3coKSwgXG4gICAgICAgIGUoKSkpKSwgXG4gICAgICAgIC8vIEFwcGx5IGJhY2tvZmYgZmFjdG9yIHRvIGRldGVybWluZSBuZXh0IGRlbGF5IGFuZCBlbnN1cmUgaXQgaXMgd2l0aGluXG4gICAgICAgIC8vIGJvdW5kcy5cbiAgICAgICAgdGhpcy5rbyAqPSB0aGlzLkxvLCB0aGlzLmtvIDwgdGhpcy5ObyAmJiAodGhpcy5rbyA9IHRoaXMuTm8pLCB0aGlzLmtvID4gdGhpcy5CbyAmJiAodGhpcy5rbyA9IHRoaXMuQm8pO1xuICAgIH1cbiAgICBXbygpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy5xbyAmJiAodGhpcy5xby5za2lwRGVsYXkoKSwgdGhpcy5xbyA9IG51bGwpO1xuICAgIH1cbiAgICBjYW5jZWwoKSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMucW8gJiYgKHRoaXMucW8uY2FuY2VsKCksIHRoaXMucW8gPSBudWxsKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSByYW5kb20gdmFsdWUgaW4gdGhlIHJhbmdlIFstY3VycmVudEJhc2VNcy8yLCBjdXJyZW50QmFzZU1zLzJdICovICAgIFVvKCkge1xuICAgICAgICByZXR1cm4gKE1hdGgucmFuZG9tKCkgLSAuNSkgKiB0aGlzLmtvO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBQZXJzaXN0ZW50U3RyZWFtIGlzIGFuIGFic3RyYWN0IGJhc2UgY2xhc3MgdGhhdCByZXByZXNlbnRzIGEgc3RyZWFtaW5nIFJQQ1xuICogdG8gdGhlIEZpcmVzdG9yZSBiYWNrZW5kLiBJdCdzIGJ1aWx0IG9uIHRvcCBvZiB0aGUgY29ubmVjdGlvbnMgb3duIHN1cHBvcnRcbiAqIGZvciBzdHJlYW1pbmcgUlBDcywgYW5kIGFkZHMgc2V2ZXJhbCBjcml0aWNhbCBmZWF0dXJlcyBmb3Igb3VyIGNsaWVudHM6XG4gKlxuICogICAtIEV4cG9uZW50aWFsIGJhY2tvZmYgb24gZmFpbHVyZVxuICogICAtIEF1dGhlbnRpY2F0aW9uIHZpYSBDcmVkZW50aWFsc1Byb3ZpZGVyXG4gKiAgIC0gRGlzcGF0Y2hpbmcgYWxsIGNhbGxiYWNrcyBpbnRvIHRoZSBzaGFyZWQgd29ya2VyIHF1ZXVlXG4gKiAgIC0gQ2xvc2luZyBpZGxlIHN0cmVhbXMgYWZ0ZXIgNjAgc2Vjb25kcyBvZiBpbmFjdGl2aXR5XG4gKlxuICogU3ViY2xhc3NlcyBvZiBQZXJzaXN0ZW50U3RyZWFtIGltcGxlbWVudCBzZXJpYWxpemF0aW9uIG9mIG1vZGVscyB0byBhbmRcbiAqIGZyb20gdGhlIEpTT04gcmVwcmVzZW50YXRpb24gb2YgdGhlIHByb3RvY29sIGJ1ZmZlcnMgZm9yIGEgc3BlY2lmaWNcbiAqIHN0cmVhbWluZyBSUEMuXG4gKlxuICogIyMgU3RhcnRpbmcgYW5kIFN0b3BwaW5nXG4gKlxuICogU3RyZWFtaW5nIFJQQ3MgYXJlIHN0YXRlZnVsIGFuZCBuZWVkIHRvIGJlIHN0YXJ0KCllZCBiZWZvcmUgbWVzc2FnZXMgY2FuXG4gKiBiZSBzZW50IGFuZCByZWNlaXZlZC4gVGhlIFBlcnNpc3RlbnRTdHJlYW0gd2lsbCBjYWxsIHRoZSBvbk9wZW4oKSBmdW5jdGlvblxuICogb2YgdGhlIGxpc3RlbmVyIG9uY2UgdGhlIHN0cmVhbSBpcyByZWFkeSB0byBhY2NlcHQgcmVxdWVzdHMuXG4gKlxuICogU2hvdWxkIGEgc3RhcnQoKSBmYWlsLCBQZXJzaXN0ZW50U3RyZWFtIHdpbGwgY2FsbCB0aGUgcmVnaXN0ZXJlZCBvbkNsb3NlKClcbiAqIGxpc3RlbmVyIHdpdGggYSBGaXJlc3RvcmVFcnJvciBpbmRpY2F0aW5nIHdoYXQgd2VudCB3cm9uZy5cbiAqXG4gKiBBIFBlcnNpc3RlbnRTdHJlYW0gY2FuIGJlIHN0YXJ0ZWQgYW5kIHN0b3BwZWQgcmVwZWF0ZWRseS5cbiAqXG4gKiBHZW5lcmljIHR5cGVzOlxuICogIFNlbmRUeXBlOiBUaGUgdHlwZSBvZiB0aGUgb3V0Z29pbmcgbWVzc2FnZSBvZiB0aGUgdW5kZXJseWluZ1xuICogICAgY29ubmVjdGlvbiBzdHJlYW1cbiAqICBSZWNlaXZlVHlwZTogVGhlIHR5cGUgb2YgdGhlIGluY29taW5nIG1lc3NhZ2Ugb2YgdGhlIHVuZGVybHlpbmdcbiAqICAgIGNvbm5lY3Rpb24gc3RyZWFtXG4gKiAgTGlzdGVuZXJUeXBlOiBUaGUgdHlwZSBvZiB0aGUgbGlzdGVuZXIgdGhhdCB3aWxsIGJlIHVzZWQgZm9yIGNhbGxiYWNrc1xuICovXG5jbGFzcyBfX1BSSVZBVEVfUGVyc2lzdGVudFN0cmVhbSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgciwgaSwgcywgbywgXykge1xuICAgICAgICB0aGlzLm9pID0gZSwgdGhpcy5HbyA9IG4sIHRoaXMuem8gPSByLCB0aGlzLmNvbm5lY3Rpb24gPSBpLCB0aGlzLmF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyID0gcywgXG4gICAgICAgIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFsc1Byb3ZpZGVyID0gbywgdGhpcy5saXN0ZW5lciA9IF8sIHRoaXMuc3RhdGUgPSAwIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5Jbml0aWFsICovICwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGNsb3NlIGNvdW50IHRoYXQncyBpbmNyZW1lbnRlZCBldmVyeSB0aW1lIHRoZSBzdHJlYW0gaXMgY2xvc2VkOyB1c2VkIGJ5XG4gICAgICAgICAqIGdldENsb3NlR3VhcmRlZERpc3BhdGNoZXIoKSB0byBpbnZhbGlkYXRlIGNhbGxiYWNrcyB0aGF0IGhhcHBlbiBhZnRlclxuICAgICAgICAgKiBjbG9zZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuam8gPSAwLCB0aGlzLkhvID0gbnVsbCwgdGhpcy5KbyA9IG51bGwsIHRoaXMuc3RyZWFtID0gbnVsbCwgdGhpcy5ZbyA9IG5ldyBfX1BSSVZBVEVfRXhwb25lbnRpYWxCYWNrb2ZmKGUsIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgc3RhcnQoKSBoYXMgYmVlbiBjYWxsZWQgYW5kIG5vIGVycm9yIGhhcyBvY2N1cnJlZC4gVHJ1ZVxuICAgICAqIGluZGljYXRlcyB0aGUgc3RyZWFtIGlzIG9wZW4gb3IgaW4gdGhlIHByb2Nlc3Mgb2Ygb3BlbmluZyAod2hpY2hcbiAgICAgKiBlbmNvbXBhc3NlcyByZXNwZWN0aW5nIGJhY2tvZmYsIGdldHRpbmcgYXV0aCB0b2tlbnMsIGFuZCBzdGFydGluZyB0aGVcbiAgICAgKiBhY3R1YWwgUlBDKS4gVXNlIGlzT3BlbigpIHRvIGRldGVybWluZSBpZiB0aGUgc3RyZWFtIGlzIG9wZW4gYW5kIHJlYWR5IGZvclxuICAgICAqIG91dGJvdW5kIHJlcXVlc3RzLlxuICAgICAqLyAgICBabygpIHtcbiAgICAgICAgcmV0dXJuIDEgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLlN0YXJ0aW5nICovID09PSB0aGlzLnN0YXRlIHx8IDUgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkJhY2tvZmYgKi8gPT09IHRoaXMuc3RhdGUgfHwgdGhpcy5YbygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHVuZGVybHlpbmcgUlBDIGlzIG9wZW4gKHRoZSBvbk9wZW4oKSBsaXN0ZW5lciBoYXMgYmVlblxuICAgICAqIGNhbGxlZCkgYW5kIHRoZSBzdHJlYW0gaXMgcmVhZHkgZm9yIG91dGJvdW5kIHJlcXVlc3RzLlxuICAgICAqLyAgICBYbygpIHtcbiAgICAgICAgcmV0dXJuIDIgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLk9wZW4gKi8gPT09IHRoaXMuc3RhdGUgfHwgMyAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuSGVhbHRoeSAqLyA9PT0gdGhpcy5zdGF0ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIHRoZSBSUEMuIE9ubHkgYWxsb3dlZCBpZiBpc1N0YXJ0ZWQoKSByZXR1cm5zIGZhbHNlLiBUaGUgc3RyZWFtIGlzXG4gICAgICogbm90IGltbWVkaWF0ZWx5IHJlYWR5IGZvciB1c2U6IG9uT3BlbigpIHdpbGwgYmUgaW52b2tlZCB3aGVuIHRoZSBSUEMgaXNcbiAgICAgKiByZWFkeSBmb3Igb3V0Ym91bmQgcmVxdWVzdHMsIGF0IHdoaWNoIHBvaW50IGlzT3BlbigpIHdpbGwgcmV0dXJuIHRydWUuXG4gICAgICpcbiAgICAgKiBXaGVuIHN0YXJ0IHJldHVybnMsIGlzU3RhcnRlZCgpIHdpbGwgcmV0dXJuIHRydWUuXG4gICAgICovICAgIHN0YXJ0KCkge1xuICAgICAgICA0IC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5FcnJvciAqLyAhPT0gdGhpcy5zdGF0ZSA/IHRoaXMuYXV0aCgpIDogdGhpcy5lXygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdG9wcyB0aGUgUlBDLiBUaGlzIGNhbGwgaXMgaWRlbXBvdGVudCBhbmQgYWxsb3dlZCByZWdhcmRsZXNzIG9mIHRoZVxuICAgICAqIGN1cnJlbnQgaXNTdGFydGVkKCkgc3RhdGUuXG4gICAgICpcbiAgICAgKiBXaGVuIHN0b3AgcmV0dXJucywgaXNTdGFydGVkKCkgYW5kIGlzT3BlbigpIHdpbGwgYm90aCByZXR1cm4gZmFsc2UuXG4gICAgICovICAgIGFzeW5jIHN0b3AoKSB7XG4gICAgICAgIHRoaXMuWm8oKSAmJiBhd2FpdCB0aGlzLmNsb3NlKDAgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkluaXRpYWwgKi8pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZnRlciBhbiBlcnJvciB0aGUgc3RyZWFtIHdpbGwgdXN1YWxseSBiYWNrIG9mZiBvbiB0aGUgbmV4dCBhdHRlbXB0IHRvXG4gICAgICogc3RhcnQgaXQuIElmIHRoZSBlcnJvciB3YXJyYW50cyBhbiBpbW1lZGlhdGUgcmVzdGFydCBvZiB0aGUgc3RyZWFtLCB0aGVcbiAgICAgKiBzZW5kZXIgY2FuIHVzZSB0aGlzIHRvIGluZGljYXRlIHRoYXQgdGhlIHJlY2VpdmVyIHNob3VsZCBub3QgYmFjayBvZmYuXG4gICAgICpcbiAgICAgKiBFYWNoIGVycm9yIHdpbGwgY2FsbCB0aGUgb25DbG9zZSgpIGxpc3RlbmVyLiBUaGF0IGZ1bmN0aW9uIGNhbiBkZWNpZGUgdG9cbiAgICAgKiBpbmhpYml0IGJhY2tvZmYgaWYgcmVxdWlyZWQuXG4gICAgICovICAgIHRfKCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gMCAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuSW5pdGlhbCAqLyAsIHRoaXMuWW8ucmVzZXQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFya3MgdGhpcyBzdHJlYW0gYXMgaWRsZS4gSWYgbm8gZnVydGhlciBhY3Rpb25zIGFyZSBwZXJmb3JtZWQgb24gdGhlXG4gICAgICogc3RyZWFtIGZvciBvbmUgbWludXRlLCB0aGUgc3RyZWFtIHdpbGwgYXV0b21hdGljYWxseSBjbG9zZSBpdHNlbGYgYW5kXG4gICAgICogbm90aWZ5IHRoZSBzdHJlYW0ncyBvbkNsb3NlKCkgaGFuZGxlciB3aXRoIFN0YXR1cy5PSy4gVGhlIHN0cmVhbSB3aWxsIHRoZW5cbiAgICAgKiBiZSBpbiBhICFpc1N0YXJ0ZWQoKSBzdGF0ZSwgcmVxdWlyaW5nIHRoZSBjYWxsZXIgdG8gc3RhcnQgdGhlIHN0cmVhbSBhZ2FpblxuICAgICAqIGJlZm9yZSBmdXJ0aGVyIHVzZS5cbiAgICAgKlxuICAgICAqIE9ubHkgc3RyZWFtcyB0aGF0IGFyZSBpbiBzdGF0ZSAnT3BlbicgY2FuIGJlIG1hcmtlZCBpZGxlLCBhcyBhbGwgb3RoZXJcbiAgICAgKiBzdGF0ZXMgaW1wbHkgcGVuZGluZyBuZXR3b3JrIG9wZXJhdGlvbnMuXG4gICAgICovICAgIG5fKCkge1xuICAgICAgICAvLyBTdGFydHMgdGhlIGlkbGUgdGltZSBpZiB3ZSBhcmUgaW4gc3RhdGUgJ09wZW4nIGFuZCBhcmUgbm90IHlldCBhbHJlYWR5XG4gICAgICAgIC8vIHJ1bm5pbmcgYSB0aW1lciAoaW4gd2hpY2ggY2FzZSB0aGUgcHJldmlvdXMgaWRsZSB0aW1lb3V0IHN0aWxsIGFwcGxpZXMpLlxuICAgICAgICB0aGlzLlhvKCkgJiYgbnVsbCA9PT0gdGhpcy5IbyAmJiAodGhpcy5IbyA9IHRoaXMub2kuZW5xdWV1ZUFmdGVyRGVsYXkodGhpcy5HbywgNmU0LCAoKCkgPT4gdGhpcy5yXygpKSkpO1xuICAgIH1cbiAgICAvKiogU2VuZHMgYSBtZXNzYWdlIHRvIHRoZSB1bmRlcmx5aW5nIHN0cmVhbS4gKi8gICAgaV8oZSkge1xuICAgICAgICB0aGlzLnNfKCksIHRoaXMuc3RyZWFtLnNlbmQoZSk7XG4gICAgfVxuICAgIC8qKiBDYWxsZWQgYnkgdGhlIGlkbGUgdGltZXIgd2hlbiB0aGUgc3RyZWFtIHNob3VsZCBjbG9zZSBkdWUgdG8gaW5hY3Rpdml0eS4gKi8gICAgYXN5bmMgcl8oKSB7XG4gICAgICAgIGlmICh0aGlzLlhvKCkpIFxuICAgICAgICAvLyBXaGVuIHRpbWluZyBvdXQgYW4gaWRsZSBzdHJlYW0gdGhlcmUncyBubyByZWFzb24gdG8gZm9yY2UgdGhlIHN0cmVhbSBpbnRvIGJhY2tvZmYgd2hlblxuICAgICAgICAvLyBpdCByZXN0YXJ0cyBzbyBzZXQgdGhlIHN0cmVhbSBzdGF0ZSB0byBJbml0aWFsIGluc3RlYWQgb2YgRXJyb3IuXG4gICAgICAgIHJldHVybiB0aGlzLmNsb3NlKDAgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkluaXRpYWwgKi8pO1xuICAgIH1cbiAgICAvKiogTWFya3MgdGhlIHN0cmVhbSBhcyBhY3RpdmUgYWdhaW4uICovICAgIHNfKCkge1xuICAgICAgICB0aGlzLkhvICYmICh0aGlzLkhvLmNhbmNlbCgpLCB0aGlzLkhvID0gbnVsbCk7XG4gICAgfVxuICAgIC8qKiBDYW5jZWxzIHRoZSBoZWFsdGggY2hlY2sgZGVsYXllZCBvcGVyYXRpb24uICovICAgIG9fKCkge1xuICAgICAgICB0aGlzLkpvICYmICh0aGlzLkpvLmNhbmNlbCgpLCB0aGlzLkpvID0gbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlcyB0aGUgc3RyZWFtIGFuZCBjbGVhbnMgdXAgYXMgbmVjZXNzYXJ5OlxuICAgICAqXG4gICAgICogKiBjbG9zZXMgdGhlIHVuZGVybHlpbmcgR1JQQyBzdHJlYW07XG4gICAgICogKiBjYWxscyB0aGUgb25DbG9zZSBoYW5kbGVyIHdpdGggdGhlIGdpdmVuICdlcnJvcic7XG4gICAgICogKiBzZXRzIGludGVybmFsIHN0cmVhbSBzdGF0ZSB0byAnZmluYWxTdGF0ZSc7XG4gICAgICogKiBhZGp1c3RzIHRoZSBiYWNrb2ZmIHRpbWVyIGJhc2VkIG9uIHRoZSBlcnJvclxuICAgICAqXG4gICAgICogQSBuZXcgc3RyZWFtIGNhbiBiZSBvcGVuZWQgYnkgY2FsbGluZyBzdGFydCgpLlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpbmFsU3RhdGUgLSB0aGUgaW50ZW5kZWQgc3RhdGUgb2YgdGhlIHN0cmVhbSBhZnRlciBjbG9zaW5nLlxuICAgICAqIEBwYXJhbSBlcnJvciAtIHRoZSBlcnJvciB0aGUgY29ubmVjdGlvbiB3YXMgY2xvc2VkIHdpdGguXG4gICAgICovICAgIGFzeW5jIGNsb3NlKGUsIHQpIHtcbiAgICAgICAgLy8gQ2FuY2VsIGFueSBvdXRzdGFuZGluZyB0aW1lcnMgKHRoZXkncmUgZ3VhcmFudGVlZCBub3QgdG8gZXhlY3V0ZSkuXG4gICAgICAgIHRoaXMuc18oKSwgdGhpcy5vXygpLCB0aGlzLllvLmNhbmNlbCgpLCBcbiAgICAgICAgLy8gSW52YWxpZGF0ZXMgYW55IHN0cmVhbS1yZWxhdGVkIGNhbGxiYWNrcyAoZS5nLiBmcm9tIGF1dGggb3IgdGhlXG4gICAgICAgIC8vIHVuZGVybHlpbmcgc3RyZWFtKSwgZ3VhcmFudGVlaW5nIHRoZXkgd29uJ3QgZXhlY3V0ZS5cbiAgICAgICAgdGhpcy5qbysrLCA0IC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5FcnJvciAqLyAhPT0gZSA/IFxuICAgICAgICAvLyBJZiB0aGlzIGlzIGFuIGludGVudGlvbmFsIGNsb3NlIGVuc3VyZSB3ZSBkb24ndCBkZWxheSBvdXIgbmV4dCBjb25uZWN0aW9uIGF0dGVtcHQuXG4gICAgICAgIHRoaXMuWW8ucmVzZXQoKSA6IHQgJiYgdC5jb2RlID09PSBDLlJFU09VUkNFX0VYSEFVU1RFRCA/IChcbiAgICAgICAgLy8gTG9nIHRoZSBlcnJvci4gKFByb2JhYmx5IGVpdGhlciAncXVvdGEgZXhjZWVkZWQnIG9yICdtYXggcXVldWUgbGVuZ3RoIHJlYWNoZWQnLilcbiAgICAgICAgX19QUklWQVRFX2xvZ0Vycm9yKHQudG9TdHJpbmcoKSksIF9fUFJJVkFURV9sb2dFcnJvcihcIlVzaW5nIG1heGltdW0gYmFja29mZiBkZWxheSB0byBwcmV2ZW50IG92ZXJsb2FkaW5nIHRoZSBiYWNrZW5kLlwiKSwgXG4gICAgICAgIHRoaXMuWW8uS28oKSkgOiB0ICYmIHQuY29kZSA9PT0gQy5VTkFVVEhFTlRJQ0FURUQgJiYgMyAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuSGVhbHRoeSAqLyAhPT0gdGhpcy5zdGF0ZSAmJiAoXG4gICAgICAgIC8vIFwidW5hdXRoZW50aWNhdGVkXCIgZXJyb3IgbWVhbnMgdGhlIHRva2VuIHdhcyByZWplY3RlZC4gVGhpcyBzaG91bGQgcmFyZWx5XG4gICAgICAgIC8vIGhhcHBlbiBzaW5jZSBib3RoIEF1dGggYW5kIEFwcENoZWNrIGVuc3VyZSBhIHN1ZmZpY2llbnQgVFRMIHdoZW4gd2VcbiAgICAgICAgLy8gcmVxdWVzdCBhIHRva2VuLiBJZiBhIHVzZXIgbWFudWFsbHkgcmVzZXRzIHRoZWlyIHN5c3RlbSBjbG9jayB0aGlzIGNhblxuICAgICAgICAvLyBmYWlsLCBob3dldmVyLiBJbiB0aGlzIGNhc2UsIHdlIHNob3VsZCBnZXQgYSBDb2RlLlVOQVVUSEVOVElDQVRFRCBlcnJvclxuICAgICAgICAvLyBiZWZvcmUgd2UgcmVjZWl2ZWQgdGhlIGZpcnN0IG1lc3NhZ2UgYW5kIHdlIG5lZWQgdG8gaW52YWxpZGF0ZSB0aGUgdG9rZW5cbiAgICAgICAgLy8gdG8gZW5zdXJlIHRoYXQgd2UgZmV0Y2ggYSBuZXcgdG9rZW4uXG4gICAgICAgIHRoaXMuYXV0aENyZWRlbnRpYWxzUHJvdmlkZXIuaW52YWxpZGF0ZVRva2VuKCksIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFsc1Byb3ZpZGVyLmludmFsaWRhdGVUb2tlbigpKSwgXG4gICAgICAgIC8vIENsZWFuIHVwIHRoZSB1bmRlcmx5aW5nIHN0cmVhbSBiZWNhdXNlIHdlIGFyZSBubyBsb25nZXIgaW50ZXJlc3RlZCBpbiBldmVudHMuXG4gICAgICAgIG51bGwgIT09IHRoaXMuc3RyZWFtICYmICh0aGlzLl9fKCksIHRoaXMuc3RyZWFtLmNsb3NlKCksIHRoaXMuc3RyZWFtID0gbnVsbCksIFxuICAgICAgICAvLyBUaGlzIHN0YXRlIG11c3QgYmUgYXNzaWduZWQgYmVmb3JlIGNhbGxpbmcgb25DbG9zZSgpIHRvIGFsbG93IHRoZSBjYWxsYmFjayB0b1xuICAgICAgICAvLyBpbmhpYml0IGJhY2tvZmYgb3Igb3RoZXJ3aXNlIG1hbmlwdWxhdGUgdGhlIHN0YXRlIGluIGl0cyBub24tc3RhcnRlZCBzdGF0ZS5cbiAgICAgICAgdGhpcy5zdGF0ZSA9IGUsIFxuICAgICAgICAvLyBOb3RpZnkgdGhlIGxpc3RlbmVyIHRoYXQgdGhlIHN0cmVhbSBjbG9zZWQuXG4gICAgICAgIGF3YWl0IHRoaXMubGlzdGVuZXIuQW8odCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbiBiZSBvdmVycmlkZGVuIHRvIHBlcmZvcm0gYWRkaXRpb25hbCBjbGVhbnVwIGJlZm9yZSB0aGUgc3RyZWFtIGlzIGNsb3NlZC5cbiAgICAgKiBDYWxsaW5nIHN1cGVyLnRlYXJEb3duKCkgaXMgbm90IHJlcXVpcmVkLlxuICAgICAqLyAgICBfXygpIHt9XG4gICAgYXV0aCgpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IDEgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLlN0YXJ0aW5nICovO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5hXyh0aGlzLmpvKSwgdCA9IHRoaXMuam87XG4gICAgICAgIC8vIFRPRE8obWlrZWxlaGVuKTogSnVzdCB1c2UgZGlzcGF0Y2hJZk5vdENsb3NlZCwgYnV0IHNlZSBUT0RPIGJlbG93LlxuICAgICAgICAgICAgICAgIFByb21pc2UuYWxsKFsgdGhpcy5hdXRoQ3JlZGVudGlhbHNQcm92aWRlci5nZXRUb2tlbigpLCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHNQcm92aWRlci5nZXRUb2tlbigpIF0pLnRoZW4oKChbZSwgbl0pID0+IHtcbiAgICAgICAgICAgIC8vIFN0cmVhbSBjYW4gYmUgc3RvcHBlZCB3aGlsZSB3YWl0aW5nIGZvciBhdXRoZW50aWNhdGlvbi5cbiAgICAgICAgICAgIC8vIFRPRE8obWlrZWxlaGVuKTogV2UgcmVhbGx5IHNob3VsZCBqdXN0IHVzZSBkaXNwYXRjaElmTm90Q2xvc2VkXG4gICAgICAgICAgICAvLyBhbmQgbGV0IHRoaXMgZGlzcGF0Y2ggb250byB0aGUgcXVldWUsIGJ1dCB0aGF0IG9wZW5lZCBhIHNwZWMgdGVzdCBjYW5cbiAgICAgICAgICAgIC8vIG9mIHdvcm1zIHRoYXQgSSBkb24ndCB3YW50IHRvIGRlYWwgd2l0aCBpbiB0aGlzIFBSLlxuICAgICAgICAgICAgdGhpcy5qbyA9PT0gdCAmJiBcbiAgICAgICAgICAgIC8vIE5vcm1hbGx5IHdlJ2QgaGF2ZSB0byBzY2hlZHVsZSB0aGUgY2FsbGJhY2sgb24gdGhlIEFzeW5jUXVldWUuXG4gICAgICAgICAgICAvLyBIb3dldmVyLCB0aGUgZm9sbG93aW5nIGNhbGxzIGFyZSBzYWZlIHRvIGJlIGNhbGxlZCBvdXRzaWRlIHRoZVxuICAgICAgICAgICAgLy8gQXN5bmNRdWV1ZSBzaW5jZSB0aGV5IGRvbid0IGNoYWluIGFzeW5jaHJvbm91cyBjYWxsc1xuICAgICAgICAgICAgdGhpcy51XyhlLCBuKTtcbiAgICAgICAgfSksICh0ID0+IHtcbiAgICAgICAgICAgIGUoKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gbmV3IEZpcmVzdG9yZUVycm9yKEMuVU5LTk9XTiwgXCJGZXRjaGluZyBhdXRoIHRva2VuIGZhaWxlZDogXCIgKyB0Lm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNfKGUpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHVfKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuYV8odGhpcy5qbyk7XG4gICAgICAgIHRoaXMuc3RyZWFtID0gdGhpcy5sXyhlLCB0KSwgdGhpcy5zdHJlYW0uUG8oKCgpID0+IHtcbiAgICAgICAgICAgIG4oKCgpID0+IHRoaXMubGlzdGVuZXIuUG8oKSkpO1xuICAgICAgICB9KSksIHRoaXMuc3RyZWFtLlRvKCgoKSA9PiB7XG4gICAgICAgICAgICBuKCgoKSA9PiAodGhpcy5zdGF0ZSA9IDIgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLk9wZW4gKi8gLCB0aGlzLkpvID0gdGhpcy5vaS5lbnF1ZXVlQWZ0ZXJEZWxheSh0aGlzLnpvLCAxZTQsICgoKSA9PiAodGhpcy5YbygpICYmICh0aGlzLnN0YXRlID0gMyAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuSGVhbHRoeSAqLyksIFxuICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkpKSksIHRoaXMubGlzdGVuZXIuVG8oKSkpKTtcbiAgICAgICAgfSkpLCB0aGlzLnN0cmVhbS5BbygoZSA9PiB7XG4gICAgICAgICAgICBuKCgoKSA9PiB0aGlzLmNfKGUpKSk7XG4gICAgICAgIH0pKSwgdGhpcy5zdHJlYW0ub25NZXNzYWdlKChlID0+IHtcbiAgICAgICAgICAgIG4oKCgpID0+IHRoaXMub25NZXNzYWdlKGUpKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZV8oKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSA1IC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5CYWNrb2ZmICovICwgdGhpcy5Zby4kbygoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IDAgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkluaXRpYWwgKi8gLCB0aGlzLnN0YXJ0KCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdHNcbiAgICBjXyhlKSB7XG4gICAgICAgIC8vIEluIHRoZW9yeSB0aGUgc3RyZWFtIGNvdWxkIGNsb3NlIGNsZWFubHksIGhvd2V2ZXIsIGluIG91ciBjdXJyZW50IG1vZGVsXG4gICAgICAgIC8vIHdlIG5ldmVyIGV4cGVjdCB0aGlzIHRvIGhhcHBlbiBiZWNhdXNlIGlmIHdlIHN0b3AgYSBzdHJlYW0gb3Vyc2VsdmVzLFxuICAgICAgICAvLyB0aGlzIGNhbGxiYWNrIHdpbGwgbmV2ZXIgYmUgY2FsbGVkLiBUbyBwcmV2ZW50IGNhc2VzIHdoZXJlIHdlIHJldHJ5XG4gICAgICAgIC8vIHdpdGhvdXQgYSBiYWNrb2ZmIGFjY2lkZW50YWxseSwgd2Ugc2V0IHRoZSBzdHJlYW0gdG8gZXJyb3IgaW4gYWxsIGNhc2VzLlxuICAgICAgICByZXR1cm4gX19QUklWQVRFX2xvZ0RlYnVnKFwiUGVyc2lzdGVudFN0cmVhbVwiLCBgY2xvc2Ugd2l0aCBlcnJvcjogJHtlfWApLCB0aGlzLnN0cmVhbSA9IG51bGwsIFxuICAgICAgICB0aGlzLmNsb3NlKDQgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkVycm9yICovICwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBcImRpc3BhdGNoZXJcIiBmdW5jdGlvbiB0aGF0IGRpc3BhdGNoZXMgb3BlcmF0aW9ucyBvbnRvIHRoZVxuICAgICAqIEFzeW5jUXVldWUgYnV0IG9ubHkgcnVucyB0aGVtIGlmIGNsb3NlQ291bnQgcmVtYWlucyB1bmNoYW5nZWQuIFRoaXMgYWxsb3dzXG4gICAgICogdXMgdG8gdHVybiBhdXRoIC8gc3RyZWFtIGNhbGxiYWNrcyBpbnRvIG5vLW9wcyBpZiB0aGUgc3RyZWFtIGlzIGNsb3NlZCAvXG4gICAgICogcmUtb3BlbmVkLCBldGMuXG4gICAgICovICAgIGFfKGUpIHtcbiAgICAgICAgcmV0dXJuIHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5vaS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiB0aGlzLmpvID09PSBlID8gdCgpIDogKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlBlcnNpc3RlbnRTdHJlYW1cIiwgXCJzdHJlYW0gY2FsbGJhY2sgc2tpcHBlZCBieSBnZXRDbG9zZUd1YXJkZWREaXNwYXRjaGVyLlwiKSwgXG4gICAgICAgICAgICBQcm9taXNlLnJlc29sdmUoKSkpKTtcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBQZXJzaXN0ZW50U3RyZWFtIHRoYXQgaW1wbGVtZW50cyB0aGUgTGlzdGVuIFJQQy5cbiAqXG4gKiBPbmNlIHRoZSBMaXN0ZW4gc3RyZWFtIGhhcyBjYWxsZWQgdGhlIG9uT3BlbigpIGxpc3RlbmVyLCBhbnkgbnVtYmVyIG9mXG4gKiBsaXN0ZW4oKSBhbmQgdW5saXN0ZW4oKSBjYWxscyBjYW4gYmUgbWFkZSB0byBjb250cm9sIHdoYXQgY2hhbmdlcyB3aWxsIGJlXG4gKiBzZW50IGZyb20gdGhlIHNlcnZlciBmb3IgTGlzdGVuUmVzcG9uc2VzLlxuICovIGNsYXNzIF9fUFJJVkFURV9QZXJzaXN0ZW50TGlzdGVuU3RyZWFtIGV4dGVuZHMgX19QUklWQVRFX1BlcnNpc3RlbnRTdHJlYW0ge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIsIGksIHMpIHtcbiAgICAgICAgc3VwZXIoZSwgXCJsaXN0ZW5fc3RyZWFtX2Nvbm5lY3Rpb25fYmFja29mZlwiIC8qIFRpbWVySWQuTGlzdGVuU3RyZWFtQ29ubmVjdGlvbkJhY2tvZmYgKi8gLCBcImxpc3Rlbl9zdHJlYW1faWRsZVwiIC8qIFRpbWVySWQuTGlzdGVuU3RyZWFtSWRsZSAqLyAsIFwiaGVhbHRoX2NoZWNrX3RpbWVvdXRcIiAvKiBUaW1lcklkLkhlYWx0aENoZWNrVGltZW91dCAqLyAsIHQsIG4sIHIsIHMpLCBcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gaTtcbiAgICB9XG4gICAgbF8oZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLk9vKFwiTGlzdGVuXCIsIGUsIHQpO1xuICAgIH1cbiAgICBvbk1lc3NhZ2UoZSkge1xuICAgICAgICAvLyBBIHN1Y2Nlc3NmdWwgcmVzcG9uc2UgbWVhbnMgdGhlIHN0cmVhbSBpcyBoZWFsdGh5XG4gICAgICAgIHRoaXMuWW8ucmVzZXQoKTtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9mcm9tV2F0Y2hDaGFuZ2UodGhpcy5zZXJpYWxpemVyLCBlKSwgbiA9IGZ1bmN0aW9uIF9fUFJJVkFURV92ZXJzaW9uRnJvbUxpc3RlblJlc3BvbnNlKGUpIHtcbiAgICAgICAgICAgIC8vIFdlIGhhdmUgb25seSByZWFjaGVkIGEgY29uc2lzdGVudCBzbmFwc2hvdCBmb3IgdGhlIGVudGlyZSBzdHJlYW0gaWYgdGhlcmVcbiAgICAgICAgICAgIC8vIGlzIGEgcmVhZF90aW1lIHNldCBhbmQgaXQgYXBwbGllcyB0byBhbGwgdGFyZ2V0cyAoaS5lLiB0aGUgbGlzdCBvZlxuICAgICAgICAgICAgLy8gdGFyZ2V0cyBpcyBlbXB0eSkuIFRoZSBiYWNrZW5kIGlzIGd1YXJhbnRlZWQgdG8gc2VuZCBzdWNoIHJlc3BvbnNlcy5cbiAgICAgICAgICAgIGlmICghKFwidGFyZ2V0Q2hhbmdlXCIgaW4gZSkpIHJldHVybiBTbmFwc2hvdFZlcnNpb24ubWluKCk7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS50YXJnZXRDaGFuZ2U7XG4gICAgICAgICAgICByZXR1cm4gdC50YXJnZXRJZHMgJiYgdC50YXJnZXRJZHMubGVuZ3RoID8gU25hcHNob3RWZXJzaW9uLm1pbigpIDogdC5yZWFkVGltZSA/IF9fUFJJVkFURV9mcm9tVmVyc2lvbih0LnJlYWRUaW1lKSA6IFNuYXBzaG90VmVyc2lvbi5taW4oKTtcbiAgICAgICAgfShlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubGlzdGVuZXIuaF8odCwgbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBpbnRlcmVzdCBpbiB0aGUgcmVzdWx0cyBvZiB0aGUgZ2l2ZW4gdGFyZ2V0LiBJZiB0aGUgdGFyZ2V0XG4gICAgICogaW5jbHVkZXMgYSByZXN1bWVUb2tlbiBpdCB3aWxsIGJlIGluY2x1ZGVkIGluIHRoZSByZXF1ZXN0LiBSZXN1bHRzIHRoYXRcbiAgICAgKiBhZmZlY3QgdGhlIHRhcmdldCB3aWxsIGJlIHN0cmVhbWVkIGJhY2sgYXMgV2F0Y2hDaGFuZ2UgbWVzc2FnZXMgdGhhdFxuICAgICAqIHJlZmVyZW5jZSB0aGUgdGFyZ2V0SWQuXG4gICAgICovICAgIFBfKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHt9O1xuICAgICAgICB0LmRhdGFiYXNlID0gX19QUklWQVRFX2dldEVuY29kZWREYXRhYmFzZUlkKHRoaXMuc2VyaWFsaXplciksIHQuYWRkVGFyZ2V0ID0gZnVuY3Rpb24gX19QUklWQVRFX3RvVGFyZ2V0KGUsIHQpIHtcbiAgICAgICAgICAgIGxldCBuO1xuICAgICAgICAgICAgY29uc3QgciA9IHQudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKG4gPSBfX1BSSVZBVEVfdGFyZ2V0SXNEb2N1bWVudFRhcmdldChyKSA/IHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudHM6IF9fUFJJVkFURV90b0RvY3VtZW50c1RhcmdldChlLCByKVxuICAgICAgICAgICAgfSA6IHtcbiAgICAgICAgICAgICAgICBxdWVyeTogX19QUklWQVRFX3RvUXVlcnlUYXJnZXQoZSwgcikuX3RcbiAgICAgICAgICAgIH0sIG4udGFyZ2V0SWQgPSB0LnRhcmdldElkLCB0LnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKSA+IDApIHtcbiAgICAgICAgICAgICAgICBuLnJlc3VtZVRva2VuID0gX19QUklWQVRFX3RvQnl0ZXMoZSwgdC5yZXN1bWVUb2tlbik7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV90b0ludDMyUHJvdG8oZSwgdC5leHBlY3RlZENvdW50KTtcbiAgICAgICAgICAgICAgICBudWxsICE9PSByICYmIChuLmV4cGVjdGVkQ291bnQgPSByKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodC5zbmFwc2hvdFZlcnNpb24uY29tcGFyZVRvKFNuYXBzaG90VmVyc2lvbi5taW4oKSkgPiAwKSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyh3dWFuZHkpOiBDb25zaWRlciByZW1vdmluZyBhYm92ZSBjaGVjayBiZWNhdXNlIGl0IGlzIG1vc3QgbGlrZWx5IHRydWUuXG4gICAgICAgICAgICAgICAgLy8gUmlnaHQgbm93LCBtYW55IHRlc3RzIGRlcGVuZCBvbiB0aGlzIGJlaGF2aW91ciB0aG91Z2ggKGxlYXZpbmcgbWluKCkgb3V0XG4gICAgICAgICAgICAgICAgLy8gb2Ygc2VyaWFsaXphdGlvbikuXG4gICAgICAgICAgICAgICAgbi5yZWFkVGltZSA9IHRvVGltZXN0YW1wKGUsIHQuc25hcHNob3RWZXJzaW9uLnRvVGltZXN0YW1wKCkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfdG9JbnQzMlByb3RvKGUsIHQuZXhwZWN0ZWRDb3VudCk7XG4gICAgICAgICAgICAgICAgbnVsbCAhPT0gciAmJiAobi5leHBlY3RlZENvdW50ID0gcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbjtcbiAgICAgICAgfSh0aGlzLnNlcmlhbGl6ZXIsIGUpO1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX3RvTGlzdGVuUmVxdWVzdExhYmVscyh0aGlzLnNlcmlhbGl6ZXIsIGUpO1xuICAgICAgICBuICYmICh0LmxhYmVscyA9IG4pLCB0aGlzLmlfKHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVbnJlZ2lzdGVycyBpbnRlcmVzdCBpbiB0aGUgcmVzdWx0cyBvZiB0aGUgdGFyZ2V0IGFzc29jaWF0ZWQgd2l0aCB0aGVcbiAgICAgKiBnaXZlbiB0YXJnZXRJZC5cbiAgICAgKi8gICAgSV8oZSkge1xuICAgICAgICBjb25zdCB0ID0ge307XG4gICAgICAgIHQuZGF0YWJhc2UgPSBfX1BSSVZBVEVfZ2V0RW5jb2RlZERhdGFiYXNlSWQodGhpcy5zZXJpYWxpemVyKSwgdC5yZW1vdmVUYXJnZXQgPSBlLCBcbiAgICAgICAgdGhpcy5pXyh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBTdHJlYW0gdGhhdCBpbXBsZW1lbnRzIHRoZSBXcml0ZSBSUEMuXG4gKlxuICogVGhlIFdyaXRlIFJQQyByZXF1aXJlcyB0aGUgY2FsbGVyIHRvIG1haW50YWluIHNwZWNpYWwgc3RyZWFtVG9rZW5cbiAqIHN0YXRlIGluIGJldHdlZW4gY2FsbHMsIHRvIGhlbHAgdGhlIHNlcnZlciB1bmRlcnN0YW5kIHdoaWNoIHJlc3BvbnNlcyB0aGVcbiAqIGNsaWVudCBoYXMgcHJvY2Vzc2VkIGJ5IHRoZSB0aW1lIHRoZSBuZXh0IHJlcXVlc3QgaXMgbWFkZS4gRXZlcnkgcmVzcG9uc2VcbiAqIHdpbGwgY29udGFpbiBhIHN0cmVhbVRva2VuOyB0aGlzIHZhbHVlIG11c3QgYmUgcGFzc2VkIHRvIHRoZSBuZXh0XG4gKiByZXF1ZXN0LlxuICpcbiAqIEFmdGVyIGNhbGxpbmcgc3RhcnQoKSBvbiB0aGlzIHN0cmVhbSwgdGhlIG5leHQgcmVxdWVzdCBtdXN0IGJlIGEgaGFuZHNoYWtlLFxuICogY29udGFpbmluZyB3aGF0ZXZlciBzdHJlYW1Ub2tlbiBpcyBvbiBoYW5kLiBPbmNlIGEgcmVzcG9uc2UgdG8gdGhpc1xuICogcmVxdWVzdCBpcyByZWNlaXZlZCwgYWxsIHBlbmRpbmcgbXV0YXRpb25zIG1heSBiZSBzdWJtaXR0ZWQuIFdoZW5cbiAqIHN1Ym1pdHRpbmcgbXVsdGlwbGUgYmF0Y2hlcyBvZiBtdXRhdGlvbnMgYXQgdGhlIHNhbWUgdGltZSwgaXQnc1xuICogb2theSB0byB1c2UgdGhlIHNhbWUgc3RyZWFtVG9rZW4gZm9yIHRoZSBjYWxscyB0byB3cml0ZU11dGF0aW9ucy5cbiAqXG4gKiBUT0RPKGIvMzMyNzEyMzUpOiBVc2UgcHJvdG8gdHlwZXNcbiAqLyBjbGFzcyBfX1BSSVZBVEVfUGVyc2lzdGVudFdyaXRlU3RyZWFtIGV4dGVuZHMgX19QUklWQVRFX1BlcnNpc3RlbnRTdHJlYW0ge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIsIGksIHMpIHtcbiAgICAgICAgc3VwZXIoZSwgXCJ3cml0ZV9zdHJlYW1fY29ubmVjdGlvbl9iYWNrb2ZmXCIgLyogVGltZXJJZC5Xcml0ZVN0cmVhbUNvbm5lY3Rpb25CYWNrb2ZmICovICwgXCJ3cml0ZV9zdHJlYW1faWRsZVwiIC8qIFRpbWVySWQuV3JpdGVTdHJlYW1JZGxlICovICwgXCJoZWFsdGhfY2hlY2tfdGltZW91dFwiIC8qIFRpbWVySWQuSGVhbHRoQ2hlY2tUaW1lb3V0ICovICwgdCwgbiwgciwgcyksIFxuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSBpLCB0aGlzLlRfID0gITE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyYWNrcyB3aGV0aGVyIG9yIG5vdCBhIGhhbmRzaGFrZSBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgZXhjaGFuZ2VkIGFuZFxuICAgICAqIHRoZSBzdHJlYW0gaXMgcmVhZHkgdG8gYWNjZXB0IG11dGF0aW9ucy5cbiAgICAgKi8gICAgZ2V0IEVfKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5UXztcbiAgICB9XG4gICAgLy8gT3ZlcnJpZGUgb2YgUGVyc2lzdGVudFN0cmVhbS5zdGFydFxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLlRfID0gITEsIHRoaXMubGFzdFN0cmVhbVRva2VuID0gdm9pZCAwLCBzdXBlci5zdGFydCgpO1xuICAgIH1cbiAgICBfXygpIHtcbiAgICAgICAgdGhpcy5UXyAmJiB0aGlzLmRfKFtdKTtcbiAgICB9XG4gICAgbF8oZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLk9vKFwiV3JpdGVcIiwgZSwgdCk7XG4gICAgfVxuICAgIG9uTWVzc2FnZShlKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgLy8gQWx3YXlzIGNhcHR1cmUgdGhlIGxhc3Qgc3RyZWFtIHRva2VuLlxuICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydCghIWUuc3RyZWFtVG9rZW4pLCB0aGlzLmxhc3RTdHJlYW1Ub2tlbiA9IGUuc3RyZWFtVG9rZW4sIHRoaXMuVF8pIHtcbiAgICAgICAgICAgIC8vIEEgc3VjY2Vzc2Z1bCBmaXJzdCB3cml0ZSByZXNwb25zZSBtZWFucyB0aGUgc3RyZWFtIGlzIGhlYWx0aHksXG4gICAgICAgICAgICAvLyBOb3RlLCB0aGF0IHdlIGNvdWxkIGNvbnNpZGVyIGEgc3VjY2Vzc2Z1bCBoYW5kc2hha2UgaGVhbHRoeSwgaG93ZXZlcixcbiAgICAgICAgICAgIC8vIHRoZSB3cml0ZSBpdHNlbGYgbWlnaHQgYmUgY2F1c2luZyBhbiBlcnJvciB3ZSB3YW50IHRvIGJhY2sgb2ZmIGZyb20uXG4gICAgICAgICAgICB0aGlzLllvLnJlc2V0KCk7XG4gICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2Zyb21Xcml0ZVJlc3VsdHMoZS53cml0ZVJlc3VsdHMsIGUuY29tbWl0VGltZSksIG4gPSBfX1BSSVZBVEVfZnJvbVZlcnNpb24oZS5jb21taXRUaW1lKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLkFfKG4sIHQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRoZSBmaXJzdCByZXNwb25zZSBpcyBhbHdheXMgdGhlIGhhbmRzaGFrZSByZXNwb25zZVxuICAgICAgICByZXR1cm4gX19QUklWQVRFX2hhcmRBc3NlcnQoIWUud3JpdGVSZXN1bHRzIHx8IDAgPT09IGUud3JpdGVSZXN1bHRzLmxlbmd0aCksIHRoaXMuVF8gPSAhMCwgXG4gICAgICAgIHRoaXMubGlzdGVuZXIuUl8oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZHMgYW4gaW5pdGlhbCBzdHJlYW1Ub2tlbiB0byB0aGUgc2VydmVyLCBwZXJmb3JtaW5nIHRoZSBoYW5kc2hha2VcbiAgICAgKiByZXF1aXJlZCB0byBtYWtlIHRoZSBTdHJlYW1pbmdXcml0ZSBSUEMgd29yay4gU3Vic2VxdWVudFxuICAgICAqIGNhbGxzIHNob3VsZCB3YWl0IHVudGlsIG9uSGFuZHNoYWtlQ29tcGxldGUgd2FzIGNhbGxlZC5cbiAgICAgKi8gICAgVl8oKSB7XG4gICAgICAgIC8vIFRPRE8oZGltb25kKTogU3VwcG9ydCBzdHJlYW0gcmVzdW1wdGlvbi4gV2UgaW50ZW50aW9uYWxseSBkbyBub3Qgc2V0IHRoZVxuICAgICAgICAvLyBzdHJlYW0gdG9rZW4gb24gdGhlIGhhbmRzaGFrZSwgaWdub3JpbmcgYW55IHN0cmVhbSB0b2tlbiB3ZSBtaWdodCBoYXZlLlxuICAgICAgICBjb25zdCBlID0ge307XG4gICAgICAgIGUuZGF0YWJhc2UgPSBfX1BSSVZBVEVfZ2V0RW5jb2RlZERhdGFiYXNlSWQodGhpcy5zZXJpYWxpemVyKSwgdGhpcy5pXyhlKTtcbiAgICB9XG4gICAgLyoqIFNlbmRzIGEgZ3JvdXAgb2YgbXV0YXRpb25zIHRvIHRoZSBGaXJlc3RvcmUgYmFja2VuZCB0byBhcHBseS4gKi8gICAgZF8oZSkge1xuICAgICAgICBjb25zdCB0ID0ge1xuICAgICAgICAgICAgc3RyZWFtVG9rZW46IHRoaXMubGFzdFN0cmVhbVRva2VuLFxuICAgICAgICAgICAgd3JpdGVzOiBlLm1hcCgoZSA9PiB0b011dGF0aW9uKHRoaXMuc2VyaWFsaXplciwgZSkpKVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmlfKHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRGF0YXN0b3JlIGFuZCBpdHMgcmVsYXRlZCBtZXRob2RzIGFyZSBhIHdyYXBwZXIgYXJvdW5kIHRoZSBleHRlcm5hbCBHb29nbGVcbiAqIENsb3VkIERhdGFzdG9yZSBncnBjIEFQSSwgd2hpY2ggcHJvdmlkZXMgYW4gaW50ZXJmYWNlIHRoYXQgaXMgbW9yZSBjb252ZW5pZW50XG4gKiBmb3IgdGhlIHJlc3Qgb2YgdGhlIGNsaWVudCBTREsgYXJjaGl0ZWN0dXJlIHRvIGNvbnN1bWUuXG4gKi9cbi8qKlxuICogQW4gaW1wbGVtZW50YXRpb24gb2YgRGF0YXN0b3JlIHRoYXQgZXhwb3NlcyBhZGRpdGlvbmFsIHN0YXRlIGZvciBpbnRlcm5hbFxuICogY29uc3VtcHRpb24uXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9EYXRhc3RvcmVJbXBsIGV4dGVuZHMgY2xhc3MgRGF0YXN0b3JlIHt9IHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuYXV0aENyZWRlbnRpYWxzID0gZSwgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzID0gdCwgdGhpcy5jb25uZWN0aW9uID0gbiwgXG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IHIsIHRoaXMubV8gPSAhMTtcbiAgICB9XG4gICAgZl8oKSB7XG4gICAgICAgIGlmICh0aGlzLm1fKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQy5GQUlMRURfUFJFQ09ORElUSU9OLCBcIlRoZSBjbGllbnQgaGFzIGFscmVhZHkgYmVlbiB0ZXJtaW5hdGVkLlwiKTtcbiAgICB9XG4gICAgLyoqIEludm9rZXMgdGhlIHByb3ZpZGVkIFJQQyB3aXRoIGF1dGggYW5kIEFwcENoZWNrIHRva2Vucy4gKi8gICAgQ28oZSwgdCwgbiwgcikge1xuICAgICAgICByZXR1cm4gdGhpcy5mXygpLCBQcm9taXNlLmFsbChbIHRoaXMuYXV0aENyZWRlbnRpYWxzLmdldFRva2VuKCksIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5nZXRUb2tlbigpIF0pLnRoZW4oKChbaSwgc10pID0+IHRoaXMuY29ubmVjdGlvbi5DbyhlLCBfX1BSSVZBVEVfdG9SZXNvdXJjZVBhdGgodCwgbiksIHIsIGksIHMpKSkuY2F0Y2goKGUgPT4ge1xuICAgICAgICAgICAgdGhyb3cgXCJGaXJlYmFzZUVycm9yXCIgPT09IGUubmFtZSA/IChlLmNvZGUgPT09IEMuVU5BVVRIRU5USUNBVEVEICYmICh0aGlzLmF1dGhDcmVkZW50aWFscy5pbnZhbGlkYXRlVG9rZW4oKSwgXG4gICAgICAgICAgICB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMuaW52YWxpZGF0ZVRva2VuKCkpLCBlKSA6IG5ldyBGaXJlc3RvcmVFcnJvcihDLlVOS05PV04sIGUudG9TdHJpbmcoKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqIEludm9rZXMgdGhlIHByb3ZpZGVkIFJQQyB3aXRoIHN0cmVhbWVkIHJlc3VsdHMgd2l0aCBhdXRoIGFuZCBBcHBDaGVjayB0b2tlbnMuICovICAgIHhvKGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZl8oKSwgUHJvbWlzZS5hbGwoWyB0aGlzLmF1dGhDcmVkZW50aWFscy5nZXRUb2tlbigpLCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMuZ2V0VG9rZW4oKSBdKS50aGVuKCgoW3MsIG9dKSA9PiB0aGlzLmNvbm5lY3Rpb24ueG8oZSwgX19QUklWQVRFX3RvUmVzb3VyY2VQYXRoKHQsIG4pLCByLCBzLCBvLCBpKSkpLmNhdGNoKChlID0+IHtcbiAgICAgICAgICAgIHRocm93IFwiRmlyZWJhc2VFcnJvclwiID09PSBlLm5hbWUgPyAoZS5jb2RlID09PSBDLlVOQVVUSEVOVElDQVRFRCAmJiAodGhpcy5hdXRoQ3JlZGVudGlhbHMuaW52YWxpZGF0ZVRva2VuKCksIFxuICAgICAgICAgICAgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzLmludmFsaWRhdGVUb2tlbigpKSwgZSkgOiBuZXcgRmlyZXN0b3JlRXJyb3IoQy5VTktOT1dOLCBlLnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRlcm1pbmF0ZSgpIHtcbiAgICAgICAgdGhpcy5tXyA9ICEwLCB0aGlzLmNvbm5lY3Rpb24udGVybWluYXRlKCk7XG4gICAgfVxufVxuXG4vLyBUT0RPKGZpcmVzdG9yZXhwKTogTWFrZSBzdXJlIHRoZXJlIGlzIG9ubHkgb25lIERhdGFzdG9yZSBpbnN0YW5jZSBwZXJcbi8vIGZpcmVzdG9yZS1leHAgY2xpZW50LlxuLyoqXG4gKiBBIGNvbXBvbmVudCB1c2VkIGJ5IHRoZSBSZW1vdGVTdG9yZSB0byB0cmFjayB0aGUgT25saW5lU3RhdGUgKHRoYXQgaXMsXG4gKiB3aGV0aGVyIG9yIG5vdCB0aGUgY2xpZW50IGFzIGEgd2hvbGUgc2hvdWxkIGJlIGNvbnNpZGVyZWQgdG8gYmUgb25saW5lIG9yXG4gKiBvZmZsaW5lKSwgaW1wbGVtZW50aW5nIHRoZSBhcHByb3ByaWF0ZSBoZXVyaXN0aWNzLlxuICpcbiAqIEluIHBhcnRpY3VsYXIsIHdoZW4gdGhlIGNsaWVudCBpcyB0cnlpbmcgdG8gY29ubmVjdCB0byB0aGUgYmFja2VuZCwgd2VcbiAqIGFsbG93IHVwIHRvIE1BWF9XQVRDSF9TVFJFQU1fRkFJTFVSRVMgd2l0aGluIE9OTElORV9TVEFURV9USU1FT1VUX01TIGZvclxuICogYSBjb25uZWN0aW9uIHRvIHN1Y2NlZWQuIElmIHdlIGhhdmUgdG9vIG1hbnkgZmFpbHVyZXMgb3IgdGhlIHRpbWVvdXQgZWxhcHNlcyxcbiAqIHRoZW4gd2Ugc2V0IHRoZSBPbmxpbmVTdGF0ZSB0byBPZmZsaW5lLCBhbmQgdGhlIGNsaWVudCB3aWxsIGJlaGF2ZSBhcyBpZlxuICogaXQgaXMgb2ZmbGluZSAoZ2V0KClzIHdpbGwgcmV0dXJuIGNhY2hlZCBkYXRhLCBldGMuKS5cbiAqL1xuY2xhc3MgX19QUklWQVRFX09ubGluZVN0YXRlVHJhY2tlciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLmFzeW5jUXVldWUgPSBlLCB0aGlzLm9ubGluZVN0YXRlSGFuZGxlciA9IHQsIFxuICAgICAgICAvKiogVGhlIGN1cnJlbnQgT25saW5lU3RhdGUuICovXG4gICAgICAgIHRoaXMuc3RhdGUgPSBcIlVua25vd25cIiAvKiBPbmxpbmVTdGF0ZS5Vbmtub3duICovICwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGNvdW50IG9mIGNvbnNlY3V0aXZlIGZhaWx1cmVzIHRvIG9wZW4gdGhlIHN0cmVhbS4gSWYgaXQgcmVhY2hlcyB0aGVcbiAgICAgICAgICogbWF4aW11bSBkZWZpbmVkIGJ5IE1BWF9XQVRDSF9TVFJFQU1fRkFJTFVSRVMsIHdlJ2xsIHNldCB0aGUgT25saW5lU3RhdGUgdG9cbiAgICAgICAgICogT2ZmbGluZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZ18gPSAwLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgdGltZXIgdGhhdCBlbGFwc2VzIGFmdGVyIE9OTElORV9TVEFURV9USU1FT1VUX01TLCBhdCB3aGljaCBwb2ludCB3ZVxuICAgICAgICAgKiB0cmFuc2l0aW9uIGZyb20gT25saW5lU3RhdGUuVW5rbm93biB0byBPbmxpbmVTdGF0ZS5PZmZsaW5lIHdpdGhvdXQgd2FpdGluZ1xuICAgICAgICAgKiBmb3IgdGhlIHN0cmVhbSB0byBhY3R1YWxseSBmYWlsIChNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTIHRpbWVzKS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucF8gPSBudWxsLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgdGhlIGNsaWVudCBzaG91bGQgbG9nIGEgd2FybmluZyBtZXNzYWdlIGlmIGl0IGZhaWxzIHRvIGNvbm5lY3QgdG9cbiAgICAgICAgICogdGhlIGJhY2tlbmQgKGluaXRpYWxseSB0cnVlLCBjbGVhcmVkIGFmdGVyIGEgc3VjY2Vzc2Z1bCBzdHJlYW0sIG9yIGlmIHdlJ3ZlXG4gICAgICAgICAqIGxvZ2dlZCB0aGUgbWVzc2FnZSBhbHJlYWR5KS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMueV8gPSAhMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIGJ5IFJlbW90ZVN0b3JlIHdoZW4gYSB3YXRjaCBzdHJlYW0gaXMgc3RhcnRlZCAoaW5jbHVkaW5nIG9uIGVhY2hcbiAgICAgKiBiYWNrb2ZmIGF0dGVtcHQpLlxuICAgICAqXG4gICAgICogSWYgdGhpcyBpcyB0aGUgZmlyc3QgYXR0ZW1wdCwgaXQgc2V0cyB0aGUgT25saW5lU3RhdGUgdG8gVW5rbm93biBhbmQgc3RhcnRzXG4gICAgICogdGhlIG9ubGluZVN0YXRlVGltZXIuXG4gICAgICovICAgIHdfKCkge1xuICAgICAgICAwID09PSB0aGlzLmdfICYmICh0aGlzLlNfKFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8pLCB0aGlzLnBfID0gdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBZnRlckRlbGF5KFwib25saW5lX3N0YXRlX3RpbWVvdXRcIiAvKiBUaW1lcklkLk9ubGluZVN0YXRlVGltZW91dCAqLyAsIDFlNCwgKCgpID0+ICh0aGlzLnBfID0gbnVsbCwgXG4gICAgICAgIHRoaXMuYl8oXCJCYWNrZW5kIGRpZG4ndCByZXNwb25kIHdpdGhpbiAxMCBzZWNvbmRzLlwiKSwgdGhpcy5TXyhcIk9mZmxpbmVcIiAvKiBPbmxpbmVTdGF0ZS5PZmZsaW5lICovKSwgXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBvdXIgT25saW5lU3RhdGUgYXMgYXBwcm9wcmlhdGUgYWZ0ZXIgdGhlIHdhdGNoIHN0cmVhbSByZXBvcnRzIGFcbiAgICAgKiBmYWlsdXJlLiBUaGUgZmlyc3QgZmFpbHVyZSBtb3ZlcyB1cyB0byB0aGUgJ1Vua25vd24nIHN0YXRlLiBXZSB0aGVuIG1heVxuICAgICAqIGFsbG93IG11bHRpcGxlIGZhaWx1cmVzIChiYXNlZCBvbiBNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTKSBiZWZvcmUgd2VcbiAgICAgKiBhY3R1YWxseSB0cmFuc2l0aW9uIHRvIHRoZSAnT2ZmbGluZScgc3RhdGUuXG4gICAgICovICAgIERfKGUpIHtcbiAgICAgICAgXCJPbmxpbmVcIiAvKiBPbmxpbmVTdGF0ZS5PbmxpbmUgKi8gPT09IHRoaXMuc3RhdGUgPyB0aGlzLlNfKFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8pIDogKHRoaXMuZ18rKywgXG4gICAgICAgIHRoaXMuZ18gPj0gMSAmJiAodGhpcy5DXygpLCB0aGlzLmJfKGBDb25uZWN0aW9uIGZhaWxlZCAxIHRpbWVzLiBNb3N0IHJlY2VudCBlcnJvcjogJHtlLnRvU3RyaW5nKCl9YCksIFxuICAgICAgICB0aGlzLlNfKFwiT2ZmbGluZVwiIC8qIE9ubGluZVN0YXRlLk9mZmxpbmUgKi8pKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV4cGxpY2l0bHkgc2V0cyB0aGUgT25saW5lU3RhdGUgdG8gdGhlIHNwZWNpZmllZCBzdGF0ZS5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCB0aGlzIHJlc2V0cyBvdXIgdGltZXJzIC8gZmFpbHVyZSBjb3VudGVycywgZXRjLiB1c2VkIGJ5IG91clxuICAgICAqIE9mZmxpbmUgaGV1cmlzdGljcywgc28gbXVzdCBub3QgYmUgdXNlZCBpbiBwbGFjZSBvZlxuICAgICAqIGhhbmRsZVdhdGNoU3RyZWFtU3RhcnQoKSBhbmQgaGFuZGxlV2F0Y2hTdHJlYW1GYWlsdXJlKCkuXG4gICAgICovICAgIHNldChlKSB7XG4gICAgICAgIHRoaXMuQ18oKSwgdGhpcy5nXyA9IDAsIFwiT25saW5lXCIgLyogT25saW5lU3RhdGUuT25saW5lICovID09PSBlICYmIChcbiAgICAgICAgLy8gV2UndmUgY29ubmVjdGVkIHRvIHdhdGNoIGF0IGxlYXN0IG9uY2UuIERvbid0IHdhcm4gdGhlIGRldmVsb3BlclxuICAgICAgICAvLyBhYm91dCBiZWluZyBvZmZsaW5lIGdvaW5nIGZvcndhcmQuXG4gICAgICAgIHRoaXMueV8gPSAhMSksIHRoaXMuU18oZSk7XG4gICAgfVxuICAgIFNfKGUpIHtcbiAgICAgICAgZSAhPT0gdGhpcy5zdGF0ZSAmJiAodGhpcy5zdGF0ZSA9IGUsIHRoaXMub25saW5lU3RhdGVIYW5kbGVyKGUpKTtcbiAgICB9XG4gICAgYl8oZSkge1xuICAgICAgICBjb25zdCB0ID0gYENvdWxkIG5vdCByZWFjaCBDbG91ZCBGaXJlc3RvcmUgYmFja2VuZC4gJHtlfVxcblRoaXMgdHlwaWNhbGx5IGluZGljYXRlcyB0aGF0IHlvdXIgZGV2aWNlIGRvZXMgbm90IGhhdmUgYSBoZWFsdGh5IEludGVybmV0IGNvbm5lY3Rpb24gYXQgdGhlIG1vbWVudC4gVGhlIGNsaWVudCB3aWxsIG9wZXJhdGUgaW4gb2ZmbGluZSBtb2RlIHVudGlsIGl0IGlzIGFibGUgdG8gc3VjY2Vzc2Z1bGx5IGNvbm5lY3QgdG8gdGhlIGJhY2tlbmQuYDtcbiAgICAgICAgdGhpcy55XyA/IChfX1BSSVZBVEVfbG9nRXJyb3IodCksIHRoaXMueV8gPSAhMSkgOiBfX1BSSVZBVEVfbG9nRGVidWcoXCJPbmxpbmVTdGF0ZVRyYWNrZXJcIiwgdCk7XG4gICAgfVxuICAgIENfKCkge1xuICAgICAgICBudWxsICE9PSB0aGlzLnBfICYmICh0aGlzLnBfLmNhbmNlbCgpLCB0aGlzLnBfID0gbnVsbCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfUmVtb3RlU3RvcmVJbXBsIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgbG9jYWwgc3RvcmUsIHVzZWQgdG8gZmlsbCB0aGUgd3JpdGUgcGlwZWxpbmUgd2l0aCBvdXRib3VuZCBtdXRhdGlvbnMuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqIFRoZSBjbGllbnQtc2lkZSBwcm94eSBmb3IgaW50ZXJhY3Rpbmcgd2l0aCB0aGUgYmFja2VuZC4gKi9cbiAgICB0LCBuLCByLCBpKSB7XG4gICAgICAgIHRoaXMubG9jYWxTdG9yZSA9IGUsIHRoaXMuZGF0YXN0b3JlID0gdCwgdGhpcy5hc3luY1F1ZXVlID0gbiwgdGhpcy5yZW1vdGVTeW5jZXIgPSB7fSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGxpc3Qgb2YgdXAgdG8gTUFYX1BFTkRJTkdfV1JJVEVTIHdyaXRlcyB0aGF0IHdlIGhhdmUgZmV0Y2hlZCBmcm9tIHRoZVxuICAgICAgICAgKiBMb2NhbFN0b3JlIHZpYSBmaWxsV3JpdGVQaXBlbGluZSgpIGFuZCBoYXZlIG9yIHdpbGwgc2VuZCB0byB0aGUgd3JpdGVcbiAgICAgICAgICogc3RyZWFtLlxuICAgICAgICAgKlxuICAgICAgICAgKiBXaGVuZXZlciB3cml0ZVBpcGVsaW5lLmxlbmd0aCA+IDAgdGhlIFJlbW90ZVN0b3JlIHdpbGwgYXR0ZW1wdCB0byBzdGFydCBvclxuICAgICAgICAgKiByZXN0YXJ0IHRoZSB3cml0ZSBzdHJlYW0uIFdoZW4gdGhlIHN0cmVhbSBpcyBlc3RhYmxpc2hlZCB0aGUgd3JpdGVzIGluIHRoZVxuICAgICAgICAgKiBwaXBlbGluZSB3aWxsIGJlIHNlbnQgaW4gb3JkZXIuXG4gICAgICAgICAqXG4gICAgICAgICAqIFdyaXRlcyByZW1haW4gaW4gd3JpdGVQaXBlbGluZSB1bnRpbCB0aGV5IGFyZSBhY2tub3dsZWRnZWQgYnkgdGhlIGJhY2tlbmRcbiAgICAgICAgICogYW5kIHRodXMgd2lsbCBhdXRvbWF0aWNhbGx5IGJlIHJlLXNlbnQgaWYgdGhlIHN0cmVhbSBpcyBpbnRlcnJ1cHRlZCAvXG4gICAgICAgICAqIHJlc3RhcnRlZCBiZWZvcmUgdGhleSdyZSBhY2tub3dsZWRnZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFdyaXRlIHJlc3BvbnNlcyBmcm9tIHRoZSBiYWNrZW5kIGFyZSBsaW5rZWQgdG8gdGhlaXIgb3JpZ2luYXRpbmcgcmVxdWVzdFxuICAgICAgICAgKiBwdXJlbHkgYmFzZWQgb24gb3JkZXIsIGFuZCBzbyB3ZSBjYW4ganVzdCBzaGlmdCgpIHdyaXRlcyBmcm9tIHRoZSBmcm9udCBvZlxuICAgICAgICAgKiB0aGUgd3JpdGVQaXBlbGluZSBhcyB3ZSByZWNlaXZlIHJlc3BvbnNlcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudl8gPSBbXSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIG1hcHBpbmcgb2Ygd2F0Y2hlZCB0YXJnZXRzIHRoYXQgdGhlIGNsaWVudCBjYXJlcyBhYm91dCB0cmFja2luZyBhbmQgdGhlXG4gICAgICAgICAqIHVzZXIgaGFzIGV4cGxpY2l0bHkgY2FsbGVkIGEgJ2xpc3RlbicgZm9yIHRoaXMgdGFyZ2V0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGVzZSB0YXJnZXRzIG1heSBvciBtYXkgbm90IGhhdmUgYmVlbiBzZW50IHRvIG9yIGFja25vd2xlZGdlZCBieSB0aGVcbiAgICAgICAgICogc2VydmVyLiBPbiByZS1lc3RhYmxpc2hpbmcgdGhlIGxpc3RlbiBzdHJlYW0sIHRoZXNlIHRhcmdldHMgc2hvdWxkIGJlIHNlbnRcbiAgICAgICAgICogdG8gdGhlIHNlcnZlci4gVGhlIHRhcmdldHMgcmVtb3ZlZCB3aXRoIHVubGlzdGVucyBhcmUgcmVtb3ZlZCBlYWdlcmx5XG4gICAgICAgICAqIHdpdGhvdXQgd2FpdGluZyBmb3IgY29uZmlybWF0aW9uIGZyb20gdGhlIGxpc3RlbiBzdHJlYW0uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkZfID0gbmV3IE1hcCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIHNldCBvZiByZWFzb25zIGZvciB3aHkgdGhlIFJlbW90ZVN0b3JlIG1heSBiZSBvZmZsaW5lLiBJZiBlbXB0eSwgdGhlXG4gICAgICAgICAqIFJlbW90ZVN0b3JlIG1heSBzdGFydCBpdHMgbmV0d29yayBjb25uZWN0aW9ucy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuTV8gPSBuZXcgU2V0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEV2ZW50IGhhbmRsZXJzIHRoYXQgZ2V0IGNhbGxlZCB3aGVuIHRoZSBuZXR3b3JrIGlzIGRpc2FibGVkIG9yIGVuYWJsZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFBPUlRJTkcgTk9URTogVGhlc2UgZnVuY3Rpb25zIGFyZSB1c2VkIG9uIHRoZSBXZWIgY2xpZW50IHRvIGNyZWF0ZSB0aGVcbiAgICAgICAgICogdW5kZXJseWluZyBzdHJlYW1zICh0byBzdXBwb3J0IHRyZWUtc2hha2VhYmxlIHN0cmVhbXMpLiBPbiBBbmRyb2lkIGFuZCBpT1MsXG4gICAgICAgICAqIHRoZSBzdHJlYW1zIGFyZSBjcmVhdGVkIGR1cmluZyBjb25zdHJ1Y3Rpb24gb2YgUmVtb3RlU3RvcmUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnhfID0gW10sIHRoaXMuT18gPSBpLCB0aGlzLk9fLmlvKChlID0+IHtcbiAgICAgICAgICAgIG4uZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFBvcnRpbmcgTm90ZTogVW5saWtlIGlPUywgYHJlc3RhcnROZXR3b3JrKClgIGlzIGNhbGxlZCBldmVuIHdoZW4gdGhlXG4gICAgICAgICAgICAgICAgLy8gbmV0d29yayBiZWNvbWVzIHVucmVhY2hhYmxlIGFzIHdlIGRvbid0IGhhdmUgYW55IG90aGVyIHdheSB0byB0ZWFyXG4gICAgICAgICAgICAgICAgLy8gZG93biBvdXIgc3RyZWFtcy5cbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfY2FuVXNlTmV0d29yayh0aGlzKSAmJiAoX19QUklWQVRFX2xvZ0RlYnVnKFwiUmVtb3RlU3RvcmVcIiwgXCJSZXN0YXJ0aW5nIHN0cmVhbXMgZm9yIG5ldHdvcmsgcmVhY2hhYmlsaXR5IGNoYW5nZS5cIiksIFxuICAgICAgICAgICAgICAgIGF3YWl0IGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9yZXN0YXJ0TmV0d29yayhlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgICAgICAgICAgICAgICAgICB0Lk1fLmFkZCg0IC8qIE9mZmxpbmVDYXVzZS5Db25uZWN0aXZpdHlDaGFuZ2UgKi8pLCBhd2FpdCBfX1BSSVZBVEVfZGlzYWJsZU5ldHdvcmtJbnRlcm5hbCh0KSwgXG4gICAgICAgICAgICAgICAgICAgIHQuTl8uc2V0KFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8pLCB0Lk1fLmRlbGV0ZSg0IC8qIE9mZmxpbmVDYXVzZS5Db25uZWN0aXZpdHlDaGFuZ2UgKi8pLCBcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgX19QUklWQVRFX2VuYWJsZU5ldHdvcmtJbnRlcm5hbCh0KTtcbiAgICAgICAgICAgICAgICB9KHRoaXMpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLCB0aGlzLk5fID0gbmV3IF9fUFJJVkFURV9PbmxpbmVTdGF0ZVRyYWNrZXIobiwgcik7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfZW5hYmxlTmV0d29ya0ludGVybmFsKGUpIHtcbiAgICBpZiAoX19QUklWQVRFX2NhblVzZU5ldHdvcmsoZSkpIGZvciAoY29uc3QgdCBvZiBlLnhfKSBhd2FpdCB0KC8qIGVuYWJsZWQ9ICovICEwKTtcbn1cblxuLyoqXG4gKiBUZW1wb3JhcmlseSBkaXNhYmxlcyB0aGUgbmV0d29yay4gVGhlIG5ldHdvcmsgY2FuIGJlIHJlLWVuYWJsZWQgdXNpbmdcbiAqIGVuYWJsZU5ldHdvcmsoKS5cbiAqLyBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfZGlzYWJsZU5ldHdvcmtJbnRlcm5hbChlKSB7XG4gICAgZm9yIChjb25zdCB0IG9mIGUueF8pIGF3YWl0IHQoLyogZW5hYmxlZD0gKi8gITEpO1xufVxuXG4vKipcbiAqIFN0YXJ0cyBuZXcgbGlzdGVuIGZvciB0aGUgZ2l2ZW4gdGFyZ2V0LiBVc2VzIHJlc3VtZSB0b2tlbiBpZiBwcm92aWRlZC4gSXRcbiAqIGlzIGEgbm8tb3AgaWYgdGhlIHRhcmdldCBvZiBnaXZlbiBgVGFyZ2V0RGF0YWAgaXMgYWxyZWFkeSBiZWluZyBsaXN0ZW5lZCB0by5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX3JlbW90ZVN0b3JlTGlzdGVuKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICBuLkZfLmhhcyh0LnRhcmdldElkKSB8fCAoXG4gICAgLy8gTWFyayB0aGlzIGFzIHNvbWV0aGluZyB0aGUgY2xpZW50IGlzIGN1cnJlbnRseSBsaXN0ZW5pbmcgZm9yLlxuICAgIG4uRl8uc2V0KHQudGFyZ2V0SWQsIHQpLCBfX1BSSVZBVEVfc2hvdWxkU3RhcnRXYXRjaFN0cmVhbShuKSA/IFxuICAgIC8vIFRoZSBsaXN0ZW4gd2lsbCBiZSBzZW50IGluIG9uV2F0Y2hTdHJlYW1PcGVuXG4gICAgX19QUklWQVRFX3N0YXJ0V2F0Y2hTdHJlYW0obikgOiBfX1BSSVZBVEVfZW5zdXJlV2F0Y2hTdHJlYW0obikuWG8oKSAmJiBfX1BSSVZBVEVfc2VuZFdhdGNoUmVxdWVzdChuLCB0KSk7XG59XG5cbi8qKlxuICogUmVtb3ZlcyB0aGUgbGlzdGVuIGZyb20gc2VydmVyLiBJdCBpcyBhIG5vLW9wIGlmIHRoZSBnaXZlbiB0YXJnZXQgaWQgaXNcbiAqIG5vdCBiZWluZyBsaXN0ZW5lZCB0by5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfcmVtb3RlU3RvcmVVbmxpc3RlbihlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIHIgPSBfX1BSSVZBVEVfZW5zdXJlV2F0Y2hTdHJlYW0obik7XG4gICAgbi5GXy5kZWxldGUodCksIHIuWG8oKSAmJiBfX1BSSVZBVEVfc2VuZFVud2F0Y2hSZXF1ZXN0KG4sIHQpLCAwID09PSBuLkZfLnNpemUgJiYgKHIuWG8oKSA/IHIubl8oKSA6IF9fUFJJVkFURV9jYW5Vc2VOZXR3b3JrKG4pICYmIFxuICAgIC8vIFJldmVydCB0byBPbmxpbmVTdGF0ZS5Vbmtub3duIGlmIHRoZSB3YXRjaCBzdHJlYW0gaXMgbm90IG9wZW4gYW5kIHdlXG4gICAgLy8gaGF2ZSBubyBsaXN0ZW5lcnMsIHNpbmNlIHdpdGhvdXQgYW55IGxpc3RlbnMgdG8gc2VuZCB3ZSBjYW5ub3RcbiAgICAvLyBjb25maXJtIGlmIHRoZSBzdHJlYW0gaXMgaGVhbHRoeSBhbmQgdXBncmFkZSB0byBPbmxpbmVTdGF0ZS5PbmxpbmUuXG4gICAgbi5OXy5zZXQoXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLykpO1xufVxuXG4vKipcbiAqIFdlIG5lZWQgdG8gaW5jcmVtZW50IHRoZSB0aGUgZXhwZWN0ZWQgbnVtYmVyIG9mIHBlbmRpbmcgcmVzcG9uc2VzIHdlJ3JlIGR1ZVxuICogZnJvbSB3YXRjaCBzbyB3ZSB3YWl0IGZvciB0aGUgYWNrIHRvIHByb2Nlc3MgYW55IG1lc3NhZ2VzIGZyb20gdGhpcyB0YXJnZXQuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3NlbmRXYXRjaFJlcXVlc3QoZSwgdCkge1xuICAgIGlmIChlLkxfLnhlKHQudGFyZ2V0SWQpLCB0LnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKSA+IDAgfHwgdC5zbmFwc2hvdFZlcnNpb24uY29tcGFyZVRvKFNuYXBzaG90VmVyc2lvbi5taW4oKSkgPiAwKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLnJlbW90ZVN5bmNlci5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KHQudGFyZ2V0SWQpLnNpemU7XG4gICAgICAgIHQgPSB0LndpdGhFeHBlY3RlZENvdW50KG4pO1xuICAgIH1cbiAgICBfX1BSSVZBVEVfZW5zdXJlV2F0Y2hTdHJlYW0oZSkuUF8odCk7XG59XG5cbi8qKlxuICogV2UgbmVlZCB0byBpbmNyZW1lbnQgdGhlIGV4cGVjdGVkIG51bWJlciBvZiBwZW5kaW5nIHJlc3BvbnNlcyB3ZSdyZSBkdWVcbiAqIGZyb20gd2F0Y2ggc28gd2Ugd2FpdCBmb3IgdGhlIHJlbW92YWwgb24gdGhlIHNlcnZlciBiZWZvcmUgd2UgcHJvY2VzcyBhbnlcbiAqIG1lc3NhZ2VzIGZyb20gdGhpcyB0YXJnZXQuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3NlbmRVbndhdGNoUmVxdWVzdChlLCB0KSB7XG4gICAgZS5MXy54ZSh0KSwgX19QUklWQVRFX2Vuc3VyZVdhdGNoU3RyZWFtKGUpLklfKHQpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfc3RhcnRXYXRjaFN0cmVhbShlKSB7XG4gICAgZS5MXyA9IG5ldyBfX1BSSVZBVEVfV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yKHtcbiAgICAgICAgZ2V0UmVtb3RlS2V5c0ZvclRhcmdldDogdCA9PiBlLnJlbW90ZVN5bmNlci5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KHQpLFxuICAgICAgICBvdDogdCA9PiBlLkZfLmdldCh0KSB8fCBudWxsLFxuICAgICAgICB0dDogKCkgPT4gZS5kYXRhc3RvcmUuc2VyaWFsaXplci5kYXRhYmFzZUlkXG4gICAgfSksIF9fUFJJVkFURV9lbnN1cmVXYXRjaFN0cmVhbShlKS5zdGFydCgpLCBlLk5fLndfKCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoZSB3YXRjaCBzdHJlYW0gc2hvdWxkIGJlIHN0YXJ0ZWQgYmVjYXVzZSBpdCdzIG5lY2Vzc2FyeVxuICogYW5kIGhhcyBub3QgeWV0IGJlZW4gc3RhcnRlZC5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfc2hvdWxkU3RhcnRXYXRjaFN0cmVhbShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9jYW5Vc2VOZXR3b3JrKGUpICYmICFfX1BSSVZBVEVfZW5zdXJlV2F0Y2hTdHJlYW0oZSkuWm8oKSAmJiBlLkZfLnNpemUgPiAwO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfY2FuVXNlTmV0d29yayhlKSB7XG4gICAgcmV0dXJuIDAgPT09IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSkuTV8uc2l6ZTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2NsZWFuVXBXYXRjaFN0cmVhbVN0YXRlKGUpIHtcbiAgICBlLkxfID0gdm9pZCAwO1xufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfb25XYXRjaFN0cmVhbUNvbm5lY3RlZChlKSB7XG4gICAgLy8gTWFyayB0aGUgY2xpZW50IGFzIG9ubGluZSBzaW5jZSB3ZSBnb3QgYSBcImNvbm5lY3RlZFwiIG5vdGlmaWNhdGlvbi5cbiAgICBlLk5fLnNldChcIk9ubGluZVwiIC8qIE9ubGluZVN0YXRlLk9ubGluZSAqLyk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9vbldhdGNoU3RyZWFtT3BlbihlKSB7XG4gICAgZS5GXy5mb3JFYWNoKCgodCwgbikgPT4ge1xuICAgICAgICBfX1BSSVZBVEVfc2VuZFdhdGNoUmVxdWVzdChlLCB0KTtcbiAgICB9KSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9vbldhdGNoU3RyZWFtQ2xvc2UoZSwgdCkge1xuICAgIF9fUFJJVkFURV9jbGVhblVwV2F0Y2hTdHJlYW1TdGF0ZShlKSwgXG4gICAgLy8gSWYgd2Ugc3RpbGwgbmVlZCB0aGUgd2F0Y2ggc3RyZWFtLCByZXRyeSB0aGUgY29ubmVjdGlvbi5cbiAgICBfX1BSSVZBVEVfc2hvdWxkU3RhcnRXYXRjaFN0cmVhbShlKSA/IChlLk5fLkRfKHQpLCBfX1BSSVZBVEVfc3RhcnRXYXRjaFN0cmVhbShlKSkgOiBcbiAgICAvLyBObyBuZWVkIHRvIHJlc3RhcnQgd2F0Y2ggc3RyZWFtIGJlY2F1c2UgdGhlcmUgYXJlIG5vIGFjdGl2ZSB0YXJnZXRzLlxuICAgIC8vIFRoZSBvbmxpbmUgc3RhdGUgaXMgc2V0IHRvIHVua25vd24gYmVjYXVzZSB0aGVyZSBpcyBubyBhY3RpdmUgYXR0ZW1wdFxuICAgIC8vIGF0IGVzdGFibGlzaGluZyBhIGNvbm5lY3Rpb25cbiAgICBlLk5fLnNldChcIlVua25vd25cIiAvKiBPbmxpbmVTdGF0ZS5Vbmtub3duICovKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX29uV2F0Y2hTdHJlYW1DaGFuZ2UoZSwgdCwgbikge1xuICAgIGlmIChcbiAgICAvLyBNYXJrIHRoZSBjbGllbnQgYXMgb25saW5lIHNpbmNlIHdlIGdvdCBhIG1lc3NhZ2UgZnJvbSB0aGUgc2VydmVyXG4gICAgZS5OXy5zZXQoXCJPbmxpbmVcIiAvKiBPbmxpbmVTdGF0ZS5PbmxpbmUgKi8pLCB0IGluc3RhbmNlb2YgX19QUklWQVRFX1dhdGNoVGFyZ2V0Q2hhbmdlICYmIDIgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5SZW1vdmVkICovID09PSB0LnN0YXRlICYmIHQuY2F1c2UpIFxuICAgIC8vIFRoZXJlIHdhcyBhbiBlcnJvciBvbiBhIHRhcmdldCwgZG9uJ3Qgd2FpdCBmb3IgYSBjb25zaXN0ZW50IHNuYXBzaG90XG4gICAgLy8gdG8gcmFpc2UgZXZlbnRzXG4gICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgXG4gICAgICAgIC8qKiBIYW5kbGVzIGFuIGVycm9yIG9uIGEgdGFyZ2V0ICovXG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9oYW5kbGVUYXJnZXRFcnJvcihlLCB0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5jYXVzZTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgciBvZiB0LnRhcmdldElkcykgXG4gICAgICAgICAgICAvLyBBIHdhdGNoZWQgdGFyZ2V0IG1pZ2h0IGhhdmUgYmVlbiByZW1vdmVkIGFscmVhZHkuXG4gICAgICAgICAgICBlLkZfLmhhcyhyKSAmJiAoYXdhaXQgZS5yZW1vdGVTeW5jZXIucmVqZWN0TGlzdGVuKHIsIG4pLCBlLkZfLmRlbGV0ZShyKSwgZS5MXy5yZW1vdmVUYXJnZXQocikpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQXR0ZW1wdHMgdG8gZmlsbCBvdXIgd3JpdGUgcGlwZWxpbmUgd2l0aCB3cml0ZXMgZnJvbSB0aGUgTG9jYWxTdG9yZS5cbiAqXG4gKiBDYWxsZWQgaW50ZXJuYWxseSB0byBib290c3RyYXAgb3IgcmVmaWxsIHRoZSB3cml0ZSBwaXBlbGluZSBhbmQgYnlcbiAqIFN5bmNFbmdpbmUgd2hlbmV2ZXIgdGhlcmUgYXJlIG5ldyBtdXRhdGlvbnMgdG8gcHJvY2Vzcy5cbiAqXG4gKiBTdGFydHMgdGhlIHdyaXRlIHN0cmVhbSBpZiBuZWNlc3NhcnkuXG4gKi8gKGUsIHQpO1xuICAgIH0gY2F0Y2ggKG4pIHtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiUmVtb3RlU3RvcmVcIiwgXCJGYWlsZWQgdG8gcmVtb3ZlIHRhcmdldHMgJXM6ICVzIFwiLCB0LnRhcmdldElkcy5qb2luKFwiLFwiKSwgbiksIFxuICAgICAgICBhd2FpdCBfX1BSSVZBVEVfZGlzYWJsZU5ldHdvcmtVbnRpbFJlY292ZXJ5KGUsIG4pO1xuICAgIH0gZWxzZSBpZiAodCBpbnN0YW5jZW9mIF9fUFJJVkFURV9Eb2N1bWVudFdhdGNoQ2hhbmdlID8gZS5MXy5LZSh0KSA6IHQgaW5zdGFuY2VvZiBfX1BSSVZBVEVfRXhpc3RlbmNlRmlsdGVyQ2hhbmdlID8gZS5MXy5IZSh0KSA6IGUuTF8uV2UodCksIFxuICAgICFuLmlzRXF1YWwoU25hcHNob3RWZXJzaW9uLm1pbigpKSkgdHJ5IHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlR2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbihlLmxvY2FsU3RvcmUpO1xuICAgICAgICBuLmNvbXBhcmVUbyh0KSA+PSAwICYmIFxuICAgICAgICAvLyBXZSBoYXZlIHJlY2VpdmVkIGEgdGFyZ2V0IGNoYW5nZSB3aXRoIGEgZ2xvYmFsIHNuYXBzaG90IGlmIHRoZSBzbmFwc2hvdFxuICAgICAgICAvLyB2ZXJzaW9uIGlzIG5vdCBlcXVhbCB0byBTbmFwc2hvdFZlcnNpb24ubWluKCkuXG4gICAgICAgIGF3YWl0IFxuICAgICAgICAvKipcbiAqIFRha2VzIGEgYmF0Y2ggb2YgY2hhbmdlcyBmcm9tIHRoZSBEYXRhc3RvcmUsIHJlcGFja2FnZXMgdGhlbSBhcyBhXG4gKiBSZW1vdGVFdmVudCwgYW5kIHBhc3NlcyB0aGF0IG9uIHRvIHRoZSBsaXN0ZW5lciwgd2hpY2ggaXMgdHlwaWNhbGx5IHRoZVxuICogU3luY0VuZ2luZS5cbiAqL1xuICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfcmFpc2VXYXRjaFNuYXBzaG90KGUsIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLkxfLnJ0KHQpO1xuICAgICAgICAgICAgLy8gVXBkYXRlIGluLW1lbW9yeSByZXN1bWUgdG9rZW5zLiBMb2NhbFN0b3JlIHdpbGwgdXBkYXRlIHRoZVxuICAgICAgICAgICAgLy8gcGVyc2lzdGVudCB2aWV3IG9mIHRoZXNlIHdoZW4gYXBwbHlpbmcgdGhlIGNvbXBsZXRlZCBSZW1vdGVFdmVudC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLnRhcmdldENoYW5nZXMuZm9yRWFjaCgoKG4sIHIpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobi5yZXN1bWVUb2tlbi5hcHByb3hpbWF0ZUJ5dGVTaXplKCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBlLkZfLmdldChyKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gQSB3YXRjaGVkIHRhcmdldCBtaWdodCBoYXZlIGJlZW4gcmVtb3ZlZCBhbHJlYWR5LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgJiYgZS5GXy5zZXQociwgaS53aXRoUmVzdW1lVG9rZW4obi5yZXN1bWVUb2tlbiwgdCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKSwgXG4gICAgICAgICAgICAvLyBSZS1lc3RhYmxpc2ggbGlzdGVucyBmb3IgdGhlIHRhcmdldHMgdGhhdCBoYXZlIGJlZW4gaW52YWxpZGF0ZWQgYnlcbiAgICAgICAgICAgIC8vIGV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2hlcy5cbiAgICAgICAgICAgIG4udGFyZ2V0TWlzbWF0Y2hlcy5mb3JFYWNoKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBlLkZfLmdldCh0KTtcbiAgICAgICAgICAgICAgICBpZiAoIXIpIFxuICAgICAgICAgICAgICAgIC8vIEEgd2F0Y2hlZCB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuIHJlbW92ZWQgYWxyZWFkeS5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgLy8gQ2xlYXIgdGhlIHJlc3VtZSB0b2tlbiBmb3IgdGhlIHRhcmdldCwgc2luY2Ugd2UncmUgaW4gYSBrbm93biBtaXNtYXRjaFxuICAgICAgICAgICAgICAgIC8vIHN0YXRlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLkZfLnNldCh0LCByLndpdGhSZXN1bWVUb2tlbihCeXRlU3RyaW5nLkVNUFRZX0JZVEVfU1RSSU5HLCByLnNuYXBzaG90VmVyc2lvbikpLCBcbiAgICAgICAgICAgICAgICAvLyBDYXVzZSBhIGhhcmQgcmVzZXQgYnkgdW53YXRjaGluZyBhbmQgcmV3YXRjaGluZyBpbW1lZGlhdGVseSwgYnV0XG4gICAgICAgICAgICAgICAgLy8gZGVsaWJlcmF0ZWx5IGRvbid0IHNlbmQgYSByZXN1bWUgdG9rZW4gc28gdGhhdCB3ZSBnZXQgYSBmdWxsIHVwZGF0ZS5cbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfc2VuZFVud2F0Y2hSZXF1ZXN0KGUsIHQpO1xuICAgICAgICAgICAgICAgIC8vIE1hcmsgdGhlIHRhcmdldCB3ZSBzZW5kIGFzIGJlaW5nIG9uIGJlaGFsZiBvZiBhbiBleGlzdGVuY2UgZmlsdGVyXG4gICAgICAgICAgICAgICAgLy8gbWlzbWF0Y2gsIGJ1dCBkb24ndCBhY3R1YWxseSByZXRhaW4gdGhhdCBpbiBsaXN0ZW5UYXJnZXRzLiBUaGlzIGVuc3VyZXNcbiAgICAgICAgICAgICAgICAvLyB0aGF0IHdlIGZsYWcgdGhlIGZpcnN0IHJlLWxpc3RlbiB0aGlzIHdheSB3aXRob3V0IGltcGFjdGluZyBmdXR1cmVcbiAgICAgICAgICAgICAgICAvLyBsaXN0ZW5zIG9mIHRoaXMgdGFyZ2V0ICh0aGF0IG1pZ2h0IGhhcHBlbiBlLmcuIG9uIHJlY29ubmVjdCkuXG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IG5ldyBUYXJnZXREYXRhKHIudGFyZ2V0LCB0LCBuLCByLnNlcXVlbmNlTnVtYmVyKTtcbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfc2VuZFdhdGNoUmVxdWVzdChlLCBpKTtcbiAgICAgICAgICAgIH0pKSwgZS5yZW1vdGVTeW5jZXIuYXBwbHlSZW1vdGVFdmVudChuKTtcbiAgICAgICAgfShlLCBuKTtcbiAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlJlbW90ZVN0b3JlXCIsIFwiRmFpbGVkIHRvIHJhaXNlIHNuYXBzaG90OlwiLCB0KSwgYXdhaXQgX19QUklWQVRFX2Rpc2FibGVOZXR3b3JrVW50aWxSZWNvdmVyeShlLCB0KTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVjb3ZlcnkgbG9naWMgZm9yIEluZGV4ZWREQiBlcnJvcnMgdGhhdCB0YWtlcyB0aGUgbmV0d29yayBvZmZsaW5lIHVudGlsXG4gKiBgb3BgIHN1Y2NlZWRzLiBSZXRyaWVzIGFyZSBzY2hlZHVsZWQgd2l0aCBiYWNrb2ZmIHVzaW5nXG4gKiBgZW5xdWV1ZVJldHJ5YWJsZSgpYC4gSWYgYG9wKClgIGlzIG5vdCBwcm92aWRlZCwgSW5kZXhlZERCIGFjY2VzcyBpc1xuICogdmFsaWRhdGVkIHZpYSBhIGdlbmVyaWMgb3BlcmF0aW9uLlxuICpcbiAqIFRoZSByZXR1cm5lZCBQcm9taXNlIGlzIHJlc29sdmVkIG9uY2UgdGhlIG5ldHdvcmsgaXMgZGlzYWJsZWQgYW5kIGJlZm9yZVxuICogYW55IHJldHJ5IGF0dGVtcHQuXG4gKi8gYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2Rpc2FibGVOZXR3b3JrVW50aWxSZWNvdmVyeShlLCB0LCBuKSB7XG4gICAgaWYgKCFfX1BSSVZBVEVfaXNJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yKHQpKSB0aHJvdyB0O1xuICAgIGUuTV8uYWRkKDEgLyogT2ZmbGluZUNhdXNlLkluZGV4ZWREYkZhaWxlZCAqLyksIFxuICAgIC8vIERpc2FibGUgbmV0d29yayBhbmQgcmFpc2Ugb2ZmbGluZSBzbmFwc2hvdHNcbiAgICBhd2FpdCBfX1BSSVZBVEVfZGlzYWJsZU5ldHdvcmtJbnRlcm5hbChlKSwgZS5OXy5zZXQoXCJPZmZsaW5lXCIgLyogT25saW5lU3RhdGUuT2ZmbGluZSAqLyksIFxuICAgIG4gfHwgKFxuICAgIC8vIFVzZSBhIHNpbXBsZSByZWFkIG9wZXJhdGlvbiB0byBkZXRlcm1pbmUgaWYgSW5kZXhlZERCIHJlY292ZXJlZC5cbiAgICAvLyBJZGVhbGx5LCB3ZSB3b3VsZCBleHBvc2UgYSBoZWFsdGggY2hlY2sgZGlyZWN0bHkgb24gU2ltcGxlRGIsIGJ1dFxuICAgIC8vIFJlbW90ZVN0b3JlIG9ubHkgaGFzIGFjY2VzcyB0byBwZXJzaXN0ZW5jZSB0aHJvdWdoIExvY2FsU3RvcmUuXG4gICAgbiA9ICgpID0+IF9fUFJJVkFURV9sb2NhbFN0b3JlR2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbihlLmxvY2FsU3RvcmUpKSwgXG4gICAgLy8gUHJvYmUgSW5kZXhlZERCIHBlcmlvZGljYWxseSBhbmQgcmUtZW5hYmxlIG5ldHdvcmtcbiAgICBlLmFzeW5jUXVldWUuZW5xdWV1ZVJldHJ5YWJsZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJSZW1vdGVTdG9yZVwiLCBcIlJldHJ5aW5nIEluZGV4ZWREQiBhY2Nlc3NcIiksIGF3YWl0IG4oKSwgZS5NXy5kZWxldGUoMSAvKiBPZmZsaW5lQ2F1c2UuSW5kZXhlZERiRmFpbGVkICovKSwgXG4gICAgICAgIGF3YWl0IF9fUFJJVkFURV9lbmFibGVOZXR3b3JrSW50ZXJuYWwoZSk7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIEV4ZWN1dGVzIGBvcGAuIElmIGBvcGAgZmFpbHMsIHRha2VzIHRoZSBuZXR3b3JrIG9mZmxpbmUgdW50aWwgYG9wYFxuICogc3VjY2VlZHMuIFJldHVybnMgYWZ0ZXIgdGhlIGZpcnN0IGF0dGVtcHQuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2V4ZWN1dGVXaXRoUmVjb3ZlcnkoZSwgdCkge1xuICAgIHJldHVybiB0KCkuY2F0Y2goKG4gPT4gX19QUklWQVRFX2Rpc2FibGVOZXR3b3JrVW50aWxSZWNvdmVyeShlLCBuLCB0KSkpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfZmlsbFdyaXRlUGlwZWxpbmUoZSkge1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCBuID0gX19QUklWQVRFX2Vuc3VyZVdyaXRlU3RyZWFtKHQpO1xuICAgIGxldCByID0gdC52Xy5sZW5ndGggPiAwID8gdC52X1t0LnZfLmxlbmd0aCAtIDFdLmJhdGNoSWQgOiAtMTtcbiAgICBmb3IgKDtfX1BSSVZBVEVfY2FuQWRkVG9Xcml0ZVBpcGVsaW5lKHQpOyApIHRyeSB7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUdldE5leHRNdXRhdGlvbkJhdGNoKHQubG9jYWxTdG9yZSwgcik7XG4gICAgICAgIGlmIChudWxsID09PSBlKSB7XG4gICAgICAgICAgICAwID09PSB0LnZfLmxlbmd0aCAmJiBuLm5fKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByID0gZS5iYXRjaElkLCBfX1BSSVZBVEVfYWRkVG9Xcml0ZVBpcGVsaW5lKHQsIGUpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgYXdhaXQgX19QUklWQVRFX2Rpc2FibGVOZXR3b3JrVW50aWxSZWNvdmVyeSh0LCBlKTtcbiAgICB9XG4gICAgX19QUklWQVRFX3Nob3VsZFN0YXJ0V3JpdGVTdHJlYW0odCkgJiYgX19QUklWQVRFX3N0YXJ0V3JpdGVTdHJlYW0odCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHdlIGNhbiBhZGQgdG8gdGhlIHdyaXRlIHBpcGVsaW5lIChpLmUuIHRoZSBuZXR3b3JrIGlzXG4gKiBlbmFibGVkIGFuZCB0aGUgd3JpdGUgcGlwZWxpbmUgaXMgbm90IGZ1bGwpLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9jYW5BZGRUb1dyaXRlUGlwZWxpbmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfY2FuVXNlTmV0d29yayhlKSAmJiBlLnZfLmxlbmd0aCA8IDEwO1xufVxuXG4vKipcbiAqIFF1ZXVlcyBhZGRpdGlvbmFsIHdyaXRlcyB0byBiZSBzZW50IHRvIHRoZSB3cml0ZSBzdHJlYW0sIHNlbmRpbmcgdGhlbVxuICogaW1tZWRpYXRlbHkgaWYgdGhlIHdyaXRlIHN0cmVhbSBpcyBlc3RhYmxpc2hlZC5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfYWRkVG9Xcml0ZVBpcGVsaW5lKGUsIHQpIHtcbiAgICBlLnZfLnB1c2godCk7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9lbnN1cmVXcml0ZVN0cmVhbShlKTtcbiAgICBuLlhvKCkgJiYgbi5FXyAmJiBuLmRfKHQubXV0YXRpb25zKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3Nob3VsZFN0YXJ0V3JpdGVTdHJlYW0oZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfY2FuVXNlTmV0d29yayhlKSAmJiAhX19QUklWQVRFX2Vuc3VyZVdyaXRlU3RyZWFtKGUpLlpvKCkgJiYgZS52Xy5sZW5ndGggPiAwO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfc3RhcnRXcml0ZVN0cmVhbShlKSB7XG4gICAgX19QUklWQVRFX2Vuc3VyZVdyaXRlU3RyZWFtKGUpLnN0YXJ0KCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9vbldyaXRlU3RyZWFtT3BlbihlKSB7XG4gICAgX19QUklWQVRFX2Vuc3VyZVdyaXRlU3RyZWFtKGUpLlZfKCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9vbldyaXRlSGFuZHNoYWtlQ29tcGxldGUoZSkge1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZW5zdXJlV3JpdGVTdHJlYW0oZSk7XG4gICAgLy8gU2VuZCB0aGUgd3JpdGUgcGlwZWxpbmUgbm93IHRoYXQgdGhlIHN0cmVhbSBpcyBlc3RhYmxpc2hlZC5cbiAgICAgICAgZm9yIChjb25zdCBuIG9mIGUudl8pIHQuZF8obi5tdXRhdGlvbnMpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfb25NdXRhdGlvblJlc3VsdChlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IGUudl8uc2hpZnQoKSwgaSA9IE11dGF0aW9uQmF0Y2hSZXN1bHQuZnJvbShyLCB0LCBuKTtcbiAgICBhd2FpdCBfX1BSSVZBVEVfZXhlY3V0ZVdpdGhSZWNvdmVyeShlLCAoKCkgPT4gZS5yZW1vdGVTeW5jZXIuYXBwbHlTdWNjZXNzZnVsV3JpdGUoaSkpKSwgXG4gICAgLy8gSXQncyBwb3NzaWJsZSB0aGF0IHdpdGggdGhlIGNvbXBsZXRpb24gb2YgdGhpcyBtdXRhdGlvbiBhbm90aGVyXG4gICAgLy8gc2xvdCBoYXMgZnJlZWQgdXAuXG4gICAgYXdhaXQgX19QUklWQVRFX2ZpbGxXcml0ZVBpcGVsaW5lKGUpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfb25Xcml0ZVN0cmVhbUNsb3NlKGUsIHQpIHtcbiAgICAvLyBJZiB0aGUgd3JpdGUgc3RyZWFtIGNsb3NlZCBhZnRlciB0aGUgd3JpdGUgaGFuZHNoYWtlIGNvbXBsZXRlcywgYSB3cml0ZVxuICAgIC8vIG9wZXJhdGlvbiBmYWlsZWQgYW5kIHdlIGZhaWwgdGhlIHBlbmRpbmcgb3BlcmF0aW9uLlxuICAgIHQgJiYgX19QUklWQVRFX2Vuc3VyZVdyaXRlU3RyZWFtKGUpLkVfICYmIFxuICAgIC8vIFRoaXMgZXJyb3IgYWZmZWN0cyB0aGUgYWN0dWFsIHdyaXRlLlxuICAgIGF3YWl0IGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9oYW5kbGVXcml0ZUVycm9yKGUsIHQpIHtcbiAgICAgICAgLy8gT25seSBoYW5kbGUgcGVybWFuZW50IGVycm9ycyBoZXJlLiBJZiBpdCdzIHRyYW5zaWVudCwganVzdCBsZXQgdGhlIHJldHJ5XG4gICAgICAgIC8vIGxvZ2ljIGtpY2sgaW4uXG4gICAgICAgIGlmIChmdW5jdGlvbiBfX1BSSVZBVEVfaXNQZXJtYW5lbnRXcml0ZUVycm9yKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfaXNQZXJtYW5lbnRFcnJvcihlKSAmJiBlICE9PSBDLkFCT1JURUQ7XG4gICAgICAgIH0odC5jb2RlKSkge1xuICAgICAgICAgICAgLy8gVGhpcyB3YXMgYSBwZXJtYW5lbnQgZXJyb3IsIHRoZSByZXF1ZXN0IGl0c2VsZiB3YXMgdGhlIHByb2JsZW1cbiAgICAgICAgICAgIC8vIHNvIGl0J3Mgbm90IGdvaW5nIHRvIHN1Y2NlZWQgaWYgd2UgcmVzZW5kIGl0LlxuICAgICAgICAgICAgY29uc3QgbiA9IGUudl8uc2hpZnQoKTtcbiAgICAgICAgICAgIC8vIEluIHRoaXMgY2FzZSBpdCdzIGFsc28gdW5saWtlbHkgdGhhdCB0aGUgc2VydmVyIGl0c2VsZiBpcyBtZWx0aW5nXG4gICAgICAgICAgICAvLyBkb3duIC0tIHRoaXMgd2FzIGp1c3QgYSBiYWQgcmVxdWVzdCBzbyBpbmhpYml0IGJhY2tvZmYgb24gdGhlIG5leHRcbiAgICAgICAgICAgIC8vIHJlc3RhcnQuXG4gICAgICAgICAgICAgICAgICAgICAgICBfX1BSSVZBVEVfZW5zdXJlV3JpdGVTdHJlYW0oZSkudF8oKSwgYXdhaXQgX19QUklWQVRFX2V4ZWN1dGVXaXRoUmVjb3ZlcnkoZSwgKCgpID0+IGUucmVtb3RlU3luY2VyLnJlamVjdEZhaWxlZFdyaXRlKG4uYmF0Y2hJZCwgdCkpKSwgXG4gICAgICAgICAgICAvLyBJdCdzIHBvc3NpYmxlIHRoYXQgd2l0aCB0aGUgY29tcGxldGlvbiBvZiB0aGlzIG11dGF0aW9uXG4gICAgICAgICAgICAvLyBhbm90aGVyIHNsb3QgaGFzIGZyZWVkIHVwLlxuICAgICAgICAgICAgYXdhaXQgX19QUklWQVRFX2ZpbGxXcml0ZVBpcGVsaW5lKGUpO1xuICAgICAgICB9XG4gICAgfShlLCB0KSwgXG4gICAgLy8gVGhlIHdyaXRlIHN0cmVhbSBtaWdodCBoYXZlIGJlZW4gc3RhcnRlZCBieSByZWZpbGxpbmcgdGhlIHdyaXRlXG4gICAgLy8gcGlwZWxpbmUgZm9yIGZhaWxlZCB3cml0ZXNcbiAgICBfX1BSSVZBVEVfc2hvdWxkU3RhcnRXcml0ZVN0cmVhbShlKSAmJiBfX1BSSVZBVEVfc3RhcnRXcml0ZVN0cmVhbShlKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3JlbW90ZVN0b3JlSGFuZGxlQ3JlZGVudGlhbENoYW5nZShlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgbi5hc3luY1F1ZXVlLnZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MoKSwgX19QUklWQVRFX2xvZ0RlYnVnKFwiUmVtb3RlU3RvcmVcIiwgXCJSZW1vdGVTdG9yZSByZWNlaXZlZCBuZXcgY3JlZGVudGlhbHNcIik7XG4gICAgY29uc3QgciA9IF9fUFJJVkFURV9jYW5Vc2VOZXR3b3JrKG4pO1xuICAgIC8vIFRlYXIgZG93biBhbmQgcmUtY3JlYXRlIG91ciBuZXR3b3JrIHN0cmVhbXMuIFRoaXMgd2lsbCBlbnN1cmUgd2UgZ2V0IGFcbiAgICAvLyBmcmVzaCBhdXRoIHRva2VuIGZvciB0aGUgbmV3IHVzZXIgYW5kIHJlLWZpbGwgdGhlIHdyaXRlIHBpcGVsaW5lIHdpdGhcbiAgICAvLyBuZXcgbXV0YXRpb25zIGZyb20gdGhlIExvY2FsU3RvcmUgKHNpbmNlIG11dGF0aW9ucyBhcmUgcGVyLXVzZXIpLlxuICAgICAgICBuLk1fLmFkZCgzIC8qIE9mZmxpbmVDYXVzZS5DcmVkZW50aWFsQ2hhbmdlICovKSwgYXdhaXQgX19QUklWQVRFX2Rpc2FibGVOZXR3b3JrSW50ZXJuYWwobiksIFxuICAgIHIgJiYgXG4gICAgLy8gRG9uJ3Qgc2V0IHRoZSBuZXR3b3JrIHN0YXR1cyB0byBVbmtub3duIGlmIHdlIGFyZSBvZmZsaW5lLlxuICAgIG4uTl8uc2V0KFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8pLCBhd2FpdCBuLnJlbW90ZVN5bmNlci5oYW5kbGVDcmVkZW50aWFsQ2hhbmdlKHQpLCBcbiAgICBuLk1fLmRlbGV0ZSgzIC8qIE9mZmxpbmVDYXVzZS5DcmVkZW50aWFsQ2hhbmdlICovKSwgYXdhaXQgX19QUklWQVRFX2VuYWJsZU5ldHdvcmtJbnRlcm5hbChuKTtcbn1cblxuLyoqXG4gKiBUb2dnbGVzIHRoZSBuZXR3b3JrIHN0YXRlIHdoZW4gdGhlIGNsaWVudCBnYWlucyBvciBsb3NlcyBpdHMgcHJpbWFyeSBsZWFzZS5cbiAqLyBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfcmVtb3RlU3RvcmVBcHBseVByaW1hcnlTdGF0ZShlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgdCA/IChuLk1fLmRlbGV0ZSgyIC8qIE9mZmxpbmVDYXVzZS5Jc1NlY29uZGFyeSAqLyksIGF3YWl0IF9fUFJJVkFURV9lbmFibGVOZXR3b3JrSW50ZXJuYWwobikpIDogdCB8fCAobi5NXy5hZGQoMiAvKiBPZmZsaW5lQ2F1c2UuSXNTZWNvbmRhcnkgKi8pLCBcbiAgICBhd2FpdCBfX1BSSVZBVEVfZGlzYWJsZU5ldHdvcmtJbnRlcm5hbChuKSwgbi5OXy5zZXQoXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLykpO1xufVxuXG4vKipcbiAqIElmIG5vdCB5ZXQgaW5pdGlhbGl6ZWQsIHJlZ2lzdGVycyB0aGUgV2F0Y2hTdHJlYW0gYW5kIGl0cyBuZXR3b3JrIHN0YXRlXG4gKiBjYWxsYmFjayB3aXRoIGByZW1vdGVTdG9yZUltcGxgLiBSZXR1cm5zIHRoZSBleGlzdGluZyBzdHJlYW0gaWYgb25lIGlzXG4gKiBhbHJlYWR5IGF2YWlsYWJsZS5cbiAqXG4gKiBQT1JUSU5HIE5PVEU6IE9uIGlPUyBhbmQgQW5kcm9pZCwgdGhlIFdhdGNoU3RyZWFtIGdldHMgcmVnaXN0ZXJlZCBvbiBzdGFydHVwLlxuICogVGhpcyBpcyBub3QgZG9uZSBvbiBXZWIgdG8gYWxsb3cgaXQgdG8gYmUgdHJlZS1zaGFrZW4uXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2Vuc3VyZVdhdGNoU3RyZWFtKGUpIHtcbiAgICByZXR1cm4gZS5CXyB8fCAoXG4gICAgLy8gQ3JlYXRlIHN0cmVhbSAoYnV0IG5vdGUgdGhhdCBpdCBpcyBub3Qgc3RhcnRlZCB5ZXQpLlxuICAgIGUuQl8gPSBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3UGVyc2lzdGVudFdhdGNoU3RyZWFtKGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgICAgIHJldHVybiByLmZfKCksIG5ldyBfX1BSSVZBVEVfUGVyc2lzdGVudExpc3RlblN0cmVhbSh0LCByLmNvbm5lY3Rpb24sIHIuYXV0aENyZWRlbnRpYWxzLCByLmFwcENoZWNrQ3JlZGVudGlhbHMsIHIuc2VyaWFsaXplciwgbik7XG4gICAgfVxuICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIChlLmRhdGFzdG9yZSwgZS5hc3luY1F1ZXVlLCB7XG4gICAgICAgIFBvOiBfX1BSSVZBVEVfb25XYXRjaFN0cmVhbUNvbm5lY3RlZC5iaW5kKG51bGwsIGUpLFxuICAgICAgICBUbzogX19QUklWQVRFX29uV2F0Y2hTdHJlYW1PcGVuLmJpbmQobnVsbCwgZSksXG4gICAgICAgIEFvOiBfX1BSSVZBVEVfb25XYXRjaFN0cmVhbUNsb3NlLmJpbmQobnVsbCwgZSksXG4gICAgICAgIGhfOiBfX1BSSVZBVEVfb25XYXRjaFN0cmVhbUNoYW5nZS5iaW5kKG51bGwsIGUpXG4gICAgfSksIGUueF8ucHVzaCgoYXN5bmMgdCA9PiB7XG4gICAgICAgIHQgPyAoZS5CXy50XygpLCBfX1BSSVZBVEVfc2hvdWxkU3RhcnRXYXRjaFN0cmVhbShlKSA/IF9fUFJJVkFURV9zdGFydFdhdGNoU3RyZWFtKGUpIDogZS5OXy5zZXQoXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLykpIDogKGF3YWl0IGUuQl8uc3RvcCgpLCBcbiAgICAgICAgX19QUklWQVRFX2NsZWFuVXBXYXRjaFN0cmVhbVN0YXRlKGUpKTtcbiAgICB9KSkpLCBlLkJfO1xufVxuXG4vKipcbiAqIElmIG5vdCB5ZXQgaW5pdGlhbGl6ZWQsIHJlZ2lzdGVycyB0aGUgV3JpdGVTdHJlYW0gYW5kIGl0cyBuZXR3b3JrIHN0YXRlXG4gKiBjYWxsYmFjayB3aXRoIGByZW1vdGVTdG9yZUltcGxgLiBSZXR1cm5zIHRoZSBleGlzdGluZyBzdHJlYW0gaWYgb25lIGlzXG4gKiBhbHJlYWR5IGF2YWlsYWJsZS5cbiAqXG4gKiBQT1JUSU5HIE5PVEU6IE9uIGlPUyBhbmQgQW5kcm9pZCwgdGhlIFdyaXRlU3RyZWFtIGdldHMgcmVnaXN0ZXJlZCBvbiBzdGFydHVwLlxuICogVGhpcyBpcyBub3QgZG9uZSBvbiBXZWIgdG8gYWxsb3cgaXQgdG8gYmUgdHJlZS1zaGFrZW4uXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2Vuc3VyZVdyaXRlU3RyZWFtKGUpIHtcbiAgICByZXR1cm4gZS5rXyB8fCAoXG4gICAgLy8gQ3JlYXRlIHN0cmVhbSAoYnV0IG5vdGUgdGhhdCBpdCBpcyBub3Qgc3RhcnRlZCB5ZXQpLlxuICAgIGUua18gPSBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3UGVyc2lzdGVudFdyaXRlU3RyZWFtKGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgICAgIHJldHVybiByLmZfKCksIG5ldyBfX1BSSVZBVEVfUGVyc2lzdGVudFdyaXRlU3RyZWFtKHQsIHIuY29ubmVjdGlvbiwgci5hdXRoQ3JlZGVudGlhbHMsIHIuYXBwQ2hlY2tDcmVkZW50aWFscywgci5zZXJpYWxpemVyLCBuKTtcbiAgICB9KGUuZGF0YXN0b3JlLCBlLmFzeW5jUXVldWUsIHtcbiAgICAgICAgUG86ICgpID0+IFByb21pc2UucmVzb2x2ZSgpLFxuICAgICAgICBUbzogX19QUklWQVRFX29uV3JpdGVTdHJlYW1PcGVuLmJpbmQobnVsbCwgZSksXG4gICAgICAgIEFvOiBfX1BSSVZBVEVfb25Xcml0ZVN0cmVhbUNsb3NlLmJpbmQobnVsbCwgZSksXG4gICAgICAgIFJfOiBfX1BSSVZBVEVfb25Xcml0ZUhhbmRzaGFrZUNvbXBsZXRlLmJpbmQobnVsbCwgZSksXG4gICAgICAgIEFfOiBfX1BSSVZBVEVfb25NdXRhdGlvblJlc3VsdC5iaW5kKG51bGwsIGUpXG4gICAgfSksIGUueF8ucHVzaCgoYXN5bmMgdCA9PiB7XG4gICAgICAgIHQgPyAoZS5rXy50XygpLCBcbiAgICAgICAgLy8gVGhpcyB3aWxsIHN0YXJ0IHRoZSB3cml0ZSBzdHJlYW0gaWYgbmVjZXNzYXJ5LlxuICAgICAgICBhd2FpdCBfX1BSSVZBVEVfZmlsbFdyaXRlUGlwZWxpbmUoZSkpIDogKGF3YWl0IGUua18uc3RvcCgpLCBlLnZfLmxlbmd0aCA+IDAgJiYgKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlJlbW90ZVN0b3JlXCIsIGBTdG9wcGluZyB3cml0ZSBzdHJlYW0gd2l0aCAke2Uudl8ubGVuZ3RofSBwZW5kaW5nIHdyaXRlc2ApLCBcbiAgICAgICAgZS52XyA9IFtdKSk7XG4gICAgfSkpKSwgZS5rXztcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhbiBvcGVyYXRpb24gc2NoZWR1bGVkIHRvIGJlIHJ1biBpbiB0aGUgZnV0dXJlIG9uIGFuIEFzeW5jUXVldWUuXG4gKlxuICogSXQgaXMgY3JlYXRlZCB2aWEgRGVsYXllZE9wZXJhdGlvbi5jcmVhdGVBbmRTY2hlZHVsZSgpLlxuICpcbiAqIFN1cHBvcnRzIGNhbmNlbGxhdGlvbiAodmlhIGNhbmNlbCgpKSBhbmQgZWFybHkgZXhlY3V0aW9uICh2aWEgc2tpcERlbGF5KCkpLlxuICpcbiAqIE5vdGU6IFdlIGltcGxlbWVudCBgUHJvbWlzZUxpa2VgIGluc3RlYWQgb2YgYFByb21pc2VgLCBhcyB0aGUgYFByb21pc2VgIHR5cGVcbiAqIGluIG5ld2VyIHZlcnNpb25zIG9mIFR5cGVTY3JpcHQgZGVmaW5lcyBgZmluYWxseWAsIHdoaWNoIGlzIG5vdCBhdmFpbGFibGUgaW5cbiAqIElFLlxuICovXG5jbGFzcyBEZWxheWVkT3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZSA9IGUsIHRoaXMudGltZXJJZCA9IHQsIHRoaXMudGFyZ2V0VGltZU1zID0gbiwgdGhpcy5vcCA9IHIsIHRoaXMucmVtb3ZhbENhbGxiYWNrID0gaSwgXG4gICAgICAgIHRoaXMuZGVmZXJyZWQgPSBuZXcgX19QUklWQVRFX0RlZmVycmVkLCB0aGlzLnRoZW4gPSB0aGlzLmRlZmVycmVkLnByb21pc2UudGhlbi5iaW5kKHRoaXMuZGVmZXJyZWQucHJvbWlzZSksIFxuICAgICAgICAvLyBJdCdzIG5vcm1hbCBmb3IgdGhlIGRlZmVycmVkIHByb21pc2UgdG8gYmUgY2FuY2VsZWQgKGR1ZSB0byBjYW5jZWxsYXRpb24pXG4gICAgICAgIC8vIGFuZCBzbyB3ZSBhdHRhY2ggYSBkdW1teSBjYXRjaCBjYWxsYmFjayB0byBhdm9pZFxuICAgICAgICAvLyAnVW5oYW5kbGVkUHJvbWlzZVJlamVjdGlvbldhcm5pbmcnIGxvZyBzcGFtLlxuICAgICAgICB0aGlzLmRlZmVycmVkLnByb21pc2UuY2F0Y2goKGUgPT4ge30pKTtcbiAgICB9XG4gICAgZ2V0IHByb21pc2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRlZmVycmVkLnByb21pc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBEZWxheWVkT3BlcmF0aW9uIHRoYXQgaGFzIGJlZW4gc2NoZWR1bGVkIHRvIGJlXG4gICAgICogZXhlY3V0ZWQgb24gdGhlIHByb3ZpZGVkIGFzeW5jUXVldWUgYWZ0ZXIgdGhlIHByb3ZpZGVkIGRlbGF5TXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXN5bmNRdWV1ZSAtIFRoZSBxdWV1ZSB0byBzY2hlZHVsZSB0aGUgb3BlcmF0aW9uIG9uLlxuICAgICAqIEBwYXJhbSBpZCAtIEEgVGltZXIgSUQgaWRlbnRpZnlpbmcgdGhlIHR5cGUgb2Ygb3BlcmF0aW9uIHRoaXMgaXMuXG4gICAgICogQHBhcmFtIGRlbGF5TXMgLSBUaGUgZGVsYXkgKG1zKSBiZWZvcmUgdGhlIG9wZXJhdGlvbiBzaG91bGQgYmUgc2NoZWR1bGVkLlxuICAgICAqIEBwYXJhbSBvcCAtIFRoZSBvcGVyYXRpb24gdG8gcnVuLlxuICAgICAqIEBwYXJhbSByZW1vdmFsQ2FsbGJhY2sgLSBBIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCBzeW5jaHJvbm91c2x5IG9uY2UgdGhlXG4gICAgICogICBvcGVyYXRpb24gaXMgZXhlY3V0ZWQgb3IgY2FuY2VsZWQsIG5vdGlmeWluZyB0aGUgQXN5bmNRdWV1ZSB0byByZW1vdmUgaXRcbiAgICAgKiAgIGZyb20gaXRzIGRlbGF5ZWRPcGVyYXRpb25zIGxpc3QuXG4gICAgICogICBQT1JUSU5HIE5PVEU6IFRoaXMgZXhpc3RzIHRvIHByZXZlbnQgbWFraW5nIHJlbW92ZURlbGF5ZWRPcGVyYXRpb24oKSBhbmRcbiAgICAgKiAgIHRoZSBEZWxheWVkT3BlcmF0aW9uIGNsYXNzIHB1YmxpYy5cbiAgICAgKi8gICAgc3RhdGljIGNyZWF0ZUFuZFNjaGVkdWxlKGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IERhdGUubm93KCkgKyBuLCBvID0gbmV3IERlbGF5ZWRPcGVyYXRpb24oZSwgdCwgcywgciwgaSk7XG4gICAgICAgIHJldHVybiBvLnN0YXJ0KG4pLCBvO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGFydHMgdGhlIHRpbWVyLiBUaGlzIGlzIGNhbGxlZCBpbW1lZGlhdGVseSBhZnRlciBjb25zdHJ1Y3Rpb24gYnlcbiAgICAgKiBjcmVhdGVBbmRTY2hlZHVsZSgpLlxuICAgICAqLyAgICBzdGFydChlKSB7XG4gICAgICAgIHRoaXMudGltZXJIYW5kbGUgPSBzZXRUaW1lb3V0KCgoKSA9PiB0aGlzLmhhbmRsZURlbGF5RWxhcHNlZCgpKSwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFF1ZXVlcyB0aGUgb3BlcmF0aW9uIHRvIHJ1biBpbW1lZGlhdGVseSAoaWYgaXQgaGFzbid0IGFscmVhZHkgYmVlbiBydW4gb3JcbiAgICAgKiBjYW5jZWxlZCkuXG4gICAgICovICAgIHNraXBEZWxheSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlRGVsYXlFbGFwc2VkKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbmNlbHMgdGhlIG9wZXJhdGlvbiBpZiBpdCBoYXNuJ3QgYWxyZWFkeSBiZWVuIGV4ZWN1dGVkIG9yIGNhbmNlbGVkLiBUaGVcbiAgICAgKiBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQuXG4gICAgICpcbiAgICAgKiBBcyBsb25nIGFzIHRoZSBvcGVyYXRpb24gaGFzIG5vdCB5ZXQgYmVlbiBydW4sIGNhbGxpbmcgY2FuY2VsKCkgcHJvdmlkZXMgYVxuICAgICAqIGd1YXJhbnRlZSB0aGF0IHRoZSBvcGVyYXRpb24gd2lsbCBub3QgYmUgcnVuLlxuICAgICAqLyAgICBjYW5jZWwoZSkge1xuICAgICAgICBudWxsICE9PSB0aGlzLnRpbWVySGFuZGxlICYmICh0aGlzLmNsZWFyVGltZW91dCgpLCB0aGlzLmRlZmVycmVkLnJlamVjdChuZXcgRmlyZXN0b3JlRXJyb3IoQy5DQU5DRUxMRUQsIFwiT3BlcmF0aW9uIGNhbmNlbGxlZFwiICsgKGUgPyBcIjogXCIgKyBlIDogXCJcIikpKSk7XG4gICAgfVxuICAgIGhhbmRsZURlbGF5RWxhcHNlZCgpIHtcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKCgpID0+IG51bGwgIT09IHRoaXMudGltZXJIYW5kbGUgPyAodGhpcy5jbGVhclRpbWVvdXQoKSwgXG4gICAgICAgIHRoaXMub3AoKS50aGVuKChlID0+IHRoaXMuZGVmZXJyZWQucmVzb2x2ZShlKSkpKSA6IFByb21pc2UucmVzb2x2ZSgpKSk7XG4gICAgfVxuICAgIGNsZWFyVGltZW91dCgpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy50aW1lckhhbmRsZSAmJiAodGhpcy5yZW1vdmFsQ2FsbGJhY2sodGhpcyksIGNsZWFyVGltZW91dCh0aGlzLnRpbWVySGFuZGxlKSwgXG4gICAgICAgIHRoaXMudGltZXJIYW5kbGUgPSBudWxsKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIEZpcmVzdG9yZUVycm9yIHRoYXQgY2FuIGJlIHN1cmZhY2VkIHRvIHRoZSB1c2VyIGlmIHRoZSBwcm92aWRlZFxuICogZXJyb3IgaXMgYW4gSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvci4gUmUtdGhyb3dzIHRoZSBlcnJvciBvdGhlcndpc2UuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3dyYXBJblVzZXJFcnJvcklmUmVjb3ZlcmFibGUoZSwgdCkge1xuICAgIGlmIChfX1BSSVZBVEVfbG9nRXJyb3IoXCJBc3luY1F1ZXVlXCIsIGAke3R9OiAke2V9YCksIF9fUFJJVkFURV9pc0luZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IoZSkpIHJldHVybiBuZXcgRmlyZXN0b3JlRXJyb3IoQy5VTkFWQUlMQUJMRSwgYCR7dH06ICR7ZX1gKTtcbiAgICB0aHJvdyBlO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBEb2N1bWVudFNldCBpcyBhbiBpbW11dGFibGUgKGNvcHktb24td3JpdGUpIGNvbGxlY3Rpb24gdGhhdCBob2xkcyBkb2N1bWVudHNcbiAqIGluIG9yZGVyIHNwZWNpZmllZCBieSB0aGUgcHJvdmlkZWQgY29tcGFyYXRvci4gV2UgYWx3YXlzIGFkZCBhIGRvY3VtZW50IGtleVxuICogY29tcGFyYXRvciBvbiB0b3Agb2Ygd2hhdCBpcyBwcm92aWRlZCB0byBndWFyYW50ZWUgZG9jdW1lbnQgZXF1YWxpdHkgYmFzZWQgb25cbiAqIHRoZSBrZXkuXG4gKi8gY2xhc3MgRG9jdW1lbnRTZXQge1xuICAgIC8qKiBUaGUgZGVmYXVsdCBvcmRlcmluZyBpcyBieSBrZXkgaWYgdGhlIGNvbXBhcmF0b3IgaXMgb21pdHRlZCAqL1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgLy8gV2UgYXJlIGFkZGluZyBkb2N1bWVudCBrZXkgY29tcGFyYXRvciB0byB0aGUgZW5kIGFzIGl0J3MgdGhlIG9ubHlcbiAgICAgICAgLy8gZ3VhcmFudGVlZCB1bmlxdWUgcHJvcGVydHkgb2YgYSBkb2N1bWVudC5cbiAgICAgICAgdGhpcy5jb21wYXJhdG9yID0gZSA/ICh0LCBuKSA9PiBlKHQsIG4pIHx8IERvY3VtZW50S2V5LmNvbXBhcmF0b3IodC5rZXksIG4ua2V5KSA6IChlLCB0KSA9PiBEb2N1bWVudEtleS5jb21wYXJhdG9yKGUua2V5LCB0LmtleSksIFxuICAgICAgICB0aGlzLmtleWVkTWFwID0gZG9jdW1lbnRNYXAoKSwgdGhpcy5zb3J0ZWRTZXQgPSBuZXcgU29ydGVkTWFwKHRoaXMuY29tcGFyYXRvcik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gZW1wdHkgY29weSBvZiB0aGUgZXhpc3RpbmcgRG9jdW1lbnRTZXQsIHVzaW5nIHRoZSBzYW1lXG4gICAgICogY29tcGFyYXRvci5cbiAgICAgKi8gICAgc3RhdGljIGVtcHR5U2V0KGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFNldChlLmNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICBoYXMoZSkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPSB0aGlzLmtleWVkTWFwLmdldChlKTtcbiAgICB9XG4gICAgZ2V0KGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMua2V5ZWRNYXAuZ2V0KGUpO1xuICAgIH1cbiAgICBmaXJzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc29ydGVkU2V0Lm1pbktleSgpO1xuICAgIH1cbiAgICBsYXN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zb3J0ZWRTZXQubWF4S2V5KCk7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNvcnRlZFNldC5pc0VtcHR5KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBwcm92aWRlZCBrZXkgaW4gdGhlIGRvY3VtZW50IHNldCwgb3IgLTEgaWYgdGhlXG4gICAgICogZG9jdW1lbnQga2V5IGlzIG5vdCBwcmVzZW50IGluIHRoZSBzZXQ7XG4gICAgICovICAgIGluZGV4T2YoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5rZXllZE1hcC5nZXQoZSk7XG4gICAgICAgIHJldHVybiB0ID8gdGhpcy5zb3J0ZWRTZXQuaW5kZXhPZih0KSA6IC0xO1xuICAgIH1cbiAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc29ydGVkU2V0LnNpemU7XG4gICAgfVxuICAgIC8qKiBJdGVyYXRlcyBkb2N1bWVudHMgaW4gb3JkZXIgZGVmaW5lZCBieSBcImNvbXBhcmF0b3JcIiAqLyAgICBmb3JFYWNoKGUpIHtcbiAgICAgICAgdGhpcy5zb3J0ZWRTZXQuaW5vcmRlclRyYXZlcnNhbCgoKHQsIG4pID0+IChlKHQpLCAhMSkpKTtcbiAgICB9XG4gICAgLyoqIEluc2VydHMgb3IgdXBkYXRlcyBhIGRvY3VtZW50IHdpdGggdGhlIHNhbWUga2V5ICovICAgIGFkZChlKSB7XG4gICAgICAgIC8vIEZpcnN0IHJlbW92ZSB0aGUgZWxlbWVudCBpZiB3ZSBoYXZlIGl0LlxuICAgICAgICBjb25zdCB0ID0gdGhpcy5kZWxldGUoZS5rZXkpO1xuICAgICAgICByZXR1cm4gdC5jb3B5KHQua2V5ZWRNYXAuaW5zZXJ0KGUua2V5LCBlKSwgdC5zb3J0ZWRTZXQuaW5zZXJ0KGUsIG51bGwpKTtcbiAgICB9XG4gICAgLyoqIERlbGV0ZXMgYSBkb2N1bWVudCB3aXRoIGEgZ2l2ZW4ga2V5ICovICAgIGRlbGV0ZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmdldChlKTtcbiAgICAgICAgcmV0dXJuIHQgPyB0aGlzLmNvcHkodGhpcy5rZXllZE1hcC5yZW1vdmUoZSksIHRoaXMuc29ydGVkU2V0LnJlbW92ZSh0KSkgOiB0aGlzO1xuICAgIH1cbiAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgaWYgKCEoZSBpbnN0YW5jZW9mIERvY3VtZW50U2V0KSkgcmV0dXJuICExO1xuICAgICAgICBpZiAodGhpcy5zaXplICE9PSBlLnNpemUpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuc29ydGVkU2V0LmdldEl0ZXJhdG9yKCksIG4gPSBlLnNvcnRlZFNldC5nZXRJdGVyYXRvcigpO1xuICAgICAgICBmb3IgKDt0Lmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdC5nZXROZXh0KCkua2V5LCByID0gbi5nZXROZXh0KCkua2V5O1xuICAgICAgICAgICAgaWYgKCFlLmlzRXF1YWwocikpIHJldHVybiAhMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgZS5wdXNoKHQudG9TdHJpbmcoKSk7XG4gICAgICAgIH0pKSwgMCA9PT0gZS5sZW5ndGggPyBcIkRvY3VtZW50U2V0ICgpXCIgOiBcIkRvY3VtZW50U2V0IChcXG4gIFwiICsgZS5qb2luKFwiICBcXG5cIikgKyBcIlxcbilcIjtcbiAgICB9XG4gICAgY29weShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgRG9jdW1lbnRTZXQ7XG4gICAgICAgIHJldHVybiBuLmNvbXBhcmF0b3IgPSB0aGlzLmNvbXBhcmF0b3IsIG4ua2V5ZWRNYXAgPSBlLCBuLnNvcnRlZFNldCA9IHQsIG47XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBEb2N1bWVudENoYW5nZVNldCBrZWVwcyB0cmFjayBvZiBhIHNldCBvZiBjaGFuZ2VzIHRvIGRvY3MgaW4gYSBxdWVyeSwgbWVyZ2luZ1xuICogZHVwbGljYXRlIGV2ZW50cyBmb3IgdGhlIHNhbWUgZG9jLlxuICovIGNsYXNzIF9fUFJJVkFURV9Eb2N1bWVudENoYW5nZVNldCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucV8gPSBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICB0cmFjayhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLmRvYy5rZXksIG4gPSB0aGlzLnFfLmdldCh0KTtcbiAgICAgICAgbiA/IFxuICAgICAgICAvLyBNZXJnZSB0aGUgbmV3IGNoYW5nZSB3aXRoIHRoZSBleGlzdGluZyBjaGFuZ2UuXG4gICAgICAgIDAgLyogQ2hhbmdlVHlwZS5BZGRlZCAqLyAhPT0gZS50eXBlICYmIDMgLyogQ2hhbmdlVHlwZS5NZXRhZGF0YSAqLyA9PT0gbi50eXBlID8gdGhpcy5xXyA9IHRoaXMucV8uaW5zZXJ0KHQsIGUpIDogMyAvKiBDaGFuZ2VUeXBlLk1ldGFkYXRhICovID09PSBlLnR5cGUgJiYgMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gIT09IG4udHlwZSA/IHRoaXMucV8gPSB0aGlzLnFfLmluc2VydCh0LCB7XG4gICAgICAgICAgICB0eXBlOiBuLnR5cGUsXG4gICAgICAgICAgICBkb2M6IGUuZG9jXG4gICAgICAgIH0pIDogMiAvKiBDaGFuZ2VUeXBlLk1vZGlmaWVkICovID09PSBlLnR5cGUgJiYgMiAvKiBDaGFuZ2VUeXBlLk1vZGlmaWVkICovID09PSBuLnR5cGUgPyB0aGlzLnFfID0gdGhpcy5xXy5pbnNlcnQodCwge1xuICAgICAgICAgICAgdHlwZTogMiAvKiBDaGFuZ2VUeXBlLk1vZGlmaWVkICovICxcbiAgICAgICAgICAgIGRvYzogZS5kb2NcbiAgICAgICAgfSkgOiAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gPT09IGUudHlwZSAmJiAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gPT09IG4udHlwZSA/IHRoaXMucV8gPSB0aGlzLnFfLmluc2VydCh0LCB7XG4gICAgICAgICAgICB0eXBlOiAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gLFxuICAgICAgICAgICAgZG9jOiBlLmRvY1xuICAgICAgICB9KSA6IDEgLyogQ2hhbmdlVHlwZS5SZW1vdmVkICovID09PSBlLnR5cGUgJiYgMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovID09PSBuLnR5cGUgPyB0aGlzLnFfID0gdGhpcy5xXy5yZW1vdmUodCkgOiAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyA9PT0gZS50eXBlICYmIDIgLyogQ2hhbmdlVHlwZS5Nb2RpZmllZCAqLyA9PT0gbi50eXBlID8gdGhpcy5xXyA9IHRoaXMucV8uaW5zZXJ0KHQsIHtcbiAgICAgICAgICAgIHR5cGU6IDEgLyogQ2hhbmdlVHlwZS5SZW1vdmVkICovICxcbiAgICAgICAgICAgIGRvYzogbi5kb2NcbiAgICAgICAgfSkgOiAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gPT09IGUudHlwZSAmJiAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyA9PT0gbi50eXBlID8gdGhpcy5xXyA9IHRoaXMucV8uaW5zZXJ0KHQsIHtcbiAgICAgICAgICAgIHR5cGU6IDIgLyogQ2hhbmdlVHlwZS5Nb2RpZmllZCAqLyAsXG4gICAgICAgICAgICBkb2M6IGUuZG9jXG4gICAgICAgIH0pIDogXG4gICAgICAgIC8vIFRoaXMgaW5jbHVkZXMgdGhlc2UgY2FzZXMsIHdoaWNoIGRvbid0IG1ha2Ugc2Vuc2U6XG4gICAgICAgIC8vIEFkZGVkLT5BZGRlZFxuICAgICAgICAvLyBSZW1vdmVkLT5SZW1vdmVkXG4gICAgICAgIC8vIE1vZGlmaWVkLT5BZGRlZFxuICAgICAgICAvLyBSZW1vdmVkLT5Nb2RpZmllZFxuICAgICAgICAvLyBNZXRhZGF0YS0+QWRkZWRcbiAgICAgICAgLy8gUmVtb3ZlZC0+TWV0YWRhdGFcbiAgICAgICAgZmFpbCgpIDogdGhpcy5xXyA9IHRoaXMucV8uaW5zZXJ0KHQsIGUpO1xuICAgIH1cbiAgICBRXygpIHtcbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5xXy5pbm9yZGVyVHJhdmVyc2FsKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgZS5wdXNoKG4pO1xuICAgICAgICB9KSksIGU7XG4gICAgfVxufVxuXG5jbGFzcyBWaWV3U25hcHNob3Qge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIsIGksIHMsIG8sIF8sIGEpIHtcbiAgICAgICAgdGhpcy5xdWVyeSA9IGUsIHRoaXMuZG9jcyA9IHQsIHRoaXMub2xkRG9jcyA9IG4sIHRoaXMuZG9jQ2hhbmdlcyA9IHIsIHRoaXMubXV0YXRlZEtleXMgPSBpLCBcbiAgICAgICAgdGhpcy5mcm9tQ2FjaGUgPSBzLCB0aGlzLnN5bmNTdGF0ZUNoYW5nZWQgPSBvLCB0aGlzLmV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzID0gXywgXG4gICAgICAgIHRoaXMuaGFzQ2FjaGVkUmVzdWx0cyA9IGE7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgdmlldyBzbmFwc2hvdCBhcyBpZiBhbGwgZG9jdW1lbnRzIGluIHRoZSBzbmFwc2hvdCB3ZXJlIGFkZGVkLiAqLyAgICBzdGF0aWMgZnJvbUluaXRpYWxEb2N1bWVudHMoZSwgdCwgbiwgciwgaSkge1xuICAgICAgICBjb25zdCBzID0gW107XG4gICAgICAgIHJldHVybiB0LmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgcy5wdXNoKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gLFxuICAgICAgICAgICAgICAgIGRvYzogZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKSwgbmV3IFZpZXdTbmFwc2hvdChlLCB0LCBEb2N1bWVudFNldC5lbXB0eVNldCh0KSwgcywgbiwgciwgXG4gICAgICAgIC8qIHN5bmNTdGF0ZUNoYW5nZWQ9ICovICEwLCBcbiAgICAgICAgLyogZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXM9ICovICExLCBpKTtcbiAgICB9XG4gICAgZ2V0IGhhc1BlbmRpbmdXcml0ZXMoKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5tdXRhdGVkS2V5cy5pc0VtcHR5KCk7XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICBpZiAoISh0aGlzLmZyb21DYWNoZSA9PT0gZS5mcm9tQ2FjaGUgJiYgdGhpcy5oYXNDYWNoZWRSZXN1bHRzID09PSBlLmhhc0NhY2hlZFJlc3VsdHMgJiYgdGhpcy5zeW5jU3RhdGVDaGFuZ2VkID09PSBlLnN5bmNTdGF0ZUNoYW5nZWQgJiYgdGhpcy5tdXRhdGVkS2V5cy5pc0VxdWFsKGUubXV0YXRlZEtleXMpICYmIF9fUFJJVkFURV9xdWVyeUVxdWFscyh0aGlzLnF1ZXJ5LCBlLnF1ZXJ5KSAmJiB0aGlzLmRvY3MuaXNFcXVhbChlLmRvY3MpICYmIHRoaXMub2xkRG9jcy5pc0VxdWFsKGUub2xkRG9jcykpKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmRvY0NoYW5nZXMsIG4gPSBlLmRvY0NoYW5nZXM7XG4gICAgICAgIGlmICh0Lmxlbmd0aCAhPT0gbi5sZW5ndGgpIHJldHVybiAhMTtcbiAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0Lmxlbmd0aDsgZSsrKSBpZiAodFtlXS50eXBlICE9PSBuW2VdLnR5cGUgfHwgIXRbZV0uZG9jLmlzRXF1YWwobltlXS5kb2MpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEhvbGRzIHRoZSBsaXN0ZW5lcnMgYW5kIHRoZSBsYXN0IHJlY2VpdmVkIFZpZXdTbmFwc2hvdCBmb3IgYSBxdWVyeSBiZWluZ1xuICogdHJhY2tlZCBieSBFdmVudE1hbmFnZXIuXG4gKi8gY2xhc3MgX19QUklWQVRFX1F1ZXJ5TGlzdGVuZXJzSW5mbyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuS18gPSB2b2lkIDAsIHRoaXMuVV8gPSBbXTtcbiAgICB9XG4gICAgLy8gSGVscGVyIG1ldGhvZHMgdGhhdCBjaGVja3MgaWYgdGhlIHF1ZXJ5IGhhcyBsaXN0ZW5lcnMgdGhhdCBsaXN0ZW5pbmcgdG8gcmVtb3RlIHN0b3JlXG4gICAgV18oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlVfLnNvbWUoKGUgPT4gZS5HXygpKSk7XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfRXZlbnRNYW5hZ2VySW1wbCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucXVlcmllcyA9IG5ldyBPYmplY3RNYXAoKGUgPT4gX19QUklWQVRFX2Nhbm9uaWZ5UXVlcnkoZSkpLCBfX1BSSVZBVEVfcXVlcnlFcXVhbHMpLCBcbiAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZSA9IFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8gLCB0aGlzLnpfID0gbmV3IFNldDtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9ldmVudE1hbmFnZXJMaXN0ZW4oZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIGxldCByID0gMyAvKiBMaXN0ZW5lclNldHVwQWN0aW9uLk5vQWN0aW9uUmVxdWlyZWQgKi87XG4gICAgY29uc3QgaSA9IHQucXVlcnk7XG4gICAgbGV0IHMgPSBuLnF1ZXJpZXMuZ2V0KGkpO1xuICAgIHMgPyAhcy5XXygpICYmIHQuR18oKSAmJiAoXG4gICAgLy8gUXVlcnkgaGFzIGJlZW4gbGlzdGVuaW5nIHRvIGxvY2FsIGNhY2hlLCBhbmQgdHJpZXMgdG8gYWRkIGEgbmV3IGxpc3RlbmVyIHNvdXJjZWQgZnJvbSB3YXRjaC5cbiAgICByID0gMiAvKiBMaXN0ZW5lclNldHVwQWN0aW9uLlJlcXVpcmVXYXRjaENvbm5lY3Rpb25Pbmx5ICovKSA6IChzID0gbmV3IF9fUFJJVkFURV9RdWVyeUxpc3RlbmVyc0luZm8sIFxuICAgIHIgPSB0LkdfKCkgPyAwIC8qIExpc3RlbmVyU2V0dXBBY3Rpb24uSW5pdGlhbGl6ZUxvY2FsTGlzdGVuQW5kUmVxdWlyZVdhdGNoQ29ubmVjdGlvbiAqLyA6IDEgLyogTGlzdGVuZXJTZXR1cEFjdGlvbi5Jbml0aWFsaXplTG9jYWxMaXN0ZW5Pbmx5ICovKTtcbiAgICB0cnkge1xuICAgICAgICBzd2l0Y2ggKHIpIHtcbiAgICAgICAgICBjYXNlIDAgLyogTGlzdGVuZXJTZXR1cEFjdGlvbi5Jbml0aWFsaXplTG9jYWxMaXN0ZW5BbmRSZXF1aXJlV2F0Y2hDb25uZWN0aW9uICovIDpcbiAgICAgICAgICAgIHMuS18gPSBhd2FpdCBuLm9uTGlzdGVuKGksIFxuICAgICAgICAgICAgLyoqIGVuYWJsZVJlbW90ZUxpc3Rlbj0gKi8gITApO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDEgLyogTGlzdGVuZXJTZXR1cEFjdGlvbi5Jbml0aWFsaXplTG9jYWxMaXN0ZW5Pbmx5ICovIDpcbiAgICAgICAgICAgIHMuS18gPSBhd2FpdCBuLm9uTGlzdGVuKGksIFxuICAgICAgICAgICAgLyoqIGVuYWJsZVJlbW90ZUxpc3Rlbj0gKi8gITEpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDIgLyogTGlzdGVuZXJTZXR1cEFjdGlvbi5SZXF1aXJlV2F0Y2hDb25uZWN0aW9uT25seSAqLyA6XG4gICAgICAgICAgICBhd2FpdCBuLm9uRmlyc3RSZW1vdGVTdG9yZUxpc3RlbihpKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV93cmFwSW5Vc2VyRXJyb3JJZlJlY292ZXJhYmxlKGUsIGBJbml0aWFsaXphdGlvbiBvZiBxdWVyeSAnJHtfX1BSSVZBVEVfc3RyaW5naWZ5UXVlcnkodC5xdWVyeSl9JyBmYWlsZWRgKTtcbiAgICAgICAgcmV0dXJuIHZvaWQgdC5vbkVycm9yKG4pO1xuICAgIH1cbiAgICBpZiAobi5xdWVyaWVzLnNldChpLCBzKSwgcy5VXy5wdXNoKHQpLCBcbiAgICAvLyBSdW4gZ2xvYmFsIHNuYXBzaG90IGxpc3RlbmVycyBpZiBhIGNvbnNpc3RlbnQgc25hcHNob3QgaGFzIGJlZW4gZW1pdHRlZC5cbiAgICB0LmpfKG4ub25saW5lU3RhdGUpLCBzLktfKSB7XG4gICAgICAgIHQuSF8ocy5LXykgJiYgX19QUklWQVRFX3JhaXNlU25hcHNob3RzSW5TeW5jRXZlbnQobik7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyVW5saXN0ZW4oZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCByID0gdC5xdWVyeTtcbiAgICBsZXQgaSA9IDMgLyogTGlzdGVuZXJSZW1vdmFsQWN0aW9uLk5vQWN0aW9uUmVxdWlyZWQgKi87XG4gICAgY29uc3QgcyA9IG4ucXVlcmllcy5nZXQocik7XG4gICAgaWYgKHMpIHtcbiAgICAgICAgY29uc3QgZSA9IHMuVV8uaW5kZXhPZih0KTtcbiAgICAgICAgZSA+PSAwICYmIChzLlVfLnNwbGljZShlLCAxKSwgMCA9PT0gcy5VXy5sZW5ndGggPyBpID0gdC5HXygpID8gMCAvKiBMaXN0ZW5lclJlbW92YWxBY3Rpb24uVGVybWluYXRlTG9jYWxMaXN0ZW5BbmRSZXF1aXJlV2F0Y2hEaXNjb25uZWN0aW9uICovIDogMSAvKiBMaXN0ZW5lclJlbW92YWxBY3Rpb24uVGVybWluYXRlTG9jYWxMaXN0ZW5Pbmx5ICovIDogIXMuV18oKSAmJiB0LkdfKCkgJiYgKFxuICAgICAgICAvLyBUaGUgcmVtb3ZlZCBsaXN0ZW5lciBpcyB0aGUgbGFzdCBvbmUgdGhhdCBzb3VyY2VkIGZyb20gd2F0Y2guXG4gICAgICAgIGkgPSAyIC8qIExpc3RlbmVyUmVtb3ZhbEFjdGlvbi5SZXF1aXJlV2F0Y2hEaXNjb25uZWN0aW9uT25seSAqLykpO1xuICAgIH1cbiAgICBzd2l0Y2ggKGkpIHtcbiAgICAgIGNhc2UgMCAvKiBMaXN0ZW5lclJlbW92YWxBY3Rpb24uVGVybWluYXRlTG9jYWxMaXN0ZW5BbmRSZXF1aXJlV2F0Y2hEaXNjb25uZWN0aW9uICovIDpcbiAgICAgICAgcmV0dXJuIG4ucXVlcmllcy5kZWxldGUociksIG4ub25Vbmxpc3RlbihyLCBcbiAgICAgICAgLyoqIGRpc2FibGVSZW1vdGVMaXN0ZW49ICovICEwKTtcblxuICAgICAgY2FzZSAxIC8qIExpc3RlbmVyUmVtb3ZhbEFjdGlvbi5UZXJtaW5hdGVMb2NhbExpc3Rlbk9ubHkgKi8gOlxuICAgICAgICByZXR1cm4gbi5xdWVyaWVzLmRlbGV0ZShyKSwgbi5vblVubGlzdGVuKHIsIFxuICAgICAgICAvKiogZGlzYWJsZVJlbW90ZUxpc3Rlbj0gKi8gITEpO1xuXG4gICAgICBjYXNlIDIgLyogTGlzdGVuZXJSZW1vdmFsQWN0aW9uLlJlcXVpcmVXYXRjaERpc2Nvbm5lY3Rpb25Pbmx5ICovIDpcbiAgICAgICAgcmV0dXJuIG4ub25MYXN0UmVtb3RlU3RvcmVVbmxpc3RlbihyKTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2V2ZW50TWFuYWdlck9uV2F0Y2hDaGFuZ2UoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIGxldCByID0gITE7XG4gICAgZm9yIChjb25zdCBlIG9mIHQpIHtcbiAgICAgICAgY29uc3QgdCA9IGUucXVlcnksIGkgPSBuLnF1ZXJpZXMuZ2V0KHQpO1xuICAgICAgICBpZiAoaSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGkuVV8pIHQuSF8oZSkgJiYgKHIgPSAhMCk7XG4gICAgICAgICAgICBpLktfID0gZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByICYmIF9fUFJJVkFURV9yYWlzZVNuYXBzaG90c0luU3luY0V2ZW50KG4pO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyT25XYXRjaEVycm9yKGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgaSA9IHIucXVlcmllcy5nZXQodCk7XG4gICAgaWYgKGkpIGZvciAoY29uc3QgZSBvZiBpLlVfKSBlLm9uRXJyb3Iobik7XG4gICAgLy8gUmVtb3ZlIGFsbCBsaXN0ZW5lcnMuIE5PVEU6IFdlIGRvbid0IG5lZWQgdG8gY2FsbCBzeW5jRW5naW5lLnVubGlzdGVuKClcbiAgICAvLyBhZnRlciBhbiBlcnJvci5cbiAgICAgICAgci5xdWVyaWVzLmRlbGV0ZSh0KTtcbn1cblxuLy8gQ2FsbCBhbGwgZ2xvYmFsIHNuYXBzaG90IGxpc3RlbmVycyB0aGF0IGhhdmUgYmVlbiBzZXQuXG5mdW5jdGlvbiBfX1BSSVZBVEVfcmFpc2VTbmFwc2hvdHNJblN5bmNFdmVudChlKSB7XG4gICAgZS56Xy5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgZS5uZXh0KCk7XG4gICAgfSkpO1xufVxuXG52YXIgZ2UsIHBlO1xuXG4vKiogTGlzdGVuIHRvIGJvdGggY2FjaGUgYW5kIHNlcnZlciBjaGFuZ2VzICovXG4ocGUgPSBnZSB8fCAoZ2UgPSB7fSkpLkpfID0gXCJkZWZhdWx0XCIsIFxuLyoqIExpc3RlbiB0byBjaGFuZ2VzIGluIGNhY2hlIG9ubHkgKi9cbnBlLkNhY2hlID0gXCJjYWNoZVwiO1xuXG4vKipcbiAqIFF1ZXJ5TGlzdGVuZXIgdGFrZXMgYSBzZXJpZXMgb2YgaW50ZXJuYWwgdmlldyBzbmFwc2hvdHMgYW5kIGRldGVybWluZXNcbiAqIHdoZW4gdG8gcmFpc2UgdGhlIGV2ZW50LlxuICpcbiAqIEl0IHVzZXMgYW4gT2JzZXJ2ZXIgdG8gZGlzcGF0Y2ggZXZlbnRzLlxuICovXG5jbGFzcyBfX1BSSVZBVEVfUXVlcnlMaXN0ZW5lciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gZSwgdGhpcy5ZXyA9IHQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogSW5pdGlhbCBzbmFwc2hvdHMgKGUuZy4gZnJvbSBjYWNoZSkgbWF5IG5vdCBiZSBwcm9wYWdhdGVkIHRvIHRoZSB3cmFwcGVkXG4gICAgICAgICAqIG9ic2VydmVyLiBUaGlzIGZsYWcgaXMgc2V0IHRvIHRydWUgb25jZSB3ZSd2ZSBhY3R1YWxseSByYWlzZWQgYW4gZXZlbnQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLlpfID0gITEsIHRoaXMuWF8gPSBudWxsLCB0aGlzLm9ubGluZVN0YXRlID0gXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLyAsIFxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBuIHx8IHt9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIHRoZSBuZXcgVmlld1NuYXBzaG90IHRvIHRoaXMgbGlzdGVuZXIsIHJhaXNpbmcgYSB1c2VyLWZhY2luZyBldmVudFxuICAgICAqIGlmIGFwcGxpY2FibGUgKGRlcGVuZGluZyBvbiB3aGF0IGNoYW5nZWQsIHdoZXRoZXIgdGhlIHVzZXIgaGFzIG9wdGVkIGludG9cbiAgICAgKiBtZXRhZGF0YS1vbmx5IGNoYW5nZXMsIGV0Yy4pLiBSZXR1cm5zIHRydWUgaWYgYSB1c2VyLWZhY2luZyBldmVudCB3YXNcbiAgICAgKiBpbmRlZWQgcmFpc2VkLlxuICAgICAqLyAgICBIXyhlKSB7XG4gICAgICAgIGlmICghdGhpcy5vcHRpb25zLmluY2x1ZGVNZXRhZGF0YUNoYW5nZXMpIHtcbiAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgbWV0YWRhdGEgb25seSBjaGFuZ2VzLlxuICAgICAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIGUuZG9jQ2hhbmdlcykgMyAvKiBDaGFuZ2VUeXBlLk1ldGFkYXRhICovICE9PSBuLnR5cGUgJiYgdC5wdXNoKG4pO1xuICAgICAgICAgICAgZSA9IG5ldyBWaWV3U25hcHNob3QoZS5xdWVyeSwgZS5kb2NzLCBlLm9sZERvY3MsIHQsIGUubXV0YXRlZEtleXMsIGUuZnJvbUNhY2hlLCBlLnN5bmNTdGF0ZUNoYW5nZWQsIFxuICAgICAgICAgICAgLyogZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXM9ICovICEwLCBlLmhhc0NhY2hlZFJlc3VsdHMpO1xuICAgICAgICB9XG4gICAgICAgIGxldCB0ID0gITE7XG4gICAgICAgIHJldHVybiB0aGlzLlpfID8gdGhpcy5lYShlKSAmJiAodGhpcy5ZXy5uZXh0KGUpLCB0ID0gITApIDogdGhpcy50YShlLCB0aGlzLm9ubGluZVN0YXRlKSAmJiAodGhpcy5uYShlKSwgXG4gICAgICAgIHQgPSAhMCksIHRoaXMuWF8gPSBlLCB0O1xuICAgIH1cbiAgICBvbkVycm9yKGUpIHtcbiAgICAgICAgdGhpcy5ZXy5lcnJvcihlKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgd2hldGhlciBhIHNuYXBzaG90IHdhcyByYWlzZWQuICovICAgIGpfKGUpIHtcbiAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZSA9IGU7XG4gICAgICAgIGxldCB0ID0gITE7XG4gICAgICAgIHJldHVybiB0aGlzLlhfICYmICF0aGlzLlpfICYmIHRoaXMudGEodGhpcy5YXywgZSkgJiYgKHRoaXMubmEodGhpcy5YXyksIHQgPSAhMCksIFxuICAgICAgICB0O1xuICAgIH1cbiAgICB0YShlLCB0KSB7XG4gICAgICAgIC8vIEFsd2F5cyByYWlzZSB0aGUgZmlyc3QgZXZlbnQgd2hlbiB3ZSdyZSBzeW5jZWRcbiAgICAgICAgaWYgKCFlLmZyb21DYWNoZSkgcmV0dXJuICEwO1xuICAgICAgICAvLyBBbHdheXMgcmFpc2UgZXZlbnQgaWYgbGlzdGVuaW5nIHRvIGNhY2hlXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLkdfKCkpIHJldHVybiAhMDtcbiAgICAgICAgLy8gTk9URTogV2UgY29uc2lkZXIgT25saW5lU3RhdGUuVW5rbm93biBhcyBvbmxpbmUgKGl0IHNob3VsZCBiZWNvbWUgT2ZmbGluZVxuICAgICAgICAvLyBvciBPbmxpbmUgaWYgd2Ugd2FpdCBsb25nIGVub3VnaCkuXG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IFwiT2ZmbGluZVwiIC8qIE9ubGluZVN0YXRlLk9mZmxpbmUgKi8gIT09IHQ7XG4gICAgICAgIC8vIERvbid0IHJhaXNlIHRoZSBldmVudCBpZiB3ZSdyZSBvbmxpbmUsIGFyZW4ndCBzeW5jZWQgeWV0IChjaGVja2VkXG4gICAgICAgIC8vIGFib3ZlKSBhbmQgYXJlIHdhaXRpbmcgZm9yIGEgc3luYy5cbiAgICAgICAgICAgICAgICByZXR1cm4gKCF0aGlzLm9wdGlvbnMucmEgfHwgIW4pICYmICghZS5kb2NzLmlzRW1wdHkoKSB8fCBlLmhhc0NhY2hlZFJlc3VsdHMgfHwgXCJPZmZsaW5lXCIgLyogT25saW5lU3RhdGUuT2ZmbGluZSAqLyA9PT0gdCk7XG4gICAgICAgIC8vIFJhaXNlIGRhdGEgZnJvbSBjYWNoZSBpZiB3ZSBoYXZlIGFueSBkb2N1bWVudHMsIGhhdmUgY2FjaGVkIHJlc3VsdHMgYmVmb3JlLFxuICAgICAgICAvLyBvciB3ZSBhcmUgb2ZmbGluZS5cbiAgICAgICAgfVxuICAgIGVhKGUpIHtcbiAgICAgICAgLy8gV2UgZG9uJ3QgbmVlZCB0byBoYW5kbGUgaW5jbHVkZURvY3VtZW50TWV0YWRhdGFDaGFuZ2VzIGhlcmUgYmVjYXVzZVxuICAgICAgICAvLyB0aGUgTWV0YWRhdGEgb25seSBjaGFuZ2VzIGhhdmUgYWxyZWFkeSBiZWVuIHN0cmlwcGVkIG91dCBpZiBuZWVkZWQuXG4gICAgICAgIC8vIEF0IHRoaXMgcG9pbnQgdGhlIG9ubHkgY2hhbmdlcyB3ZSB3aWxsIHNlZSBhcmUgdGhlIG9uZXMgd2Ugc2hvdWxkXG4gICAgICAgIC8vIHByb3BhZ2F0ZS5cbiAgICAgICAgaWYgKGUuZG9jQ2hhbmdlcy5sZW5ndGggPiAwKSByZXR1cm4gITA7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLlhfICYmIHRoaXMuWF8uaGFzUGVuZGluZ1dyaXRlcyAhPT0gZS5oYXNQZW5kaW5nV3JpdGVzO1xuICAgICAgICByZXR1cm4gISghZS5zeW5jU3RhdGVDaGFuZ2VkICYmICF0KSAmJiAhMCA9PT0gdGhpcy5vcHRpb25zLmluY2x1ZGVNZXRhZGF0YUNoYW5nZXM7XG4gICAgICAgIC8vIEdlbmVyYWxseSB3ZSBzaG91bGQgaGF2ZSBoaXQgb25lIG9mIHRoZSBjYXNlcyBhYm92ZSwgYnV0IGl0J3MgcG9zc2libGVcbiAgICAgICAgLy8gdG8gZ2V0IGhlcmUgaWYgdGhlcmUgd2VyZSBvbmx5IG1ldGFkYXRhIGRvY0NoYW5nZXMgYW5kIHRoZXkgZ290XG4gICAgICAgIC8vIHN0cmlwcGVkIG91dC5cbiAgICAgICAgfVxuICAgIG5hKGUpIHtcbiAgICAgICAgZSA9IFZpZXdTbmFwc2hvdC5mcm9tSW5pdGlhbERvY3VtZW50cyhlLnF1ZXJ5LCBlLmRvY3MsIGUubXV0YXRlZEtleXMsIGUuZnJvbUNhY2hlLCBlLmhhc0NhY2hlZFJlc3VsdHMpLCBcbiAgICAgICAgdGhpcy5aXyA9ICEwLCB0aGlzLllfLm5leHQoZSk7XG4gICAgfVxuICAgIEdfKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnNvdXJjZSAhPT0gZ2UuQ2FjaGU7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGNvbXBsZXRlIGVsZW1lbnQgaW4gdGhlIGJ1bmRsZSBzdHJlYW0sIHRvZ2V0aGVyIHdpdGggdGhlIGJ5dGUgbGVuZ3RoIGl0XG4gKiBvY2N1cGllcyBpbiB0aGUgc3RyZWFtLlxuICovIGNsYXNzIF9fUFJJVkFURV9TaXplZEJ1bmRsZUVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKGUsIFxuICAgIC8vIEhvdyBtYW55IGJ5dGVzIHRoaXMgZWxlbWVudCB0YWtlcyB0byBzdG9yZSBpbiB0aGUgYnVuZGxlLlxuICAgIHQpIHtcbiAgICAgICAgdGhpcy5pYSA9IGUsIHRoaXMuYnl0ZUxlbmd0aCA9IHQ7XG4gICAgfVxuICAgIHNhKCkge1xuICAgICAgICByZXR1cm4gXCJtZXRhZGF0YVwiIGluIHRoaXMuaWE7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBIZWxwZXIgdG8gY29udmVydCBvYmplY3RzIGZyb20gYnVuZGxlcyB0byBtb2RlbCBvYmplY3RzIGluIHRoZSBTREsuXG4gKi8gY2xhc3MgX19QUklWQVRFX0J1bmRsZUNvbnZlcnRlckltcGwge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gZTtcbiAgICB9XG4gICAgUHMoZSkge1xuICAgICAgICByZXR1cm4gZnJvbU5hbWUodGhpcy5zZXJpYWxpemVyLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYSBCdW5kbGVEb2N1bWVudCB0byBhIE11dGFibGVEb2N1bWVudC5cbiAgICAgKi8gICAgSXMoZSkge1xuICAgICAgICByZXR1cm4gZS5tZXRhZGF0YS5leGlzdHMgPyBfX1BSSVZBVEVfZnJvbURvY3VtZW50KHRoaXMuc2VyaWFsaXplciwgZS5kb2N1bWVudCwgITEpIDogTXV0YWJsZURvY3VtZW50Lm5ld05vRG9jdW1lbnQodGhpcy5QcyhlLm1ldGFkYXRhLm5hbWUpLCB0aGlzLlRzKGUubWV0YWRhdGEucmVhZFRpbWUpKTtcbiAgICB9XG4gICAgVHMoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2Zyb21WZXJzaW9uKGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGNsYXNzIHRvIHByb2Nlc3MgdGhlIGVsZW1lbnRzIGZyb20gYSBidW5kbGUsIGxvYWQgdGhlbSBpbnRvIGxvY2FsXG4gKiBzdG9yYWdlIGFuZCBwcm92aWRlIHByb2dyZXNzIHVwZGF0ZSB3aGlsZSBsb2FkaW5nLlxuICovIGNsYXNzIF9fUFJJVkFURV9CdW5kbGVMb2FkZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4pIHtcbiAgICAgICAgdGhpcy5vYSA9IGUsIHRoaXMubG9jYWxTdG9yZSA9IHQsIHRoaXMuc2VyaWFsaXplciA9IG4sIFxuICAgICAgICAvKiogQmF0Y2hlZCBxdWVyaWVzIHRvIGJlIHNhdmVkIGludG8gc3RvcmFnZSAqL1xuICAgICAgICB0aGlzLnF1ZXJpZXMgPSBbXSwgXG4gICAgICAgIC8qKiBCYXRjaGVkIGRvY3VtZW50cyB0byBiZSBzYXZlZCBpbnRvIHN0b3JhZ2UgKi9cbiAgICAgICAgdGhpcy5kb2N1bWVudHMgPSBbXSwgXG4gICAgICAgIC8qKiBUaGUgY29sbGVjdGlvbiBncm91cHMgYWZmZWN0ZWQgYnkgdGhpcyBidW5kbGUuICovXG4gICAgICAgIHRoaXMuY29sbGVjdGlvbkdyb3VwcyA9IG5ldyBTZXQsIHRoaXMucHJvZ3Jlc3MgPSBfX1BSSVZBVEVfYnVuZGxlSW5pdGlhbFByb2dyZXNzKGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGFuIGVsZW1lbnQgZnJvbSB0aGUgYnVuZGxlIHRvIHRoZSBsb2FkZXIuXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIGEgbmV3IHByb2dyZXNzIGlmIGFkZGluZyB0aGUgZWxlbWVudCBsZWFkcyB0byBhIG5ldyBwcm9ncmVzcyxcbiAgICAgKiBvdGhlcndpc2UgcmV0dXJucyBudWxsLlxuICAgICAqLyAgICBfYShlKSB7XG4gICAgICAgIHRoaXMucHJvZ3Jlc3MuYnl0ZXNMb2FkZWQgKz0gZS5ieXRlTGVuZ3RoO1xuICAgICAgICBsZXQgdCA9IHRoaXMucHJvZ3Jlc3MuZG9jdW1lbnRzTG9hZGVkO1xuICAgICAgICBpZiAoZS5pYS5uYW1lZFF1ZXJ5KSB0aGlzLnF1ZXJpZXMucHVzaChlLmlhLm5hbWVkUXVlcnkpOyBlbHNlIGlmIChlLmlhLmRvY3VtZW50TWV0YWRhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRzLnB1c2goe1xuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiBlLmlhLmRvY3VtZW50TWV0YWRhdGFcbiAgICAgICAgICAgIH0pLCBlLmlhLmRvY3VtZW50TWV0YWRhdGEuZXhpc3RzIHx8ICsrdDtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBSZXNvdXJjZVBhdGguZnJvbVN0cmluZyhlLmlhLmRvY3VtZW50TWV0YWRhdGEubmFtZSk7XG4gICAgICAgICAgICB0aGlzLmNvbGxlY3Rpb25Hcm91cHMuYWRkKG4uZ2V0KG4ubGVuZ3RoIC0gMikpO1xuICAgICAgICB9IGVsc2UgZS5pYS5kb2N1bWVudCAmJiAodGhpcy5kb2N1bWVudHNbdGhpcy5kb2N1bWVudHMubGVuZ3RoIC0gMV0uZG9jdW1lbnQgPSBlLmlhLmRvY3VtZW50LCBcbiAgICAgICAgKyt0KTtcbiAgICAgICAgcmV0dXJuIHQgIT09IHRoaXMucHJvZ3Jlc3MuZG9jdW1lbnRzTG9hZGVkID8gKHRoaXMucHJvZ3Jlc3MuZG9jdW1lbnRzTG9hZGVkID0gdCwgXG4gICAgICAgIE9iamVjdC5hc3NpZ24oe30sIHRoaXMucHJvZ3Jlc3MpKSA6IG51bGw7XG4gICAgfVxuICAgIGFhKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IG5ldyBNYXAsIG4gPSBuZXcgX19QUklWQVRFX0J1bmRsZUNvbnZlcnRlckltcGwodGhpcy5zZXJpYWxpemVyKTtcbiAgICAgICAgZm9yIChjb25zdCByIG9mIGUpIGlmIChyLm1ldGFkYXRhLnF1ZXJpZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuLlBzKHIubWV0YWRhdGEubmFtZSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2Ygci5tZXRhZGF0YS5xdWVyaWVzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9ICh0LmdldChuKSB8fCBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSkuYWRkKGUpO1xuICAgICAgICAgICAgICAgIHQuc2V0KG4sIHIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIHByb2dyZXNzIHRvICdTdWNjZXNzJyBhbmQgcmV0dXJuIHRoZSB1cGRhdGVkIHByb2dyZXNzLlxuICAgICAqLyAgICBhc3luYyBjb21wbGV0ZSgpIHtcbiAgICAgICAgY29uc3QgZSA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlQXBwbHlCdW5kbGVkRG9jdW1lbnRzKHRoaXMubG9jYWxTdG9yZSwgbmV3IF9fUFJJVkFURV9CdW5kbGVDb252ZXJ0ZXJJbXBsKHRoaXMuc2VyaWFsaXplciksIHRoaXMuZG9jdW1lbnRzLCB0aGlzLm9hLmlkKSwgdCA9IHRoaXMuYWEodGhpcy5kb2N1bWVudHMpO1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdGhpcy5xdWVyaWVzKSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZVNhdmVOYW1lZFF1ZXJ5KHRoaXMubG9jYWxTdG9yZSwgZSwgdC5nZXQoZS5uYW1lKSk7XG4gICAgICAgIHJldHVybiB0aGlzLnByb2dyZXNzLnRhc2tTdGF0ZSA9IFwiU3VjY2Vzc1wiLCB7XG4gICAgICAgICAgICBwcm9ncmVzczogdGhpcy5wcm9ncmVzcyxcbiAgICAgICAgICAgIHVhOiB0aGlzLmNvbGxlY3Rpb25Hcm91cHMsXG4gICAgICAgICAgICBjYTogZVxuICAgICAgICB9O1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgYExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3NgIHJlcHJlc2VudGluZyB0aGUgaW5pdGlhbCBwcm9ncmVzcyBvZlxuICogbG9hZGluZyBhIGJ1bmRsZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfYnVuZGxlSW5pdGlhbFByb2dyZXNzKGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0YXNrU3RhdGU6IFwiUnVubmluZ1wiLFxuICAgICAgICBkb2N1bWVudHNMb2FkZWQ6IDAsXG4gICAgICAgIGJ5dGVzTG9hZGVkOiAwLFxuICAgICAgICB0b3RhbERvY3VtZW50czogZS50b3RhbERvY3VtZW50cyxcbiAgICAgICAgdG90YWxCeXRlczogZS50b3RhbEJ5dGVzXG4gICAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgYExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3NgIHJlcHJlc2VudGluZyB0aGUgcHJvZ3Jlc3MgdGhhdCB0aGUgbG9hZGluZ1xuICogaGFzIHN1Y2NlZWRlZC5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9BZGRlZExpbWJvRG9jdW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5rZXkgPSBlO1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX1JlbW92ZWRMaW1ib0RvY3VtZW50IHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMua2V5ID0gZTtcbiAgICB9XG59XG5cbi8qKlxuICogVmlldyBpcyByZXNwb25zaWJsZSBmb3IgY29tcHV0aW5nIHRoZSBmaW5hbCBtZXJnZWQgdHJ1dGggb2Ygd2hhdCBkb2NzIGFyZSBpblxuICogYSBxdWVyeS4gSXQgZ2V0cyBub3RpZmllZCBvZiBsb2NhbCBhbmQgcmVtb3RlIGNoYW5nZXMgdG8gZG9jcywgYW5kIGFwcGxpZXNcbiAqIHRoZSBxdWVyeSBmaWx0ZXJzIGFuZCBsaW1pdHMgdG8gZGV0ZXJtaW5lIHRoZSBtb3N0IGNvcnJlY3QgcG9zc2libGUgcmVzdWx0cy5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfVmlldyB7XG4gICAgY29uc3RydWN0b3IoZSwgXG4gICAgLyoqIERvY3VtZW50cyBpbmNsdWRlZCBpbiB0aGUgcmVtb3RlIHRhcmdldCAqL1xuICAgIHQpIHtcbiAgICAgICAgdGhpcy5xdWVyeSA9IGUsIHRoaXMubGEgPSB0LCB0aGlzLmhhID0gbnVsbCwgdGhpcy5oYXNDYWNoZWRSZXN1bHRzID0gITEsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBmbGFnIHdoZXRoZXIgdGhlIHZpZXcgaXMgY3VycmVudCB3aXRoIHRoZSBiYWNrZW5kLiBBIHZpZXcgaXMgY29uc2lkZXJlZFxuICAgICAgICAgKiBjdXJyZW50IGFmdGVyIGl0IGhhcyBzZWVuIHRoZSBjdXJyZW50IGZsYWcgZnJvbSB0aGUgYmFja2VuZCBhbmQgZGlkIG5vdFxuICAgICAgICAgKiBsb3NlIGNvbnNpc3RlbmN5IHdpdGhpbiB0aGUgd2F0Y2ggc3RyZWFtIChlLmcuIGJlY2F1c2Ugb2YgYW4gZXhpc3RlbmNlXG4gICAgICAgICAqIGZpbHRlciBtaXNtYXRjaCkuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmN1cnJlbnQgPSAhMSwgXG4gICAgICAgIC8qKiBEb2N1bWVudHMgaW4gdGhlIHZpZXcgYnV0IG5vdCBpbiB0aGUgcmVtb3RlIHRhcmdldCAqL1xuICAgICAgICB0aGlzLlBhID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCksIFxuICAgICAgICAvKiogRG9jdW1lbnQgS2V5cyB0aGF0IGhhdmUgbG9jYWwgY2hhbmdlcyAqL1xuICAgICAgICB0aGlzLm11dGF0ZWRLZXlzID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCksIHRoaXMuSWEgPSBfX1BSSVZBVEVfbmV3UXVlcnlDb21wYXJhdG9yKGUpLCBcbiAgICAgICAgdGhpcy5UYSA9IG5ldyBEb2N1bWVudFNldCh0aGlzLklhKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHNldCBvZiByZW1vdGUgZG9jdW1lbnRzIHRoYXQgdGhlIHNlcnZlciBoYXMgdG9sZCB1cyBiZWxvbmdzIHRvIHRoZSB0YXJnZXQgYXNzb2NpYXRlZCB3aXRoXG4gICAgICogdGhpcyB2aWV3LlxuICAgICAqLyAgICBnZXQgRWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxhO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGEgc2V0IG9mIGRvYyBjaGFuZ2VzLCBhcHBsaWVzIHRoZSBxdWVyeSBsaW1pdCwgYW5kIGNvbXB1dGVzXG4gICAgICogd2hhdCB0aGUgbmV3IHJlc3VsdHMgc2hvdWxkIGJlLCB3aGF0IHRoZSBjaGFuZ2VzIHdlcmUsIGFuZCB3aGV0aGVyIHdlIG1heVxuICAgICAqIG5lZWQgdG8gZ28gYmFjayB0byB0aGUgbG9jYWwgY2FjaGUgZm9yIG1vcmUgcmVzdWx0cy4gRG9lcyBub3QgbWFrZSBhbnlcbiAgICAgKiBjaGFuZ2VzIHRvIHRoZSB2aWV3LlxuICAgICAqIEBwYXJhbSBkb2NDaGFuZ2VzIC0gVGhlIGRvYyBjaGFuZ2VzIHRvIGFwcGx5IHRvIHRoaXMgdmlldy5cbiAgICAgKiBAcGFyYW0gcHJldmlvdXNDaGFuZ2VzIC0gSWYgdGhpcyBpcyBiZWluZyBjYWxsZWQgd2l0aCBhIHJlZmlsbCwgdGhlbiBzdGFydFxuICAgICAqICAgICAgICB3aXRoIHRoaXMgc2V0IG9mIGRvY3MgYW5kIGNoYW5nZXMgaW5zdGVhZCBvZiB0aGUgY3VycmVudCB2aWV3LlxuICAgICAqIEByZXR1cm5zIGEgbmV3IHNldCBvZiBkb2NzLCBjaGFuZ2VzLCBhbmQgcmVmaWxsIGZsYWcuXG4gICAgICovICAgIGRhKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHQgPyB0LkFhIDogbmV3IF9fUFJJVkFURV9Eb2N1bWVudENoYW5nZVNldCwgciA9IHQgPyB0LlRhIDogdGhpcy5UYTtcbiAgICAgICAgbGV0IGkgPSB0ID8gdC5tdXRhdGVkS2V5cyA6IHRoaXMubXV0YXRlZEtleXMsIHMgPSByLCBvID0gITE7XG4gICAgICAgIC8vIFRyYWNrIHRoZSBsYXN0IGRvYyBpbiBhIChmdWxsKSBsaW1pdC4gVGhpcyBpcyBuZWNlc3NhcnksIGJlY2F1c2Ugc29tZVxuICAgICAgICAvLyB1cGRhdGUgKGEgZGVsZXRlLCBvciBhbiB1cGRhdGUgbW92aW5nIGEgZG9jIHBhc3QgdGhlIG9sZCBsaW1pdCkgbWlnaHRcbiAgICAgICAgLy8gbWVhbiB0aGVyZSBpcyBzb21lIG90aGVyIGRvY3VtZW50IGluIHRoZSBsb2NhbCBjYWNoZSB0aGF0IGVpdGhlciBzaG91bGRcbiAgICAgICAgLy8gY29tZSAoMSkgYmV0d2VlbiB0aGUgb2xkIGxhc3QgbGltaXQgZG9jIGFuZCB0aGUgbmV3IGxhc3QgZG9jdW1lbnQsIGluIHRoZVxuICAgICAgICAvLyBjYXNlIG9mIHVwZGF0ZXMsIG9yICgyKSBhZnRlciB0aGUgbmV3IGxhc3QgZG9jdW1lbnQsIGluIHRoZSBjYXNlIG9mXG4gICAgICAgIC8vIGRlbGV0ZXMuIFNvIHdlIGtlZXAgdGhpcyBkb2MgYXQgdGhlIG9sZCBsaW1pdCB0byBjb21wYXJlIHRoZSB1cGRhdGVzIHRvLlxuICAgICAgICAvLyBOb3RlIHRoYXQgdGhpcyBzaG91bGQgbmV2ZXIgZ2V0IHVzZWQgaW4gYSByZWZpbGwgKHdoZW4gcHJldmlvdXNDaGFuZ2VzIGlzXG4gICAgICAgIC8vIHNldCksIGJlY2F1c2UgdGhlcmUgd2lsbCBvbmx5IGJlIGFkZHMgLS0gbm8gZGVsZXRlcyBvciB1cGRhdGVzLlxuICAgICAgICBjb25zdCBfID0gXCJGXCIgLyogTGltaXRUeXBlLkZpcnN0ICovID09PSB0aGlzLnF1ZXJ5LmxpbWl0VHlwZSAmJiByLnNpemUgPT09IHRoaXMucXVlcnkubGltaXQgPyByLmxhc3QoKSA6IG51bGwsIGEgPSBcIkxcIiAvKiBMaW1pdFR5cGUuTGFzdCAqLyA9PT0gdGhpcy5xdWVyeS5saW1pdFR5cGUgJiYgci5zaXplID09PSB0aGlzLnF1ZXJ5LmxpbWl0ID8gci5maXJzdCgpIDogbnVsbDtcbiAgICAgICAgLy8gRHJvcCBkb2N1bWVudHMgb3V0IHRvIG1lZXQgbGltaXQvbGltaXRUb0xhc3QgcmVxdWlyZW1lbnQuXG4gICAgICAgIGlmIChlLmlub3JkZXJUcmF2ZXJzYWwoKChlLCB0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB1ID0gci5nZXQoZSksIGMgPSBfX1BSSVZBVEVfcXVlcnlNYXRjaGVzKHRoaXMucXVlcnksIHQpID8gdCA6IG51bGwsIGwgPSAhIXUgJiYgdGhpcy5tdXRhdGVkS2V5cy5oYXModS5rZXkpLCBoID0gISFjICYmIChjLmhhc0xvY2FsTXV0YXRpb25zIHx8IFxuICAgICAgICAgICAgLy8gV2Ugb25seSBjb25zaWRlciBjb21taXR0ZWQgbXV0YXRpb25zIGZvciBkb2N1bWVudHMgdGhhdCB3ZXJlXG4gICAgICAgICAgICAvLyBtdXRhdGVkIGR1cmluZyB0aGUgbGlmZXRpbWUgb2YgdGhlIHZpZXcuXG4gICAgICAgICAgICB0aGlzLm11dGF0ZWRLZXlzLmhhcyhjLmtleSkgJiYgYy5oYXNDb21taXR0ZWRNdXRhdGlvbnMpO1xuICAgICAgICAgICAgbGV0IFAgPSAhMTtcbiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBjaGFuZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1ICYmIGMpIHtcbiAgICAgICAgICAgICAgICB1LmRhdGEuaXNFcXVhbChjLmRhdGEpID8gbCAhPT0gaCAmJiAobi50cmFjayh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IDMgLyogQ2hhbmdlVHlwZS5NZXRhZGF0YSAqLyAsXG4gICAgICAgICAgICAgICAgICAgIGRvYzogY1xuICAgICAgICAgICAgICAgIH0pLCBQID0gITApIDogdGhpcy5SYSh1LCBjKSB8fCAobi50cmFjayh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IDIgLyogQ2hhbmdlVHlwZS5Nb2RpZmllZCAqLyAsXG4gICAgICAgICAgICAgICAgICAgIGRvYzogY1xuICAgICAgICAgICAgICAgIH0pLCBQID0gITAsIChfICYmIHRoaXMuSWEoYywgXykgPiAwIHx8IGEgJiYgdGhpcy5JYShjLCBhKSA8IDApICYmIChcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGRvYyBtb3ZlZCBmcm9tIGluc2lkZSB0aGUgbGltaXQgdG8gb3V0c2lkZSB0aGUgbGltaXQuXG4gICAgICAgICAgICAgICAgLy8gVGhhdCBtZWFucyB0aGVyZSBtYXkgYmUgc29tZSBvdGhlciBkb2MgaW4gdGhlIGxvY2FsIGNhY2hlXG4gICAgICAgICAgICAgICAgLy8gdGhhdCBzaG91bGQgYmUgaW5jbHVkZWQgaW5zdGVhZC5cbiAgICAgICAgICAgICAgICBvID0gITApKTtcbiAgICAgICAgICAgIH0gZWxzZSAhdSAmJiBjID8gKG4udHJhY2soe1xuICAgICAgICAgICAgICAgIHR5cGU6IDAgLyogQ2hhbmdlVHlwZS5BZGRlZCAqLyAsXG4gICAgICAgICAgICAgICAgZG9jOiBjXG4gICAgICAgICAgICB9KSwgUCA9ICEwKSA6IHUgJiYgIWMgJiYgKG4udHJhY2soe1xuICAgICAgICAgICAgICAgIHR5cGU6IDEgLyogQ2hhbmdlVHlwZS5SZW1vdmVkICovICxcbiAgICAgICAgICAgICAgICBkb2M6IHVcbiAgICAgICAgICAgIH0pLCBQID0gITAsIChfIHx8IGEpICYmIChcbiAgICAgICAgICAgIC8vIEEgZG9jIHdhcyByZW1vdmVkIGZyb20gYSBmdWxsIGxpbWl0IHF1ZXJ5LiBXZSdsbCBuZWVkIHRvXG4gICAgICAgICAgICAvLyByZXF1ZXJ5IGZyb20gdGhlIGxvY2FsIGNhY2hlIHRvIHNlZSBpZiB3ZSBrbm93IGFib3V0IHNvbWUgb3RoZXJcbiAgICAgICAgICAgIC8vIGRvYyB0aGF0IHNob3VsZCBiZSBpbiB0aGUgcmVzdWx0cy5cbiAgICAgICAgICAgIG8gPSAhMCkpO1xuICAgICAgICAgICAgUCAmJiAoYyA/IChzID0gcy5hZGQoYyksIGkgPSBoID8gaS5hZGQoZSkgOiBpLmRlbGV0ZShlKSkgOiAocyA9IHMuZGVsZXRlKGUpLCBpID0gaS5kZWxldGUoZSkpKTtcbiAgICAgICAgfSkpLCBudWxsICE9PSB0aGlzLnF1ZXJ5LmxpbWl0KSBmb3IgKDtzLnNpemUgPiB0aGlzLnF1ZXJ5LmxpbWl0OyApIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBcIkZcIiAvKiBMaW1pdFR5cGUuRmlyc3QgKi8gPT09IHRoaXMucXVlcnkubGltaXRUeXBlID8gcy5sYXN0KCkgOiBzLmZpcnN0KCk7XG4gICAgICAgICAgICBzID0gcy5kZWxldGUoZS5rZXkpLCBpID0gaS5kZWxldGUoZS5rZXkpLCBuLnRyYWNrKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyAsXG4gICAgICAgICAgICAgICAgZG9jOiBlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgVGE6IHMsXG4gICAgICAgICAgICBBYTogbixcbiAgICAgICAgICAgIFhpOiBvLFxuICAgICAgICAgICAgbXV0YXRlZEtleXM6IGlcbiAgICAgICAgfTtcbiAgICB9XG4gICAgUmEoZSwgdCkge1xuICAgICAgICAvLyBXZSBzdXBwcmVzcyB0aGUgaW5pdGlhbCBjaGFuZ2UgZXZlbnQgZm9yIGRvY3VtZW50cyB0aGF0IHdlcmUgbW9kaWZpZWQgYXNcbiAgICAgICAgLy8gcGFydCBvZiBhIHdyaXRlIGFja25vd2xlZGdtZW50IChlLmcuIHdoZW4gdGhlIHZhbHVlIG9mIGEgc2VydmVyIHRyYW5zZm9ybVxuICAgICAgICAvLyBpcyBhcHBsaWVkKSBhcyBXYXRjaCB3aWxsIHNlbmQgdXMgdGhlIHNhbWUgZG9jdW1lbnQgYWdhaW4uXG4gICAgICAgIC8vIEJ5IHN1cHByZXNzaW5nIHRoZSBldmVudCwgd2Ugb25seSByYWlzZSB0d28gdXNlciB2aXNpYmxlIGV2ZW50cyAob25lIHdpdGhcbiAgICAgICAgLy8gYGhhc1BlbmRpbmdXcml0ZXNgIGFuZCB0aGUgZmluYWwgc3RhdGUgb2YgdGhlIGRvY3VtZW50KSBpbnN0ZWFkIG9mIHRocmVlXG4gICAgICAgIC8vIChvbmUgd2l0aCBgaGFzUGVuZGluZ1dyaXRlc2AsIHRoZSBtb2RpZmllZCBkb2N1bWVudCB3aXRoXG4gICAgICAgIC8vIGBoYXNQZW5kaW5nV3JpdGVzYCBhbmQgdGhlIGZpbmFsIHN0YXRlIG9mIHRoZSBkb2N1bWVudCkuXG4gICAgICAgIHJldHVybiBlLmhhc0xvY2FsTXV0YXRpb25zICYmIHQuaGFzQ29tbWl0dGVkTXV0YXRpb25zICYmICF0Lmhhc0xvY2FsTXV0YXRpb25zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSB2aWV3IHdpdGggdGhlIGdpdmVuIFZpZXdEb2N1bWVudENoYW5nZXMgYW5kIG9wdGlvbmFsbHkgdXBkYXRlc1xuICAgICAqIGxpbWJvIGRvY3MgYW5kIHN5bmMgc3RhdGUgZnJvbSB0aGUgcHJvdmlkZWQgdGFyZ2V0IGNoYW5nZS5cbiAgICAgKiBAcGFyYW0gZG9jQ2hhbmdlcyAtIFRoZSBzZXQgb2YgY2hhbmdlcyB0byBtYWtlIHRvIHRoZSB2aWV3J3MgZG9jcy5cbiAgICAgKiBAcGFyYW0gbGltYm9SZXNvbHV0aW9uRW5hYmxlZCAtIFdoZXRoZXIgdG8gdXBkYXRlIGxpbWJvIGRvY3VtZW50cyBiYXNlZCBvblxuICAgICAqICAgICAgICB0aGlzIGNoYW5nZS5cbiAgICAgKiBAcGFyYW0gdGFyZ2V0Q2hhbmdlIC0gQSB0YXJnZXQgY2hhbmdlIHRvIGFwcGx5IGZvciBjb21wdXRpbmcgbGltYm8gZG9jcyBhbmRcbiAgICAgKiAgICAgICAgc3luYyBzdGF0ZS5cbiAgICAgKiBAcGFyYW0gdGFyZ2V0SXNQZW5kaW5nUmVzZXQgLSBXaGV0aGVyIHRoZSB0YXJnZXQgaXMgcGVuZGluZyB0byByZXNldCBkdWUgdG9cbiAgICAgKiAgICAgICAgZXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaC4gSWYgbm90IGV4cGxpY2l0bHkgc3BlY2lmaWVkLCBpdCBpcyB0cmVhdGVkXG4gICAgICogICAgICAgIGVxdWl2YWxlbnRseSB0byBgZmFsc2VgLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IFZpZXdDaGFuZ2Ugd2l0aCB0aGUgZ2l2ZW4gZG9jcywgY2hhbmdlcywgYW5kIHN5bmMgc3RhdGUuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBUaGUgaU9TL0FuZHJvaWQgY2xpZW50cyBhbHdheXMgY29tcHV0ZSBsaW1ibyBkb2N1bWVudCBjaGFuZ2VzLlxuICAgIGFwcGx5Q2hhbmdlcyhlLCB0LCBuLCByKSB7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLlRhO1xuICAgICAgICB0aGlzLlRhID0gZS5UYSwgdGhpcy5tdXRhdGVkS2V5cyA9IGUubXV0YXRlZEtleXM7XG4gICAgICAgIC8vIFNvcnQgY2hhbmdlcyBiYXNlZCBvbiB0eXBlIGFuZCBxdWVyeSBjb21wYXJhdG9yXG4gICAgICAgIGNvbnN0IHMgPSBlLkFhLlFfKCk7XG4gICAgICAgIHMuc29ydCgoKGUsIHQpID0+IGZ1bmN0aW9uIF9fUFJJVkFURV9jb21wYXJlQ2hhbmdlVHlwZShlLCB0KSB7XG4gICAgICAgICAgICBjb25zdCBvcmRlciA9IGUgPT4ge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgY2FzZSAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcblxuICAgICAgICAgICAgICAgICAgY2FzZSAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gOlxuICAgICAgICAgICAgICAgICAgY2FzZSAzIC8qIENoYW5nZVR5cGUuTWV0YWRhdGEgKi8gOlxuICAgICAgICAgICAgICAgICAgICAvLyBBIG1ldGFkYXRhIGNoYW5nZSBpcyBjb252ZXJ0ZWQgdG8gYSBtb2RpZmllZCBjaGFuZ2UgYXQgdGhlIHB1YmxpY1xuICAgICAgICAgICAgICAgICAgICAvLyBhcGkgbGF5ZXIuICBTaW5jZSB3ZSBzb3J0IGJ5IGRvY3VtZW50IGtleSBhbmQgdGhlbiBjaGFuZ2UgdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgLy8gbWV0YWRhdGEgYW5kIG1vZGlmaWVkIGNoYW5nZXMgbXVzdCBiZSBzb3J0ZWQgZXF1aXZhbGVudGx5LlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMjtcblxuICAgICAgICAgICAgICAgICAgY2FzZSAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyA6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xuXG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gb3JkZXIoZSkgLSBvcmRlcih0KTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAoZS50eXBlLCB0LnR5cGUpIHx8IHRoaXMuSWEoZS5kb2MsIHQuZG9jKSkpLCB0aGlzLlZhKG4pLCByID0gbnVsbCAhPSByICYmIHI7XG4gICAgICAgIGNvbnN0IG8gPSB0ICYmICFyID8gdGhpcy5tYSgpIDogW10sIF8gPSAwID09PSB0aGlzLlBhLnNpemUgJiYgdGhpcy5jdXJyZW50ICYmICFyID8gMSAvKiBTeW5jU3RhdGUuU3luY2VkICovIDogMCAvKiBTeW5jU3RhdGUuTG9jYWwgKi8gLCBhID0gXyAhPT0gdGhpcy5oYTtcbiAgICAgICAgLy8gV2UgYXJlIGF0IHN5bmNlZCBzdGF0ZSBpZiB0aGVyZSBpcyBubyBsaW1ibyBkb2NzIGFyZSB3YWl0aW5nIHRvIGJlIHJlc29sdmVkLCB2aWV3IGlzIGN1cnJlbnRcbiAgICAgICAgLy8gd2l0aCB0aGUgYmFja2VuZCwgYW5kIHRoZSBxdWVyeSBpcyBub3QgcGVuZGluZyB0byByZXNldCBkdWUgdG8gZXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaC5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5oYSA9IF8sIDAgIT09IHMubGVuZ3RoIHx8IGEpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc25hcHNob3Q6IG5ldyBWaWV3U25hcHNob3QodGhpcy5xdWVyeSwgZS5UYSwgaSwgcywgZS5tdXRhdGVkS2V5cywgMCAvKiBTeW5jU3RhdGUuTG9jYWwgKi8gPT09IF8sIGEsIFxuICAgICAgICAgICAgICAgIC8qIGV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzPSAqLyAhMSwgISFuICYmIG4ucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCksXG4gICAgICAgICAgICAgICAgZmE6IG9cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgLy8gbm8gY2hhbmdlc1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmE6IG9cbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyBhbiBPbmxpbmVTdGF0ZSBjaGFuZ2UgdG8gdGhlIHZpZXcsIHBvdGVudGlhbGx5IGdlbmVyYXRpbmcgYVxuICAgICAqIFZpZXdDaGFuZ2UgaWYgdGhlIHZpZXcncyBzeW5jU3RhdGUgY2hhbmdlcyBhcyBhIHJlc3VsdC5cbiAgICAgKi8gICAgal8oZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50ICYmIFwiT2ZmbGluZVwiIC8qIE9ubGluZVN0YXRlLk9mZmxpbmUgKi8gPT09IGUgPyAoXG4gICAgICAgIC8vIElmIHdlJ3JlIG9mZmxpbmUsIHNldCBgY3VycmVudGAgdG8gZmFsc2UgYW5kIHRoZW4gY2FsbCBhcHBseUNoYW5nZXMoKVxuICAgICAgICAvLyB0byByZWZyZXNoIG91ciBzeW5jU3RhdGUgYW5kIGdlbmVyYXRlIGEgVmlld0NoYW5nZSBhcyBhcHByb3ByaWF0ZS4gV2VcbiAgICAgICAgLy8gYXJlIGd1YXJhbnRlZWQgdG8gZ2V0IGEgbmV3IFRhcmdldENoYW5nZSB0aGF0IHNldHMgYGN1cnJlbnRgIGJhY2sgdG9cbiAgICAgICAgLy8gdHJ1ZSBvbmNlIHRoZSBjbGllbnQgaXMgYmFjayBvbmxpbmUuXG4gICAgICAgIHRoaXMuY3VycmVudCA9ICExLCB0aGlzLmFwcGx5Q2hhbmdlcyh7XG4gICAgICAgICAgICBUYTogdGhpcy5UYSxcbiAgICAgICAgICAgIEFhOiBuZXcgX19QUklWQVRFX0RvY3VtZW50Q2hhbmdlU2V0LFxuICAgICAgICAgICAgbXV0YXRlZEtleXM6IHRoaXMubXV0YXRlZEtleXMsXG4gICAgICAgICAgICBYaTogITFcbiAgICAgICAgfSwgXG4gICAgICAgIC8qIGxpbWJvUmVzb2x1dGlvbkVuYWJsZWQ9ICovICExKSkgOiB7XG4gICAgICAgICAgICBmYTogW11cbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBkb2MgZm9yIHRoZSBnaXZlbiBrZXkgc2hvdWxkIGJlIGluIGxpbWJvLlxuICAgICAqLyAgICBnYShlKSB7XG4gICAgICAgIC8vIElmIHRoZSByZW1vdGUgZW5kIHNheXMgaXQncyBwYXJ0IG9mIHRoaXMgcXVlcnksIGl0J3Mgbm90IGluIGxpbWJvLlxuICAgICAgICByZXR1cm4gIXRoaXMubGEuaGFzKGUpICYmIChcbiAgICAgICAgLy8gVGhlIGxvY2FsIHN0b3JlIGRvZXNuJ3QgdGhpbmsgaXQncyBhIHJlc3VsdCwgc28gaXQgc2hvdWxkbid0IGJlIGluIGxpbWJvLlxuICAgICAgICAhIXRoaXMuVGEuaGFzKGUpICYmICF0aGlzLlRhLmdldChlKS5oYXNMb2NhbE11dGF0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgc3luY2VkRG9jdW1lbnRzLCBjdXJyZW50LCBhbmQgbGltYm8gZG9jcyBiYXNlZCBvbiB0aGUgZ2l2ZW4gY2hhbmdlLlxuICAgICAqIFJldHVybnMgdGhlIGxpc3Qgb2YgY2hhbmdlcyB0byB3aGljaCBkb2NzIGFyZSBpbiBsaW1iby5cbiAgICAgKi8gICAgVmEoZSkge1xuICAgICAgICBlICYmIChlLmFkZGVkRG9jdW1lbnRzLmZvckVhY2goKGUgPT4gdGhpcy5sYSA9IHRoaXMubGEuYWRkKGUpKSksIGUubW9kaWZpZWREb2N1bWVudHMuZm9yRWFjaCgoZSA9PiB7fSkpLCBcbiAgICAgICAgZS5yZW1vdmVkRG9jdW1lbnRzLmZvckVhY2goKGUgPT4gdGhpcy5sYSA9IHRoaXMubGEuZGVsZXRlKGUpKSksIHRoaXMuY3VycmVudCA9IGUuY3VycmVudCk7XG4gICAgfVxuICAgIG1hKCkge1xuICAgICAgICAvLyBXZSBjYW4gb25seSBkZXRlcm1pbmUgbGltYm8gZG9jdW1lbnRzIHdoZW4gd2UncmUgaW4tc3luYyB3aXRoIHRoZSBzZXJ2ZXIuXG4gICAgICAgIGlmICghdGhpcy5jdXJyZW50KSByZXR1cm4gW107XG4gICAgICAgIC8vIFRPRE8oa2xpbXQpOiBEbyB0aGlzIGluY3JlbWVudGFsbHkgc28gdGhhdCBpdCdzIG5vdCBxdWFkcmF0aWMgd2hlblxuICAgICAgICAvLyB1cGRhdGluZyBtYW55IGRvY3VtZW50cy5cbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy5QYTtcbiAgICAgICAgdGhpcy5QYSA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpLCB0aGlzLlRhLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5nYShlLmtleSkgJiYgKHRoaXMuUGEgPSB0aGlzLlBhLmFkZChlLmtleSkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIC8vIERpZmYgdGhlIG5ldyBsaW1ibyBkb2NzIHdpdGggdGhlIG9sZCBsaW1ibyBkb2NzLlxuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5QYS5oYXMoZSkgfHwgdC5wdXNoKG5ldyBfX1BSSVZBVEVfUmVtb3ZlZExpbWJvRG9jdW1lbnQoZSkpO1xuICAgICAgICB9KSksIHRoaXMuUGEuZm9yRWFjaCgobiA9PiB7XG4gICAgICAgICAgICBlLmhhcyhuKSB8fCB0LnB1c2gobmV3IF9fUFJJVkFURV9BZGRlZExpbWJvRG9jdW1lbnQobikpO1xuICAgICAgICB9KSksIHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgaW4tbWVtb3J5IHN0YXRlIG9mIHRoZSBjdXJyZW50IHZpZXcgd2l0aCB0aGUgc3RhdGUgcmVhZCBmcm9tXG4gICAgICogcGVyc2lzdGVuY2UuXG4gICAgICpcbiAgICAgKiBXZSB1cGRhdGUgdGhlIHF1ZXJ5IHZpZXcgd2hlbmV2ZXIgYSBjbGllbnQncyBwcmltYXJ5IHN0YXR1cyBjaGFuZ2VzOlxuICAgICAqIC0gV2hlbiBhIGNsaWVudCB0cmFuc2l0aW9ucyBmcm9tIHByaW1hcnkgdG8gc2Vjb25kYXJ5LCBpdCBjYW4gbWlzc1xuICAgICAqICAgTG9jYWxTdG9yYWdlIHVwZGF0ZXMgYW5kIGl0cyBxdWVyeSB2aWV3cyBtYXkgdGVtcG9yYXJpbHkgbm90IGJlXG4gICAgICogICBzeW5jaHJvbml6ZWQgd2l0aCB0aGUgc3RhdGUgb24gZGlzay5cbiAgICAgKiAtIEZvciBzZWNvbmRhcnkgdG8gcHJpbWFyeSB0cmFuc2l0aW9ucywgdGhlIGNsaWVudCBuZWVkcyB0byB1cGRhdGUgdGhlIGxpc3RcbiAgICAgKiAgIG9mIGBzeW5jZWREb2N1bWVudHNgIHNpbmNlIHNlY29uZGFyeSBjbGllbnRzIHVwZGF0ZSB0aGVpciBxdWVyeSB2aWV3c1xuICAgICAqICAgYmFzZWQgcHVyZWx5IG9uIHN5bnRoZXNpemVkIFJlbW90ZUV2ZW50cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBxdWVyeVJlc3VsdC5kb2N1bWVudHMgLSBUaGUgZG9jdW1lbnRzIHRoYXQgbWF0Y2ggdGhlIHF1ZXJ5IGFjY29yZGluZ1xuICAgICAqIHRvIHRoZSBMb2NhbFN0b3JlLlxuICAgICAqIEBwYXJhbSBxdWVyeVJlc3VsdC5yZW1vdGVLZXlzIC0gVGhlIGtleXMgb2YgdGhlIGRvY3VtZW50cyB0aGF0IG1hdGNoIHRoZVxuICAgICAqIHF1ZXJ5IGFjY29yZGluZyB0byB0aGUgYmFja2VuZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBWaWV3Q2hhbmdlIHRoYXQgcmVzdWx0ZWQgZnJvbSB0aGlzIHN5bmNocm9uaXphdGlvbi5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxuICAgIHBhKGUpIHtcbiAgICAgICAgdGhpcy5sYSA9IGUuaHMsIHRoaXMuUGEgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKTtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuZGEoZS5kb2N1bWVudHMpO1xuICAgICAgICByZXR1cm4gdGhpcy5hcHBseUNoYW5nZXModCwgLyogbGltYm9SZXNvbHV0aW9uRW5hYmxlZD0gKi8gITApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgdmlldyBzbmFwc2hvdCBhcyBpZiB0aGlzIHF1ZXJ5IHdhcyBqdXN0IGxpc3RlbmVkIHRvLiBDb250YWluc1xuICAgICAqIGEgZG9jdW1lbnQgYWRkIGZvciBldmVyeSBleGlzdGluZyBkb2N1bWVudCBhbmQgdGhlIGBmcm9tQ2FjaGVgIGFuZFxuICAgICAqIGBoYXNQZW5kaW5nV3JpdGVzYCBzdGF0dXMgb2YgdGhlIGFscmVhZHkgZXN0YWJsaXNoZWQgdmlldy5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxuICAgIHlhKCkge1xuICAgICAgICByZXR1cm4gVmlld1NuYXBzaG90LmZyb21Jbml0aWFsRG9jdW1lbnRzKHRoaXMucXVlcnksIHRoaXMuVGEsIHRoaXMubXV0YXRlZEtleXMsIDAgLyogU3luY1N0YXRlLkxvY2FsICovID09PSB0aGlzLmhhLCB0aGlzLmhhc0NhY2hlZFJlc3VsdHMpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBRdWVyeVZpZXcgY29udGFpbnMgYWxsIG9mIHRoZSBkYXRhIHRoYXQgU3luY0VuZ2luZSBuZWVkcyB0byBrZWVwIHRyYWNrIG9mIGZvclxuICogYSBwYXJ0aWN1bGFyIHF1ZXJ5LlxuICovXG5jbGFzcyBfX1BSSVZBVEVfUXVlcnlWaWV3IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgcXVlcnkgaXRzZWxmLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIFRoZSB0YXJnZXQgbnVtYmVyIGNyZWF0ZWQgYnkgdGhlIGNsaWVudCB0aGF0IGlzIHVzZWQgaW4gdGhlIHdhdGNoXG4gICAgICogc3RyZWFtIHRvIGlkZW50aWZ5IHRoaXMgcXVlcnkuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIHZpZXcgaXMgcmVzcG9uc2libGUgZm9yIGNvbXB1dGluZyB0aGUgZmluYWwgbWVyZ2VkIHRydXRoIG9mIHdoYXRcbiAgICAgKiBkb2NzIGFyZSBpbiB0aGUgcXVlcnkuIEl0IGdldHMgbm90aWZpZWQgb2YgbG9jYWwgYW5kIHJlbW90ZSBjaGFuZ2VzLFxuICAgICAqIGFuZCBhcHBsaWVzIHRoZSBxdWVyeSBmaWx0ZXJzIGFuZCBsaW1pdHMgdG8gZGV0ZXJtaW5lIHRoZSBtb3N0IGNvcnJlY3RcbiAgICAgKiBwb3NzaWJsZSByZXN1bHRzLlxuICAgICAqL1xuICAgIG4pIHtcbiAgICAgICAgdGhpcy5xdWVyeSA9IGUsIHRoaXMudGFyZ2V0SWQgPSB0LCB0aGlzLnZpZXcgPSBuO1xuICAgIH1cbn1cblxuLyoqIFRyYWNrcyBhIGxpbWJvIHJlc29sdXRpb24uICovIGNsYXNzIExpbWJvUmVzb2x1dGlvbiB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLmtleSA9IGUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IHRvIHRydWUgb25jZSB3ZSd2ZSByZWNlaXZlZCBhIGRvY3VtZW50LiBUaGlzIGlzIHVzZWQgaW5cbiAgICAgICAgICogZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCgpIGFuZCB1bHRpbWF0ZWx5IHVzZWQgYnkgV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yIHRvXG4gICAgICAgICAqIGRlY2lkZSB3aGV0aGVyIGl0IG5lZWRzIHRvIG1hbnVmYWN0dXJlIGEgZGVsZXRlIGV2ZW50IGZvciB0aGUgdGFyZ2V0IG9uY2VcbiAgICAgICAgICogdGhlIHRhcmdldCBpcyBDVVJSRU5ULlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy53YSA9ICExO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiBgU3luY0VuZ2luZWAgY29vcmRpbmF0aW5nIHdpdGggb3RoZXIgcGFydHMgb2YgU0RLLlxuICpcbiAqIFRoZSBwYXJ0cyBvZiBTeW5jRW5naW5lIHRoYXQgYWN0IGFzIGEgY2FsbGJhY2sgdG8gUmVtb3RlU3RvcmUgbmVlZCB0byBiZVxuICogcmVnaXN0ZXJlZCBpbmRpdmlkdWFsbHkuIFRoaXMgaXMgZG9uZSBpbiBgc3luY0VuZ2luZVdyaXRlKClgIGFuZFxuICogYHN5bmNFbmdpbmVMaXN0ZW4oKWAgKGFzIHdlbGwgYXMgYGFwcGx5UHJpbWFyeVN0YXRlKClgKSBhcyB0aGVzZSBtZXRob2RzXG4gKiBzZXJ2ZSBhcyBlbnRyeSBwb2ludHMgdG8gUmVtb3RlU3RvcmUncyBmdW5jdGlvbmFsaXR5LlxuICpcbiAqIE5vdGU6IHNvbWUgZmllbGQgZGVmaW5lZCBpbiB0aGlzIGNsYXNzIG1pZ2h0IGhhdmUgcHVibGljIGFjY2VzcyBsZXZlbCwgYnV0XG4gKiB0aGUgY2xhc3MgaXMgbm90IGV4cG9ydGVkIHNvIHRoZXkgYXJlIG9ubHkgYWNjZXNzaWJsZSBmcm9tIHRoaXMgbW9kdWxlLlxuICogVGhpcyBpcyB1c2VmdWwgdG8gaW1wbGVtZW50IG9wdGlvbmFsIGZlYXR1cmVzIChsaWtlIGJ1bmRsZXMpIGluIGZyZWVcbiAqIGZ1bmN0aW9ucywgc3VjaCB0aGF0IHRoZXkgYXJlIHRyZWUtc2hha2VhYmxlLlxuICovIGNsYXNzIF9fUFJJVkFURV9TeW5jRW5naW5lSW1wbCB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgXG4gICAgLy8gUE9SVElORyBOT1RFOiBNYW5hZ2VzIHN0YXRlIHN5bmNocm9uaXphdGlvbiBpbiBtdWx0aS10YWIgZW52aXJvbm1lbnRzLlxuICAgIHIsIGksIHMpIHtcbiAgICAgICAgdGhpcy5sb2NhbFN0b3JlID0gZSwgdGhpcy5yZW1vdGVTdG9yZSA9IHQsIHRoaXMuZXZlbnRNYW5hZ2VyID0gbiwgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSA9IHIsIFxuICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0gaSwgdGhpcy5tYXhDb25jdXJyZW50TGltYm9SZXNvbHV0aW9ucyA9IHMsIHRoaXMuU2EgPSB7fSwgdGhpcy5iYSA9IG5ldyBPYmplY3RNYXAoKGUgPT4gX19QUklWQVRFX2Nhbm9uaWZ5UXVlcnkoZSkpLCBfX1BSSVZBVEVfcXVlcnlFcXVhbHMpLCBcbiAgICAgICAgdGhpcy5EYSA9IG5ldyBNYXAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGtleXMgb2YgZG9jdW1lbnRzIHRoYXQgYXJlIGluIGxpbWJvIGZvciB3aGljaCB3ZSBoYXZlbid0IHlldCBzdGFydGVkIGFcbiAgICAgICAgICogbGltYm8gcmVzb2x1dGlvbiBxdWVyeS4gVGhlIHN0cmluZ3MgaW4gdGhpcyBzZXQgYXJlIHRoZSByZXN1bHQgb2YgY2FsbGluZ1xuICAgICAgICAgKiBga2V5LnBhdGguY2Fub25pY2FsU3RyaW5nKClgIHdoZXJlIGBrZXlgIGlzIGEgYERvY3VtZW50S2V5YCBvYmplY3QuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZSBgU2V0YCB0eXBlIHdhcyBjaG9zZW4gYmVjYXVzZSBpdCBwcm92aWRlcyBlZmZpY2llbnQgbG9va3VwIGFuZCByZW1vdmFsXG4gICAgICAgICAqIG9mIGFyYml0cmFyeSBlbGVtZW50cyBhbmQgaXQgYWxzbyBtYWludGFpbnMgaW5zZXJ0aW9uIG9yZGVyLCBwcm92aWRpbmcgdGhlXG4gICAgICAgICAqIGRlc2lyZWQgcXVldWUtbGlrZSBGSUZPIHNlbWFudGljcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuQ2EgPSBuZXcgU2V0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEtlZXBzIHRyYWNrIG9mIHRoZSB0YXJnZXQgSUQgZm9yIGVhY2ggZG9jdW1lbnQgdGhhdCBpcyBpbiBsaW1ibyB3aXRoIGFuXG4gICAgICAgICAqIGFjdGl2ZSB0YXJnZXQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnZhID0gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBLZWVwcyB0cmFjayBvZiB0aGUgaW5mb3JtYXRpb24gYWJvdXQgYW4gYWN0aXZlIGxpbWJvIHJlc29sdXRpb24gZm9yIGVhY2hcbiAgICAgICAgICogYWN0aXZlIHRhcmdldCBJRCB0aGF0IHdhcyBzdGFydGVkIGZvciB0aGUgcHVycG9zZSBvZiBsaW1ibyByZXNvbHV0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5GYSA9IG5ldyBNYXAsIHRoaXMuTWEgPSBuZXcgX19QUklWQVRFX1JlZmVyZW5jZVNldCwgXG4gICAgICAgIC8qKiBTdG9yZXMgdXNlciBjb21wbGV0aW9uIGhhbmRsZXJzLCBpbmRleGVkIGJ5IFVzZXIgYW5kIEJhdGNoSWQuICovXG4gICAgICAgIHRoaXMueGEgPSB7fSwgXG4gICAgICAgIC8qKiBTdG9yZXMgdXNlciBjYWxsYmFja3Mgd2FpdGluZyBmb3IgYWxsIHBlbmRpbmcgd3JpdGVzIHRvIGJlIGFja25vd2xlZGdlZC4gKi9cbiAgICAgICAgdGhpcy5PYSA9IG5ldyBNYXAsIHRoaXMuTmEgPSBfX1BSSVZBVEVfVGFyZ2V0SWRHZW5lcmF0b3IuTG4oKSwgdGhpcy5vbmxpbmVTdGF0ZSA9IFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8gLCBcbiAgICAgICAgLy8gVGhlIHByaW1hcnkgc3RhdGUgaXMgc2V0IHRvIGB0cnVlYCBvciBgZmFsc2VgIGltbWVkaWF0ZWx5IGFmdGVyIEZpcmVzdG9yZVxuICAgICAgICAvLyBzdGFydHVwLiBJbiB0aGUgaW50ZXJpbSwgYSBjbGllbnQgc2hvdWxkIG9ubHkgYmUgY29uc2lkZXJlZCBwcmltYXJ5IGlmXG4gICAgICAgIC8vIGBpc1ByaW1hcnlgIGlzIHRydWUuXG4gICAgICAgIHRoaXMuTGEgPSB2b2lkIDA7XG4gICAgfVxuICAgIGdldCBpc1ByaW1hcnlDbGllbnQoKSB7XG4gICAgICAgIHJldHVybiAhMCA9PT0gdGhpcy5MYTtcbiAgICB9XG59XG5cbi8qKlxuICogSW5pdGlhdGVzIHRoZSBuZXcgbGlzdGVuLCByZXNvbHZlcyBwcm9taXNlIHdoZW4gbGlzdGVuIGVucXVldWVkIHRvIHRoZVxuICogc2VydmVyLiBBbGwgdGhlIHN1YnNlcXVlbnQgdmlldyBzbmFwc2hvdHMgb3IgZXJyb3JzIGFyZSBzZW50IHRvIHRoZVxuICogc3Vic2NyaWJlZCBoYW5kbGVycy4gUmV0dXJucyB0aGUgaW5pdGlhbCBzbmFwc2hvdC5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVMaXN0ZW4oZSwgdCwgbiA9ICEwKSB7XG4gICAgY29uc3QgciA9IF9fUFJJVkFURV9lbnN1cmVXYXRjaENhbGxiYWNrcyhlKTtcbiAgICBsZXQgaTtcbiAgICBjb25zdCBzID0gci5iYS5nZXQodCk7XG4gICAgcmV0dXJuIHMgPyAoXG4gICAgLy8gUE9SVElORyBOT1RFOiBXaXRoIE11bHRpLVRhYiBXZWIsIGl0IGlzIHBvc3NpYmxlIHRoYXQgYSBxdWVyeSB2aWV3XG4gICAgLy8gYWxyZWFkeSBleGlzdHMgd2hlbiBFdmVudE1hbmFnZXIgY2FsbHMgdXMgZm9yIHRoZSBmaXJzdCB0aW1lLiBUaGlzXG4gICAgLy8gaGFwcGVucyB3aGVuIHRoZSBwcmltYXJ5IHRhYiBpcyBhbHJlYWR5IGxpc3RlbmluZyB0byB0aGlzIHF1ZXJ5IG9uXG4gICAgLy8gYmVoYWxmIG9mIGFub3RoZXIgdGFiIGFuZCB0aGUgdXNlciBvZiB0aGUgcHJpbWFyeSBhbHNvIHN0YXJ0cyBsaXN0ZW5pbmdcbiAgICAvLyB0byB0aGUgcXVlcnkuIEV2ZW50TWFuYWdlciB3aWxsIG5vdCBoYXZlIGFuIGFzc2lnbmVkIHRhcmdldCBJRCBpbiB0aGlzXG4gICAgLy8gY2FzZSBhbmQgY2FsbHMgYGxpc3RlbmAgdG8gb2J0YWluIHRoaXMgSUQuXG4gICAgci5zaGFyZWRDbGllbnRTdGF0ZS5hZGRMb2NhbFF1ZXJ5VGFyZ2V0KHMudGFyZ2V0SWQpLCBpID0gcy52aWV3LnlhKCkpIDogaSA9IGF3YWl0IF9fUFJJVkFURV9hbGxvY2F0ZVRhcmdldEFuZE1heWJlTGlzdGVuKHIsIHQsIG4sIFxuICAgIC8qKiBzaG91bGRJbml0aWFsaXplVmlldz0gKi8gITApLCBpO1xufVxuXG4vKiogUXVlcnkgaGFzIGJlZW4gbGlzdGVuaW5nIHRvIHRoZSBjYWNoZSwgYW5kIHRyaWVzIHRvIGluaXRpYXRlIHRoZSByZW1vdGUgc3RvcmUgbGlzdGVuICovIGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV90cmlnZ2VyUmVtb3RlU3RvcmVMaXN0ZW4oZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZW5zdXJlV2F0Y2hDYWxsYmFja3MoZSk7XG4gICAgYXdhaXQgX19QUklWQVRFX2FsbG9jYXRlVGFyZ2V0QW5kTWF5YmVMaXN0ZW4obiwgdCwgXG4gICAgLyoqIHNob3VsZExpc3RlblRvUmVtb3RlPSAqLyAhMCwgXG4gICAgLyoqIHNob3VsZEluaXRpYWxpemVWaWV3PSAqLyAhMSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9hbGxvY2F0ZVRhcmdldEFuZE1heWJlTGlzdGVuKGUsIHQsIG4sIHIpIHtcbiAgICBjb25zdCBpID0gYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVBbGxvY2F0ZVRhcmdldChlLmxvY2FsU3RvcmUsIF9fUFJJVkFURV9xdWVyeVRvVGFyZ2V0KHQpKSwgcyA9IGkudGFyZ2V0SWQsIG8gPSBuID8gZS5zaGFyZWRDbGllbnRTdGF0ZS5hZGRMb2NhbFF1ZXJ5VGFyZ2V0KHMpIDogXCJub3QtY3VycmVudFwiO1xuICAgIGxldCBfO1xuICAgIHJldHVybiByICYmIChfID0gYXdhaXQgX19QUklWQVRFX2luaXRpYWxpemVWaWV3QW5kQ29tcHV0ZVNuYXBzaG90KGUsIHQsIHMsIFwiY3VycmVudFwiID09PSBvLCBpLnJlc3VtZVRva2VuKSksIFxuICAgIGUuaXNQcmltYXJ5Q2xpZW50ICYmIG4gJiYgX19QUklWQVRFX3JlbW90ZVN0b3JlTGlzdGVuKGUucmVtb3RlU3RvcmUsIGkpLCBfO1xufVxuXG4vKipcbiAqIFJlZ2lzdGVycyBhIHZpZXcgZm9yIGEgcHJldmlvdXNseSB1bmtub3duIHF1ZXJ5IGFuZCBjb21wdXRlcyBpdHMgaW5pdGlhbFxuICogc25hcHNob3QuXG4gKi8gYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2luaXRpYWxpemVWaWV3QW5kQ29tcHV0ZVNuYXBzaG90KGUsIHQsIG4sIHIsIGkpIHtcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE9uIFdlYiBvbmx5LCB3ZSBpbmplY3QgdGhlIGNvZGUgdGhhdCByZWdpc3RlcnMgbmV3IExpbWJvXG4gICAgLy8gdGFyZ2V0cyBiYXNlZCBvbiB2aWV3IGNoYW5nZXMuIFRoaXMgYWxsb3dzIHVzIHRvIG9ubHkgZGVwZW5kIG9uIExpbWJvXG4gICAgLy8gY2hhbmdlcyB3aGVuIHVzZXIgY29kZSBpbmNsdWRlcyBxdWVyaWVzLlxuICAgIGUuQmEgPSAodCwgbiwgcikgPT4gYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2FwcGx5RG9jQ2hhbmdlcyhlLCB0LCBuLCByKSB7XG4gICAgICAgIGxldCBpID0gdC52aWV3LmRhKG4pO1xuICAgICAgICBpLlhpICYmIChcbiAgICAgICAgLy8gVGhlIHF1ZXJ5IGhhcyBhIGxpbWl0IGFuZCBzb21lIGRvY3Mgd2VyZSByZW1vdmVkLCBzbyB3ZSBuZWVkXG4gICAgICAgIC8vIHRvIHJlLXJ1biB0aGUgcXVlcnkgYWdhaW5zdCB0aGUgbG9jYWwgc3RvcmUgdG8gbWFrZSBzdXJlIHdlXG4gICAgICAgIC8vIGRpZG4ndCBsb3NlIGFueSBnb29kIGRvY3MgdGhhdCBoYWQgYmVlbiBwYXN0IHRoZSBsaW1pdC5cbiAgICAgICAgaSA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlRXhlY3V0ZVF1ZXJ5KGUubG9jYWxTdG9yZSwgdC5xdWVyeSwgXG4gICAgICAgIC8qIHVzZVByZXZpb3VzUmVzdWx0cz0gKi8gITEpLnRoZW4oKCh7ZG9jdW1lbnRzOiBlfSkgPT4gdC52aWV3LmRhKGUsIGkpKSkpO1xuICAgICAgICBjb25zdCBzID0gciAmJiByLnRhcmdldENoYW5nZXMuZ2V0KHQudGFyZ2V0SWQpLCBvID0gciAmJiBudWxsICE9IHIudGFyZ2V0TWlzbWF0Y2hlcy5nZXQodC50YXJnZXRJZCksIF8gPSB0LnZpZXcuYXBwbHlDaGFuZ2VzKGksIFxuICAgICAgICAvKiBsaW1ib1Jlc29sdXRpb25FbmFibGVkPSAqLyBlLmlzUHJpbWFyeUNsaWVudCwgcywgbyk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfdXBkYXRlVHJhY2tlZExpbWJvcyhlLCB0LnRhcmdldElkLCBfLmZhKSwgXy5zbmFwc2hvdDtcbiAgICB9KGUsIHQsIG4sIHIpO1xuICAgIGNvbnN0IHMgPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUV4ZWN1dGVRdWVyeShlLmxvY2FsU3RvcmUsIHQsIFxuICAgIC8qIHVzZVByZXZpb3VzUmVzdWx0cz0gKi8gITApLCBvID0gbmV3IF9fUFJJVkFURV9WaWV3KHQsIHMuaHMpLCBfID0gby5kYShzLmRvY3VtZW50cyksIGEgPSBUYXJnZXRDaGFuZ2UuY3JlYXRlU3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2VGb3JDdXJyZW50Q2hhbmdlKG4sIHIgJiYgXCJPZmZsaW5lXCIgLyogT25saW5lU3RhdGUuT2ZmbGluZSAqLyAhPT0gZS5vbmxpbmVTdGF0ZSwgaSksIHUgPSBvLmFwcGx5Q2hhbmdlcyhfLCBcbiAgICAvKiBsaW1ib1Jlc29sdXRpb25FbmFibGVkPSAqLyBlLmlzUHJpbWFyeUNsaWVudCwgYSk7XG4gICAgX19QUklWQVRFX3VwZGF0ZVRyYWNrZWRMaW1ib3MoZSwgbiwgdS5mYSk7XG4gICAgY29uc3QgYyA9IG5ldyBfX1BSSVZBVEVfUXVlcnlWaWV3KHQsIG4sIG8pO1xuICAgIHJldHVybiBlLmJhLnNldCh0LCBjKSwgZS5EYS5oYXMobikgPyBlLkRhLmdldChuKS5wdXNoKHQpIDogZS5EYS5zZXQobiwgWyB0IF0pLCB1LnNuYXBzaG90O1xufVxuXG4vKiogU3RvcHMgbGlzdGVuaW5nIHRvIHRoZSBxdWVyeS4gKi8gYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVVbmxpc3RlbihlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIGkgPSByLmJhLmdldCh0KSwgcyA9IHIuRGEuZ2V0KGkudGFyZ2V0SWQpO1xuICAgIGlmIChzLmxlbmd0aCA+IDEpIHJldHVybiByLkRhLnNldChpLnRhcmdldElkLCBzLmZpbHRlcigoZSA9PiAhX19QUklWQVRFX3F1ZXJ5RXF1YWxzKGUsIHQpKSkpLCBcbiAgICB2b2lkIHIuYmEuZGVsZXRlKHQpO1xuICAgIC8vIE5vIG90aGVyIHF1ZXJpZXMgYXJlIG1hcHBlZCB0byB0aGUgdGFyZ2V0LCBjbGVhbiB1cCB0aGUgcXVlcnkgYW5kIHRoZSB0YXJnZXQuXG4gICAgICAgIGlmIChyLmlzUHJpbWFyeUNsaWVudCkge1xuICAgICAgICAvLyBXZSBuZWVkIHRvIHJlbW92ZSB0aGUgbG9jYWwgcXVlcnkgdGFyZ2V0IGZpcnN0IHRvIGFsbG93IHVzIHRvIHZlcmlmeVxuICAgICAgICAvLyB3aGV0aGVyIGFueSBvdGhlciBjbGllbnQgaXMgc3RpbGwgaW50ZXJlc3RlZCBpbiB0aGlzIHRhcmdldC5cbiAgICAgICAgci5zaGFyZWRDbGllbnRTdGF0ZS5yZW1vdmVMb2NhbFF1ZXJ5VGFyZ2V0KGkudGFyZ2V0SWQpO1xuICAgICAgICByLnNoYXJlZENsaWVudFN0YXRlLmlzQWN0aXZlUXVlcnlUYXJnZXQoaS50YXJnZXRJZCkgfHwgYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVSZWxlYXNlVGFyZ2V0KHIubG9jYWxTdG9yZSwgaS50YXJnZXRJZCwgXG4gICAgICAgIC8qa2VlcFBlcnNpc3RlZFRhcmdldERhdGE9Ki8gITEpLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgIHIuc2hhcmVkQ2xpZW50U3RhdGUuY2xlYXJRdWVyeVN0YXRlKGkudGFyZ2V0SWQpLCBuICYmIF9fUFJJVkFURV9yZW1vdGVTdG9yZVVubGlzdGVuKHIucmVtb3RlU3RvcmUsIGkudGFyZ2V0SWQpLCBcbiAgICAgICAgICAgIF9fUFJJVkFURV9yZW1vdmVBbmRDbGVhbnVwVGFyZ2V0KHIsIGkudGFyZ2V0SWQpO1xuICAgICAgICB9KSkuY2F0Y2goX19QUklWQVRFX2lnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyk7XG4gICAgfSBlbHNlIF9fUFJJVkFURV9yZW1vdmVBbmRDbGVhbnVwVGFyZ2V0KHIsIGkudGFyZ2V0SWQpLCBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZVJlbGVhc2VUYXJnZXQoci5sb2NhbFN0b3JlLCBpLnRhcmdldElkLCBcbiAgICAvKmtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhPSovICEwKTtcbn1cblxuLyoqIFVubGlzdGVucyB0byB0aGUgcmVtb3RlIHN0b3JlIHdoaWxlIHN0aWxsIGxpc3RlbmluZyB0byB0aGUgY2FjaGUuICovIGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV90cmlnZ2VyUmVtb3RlU3RvcmVVbmxpc3RlbihlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIHIgPSBuLmJhLmdldCh0KSwgaSA9IG4uRGEuZ2V0KHIudGFyZ2V0SWQpO1xuICAgIG4uaXNQcmltYXJ5Q2xpZW50ICYmIDEgPT09IGkubGVuZ3RoICYmIChcbiAgICAvLyBQT1JUSU5HIE5PVEU6IFVucmVnaXN0ZXIgdGhlIHRhcmdldCBJRCB3aXRoIGxvY2FsIEZpcmVzdG9yZSBjbGllbnQgYXNcbiAgICAvLyB3YXRjaCB0YXJnZXQuXG4gICAgbi5zaGFyZWRDbGllbnRTdGF0ZS5yZW1vdmVMb2NhbFF1ZXJ5VGFyZ2V0KHIudGFyZ2V0SWQpLCBfX1BSSVZBVEVfcmVtb3RlU3RvcmVVbmxpc3RlbihuLnJlbW90ZVN0b3JlLCByLnRhcmdldElkKSk7XG59XG5cbi8qKlxuICogSW5pdGlhdGVzIHRoZSB3cml0ZSBvZiBsb2NhbCBtdXRhdGlvbiBiYXRjaCB3aGljaCBpbnZvbHZlcyBhZGRpbmcgdGhlXG4gKiB3cml0ZXMgdG8gdGhlIG11dGF0aW9uIHF1ZXVlLCBub3RpZnlpbmcgdGhlIHJlbW90ZSBzdG9yZSBhYm91dCBuZXdcbiAqIG11dGF0aW9ucyBhbmQgcmFpc2luZyBldmVudHMgZm9yIGFueSBjaGFuZ2VzIHRoaXMgd3JpdGUgY2F1c2VkLlxuICpcbiAqIFRoZSBwcm9taXNlIHJldHVybmVkIGJ5IHRoaXMgY2FsbCBpcyByZXNvbHZlZCB3aGVuIHRoZSBhYm92ZSBzdGVwc1xuICogaGF2ZSBjb21wbGV0ZWQsICpub3QqIHdoZW4gdGhlIHdyaXRlIHdhcyBhY2tlZCBieSB0aGUgYmFja2VuZC4gVGhlXG4gKiB1c2VyQ2FsbGJhY2sgaXMgcmVzb2x2ZWQgb25jZSB0aGUgd3JpdGUgd2FzIGFja2VkL3JlamVjdGVkIGJ5IHRoZVxuICogYmFja2VuZCAob3IgZmFpbGVkIGxvY2FsbHkgZm9yIGFueSBvdGhlciByZWFzb24pLlxuICovIGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lV3JpdGUoZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfc3luY0VuZ2luZUVuc3VyZVdyaXRlQ2FsbGJhY2tzKGUpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZVdyaXRlTG9jYWxseShlLCB0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgciA9IFRpbWVzdGFtcC5ub3coKSwgaSA9IHQucmVkdWNlKCgoZSwgdCkgPT4gZS5hZGQodC5rZXkpKSwgX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCkpO1xuICAgICAgICAgICAgbGV0IHMsIG87XG4gICAgICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkxvY2FsbHkgd3JpdGUgbXV0YXRpb25zXCIsIFwicmVhZHdyaXRlXCIsIChlID0+IHtcbiAgICAgICAgICAgICAgICAvLyBGaWd1cmUgb3V0IHdoaWNoIGtleXMgZG8gbm90IGhhdmUgYSByZW1vdGUgdmVyc2lvbiBpbiB0aGUgY2FjaGUsIHRoaXNcbiAgICAgICAgICAgICAgICAvLyBpcyBuZWVkZWQgdG8gY3JlYXRlIHRoZSByaWdodCBvdmVybGF5IG11dGF0aW9uOiBpZiBubyByZW1vdGUgdmVyc2lvblxuICAgICAgICAgICAgICAgIC8vIHByZXNlbnRzLCB3ZSBkbyBub3QgbmVlZCB0byBjcmVhdGUgb3ZlcmxheXMgYXMgcGF0Y2ggbXV0YXRpb25zLlxuICAgICAgICAgICAgICAgIC8vIFRPRE8oT3ZlcmxheSk6IElzIHRoZXJlIGEgYmV0dGVyIHdheSB0byBkZXRlcm1pbmUgdGhpcz8gVXNpbmcgdGhlXG4gICAgICAgICAgICAgICAgLy8gIGRvY3VtZW50IHZlcnNpb24gZG9lcyBub3Qgd29yayBiZWNhdXNlIGxvY2FsIG11dGF0aW9ucyBzZXQgdGhlbSBiYWNrXG4gICAgICAgICAgICAgICAgLy8gIHRvIDAuXG4gICAgICAgICAgICAgICAgbGV0IF8gPSBfX1BSSVZBVEVfbXV0YWJsZURvY3VtZW50TWFwKCksIGEgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5vcy5nZXRFbnRyaWVzKGUsIGkpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBfID0gZSwgXy5mb3JFYWNoKCgoZSwgdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdC5pc1ZhbGlkRG9jdW1lbnQoKSB8fCAoYSA9IGEuYWRkKGUpKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuLmxvY2FsRG9jdW1lbnRzLmdldE92ZXJsYXllZERvY3VtZW50cyhlLCBfKSkpLm5leHQoKGkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzID0gaTtcbiAgICAgICAgICAgICAgICAgICAgLy8gRm9yIG5vbi1pZGVtcG90ZW50IG11dGF0aW9ucyAoc3VjaCBhcyBgRmllbGRWYWx1ZS5pbmNyZW1lbnQoKWApLFxuICAgICAgICAgICAgICAgICAgICAvLyB3ZSByZWNvcmQgdGhlIGJhc2Ugc3RhdGUgaW4gYSBzZXBhcmF0ZSBwYXRjaCBtdXRhdGlvbi4gVGhpcyBpc1xuICAgICAgICAgICAgICAgICAgICAvLyBsYXRlciB1c2VkIHRvIGd1YXJhbnRlZSBjb25zaXN0ZW50IHZhbHVlcyBhbmQgcHJldmVudHMgZmxpY2tlclxuICAgICAgICAgICAgICAgICAgICAvLyBldmVuIGlmIHRoZSBiYWNrZW5kIHNlbmRzIHVzIGFuIHVwZGF0ZSB0aGF0IGFscmVhZHkgaW5jbHVkZXMgb3VyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRyYW5zZm9ybS5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9tdXRhdGlvbkV4dHJhY3RCYXNlVmFsdWUoZSwgcy5nZXQoZS5rZXkpLm92ZXJsYXllZERvY3VtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT0gdCAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5PVEU6IFRoZSBiYXNlIHN0YXRlIHNob3VsZCBvbmx5IGJlIGFwcGxpZWQgaWYgdGhlcmUncyBzb21lXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBleGlzdGluZyBkb2N1bWVudCB0byBvdmVycmlkZSwgc28gdXNlIGEgUHJlY29uZGl0aW9uIG9mXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBleGlzdHM9dHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgby5wdXNoKG5ldyBfX1BSSVZBVEVfUGF0Y2hNdXRhdGlvbihlLmtleSwgdCwgX19QUklWQVRFX2V4dHJhY3RGaWVsZE1hc2sodC52YWx1ZS5tYXBWYWx1ZSksIFByZWNvbmRpdGlvbi5leGlzdHMoITApKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4ubXV0YXRpb25RdWV1ZS5hZGRNdXRhdGlvbkJhdGNoKGUsIHIsIG8sIHQpO1xuICAgICAgICAgICAgICAgIH0pKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbyA9IHQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHIgPSB0LmFwcGx5VG9Mb2NhbERvY3VtZW50U2V0KHMsIGEpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5kb2N1bWVudE92ZXJsYXlDYWNoZS5zYXZlT3ZlcmxheXMoZSwgdC5iYXRjaElkLCByKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSkudGhlbigoKCkgPT4gKHtcbiAgICAgICAgICAgICAgICBiYXRjaElkOiBvLmJhdGNoSWQsXG4gICAgICAgICAgICAgICAgY2hhbmdlczogX19QUklWQVRFX2NvbnZlcnRPdmVybGF5ZWREb2N1bWVudE1hcFRvRG9jdW1lbnRNYXAocylcbiAgICAgICAgICAgIH0pKSk7XG4gICAgICAgIH0oci5sb2NhbFN0b3JlLCB0KTtcbiAgICAgICAgci5zaGFyZWRDbGllbnRTdGF0ZS5hZGRQZW5kaW5nTXV0YXRpb24oZS5iYXRjaElkKSwgZnVuY3Rpb24gX19QUklWQVRFX2FkZE11dGF0aW9uQ2FsbGJhY2soZSwgdCwgbikge1xuICAgICAgICAgICAgbGV0IHIgPSBlLnhhW2UuY3VycmVudFVzZXIudG9LZXkoKV07XG4gICAgICAgICAgICByIHx8IChyID0gbmV3IFNvcnRlZE1hcChfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcikpO1xuICAgICAgICAgICAgciA9IHIuaW5zZXJ0KHQsIG4pLCBlLnhhW2UuY3VycmVudFVzZXIudG9LZXkoKV0gPSByO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmVzb2x2ZXMgb3IgcmVqZWN0cyB0aGUgdXNlciBjYWxsYmFjayBmb3IgdGhlIGdpdmVuIGJhdGNoIGFuZCB0aGVuIGRpc2NhcmRzXG4gKiBpdC5cbiAqLyAociwgZS5iYXRjaElkLCBuKSwgYXdhaXQgX19QUklWQVRFX3N5bmNFbmdpbmVFbWl0TmV3U25hcHNBbmROb3RpZnlMb2NhbFN0b3JlKHIsIGUuY2hhbmdlcyksIFxuICAgICAgICBhd2FpdCBfX1BSSVZBVEVfZmlsbFdyaXRlUGlwZWxpbmUoci5yZW1vdGVTdG9yZSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBJZiB3ZSBjYW4ndCBwZXJzaXN0IHRoZSBtdXRhdGlvbiwgd2UgcmVqZWN0IHRoZSB1c2VyIGNhbGxiYWNrIGFuZFxuICAgICAgICAvLyBkb24ndCBzZW5kIHRoZSBtdXRhdGlvbi4gVGhlIHVzZXIgY2FuIHRoZW4gcmV0cnkgdGhlIHdyaXRlLlxuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX3dyYXBJblVzZXJFcnJvcklmUmVjb3ZlcmFibGUoZSwgXCJGYWlsZWQgdG8gcGVyc2lzdCB3cml0ZVwiKTtcbiAgICAgICAgbi5yZWplY3QodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEFwcGxpZXMgb25lIHJlbW90ZSBldmVudCB0byB0aGUgc3luYyBlbmdpbmUsIG5vdGlmeWluZyBhbnkgdmlld3Mgb2YgdGhlXG4gKiBjaGFuZ2VzLCBhbmQgcmVsZWFzaW5nIGFueSBwZW5kaW5nIG11dGF0aW9uIGJhdGNoZXMgdGhhdCB3b3VsZCBiZWNvbWVcbiAqIHZpc2libGUgYmVjYXVzZSBvZiB0aGUgc25hcHNob3QgdmVyc2lvbiB0aGUgcmVtb3RlIGV2ZW50IGNvbnRhaW5zLlxuICovIGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lQXBwbHlSZW1vdGVFdmVudChlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZSA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlQXBwbHlSZW1vdGVFdmVudFRvTG9jYWxDYWNoZShuLmxvY2FsU3RvcmUsIHQpO1xuICAgICAgICAvLyBVcGRhdGUgYHJlY2VpdmVkRG9jdW1lbnRgIGFzIGFwcHJvcHJpYXRlIGZvciBhbnkgbGltYm8gdGFyZ2V0cy5cbiAgICAgICAgICAgICAgICB0LnRhcmdldENoYW5nZXMuZm9yRWFjaCgoKGUsIHQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBuLkZhLmdldCh0KTtcbiAgICAgICAgICAgIHIgJiYgKFxuICAgICAgICAgICAgLy8gU2luY2UgdGhpcyBpcyBhIGxpbWJvIHJlc29sdXRpb24gbG9va3VwLCBpdCdzIGZvciBhIHNpbmdsZSBkb2N1bWVudFxuICAgICAgICAgICAgLy8gYW5kIGl0IGNvdWxkIGJlIGFkZGVkLCBtb2RpZmllZCwgb3IgcmVtb3ZlZCwgYnV0IG5vdCBhIGNvbWJpbmF0aW9uLlxuICAgICAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoZS5hZGRlZERvY3VtZW50cy5zaXplICsgZS5tb2RpZmllZERvY3VtZW50cy5zaXplICsgZS5yZW1vdmVkRG9jdW1lbnRzLnNpemUgPD0gMSksIFxuICAgICAgICAgICAgZS5hZGRlZERvY3VtZW50cy5zaXplID4gMCA/IHIud2EgPSAhMCA6IGUubW9kaWZpZWREb2N1bWVudHMuc2l6ZSA+IDAgPyBfX1BSSVZBVEVfaGFyZEFzc2VydChyLndhKSA6IGUucmVtb3ZlZERvY3VtZW50cy5zaXplID4gMCAmJiAoX19QUklWQVRFX2hhcmRBc3NlcnQoci53YSksIFxuICAgICAgICAgICAgci53YSA9ICExKSk7XG4gICAgICAgIH0pKSwgYXdhaXQgX19QUklWQVRFX3N5bmNFbmdpbmVFbWl0TmV3U25hcHNBbmROb3RpZnlMb2NhbFN0b3JlKG4sIGUsIHQpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgYXdhaXQgX19QUklWQVRFX2lnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyhlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQXBwbGllcyBhbiBPbmxpbmVTdGF0ZSBjaGFuZ2UgdG8gdGhlIHN5bmMgZW5naW5lIGFuZCBub3RpZmllcyBhbnkgdmlld3Mgb2ZcbiAqIHRoZSBjaGFuZ2UuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVBcHBseU9ubGluZVN0YXRlQ2hhbmdlKGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAvLyBJZiB3ZSBhcmUgdGhlIHNlY29uZGFyeSBjbGllbnQsIHdlIGV4cGxpY2l0bHkgaWdub3JlIHRoZSByZW1vdGUgc3RvcmUnc1xuICAgIC8vIG9ubGluZSBzdGF0ZSAodGhlIGxvY2FsIGNsaWVudCBtYXkgZ28gb2ZmbGluZSwgZXZlbiB0aG91Z2ggdGhlIHByaW1hcnlcbiAgICAvLyB0YWIgcmVtYWlucyBvbmxpbmUpIGFuZCBvbmx5IGFwcGx5IHRoZSBwcmltYXJ5IHRhYidzIG9ubGluZSBzdGF0ZSBmcm9tXG4gICAgLy8gU2hhcmVkQ2xpZW50U3RhdGUuXG4gICAgICAgIGlmIChyLmlzUHJpbWFyeUNsaWVudCAmJiAwIC8qIE9ubGluZVN0YXRlU291cmNlLlJlbW90ZVN0b3JlICovID09PSBuIHx8ICFyLmlzUHJpbWFyeUNsaWVudCAmJiAxIC8qIE9ubGluZVN0YXRlU291cmNlLlNoYXJlZENsaWVudFN0YXRlICovID09PSBuKSB7XG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgci5iYS5mb3JFYWNoKCgobiwgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IHIudmlldy5qXyh0KTtcbiAgICAgICAgICAgIGkuc25hcHNob3QgJiYgZS5wdXNoKGkuc25hcHNob3QpO1xuICAgICAgICB9KSksIGZ1bmN0aW9uIF9fUFJJVkFURV9ldmVudE1hbmFnZXJPbk9ubGluZVN0YXRlQ2hhbmdlKGUsIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgICAgICAgICAgbi5vbmxpbmVTdGF0ZSA9IHQ7XG4gICAgICAgICAgICBsZXQgciA9ICExO1xuICAgICAgICAgICAgbi5xdWVyaWVzLmZvckVhY2goKChlLCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIG4uVV8pIFxuICAgICAgICAgICAgICAgIC8vIFJ1biBnbG9iYWwgc25hcHNob3QgbGlzdGVuZXJzIGlmIGEgY29uc2lzdGVudCBzbmFwc2hvdCBoYXMgYmVlbiBlbWl0dGVkLlxuICAgICAgICAgICAgICAgIGUual8odCkgJiYgKHIgPSAhMCk7XG4gICAgICAgICAgICB9KSksIHIgJiYgX19QUklWQVRFX3JhaXNlU25hcHNob3RzSW5TeW5jRXZlbnQobik7XG4gICAgICAgIH0oci5ldmVudE1hbmFnZXIsIHQpLCBlLmxlbmd0aCAmJiByLlNhLmhfKGUpLCByLm9ubGluZVN0YXRlID0gdCwgci5pc1ByaW1hcnlDbGllbnQgJiYgci5zaGFyZWRDbGllbnRTdGF0ZS5zZXRPbmxpbmVTdGF0ZSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVqZWN0cyB0aGUgbGlzdGVuIGZvciB0aGUgZ2l2ZW4gdGFyZ2V0SUQuIFRoaXMgY2FuIGJlIHRyaWdnZXJlZCBieSB0aGVcbiAqIGJhY2tlbmQgZm9yIGFueSBhY3RpdmUgdGFyZ2V0LlxuICpcbiAqIEBwYXJhbSBzeW5jRW5naW5lIC0gVGhlIHN5bmMgZW5naW5lIGltcGxlbWVudGF0aW9uLlxuICogQHBhcmFtIHRhcmdldElkIC0gVGhlIHRhcmdldElEIGNvcnJlc3BvbmRzIHRvIG9uZSBwcmV2aW91c2x5IGluaXRpYXRlZCBieSB0aGVcbiAqIHVzZXIgYXMgcGFydCBvZiBUYXJnZXREYXRhIHBhc3NlZCB0byBsaXN0ZW4oKSBvbiBSZW1vdGVTdG9yZS5cbiAqIEBwYXJhbSBlcnIgLSBBIGRlc2NyaXB0aW9uIG9mIHRoZSBjb25kaXRpb24gdGhhdCBoYXMgZm9yY2VkIHRoZSByZWplY3Rpb24uXG4gKiBOZWFybHkgYWx3YXlzIHRoaXMgd2lsbCBiZSBhbiBpbmRpY2F0aW9uIHRoYXQgdGhlIHVzZXIgaXMgbm8gbG9uZ2VyXG4gKiBhdXRob3JpemVkIHRvIHNlZSB0aGUgZGF0YSBtYXRjaGluZyB0aGUgdGFyZ2V0LlxuICovIGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lUmVqZWN0TGlzdGVuKGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxuICAgICAgICByLnNoYXJlZENsaWVudFN0YXRlLnVwZGF0ZVF1ZXJ5U3RhdGUodCwgXCJyZWplY3RlZFwiLCBuKTtcbiAgICBjb25zdCBpID0gci5GYS5nZXQodCksIHMgPSBpICYmIGkua2V5O1xuICAgIGlmIChzKSB7XG4gICAgICAgIC8vIFRPRE8oa2xpbXQpOiBXZSByZWFsbHkgb25seSBzaG91bGQgZG8gdGhlIGZvbGxvd2luZyBvbiBwZXJtaXNzaW9uXG4gICAgICAgIC8vIGRlbmllZCBlcnJvcnMsIGJ1dCB3ZSBkb24ndCBoYXZlIHRoZSBjYXVzZSBjb2RlIGhlcmUuXG4gICAgICAgIC8vIEl0J3MgYSBsaW1ibyBkb2MuIENyZWF0ZSBhIHN5bnRoZXRpYyBldmVudCBzYXlpbmcgaXQgd2FzIGRlbGV0ZWQuXG4gICAgICAgIC8vIFRoaXMgaXMga2luZCBvZiBhIGhhY2suIElkZWFsbHksIHdlIHdvdWxkIGhhdmUgYSBtZXRob2QgaW4gdGhlIGxvY2FsXG4gICAgICAgIC8vIHN0b3JlIHRvIHB1cmdlIGEgZG9jdW1lbnQuIEhvd2V2ZXIsIGl0IHdvdWxkIGJlIHRyaWNreSB0byBrZWVwIGFsbCBvZlxuICAgICAgICAvLyB0aGUgbG9jYWwgc3RvcmUncyBpbnZhcmlhbnRzIHdpdGggYW5vdGhlciBtZXRob2QuXG4gICAgICAgIGxldCBlID0gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcbiAgICAgICAgLy8gVE9ETyhiLzIxNzE4OTIxNik6IFRoaXMgbGltYm8gZG9jdW1lbnQgc2hvdWxkIGlkZWFsbHkgaGF2ZSBhIHJlYWQgdGltZSxcbiAgICAgICAgLy8gc28gdGhhdCBpdCBpcyBwaWNrZWQgdXAgYnkgYW55IHJlYWQtdGltZSBiYXNlZCBzY2Fucy4gVGhlIGJhY2tlbmQsXG4gICAgICAgIC8vIGhvd2V2ZXIsIGRvZXMgbm90IHNlbmQgYSByZWFkIHRpbWUgZm9yIHRhcmdldCByZW1vdmFscy5cbiAgICAgICAgICAgICAgICBlID0gZS5pbnNlcnQocywgTXV0YWJsZURvY3VtZW50Lm5ld05vRG9jdW1lbnQocywgU25hcHNob3RWZXJzaW9uLm1pbigpKSk7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKS5hZGQocyksIGkgPSBuZXcgUmVtb3RlRXZlbnQoU25hcHNob3RWZXJzaW9uLm1pbigpLCBcbiAgICAgICAgLyogdGFyZ2V0Q2hhbmdlcz0gKi8gbmV3IE1hcCwgXG4gICAgICAgIC8qIHRhcmdldE1pc21hdGNoZXM9ICovIG5ldyBTb3J0ZWRNYXAoX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IpLCBlLCBuKTtcbiAgICAgICAgYXdhaXQgX19QUklWQVRFX3N5bmNFbmdpbmVBcHBseVJlbW90ZUV2ZW50KHIsIGkpLCBcbiAgICAgICAgLy8gU2luY2UgdGhpcyBxdWVyeSBmYWlsZWQsIHdlIHdvbid0IHdhbnQgdG8gbWFudWFsbHkgdW5saXN0ZW4gdG8gaXQuXG4gICAgICAgIC8vIFdlIG9ubHkgcmVtb3ZlIGl0IGZyb20gYm9va2tlZXBpbmcgYWZ0ZXIgd2Ugc3VjY2Vzc2Z1bGx5IGFwcGxpZWQgdGhlXG4gICAgICAgIC8vIFJlbW90ZUV2ZW50LiBJZiBgYXBwbHlSZW1vdGVFdmVudCgpYCB0aHJvd3MsIHdlIHdhbnQgdG8gcmUtbGlzdGVuIHRvXG4gICAgICAgIC8vIHRoaXMgcXVlcnkgd2hlbiB0aGUgUmVtb3RlU3RvcmUgcmVzdGFydHMgdGhlIFdhdGNoIHN0cmVhbSwgd2hpY2ggc2hvdWxkXG4gICAgICAgIC8vIHJlLXRyaWdnZXIgdGhlIHRhcmdldCBmYWlsdXJlLlxuICAgICAgICByLnZhID0gci52YS5yZW1vdmUocyksIHIuRmEuZGVsZXRlKHQpLCBfX1BSSVZBVEVfcHVtcEVucXVldWVkTGltYm9SZXNvbHV0aW9ucyhyKTtcbiAgICB9IGVsc2UgYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVSZWxlYXNlVGFyZ2V0KHIubG9jYWxTdG9yZSwgdCwgXG4gICAgLyoga2VlcFBlcnNpc3RlZFRhcmdldERhdGEgKi8gITEpLnRoZW4oKCgpID0+IF9fUFJJVkFURV9yZW1vdmVBbmRDbGVhbnVwVGFyZ2V0KHIsIHQsIG4pKSkuY2F0Y2goX19QUklWQVRFX2lnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lQXBwbHlTdWNjZXNzZnVsV3JpdGUoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCByID0gdC5iYXRjaC5iYXRjaElkO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUFja25vd2xlZGdlQmF0Y2gobi5sb2NhbFN0b3JlLCB0KTtcbiAgICAgICAgLy8gVGhlIGxvY2FsIHN0b3JlIG1heSBvciBtYXkgbm90IGJlIGFibGUgdG8gYXBwbHkgdGhlIHdyaXRlIHJlc3VsdCBhbmRcbiAgICAgICAgLy8gcmFpc2UgZXZlbnRzIGltbWVkaWF0ZWx5IChkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgd2F0Y2hlciBpcyBjYXVnaHRcbiAgICAgICAgLy8gdXApLCBzbyB3ZSByYWlzZSB1c2VyIGNhbGxiYWNrcyBmaXJzdCBzbyB0aGF0IHRoZXkgY29uc2lzdGVudGx5IGhhcHBlblxuICAgICAgICAvLyBiZWZvcmUgbGlzdGVuIGV2ZW50cy5cbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfcHJvY2Vzc1VzZXJDYWxsYmFjayhuLCByLCAvKmVycm9yPSovIG51bGwpLCBfX1BSSVZBVEVfdHJpZ2dlclBlbmRpbmdXcml0ZXNDYWxsYmFja3MobiwgciksIFxuICAgICAgICBuLnNoYXJlZENsaWVudFN0YXRlLnVwZGF0ZU11dGF0aW9uU3RhdGUociwgXCJhY2tub3dsZWRnZWRcIiksIGF3YWl0IF9fUFJJVkFURV9zeW5jRW5naW5lRW1pdE5ld1NuYXBzQW5kTm90aWZ5TG9jYWxTdG9yZShuLCBlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGF3YWl0IF9fUFJJVkFURV9pZ25vcmVJZlByaW1hcnlMZWFzZUxvc3MoZSk7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfc3luY0VuZ2luZVJlamVjdEZhaWxlZFdyaXRlKGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVSZWplY3RCYXRjaChlLCB0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAgICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiUmVqZWN0IGJhdGNoXCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKGUgPT4ge1xuICAgICAgICAgICAgICAgIGxldCByO1xuICAgICAgICAgICAgICAgIHJldHVybiBuLm11dGF0aW9uUXVldWUubG9va3VwTXV0YXRpb25CYXRjaChlLCB0KS5uZXh0KCh0ID0+IChfX1BSSVZBVEVfaGFyZEFzc2VydChudWxsICE9PSB0KSwgXG4gICAgICAgICAgICAgICAgciA9IHQua2V5cygpLCBuLm11dGF0aW9uUXVldWUucmVtb3ZlTXV0YXRpb25CYXRjaChlLCB0KSkpKS5uZXh0KCgoKSA9PiBuLm11dGF0aW9uUXVldWUucGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2soZSkpKS5uZXh0KCgoKSA9PiBuLmRvY3VtZW50T3ZlcmxheUNhY2hlLnJlbW92ZU92ZXJsYXlzRm9yQmF0Y2hJZChlLCByLCB0KSkpLm5leHQoKCgpID0+IG4ubG9jYWxEb2N1bWVudHMucmVjYWxjdWxhdGVBbmRTYXZlT3ZlcmxheXNGb3JEb2N1bWVudEtleXMoZSwgcikpKS5uZXh0KCgoKSA9PiBuLmxvY2FsRG9jdW1lbnRzLmdldERvY3VtZW50cyhlLCByKSkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmV0dXJucyB0aGUgbGFyZ2VzdCAobGF0ZXN0KSBiYXRjaCBpZCBpbiBtdXRhdGlvbiBxdWV1ZSB0aGF0IGlzIHBlbmRpbmdcbiAqIHNlcnZlciByZXNwb25zZS5cbiAqXG4gKiBSZXR1cm5zIGBCQVRDSElEX1VOS05PV05gIGlmIHRoZSBxdWV1ZSBpcyBlbXB0eS5cbiAqLyAoci5sb2NhbFN0b3JlLCB0KTtcbiAgICAgICAgLy8gVGhlIGxvY2FsIHN0b3JlIG1heSBvciBtYXkgbm90IGJlIGFibGUgdG8gYXBwbHkgdGhlIHdyaXRlIHJlc3VsdCBhbmRcbiAgICAgICAgLy8gcmFpc2UgZXZlbnRzIGltbWVkaWF0ZWx5IChkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgd2F0Y2hlciBpcyBjYXVnaHQgdXApLFxuICAgICAgICAvLyBzbyB3ZSByYWlzZSB1c2VyIGNhbGxiYWNrcyBmaXJzdCBzbyB0aGF0IHRoZXkgY29uc2lzdGVudGx5IGhhcHBlbiBiZWZvcmVcbiAgICAgICAgLy8gbGlzdGVuIGV2ZW50cy5cbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfcHJvY2Vzc1VzZXJDYWxsYmFjayhyLCB0LCBuKSwgX19QUklWQVRFX3RyaWdnZXJQZW5kaW5nV3JpdGVzQ2FsbGJhY2tzKHIsIHQpLCBcbiAgICAgICAgci5zaGFyZWRDbGllbnRTdGF0ZS51cGRhdGVNdXRhdGlvblN0YXRlKHQsIFwicmVqZWN0ZWRcIiwgbiksIGF3YWl0IF9fUFJJVkFURV9zeW5jRW5naW5lRW1pdE5ld1NuYXBzQW5kTm90aWZ5TG9jYWxTdG9yZShyLCBlKTtcbiAgICB9IGNhdGNoIChuKSB7XG4gICAgICAgIGF3YWl0IF9fUFJJVkFURV9pZ25vcmVJZlByaW1hcnlMZWFzZUxvc3Mobik7XG4gICAgfVxufVxuXG4vKipcbiAqIFJlZ2lzdGVycyBhIHVzZXIgY2FsbGJhY2sgdGhhdCByZXNvbHZlcyB3aGVuIGFsbCBwZW5kaW5nIG11dGF0aW9ucyBhdCB0aGUgbW9tZW50IG9mIGNhbGxpbmdcbiAqIGFyZSBhY2tub3dsZWRnZWQgLlxuICovIGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lUmVnaXN0ZXJQZW5kaW5nV3JpdGVzQ2FsbGJhY2soZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIF9fUFJJVkFURV9jYW5Vc2VOZXR3b3JrKG4ucmVtb3RlU3RvcmUpIHx8IF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlN5bmNFbmdpbmVcIiwgXCJUaGUgbmV0d29yayBpcyBkaXNhYmxlZC4gVGhlIHRhc2sgcmV0dXJuZWQgYnkgJ2F3YWl0UGVuZGluZ1dyaXRlcygpJyB3aWxsIG5vdCBjb21wbGV0ZSB1bnRpbCB0aGUgbmV0d29yayBpcyBlbmFibGVkLlwiKTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVHZXRIaWdoZXN0VW5hY2tub3dsZWRnZWRCYXRjaElkKGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgICAgICAgICAgcmV0dXJuIHQucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgaGlnaGVzdCB1bmFja25vd2xlZGdlZCBiYXRjaCBpZFwiLCBcInJlYWRvbmx5XCIsIChlID0+IHQubXV0YXRpb25RdWV1ZS5nZXRIaWdoZXN0VW5hY2tub3dsZWRnZWRCYXRjaElkKGUpKSk7XG4gICAgICAgIH0obi5sb2NhbFN0b3JlKTtcbiAgICAgICAgaWYgKC0xID09PSBlKSBcbiAgICAgICAgLy8gVHJpZ2dlciB0aGUgY2FsbGJhY2sgcmlnaHQgYXdheSBpZiB0aGVyZSBpcyBubyBwZW5kaW5nIHdyaXRlcyBhdCB0aGUgbW9tZW50LlxuICAgICAgICByZXR1cm4gdm9pZCB0LnJlc29sdmUoKTtcbiAgICAgICAgY29uc3QgciA9IG4uT2EuZ2V0KGUpIHx8IFtdO1xuICAgICAgICByLnB1c2godCksIG4uT2Euc2V0KGUsIHIpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV93cmFwSW5Vc2VyRXJyb3JJZlJlY292ZXJhYmxlKGUsIFwiSW5pdGlhbGl6YXRpb24gb2Ygd2FpdEZvclBlbmRpbmdXcml0ZXMoKSBvcGVyYXRpb24gZmFpbGVkXCIpO1xuICAgICAgICB0LnJlamVjdChuKTtcbiAgICB9XG59XG5cbi8qKlxuICogVHJpZ2dlcnMgdGhlIGNhbGxiYWNrcyB0aGF0IGFyZSB3YWl0aW5nIGZvciB0aGlzIGJhdGNoIGlkIHRvIGdldCBhY2tub3dsZWRnZWQgYnkgc2VydmVyLFxuICogaWYgdGhlcmUgYXJlIGFueS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdHJpZ2dlclBlbmRpbmdXcml0ZXNDYWxsYmFja3MoZSwgdCkge1xuICAgIChlLk9hLmdldCh0KSB8fCBbXSkuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgIGUucmVzb2x2ZSgpO1xuICAgIH0pKSwgZS5PYS5kZWxldGUodCk7XG59XG5cbi8qKiBSZWplY3QgYWxsIG91dHN0YW5kaW5nIGNhbGxiYWNrcyB3YWl0aW5nIGZvciBwZW5kaW5nIHdyaXRlcyB0byBjb21wbGV0ZS4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3Byb2Nlc3NVc2VyQ2FsbGJhY2soZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIGxldCBpID0gci54YVtyLmN1cnJlbnRVc2VyLnRvS2V5KCldO1xuICAgIC8vIE5PVEU6IE11dGF0aW9ucyByZXN0b3JlZCBmcm9tIHBlcnNpc3RlbmNlIHdvbid0IGhhdmUgY2FsbGJhY2tzLCBzbyBpdCdzXG4gICAgLy8gb2theSBmb3IgdGhlcmUgdG8gYmUgbm8gY2FsbGJhY2sgZm9yIHRoaXMgSUQuXG4gICAgICAgIGlmIChpKSB7XG4gICAgICAgIGNvbnN0IGUgPSBpLmdldCh0KTtcbiAgICAgICAgZSAmJiAobiA/IGUucmVqZWN0KG4pIDogZS5yZXNvbHZlKCksIGkgPSBpLnJlbW92ZSh0KSksIHIueGFbci5jdXJyZW50VXNlci50b0tleSgpXSA9IGk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfcmVtb3ZlQW5kQ2xlYW51cFRhcmdldChlLCB0LCBuID0gbnVsbCkge1xuICAgIGUuc2hhcmVkQ2xpZW50U3RhdGUucmVtb3ZlTG9jYWxRdWVyeVRhcmdldCh0KTtcbiAgICBmb3IgKGNvbnN0IHIgb2YgZS5EYS5nZXQodCkpIGUuYmEuZGVsZXRlKHIpLCBuICYmIGUuU2Eua2Eociwgbik7XG4gICAgaWYgKGUuRGEuZGVsZXRlKHQpLCBlLmlzUHJpbWFyeUNsaWVudCkge1xuICAgICAgICBlLk1hLlZyKHQpLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgZS5NYS5jb250YWluc0tleSh0KSB8fCBcbiAgICAgICAgICAgIC8vIFdlIHJlbW92ZWQgdGhlIGxhc3QgcmVmZXJlbmNlIGZvciB0aGlzIGtleVxuICAgICAgICAgICAgX19QUklWQVRFX3JlbW92ZUxpbWJvVGFyZ2V0KGUsIHQpO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfcmVtb3ZlTGltYm9UYXJnZXQoZSwgdCkge1xuICAgIGUuQ2EuZGVsZXRlKHQucGF0aC5jYW5vbmljYWxTdHJpbmcoKSk7XG4gICAgLy8gSXQncyBwb3NzaWJsZSB0aGF0IHRoZSB0YXJnZXQgYWxyZWFkeSBnb3QgcmVtb3ZlZCBiZWNhdXNlIHRoZSBxdWVyeSBmYWlsZWQuIEluIHRoYXQgY2FzZSxcbiAgICAvLyB0aGUga2V5IHdvbid0IGV4aXN0IGluIGBsaW1ib1RhcmdldHNCeUtleWAuIE9ubHkgZG8gdGhlIGNsZWFudXAgaWYgd2Ugc3RpbGwgaGF2ZSB0aGUgdGFyZ2V0LlxuICAgIGNvbnN0IG4gPSBlLnZhLmdldCh0KTtcbiAgICBudWxsICE9PSBuICYmIChfX1BSSVZBVEVfcmVtb3RlU3RvcmVVbmxpc3RlbihlLnJlbW90ZVN0b3JlLCBuKSwgZS52YSA9IGUudmEucmVtb3ZlKHQpLCBcbiAgICBlLkZhLmRlbGV0ZShuKSwgX19QUklWQVRFX3B1bXBFbnF1ZXVlZExpbWJvUmVzb2x1dGlvbnMoZSkpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdXBkYXRlVHJhY2tlZExpbWJvcyhlLCB0LCBuKSB7XG4gICAgZm9yIChjb25zdCByIG9mIG4pIGlmIChyIGluc3RhbmNlb2YgX19QUklWQVRFX0FkZGVkTGltYm9Eb2N1bWVudCkgZS5NYS5hZGRSZWZlcmVuY2Uoci5rZXksIHQpLCBcbiAgICBfX1BSSVZBVEVfdHJhY2tMaW1ib0NoYW5nZShlLCByKTsgZWxzZSBpZiAociBpbnN0YW5jZW9mIF9fUFJJVkFURV9SZW1vdmVkTGltYm9Eb2N1bWVudCkge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJTeW5jRW5naW5lXCIsIFwiRG9jdW1lbnQgbm8gbG9uZ2VyIGluIGxpbWJvOiBcIiArIHIua2V5KSwgZS5NYS5yZW1vdmVSZWZlcmVuY2Uoci5rZXksIHQpO1xuICAgICAgICBlLk1hLmNvbnRhaW5zS2V5KHIua2V5KSB8fCBcbiAgICAgICAgLy8gV2UgcmVtb3ZlZCB0aGUgbGFzdCByZWZlcmVuY2UgZm9yIHRoaXMga2V5XG4gICAgICAgIF9fUFJJVkFURV9yZW1vdmVMaW1ib1RhcmdldChlLCByLmtleSk7XG4gICAgfSBlbHNlIGZhaWwoKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3RyYWNrTGltYm9DaGFuZ2UoZSwgdCkge1xuICAgIGNvbnN0IG4gPSB0LmtleSwgciA9IG4ucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICBlLnZhLmdldChuKSB8fCBlLkNhLmhhcyhyKSB8fCAoX19QUklWQVRFX2xvZ0RlYnVnKFwiU3luY0VuZ2luZVwiLCBcIk5ldyBkb2N1bWVudCBpbiBsaW1ibzogXCIgKyBuKSwgXG4gICAgZS5DYS5hZGQociksIF9fUFJJVkFURV9wdW1wRW5xdWV1ZWRMaW1ib1Jlc29sdXRpb25zKGUpKTtcbn1cblxuLyoqXG4gKiBTdGFydHMgbGlzdGVucyBmb3IgZG9jdW1lbnRzIGluIGxpbWJvIHRoYXQgYXJlIGVucXVldWVkIGZvciByZXNvbHV0aW9uLFxuICogc3ViamVjdCB0byBhIG1heGltdW0gbnVtYmVyIG9mIGNvbmN1cnJlbnQgcmVzb2x1dGlvbnMuXG4gKlxuICogV2l0aG91dCBib3VuZGluZyB0aGUgbnVtYmVyIG9mIGNvbmN1cnJlbnQgcmVzb2x1dGlvbnMsIHRoZSBzZXJ2ZXIgY2FuIGZhaWxcbiAqIHdpdGggXCJyZXNvdXJjZSBleGhhdXN0ZWRcIiBlcnJvcnMgd2hpY2ggY2FuIGxlYWQgdG8gcGF0aG9sb2dpY2FsIGNsaWVudFxuICogYmVoYXZpb3IgYXMgc2VlbiBpbiBodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtanMtc2RrL2lzc3Vlcy8yNjgzLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9wdW1wRW5xdWV1ZWRMaW1ib1Jlc29sdXRpb25zKGUpIHtcbiAgICBmb3IgKDtlLkNhLnNpemUgPiAwICYmIGUudmEuc2l6ZSA8IGUubWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnM7ICkge1xuICAgICAgICBjb25zdCB0ID0gZS5DYS52YWx1ZXMoKS5uZXh0KCkudmFsdWU7XG4gICAgICAgIGUuQ2EuZGVsZXRlKHQpO1xuICAgICAgICBjb25zdCBuID0gbmV3IERvY3VtZW50S2V5KFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKHQpKSwgciA9IGUuTmEubmV4dCgpO1xuICAgICAgICBlLkZhLnNldChyLCBuZXcgTGltYm9SZXNvbHV0aW9uKG4pKSwgZS52YSA9IGUudmEuaW5zZXJ0KG4sIHIpLCBfX1BSSVZBVEVfcmVtb3RlU3RvcmVMaXN0ZW4oZS5yZW1vdGVTdG9yZSwgbmV3IFRhcmdldERhdGEoX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQoX19QUklWQVRFX25ld1F1ZXJ5Rm9yUGF0aChuLnBhdGgpKSwgciwgXCJUYXJnZXRQdXJwb3NlTGltYm9SZXNvbHV0aW9uXCIgLyogVGFyZ2V0UHVycG9zZS5MaW1ib1Jlc29sdXRpb24gKi8gLCBfX1BSSVZBVEVfTGlzdGVuU2VxdWVuY2Uub2UpKTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lRW1pdE5ld1NuYXBzQW5kTm90aWZ5TG9jYWxTdG9yZShlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIGkgPSBbXSwgcyA9IFtdLCBvID0gW107XG4gICAgci5iYS5pc0VtcHR5KCkgfHwgKHIuYmEuZm9yRWFjaCgoKGUsIF8pID0+IHtcbiAgICAgICAgby5wdXNoKHIuQmEoXywgdCwgbikudGhlbigoZSA9PiB7XG4gICAgICAgICAgICB2YXIgdDtcbiAgICAgICAgICAgIC8vIElmIHRoZXJlIGFyZSBjaGFuZ2VzLCBvciB3ZSBhcmUgaGFuZGxpbmcgYSBnbG9iYWwgc25hcHNob3QsIG5vdGlmeVxuICAgICAgICAgICAgLy8gc2Vjb25kYXJ5IGNsaWVudHMgdG8gdXBkYXRlIHF1ZXJ5IHN0YXRlLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChlIHx8IG4pICYmIHIuaXNQcmltYXJ5Q2xpZW50KSB7XG4gICAgICAgICAgICAgICAgLy8gUXVlcnkgc3RhdGUgaXMgc2V0IHRvIGBjdXJyZW50YCBpZjpcbiAgICAgICAgICAgICAgICAvLyAtIFRoZXJlIGlzIGEgdmlldyBjaGFuZ2UgYW5kIGl0IGlzIHVwLXRvLWRhdGUsIG9yLFxuICAgICAgICAgICAgICAgIC8vIC0gVGhlcmUgaXMgYSBnbG9iYWwgc25hcHNob3QsIHRoZSBUYXJnZXQgaXMgY3VycmVudCwgYW5kIG5vIGNoYW5nZXMgdG8gYmUgcmVzb2x2ZWRcbiAgICAgICAgICAgICAgICBjb25zdCBpID0gZSA/ICFlLmZyb21DYWNoZSA6IG51bGwgPT09ICh0ID0gbnVsbCA9PSBuID8gdm9pZCAwIDogbi50YXJnZXRDaGFuZ2VzLmdldChfLnRhcmdldElkKSkgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5jdXJyZW50O1xuICAgICAgICAgICAgICAgIHIuc2hhcmVkQ2xpZW50U3RhdGUudXBkYXRlUXVlcnlTdGF0ZShfLnRhcmdldElkLCBpID8gXCJjdXJyZW50XCIgOiBcIm5vdC1jdXJyZW50XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVXBkYXRlIHZpZXdzIGlmIHRoZXJlIGFyZSBhY3R1YWwgY2hhbmdlcy5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlKSB7XG4gICAgICAgICAgICAgICAgaS5wdXNoKGUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfTG9jYWxWaWV3Q2hhbmdlcy5LaShfLnRhcmdldElkLCBlKTtcbiAgICAgICAgICAgICAgICBzLnB1c2godCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSk7XG4gICAgfSkpLCBhd2FpdCBQcm9taXNlLmFsbChvKSwgci5TYS5oXyhpKSwgYXdhaXQgYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVOb3RpZnlMb2NhbFZpZXdDaGFuZ2VzKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwibm90aWZ5TG9jYWxWaWV3Q2hhbmdlc1wiLCBcInJlYWR3cml0ZVwiLCAoZSA9PiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaCh0LCAodCA9PiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaCh0LnFpLCAociA9PiBuLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLmFkZFJlZmVyZW5jZShlLCB0LnRhcmdldElkLCByKSkpLm5leHQoKCgpID0+IFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHQuUWksIChyID0+IG4ucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUucmVtb3ZlUmVmZXJlbmNlKGUsIHQudGFyZ2V0SWQsIHIpKSkpKSkpKSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmICghX19QUklWQVRFX2lzSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvcihlKSkgdGhyb3cgZTtcbiAgICAgICAgICAgIC8vIElmIGBub3RpZnlMb2NhbFZpZXdDaGFuZ2VzYCBmYWlscywgd2UgZGlkIG5vdCBhZHZhbmNlIHRoZSBzZXF1ZW5jZVxuICAgICAgICAgICAgLy8gbnVtYmVyIGZvciB0aGUgZG9jdW1lbnRzIHRoYXQgd2VyZSBpbmNsdWRlZCBpbiB0aGlzIHRyYW5zYWN0aW9uLlxuICAgICAgICAgICAgLy8gVGhpcyBtaWdodCB0cmlnZ2VyIHRoZW0gdG8gYmUgZGVsZXRlZCBlYXJsaWVyIHRoYW4gdGhleSBvdGhlcndpc2VcbiAgICAgICAgICAgIC8vIHdvdWxkIGhhdmUsIGJ1dCBpdCBzaG91bGQgbm90IGludmFsaWRhdGUgdGhlIGludGVncml0eSBvZiB0aGUgZGF0YS5cbiAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkxvY2FsU3RvcmVcIiwgXCJGYWlsZWQgdG8gdXBkYXRlIHNlcXVlbmNlIG51bWJlcnM6IFwiICsgZSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLnRhcmdldElkO1xuICAgICAgICAgICAgaWYgKCFlLmZyb21DYWNoZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBuLm5zLmdldCh0KSwgciA9IGUuc25hcHNob3RWZXJzaW9uLCBpID0gZS53aXRoTGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbihyKTtcbiAgICAgICAgICAgICAgICAvLyBBZHZhbmNlIHRoZSBsYXN0IGxpbWJvIGZyZWUgc25hcHNob3QgdmVyc2lvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLm5zID0gbi5ucy5pbnNlcnQodCwgaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KHIubG9jYWxTdG9yZSwgcykpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfc3luY0VuZ2luZUhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIGlmICghbi5jdXJyZW50VXNlci5pc0VxdWFsKHQpKSB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlN5bmNFbmdpbmVcIiwgXCJVc2VyIGNoYW5nZS4gTmV3IHVzZXI6XCIsIHQudG9LZXkoKSk7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUhhbmRsZVVzZXJDaGFuZ2Uobi5sb2NhbFN0b3JlLCB0KTtcbiAgICAgICAgbi5jdXJyZW50VXNlciA9IHQsIFxuICAgICAgICAvLyBGYWlscyB0YXNrcyB3YWl0aW5nIGZvciBwZW5kaW5nIHdyaXRlcyByZXF1ZXN0ZWQgYnkgcHJldmlvdXMgdXNlci5cbiAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX3JlamVjdE91dHN0YW5kaW5nUGVuZGluZ1dyaXRlc0NhbGxiYWNrcyhlLCB0KSB7XG4gICAgICAgICAgICBlLk9hLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgICAgIGUuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGUucmVqZWN0KG5ldyBGaXJlc3RvcmVFcnJvcihDLkNBTkNFTExFRCwgdCkpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pKSwgZS5PYS5jbGVhcigpO1xuICAgICAgICB9KG4sIFwiJ3dhaXRGb3JQZW5kaW5nV3JpdGVzJyBwcm9taXNlIGlzIHJlamVjdGVkIGR1ZSB0byBhIHVzZXIgY2hhbmdlLlwiKSwgXG4gICAgICAgIC8vIFRPRE8oYi8xMTQyMjY0MTcpOiBDb25zaWRlciBjYWxsaW5nIHRoaXMgb25seSBpbiB0aGUgcHJpbWFyeSB0YWIuXG4gICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUuaGFuZGxlVXNlckNoYW5nZSh0LCBlLnJlbW92ZWRCYXRjaElkcywgZS5hZGRlZEJhdGNoSWRzKSwgYXdhaXQgX19QUklWQVRFX3N5bmNFbmdpbmVFbWl0TmV3U25hcHNBbmROb3RpZnlMb2NhbFN0b3JlKG4sIGUudXMpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVHZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgciA9IG4uRmEuZ2V0KHQpO1xuICAgIGlmIChyICYmIHIud2EpIHJldHVybiBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKS5hZGQoci5rZXkpO1xuICAgIHtcbiAgICAgICAgbGV0IGUgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKTtcbiAgICAgICAgY29uc3QgciA9IG4uRGEuZ2V0KHQpO1xuICAgICAgICBpZiAoIXIpIHJldHVybiBlO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2Ygcikge1xuICAgICAgICAgICAgY29uc3QgciA9IG4uYmEuZ2V0KHQpO1xuICAgICAgICAgICAgZSA9IGUudW5pb25XaXRoKHIudmlldy5FYSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxufVxuXG4vKipcbiAqIFJlY29uY2lsZSB0aGUgbGlzdCBvZiBzeW5jZWQgZG9jdW1lbnRzIGluIGFuIGV4aXN0aW5nIHZpZXcgd2l0aCB0aG9zZVxuICogZnJvbSBwZXJzaXN0ZW5jZS5cbiAqLyBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfc3luY2hyb25pemVWaWV3QW5kQ29tcHV0ZVNuYXBzaG90KGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgciA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlRXhlY3V0ZVF1ZXJ5KG4ubG9jYWxTdG9yZSwgdC5xdWVyeSwgXG4gICAgLyogdXNlUHJldmlvdXNSZXN1bHRzPSAqLyAhMCksIGkgPSB0LnZpZXcucGEocik7XG4gICAgcmV0dXJuIG4uaXNQcmltYXJ5Q2xpZW50ICYmIF9fUFJJVkFURV91cGRhdGVUcmFja2VkTGltYm9zKG4sIHQudGFyZ2V0SWQsIGkuZmEpLCBcbiAgICBpO1xufVxuXG4vKipcbiAqIFJldHJpZXZlcyBuZXdseSBjaGFuZ2VkIGRvY3VtZW50cyBmcm9tIHJlbW90ZSBkb2N1bWVudCBjYWNoZSBhbmQgcmFpc2VzXG4gKiBzbmFwc2hvdHMgaWYgbmVlZGVkLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVTeW5jaHJvbml6ZVdpdGhDaGFuZ2VkRG9jdW1lbnRzKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICByZXR1cm4gX19QUklWQVRFX2xvY2FsU3RvcmVHZXROZXdEb2N1bWVudENoYW5nZXMobi5sb2NhbFN0b3JlLCB0KS50aGVuKChlID0+IF9fUFJJVkFURV9zeW5jRW5naW5lRW1pdE5ld1NuYXBzQW5kTm90aWZ5TG9jYWxTdG9yZShuLCBlKSkpO1xufVxuXG4vKiogQXBwbGllcyBhIG11dGF0aW9uIHN0YXRlIHRvIGFuIGV4aXN0aW5nIGJhdGNoLiAgKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfc3luY0VuZ2luZUFwcGx5QmF0Y2hTdGF0ZShlLCB0LCBuLCByKSB7XG4gICAgY29uc3QgaSA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIHMgPSBhd2FpdCBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUxvb2t1cE11dGF0aW9uRG9jdW1lbnRzKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIHIgPSBfX1BSSVZBVEVfZGVidWdDYXN0KG4ubXV0YXRpb25RdWV1ZSk7XG4gICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiTG9va3VwIG11dGF0aW9uIGRvY3VtZW50c1wiLCBcInJlYWRvbmx5XCIsIChlID0+IHIudm4oZSwgdCkubmV4dCgodCA9PiB0ID8gbi5sb2NhbERvY3VtZW50cy5nZXREb2N1bWVudHMoZSwgdCkgOiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShudWxsKSkpKSk7XG4gICAgfVxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG4gICAgKGkubG9jYWxTdG9yZSwgdCk7XG4gICAgbnVsbCAhPT0gcyA/IChcInBlbmRpbmdcIiA9PT0gbiA/IFxuICAgIC8vIElmIHdlIGFyZSB0aGUgcHJpbWFyeSBjbGllbnQsIHdlIG5lZWQgdG8gc2VuZCB0aGlzIHdyaXRlIHRvIHRoZVxuICAgIC8vIGJhY2tlbmQuIFNlY29uZGFyeSBjbGllbnRzIHdpbGwgaWdub3JlIHRoZXNlIHdyaXRlcyBzaW5jZSB0aGVpciByZW1vdGVcbiAgICAvLyBjb25uZWN0aW9uIGlzIGRpc2FibGVkLlxuICAgIGF3YWl0IF9fUFJJVkFURV9maWxsV3JpdGVQaXBlbGluZShpLnJlbW90ZVN0b3JlKSA6IFwiYWNrbm93bGVkZ2VkXCIgPT09IG4gfHwgXCJyZWplY3RlZFwiID09PSBuID8gKFxuICAgIC8vIE5PVEU6IEJvdGggdGhlc2UgbWV0aG9kcyBhcmUgbm8tb3BzIGZvciBiYXRjaGVzIHRoYXQgb3JpZ2luYXRlZCBmcm9tXG4gICAgLy8gb3RoZXIgY2xpZW50cy5cbiAgICBfX1BSSVZBVEVfcHJvY2Vzc1VzZXJDYWxsYmFjayhpLCB0LCByIHx8IG51bGwpLCBfX1BSSVZBVEVfdHJpZ2dlclBlbmRpbmdXcml0ZXNDYWxsYmFja3MoaSwgdCksIFxuICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlUmVtb3ZlQ2FjaGVkTXV0YXRpb25CYXRjaE1ldGFkYXRhKGUsIHQpIHtcbiAgICAgICAgX19QUklWQVRFX2RlYnVnQ2FzdChfX1BSSVZBVEVfZGVidWdDYXN0KGUpLm11dGF0aW9uUXVldWUpLk1uKHQpO1xuICAgIH1cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuICAgIChpLmxvY2FsU3RvcmUsIHQpKSA6IGZhaWwoKSwgYXdhaXQgX19QUklWQVRFX3N5bmNFbmdpbmVFbWl0TmV3U25hcHNBbmROb3RpZnlMb2NhbFN0b3JlKGksIHMpKSA6IFxuICAgIC8vIEEgdGhyb3R0bGVkIHRhYiBtYXkgbm90IGhhdmUgc2VlbiB0aGUgbXV0YXRpb24gYmVmb3JlIGl0IHdhcyBjb21wbGV0ZWRcbiAgICAvLyBhbmQgcmVtb3ZlZCBmcm9tIHRoZSBtdXRhdGlvbiBxdWV1ZSwgaW4gd2hpY2ggY2FzZSB3ZSB3b24ndCBoYXZlIGNhY2hlZFxuICAgIC8vIHRoZSBhZmZlY3RlZCBkb2N1bWVudHMuIEluIHRoaXMgY2FzZSB3ZSBjYW4gc2FmZWx5IGlnbm9yZSB0aGUgdXBkYXRlXG4gICAgLy8gc2luY2UgdGhhdCBtZWFucyB3ZSBkaWRuJ3QgYXBwbHkgdGhlIG11dGF0aW9uIGxvY2FsbHkgYXQgYWxsIChpZiB3ZVxuICAgIC8vIGhhZCwgd2Ugd291bGQgaGF2ZSBjYWNoZWQgdGhlIGFmZmVjdGVkIGRvY3VtZW50cyksIGFuZCBzbyB3ZSB3aWxsIGp1c3RcbiAgICAvLyBzZWUgYW55IHJlc3VsdGluZyBkb2N1bWVudCBjaGFuZ2VzIHZpYSBub3JtYWwgcmVtb3RlIGRvY3VtZW50IHVwZGF0ZXNcbiAgICAvLyBhcyBhcHBsaWNhYmxlLlxuICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlN5bmNFbmdpbmVcIiwgXCJDYW5ub3QgYXBwbHkgbXV0YXRpb24gYmF0Y2ggd2l0aCBpZDogXCIgKyB0KTtcbn1cblxuLyoqIEFwcGxpZXMgYSBxdWVyeSB0YXJnZXQgY2hhbmdlIGZyb20gYSBkaWZmZXJlbnQgdGFiLiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lQXBwbHlQcmltYXJ5U3RhdGUoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIGlmIChfX1BSSVZBVEVfZW5zdXJlV2F0Y2hDYWxsYmFja3MobiksIF9fUFJJVkFURV9zeW5jRW5naW5lRW5zdXJlV3JpdGVDYWxsYmFja3MobiksIFxuICAgICEwID09PSB0ICYmICEwICE9PSBuLkxhKSB7XG4gICAgICAgIC8vIFNlY29uZGFyeSB0YWJzIG9ubHkgbWFpbnRhaW4gVmlld3MgZm9yIHRoZWlyIGxvY2FsIGxpc3RlbmVycyBhbmQgdGhlXG4gICAgICAgIC8vIFZpZXdzIGludGVybmFsIHN0YXRlIG1heSBub3QgYmUgMTAwJSBwb3B1bGF0ZWQgKGluIHBhcnRpY3VsYXJcbiAgICAgICAgLy8gc2Vjb25kYXJ5IHRhYnMgZG9uJ3QgdHJhY2sgc3luY2VkRG9jdW1lbnRzLCB0aGUgc2V0IG9mIGRvY3VtZW50cyB0aGVcbiAgICAgICAgLy8gc2VydmVyIGNvbnNpZGVycyB0byBiZSBpbiB0aGUgdGFyZ2V0KS4gU28gd2hlbiBhIHNlY29uZGFyeSBiZWNvbWVzXG4gICAgICAgIC8vIHByaW1hcnksIHdlIG5lZWQgdG8gbmVlZCB0byBtYWtlIHN1cmUgdGhhdCBhbGwgdmlld3MgZm9yIGFsbCB0YXJnZXRzXG4gICAgICAgIC8vIG1hdGNoIHRoZSBzdGF0ZSBvbiBkaXNrLlxuICAgICAgICBjb25zdCBlID0gbi5zaGFyZWRDbGllbnRTdGF0ZS5nZXRBbGxBY3RpdmVRdWVyeVRhcmdldHMoKSwgdCA9IGF3YWl0IF9fUFJJVkFURV9zeW5jaHJvbml6ZVF1ZXJ5Vmlld3NBbmRSYWlzZVNuYXBzaG90cyhuLCBlLnRvQXJyYXkoKSk7XG4gICAgICAgIG4uTGEgPSAhMCwgYXdhaXQgX19QUklWQVRFX3JlbW90ZVN0b3JlQXBwbHlQcmltYXJ5U3RhdGUobi5yZW1vdGVTdG9yZSwgITApO1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdCkgX19QUklWQVRFX3JlbW90ZVN0b3JlTGlzdGVuKG4ucmVtb3RlU3RvcmUsIGUpO1xuICAgIH0gZWxzZSBpZiAoITEgPT09IHQgJiYgITEgIT09IG4uTGEpIHtcbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICBsZXQgdCA9IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICBuLkRhLmZvckVhY2goKChyLCBpKSA9PiB7XG4gICAgICAgICAgICBuLnNoYXJlZENsaWVudFN0YXRlLmlzTG9jYWxRdWVyeVRhcmdldChpKSA/IGUucHVzaChpKSA6IHQgPSB0LnRoZW4oKCgpID0+IChfX1BSSVZBVEVfcmVtb3ZlQW5kQ2xlYW51cFRhcmdldChuLCBpKSwgXG4gICAgICAgICAgICBfX1BSSVZBVEVfbG9jYWxTdG9yZVJlbGVhc2VUYXJnZXQobi5sb2NhbFN0b3JlLCBpLCBcbiAgICAgICAgICAgIC8qa2VlcFBlcnNpc3RlZFRhcmdldERhdGE9Ki8gITApKSkpLCBfX1BSSVZBVEVfcmVtb3RlU3RvcmVVbmxpc3RlbihuLnJlbW90ZVN0b3JlLCBpKTtcbiAgICAgICAgfSkpLCBhd2FpdCB0LCBhd2FpdCBfX1BSSVZBVEVfc3luY2hyb25pemVRdWVyeVZpZXdzQW5kUmFpc2VTbmFwc2hvdHMobiwgZSksIFxuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfcmVzZXRMaW1ib0RvY3VtZW50cyhlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAgICAgICAgIHQuRmEuZm9yRWFjaCgoKGUsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfcmVtb3RlU3RvcmVVbmxpc3Rlbih0LnJlbW90ZVN0b3JlLCBuKTtcbiAgICAgICAgICAgIH0pKSwgdC5NYS5tcigpLCB0LkZhID0gbmV3IE1hcCwgdC52YSA9IG5ldyBTb3J0ZWRNYXAoRG9jdW1lbnRLZXkuY29tcGFyYXRvcik7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBSZWNvbmNpbGUgdGhlIHF1ZXJ5IHZpZXdzIG9mIHRoZSBwcm92aWRlZCBxdWVyeSB0YXJnZXRzIHdpdGggdGhlIHN0YXRlIGZyb21cbiAqIHBlcnNpc3RlbmNlLiBSYWlzZXMgc25hcHNob3RzIGZvciBhbnkgY2hhbmdlcyB0aGF0IGFmZmVjdCB0aGUgbG9jYWxcbiAqIGNsaWVudCBhbmQgcmV0dXJucyB0aGUgdXBkYXRlZCBzdGF0ZSBvZiBhbGwgdGFyZ2V0J3MgcXVlcnkgZGF0YS5cbiAqXG4gKiBAcGFyYW0gc3luY0VuZ2luZSAtIFRoZSBzeW5jIGVuZ2luZSBpbXBsZW1lbnRhdGlvblxuICogQHBhcmFtIHRhcmdldHMgLSB0aGUgbGlzdCBvZiB0YXJnZXRzIHdpdGggdmlld3MgdGhhdCBuZWVkIHRvIGJlIHJlY29tcHV0ZWRcbiAqIEBwYXJhbSB0cmFuc2l0aW9uVG9QcmltYXJ5IC0gYHRydWVgIGlmZiB0aGUgdGFiIHRyYW5zaXRpb25zIGZyb20gYSBzZWNvbmRhcnlcbiAqIHRhYiB0byBhIHByaW1hcnkgdGFiXG4gKi9cbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbiAgICAgICAgKG4pLCBuLkxhID0gITEsIGF3YWl0IF9fUFJJVkFURV9yZW1vdGVTdG9yZUFwcGx5UHJpbWFyeVN0YXRlKG4ucmVtb3RlU3RvcmUsICExKTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jaHJvbml6ZVF1ZXJ5Vmlld3NBbmRSYWlzZVNuYXBzaG90cyhlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIGkgPSBbXSwgcyA9IFtdO1xuICAgIGZvciAoY29uc3QgZSBvZiB0KSB7XG4gICAgICAgIGxldCB0O1xuICAgICAgICBjb25zdCBuID0gci5EYS5nZXQoZSk7XG4gICAgICAgIGlmIChuICYmIDAgIT09IG4ubGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBGb3IgcXVlcmllcyB0aGF0IGhhdmUgYSBsb2NhbCBWaWV3LCB3ZSBmZXRjaCB0aGVpciBjdXJyZW50IHN0YXRlXG4gICAgICAgICAgICAvLyBmcm9tIExvY2FsU3RvcmUgKGFzIHRoZSByZXN1bWUgdG9rZW4gYW5kIHRoZSBzbmFwc2hvdCB2ZXJzaW9uXG4gICAgICAgICAgICAvLyBtaWdodCBoYXZlIGNoYW5nZWQpIGFuZCByZWNvbmNpbGUgdGhlaXIgdmlld3Mgd2l0aCB0aGUgcGVyc2lzdGVkXG4gICAgICAgICAgICAvLyBzdGF0ZSAodGhlIGxpc3Qgb2Ygc3luY2VkRG9jdW1lbnRzIG1heSBoYXZlIGdvdHRlbiBvdXQgb2Ygc3luYykuXG4gICAgICAgICAgICB0ID0gYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVBbGxvY2F0ZVRhcmdldChyLmxvY2FsU3RvcmUsIF9fUFJJVkFURV9xdWVyeVRvVGFyZ2V0KG5bMF0pKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiBuKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IHIuYmEuZ2V0KGUpLCBuID0gYXdhaXQgX19QUklWQVRFX3N5bmNocm9uaXplVmlld0FuZENvbXB1dGVTbmFwc2hvdChyLCB0KTtcbiAgICAgICAgICAgICAgICBuLnNuYXBzaG90ICYmIHMucHVzaChuLnNuYXBzaG90KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEZvciBxdWVyaWVzIHRoYXQgbmV2ZXIgZXhlY3V0ZWQgb24gdGhpcyBjbGllbnQsIHdlIG5lZWQgdG9cbiAgICAgICAgICAgIC8vIGFsbG9jYXRlIHRoZSB0YXJnZXQgaW4gTG9jYWxTdG9yZSBhbmQgaW5pdGlhbGl6ZSBhIG5ldyBWaWV3LlxuICAgICAgICAgICAgY29uc3QgbiA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlR2V0Q2FjaGVkVGFyZ2V0KHIubG9jYWxTdG9yZSwgZSk7XG4gICAgICAgICAgICB0ID0gYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVBbGxvY2F0ZVRhcmdldChyLmxvY2FsU3RvcmUsIG4pLCBhd2FpdCBfX1BSSVZBVEVfaW5pdGlhbGl6ZVZpZXdBbmRDb21wdXRlU25hcHNob3QociwgX19QUklWQVRFX3N5bnRoZXNpemVUYXJnZXRUb1F1ZXJ5KG4pLCBlLCBcbiAgICAgICAgICAgIC8qY3VycmVudD0qLyAhMSwgdC5yZXN1bWVUb2tlbik7XG4gICAgICAgIH1cbiAgICAgICAgaS5wdXNoKHQpO1xuICAgIH1cbiAgICByZXR1cm4gci5TYS5oXyhzKSwgaTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgYFF1ZXJ5YCBvYmplY3QgZnJvbSB0aGUgc3BlY2lmaWVkIGBUYXJnZXRgLiBUaGVyZSBpcyBubyB3YXkgdG9cbiAqIG9idGFpbiB0aGUgb3JpZ2luYWwgYFF1ZXJ5YCwgc28gd2Ugc3ludGhlc2l6ZSBhIGBRdWVyeWAgZnJvbSB0aGUgYFRhcmdldGBcbiAqIG9iamVjdC5cbiAqXG4gKiBUaGUgc3ludGhlc2l6ZWQgcmVzdWx0IG1pZ2h0IGJlIGRpZmZlcmVudCBmcm9tIHRoZSBvcmlnaW5hbCBgUXVlcnlgLCBidXRcbiAqIHNpbmNlIHRoZSBzeW50aGVzaXplZCBgUXVlcnlgIHNob3VsZCByZXR1cm4gdGhlIHNhbWUgcmVzdWx0cyBhcyB0aGVcbiAqIG9yaWdpbmFsIG9uZSAob25seSB0aGUgcHJlc2VudGF0aW9uIG9mIHJlc3VsdHMgbWlnaHQgZGlmZmVyKSwgdGhlIHBvdGVudGlhbFxuICogZGlmZmVyZW5jZSB3aWxsIG5vdCBjYXVzZSBpc3N1ZXMuXG4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5mdW5jdGlvbiBfX1BSSVZBVEVfc3ludGhlc2l6ZVRhcmdldFRvUXVlcnkoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfbmV3UXVlcnkoZS5wYXRoLCBlLmNvbGxlY3Rpb25Hcm91cCwgZS5vcmRlckJ5LCBlLmZpbHRlcnMsIGUubGltaXQsIFwiRlwiIC8qIExpbWl0VHlwZS5GaXJzdCAqLyAsIGUuc3RhcnRBdCwgZS5lbmRBdCk7XG59XG5cbi8qKiBSZXR1cm5zIHRoZSBJRHMgb2YgdGhlIGNsaWVudHMgdGhhdCBhcmUgY3VycmVudGx5IGFjdGl2ZS4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5mdW5jdGlvbiBfX1BSSVZBVEVfc3luY0VuZ2luZUdldEFjdGl2ZUNsaWVudHMoZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUdldEFjdGl2ZUNsaWVudHMoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2RlYnVnQ2FzdChfX1BSSVZBVEVfZGVidWdDYXN0KGUpLnBlcnNpc3RlbmNlKS5CaSgpO1xuICAgIH0oX19QUklWQVRFX2RlYnVnQ2FzdChlKS5sb2NhbFN0b3JlKTtcbn1cblxuLyoqIEFwcGxpZXMgYSBxdWVyeSB0YXJnZXQgY2hhbmdlIGZyb20gYSBkaWZmZXJlbnQgdGFiLiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lQXBwbHlUYXJnZXRTdGF0ZShlLCB0LCBuLCByKSB7XG4gICAgY29uc3QgaSA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgaWYgKGkuTGEpIFxuICAgIC8vIElmIHdlIHJlY2VpdmUgYSB0YXJnZXQgc3RhdGUgbm90aWZpY2F0aW9uIHZpYSBXZWJTdG9yYWdlLCB3ZSBhcmVcbiAgICAvLyBlaXRoZXIgYWxyZWFkeSBzZWNvbmRhcnkgb3IgYW5vdGhlciB0YWIgaGFzIHRha2VuIHRoZSBwcmltYXJ5IGxlYXNlLlxuICAgIHJldHVybiB2b2lkIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlN5bmNFbmdpbmVcIiwgXCJJZ25vcmluZyB1bmV4cGVjdGVkIHF1ZXJ5IHN0YXRlIG5vdGlmaWNhdGlvbi5cIik7XG4gICAgY29uc3QgcyA9IGkuRGEuZ2V0KHQpO1xuICAgIGlmIChzICYmIHMubGVuZ3RoID4gMCkgc3dpdGNoIChuKSB7XG4gICAgICBjYXNlIFwiY3VycmVudFwiOlxuICAgICAgY2FzZSBcIm5vdC1jdXJyZW50XCI6XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUdldE5ld0RvY3VtZW50Q2hhbmdlcyhpLmxvY2FsU3RvcmUsIF9fUFJJVkFURV9xdWVyeUNvbGxlY3Rpb25Hcm91cChzWzBdKSksIHIgPSBSZW1vdGVFdmVudC5jcmVhdGVTeW50aGVzaXplZFJlbW90ZUV2ZW50Rm9yQ3VycmVudENoYW5nZSh0LCBcImN1cnJlbnRcIiA9PT0gbiwgQnl0ZVN0cmluZy5FTVBUWV9CWVRFX1NUUklORyk7XG4gICAgICAgICAgICBhd2FpdCBfX1BSSVZBVEVfc3luY0VuZ2luZUVtaXROZXdTbmFwc0FuZE5vdGlmeUxvY2FsU3RvcmUoaSwgZSwgcik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICBjYXNlIFwicmVqZWN0ZWRcIjpcbiAgICAgICAgYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVSZWxlYXNlVGFyZ2V0KGkubG9jYWxTdG9yZSwgdCwgXG4gICAgICAgIC8qIGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhICovICEwKSwgX19QUklWQVRFX3JlbW92ZUFuZENsZWFudXBUYXJnZXQoaSwgdCwgcik7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBmYWlsKCk7XG4gICAgfVxufVxuXG4vKiogQWRkcyBvciByZW1vdmVzIFdhdGNoIHRhcmdldHMgZm9yIHF1ZXJpZXMgZnJvbSBkaWZmZXJlbnQgdGFicy4gKi8gYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVBcHBseUFjdGl2ZVRhcmdldHNDaGFuZ2UoZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZW5zdXJlV2F0Y2hDYWxsYmFja3MoZSk7XG4gICAgaWYgKHIuTGEpIHtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHQpIHtcbiAgICAgICAgICAgIGlmIChyLkRhLmhhcyhlKSAmJiByLnNoYXJlZENsaWVudFN0YXRlLmlzQWN0aXZlUXVlcnlUYXJnZXQoZSkpIHtcbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJTeW5jRW5naW5lXCIsIFwiQWRkaW5nIGFuIGFscmVhZHkgYWN0aXZlIHRhcmdldCBcIiArIGUpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdCA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlR2V0Q2FjaGVkVGFyZ2V0KHIubG9jYWxTdG9yZSwgZSksIG4gPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUFsbG9jYXRlVGFyZ2V0KHIubG9jYWxTdG9yZSwgdCk7XG4gICAgICAgICAgICBhd2FpdCBfX1BSSVZBVEVfaW5pdGlhbGl6ZVZpZXdBbmRDb21wdXRlU25hcHNob3QociwgX19QUklWQVRFX3N5bnRoZXNpemVUYXJnZXRUb1F1ZXJ5KHQpLCBuLnRhcmdldElkLCBcbiAgICAgICAgICAgIC8qY3VycmVudD0qLyAhMSwgbi5yZXN1bWVUb2tlbiksIF9fUFJJVkFURV9yZW1vdGVTdG9yZUxpc3RlbihyLnJlbW90ZVN0b3JlLCBuKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgbikgXG4gICAgICAgIC8vIENoZWNrIHRoYXQgdGhlIHRhcmdldCBpcyBzdGlsbCBhY3RpdmUgc2luY2UgdGhlIHRhcmdldCBtaWdodCBoYXZlIGJlZW5cbiAgICAgICAgLy8gcmVtb3ZlZCBpZiBpdCBoYXMgYmVlbiByZWplY3RlZCBieSB0aGUgYmFja2VuZC5cbiAgICAgICAgci5EYS5oYXMoZSkgJiYgXG4gICAgICAgIC8vIFJlbGVhc2UgcXVlcmllcyB0aGF0IGFyZSBzdGlsbCBhY3RpdmUuXG4gICAgICAgIGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlUmVsZWFzZVRhcmdldChyLmxvY2FsU3RvcmUsIGUsIFxuICAgICAgICAvKiBrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YSAqLyAhMSkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgX19QUklWQVRFX3JlbW90ZVN0b3JlVW5saXN0ZW4oci5yZW1vdGVTdG9yZSwgZSksIF9fUFJJVkFURV9yZW1vdmVBbmRDbGVhbnVwVGFyZ2V0KHIsIGUpO1xuICAgICAgICB9KSkuY2F0Y2goX19QUklWQVRFX2lnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZW5zdXJlV2F0Y2hDYWxsYmFja3MoZSkge1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIHJldHVybiB0LnJlbW90ZVN0b3JlLnJlbW90ZVN5bmNlci5hcHBseVJlbW90ZUV2ZW50ID0gX19QUklWQVRFX3N5bmNFbmdpbmVBcHBseVJlbW90ZUV2ZW50LmJpbmQobnVsbCwgdCksIFxuICAgIHQucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLmdldFJlbW90ZUtleXNGb3JUYXJnZXQgPSBfX1BSSVZBVEVfc3luY0VuZ2luZUdldFJlbW90ZUtleXNGb3JUYXJnZXQuYmluZChudWxsLCB0KSwgXG4gICAgdC5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIucmVqZWN0TGlzdGVuID0gX19QUklWQVRFX3N5bmNFbmdpbmVSZWplY3RMaXN0ZW4uYmluZChudWxsLCB0KSwgXG4gICAgdC5TYS5oXyA9IF9fUFJJVkFURV9ldmVudE1hbmFnZXJPbldhdGNoQ2hhbmdlLmJpbmQobnVsbCwgdC5ldmVudE1hbmFnZXIpLCB0LlNhLmthID0gX19QUklWQVRFX2V2ZW50TWFuYWdlck9uV2F0Y2hFcnJvci5iaW5kKG51bGwsIHQuZXZlbnRNYW5hZ2VyKSwgXG4gICAgdDtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVFbnN1cmVXcml0ZUNhbGxiYWNrcyhlKSB7XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgcmV0dXJuIHQucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLmFwcGx5U3VjY2Vzc2Z1bFdyaXRlID0gX19QUklWQVRFX3N5bmNFbmdpbmVBcHBseVN1Y2Nlc3NmdWxXcml0ZS5iaW5kKG51bGwsIHQpLCBcbiAgICB0LnJlbW90ZVN0b3JlLnJlbW90ZVN5bmNlci5yZWplY3RGYWlsZWRXcml0ZSA9IF9fUFJJVkFURV9zeW5jRW5naW5lUmVqZWN0RmFpbGVkV3JpdGUuYmluZChudWxsLCB0KSwgXG4gICAgdDtcbn1cblxuLyoqXG4gKiBMb2FkcyBhIEZpcmVzdG9yZSBidW5kbGUgaW50byB0aGUgU0RLLiBUaGUgcmV0dXJuZWQgcHJvbWlzZSByZXNvbHZlcyB3aGVuXG4gKiB0aGUgYnVuZGxlIGZpbmlzaGVkIGxvYWRpbmcuXG4gKlxuICogQHBhcmFtIHN5bmNFbmdpbmUgLSBTeW5jRW5naW5lIHRvIHVzZS5cbiAqIEBwYXJhbSBidW5kbGVSZWFkZXIgLSBCdW5kbGUgdG8gbG9hZCBpbnRvIHRoZSBTREsuXG4gKiBAcGFyYW0gdGFzayAtIExvYWRCdW5kbGVUYXNrIHVzZWQgdG8gdXBkYXRlIHRoZSBsb2FkaW5nIHByb2dyZXNzIHRvIHB1YmxpYyBBUEkuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVMb2FkQnVuZGxlKGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICAgIChcbiAgICAvKiogTG9hZHMgYSBidW5kbGUgYW5kIHJldHVybnMgdGhlIGxpc3Qgb2YgYWZmZWN0ZWQgY29sbGVjdGlvbiBncm91cHMuICovXG4gICAgYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2xvYWRCdW5kbGVJbXBsKGUsIHQsIG4pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBhd2FpdCB0LmdldE1ldGFkYXRhKCk7XG4gICAgICAgICAgICBpZiAoYXdhaXQgZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVIYXNOZXdlckJ1bmRsZShlLCB0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIHIgPSBfX1BSSVZBVEVfZnJvbVZlcnNpb24odC5jcmVhdGVUaW1lKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcImhhc05ld2VyQnVuZGxlXCIsIFwicmVhZG9ubHlcIiwgKGUgPT4gbi4kci5nZXRCdW5kbGVNZXRhZGF0YShlLCB0LmlkKSkpLnRoZW4oKGUgPT4gISFlICYmIGUuY3JlYXRlVGltZS5jb21wYXJlVG8ocikgPj0gMCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBTYXZlcyB0aGUgZ2l2ZW4gYEJ1bmRsZU1ldGFkYXRhYCB0byBsb2NhbCBwZXJzaXN0ZW5jZS5cbiAqLyAoZS5sb2NhbFN0b3JlLCByKSkgcmV0dXJuIGF3YWl0IHQuY2xvc2UoKSwgbi5fY29tcGxldGVXaXRoKGZ1bmN0aW9uIF9fUFJJVkFURV9idW5kbGVTdWNjZXNzUHJvZ3Jlc3MoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tTdGF0ZTogXCJTdWNjZXNzXCIsXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50c0xvYWRlZDogZS50b3RhbERvY3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgYnl0ZXNMb2FkZWQ6IGUudG90YWxCeXRlcyxcbiAgICAgICAgICAgICAgICAgICAgdG90YWxEb2N1bWVudHM6IGUudG90YWxEb2N1bWVudHMsXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXM6IGUudG90YWxCeXRlc1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KHIpKSwgUHJvbWlzZS5yZXNvbHZlKG5ldyBTZXQpO1xuICAgICAgICAgICAgbi5fdXBkYXRlUHJvZ3Jlc3MoX19QUklWQVRFX2J1bmRsZUluaXRpYWxQcm9ncmVzcyhyKSk7XG4gICAgICAgICAgICBjb25zdCBpID0gbmV3IF9fUFJJVkFURV9CdW5kbGVMb2FkZXIociwgZS5sb2NhbFN0b3JlLCB0LnNlcmlhbGl6ZXIpO1xuICAgICAgICAgICAgbGV0IHMgPSBhd2FpdCB0LnFhKCk7XG4gICAgICAgICAgICBmb3IgKDtzOyApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gYXdhaXQgaS5fYShzKTtcbiAgICAgICAgICAgICAgICBlICYmIG4uX3VwZGF0ZVByb2dyZXNzKGUpLCBzID0gYXdhaXQgdC5xYSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbyA9IGF3YWl0IGkuY29tcGxldGUoKTtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBfX1BSSVZBVEVfc3luY0VuZ2luZUVtaXROZXdTbmFwc0FuZE5vdGlmeUxvY2FsU3RvcmUoZSwgby5jYSwgXG4gICAgICAgICAgICAvKiByZW1vdGVFdmVudCAqLyB2b2lkIDApLCBcbiAgICAgICAgICAgIC8vIFNhdmUgbWV0YWRhdGEsIHNvIGxvYWRpbmcgdGhlIHNhbWUgYnVuZGxlIHdpbGwgc2tpcC5cbiAgICAgICAgICAgIGF3YWl0IGZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlU2F2ZUJ1bmRsZShlLCB0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJTYXZlIGJ1bmRsZVwiLCBcInJlYWR3cml0ZVwiLCAoZSA9PiBuLiRyLnNhdmVCdW5kbGVNZXRhZGF0YShlLCB0KSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBSZXR1cm5zIGEgcHJvbWlzZSBvZiBhIGBOYW1lZFF1ZXJ5YCBhc3NvY2lhdGVkIHdpdGggZ2l2ZW4gcXVlcnkgbmFtZS4gUHJvbWlzZVxuICogcmVzb2x2ZXMgdG8gdW5kZWZpbmVkIGlmIG5vIHBlcnNpc3RlZCBkYXRhIGNhbiBiZSBmb3VuZC5cbiAqLyAoZS5sb2NhbFN0b3JlLCByKSwgbi5fY29tcGxldGVXaXRoKG8ucHJvZ3Jlc3MpLCBQcm9taXNlLnJlc29sdmUoby51YSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfbG9nV2FybihcIlN5bmNFbmdpbmVcIiwgYExvYWRpbmcgYnVuZGxlIGZhaWxlZCB3aXRoICR7ZX1gKSwgbi5fZmFpbFdpdGgoZSksIFxuICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKG5ldyBTZXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgLyoqXG4gKiBQcm92aWRlcyBhbGwgY29tcG9uZW50cyBuZWVkZWQgZm9yIEZpcmVzdG9yZSB3aXRoIGluLW1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAqIFVzZXMgRWFnZXJHQyBnYXJiYWdlIGNvbGxlY3Rpb24uXG4gKi8pKHIsIHQsIG4pLnRoZW4oKGUgPT4ge1xuICAgICAgICByLnNoYXJlZENsaWVudFN0YXRlLm5vdGlmeUJ1bmRsZUxvYWRlZChlKTtcbiAgICB9KSk7XG59XG5cbmNsYXNzIE1lbW9yeU9mZmxpbmVDb21wb25lbnRQcm92aWRlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuc3luY2hyb25pemVUYWJzID0gITE7XG4gICAgfVxuICAgIGFzeW5jIGluaXRpYWxpemUoZSkge1xuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSBfX1BSSVZBVEVfbmV3U2VyaWFsaXplcihlLmRhdGFiYXNlSW5mby5kYXRhYmFzZUlkKSwgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSA9IHRoaXMuY3JlYXRlU2hhcmVkQ2xpZW50U3RhdGUoZSksIFxuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gdGhpcy5jcmVhdGVQZXJzaXN0ZW5jZShlKSwgYXdhaXQgdGhpcy5wZXJzaXN0ZW5jZS5zdGFydCgpLCB0aGlzLmxvY2FsU3RvcmUgPSB0aGlzLmNyZWF0ZUxvY2FsU3RvcmUoZSksIFxuICAgICAgICB0aGlzLmdjU2NoZWR1bGVyID0gdGhpcy5jcmVhdGVHYXJiYWdlQ29sbGVjdGlvblNjaGVkdWxlcihlLCB0aGlzLmxvY2FsU3RvcmUpLCB0aGlzLmluZGV4QmFja2ZpbGxlclNjaGVkdWxlciA9IHRoaXMuY3JlYXRlSW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyKGUsIHRoaXMubG9jYWxTdG9yZSk7XG4gICAgfVxuICAgIGNyZWF0ZUdhcmJhZ2VDb2xsZWN0aW9uU2NoZWR1bGVyKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNyZWF0ZUluZGV4QmFja2ZpbGxlclNjaGVkdWxlcihlLCB0KSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjcmVhdGVMb2NhbFN0b3JlKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9uZXdMb2NhbFN0b3JlKHRoaXMucGVyc2lzdGVuY2UsIG5ldyBfX1BSSVZBVEVfUXVlcnlFbmdpbmUsIGUuaW5pdGlhbFVzZXIsIHRoaXMuc2VyaWFsaXplcik7XG4gICAgfVxuICAgIGNyZWF0ZVBlcnNpc3RlbmNlKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfTWVtb3J5UGVyc2lzdGVuY2UoX19QUklWQVRFX01lbW9yeUVhZ2VyRGVsZWdhdGUuSHIsIHRoaXMuc2VyaWFsaXplcik7XG4gICAgfVxuICAgIGNyZWF0ZVNoYXJlZENsaWVudFN0YXRlKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGU7XG4gICAgfVxuICAgIGFzeW5jIHRlcm1pbmF0ZSgpIHtcbiAgICAgICAgdmFyIGUsIHQ7XG4gICAgICAgIG51bGwgPT09IChlID0gdGhpcy5nY1NjaGVkdWxlcikgfHwgdm9pZCAwID09PSBlIHx8IGUuc3RvcCgpLCBudWxsID09PSAodCA9IHRoaXMuaW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyKSB8fCB2b2lkIDAgPT09IHQgfHwgdC5zdG9wKCksIFxuICAgICAgICB0aGlzLnNoYXJlZENsaWVudFN0YXRlLnNodXRkb3duKCksIGF3YWl0IHRoaXMucGVyc2lzdGVuY2Uuc2h1dGRvd24oKTtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9McnVHY01lbW9yeU9mZmxpbmVDb21wb25lbnRQcm92aWRlciBleHRlbmRzIE1lbW9yeU9mZmxpbmVDb21wb25lbnRQcm92aWRlciB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmNhY2hlU2l6ZUJ5dGVzID0gZTtcbiAgICB9XG4gICAgY3JlYXRlR2FyYmFnZUNvbGxlY3Rpb25TY2hlZHVsZXIoZSwgdCkge1xuICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydCh0aGlzLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlIGluc3RhbmNlb2YgX19QUklWQVRFX01lbW9yeUxydURlbGVnYXRlKTtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUuZ2FyYmFnZUNvbGxlY3RvcjtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfTHJ1U2NoZWR1bGVyKG4sIGUuYXN5bmNRdWV1ZSwgdCk7XG4gICAgfVxuICAgIGNyZWF0ZVBlcnNpc3RlbmNlKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHZvaWQgMCAhPT0gdGhpcy5jYWNoZVNpemVCeXRlcyA/IExydVBhcmFtcy53aXRoQ2FjaGVTaXplKHRoaXMuY2FjaGVTaXplQnl0ZXMpIDogTHJ1UGFyYW1zLkRFRkFVTFQ7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX01lbW9yeVBlcnNpc3RlbmNlKChlID0+IF9fUFJJVkFURV9NZW1vcnlMcnVEZWxlZ2F0ZS5IcihlLCB0KSksIHRoaXMuc2VyaWFsaXplcik7XG4gICAgfVxufVxuXG4vKipcbiAqIFByb3ZpZGVzIGFsbCBjb21wb25lbnRzIG5lZWRlZCBmb3IgRmlyZXN0b3JlIHdpdGggSW5kZXhlZERCIHBlcnNpc3RlbmNlLlxuICovIGNsYXNzIF9fUFJJVkFURV9JbmRleGVkRGJPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIgZXh0ZW5kcyBNZW1vcnlPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5RYSA9IGUsIHRoaXMuY2FjaGVTaXplQnl0ZXMgPSB0LCB0aGlzLmZvcmNlT3duZXJzaGlwID0gbiwgdGhpcy5zeW5jaHJvbml6ZVRhYnMgPSAhMTtcbiAgICB9XG4gICAgYXN5bmMgaW5pdGlhbGl6ZShlKSB7XG4gICAgICAgIGF3YWl0IHN1cGVyLmluaXRpYWxpemUoZSksIGF3YWl0IHRoaXMuUWEuaW5pdGlhbGl6ZSh0aGlzLCBlKSwgXG4gICAgICAgIC8vIEVucXVldWUgd3JpdGVzIGZyb20gYSBwcmV2aW91cyBzZXNzaW9uXG4gICAgICAgIGF3YWl0IF9fUFJJVkFURV9zeW5jRW5naW5lRW5zdXJlV3JpdGVDYWxsYmFja3ModGhpcy5RYS5zeW5jRW5naW5lKSwgYXdhaXQgX19QUklWQVRFX2ZpbGxXcml0ZVBpcGVsaW5lKHRoaXMuUWEucmVtb3RlU3RvcmUpLCBcbiAgICAgICAgLy8gTk9URTogVGhpcyB3aWxsIGltbWVkaWF0ZWx5IGNhbGwgdGhlIGxpc3RlbmVyLCBzbyB3ZSBtYWtlIHN1cmUgdG9cbiAgICAgICAgLy8gc2V0IGl0IGFmdGVyIGxvY2FsU3RvcmUgLyByZW1vdGVTdG9yZSBhcmUgc3RhcnRlZC5cbiAgICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0ZW5jZS5maSgoKCkgPT4gKHRoaXMuZ2NTY2hlZHVsZXIgJiYgIXRoaXMuZ2NTY2hlZHVsZXIuc3RhcnRlZCAmJiB0aGlzLmdjU2NoZWR1bGVyLnN0YXJ0KCksIFxuICAgICAgICB0aGlzLmluZGV4QmFja2ZpbGxlclNjaGVkdWxlciAmJiAhdGhpcy5pbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIuc3RhcnRlZCAmJiB0aGlzLmluZGV4QmFja2ZpbGxlclNjaGVkdWxlci5zdGFydCgpLCBcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkpKSk7XG4gICAgfVxuICAgIGNyZWF0ZUxvY2FsU3RvcmUoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX25ld0xvY2FsU3RvcmUodGhpcy5wZXJzaXN0ZW5jZSwgbmV3IF9fUFJJVkFURV9RdWVyeUVuZ2luZSwgZS5pbml0aWFsVXNlciwgdGhpcy5zZXJpYWxpemVyKTtcbiAgICB9XG4gICAgY3JlYXRlR2FyYmFnZUNvbGxlY3Rpb25TY2hlZHVsZXIoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5nYXJiYWdlQ29sbGVjdG9yO1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9McnVTY2hlZHVsZXIobiwgZS5hc3luY1F1ZXVlLCB0KTtcbiAgICB9XG4gICAgY3JlYXRlSW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBfX1BSSVZBVEVfSW5kZXhCYWNrZmlsbGVyKHQsIHRoaXMucGVyc2lzdGVuY2UpO1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9JbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIoZS5hc3luY1F1ZXVlLCBuKTtcbiAgICB9XG4gICAgY3JlYXRlUGVyc2lzdGVuY2UoZSkge1xuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2luZGV4ZWREYlN0b3JhZ2VQcmVmaXgoZS5kYXRhYmFzZUluZm8uZGF0YWJhc2VJZCwgZS5kYXRhYmFzZUluZm8ucGVyc2lzdGVuY2VLZXkpLCBuID0gdm9pZCAwICE9PSB0aGlzLmNhY2hlU2l6ZUJ5dGVzID8gTHJ1UGFyYW1zLndpdGhDYWNoZVNpemUodGhpcy5jYWNoZVNpemVCeXRlcykgOiBMcnVQYXJhbXMuREVGQVVMVDtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfSW5kZXhlZERiUGVyc2lzdGVuY2UodGhpcy5zeW5jaHJvbml6ZVRhYnMsIHQsIGUuY2xpZW50SWQsIG4sIGUuYXN5bmNRdWV1ZSwgX19QUklWQVRFX2dldFdpbmRvdygpLCBnZXREb2N1bWVudCgpLCB0aGlzLnNlcmlhbGl6ZXIsIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUsICEhdGhpcy5mb3JjZU93bmVyc2hpcCk7XG4gICAgfVxuICAgIGNyZWF0ZVNoYXJlZENsaWVudFN0YXRlKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGU7XG4gICAgfVxufVxuXG4vKipcbiAqIFByb3ZpZGVzIGFsbCBjb21wb25lbnRzIG5lZWRlZCBmb3IgRmlyZXN0b3JlIHdpdGggbXVsdGktdGFiIEluZGV4ZWREQlxuICogcGVyc2lzdGVuY2UuXG4gKlxuICogSW4gdGhlIGxlZ2FjeSBjbGllbnQsIHRoaXMgcHJvdmlkZXIgaXMgdXNlZCB0byBwcm92aWRlIGJvdGggbXVsdGktdGFiIGFuZFxuICogbm9uLW11bHRpLXRhYiBwZXJzaXN0ZW5jZSBzaW5jZSB3ZSBjYW5ub3QgdGVsbCBhdCBidWlsZCB0aW1lIHdoZXRoZXJcbiAqIGBzeW5jaHJvbml6ZVRhYnNgIHdpbGwgYmUgZW5hYmxlZC5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfTXVsdGlUYWJPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIgZXh0ZW5kcyBfX1BSSVZBVEVfSW5kZXhlZERiT2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKGUsIHQsIC8qIGZvcmNlT3duZXJzaGlwPSAqLyAhMSksIHRoaXMuUWEgPSBlLCB0aGlzLmNhY2hlU2l6ZUJ5dGVzID0gdCwgdGhpcy5zeW5jaHJvbml6ZVRhYnMgPSAhMDtcbiAgICB9XG4gICAgYXN5bmMgaW5pdGlhbGl6ZShlKSB7XG4gICAgICAgIGF3YWl0IHN1cGVyLmluaXRpYWxpemUoZSk7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLlFhLnN5bmNFbmdpbmU7XG4gICAgICAgIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlICYmICh0aGlzLnNoYXJlZENsaWVudFN0YXRlLnN5bmNFbmdpbmUgPSB7XG4gICAgICAgICAgICBaczogX19QUklWQVRFX3N5bmNFbmdpbmVBcHBseUJhdGNoU3RhdGUuYmluZChudWxsLCB0KSxcbiAgICAgICAgICAgIFhzOiBfX1BSSVZBVEVfc3luY0VuZ2luZUFwcGx5VGFyZ2V0U3RhdGUuYmluZChudWxsLCB0KSxcbiAgICAgICAgICAgIGVvOiBfX1BSSVZBVEVfc3luY0VuZ2luZUFwcGx5QWN0aXZlVGFyZ2V0c0NoYW5nZS5iaW5kKG51bGwsIHQpLFxuICAgICAgICAgICAgQmk6IF9fUFJJVkFURV9zeW5jRW5naW5lR2V0QWN0aXZlQ2xpZW50cy5iaW5kKG51bGwsIHQpLFxuICAgICAgICAgICAgWXM6IF9fUFJJVkFURV9zeW5jRW5naW5lU3luY2hyb25pemVXaXRoQ2hhbmdlZERvY3VtZW50cy5iaW5kKG51bGwsIHQpXG4gICAgICAgIH0sIGF3YWl0IHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUuc3RhcnQoKSksIFxuICAgICAgICAvLyBOT1RFOiBUaGlzIHdpbGwgaW1tZWRpYXRlbHkgY2FsbCB0aGUgbGlzdGVuZXIsIHNvIHdlIG1ha2Ugc3VyZSB0b1xuICAgICAgICAvLyBzZXQgaXQgYWZ0ZXIgbG9jYWxTdG9yZSAvIHJlbW90ZVN0b3JlIGFyZSBzdGFydGVkLlxuICAgICAgICBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLmZpKChhc3luYyBlID0+IHtcbiAgICAgICAgICAgIGF3YWl0IF9fUFJJVkFURV9zeW5jRW5naW5lQXBwbHlQcmltYXJ5U3RhdGUodGhpcy5RYS5zeW5jRW5naW5lLCBlKSwgdGhpcy5nY1NjaGVkdWxlciAmJiAoZSAmJiAhdGhpcy5nY1NjaGVkdWxlci5zdGFydGVkID8gdGhpcy5nY1NjaGVkdWxlci5zdGFydCgpIDogZSB8fCB0aGlzLmdjU2NoZWR1bGVyLnN0b3AoKSksIFxuICAgICAgICAgICAgdGhpcy5pbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIgJiYgKGUgJiYgIXRoaXMuaW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyLnN0YXJ0ZWQgPyB0aGlzLmluZGV4QmFja2ZpbGxlclNjaGVkdWxlci5zdGFydCgpIDogZSB8fCB0aGlzLmluZGV4QmFja2ZpbGxlclNjaGVkdWxlci5zdG9wKCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGNyZWF0ZVNoYXJlZENsaWVudFN0YXRlKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9nZXRXaW5kb3coKTtcbiAgICAgICAgaWYgKCFfX1BSSVZBVEVfV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLkQodCkpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDLlVOSU1QTEVNRU5URUQsIFwiSW5kZXhlZERCIHBlcnNpc3RlbmNlIGlzIG9ubHkgYXZhaWxhYmxlIG9uIHBsYXRmb3JtcyB0aGF0IHN1cHBvcnQgTG9jYWxTdG9yYWdlLlwiKTtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9pbmRleGVkRGJTdG9yYWdlUHJlZml4KGUuZGF0YWJhc2VJbmZvLmRhdGFiYXNlSWQsIGUuZGF0YWJhc2VJbmZvLnBlcnNpc3RlbmNlS2V5KTtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlKHQsIGUuYXN5bmNRdWV1ZSwgbiwgZS5jbGllbnRJZCwgZS5pbml0aWFsVXNlcik7XG4gICAgfVxufVxuXG4vKipcbiAqIEluaXRpYWxpemVzIGFuZCB3aXJlcyB0aGUgY29tcG9uZW50cyB0aGF0IGFyZSBuZWVkZWQgdG8gaW50ZXJmYWNlIHdpdGggdGhlXG4gKiBuZXR3b3JrLlxuICovIGNsYXNzIE9ubGluZUNvbXBvbmVudFByb3ZpZGVyIHtcbiAgICBhc3luYyBpbml0aWFsaXplKGUsIHQpIHtcbiAgICAgICAgdGhpcy5sb2NhbFN0b3JlIHx8ICh0aGlzLmxvY2FsU3RvcmUgPSBlLmxvY2FsU3RvcmUsIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUgPSBlLnNoYXJlZENsaWVudFN0YXRlLCBcbiAgICAgICAgdGhpcy5kYXRhc3RvcmUgPSB0aGlzLmNyZWF0ZURhdGFzdG9yZSh0KSwgdGhpcy5yZW1vdGVTdG9yZSA9IHRoaXMuY3JlYXRlUmVtb3RlU3RvcmUodCksIFxuICAgICAgICB0aGlzLmV2ZW50TWFuYWdlciA9IHRoaXMuY3JlYXRlRXZlbnRNYW5hZ2VyKHQpLCB0aGlzLnN5bmNFbmdpbmUgPSB0aGlzLmNyZWF0ZVN5bmNFbmdpbmUodCwgXG4gICAgICAgIC8qIHN0YXJ0QXNQcmltYXJ5PSovICFlLnN5bmNocm9uaXplVGFicyksIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUub25saW5lU3RhdGVIYW5kbGVyID0gZSA9PiBfX1BSSVZBVEVfc3luY0VuZ2luZUFwcGx5T25saW5lU3RhdGVDaGFuZ2UodGhpcy5zeW5jRW5naW5lLCBlLCAxIC8qIE9ubGluZVN0YXRlU291cmNlLlNoYXJlZENsaWVudFN0YXRlICovKSwgXG4gICAgICAgIHRoaXMucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLmhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UgPSBfX1BSSVZBVEVfc3luY0VuZ2luZUhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UuYmluZChudWxsLCB0aGlzLnN5bmNFbmdpbmUpLCBcbiAgICAgICAgYXdhaXQgX19QUklWQVRFX3JlbW90ZVN0b3JlQXBwbHlQcmltYXJ5U3RhdGUodGhpcy5yZW1vdGVTdG9yZSwgdGhpcy5zeW5jRW5naW5lLmlzUHJpbWFyeUNsaWVudCkpO1xuICAgIH1cbiAgICBjcmVhdGVFdmVudE1hbmFnZXIoZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX25ld0V2ZW50TWFuYWdlcigpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX0V2ZW50TWFuYWdlckltcGw7XG4gICAgICAgIH0oKTtcbiAgICB9XG4gICAgY3JlYXRlRGF0YXN0b3JlKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9uZXdTZXJpYWxpemVyKGUuZGF0YWJhc2VJbmZvLmRhdGFiYXNlSWQpLCBuID0gZnVuY3Rpb24gX19QUklWQVRFX25ld0Nvbm5lY3Rpb24oZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfV2ViQ2hhbm5lbENvbm5lY3Rpb24oZSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqIFJldHVybiB0aGUgUGxhdGZvcm0tc3BlY2lmaWMgY29ubmVjdGl2aXR5IG1vbml0b3IuICovIChlLmRhdGFiYXNlSW5mbyk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3RGF0YXN0b3JlKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX0RhdGFzdG9yZUltcGwoZSwgdCwgbiwgcik7XG4gICAgICAgIH0oZS5hdXRoQ3JlZGVudGlhbHMsIGUuYXBwQ2hlY2tDcmVkZW50aWFscywgbiwgdCk7XG4gICAgfVxuICAgIGNyZWF0ZVJlbW90ZVN0b3JlKGUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdSZW1vdGVTdG9yZShlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9SZW1vdGVTdG9yZUltcGwoZSwgdCwgbiwgciwgaSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqIFJlLWVuYWJsZXMgdGhlIG5ldHdvcmsuIElkZW1wb3RlbnQuICovICh0aGlzLmxvY2FsU3RvcmUsIHRoaXMuZGF0YXN0b3JlLCBlLmFzeW5jUXVldWUsIChlID0+IF9fUFJJVkFURV9zeW5jRW5naW5lQXBwbHlPbmxpbmVTdGF0ZUNoYW5nZSh0aGlzLnN5bmNFbmdpbmUsIGUsIDAgLyogT25saW5lU3RhdGVTb3VyY2UuUmVtb3RlU3RvcmUgKi8pKSwgZnVuY3Rpb24gX19QUklWQVRFX25ld0Nvbm5lY3Rpdml0eU1vbml0b3IoKSB7XG4gICAgICAgICAgICByZXR1cm4gX19QUklWQVRFX0Jyb3dzZXJDb25uZWN0aXZpdHlNb25pdG9yLkQoKSA/IG5ldyBfX1BSSVZBVEVfQnJvd3NlckNvbm5lY3Rpdml0eU1vbml0b3IgOiBuZXcgX19QUklWQVRFX05vb3BDb25uZWN0aXZpdHlNb25pdG9yO1xuICAgICAgICB9KCkpO1xuICAgIH1cbiAgICBjcmVhdGVTeW5jRW5naW5lKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdTeW5jRW5naW5lKGUsIHQsIG4sIFxuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE1hbmFnZXMgc3RhdGUgc3luY2hyb25pemF0aW9uIGluIG11bHRpLXRhYiBlbnZpcm9ubWVudHMuXG4gICAgICAgIHIsIGksIHMsIG8pIHtcbiAgICAgICAgICAgIGNvbnN0IF8gPSBuZXcgX19QUklWQVRFX1N5bmNFbmdpbmVJbXBsKGUsIHQsIG4sIHIsIGksIHMpO1xuICAgICAgICAgICAgcmV0dXJuIG8gJiYgKF8uTGEgPSAhMCksIF87XG4gICAgICAgIH0odGhpcy5sb2NhbFN0b3JlLCB0aGlzLnJlbW90ZVN0b3JlLCB0aGlzLmV2ZW50TWFuYWdlciwgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSwgZS5pbml0aWFsVXNlciwgZS5tYXhDb25jdXJyZW50TGltYm9SZXNvbHV0aW9ucywgdCk7XG4gICAgfVxuICAgIGFzeW5jIHRlcm1pbmF0ZSgpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIGF3YWl0IGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9yZW1vdGVTdG9yZVNodXRkb3duKGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiUmVtb3RlU3RvcmVcIiwgXCJSZW1vdGVTdG9yZSBzaHV0dGluZyBkb3duLlwiKSwgdC5NXy5hZGQoNSAvKiBPZmZsaW5lQ2F1c2UuU2h1dGRvd24gKi8pLCBcbiAgICAgICAgICAgIGF3YWl0IF9fUFJJVkFURV9kaXNhYmxlTmV0d29ya0ludGVybmFsKHQpLCB0Lk9fLnNodXRkb3duKCksIFxuICAgICAgICAgICAgLy8gU2V0IHRoZSBPbmxpbmVTdGF0ZSB0byBVbmtub3duIChyYXRoZXIgdGhhbiBPZmZsaW5lKSB0byBhdm9pZCBwb3RlbnRpYWxseVxuICAgICAgICAgICAgLy8gdHJpZ2dlcmluZyBzcHVyaW91cyBsaXN0ZW5lciBldmVudHMgd2l0aCBjYWNoZWQgZGF0YSwgZXRjLlxuICAgICAgICAgICAgdC5OXy5zZXQoXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLyk7XG4gICAgICAgIH0odGhpcy5yZW1vdGVTdG9yZSksIG51bGwgPT09IChlID0gdGhpcy5kYXRhc3RvcmUpIHx8IHZvaWQgMCA9PT0gZSB8fCBlLnRlcm1pbmF0ZSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSG93IG1hbnkgYnl0ZXMgdG8gcmVhZCBlYWNoIHRpbWUgd2hlbiBgUmVhZGFibGVTdHJlYW1SZWFkZXIucmVhZCgpYCBpc1xuICogY2FsbGVkLiBPbmx5IGFwcGxpY2FibGUgZm9yIGJ5dGUgc3RyZWFtcyB0aGF0IHdlIGNvbnRyb2wgKGUuZy4gdGhvc2UgYmFja2VkXG4gKiBieSBhbiBVSW50OEFycmF5KS5cbiAqL1xuLyoqXG4gKiBCdWlsZHMgYSBgQnl0ZVN0cmVhbVJlYWRlcmAgZnJvbSBhIFVJbnQ4QXJyYXkuXG4gKiBAcGFyYW0gc291cmNlIC0gVGhlIGRhdGEgc291cmNlIHRvIHVzZS5cbiAqIEBwYXJhbSBieXRlc1BlclJlYWQgLSBIb3cgbWFueSBieXRlcyBlYWNoIGByZWFkKClgIGZyb20gdGhlIHJldHVybmVkIHJlYWRlclxuICogICAgICAgIHdpbGwgcmVhZC5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX3RvQnl0ZVN0cmVhbVJlYWRlckhlbHBlcihlLCB0ID0gMTAyNDApIHtcbiAgICBsZXQgbiA9IDA7XG4gICAgLy8gVGhlIFR5cGVTY3JpcHQgZGVmaW5pdGlvbiBmb3IgUmVhZGFibGVTdHJlYW1SZWFkZXIgY2hhbmdlZC4gV2UgdXNlXG4gICAgLy8gYGFueWAgaGVyZSB0byBhbGxvdyB0aGlzIGNvZGUgdG8gY29tcGlsZSB3aXRoIGRpZmZlcmVudCB2ZXJzaW9ucy5cbiAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0L2lzc3Vlcy80Mjk3MFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGFzeW5jIHJlYWQoKSB7XG4gICAgICAgICAgICBpZiAobiA8IGUuYnl0ZUxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlLnNsaWNlKG4sIG4gKyB0KSxcbiAgICAgICAgICAgICAgICAgICAgZG9uZTogITFcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiBuICs9IHQsIHI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGRvbmU6ICEwXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyBjYW5jZWwoKSB7fSxcbiAgICAgICAgcmVsZWFzZUxvY2soKSB7fSxcbiAgICAgICAgY2xvc2VkOiBQcm9taXNlLnJlc29sdmUoKVxuICAgIH07XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIE9uIHdlYiwgYSBgUmVhZGFibGVTdHJlYW1gIGlzIHdyYXBwZWQgYXJvdW5kIGJ5IGEgYEJ5dGVTdHJlYW1SZWFkZXJgLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLypcbiAqIEEgd3JhcHBlciBpbXBsZW1lbnRhdGlvbiBvZiBPYnNlcnZlcjxUPiB0aGF0IHdpbGwgZGlzcGF0Y2ggZXZlbnRzXG4gKiBhc3luY2hyb25vdXNseS4gVG8gYWxsb3cgaW1tZWRpYXRlIHNpbGVuY2luZywgYSBtdXRlIGNhbGwgaXMgYWRkZWQgd2hpY2hcbiAqIGNhdXNlcyBldmVudHMgc2NoZWR1bGVkIHRvIG5vIGxvbmdlciBiZSByYWlzZWQuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9Bc3luY09ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIgPSBlLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZW4gc2V0IHRvIHRydWUsIHdpbGwgbm90IHJhaXNlIGZ1dHVyZSBldmVudHMuIE5lY2Vzc2FyeSB0byBkZWFsIHdpdGhcbiAgICAgICAgICogYXN5bmMgZGV0YWNobWVudCBvZiBsaXN0ZW5lci5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubXV0ZWQgPSAhMTtcbiAgICB9XG4gICAgbmV4dChlKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIubmV4dCAmJiB0aGlzLkthKHRoaXMub2JzZXJ2ZXIubmV4dCwgZSk7XG4gICAgfVxuICAgIGVycm9yKGUpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5lcnJvciA/IHRoaXMuS2EodGhpcy5vYnNlcnZlci5lcnJvciwgZSkgOiBfX1BSSVZBVEVfbG9nRXJyb3IoXCJVbmNhdWdodCBFcnJvciBpbiBzbmFwc2hvdCBsaXN0ZW5lcjpcIiwgZS50b1N0cmluZygpKTtcbiAgICB9XG4gICAgJGEoKSB7XG4gICAgICAgIHRoaXMubXV0ZWQgPSAhMDtcbiAgICB9XG4gICAgS2EoZSwgdCkge1xuICAgICAgICB0aGlzLm11dGVkIHx8IHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubXV0ZWQgfHwgZSh0KTtcbiAgICAgICAgfSksIDApO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBjbGFzcyByZXByZXNlbnRpbmcgYSBidW5kbGUuXG4gKlxuICogVGFrZXMgYSBidW5kbGUgc3RyZWFtIG9yIGJ1ZmZlciwgYW5kIHByZXNlbnRzIGFic3RyYWN0aW9ucyB0byByZWFkIGJ1bmRsZWRcbiAqIGVsZW1lbnRzIG91dCBvZiB0aGUgdW5kZXJseWluZyBjb250ZW50LlxuICovIGNsYXNzIF9fUFJJVkFURV9CdW5kbGVSZWFkZXJJbXBsIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIHJlYWRlciB0byByZWFkIGZyb20gdW5kZXJseWluZyBiaW5hcnkgYnVuZGxlIGRhdGEgc291cmNlLiAqL1xuICAgIGUsIHQpIHtcbiAgICAgICAgdGhpcy5VYSA9IGUsIHRoaXMuc2VyaWFsaXplciA9IHQsIFxuICAgICAgICAvKiogQ2FjaGVkIGJ1bmRsZSBtZXRhZGF0YS4gKi9cbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IG5ldyBfX1BSSVZBVEVfRGVmZXJyZWQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogSW50ZXJuYWwgYnVmZmVyIHRvIGhvbGQgYnVuZGxlIGNvbnRlbnQsIGFjY3VtdWxhdGluZyBpbmNvbXBsZXRlIGVsZW1lbnRcbiAgICAgICAgICogY29udGVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXksIHRoaXMuV2EgPSBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3VGV4dERlY29kZXIoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFRleHREZWNvZGVyKFwidXRmLThcIik7XG4gICAgICAgIH0oKSwgXG4gICAgICAgIC8vIFJlYWQgdGhlIG1ldGFkYXRhICh3aGljaCBpcyB0aGUgZmlyc3QgZWxlbWVudCkuXG4gICAgICAgIHRoaXMuR2EoKS50aGVuKChlID0+IHtcbiAgICAgICAgICAgIGUgJiYgZS5zYSgpID8gdGhpcy5tZXRhZGF0YS5yZXNvbHZlKGUuaWEubWV0YWRhdGEpIDogdGhpcy5tZXRhZGF0YS5yZWplY3QobmV3IEVycm9yKGBUaGUgZmlyc3QgZWxlbWVudCBvZiB0aGUgYnVuZGxlIGlzIG5vdCBhIG1ldGFkYXRhLCBpdCBpc1xcbiAgICAgICAgICAgICAke0pTT04uc3RyaW5naWZ5KG51bGwgPT0gZSA/IHZvaWQgMCA6IGUuaWEpfWApKTtcbiAgICAgICAgfSksIChlID0+IHRoaXMubWV0YWRhdGEucmVqZWN0KGUpKSk7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5VYS5jYW5jZWwoKTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0TWV0YWRhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1ldGFkYXRhLnByb21pc2U7XG4gICAgfVxuICAgIGFzeW5jIHFhKCkge1xuICAgICAgICAvLyBNYWtlcyBzdXJlIG1ldGFkYXRhIGlzIHJlYWQgYmVmb3JlIHByb2NlZWRpbmcuXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdldE1ldGFkYXRhKCksIHRoaXMuR2EoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgZnJvbSB0aGUgaGVhZCBvZiBpbnRlcm5hbCBidWZmZXIsIGFuZCBwdWxsaW5nIG1vcmUgZGF0YSBmcm9tXG4gICAgICogdW5kZXJseWluZyBzdHJlYW0gaWYgYSBjb21wbGV0ZSBlbGVtZW50IGNhbm5vdCBiZSBmb3VuZCwgdW50aWwgYW5cbiAgICAgKiBlbGVtZW50KGluY2x1ZGluZyB0aGUgcHJlZml4ZWQgbGVuZ3RoIGFuZCB0aGUgSlNPTiBzdHJpbmcpIGlzIGZvdW5kLlxuICAgICAqXG4gICAgICogT25jZSBhIGNvbXBsZXRlIGVsZW1lbnQgaXMgcmVhZCwgaXQgaXMgZHJvcHBlZCBmcm9tIGludGVybmFsIGJ1ZmZlci5cbiAgICAgKlxuICAgICAqIFJldHVybnMgZWl0aGVyIHRoZSBidW5kbGVkIGVsZW1lbnQsIG9yIG51bGwgaWYgd2UgaGF2ZSByZWFjaGVkIHRoZSBlbmQgb2ZcbiAgICAgKiB0aGUgc3RyZWFtLlxuICAgICAqLyAgICBhc3luYyBHYSgpIHtcbiAgICAgICAgY29uc3QgZSA9IGF3YWl0IHRoaXMuemEoKTtcbiAgICAgICAgaWYgKG51bGwgPT09IGUpIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5XYS5kZWNvZGUoZSksIG4gPSBOdW1iZXIodCk7XG4gICAgICAgIGlzTmFOKG4pICYmIHRoaXMuamEoYGxlbmd0aCBzdHJpbmcgKCR7dH0pIGlzIG5vdCB2YWxpZCBudW1iZXJgKTtcbiAgICAgICAgY29uc3QgciA9IGF3YWl0IHRoaXMuSGEobik7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1NpemVkQnVuZGxlRWxlbWVudChKU09OLnBhcnNlKHIpLCBlLmxlbmd0aCArIG4pO1xuICAgIH1cbiAgICAvKiogRmlyc3QgaW5kZXggb2YgJ3snIGZyb20gdGhlIHVuZGVybHlpbmcgYnVmZmVyLiAqLyAgICBKYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyLmZpbmRJbmRleCgoZSA9PiBlID09PSBcIntcIi5jaGFyQ29kZUF0KDApKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWRzIGZyb20gdGhlIGJlZ2lubmluZyBvZiB0aGUgaW50ZXJuYWwgYnVmZmVyLCB1bnRpbCB0aGUgZmlyc3QgJ3snLCBhbmRcbiAgICAgKiByZXR1cm4gdGhlIGNvbnRlbnQuXG4gICAgICpcbiAgICAgKiBJZiByZWFjaGVkIGVuZCBvZiB0aGUgc3RyZWFtLCByZXR1cm5zIGEgbnVsbC5cbiAgICAgKi8gICAgYXN5bmMgemEoKSB7XG4gICAgICAgIGZvciAoO3RoaXMuSmEoKSA8IDA7ICkge1xuICAgICAgICAgICAgaWYgKGF3YWl0IHRoaXMuWWEoKSkgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQnJva2Ugb3V0IG9mIHRoZSBsb29wIGJlY2F1c2UgdW5kZXJseWluZyBzdHJlYW0gaXMgY2xvc2VkLCBhbmQgdGhlcmVcbiAgICAgICAgLy8gaGFwcGVucyB0byBiZSBubyBtb3JlIGRhdGEgdG8gcHJvY2Vzcy5cbiAgICAgICAgICAgICAgICBpZiAoMCA9PT0gdGhpcy5idWZmZXIubGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuSmEoKTtcbiAgICAgICAgLy8gQnJva2Ugb3V0IG9mIHRoZSBsb29wIGJlY2F1c2UgdW5kZXJseWluZyBzdHJlYW0gaXMgY2xvc2VkLCBidXQgc3RpbGxcbiAgICAgICAgLy8gY2Fubm90IGZpbmQgYW4gb3BlbiBicmFja2V0LlxuICAgICAgICAgICAgICAgIGUgPCAwICYmIHRoaXMuamEoXCJSZWFjaGVkIHRoZSBlbmQgb2YgYnVuZGxlIHdoZW4gYSBsZW5ndGggc3RyaW5nIGlzIGV4cGVjdGVkLlwiKTtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuYnVmZmVyLnNsaWNlKDAsIGUpO1xuICAgICAgICAvLyBVcGRhdGUgdGhlIGludGVybmFsIGJ1ZmZlciB0byBkcm9wIHRoZSByZWFkIGxlbmd0aC5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5zbGljZShlKSwgdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgZnJvbSBhIHNwZWNpZmllZCBwb3NpdGlvbiBmcm9tIHRoZSBpbnRlcm5hbCBidWZmZXIsIGZvciBhIHNwZWNpZmllZFxuICAgICAqIG51bWJlciBvZiBieXRlcywgcHVsbGluZyBtb3JlIGRhdGEgZnJvbSB0aGUgdW5kZXJseWluZyBzdHJlYW0gaWYgbmVlZGVkLlxuICAgICAqXG4gICAgICogUmV0dXJucyBhIHN0cmluZyBkZWNvZGVkIGZyb20gdGhlIHJlYWQgYnl0ZXMuXG4gICAgICovICAgIGFzeW5jIEhhKGUpIHtcbiAgICAgICAgZm9yICg7dGhpcy5idWZmZXIubGVuZ3RoIDwgZTsgKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLllhKCkgJiYgdGhpcy5qYShcIlJlYWNoZWQgdGhlIGVuZCBvZiBidW5kbGUgd2hlbiBtb3JlIGlzIGV4cGVjdGVkLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0ID0gdGhpcy5XYS5kZWNvZGUodGhpcy5idWZmZXIuc2xpY2UoMCwgZSkpO1xuICAgICAgICAvLyBVcGRhdGUgdGhlIGludGVybmFsIGJ1ZmZlciB0byBkcm9wIHRoZSByZWFkIGpzb24gc3RyaW5nLlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLnNsaWNlKGUpLCB0O1xuICAgIH1cbiAgICBqYShlKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICAgICAgdGhyb3cgdGhpcy5VYS5jYW5jZWwoKSwgbmV3IEVycm9yKGBJbnZhbGlkIGJ1bmRsZSBmb3JtYXQ6ICR7ZX1gKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHVsbHMgbW9yZSBkYXRhIGZyb20gdW5kZXJseWluZyBzdHJlYW0gdG8gaW50ZXJuYWwgYnVmZmVyLlxuICAgICAqIFJldHVybnMgYSBib29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGUgc3RyZWFtIGlzIGZpbmlzaGVkLlxuICAgICAqLyAgICBhc3luYyBZYSgpIHtcbiAgICAgICAgY29uc3QgZSA9IGF3YWl0IHRoaXMuVWEucmVhZCgpO1xuICAgICAgICBpZiAoIWUuZG9uZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBVaW50OEFycmF5KHRoaXMuYnVmZmVyLmxlbmd0aCArIGUudmFsdWUubGVuZ3RoKTtcbiAgICAgICAgICAgIHQuc2V0KHRoaXMuYnVmZmVyKSwgdC5zZXQoZS52YWx1ZSwgdGhpcy5idWZmZXIubGVuZ3RoKSwgdGhpcy5idWZmZXIgPSB0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlLmRvbmU7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBJbnRlcm5hbCB0cmFuc2FjdGlvbiBvYmplY3QgcmVzcG9uc2libGUgZm9yIGFjY3VtdWxhdGluZyB0aGUgbXV0YXRpb25zIHRvXG4gKiBwZXJmb3JtIGFuZCB0aGUgYmFzZSB2ZXJzaW9ucyBmb3IgYW55IGRvY3VtZW50cyByZWFkLlxuICovXG5jbGFzcyBUcmFuc2FjdGlvbiQyIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuZGF0YXN0b3JlID0gZSwgXG4gICAgICAgIC8vIFRoZSB2ZXJzaW9uIG9mIGVhY2ggZG9jdW1lbnQgdGhhdCB3YXMgcmVhZCBkdXJpbmcgdGhpcyB0cmFuc2FjdGlvbi5cbiAgICAgICAgdGhpcy5yZWFkVmVyc2lvbnMgPSBuZXcgTWFwLCB0aGlzLm11dGF0aW9ucyA9IFtdLCB0aGlzLmNvbW1pdHRlZCA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgZGVmZXJyZWQgdXNhZ2UgZXJyb3IgdGhhdCBvY2N1cnJlZCBwcmV2aW91c2x5IGluIHRoaXMgdHJhbnNhY3Rpb24gdGhhdFxuICAgICAgICAgKiB3aWxsIGNhdXNlIHRoZSB0cmFuc2FjdGlvbiB0byBmYWlsIG9uY2UgaXQgYWN0dWFsbHkgY29tbWl0cy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubGFzdFRyYW5zYWN0aW9uRXJyb3IgPSBudWxsLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCBvZiBkb2N1bWVudHMgdGhhdCBoYXZlIGJlZW4gd3JpdHRlbiBpbiB0aGUgdHJhbnNhY3Rpb24uXG4gICAgICAgICAqXG4gICAgICAgICAqIFdoZW4gdGhlcmUncyBtb3JlIHRoYW4gb25lIHdyaXRlIHRvIHRoZSBzYW1lIGtleSBpbiBhIHRyYW5zYWN0aW9uLCBhbnlcbiAgICAgICAgICogd3JpdGVzIGFmdGVyIHRoZSBmaXJzdCBhcmUgaGFuZGxlZCBkaWZmZXJlbnRseS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMud3JpdHRlbkRvY3MgPSBuZXcgU2V0O1xuICAgIH1cbiAgICBhc3luYyBsb29rdXAoZSkge1xuICAgICAgICBpZiAodGhpcy5lbnN1cmVDb21taXROb3RDYWxsZWQoKSwgdGhpcy5tdXRhdGlvbnMubGVuZ3RoID4gMCkgdGhyb3cgdGhpcy5sYXN0VHJhbnNhY3Rpb25FcnJvciA9IG5ldyBGaXJlc3RvcmVFcnJvcihDLklOVkFMSURfQVJHVU1FTlQsIFwiRmlyZXN0b3JlIHRyYW5zYWN0aW9ucyByZXF1aXJlIGFsbCByZWFkcyB0byBiZSBleGVjdXRlZCBiZWZvcmUgYWxsIHdyaXRlcy5cIiksIFxuICAgICAgICB0aGlzLmxhc3RUcmFuc2FjdGlvbkVycm9yO1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2ludm9rZUJhdGNoR2V0RG9jdW1lbnRzUnBjKGUsIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCByID0ge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50czogdC5tYXAoKGUgPT4gX19QUklWQVRFX3RvTmFtZShuLnNlcmlhbGl6ZXIsIGUpKSlcbiAgICAgICAgICAgIH0sIGkgPSBhd2FpdCBuLnhvKFwiQmF0Y2hHZXREb2N1bWVudHNcIiwgbi5zZXJpYWxpemVyLmRhdGFiYXNlSWQsIFJlc291cmNlUGF0aC5lbXB0eVBhdGgoKSwgciwgdC5sZW5ndGgpLCBzID0gbmV3IE1hcDtcbiAgICAgICAgICAgIGkuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9mcm9tQmF0Y2hHZXREb2N1bWVudHNSZXNwb25zZShuLnNlcmlhbGl6ZXIsIGUpO1xuICAgICAgICAgICAgICAgIHMuc2V0KHQua2V5LnRvU3RyaW5nKCksIHQpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgY29uc3QgbyA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IHMuZ2V0KGUudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoISF0KSwgby5wdXNoKHQpO1xuICAgICAgICAgICAgfSkpLCBvO1xuICAgICAgICB9KHRoaXMuZGF0YXN0b3JlLCBlKTtcbiAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgoZSA9PiB0aGlzLnJlY29yZFZlcnNpb24oZSkpKSwgdDtcbiAgICB9XG4gICAgc2V0KGUsIHQpIHtcbiAgICAgICAgdGhpcy53cml0ZSh0LnRvTXV0YXRpb24oZSwgdGhpcy5wcmVjb25kaXRpb24oZSkpKSwgdGhpcy53cml0dGVuRG9jcy5hZGQoZS50b1N0cmluZygpKTtcbiAgICB9XG4gICAgdXBkYXRlKGUsIHQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMud3JpdGUodC50b011dGF0aW9uKGUsIHRoaXMucHJlY29uZGl0aW9uRm9yVXBkYXRlKGUpKSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRoaXMubGFzdFRyYW5zYWN0aW9uRXJyb3IgPSBlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMud3JpdHRlbkRvY3MuYWRkKGUudG9TdHJpbmcoKSk7XG4gICAgfVxuICAgIGRlbGV0ZShlKSB7XG4gICAgICAgIHRoaXMud3JpdGUobmV3IF9fUFJJVkFURV9EZWxldGVNdXRhdGlvbihlLCB0aGlzLnByZWNvbmRpdGlvbihlKSkpLCB0aGlzLndyaXR0ZW5Eb2NzLmFkZChlLnRvU3RyaW5nKCkpO1xuICAgIH1cbiAgICBhc3luYyBjb21taXQoKSB7XG4gICAgICAgIGlmICh0aGlzLmVuc3VyZUNvbW1pdE5vdENhbGxlZCgpLCB0aGlzLmxhc3RUcmFuc2FjdGlvbkVycm9yKSB0aHJvdyB0aGlzLmxhc3RUcmFuc2FjdGlvbkVycm9yO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5yZWFkVmVyc2lvbnM7XG4gICAgICAgIC8vIEZvciBlYWNoIG11dGF0aW9uLCBub3RlIHRoYXQgdGhlIGRvYyB3YXMgd3JpdHRlbi5cbiAgICAgICAgICAgICAgICB0aGlzLm11dGF0aW9ucy5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGUuZGVsZXRlKHQua2V5LnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSksIFxuICAgICAgICAvLyBGb3IgZWFjaCBkb2N1bWVudCB0aGF0IHdhcyByZWFkIGJ1dCBub3Qgd3JpdHRlbiB0bywgd2Ugd2FudCB0byBwZXJmb3JtXG4gICAgICAgIC8vIGEgYHZlcmlmeWAgb3BlcmF0aW9uLlxuICAgICAgICBlLmZvckVhY2goKChlLCB0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gRG9jdW1lbnRLZXkuZnJvbVBhdGgodCk7XG4gICAgICAgICAgICB0aGlzLm11dGF0aW9ucy5wdXNoKG5ldyBfX1BSSVZBVEVfVmVyaWZ5TXV0YXRpb24obiwgdGhpcy5wcmVjb25kaXRpb24obikpKTtcbiAgICAgICAgfSkpLCBhd2FpdCBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfaW52b2tlQ29tbWl0UnBjKGUsIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCByID0ge1xuICAgICAgICAgICAgICAgIHdyaXRlczogdC5tYXAoKGUgPT4gdG9NdXRhdGlvbihuLnNlcmlhbGl6ZXIsIGUpKSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBhd2FpdCBuLkNvKFwiQ29tbWl0XCIsIG4uc2VyaWFsaXplci5kYXRhYmFzZUlkLCBSZXNvdXJjZVBhdGguZW1wdHlQYXRoKCksIHIpO1xuICAgICAgICB9KHRoaXMuZGF0YXN0b3JlLCB0aGlzLm11dGF0aW9ucyksIHRoaXMuY29tbWl0dGVkID0gITA7XG4gICAgfVxuICAgIHJlY29yZFZlcnNpb24oZSkge1xuICAgICAgICBsZXQgdDtcbiAgICAgICAgaWYgKGUuaXNGb3VuZERvY3VtZW50KCkpIHQgPSBlLnZlcnNpb247IGVsc2Uge1xuICAgICAgICAgICAgaWYgKCFlLmlzTm9Eb2N1bWVudCgpKSB0aHJvdyBmYWlsKCk7XG4gICAgICAgICAgICAvLyBSZXByZXNlbnQgYSBkZWxldGVkIGRvYyB1c2luZyBTbmFwc2hvdFZlcnNpb24ubWluKCkuXG4gICAgICAgICAgICB0ID0gU25hcHNob3RWZXJzaW9uLm1pbigpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnJlYWRWZXJzaW9ucy5nZXQoZS5rZXkudG9TdHJpbmcoKSk7XG4gICAgICAgIGlmIChuKSB7XG4gICAgICAgICAgICBpZiAoIXQuaXNFcXVhbChuKSkgXG4gICAgICAgICAgICAvLyBUaGlzIHRyYW5zYWN0aW9uIHdpbGwgZmFpbCBubyBtYXR0ZXIgd2hhdC5cbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDLkFCT1JURUQsIFwiRG9jdW1lbnQgdmVyc2lvbiBjaGFuZ2VkIGJldHdlZW4gdHdvIHJlYWRzLlwiKTtcbiAgICAgICAgfSBlbHNlIHRoaXMucmVhZFZlcnNpb25zLnNldChlLmtleS50b1N0cmluZygpLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdmVyc2lvbiBvZiB0aGlzIGRvY3VtZW50IHdoZW4gaXQgd2FzIHJlYWQgaW4gdGhpcyB0cmFuc2FjdGlvbixcbiAgICAgKiBhcyBhIHByZWNvbmRpdGlvbiwgb3Igbm8gcHJlY29uZGl0aW9uIGlmIGl0IHdhcyBub3QgcmVhZC5cbiAgICAgKi8gICAgcHJlY29uZGl0aW9uKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMucmVhZFZlcnNpb25zLmdldChlLnRvU3RyaW5nKCkpO1xuICAgICAgICByZXR1cm4gIXRoaXMud3JpdHRlbkRvY3MuaGFzKGUudG9TdHJpbmcoKSkgJiYgdCA/IHQuaXNFcXVhbChTbmFwc2hvdFZlcnNpb24ubWluKCkpID8gUHJlY29uZGl0aW9uLmV4aXN0cyghMSkgOiBQcmVjb25kaXRpb24udXBkYXRlVGltZSh0KSA6IFByZWNvbmRpdGlvbi5ub25lKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHByZWNvbmRpdGlvbiBmb3IgYSBkb2N1bWVudCBpZiB0aGUgb3BlcmF0aW9uIGlzIGFuIHVwZGF0ZS5cbiAgICAgKi8gICAgcHJlY29uZGl0aW9uRm9yVXBkYXRlKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMucmVhZFZlcnNpb25zLmdldChlLnRvU3RyaW5nKCkpO1xuICAgICAgICAvLyBUaGUgZmlyc3QgdGltZSBhIGRvY3VtZW50IGlzIHdyaXR0ZW4sIHdlIHdhbnQgdG8gdGFrZSBpbnRvIGFjY291bnQgdGhlXG4gICAgICAgIC8vIHJlYWQgdGltZSBhbmQgZXhpc3RlbmNlXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLndyaXR0ZW5Eb2NzLmhhcyhlLnRvU3RyaW5nKCkpICYmIHQpIHtcbiAgICAgICAgICAgIGlmICh0LmlzRXF1YWwoU25hcHNob3RWZXJzaW9uLm1pbigpKSkgXG4gICAgICAgICAgICAvLyBUaGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdCwgc28gZmFpbCB0aGUgdHJhbnNhY3Rpb24uXG4gICAgICAgICAgICAvLyBUaGlzIGhhcyB0byBiZSB2YWxpZGF0ZWQgbG9jYWxseSBiZWNhdXNlIHlvdSBjYW4ndCBzZW5kIGFcbiAgICAgICAgICAgIC8vIHByZWNvbmRpdGlvbiB0aGF0IGEgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3Qgd2l0aG91dCBjaGFuZ2luZyB0aGVcbiAgICAgICAgICAgIC8vIHNlbWFudGljcyBvZiB0aGUgYmFja2VuZCB3cml0ZSB0byBiZSBhbiBpbnNlcnQuIFRoaXMgaXMgdGhlIHJldmVyc2VcbiAgICAgICAgICAgIC8vIG9mIHdoYXQgd2Ugd2FudCwgc2luY2Ugd2Ugd2FudCB0byBhc3NlcnQgdGhhdCB0aGUgZG9jdW1lbnQgZG9lc24ndFxuICAgICAgICAgICAgLy8gZXhpc3QgYnV0IHRoZW4gc2VuZCB0aGUgdXBkYXRlIGFuZCBoYXZlIGl0IGZhaWwuIFNpbmNlIHdlIGNhbid0XG4gICAgICAgICAgICAvLyBleHByZXNzIHRoYXQgdG8gdGhlIGJhY2tlbmQsIHdlIGhhdmUgdG8gdmFsaWRhdGUgbG9jYWxseS5cbiAgICAgICAgICAgIC8vIE5vdGU6IHRoaXMgY2FuIGNoYW5nZSBvbmNlIHdlIGNhbiBzZW5kIHNlcGFyYXRlIHZlcmlmeSB3cml0ZXMgaW4gdGhlXG4gICAgICAgICAgICAvLyB0cmFuc2FjdGlvbi5cbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDLklOVkFMSURfQVJHVU1FTlQsIFwiQ2FuJ3QgdXBkYXRlIGEgZG9jdW1lbnQgdGhhdCBkb2Vzbid0IGV4aXN0LlwiKTtcbiAgICAgICAgICAgIC8vIERvY3VtZW50IGV4aXN0cywgYmFzZSBwcmVjb25kaXRpb24gb24gZG9jdW1lbnQgdXBkYXRlIHRpbWUuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJlY29uZGl0aW9uLnVwZGF0ZVRpbWUodCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRG9jdW1lbnQgd2FzIG5vdCByZWFkLCBzbyB3ZSBqdXN0IHVzZSB0aGUgcHJlY29uZGl0aW9ucyBmb3IgYSBibGluZFxuICAgICAgICAvLyB1cGRhdGUuXG4gICAgICAgIHJldHVybiBQcmVjb25kaXRpb24uZXhpc3RzKCEwKTtcbiAgICB9XG4gICAgd3JpdGUoZSkge1xuICAgICAgICB0aGlzLmVuc3VyZUNvbW1pdE5vdENhbGxlZCgpLCB0aGlzLm11dGF0aW9ucy5wdXNoKGUpO1xuICAgIH1cbiAgICBlbnN1cmVDb21taXROb3RDYWxsZWQoKSB7fVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUcmFuc2FjdGlvblJ1bm5lciBlbmNhcHN1bGF0ZXMgdGhlIGxvZ2ljIG5lZWRlZCB0byBydW4gYW5kIHJldHJ5IHRyYW5zYWN0aW9uc1xuICogd2l0aCBiYWNrb2ZmLlxuICovIGNsYXNzIF9fUFJJVkFURV9UcmFuc2FjdGlvblJ1bm5lciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgciwgaSkge1xuICAgICAgICB0aGlzLmFzeW5jUXVldWUgPSBlLCB0aGlzLmRhdGFzdG9yZSA9IHQsIHRoaXMub3B0aW9ucyA9IG4sIHRoaXMudXBkYXRlRnVuY3Rpb24gPSByLCBcbiAgICAgICAgdGhpcy5kZWZlcnJlZCA9IGksIHRoaXMuWmEgPSBuLm1heEF0dGVtcHRzLCB0aGlzLllvID0gbmV3IF9fUFJJVkFURV9FeHBvbmVudGlhbEJhY2tvZmYodGhpcy5hc3luY1F1ZXVlLCBcInRyYW5zYWN0aW9uX3JldHJ5XCIgLyogVGltZXJJZC5UcmFuc2FjdGlvblJldHJ5ICovKTtcbiAgICB9XG4gICAgLyoqIFJ1bnMgdGhlIHRyYW5zYWN0aW9uIGFuZCBzZXRzIHRoZSByZXN1bHQgb24gZGVmZXJyZWQuICovICAgIFhhKCkge1xuICAgICAgICB0aGlzLlphIC09IDEsIHRoaXMuZXUoKTtcbiAgICB9XG4gICAgZXUoKSB7XG4gICAgICAgIHRoaXMuWW8uJG8oKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgVHJhbnNhY3Rpb24kMih0aGlzLmRhdGFzdG9yZSksIHQgPSB0aGlzLnR1KGUpO1xuICAgICAgICAgICAgdCAmJiB0LnRoZW4oKHQgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiBlLmNvbW1pdCgpLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZlcnJlZC5yZXNvbHZlKHQpO1xuICAgICAgICAgICAgICAgIH0pKS5jYXRjaCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubnUoZSk7XG4gICAgICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgICAgICB9KSkuY2F0Y2goKGUgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMubnUoZSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdHUoZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMudXBkYXRlRnVuY3Rpb24oZSk7XG4gICAgICAgICAgICByZXR1cm4gIV9fUFJJVkFURV9pc051bGxPclVuZGVmaW5lZCh0KSAmJiB0LmNhdGNoICYmIHQudGhlbiA/IHQgOiAodGhpcy5kZWZlcnJlZC5yZWplY3QoRXJyb3IoXCJUcmFuc2FjdGlvbiBjYWxsYmFjayBtdXN0IHJldHVybiBhIFByb21pc2VcIikpLCBcbiAgICAgICAgICAgIG51bGwpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBEbyBub3QgcmV0cnkgZXJyb3JzIHRocm93biBieSB1c2VyIHByb3ZpZGVkIHVwZGF0ZUZ1bmN0aW9uLlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVmZXJyZWQucmVqZWN0KGUpLCBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIG51KGUpIHtcbiAgICAgICAgdGhpcy5aYSA+IDAgJiYgdGhpcy5ydShlKSA/ICh0aGlzLlphIC09IDEsIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiAodGhpcy5ldSgpLCBcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkpKSkpIDogdGhpcy5kZWZlcnJlZC5yZWplY3QoZSk7XG4gICAgfVxuICAgIHJ1KGUpIHtcbiAgICAgICAgaWYgKFwiRmlyZWJhc2VFcnJvclwiID09PSBlLm5hbWUpIHtcbiAgICAgICAgICAgIC8vIEluIHRyYW5zYWN0aW9ucywgdGhlIGJhY2tlbmQgd2lsbCBmYWlsIG91dGRhdGVkIHJlYWRzIHdpdGggRkFJTEVEX1BSRUNPTkRJVElPTiBhbmRcbiAgICAgICAgICAgIC8vIG5vbi1tYXRjaGluZyBkb2N1bWVudCB2ZXJzaW9ucyB3aXRoIEFCT1JURUQuIFRoZXNlIGVycm9ycyBzaG91bGQgYmUgcmV0cmllZC5cbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLmNvZGU7XG4gICAgICAgICAgICByZXR1cm4gXCJhYm9ydGVkXCIgPT09IHQgfHwgXCJmYWlsZWQtcHJlY29uZGl0aW9uXCIgPT09IHQgfHwgXCJhbHJlYWR5LWV4aXN0c1wiID09PSB0IHx8ICFfX1BSSVZBVEVfaXNQZXJtYW5lbnRFcnJvcih0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBGaXJlc3RvcmVDbGllbnQgaXMgYSB0b3AtbGV2ZWwgY2xhc3MgdGhhdCBjb25zdHJ1Y3RzIGFuZCBvd25zIGFsbCBvZiB0aGUgLy9cbiAqIHBpZWNlcyBvZiB0aGUgY2xpZW50IFNESyBhcmNoaXRlY3R1cmUuIEl0IGlzIHJlc3BvbnNpYmxlIGZvciBjcmVhdGluZyB0aGUgLy9cbiAqIGFzeW5jIHF1ZXVlIHRoYXQgaXMgc2hhcmVkIGJ5IGFsbCBvZiB0aGUgb3RoZXIgY29tcG9uZW50cyBpbiB0aGUgc3lzdGVtLiAvL1xuICovXG5jbGFzcyBGaXJlc3RvcmVDbGllbnQge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIFxuICAgIC8qKlxuICAgICAqIEFzeW5jaHJvbm91cyBxdWV1ZSByZXNwb25zaWJsZSBmb3IgYWxsIG9mIG91ciBpbnRlcm5hbCBwcm9jZXNzaW5nLiBXaGVuXG4gICAgICogd2UgZ2V0IGluY29taW5nIHdvcmsgZnJvbSB0aGUgdXNlciAodmlhIHB1YmxpYyBBUEkpIG9yIHRoZSBuZXR3b3JrXG4gICAgICogKGluY29taW5nIEdSUEMgbWVzc2FnZXMpLCB3ZSBzaG91bGQgYWx3YXlzIHNjaGVkdWxlIG9udG8gdGhpcyBxdWV1ZS5cbiAgICAgKiBUaGlzIGVuc3VyZXMgYWxsIG9mIG91ciB3b3JrIGlzIHByb3Blcmx5IHNlcmlhbGl6ZWQgKGUuZy4gd2UgZG9uJ3RcbiAgICAgKiBzdGFydCBwcm9jZXNzaW5nIGEgbmV3IG9wZXJhdGlvbiB3aGlsZSB0aGUgcHJldmlvdXMgb25lIGlzIHdhaXRpbmcgZm9yXG4gICAgICogYW4gYXN5bmMgSS9PIHRvIGNvbXBsZXRlKS5cbiAgICAgKi9cbiAgICBuLCByKSB7XG4gICAgICAgIHRoaXMuYXV0aENyZWRlbnRpYWxzID0gZSwgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzID0gdCwgdGhpcy5hc3luY1F1ZXVlID0gbiwgdGhpcy5kYXRhYmFzZUluZm8gPSByLCBcbiAgICAgICAgdGhpcy51c2VyID0gVXNlci5VTkFVVEhFTlRJQ0FURUQsIHRoaXMuY2xpZW50SWQgPSBfX1BSSVZBVEVfQXV0b0lkLm5ld0lkKCksIHRoaXMuYXV0aENyZWRlbnRpYWxMaXN0ZW5lciA9ICgpID0+IFByb21pc2UucmVzb2x2ZSgpLCBcbiAgICAgICAgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxMaXN0ZW5lciA9ICgpID0+IFByb21pc2UucmVzb2x2ZSgpLCB0aGlzLmF1dGhDcmVkZW50aWFscy5zdGFydChuLCAoYXN5bmMgZSA9PiB7XG4gICAgICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJGaXJlc3RvcmVDbGllbnRcIiwgXCJSZWNlaXZlZCB1c2VyPVwiLCBlLnVpZCksIGF3YWl0IHRoaXMuYXV0aENyZWRlbnRpYWxMaXN0ZW5lcihlKSwgXG4gICAgICAgICAgICB0aGlzLnVzZXIgPSBlO1xuICAgICAgICB9KSksIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5zdGFydChuLCAoZSA9PiAoX19QUklWQVRFX2xvZ0RlYnVnKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiUmVjZWl2ZWQgbmV3IGFwcCBjaGVjayB0b2tlbj1cIiwgZSksIFxuICAgICAgICB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbExpc3RlbmVyKGUsIHRoaXMudXNlcikpKSk7XG4gICAgfVxuICAgIGdldCBjb25maWd1cmF0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYXN5bmNRdWV1ZTogdGhpcy5hc3luY1F1ZXVlLFxuICAgICAgICAgICAgZGF0YWJhc2VJbmZvOiB0aGlzLmRhdGFiYXNlSW5mbyxcbiAgICAgICAgICAgIGNsaWVudElkOiB0aGlzLmNsaWVudElkLFxuICAgICAgICAgICAgYXV0aENyZWRlbnRpYWxzOiB0aGlzLmF1dGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgIGFwcENoZWNrQ3JlZGVudGlhbHM6IHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscyxcbiAgICAgICAgICAgIGluaXRpYWxVc2VyOiB0aGlzLnVzZXIsXG4gICAgICAgICAgICBtYXhDb25jdXJyZW50TGltYm9SZXNvbHV0aW9uczogMTAwXG4gICAgICAgIH07XG4gICAgfVxuICAgIHNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lcihlKSB7XG4gICAgICAgIHRoaXMuYXV0aENyZWRlbnRpYWxMaXN0ZW5lciA9IGU7XG4gICAgfVxuICAgIHNldEFwcENoZWNrVG9rZW5DaGFuZ2VMaXN0ZW5lcihlKSB7XG4gICAgICAgIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFsTGlzdGVuZXIgPSBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVja3MgdGhhdCB0aGUgY2xpZW50IGhhcyBub3QgYmVlbiB0ZXJtaW5hdGVkLiBFbnN1cmVzIHRoYXQgb3RoZXIgbWV0aG9kcyBvbiAvL1xuICAgICAqIHRoaXMgY2xhc3MgY2Fubm90IGJlIGNhbGxlZCBhZnRlciB0aGUgY2xpZW50IGlzIHRlcm1pbmF0ZWQuIC8vXG4gICAgICovICAgIHZlcmlmeU5vdFRlcm1pbmF0ZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLmFzeW5jUXVldWUuaXNTaHV0dGluZ0Rvd24pIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiVGhlIGNsaWVudCBoYXMgYWxyZWFkeSBiZWVuIHRlcm1pbmF0ZWQuXCIpO1xuICAgIH1cbiAgICB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZS5lbnRlclJlc3RyaWN0ZWRNb2RlKCk7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgX19QUklWQVRFX0RlZmVycmVkO1xuICAgICAgICByZXR1cm4gdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXRFdmVuV2hpbGVSZXN0cmljdGVkKChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuX29ubGluZUNvbXBvbmVudHMgJiYgYXdhaXQgdGhpcy5fb25saW5lQ29tcG9uZW50cy50ZXJtaW5hdGUoKSwgdGhpcy5fb2ZmbGluZUNvbXBvbmVudHMgJiYgYXdhaXQgdGhpcy5fb2ZmbGluZUNvbXBvbmVudHMudGVybWluYXRlKCksIFxuICAgICAgICAgICAgICAgIC8vIFRoZSBjcmVkZW50aWFscyBwcm92aWRlciBtdXN0IGJlIHRlcm1pbmF0ZWQgYWZ0ZXIgc2h1dHRpbmcgZG93biB0aGVcbiAgICAgICAgICAgICAgICAvLyBSZW1vdGVTdG9yZSBhcyBpdCB3aWxsIHByZXZlbnQgdGhlIFJlbW90ZVN0b3JlIGZyb20gcmV0cmlldmluZyBhdXRoXG4gICAgICAgICAgICAgICAgLy8gdG9rZW5zLlxuICAgICAgICAgICAgICAgIHRoaXMuYXV0aENyZWRlbnRpYWxzLnNodXRkb3duKCksIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5zaHV0ZG93bigpLCBlLnJlc29sdmUoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX3dyYXBJblVzZXJFcnJvcklmUmVjb3ZlcmFibGUodCwgXCJGYWlsZWQgdG8gc2h1dGRvd24gcGVyc2lzdGVuY2VcIik7XG4gICAgICAgICAgICAgICAgZS5yZWplY3Qobik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSwgZS5wcm9taXNlO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3NldE9mZmxpbmVDb21wb25lbnRQcm92aWRlcihlLCB0KSB7XG4gICAgZS5hc3luY1F1ZXVlLnZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MoKSwgX19QUklWQVRFX2xvZ0RlYnVnKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiSW5pdGlhbGl6aW5nIE9mZmxpbmVDb21wb25lbnRQcm92aWRlclwiKTtcbiAgICBjb25zdCBuID0gZS5jb25maWd1cmF0aW9uO1xuICAgIGF3YWl0IHQuaW5pdGlhbGl6ZShuKTtcbiAgICBsZXQgciA9IG4uaW5pdGlhbFVzZXI7XG4gICAgZS5zZXRDcmVkZW50aWFsQ2hhbmdlTGlzdGVuZXIoKGFzeW5jIGUgPT4ge1xuICAgICAgICByLmlzRXF1YWwoZSkgfHwgKGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlSGFuZGxlVXNlckNoYW5nZSh0LmxvY2FsU3RvcmUsIGUpLCByID0gZSk7XG4gICAgfSkpLCBcbiAgICAvLyBXaGVuIGEgdXNlciBjYWxscyBjbGVhclBlcnNpc3RlbmNlKCkgaW4gb25lIGNsaWVudCwgYWxsIG90aGVyIGNsaWVudHNcbiAgICAvLyBuZWVkIHRvIGJlIHRlcm1pbmF0ZWQgdG8gYWxsb3cgdGhlIGRlbGV0ZSB0byBzdWNjZWVkLlxuICAgIHQucGVyc2lzdGVuY2Uuc2V0RGF0YWJhc2VEZWxldGVkTGlzdGVuZXIoKCgpID0+IGUudGVybWluYXRlKCkpKSwgZS5fb2ZmbGluZUNvbXBvbmVudHMgPSB0O1xufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfc2V0T25saW5lQ29tcG9uZW50UHJvdmlkZXIoZSwgdCkge1xuICAgIGUuYXN5bmNRdWV1ZS52ZXJpZnlPcGVyYXRpb25JblByb2dyZXNzKCk7XG4gICAgY29uc3QgbiA9IGF3YWl0IF9fUFJJVkFURV9lbnN1cmVPZmZsaW5lQ29tcG9uZW50cyhlKTtcbiAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJGaXJlc3RvcmVDbGllbnRcIiwgXCJJbml0aWFsaXppbmcgT25saW5lQ29tcG9uZW50UHJvdmlkZXJcIiksIGF3YWl0IHQuaW5pdGlhbGl6ZShuLCBlLmNvbmZpZ3VyYXRpb24pLCBcbiAgICAvLyBUaGUgQ3JlZGVudGlhbENoYW5nZUxpc3RlbmVyIG9mIHRoZSBvbmxpbmUgY29tcG9uZW50IHByb3ZpZGVyIHRha2VzXG4gICAgLy8gcHJlY2VkZW5jZSBvdmVyIHRoZSBvZmZsaW5lIGNvbXBvbmVudCBwcm92aWRlci5cbiAgICBlLnNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lcigoZSA9PiBfX1BSSVZBVEVfcmVtb3RlU3RvcmVIYW5kbGVDcmVkZW50aWFsQ2hhbmdlKHQucmVtb3RlU3RvcmUsIGUpKSksIFxuICAgIGUuc2V0QXBwQ2hlY2tUb2tlbkNoYW5nZUxpc3RlbmVyKCgoZSwgbikgPT4gX19QUklWQVRFX3JlbW90ZVN0b3JlSGFuZGxlQ3JlZGVudGlhbENoYW5nZSh0LnJlbW90ZVN0b3JlLCBuKSkpLCBcbiAgICBlLl9vbmxpbmVDb21wb25lbnRzID0gdDtcbn1cblxuLyoqXG4gKiBEZWNpZGVzIHdoZXRoZXIgdGhlIHByb3ZpZGVkIGVycm9yIGFsbG93cyB1cyB0byBncmFjZWZ1bGx5IGRpc2FibGVcbiAqIHBlcnNpc3RlbmNlIChhcyBvcHBvc2VkIHRvIGNyYXNoaW5nIHRoZSBjbGllbnQpLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9jYW5GYWxsYmFja0Zyb21JbmRleGVkRGJFcnJvcihlKSB7XG4gICAgcmV0dXJuIFwiRmlyZWJhc2VFcnJvclwiID09PSBlLm5hbWUgPyBlLmNvZGUgPT09IEMuRkFJTEVEX1BSRUNPTkRJVElPTiB8fCBlLmNvZGUgPT09IEMuVU5JTVBMRU1FTlRFRCA6ICEoXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgRE9NRXhjZXB0aW9uICYmIGUgaW5zdGFuY2VvZiBET01FeGNlcHRpb24pIHx8IChcbiAgICAvLyBXaGVuIHRoZSBicm93c2VyIGlzIG91dCBvZiBxdW90YSB3ZSBjb3VsZCBnZXQgZWl0aGVyIHF1b3RhIGV4Y2VlZGVkXG4gICAgLy8gb3IgYW4gYWJvcnRlZCBlcnJvciBkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgZXJyb3IgaGFwcGVuZWQgZHVyaW5nXG4gICAgLy8gc2NoZW1hIG1pZ3JhdGlvbi5cbiAgICAyMiA9PT0gZS5jb2RlIHx8IDIwID09PSBlLmNvZGUgfHwgXG4gICAgLy8gRmlyZWZveCBQcml2YXRlIEJyb3dzaW5nIG1vZGUgZGlzYWJsZXMgSW5kZXhlZERiIGFuZCByZXR1cm5zXG4gICAgLy8gSU5WQUxJRF9TVEFURSBmb3IgYW55IHVzYWdlLlxuICAgIDExID09PSBlLmNvZGUpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfZW5zdXJlT2ZmbGluZUNvbXBvbmVudHMoZSkge1xuICAgIGlmICghZS5fb2ZmbGluZUNvbXBvbmVudHMpIGlmIChlLl91bmluaXRpYWxpemVkQ29tcG9uZW50c1Byb3ZpZGVyKSB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkZpcmVzdG9yZUNsaWVudFwiLCBcIlVzaW5nIHVzZXIgcHJvdmlkZWQgT2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyXCIpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgX19QUklWQVRFX3NldE9mZmxpbmVDb21wb25lbnRQcm92aWRlcihlLCBlLl91bmluaXRpYWxpemVkQ29tcG9uZW50c1Byb3ZpZGVyLl9vZmZsaW5lKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQ7XG4gICAgICAgICAgICBpZiAoIV9fUFJJVkFURV9jYW5GYWxsYmFja0Zyb21JbmRleGVkRGJFcnJvcihuKSkgdGhyb3cgbjtcbiAgICAgICAgICAgIF9fUFJJVkFURV9sb2dXYXJuKFwiRXJyb3IgdXNpbmcgdXNlciBwcm92aWRlZCBjYWNoZS4gRmFsbGluZyBiYWNrIHRvIG1lbW9yeSBjYWNoZTogXCIgKyBuKSwgXG4gICAgICAgICAgICBhd2FpdCBfX1BSSVZBVEVfc2V0T2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyKGUsIG5ldyBNZW1vcnlPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkZpcmVzdG9yZUNsaWVudFwiLCBcIlVzaW5nIGRlZmF1bHQgT2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyXCIpLCBcbiAgICBhd2FpdCBfX1BSSVZBVEVfc2V0T2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyKGUsIG5ldyBNZW1vcnlPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIpO1xuICAgIHJldHVybiBlLl9vZmZsaW5lQ29tcG9uZW50cztcbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2Vuc3VyZU9ubGluZUNvbXBvbmVudHMoZSkge1xuICAgIHJldHVybiBlLl9vbmxpbmVDb21wb25lbnRzIHx8IChlLl91bmluaXRpYWxpemVkQ29tcG9uZW50c1Byb3ZpZGVyID8gKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkZpcmVzdG9yZUNsaWVudFwiLCBcIlVzaW5nIHVzZXIgcHJvdmlkZWQgT25saW5lQ29tcG9uZW50UHJvdmlkZXJcIiksIFxuICAgIGF3YWl0IF9fUFJJVkFURV9zZXRPbmxpbmVDb21wb25lbnRQcm92aWRlcihlLCBlLl91bmluaXRpYWxpemVkQ29tcG9uZW50c1Byb3ZpZGVyLl9vbmxpbmUpKSA6IChfX1BSSVZBVEVfbG9nRGVidWcoXCJGaXJlc3RvcmVDbGllbnRcIiwgXCJVc2luZyBkZWZhdWx0IE9ubGluZUNvbXBvbmVudFByb3ZpZGVyXCIpLCBcbiAgICBhd2FpdCBfX1BSSVZBVEVfc2V0T25saW5lQ29tcG9uZW50UHJvdmlkZXIoZSwgbmV3IE9ubGluZUNvbXBvbmVudFByb3ZpZGVyKSkpLCBlLl9vbmxpbmVDb21wb25lbnRzO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZ2V0UGVyc2lzdGVuY2UoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZW5zdXJlT2ZmbGluZUNvbXBvbmVudHMoZSkudGhlbigoZSA9PiBlLnBlcnNpc3RlbmNlKSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9nZXRMb2NhbFN0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2Vuc3VyZU9mZmxpbmVDb21wb25lbnRzKGUpLnRoZW4oKGUgPT4gZS5sb2NhbFN0b3JlKSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9nZXRSZW1vdGVTdG9yZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9lbnN1cmVPbmxpbmVDb21wb25lbnRzKGUpLnRoZW4oKGUgPT4gZS5yZW1vdGVTdG9yZSkpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZ2V0U3luY0VuZ2luZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9lbnN1cmVPbmxpbmVDb21wb25lbnRzKGUpLnRoZW4oKGUgPT4gZS5zeW5jRW5naW5lKSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9nZXREYXRhc3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZW5zdXJlT25saW5lQ29tcG9uZW50cyhlKS50aGVuKChlID0+IGUuZGF0YXN0b3JlKSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9nZXRFdmVudE1hbmFnZXIoZSkge1xuICAgIGNvbnN0IHQgPSBhd2FpdCBfX1BSSVZBVEVfZW5zdXJlT25saW5lQ29tcG9uZW50cyhlKSwgbiA9IHQuZXZlbnRNYW5hZ2VyO1xuICAgIHJldHVybiBuLm9uTGlzdGVuID0gX19QUklWQVRFX3N5bmNFbmdpbmVMaXN0ZW4uYmluZChudWxsLCB0LnN5bmNFbmdpbmUpLCBuLm9uVW5saXN0ZW4gPSBfX1BSSVZBVEVfc3luY0VuZ2luZVVubGlzdGVuLmJpbmQobnVsbCwgdC5zeW5jRW5naW5lKSwgXG4gICAgbi5vbkZpcnN0UmVtb3RlU3RvcmVMaXN0ZW4gPSBfX1BSSVZBVEVfdHJpZ2dlclJlbW90ZVN0b3JlTGlzdGVuLmJpbmQobnVsbCwgdC5zeW5jRW5naW5lKSwgXG4gICAgbi5vbkxhc3RSZW1vdGVTdG9yZVVubGlzdGVuID0gX19QUklWQVRFX3RyaWdnZXJSZW1vdGVTdG9yZVVubGlzdGVuLmJpbmQobnVsbCwgdC5zeW5jRW5naW5lKSwgXG4gICAgbjtcbn1cblxuLyoqIEVuYWJsZXMgdGhlIG5ldHdvcmsgY29ubmVjdGlvbiBhbmQgcmUtZW5xdWV1ZXMgYWxsIHBlbmRpbmcgb3BlcmF0aW9ucy4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEVuYWJsZU5ldHdvcmsoZSkge1xuICAgIHJldHVybiBlLmFzeW5jUXVldWUuZW5xdWV1ZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgX19QUklWQVRFX2dldFBlcnNpc3RlbmNlKGUpLCBuID0gYXdhaXQgX19QUklWQVRFX2dldFJlbW90ZVN0b3JlKGUpO1xuICAgICAgICByZXR1cm4gdC5zZXROZXR3b3JrRW5hYmxlZCghMCksIGZ1bmN0aW9uIF9fUFJJVkFURV9yZW1vdGVTdG9yZUVuYWJsZU5ldHdvcmsoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgICAgICAgICByZXR1cm4gdC5NXy5kZWxldGUoMCAvKiBPZmZsaW5lQ2F1c2UuVXNlckRpc2FibGVkICovKSwgX19QUklWQVRFX2VuYWJsZU5ldHdvcmtJbnRlcm5hbCh0KTtcbiAgICAgICAgfShuKTtcbiAgICB9KSk7XG59XG5cbi8qKiBEaXNhYmxlcyB0aGUgbmV0d29yayBjb25uZWN0aW9uLiBQZW5kaW5nIG9wZXJhdGlvbnMgd2lsbCBub3QgY29tcGxldGUuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnREaXNhYmxlTmV0d29yayhlKSB7XG4gICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlKChhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBfX1BSSVZBVEVfZ2V0UGVyc2lzdGVuY2UoZSksIG4gPSBhd2FpdCBfX1BSSVZBVEVfZ2V0UmVtb3RlU3RvcmUoZSk7XG4gICAgICAgIHJldHVybiB0LnNldE5ldHdvcmtFbmFibGVkKCExKSwgYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3JlbW90ZVN0b3JlRGlzYWJsZU5ldHdvcmsoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgICAgICAgICB0Lk1fLmFkZCgwIC8qIE9mZmxpbmVDYXVzZS5Vc2VyRGlzYWJsZWQgKi8pLCBhd2FpdCBfX1BSSVZBVEVfZGlzYWJsZU5ldHdvcmtJbnRlcm5hbCh0KSwgXG4gICAgICAgICAgICAvLyBTZXQgdGhlIE9ubGluZVN0YXRlIHRvIE9mZmxpbmUgc28gZ2V0KClzIHJldHVybiBmcm9tIGNhY2hlLCBldGMuXG4gICAgICAgICAgICB0Lk5fLnNldChcIk9mZmxpbmVcIiAvKiBPbmxpbmVTdGF0ZS5PZmZsaW5lICovKTtcbiAgICAgICAgfShuKTtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIGFsbCB3cml0ZXMgdGhhdCB3ZXJlIHBlbmRpbmcgYXQgdGhlIHRpbWVcbiAqIHRoaXMgbWV0aG9kIHdhcyBjYWxsZWQgcmVjZWl2ZWQgc2VydmVyIGFja25vd2xlZGdlbWVudC4gQW4gYWNrbm93bGVkZ2VtZW50XG4gKiBjYW4gYmUgZWl0aGVyIGFjY2VwdGFuY2Ugb3IgcmVqZWN0aW9uLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRHZXREb2N1bWVudEZyb21Mb2NhbENhY2hlKGUsIHQpIHtcbiAgICBjb25zdCBuID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZDtcbiAgICByZXR1cm4gZS5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9yZWFkRG9jdW1lbnRGcm9tQ2FjaGUoZSwgdCwgbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgciA9IGF3YWl0IGZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlUmVhZERvY3VtZW50KGUsIHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcInJlYWQgZG9jdW1lbnRcIiwgXCJyZWFkb25seVwiLCAoZSA9PiBuLmxvY2FsRG9jdW1lbnRzLmdldERvY3VtZW50KGUsIHQpKSk7XG4gICAgICAgICAgICB9KGUsIHQpO1xuICAgICAgICAgICAgci5pc0ZvdW5kRG9jdW1lbnQoKSA/IG4ucmVzb2x2ZShyKSA6IHIuaXNOb0RvY3VtZW50KCkgPyBuLnJlc29sdmUobnVsbCkgOiBuLnJlamVjdChuZXcgRmlyZXN0b3JlRXJyb3IoQy5VTkFWQUlMQUJMRSwgXCJGYWlsZWQgdG8gZ2V0IGRvY3VtZW50IGZyb20gY2FjaGUuIChIb3dldmVyLCB0aGlzIGRvY3VtZW50IG1heSBleGlzdCBvbiB0aGUgc2VydmVyLiBSdW4gYWdhaW4gd2l0aG91dCBzZXR0aW5nICdzb3VyY2UnIGluIHRoZSBHZXRPcHRpb25zIHRvIGF0dGVtcHQgdG8gcmV0cmlldmUgdGhlIGRvY3VtZW50IGZyb20gdGhlIHNlcnZlci4pXCIpKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV93cmFwSW5Vc2VyRXJyb3JJZlJlY292ZXJhYmxlKGUsIGBGYWlsZWQgdG8gZ2V0IGRvY3VtZW50ICcke3R9IGZyb20gY2FjaGVgKTtcbiAgICAgICAgICAgIG4ucmVqZWN0KHIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICogUmV0cmlldmVzIGEgbGF0ZW5jeS1jb21wZW5zYXRlZCBkb2N1bWVudCBmcm9tIHRoZSBiYWNrZW5kIHZpYSBhXG4gKiBTbmFwc2hvdExpc3RlbmVyLlxuICovIChhd2FpdCBfX1BSSVZBVEVfZ2V0TG9jYWxTdG9yZShlKSwgdCwgbikpKSwgbi5wcm9taXNlO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50R2V0RG9jdW1lbnRWaWFTbmFwc2hvdExpc3RlbmVyKGUsIHQsIG4gPSB7fSkge1xuICAgIGNvbnN0IHIgPSBuZXcgX19QUklWQVRFX0RlZmVycmVkO1xuICAgIHJldHVybiBlLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gZnVuY3Rpb24gX19QUklWQVRFX3JlYWREb2N1bWVudFZpYVNuYXBzaG90TGlzdGVuZXIoZSwgdCwgbiwgciwgaSkge1xuICAgICAgICBjb25zdCBzID0gbmV3IF9fUFJJVkFURV9Bc3luY09ic2VydmVyKHtcbiAgICAgICAgICAgIG5leHQ6IHMgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBxdWVyeSBmaXJzdCBiZWZvcmUgcGFzc2luZyBldmVudCB0byB1c2VyIHRvIGF2b2lkXG4gICAgICAgICAgICAgICAgLy8gdXNlciBhY3Rpb25zIGFmZmVjdGluZyB0aGUgbm93IHN0YWxlIHF1ZXJ5LlxuICAgICAgICAgICAgICAgIHQuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gX19QUklWQVRFX2V2ZW50TWFuYWdlclVubGlzdGVuKGUsIG8pKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgXyA9IHMuZG9jcy5oYXMobik7XG4gICAgICAgICAgICAgICAgIV8gJiYgcy5mcm9tQ2FjaGUgPyBcbiAgICAgICAgICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IElmIHdlJ3JlIG9ubGluZSBhbmQgdGhlIGRvY3VtZW50IGRvZXNuJ3RcbiAgICAgICAgICAgICAgICAvLyBleGlzdCB0aGVuIHdlIHJlc29sdmUgd2l0aCBhIGRvYy5leGlzdHMgc2V0IHRvIGZhbHNlLiBJZlxuICAgICAgICAgICAgICAgIC8vIHdlJ3JlIG9mZmxpbmUgaG93ZXZlciwgd2UgcmVqZWN0IHRoZSBQcm9taXNlIGluIHRoaXNcbiAgICAgICAgICAgICAgICAvLyBjYXNlLiBUd28gb3B0aW9uczogMSkgQ2FjaGUgdGhlIG5lZ2F0aXZlIHJlc3BvbnNlIGZyb21cbiAgICAgICAgICAgICAgICAvLyB0aGUgc2VydmVyIHNvIHdlIGNhbiBkZWxpdmVyIHRoYXQgZXZlbiB3aGVuIHlvdSdyZVxuICAgICAgICAgICAgICAgIC8vIG9mZmxpbmUgMikgQWN0dWFsbHkgcmVqZWN0IHRoZSBQcm9taXNlIGluIHRoZSBvbmxpbmUgY2FzZVxuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAgICAgICAgICAgIGkucmVqZWN0KG5ldyBGaXJlc3RvcmVFcnJvcihDLlVOQVZBSUxBQkxFLCBcIkZhaWxlZCB0byBnZXQgZG9jdW1lbnQgYmVjYXVzZSB0aGUgY2xpZW50IGlzIG9mZmxpbmUuXCIpKSA6IF8gJiYgcy5mcm9tQ2FjaGUgJiYgciAmJiBcInNlcnZlclwiID09PSByLnNvdXJjZSA/IGkucmVqZWN0KG5ldyBGaXJlc3RvcmVFcnJvcihDLlVOQVZBSUxBQkxFLCAnRmFpbGVkIHRvIGdldCBkb2N1bWVudCBmcm9tIHNlcnZlci4gKEhvd2V2ZXIsIHRoaXMgZG9jdW1lbnQgZG9lcyBleGlzdCBpbiB0aGUgbG9jYWwgY2FjaGUuIFJ1biBhZ2FpbiB3aXRob3V0IHNldHRpbmcgc291cmNlIHRvIFwic2VydmVyXCIgdG8gcmV0cmlldmUgdGhlIGNhY2hlZCBkb2N1bWVudC4pJykpIDogaS5yZXNvbHZlKHMpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBlID0+IGkucmVqZWN0KGUpXG4gICAgICAgIH0pLCBvID0gbmV3IF9fUFJJVkFURV9RdWVyeUxpc3RlbmVyKF9fUFJJVkFURV9uZXdRdWVyeUZvclBhdGgobi5wYXRoKSwgcywge1xuICAgICAgICAgICAgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlczogITAsXG4gICAgICAgICAgICByYTogITBcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyTGlzdGVuKGUsIG8pO1xuICAgIH0oYXdhaXQgX19QUklWQVRFX2dldEV2ZW50TWFuYWdlcihlKSwgZS5hc3luY1F1ZXVlLCB0LCBuLCByKSkpLCByLnByb21pc2U7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRHZXREb2N1bWVudHNGcm9tTG9jYWxDYWNoZShlLCB0KSB7XG4gICAgY29uc3QgbiA9IG5ldyBfX1BSSVZBVEVfRGVmZXJyZWQ7XG4gICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfZXhlY3V0ZVF1ZXJ5RnJvbUNhY2hlKGUsIHQsIG4pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUV4ZWN1dGVRdWVyeShlLCB0LCBcbiAgICAgICAgICAgIC8qIHVzZVByZXZpb3VzUmVzdWx0cz0gKi8gITApLCBpID0gbmV3IF9fUFJJVkFURV9WaWV3KHQsIHIuaHMpLCBzID0gaS5kYShyLmRvY3VtZW50cyksIG8gPSBpLmFwcGx5Q2hhbmdlcyhzLCBcbiAgICAgICAgICAgIC8qIGxpbWJvUmVzb2x1dGlvbkVuYWJsZWQ9ICovICExKTtcbiAgICAgICAgICAgIG4ucmVzb2x2ZShvLnNuYXBzaG90KTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV93cmFwSW5Vc2VyRXJyb3JJZlJlY292ZXJhYmxlKGUsIGBGYWlsZWQgdG8gZXhlY3V0ZSBxdWVyeSAnJHt0fSBhZ2FpbnN0IGNhY2hlYCk7XG4gICAgICAgICAgICBuLnJlamVjdChyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAqIFJldHJpZXZlcyBhIGxhdGVuY3ktY29tcGVuc2F0ZWQgcXVlcnkgc25hcHNob3QgZnJvbSB0aGUgYmFja2VuZCB2aWEgYVxuICogU25hcHNob3RMaXN0ZW5lci5cbiAqLyAoYXdhaXQgX19QUklWQVRFX2dldExvY2FsU3RvcmUoZSksIHQsIG4pKSksIG4ucHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEdldERvY3VtZW50c1ZpYVNuYXBzaG90TGlzdGVuZXIoZSwgdCwgbiA9IHt9KSB7XG4gICAgY29uc3QgciA9IG5ldyBfX1BSSVZBVEVfRGVmZXJyZWQ7XG4gICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfZXhlY3V0ZVF1ZXJ5VmlhU25hcHNob3RMaXN0ZW5lcihlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgX19QUklWQVRFX0FzeW5jT2JzZXJ2ZXIoe1xuICAgICAgICAgICAgbmV4dDogbiA9PiB7XG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHF1ZXJ5IGZpcnN0IGJlZm9yZSBwYXNzaW5nIGV2ZW50IHRvIHVzZXIgdG8gYXZvaWRcbiAgICAgICAgICAgICAgICAvLyB1c2VyIGFjdGlvbnMgYWZmZWN0aW5nIHRoZSBub3cgc3RhbGUgcXVlcnkuXG4gICAgICAgICAgICAgICAgdC5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiBfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyVW5saXN0ZW4oZSwgbykpKSwgbi5mcm9tQ2FjaGUgJiYgXCJzZXJ2ZXJcIiA9PT0gci5zb3VyY2UgPyBpLnJlamVjdChuZXcgRmlyZXN0b3JlRXJyb3IoQy5VTkFWQUlMQUJMRSwgJ0ZhaWxlZCB0byBnZXQgZG9jdW1lbnRzIGZyb20gc2VydmVyLiAoSG93ZXZlciwgdGhlc2UgZG9jdW1lbnRzIG1heSBleGlzdCBpbiB0aGUgbG9jYWwgY2FjaGUuIFJ1biBhZ2FpbiB3aXRob3V0IHNldHRpbmcgc291cmNlIHRvIFwic2VydmVyXCIgdG8gcmV0cmlldmUgdGhlIGNhY2hlZCBkb2N1bWVudHMuKScpKSA6IGkucmVzb2x2ZShuKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZSA9PiBpLnJlamVjdChlKVxuICAgICAgICB9KSwgbyA9IG5ldyBfX1BSSVZBVEVfUXVlcnlMaXN0ZW5lcihuLCBzLCB7XG4gICAgICAgICAgICBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOiAhMCxcbiAgICAgICAgICAgIHJhOiAhMFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9ldmVudE1hbmFnZXJMaXN0ZW4oZSwgbyk7XG4gICAgfShhd2FpdCBfX1BSSVZBVEVfZ2V0RXZlbnRNYW5hZ2VyKGUpLCBlLmFzeW5jUXVldWUsIHQsIG4sIHIpKSksIHIucHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudFJ1bkFnZ3JlZ2F0ZVF1ZXJ5KGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZDtcbiAgICByZXR1cm4gZS5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgLy8gSW1wbGVtZW50IGFuZCBjYWxsIGV4ZWN1dGVBZ2dyZWdhdGVRdWVyeVZpYVNuYXBzaG90TGlzdGVuZXIsIHNpbWlsYXJcbiAgICAgICAgLy8gdG8gdGhlIGltcGxlbWVudGF0aW9uIGluIGZpcmVzdG9yZUNsaWVudEdldERvY3VtZW50c1ZpYVNuYXBzaG90TGlzdGVuZXJcbiAgICAgICAgLy8gYWJvdmVcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFRPRE8oYi8yNzc2MjgzODQpOiBjaGVjayBgY2FuVXNlTmV0d29yaygpYCBhbmQgaGFuZGxlIG11bHRpLXRhYi5cbiAgICAgICAgICAgIGNvbnN0IGkgPSBhd2FpdCBfX1BSSVZBVEVfZ2V0RGF0YXN0b3JlKGUpO1xuICAgICAgICAgICAgci5yZXNvbHZlKGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9pbnZva2VSdW5BZ2dyZWdhdGlvblF1ZXJ5UnBjKGUsIHQsIG4pIHtcbiAgICAgICAgICAgICAgICB2YXIgcjtcbiAgICAgICAgICAgICAgICBjb25zdCBpID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwge3JlcXVlc3Q6IHMsIHV0OiBvLCBwYXJlbnQ6IF99ID0gX19QUklWQVRFX3RvUnVuQWdncmVnYXRpb25RdWVyeVJlcXVlc3QoaS5zZXJpYWxpemVyLCBfX1BSSVZBVEVfcXVlcnlUb0FnZ3JlZ2F0ZVRhcmdldCh0KSwgbik7XG4gICAgICAgICAgICAgICAgaS5jb25uZWN0aW9uLkRvIHx8IGRlbGV0ZSBzLnBhcmVudDtcbiAgICAgICAgICAgICAgICBjb25zdCBhID0gKGF3YWl0IGkueG8oXCJSdW5BZ2dyZWdhdGlvblF1ZXJ5XCIsIGkuc2VyaWFsaXplci5kYXRhYmFzZUlkLCBfLCBzLCBcbiAgICAgICAgICAgICAgICAvKmV4cGVjdGVkUmVzcG9uc2VDb3VudD0qLyAxKSkuZmlsdGVyKChlID0+ICEhZS5yZXN1bHQpKTtcbiAgICAgICAgICAgICAgICAvLyBPbWl0IFJ1bkFnZ3JlZ2F0aW9uUXVlcnlSZXNwb25zZSB0aGF0IG9ubHkgY29udGFpbiByZWFkVGltZXMuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KDEgPT09IGEubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAvLyBSZW1hcCB0aGUgc2hvcnQtZm9ybSBhbGlhc2VzIHRoYXQgd2VyZSBzZW50IHRvIHRoZSBzZXJ2ZXJcbiAgICAgICAgICAgICAgICAvLyB0byB0aGUgY2xpZW50LXNpZGUgYWxpYXNlcy4gVXNlcnMgd2lsbCBhY2Nlc3MgdGhlIHJlc3VsdHNcbiAgICAgICAgICAgICAgICAvLyB1c2luZyB0aGUgY2xpZW50LXNpZGUgYWxpYXMuXG4gICAgICAgICAgICAgICAgY29uc3QgdSA9IG51bGwgPT09IChyID0gYVswXS5yZXN1bHQpIHx8IHZvaWQgMCA9PT0gciA/IHZvaWQgMCA6IHIuYWdncmVnYXRlRmllbGRzO1xuICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh1KS5yZWR1Y2UoKChlLCB0KSA9PiAoZVtvW3RdXSA9IHVbdF0sIGUpKSwge30pO1xuICAgICAgICAgICAgfShpLCB0LCBuKSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHIucmVqZWN0KGUpO1xuICAgICAgICB9XG4gICAgfSkpLCByLnByb21pc2U7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRBZGRTbmFwc2hvdHNJblN5bmNMaXN0ZW5lcihlLCB0KSB7XG4gICAgY29uc3QgbiA9IG5ldyBfX1BSSVZBVEVfQXN5bmNPYnNlcnZlcih0KTtcbiAgICByZXR1cm4gZS5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGZ1bmN0aW9uIF9fUFJJVkFURV9hZGRTbmFwc2hvdHNJblN5bmNMaXN0ZW5lcihlLCB0KSB7XG4gICAgICAgIF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSkuel8uYWRkKHQpLCBcbiAgICAgICAgLy8gSW1tZWRpYXRlbHkgZmlyZSBhbiBpbml0aWFsIGV2ZW50LCBpbmRpY2F0aW5nIGFsbCBleGlzdGluZyBsaXN0ZW5lcnNcbiAgICAgICAgLy8gYXJlIGluLXN5bmMuXG4gICAgICAgIHQubmV4dCgpO1xuICAgIH0oYXdhaXQgX19QUklWQVRFX2dldEV2ZW50TWFuYWdlcihlKSwgbikpKSwgKCkgPT4ge1xuICAgICAgICBuLiRhKCksIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfcmVtb3ZlU25hcHNob3RzSW5TeW5jTGlzdGVuZXIoZSwgdCkge1xuICAgICAgICAgICAgX19QUklWQVRFX2RlYnVnQ2FzdChlKS56Xy5kZWxldGUodCk7XG4gICAgICAgIH0oYXdhaXQgX19QUklWQVRFX2dldEV2ZW50TWFuYWdlcihlKSwgbikpKTtcbiAgICB9O1xufVxuXG4vKipcbiAqIFRha2VzIGFuIHVwZGF0ZUZ1bmN0aW9uIGluIHdoaWNoIGEgc2V0IG9mIHJlYWRzIGFuZCB3cml0ZXMgY2FuIGJlIHBlcmZvcm1lZFxuICogYXRvbWljYWxseS4gSW4gdGhlIHVwZGF0ZUZ1bmN0aW9uLCB0aGUgY2xpZW50IGNhbiByZWFkIGFuZCB3cml0ZSB2YWx1ZXNcbiAqIHVzaW5nIHRoZSBzdXBwbGllZCB0cmFuc2FjdGlvbiBvYmplY3QuIEFmdGVyIHRoZSB1cGRhdGVGdW5jdGlvbiwgYWxsXG4gKiBjaGFuZ2VzIHdpbGwgYmUgY29tbWl0dGVkLiBJZiBhIHJldHJ5YWJsZSBlcnJvciBvY2N1cnMgKGV4OiBzb21lIG90aGVyXG4gKiBjbGllbnQgaGFzIGNoYW5nZWQgYW55IG9mIHRoZSBkYXRhIHJlZmVyZW5jZWQpLCB0aGVuIHRoZSB1cGRhdGVGdW5jdGlvblxuICogd2lsbCBiZSBjYWxsZWQgYWdhaW4gYWZ0ZXIgYSBiYWNrb2ZmLiBJZiB0aGUgdXBkYXRlRnVuY3Rpb24gc3RpbGwgZmFpbHNcbiAqIGFmdGVyIGFsbCByZXRyaWVzLCB0aGVuIHRoZSB0cmFuc2FjdGlvbiB3aWxsIGJlIHJlamVjdGVkLlxuICpcbiAqIFRoZSB0cmFuc2FjdGlvbiBvYmplY3QgcGFzc2VkIHRvIHRoZSB1cGRhdGVGdW5jdGlvbiBjb250YWlucyBtZXRob2RzIGZvclxuICogYWNjZXNzaW5nIGRvY3VtZW50cyBhbmQgY29sbGVjdGlvbnMuIFVubGlrZSBvdGhlciBkYXRhc3RvcmUgYWNjZXNzLCBkYXRhXG4gKiBhY2Nlc3NlZCB3aXRoIHRoZSB0cmFuc2FjdGlvbiB3aWxsIG5vdCByZWZsZWN0IGxvY2FsIGNoYW5nZXMgdGhhdCBoYXZlIG5vdFxuICogYmVlbiBjb21taXR0ZWQuIEZvciB0aGlzIHJlYXNvbiwgaXQgaXMgcmVxdWlyZWQgdGhhdCBhbGwgcmVhZHMgYXJlXG4gKiBwZXJmb3JtZWQgYmVmb3JlIGFueSB3cml0ZXMuIFRyYW5zYWN0aW9ucyBtdXN0IGJlIHBlcmZvcm1lZCB3aGlsZSBvbmxpbmUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudExvYWRCdW5kbGUoZSwgdCwgbiwgcikge1xuICAgIGNvbnN0IGkgPSBmdW5jdGlvbiBfX1BSSVZBVEVfY3JlYXRlQnVuZGxlUmVhZGVyKGUsIHQpIHtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIG4gPSBcInN0cmluZ1wiID09IHR5cGVvZiBlID8gX19QUklWQVRFX25ld1RleHRFbmNvZGVyKCkuZW5jb2RlKGUpIDogZTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdCdW5kbGVSZWFkZXIoZSwgdCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfQnVuZGxlUmVhZGVySW1wbChlLCB0KTtcbiAgICAgICAgfShmdW5jdGlvbiBfX1BSSVZBVEVfdG9CeXRlU3RyZWFtUmVhZGVyKGUsIHQpIHtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgVWludDhBcnJheSkgcmV0dXJuIF9fUFJJVkFURV90b0J5dGVTdHJlYW1SZWFkZXJIZWxwZXIoZSwgdCk7XG4gICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSByZXR1cm4gX19QUklWQVRFX3RvQnl0ZVN0cmVhbVJlYWRlckhlbHBlcihuZXcgVWludDhBcnJheShlKSwgdCk7XG4gICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIFJlYWRhYmxlU3RyZWFtKSByZXR1cm4gZS5nZXRSZWFkZXIoKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNvdXJjZSBvZiBgdG9CeXRlU3RyZWFtUmVhZGVyYCBoYXMgdG8gYmUgYSBBcnJheUJ1ZmZlciBvciBSZWFkYWJsZVN0cmVhbVwiKTtcbiAgICAgICAgfShuKSwgdCk7XG4gICAgfShuLCBfX1BSSVZBVEVfbmV3U2VyaWFsaXplcih0KSk7XG4gICAgZS5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgX19QUklWQVRFX3N5bmNFbmdpbmVMb2FkQnVuZGxlKGF3YWl0IF9fUFJJVkFURV9nZXRTeW5jRW5naW5lKGUpLCBpLCByKTtcbiAgICB9KSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRHZXROYW1lZFF1ZXJ5KGUsIHQpIHtcbiAgICByZXR1cm4gZS5hc3luY1F1ZXVlLmVucXVldWUoKGFzeW5jICgpID0+IGZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlR2V0TmFtZWRRdWVyeShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkdldCBuYW1lZCBxdWVyeVwiLCBcInJlYWRvbmx5XCIsIChlID0+IG4uJHIuZ2V0TmFtZWRRdWVyeShlLCB0KSkpO1xuICAgIH0oYXdhaXQgX19QUklWQVRFX2dldExvY2FsU3RvcmUoZSksIHQpKSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRTZXRJbmRleENvbmZpZ3VyYXRpb24oZSwgdCkge1xuICAgIHJldHVybiBlLmFzeW5jUXVldWUuZW5xdWV1ZSgoYXN5bmMgKCkgPT4gYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVDb25maWd1cmVGaWVsZEluZGV4ZXMoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgciA9IG4uaW5kZXhNYW5hZ2VyLCBpID0gW107XG4gICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQ29uZmlndXJlIGluZGV4ZXNcIiwgXCJyZWFkd3JpdGVcIiwgKGUgPT4gci5nZXRGaWVsZEluZGV4ZXMoZSkubmV4dCgobiA9PiBcbiAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbiAgICAgICAgLyoqXG4gKiBDb21wYXJlcyB0d28gYXJyYXkgZm9yIGVxdWFsaXR5IHVzaW5nIGNvbXBhcmF0b3IuIFRoZSBtZXRob2QgY29tcHV0ZXMgdGhlXG4gKiBpbnRlcnNlY3Rpb24gYW5kIGludm9rZXMgYG9uQWRkYCBmb3IgZXZlcnkgZWxlbWVudCB0aGF0IGlzIGluIGBhZnRlcmAgYnV0IG5vdFxuICogYGJlZm9yZWAuIGBvblJlbW92ZWAgaXMgaW52b2tlZCBmb3IgZXZlcnkgZWxlbWVudCBpbiBgYmVmb3JlYCBidXQgbWlzc2luZ1xuICogZnJvbSBgYWZ0ZXJgLlxuICpcbiAqIFRoZSBtZXRob2QgY3JlYXRlcyBhIGNvcHkgb2YgYm90aCBgYmVmb3JlYCBhbmQgYGFmdGVyYCBhbmQgcnVucyBpbiBPKG4gbG9nXG4gKiBuKSwgd2hlcmUgbiBpcyB0aGUgc2l6ZSBvZiB0aGUgdHdvIGxpc3RzLlxuICpcbiAqIEBwYXJhbSBiZWZvcmUgLSBUaGUgZWxlbWVudHMgdGhhdCBleGlzdCBpbiB0aGUgb3JpZ2luYWwgYXJyYXkuXG4gKiBAcGFyYW0gYWZ0ZXIgLSBUaGUgZWxlbWVudHMgdG8gZGlmZiBhZ2FpbnN0IHRoZSBvcmlnaW5hbCBhcnJheS5cbiAqIEBwYXJhbSBjb21wYXJhdG9yIC0gVGhlIGNvbXBhcmF0b3IgZm9yIHRoZSBlbGVtZW50cyBpbiBiZWZvcmUgYW5kIGFmdGVyLlxuICogQHBhcmFtIG9uQWRkIC0gQSBmdW5jdGlvbiB0byBpbnZva2UgZm9yIGV2ZXJ5IGVsZW1lbnQgdGhhdCBpcyBwYXJ0IG9mIGBcbiAqIGFmdGVyYCBidXQgbm90IGBiZWZvcmVgLlxuICogQHBhcmFtIG9uUmVtb3ZlIC0gQSBmdW5jdGlvbiB0byBpbnZva2UgZm9yIGV2ZXJ5IGVsZW1lbnQgdGhhdCBpcyBwYXJ0IG9mXG4gKiBgYmVmb3JlYCBidXQgbm90IGBhZnRlcmAuXG4gKi9cbiAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX2RpZmZBcnJheXMoZSwgdCwgbiwgciwgaSkge1xuICAgICAgICAgICAgZSA9IFsgLi4uZSBdLCB0ID0gWyAuLi50IF0sIGUuc29ydChuKSwgdC5zb3J0KG4pO1xuICAgICAgICAgICAgY29uc3QgcyA9IGUubGVuZ3RoLCBvID0gdC5sZW5ndGg7XG4gICAgICAgICAgICBsZXQgXyA9IDAsIGEgPSAwO1xuICAgICAgICAgICAgZm9yICg7XyA8IG8gJiYgYSA8IHM7ICkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBuKGVbYV0sIHRbX10pO1xuICAgICAgICAgICAgICAgIHMgPCAwID8gXG4gICAgICAgICAgICAgICAgLy8gVGhlIGVsZW1lbnQgd2FzIHJlbW92ZWQgaWYgdGhlIG5leHQgZWxlbWVudCBpbiBvdXIgb3JkZXJlZFxuICAgICAgICAgICAgICAgIC8vIHdhbGt0aHJvdWdoIGlzIG9ubHkgaW4gYGJlZm9yZWAuXG4gICAgICAgICAgICAgICAgaShlW2ErK10pIDogcyA+IDAgPyBcbiAgICAgICAgICAgICAgICAvLyBUaGUgZWxlbWVudCB3YXMgYWRkZWQgaWYgdGhlIG5leHQgZWxlbWVudCBpbiBvdXIgb3JkZXJlZCB3YWxrdGhyb3VnaFxuICAgICAgICAgICAgICAgIC8vIGlzIG9ubHkgaW4gYGFmdGVyYC5cbiAgICAgICAgICAgICAgICByKHRbXysrXSkgOiAoXysrLCBhKyspO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICg7XyA8IG87ICkgcih0W18rK10pO1xuICAgICAgICAgICAgZm9yICg7YSA8IHM7ICkgaShlW2ErK10pO1xuICAgICAgICB9KG4sIHQsIF9fUFJJVkFURV9maWVsZEluZGV4U2VtYW50aWNDb21wYXJhdG9yLCAodCA9PiB7XG4gICAgICAgICAgICBpLnB1c2goci5hZGRGaWVsZEluZGV4KGUsIHQpKTtcbiAgICAgICAgfSksICh0ID0+IHtcbiAgICAgICAgICAgIGkucHVzaChyLmRlbGV0ZUZpZWxkSW5kZXgoZSwgdCkpO1xuICAgICAgICB9KSkpKS5uZXh0KCgoKSA9PiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihpKSkpKSk7XG4gICAgfShhd2FpdCBfX1BSSVZBVEVfZ2V0TG9jYWxTdG9yZShlKSwgdCkpKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudFNldFBlcnNpc3RlbnRDYWNoZUluZGV4QXV0b0NyZWF0aW9uRW5hYmxlZChlLCB0KSB7XG4gICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlKChhc3luYyAoKSA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZVNldEluZGV4QXV0b0NyZWF0aW9uRW5hYmxlZChlLCB0KSB7XG4gICAgICAgIF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSkudHMuVWkgPSB0O1xuICAgIH0oYXdhaXQgX19QUklWQVRFX2dldExvY2FsU3RvcmUoZSksIHQpKSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnREZWxldGVBbGxGaWVsZEluZGV4ZXMoZSkge1xuICAgIHJldHVybiBlLmFzeW5jUXVldWUuZW5xdWV1ZSgoYXN5bmMgKCkgPT4gZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVEZWxldGVBbGxGaWVsZEluZGV4ZXMoZSkge1xuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgbiA9IHQuaW5kZXhNYW5hZ2VyO1xuICAgICAgICByZXR1cm4gdC5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkRlbGV0ZSBBbGwgSW5kZXhlc1wiLCBcInJlYWR3cml0ZVwiLCAoZSA9PiBuLmRlbGV0ZUFsbEZpZWxkSW5kZXhlcyhlKSkpO1xuICAgIH1cbiAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgIC8vIFRoZSBmb3JtYXQgb2YgdGhlIExvY2FsU3RvcmFnZSBrZXkgdGhhdCBzdG9yZXMgdGhlIGNsaWVudCBzdGF0ZSBpczpcbiAgICAvLyAgICAgZmlyZXN0b3JlX2NsaWVudHNfPHBlcnNpc3RlbmNlX3ByZWZpeD5fPGluc3RhbmNlX2tleT5cbiAgICAoYXdhaXQgX19QUklWQVRFX2dldExvY2FsU3RvcmUoZSkpKSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIENvbXBhcmVzIHR3byBgRXhwZXJpbWVudGFsTG9uZ1BvbGxpbmdPcHRpb25zYCBvYmplY3RzIGZvciBlcXVhbGl0eS5cbiAqL1xuLyoqXG4gKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgbmV3IGBFeHBlcmltZW50YWxMb25nUG9sbGluZ09wdGlvbnNgIHdpdGggdGhlIHNhbWVcbiAqIG9wdGlvbiB2YWx1ZXMgYXMgdGhlIGdpdmVuIGluc3RhbmNlLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfY2xvbmVMb25nUG9sbGluZ09wdGlvbnMoZSkge1xuICAgIGNvbnN0IHQgPSB7fTtcbiAgICByZXR1cm4gdm9pZCAwICE9PSBlLnRpbWVvdXRTZWNvbmRzICYmICh0LnRpbWVvdXRTZWNvbmRzID0gZS50aW1lb3V0U2Vjb25kcyksIHQ7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IHllID0gbmV3IE1hcDtcblxuLyoqXG4gKiBBbiBpbnN0YW5jZSBtYXAgdGhhdCBlbnN1cmVzIG9ubHkgb25lIERhdGFzdG9yZSBleGlzdHMgcGVyIEZpcmVzdG9yZVxuICogaW5zdGFuY2UuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVOb25FbXB0eUFyZ3VtZW50KGUsIHQsIG4pIHtcbiAgICBpZiAoIW4pIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDLklOVkFMSURfQVJHVU1FTlQsIGBGdW5jdGlvbiAke2V9KCkgY2Fubm90IGJlIGNhbGxlZCB3aXRoIGFuIGVtcHR5ICR7dH0uYCk7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgdHdvIGJvb2xlYW4gb3B0aW9ucyBhcmUgbm90IHNldCBhdCB0aGUgc2FtZSB0aW1lLlxuICogQGludGVybmFsXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3ZhbGlkYXRlSXNOb3RVc2VkVG9nZXRoZXIoZSwgdCwgbiwgcikge1xuICAgIGlmICghMCA9PT0gdCAmJiAhMCA9PT0gcikgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEMuSU5WQUxJRF9BUkdVTUVOVCwgYCR7ZX0gYW5kICR7bn0gY2Fubm90IGJlIHVzZWQgdG9nZXRoZXIuYCk7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgYHBhdGhgIHJlZmVycyB0byBhIGRvY3VtZW50IChpbmRpY2F0ZWQgYnkgdGhlIGZhY3QgaXQgY29udGFpbnNcbiAqIGFuIGV2ZW4gbnVtYmVycyBvZiBzZWdtZW50cykuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3ZhbGlkYXRlRG9jdW1lbnRQYXRoKGUpIHtcbiAgICBpZiAoIURvY3VtZW50S2V5LmlzRG9jdW1lbnRLZXkoZSkpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIGRvY3VtZW50IHJlZmVyZW5jZS4gRG9jdW1lbnQgcmVmZXJlbmNlcyBtdXN0IGhhdmUgYW4gZXZlbiBudW1iZXIgb2Ygc2VnbWVudHMsIGJ1dCAke2V9IGhhcyAke2UubGVuZ3RofS5gKTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhhdCBgcGF0aGAgcmVmZXJzIHRvIGEgY29sbGVjdGlvbiAoaW5kaWNhdGVkIGJ5IHRoZSBmYWN0IGl0XG4gKiBjb250YWlucyBhbiBvZGQgbnVtYmVycyBvZiBzZWdtZW50cykuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3ZhbGlkYXRlQ29sbGVjdGlvblBhdGgoZSkge1xuICAgIGlmIChEb2N1bWVudEtleS5pc0RvY3VtZW50S2V5KGUpKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBjb2xsZWN0aW9uIHJlZmVyZW5jZS4gQ29sbGVjdGlvbiByZWZlcmVuY2VzIG11c3QgaGF2ZSBhbiBvZGQgbnVtYmVyIG9mIHNlZ21lbnRzLCBidXQgJHtlfSBoYXMgJHtlLmxlbmd0aH0uYCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIGl0J3MgYSBub24tbnVsbCBvYmplY3Qgd2l0aG91dCBhIGN1c3RvbSBwcm90b3R5cGVcbiAqIChpLmUuIGV4Y2x1ZGVzIEFycmF5LCBEYXRlLCBldGMuKS5cbiAqL1xuLyoqIFJldHVybnMgYSBzdHJpbmcgZGVzY3JpYmluZyB0aGUgdHlwZSAvIHZhbHVlIG9mIHRoZSBwcm92aWRlZCBpbnB1dC4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV92YWx1ZURlc2NyaXB0aW9uKGUpIHtcbiAgICBpZiAodm9pZCAwID09PSBlKSByZXR1cm4gXCJ1bmRlZmluZWRcIjtcbiAgICBpZiAobnVsbCA9PT0gZSkgcmV0dXJuIFwibnVsbFwiO1xuICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiBlKSByZXR1cm4gZS5sZW5ndGggPiAyMCAmJiAoZSA9IGAke2Uuc3Vic3RyaW5nKDAsIDIwKX0uLi5gKSwgXG4gICAgSlNPTi5zdHJpbmdpZnkoZSk7XG4gICAgaWYgKFwibnVtYmVyXCIgPT0gdHlwZW9mIGUgfHwgXCJib29sZWFuXCIgPT0gdHlwZW9mIGUpIHJldHVybiBcIlwiICsgZTtcbiAgICBpZiAoXCJvYmplY3RcIiA9PSB0eXBlb2YgZSkge1xuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEFycmF5KSByZXR1cm4gXCJhbiBhcnJheVwiO1xuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCB0ID0gXG4gICAgICAgICAgICAvKiogdHJ5IHRvIGdldCB0aGUgY29uc3RydWN0b3IgbmFtZSBmb3IgYW4gb2JqZWN0LiAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX3RyeUdldEN1c3RvbU9iamVjdFR5cGUoZSkge1xuICAgICAgICAgICAgICAgIGlmIChlLmNvbnN0cnVjdG9yKSByZXR1cm4gZS5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBDYXN0cyBgb2JqYCB0byBgVGAsIG9wdGlvbmFsbHkgdW53cmFwcGluZyBDb21wYXQgdHlwZXMgdG8gZXhwb3NlIHRoZVxuICogdW5kZXJseWluZyBpbnN0YW5jZS4gVGhyb3dzIGlmICBgb2JqYCBpcyBub3QgYW4gaW5zdGFuY2Ugb2YgYFRgLlxuICpcbiAqIFRoaXMgY2FzdCBpcyB1c2VkIGluIHRoZSBMaXRlIGFuZCBGdWxsIFNESyB0byB2ZXJpZnkgaW5zdGFuY2UgdHlwZXMgZm9yXG4gKiBhcmd1bWVudHMgcGFzc2VkIHRvIHRoZSBwdWJsaWMgQVBJLlxuICogQGludGVybmFsXG4gKi8gKGUpO1xuICAgICAgICAgICAgcmV0dXJuIHQgPyBgYSBjdXN0b20gJHt0fSBvYmplY3RgIDogXCJhbiBvYmplY3RcIjtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gXCJmdW5jdGlvblwiID09IHR5cGVvZiBlID8gXCJhIGZ1bmN0aW9uXCIgOiBmYWlsKCk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jYXN0KGUsIFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbnQpIHtcbiAgICBpZiAoXCJfZGVsZWdhdGVcIiBpbiBlICYmIChcbiAgICAvLyBVbndyYXAgQ29tcGF0IHR5cGVzXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBlID0gZS5fZGVsZWdhdGUpLCAhKGUgaW5zdGFuY2VvZiB0KSkge1xuICAgICAgICBpZiAodC5uYW1lID09PSBlLmNvbnN0cnVjdG9yLm5hbWUpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDLklOVkFMSURfQVJHVU1FTlQsIFwiVHlwZSBkb2VzIG5vdCBtYXRjaCB0aGUgZXhwZWN0ZWQgaW5zdGFuY2UuIERpZCB5b3UgcGFzcyBhIHJlZmVyZW5jZSBmcm9tIGEgZGlmZmVyZW50IEZpcmVzdG9yZSBTREs/XCIpO1xuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX3ZhbHVlRGVzY3JpcHRpb24oZSk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQy5JTlZBTElEX0FSR1VNRU5ULCBgRXhwZWN0ZWQgdHlwZSAnJHt0Lm5hbWV9JywgYnV0IGl0IHdhczogJHtufWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBlO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVQb3NpdGl2ZU51bWJlcihlLCB0KSB7XG4gICAgaWYgKHQgPD0gMCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEMuSU5WQUxJRF9BUkdVTUVOVCwgYEZ1bmN0aW9uICR7ZX0oKSByZXF1aXJlcyBhIHBvc2l0aXZlIG51bWJlciwgYnV0IGl0IHdhczogJHt0fS5gKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIHNldHRpbmdzKCkgZGVmYXVsdHM6XG4vKipcbiAqIEEgY29uY3JldGUgdHlwZSBkZXNjcmliaW5nIGFsbCB0aGUgdmFsdWVzIHRoYXQgY2FuIGJlIGFwcGxpZWQgdmlhIGFcbiAqIHVzZXItc3VwcGxpZWQgYEZpcmVzdG9yZVNldHRpbmdzYCBvYmplY3QuIFRoaXMgaXMgYSBzZXBhcmF0ZSB0eXBlIHNvIHRoYXRcbiAqIGRlZmF1bHRzIGNhbiBiZSBzdXBwbGllZCBhbmQgdGhlIHZhbHVlIGNhbiBiZSBjaGVja2VkIGZvciBlcXVhbGl0eS5cbiAqL1xuY2xhc3MgRmlyZXN0b3JlU2V0dGluZ3NJbXBsIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHZhciB0LCBuO1xuICAgICAgICBpZiAodm9pZCAwID09PSBlLmhvc3QpIHtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IGUuc3NsKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQy5JTlZBTElEX0FSR1VNRU5ULCBcIkNhbid0IHByb3ZpZGUgc3NsIG9wdGlvbiBpZiBob3N0IG9wdGlvbiBpcyBub3Qgc2V0XCIpO1xuICAgICAgICAgICAgdGhpcy5ob3N0ID0gXCJmaXJlc3RvcmUuZ29vZ2xlYXBpcy5jb21cIiwgdGhpcy5zc2wgPSB0cnVlO1xuICAgICAgICB9IGVsc2UgdGhpcy5ob3N0ID0gZS5ob3N0LCB0aGlzLnNzbCA9IG51bGwgPT09ICh0ID0gZS5zc2wpIHx8IHZvaWQgMCA9PT0gdCB8fCB0O1xuICAgICAgICBpZiAodGhpcy5jcmVkZW50aWFscyA9IGUuY3JlZGVudGlhbHMsIHRoaXMuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyA9ICEhZS5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzLCBcbiAgICAgICAgdGhpcy5sb2NhbENhY2hlID0gZS5sb2NhbENhY2hlLCB2b2lkIDAgPT09IGUuY2FjaGVTaXplQnl0ZXMpIHRoaXMuY2FjaGVTaXplQnl0ZXMgPSA0MTk0MzA0MDsgZWxzZSB7XG4gICAgICAgICAgICBpZiAoLTEgIT09IGUuY2FjaGVTaXplQnl0ZXMgJiYgZS5jYWNoZVNpemVCeXRlcyA8IDEwNDg1NzYpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDLklOVkFMSURfQVJHVU1FTlQsIFwiY2FjaGVTaXplQnl0ZXMgbXVzdCBiZSBhdCBsZWFzdCAxMDQ4NTc2XCIpO1xuICAgICAgICAgICAgdGhpcy5jYWNoZVNpemVCeXRlcyA9IGUuY2FjaGVTaXplQnl0ZXM7XG4gICAgICAgIH1cbiAgICAgICAgX19QUklWQVRFX3ZhbGlkYXRlSXNOb3RVc2VkVG9nZXRoZXIoXCJleHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nXCIsIGUuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZywgXCJleHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmdcIiwgZS5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcpLCBcbiAgICAgICAgdGhpcy5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nID0gISFlLmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcsIHRoaXMuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyA/IHRoaXMuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nID0gITEgOiB2b2lkIDAgPT09IGUuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nID8gdGhpcy5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgPSB0cnVlIDogXG4gICAgICAgIC8vIEZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSwgY29lcmNlIHRoZSB2YWx1ZSB0byBib29sZWFuIGV2ZW4gdGhvdWdoXG4gICAgICAgIC8vIHRoZSBUeXBlU2NyaXB0IGNvbXBpbGVyIGhhcyBuYXJyb3dlZCB0aGUgdHlwZSB0byBib29sZWFuIGFscmVhZHkuXG4gICAgICAgIC8vIG5vaW5zcGVjdGlvbiBQb2ludGxlc3NCb29sZWFuRXhwcmVzc2lvbkpTXG4gICAgICAgIHRoaXMuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nID0gISFlLmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZywgXG4gICAgICAgIHRoaXMuZXhwZXJpbWVudGFsTG9uZ1BvbGxpbmdPcHRpb25zID0gX19QUklWQVRFX2Nsb25lTG9uZ1BvbGxpbmdPcHRpb25zKG51bGwgIT09IChuID0gZS5leHBlcmltZW50YWxMb25nUG9sbGluZ09wdGlvbnMpICYmIHZvaWQgMCAhPT0gbiA/IG4gOiB7fSksIFxuICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVMb25nUG9sbGluZ09wdGlvbnMoZSkge1xuICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gZS50aW1lb3V0U2Vjb25kcykge1xuICAgICAgICAgICAgICAgIGlmIChpc05hTihlLnRpbWVvdXRTZWNvbmRzKSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEMuSU5WQUxJRF9BUkdVTUVOVCwgYGludmFsaWQgbG9uZyBwb2xsaW5nIHRpbWVvdXQ6ICR7ZS50aW1lb3V0U2Vjb25kc30gKG11c3Qgbm90IGJlIE5hTilgKTtcbiAgICAgICAgICAgICAgICBpZiAoZS50aW1lb3V0U2Vjb25kcyA8IDUpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDLklOVkFMSURfQVJHVU1FTlQsIGBpbnZhbGlkIGxvbmcgcG9sbGluZyB0aW1lb3V0OiAke2UudGltZW91dFNlY29uZHN9IChtaW5pbXVtIGFsbG93ZWQgdmFsdWUgaXMgNSlgKTtcbiAgICAgICAgICAgICAgICBpZiAoZS50aW1lb3V0U2Vjb25kcyA+IDMwKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQy5JTlZBTElEX0FSR1VNRU5ULCBgaW52YWxpZCBsb25nIHBvbGxpbmcgdGltZW91dDogJHtlLnRpbWVvdXRTZWNvbmRzfSAobWF4aW11bSBhbGxvd2VkIHZhbHVlIGlzIDMwKWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgICAgIC8qKlxuICogVGhlIENsb3VkIEZpcmVzdG9yZSBzZXJ2aWNlIGludGVyZmFjZS5cbiAqXG4gKiBEbyBub3QgY2FsbCB0aGlzIGNvbnN0cnVjdG9yIGRpcmVjdGx5LiBJbnN0ZWFkLCB1c2Uge0BsaW5rIChnZXRGaXJlc3RvcmU6MSl9LlxuICovICh0aGlzLmV4cGVyaW1lbnRhbExvbmdQb2xsaW5nT3B0aW9ucyksIHRoaXMudXNlRmV0Y2hTdHJlYW1zID0gISFlLnVzZUZldGNoU3RyZWFtcztcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhvc3QgPT09IGUuaG9zdCAmJiB0aGlzLnNzbCA9PT0gZS5zc2wgJiYgdGhpcy5jcmVkZW50aWFscyA9PT0gZS5jcmVkZW50aWFscyAmJiB0aGlzLmNhY2hlU2l6ZUJ5dGVzID09PSBlLmNhY2hlU2l6ZUJ5dGVzICYmIHRoaXMuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyA9PT0gZS5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nICYmIHRoaXMuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nID09PSBlLmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyAmJiBmdW5jdGlvbiBfX1BSSVZBVEVfbG9uZ1BvbGxpbmdPcHRpb25zRXF1YWwoZSwgdCkge1xuICAgICAgICAgICAgcmV0dXJuIGUudGltZW91dFNlY29uZHMgPT09IHQudGltZW91dFNlY29uZHM7XG4gICAgICAgIH0odGhpcy5leHBlcmltZW50YWxMb25nUG9sbGluZ09wdGlvbnMsIGUuZXhwZXJpbWVudGFsTG9uZ1BvbGxpbmdPcHRpb25zKSAmJiB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgPT09IGUuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyAmJiB0aGlzLnVzZUZldGNoU3RyZWFtcyA9PT0gZS51c2VGZXRjaFN0cmVhbXM7XG4gICAgfVxufVxuXG5jbGFzcyBGaXJlc3RvcmUkMSB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByKSB7XG4gICAgICAgIHRoaXMuX2F1dGhDcmVkZW50aWFscyA9IGUsIHRoaXMuX2FwcENoZWNrQ3JlZGVudGlhbHMgPSB0LCB0aGlzLl9kYXRhYmFzZUlkID0gbiwgXG4gICAgICAgIHRoaXMuX2FwcCA9IHIsIFxuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciBpdCdzIGEgRmlyZXN0b3JlIG9yIEZpcmVzdG9yZSBMaXRlIGluc3RhbmNlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJmaXJlc3RvcmUtbGl0ZVwiLCB0aGlzLl9wZXJzaXN0ZW5jZUtleSA9IFwiKGxpdGUpXCIsIHRoaXMuX3NldHRpbmdzID0gbmV3IEZpcmVzdG9yZVNldHRpbmdzSW1wbCh7fSksIFxuICAgICAgICB0aGlzLl9zZXR0aW5nc0Zyb3plbiA9ICExO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IGFzc29jaWF0ZWQgd2l0aCB0aGlzIGBGaXJlc3RvcmVgIHNlcnZpY2VcbiAgICAgKiBpbnN0YW5jZS5cbiAgICAgKi8gICAgZ2V0IGFwcCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9hcHApIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiRmlyZXN0b3JlIHdhcyBub3QgaW5pdGlhbGl6ZWQgdXNpbmcgdGhlIEZpcmViYXNlIFNESy4gJ2FwcCcgaXMgbm90IGF2YWlsYWJsZVwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FwcDtcbiAgICB9XG4gICAgZ2V0IF9pbml0aWFsaXplZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzRnJvemVuO1xuICAgIH1cbiAgICBnZXQgX3Rlcm1pbmF0ZWQoKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IHRoaXMuX3Rlcm1pbmF0ZVRhc2s7XG4gICAgfVxuICAgIF9zZXRTZXR0aW5ncyhlKSB7XG4gICAgICAgIGlmICh0aGlzLl9zZXR0aW5nc0Zyb3plbikgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEMuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJGaXJlc3RvcmUgaGFzIGFscmVhZHkgYmVlbiBzdGFydGVkIGFuZCBpdHMgc2V0dGluZ3MgY2FuIG5vIGxvbmdlciBiZSBjaGFuZ2VkLiBZb3UgY2FuIG9ubHkgbW9kaWZ5IHNldHRpbmdzIGJlZm9yZSBjYWxsaW5nIGFueSBvdGhlciBtZXRob2RzIG9uIGEgRmlyZXN0b3JlIG9iamVjdC5cIik7XG4gICAgICAgIHRoaXMuX3NldHRpbmdzID0gbmV3IEZpcmVzdG9yZVNldHRpbmdzSW1wbChlKSwgdm9pZCAwICE9PSBlLmNyZWRlbnRpYWxzICYmICh0aGlzLl9hdXRoQ3JlZGVudGlhbHMgPSBmdW5jdGlvbiBfX1BSSVZBVEVfbWFrZUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyKGUpIHtcbiAgICAgICAgICAgIGlmICghZSkgcmV0dXJuIG5ldyBfX1BSSVZBVEVfRW1wdHlBdXRoQ3JlZGVudGlhbHNQcm92aWRlcjtcbiAgICAgICAgICAgIHN3aXRjaCAoZS50eXBlKSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJmaXJzdFBhcnR5XCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfRmlyc3RQYXJ0eUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyKGUuc2Vzc2lvbkluZGV4IHx8IFwiMFwiLCBlLmlhbVRva2VuIHx8IG51bGwsIGUuYXV0aFRva2VuRmFjdG9yeSB8fCBudWxsKTtcblxuICAgICAgICAgICAgICBjYXNlIFwicHJvdmlkZXJcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gZS5jbGllbnQ7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQy5JTlZBTElEX0FSR1VNRU5ULCBcIm1ha2VBdXRoQ3JlZGVudGlhbHNQcm92aWRlciBmYWlsZWQgZHVlIHRvIGludmFsaWQgY3JlZGVudGlhbCB0eXBlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KGUuY3JlZGVudGlhbHMpKTtcbiAgICB9XG4gICAgX2dldFNldHRpbmdzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2V0dGluZ3M7XG4gICAgfVxuICAgIF9mcmVlemVTZXR0aW5ncygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzRnJvemVuID0gITAsIHRoaXMuX3NldHRpbmdzO1xuICAgIH1cbiAgICBfZGVsZXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGVybWluYXRlVGFzayB8fCAodGhpcy5fdGVybWluYXRlVGFzayA9IHRoaXMuX3Rlcm1pbmF0ZSgpKSwgdGhpcy5fdGVybWluYXRlVGFzaztcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSBKU09OLXNlcmlhbGl6YWJsZSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIGBGaXJlc3RvcmVgIGluc3RhbmNlLiAqLyAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhcHA6IHRoaXMuX2FwcCxcbiAgICAgICAgICAgIGRhdGFiYXNlSWQ6IHRoaXMuX2RhdGFiYXNlSWQsXG4gICAgICAgICAgICBzZXR0aW5nczogdGhpcy5fc2V0dGluZ3NcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGVybWluYXRlcyBhbGwgY29tcG9uZW50cyB1c2VkIGJ5IHRoaXMgY2xpZW50LiBTdWJjbGFzc2VzIGNhbiBvdmVycmlkZVxuICAgICAqIHRoaXMgbWV0aG9kIHRvIGNsZWFuIHVwIHRoZWlyIG93biBkZXBlbmRlbmNpZXMsIGJ1dCBtdXN0IGFsc28gY2FsbCB0aGlzXG4gICAgICogbWV0aG9kLlxuICAgICAqXG4gICAgICogT25seSBldmVyIGNhbGxlZCBvbmNlLlxuICAgICAqLyAgICBfdGVybWluYXRlKCkge1xuICAgICAgICAvKipcbiAqIFJlbW92ZXMgYWxsIGNvbXBvbmVudHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBwcm92aWRlZCBpbnN0YW5jZS4gTXVzdCBiZSBjYWxsZWRcbiAqIHdoZW4gdGhlIGBGaXJlc3RvcmVgIGluc3RhbmNlIGlzIHRlcm1pbmF0ZWQuXG4gKi9cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9yZW1vdmVDb21wb25lbnRzKGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB5ZS5nZXQoZSk7XG4gICAgICAgICAgICB0ICYmIChfX1BSSVZBVEVfbG9nRGVidWcoXCJDb21wb25lbnRQcm92aWRlclwiLCBcIlJlbW92aW5nIERhdGFzdG9yZVwiKSwgeWUuZGVsZXRlKGUpLCBcbiAgICAgICAgICAgIHQudGVybWluYXRlKCkpO1xuICAgICAgICB9KHRoaXMpLCBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG59XG5cbi8qKlxuICogTW9kaWZ5IHRoaXMgaW5zdGFuY2UgdG8gY29tbXVuaWNhdGUgd2l0aCB0aGUgQ2xvdWQgRmlyZXN0b3JlIGVtdWxhdG9yLlxuICpcbiAqIE5vdGU6IFRoaXMgbXVzdCBiZSBjYWxsZWQgYmVmb3JlIHRoaXMgaW5zdGFuY2UgaGFzIGJlZW4gdXNlZCB0byBkbyBhbnlcbiAqIG9wZXJhdGlvbnMuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIFRoZSBgRmlyZXN0b3JlYCBpbnN0YW5jZSB0byBjb25maWd1cmUgdG8gY29ubmVjdCB0byB0aGVcbiAqIGVtdWxhdG9yLlxuICogQHBhcmFtIGhvc3QgLSB0aGUgZW11bGF0b3IgaG9zdCAoZXg6IGxvY2FsaG9zdCkuXG4gKiBAcGFyYW0gcG9ydCAtIHRoZSBlbXVsYXRvciBwb3J0IChleDogOTAwMCkuXG4gKiBAcGFyYW0gb3B0aW9ucy5tb2NrVXNlclRva2VuIC0gdGhlIG1vY2sgYXV0aCB0b2tlbiB0byB1c2UgZm9yIHVuaXQgdGVzdGluZ1xuICogU2VjdXJpdHkgUnVsZXMuXG4gKi8gZnVuY3Rpb24gY29ubmVjdEZpcmVzdG9yZUVtdWxhdG9yKGUsIHQsIG4sIHIgPSB7fSkge1xuICAgIHZhciBpO1xuICAgIGNvbnN0IHMgPSAoZSA9IF9fUFJJVkFURV9jYXN0KGUsIEZpcmVzdG9yZSQxKSkuX2dldFNldHRpbmdzKCksIG8gPSBgJHt0fToke259YDtcbiAgICBpZiAoXCJmaXJlc3RvcmUuZ29vZ2xlYXBpcy5jb21cIiAhPT0gcy5ob3N0ICYmIHMuaG9zdCAhPT0gbyAmJiBfX1BSSVZBVEVfbG9nV2FybihcIkhvc3QgaGFzIGJlZW4gc2V0IGluIGJvdGggc2V0dGluZ3MoKSBhbmQgY29ubmVjdEZpcmVzdG9yZUVtdWxhdG9yKCksIGVtdWxhdG9yIGhvc3Qgd2lsbCBiZSB1c2VkLlwiKSwgXG4gICAgZS5fc2V0U2V0dGluZ3MoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBzKSwge1xuICAgICAgICBob3N0OiBvLFxuICAgICAgICBzc2w6ICExXG4gICAgfSkpLCByLm1vY2tVc2VyVG9rZW4pIHtcbiAgICAgICAgbGV0IHQsIG47XG4gICAgICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiByLm1vY2tVc2VyVG9rZW4pIHQgPSByLm1vY2tVc2VyVG9rZW4sIG4gPSBVc2VyLk1PQ0tfVVNFUjsgZWxzZSB7XG4gICAgICAgICAgICAvLyBMZXQgY3JlYXRlTW9ja1VzZXJUb2tlbiB2YWxpZGF0ZSBmaXJzdCAoY2F0Y2hlcyBjb21tb24gbWlzdGFrZXMgbGlrZVxuICAgICAgICAgICAgLy8gaW52YWxpZCBmaWVsZCBcInVpZFwiIGFuZCBtaXNzaW5nIGZpZWxkIFwic3ViXCIgLyBcInVzZXJfaWRcIi4pXG4gICAgICAgICAgICB0ID0gY3JlYXRlTW9ja1VzZXJUb2tlbihyLm1vY2tVc2VyVG9rZW4sIG51bGwgPT09IChpID0gZS5fYXBwKSB8fCB2b2lkIDAgPT09IGkgPyB2b2lkIDAgOiBpLm9wdGlvbnMucHJvamVjdElkKTtcbiAgICAgICAgICAgIGNvbnN0IHMgPSByLm1vY2tVc2VyVG9rZW4uc3ViIHx8IHIubW9ja1VzZXJUb2tlbi51c2VyX2lkO1xuICAgICAgICAgICAgaWYgKCFzKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQy5JTlZBTElEX0FSR1VNRU5ULCBcIm1vY2tVc2VyVG9rZW4gbXVzdCBjb250YWluICdzdWInIG9yICd1c2VyX2lkJyBmaWVsZCFcIik7XG4gICAgICAgICAgICBuID0gbmV3IFVzZXIocyk7XG4gICAgICAgIH1cbiAgICAgICAgZS5fYXV0aENyZWRlbnRpYWxzID0gbmV3IF9fUFJJVkFURV9FbXVsYXRvckF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyKG5ldyBfX1BSSVZBVEVfT0F1dGhUb2tlbih0LCBuKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGBRdWVyeWAgcmVmZXJzIHRvIGEgcXVlcnkgd2hpY2ggeW91IGNhbiByZWFkIG9yIGxpc3RlbiB0by4gWW91IGNhbiBhbHNvXG4gKiBjb25zdHJ1Y3QgcmVmaW5lZCBgUXVlcnlgIG9iamVjdHMgYnkgYWRkaW5nIGZpbHRlcnMgYW5kIG9yZGVyaW5nLlxuICovIGNsYXNzIFF1ZXJ5IHtcbiAgICAvLyBUaGlzIGlzIHRoZSBsaXRlIHZlcnNpb24gb2YgdGhlIFF1ZXJ5IGNsYXNzIGluIHRoZSBtYWluIFNESy5cbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciBwcm90ZWN0ZWQgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCBcbiAgICAvKipcbiAgICAgKiBJZiBwcm92aWRlZCwgdGhlIGBGaXJlc3RvcmVEYXRhQ29udmVydGVyYCBhc3NvY2lhdGVkIHdpdGggdGhpcyBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICB0LCBuKSB7XG4gICAgICAgIHRoaXMuY29udmVydGVyID0gdCwgdGhpcy5fcXVlcnkgPSBuLCBcbiAgICAgICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgRmlyZXN0b3JlIHJlZmVyZW5jZS4gKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJxdWVyeVwiLCB0aGlzLmZpcmVzdG9yZSA9IGU7XG4gICAgfVxuICAgIHdpdGhDb252ZXJ0ZXIoZSkge1xuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHRoaXMuZmlyZXN0b3JlLCBlLCB0aGlzLl9xdWVyeSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgYERvY3VtZW50UmVmZXJlbmNlYCByZWZlcnMgdG8gYSBkb2N1bWVudCBsb2NhdGlvbiBpbiBhIEZpcmVzdG9yZSBkYXRhYmFzZVxuICogYW5kIGNhbiBiZSB1c2VkIHRvIHdyaXRlLCByZWFkLCBvciBsaXN0ZW4gdG8gdGhlIGxvY2F0aW9uLiBUaGUgZG9jdW1lbnQgYXRcbiAqIHRoZSByZWZlcmVuY2VkIGxvY2F0aW9uIG1heSBvciBtYXkgbm90IGV4aXN0LlxuICovIGNsYXNzIERvY3VtZW50UmVmZXJlbmNlIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIFxuICAgIC8qKlxuICAgICAqIElmIHByb3ZpZGVkLCB0aGUgYEZpcmVzdG9yZURhdGFDb252ZXJ0ZXJgIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGluc3RhbmNlLlxuICAgICAqL1xuICAgIHQsIG4pIHtcbiAgICAgICAgdGhpcy5jb252ZXJ0ZXIgPSB0LCB0aGlzLl9rZXkgPSBuLCBcbiAgICAgICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgRmlyZXN0b3JlIHJlZmVyZW5jZS4gKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJkb2N1bWVudFwiLCB0aGlzLmZpcmVzdG9yZSA9IGU7XG4gICAgfVxuICAgIGdldCBfcGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2tleS5wYXRoO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgZG9jdW1lbnQncyBpZGVudGlmaWVyIHdpdGhpbiBpdHMgY29sbGVjdGlvbi5cbiAgICAgKi8gICAgZ2V0IGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fa2V5LnBhdGgubGFzdFNlZ21lbnQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBwYXRoIG9mIHRoZSByZWZlcmVuY2VkIGRvY3VtZW50IChyZWxhdGl2ZVxuICAgICAqIHRvIHRoZSByb290IG9mIHRoZSBkYXRhYmFzZSkuXG4gICAgICovICAgIGdldCBwYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fa2V5LnBhdGguY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjb2xsZWN0aW9uIHRoaXMgYERvY3VtZW50UmVmZXJlbmNlYCBiZWxvbmdzIHRvLlxuICAgICAqLyAgICBnZXQgcGFyZW50KCkge1xuICAgICAgICByZXR1cm4gbmV3IENvbGxlY3Rpb25SZWZlcmVuY2UodGhpcy5maXJlc3RvcmUsIHRoaXMuY29udmVydGVyLCB0aGlzLl9rZXkucGF0aC5wb3BMYXN0KCkpO1xuICAgIH1cbiAgICB3aXRoQ29udmVydGVyKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFJlZmVyZW5jZSh0aGlzLmZpcmVzdG9yZSwgZSwgdGhpcy5fa2V5KTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBgQ29sbGVjdGlvblJlZmVyZW5jZWAgb2JqZWN0IGNhbiBiZSB1c2VkIGZvciBhZGRpbmcgZG9jdW1lbnRzLCBnZXR0aW5nXG4gKiBkb2N1bWVudCByZWZlcmVuY2VzLCBhbmQgcXVlcnlpbmcgZm9yIGRvY3VtZW50cyAodXNpbmcge0BsaW5rIChxdWVyeToxKX0pLlxuICovIGNsYXNzIENvbGxlY3Rpb25SZWZlcmVuY2UgZXh0ZW5kcyBRdWVyeSB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuKSB7XG4gICAgICAgIHN1cGVyKGUsIHQsIF9fUFJJVkFURV9uZXdRdWVyeUZvclBhdGgobikpLCB0aGlzLl9wYXRoID0gbiwgXG4gICAgICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIEZpcmVzdG9yZSByZWZlcmVuY2UuICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwiY29sbGVjdGlvblwiO1xuICAgIH1cbiAgICAvKiogVGhlIGNvbGxlY3Rpb24ncyBpZGVudGlmaWVyLiAqLyAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9xdWVyeS5wYXRoLmxhc3RTZWdtZW50KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgcGF0aCBvZiB0aGUgcmVmZXJlbmNlZCBjb2xsZWN0aW9uIChyZWxhdGl2ZVxuICAgICAqIHRvIHRoZSByb290IG9mIHRoZSBkYXRhYmFzZSkuXG4gICAgICovICAgIGdldCBwYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcXVlcnkucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSByZWZlcmVuY2UgdG8gdGhlIGNvbnRhaW5pbmcgYERvY3VtZW50UmVmZXJlbmNlYCBpZiB0aGlzIGlzIGFcbiAgICAgKiBzdWJjb2xsZWN0aW9uLiBJZiB0aGlzIGlzbid0IGEgc3ViY29sbGVjdGlvbiwgdGhlIHJlZmVyZW5jZSBpcyBudWxsLlxuICAgICAqLyAgICBnZXQgcGFyZW50KCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5fcGF0aC5wb3BMYXN0KCk7XG4gICAgICAgIHJldHVybiBlLmlzRW1wdHkoKSA/IG51bGwgOiBuZXcgRG9jdW1lbnRSZWZlcmVuY2UodGhpcy5maXJlc3RvcmUsIFxuICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIG5ldyBEb2N1bWVudEtleShlKSk7XG4gICAgfVxuICAgIHdpdGhDb252ZXJ0ZXIoZSkge1xuICAgICAgICByZXR1cm4gbmV3IENvbGxlY3Rpb25SZWZlcmVuY2UodGhpcy5maXJlc3RvcmUsIGUsIHRoaXMuX3BhdGgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY29sbGVjdGlvbihlLCB0LCAuLi5uKSB7XG4gICAgaWYgKGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSksIF9fUFJJVkFURV92YWxpZGF0ZU5vbkVtcHR5QXJndW1lbnQoXCJjb2xsZWN0aW9uXCIsIFwicGF0aFwiLCB0KSwgZSBpbnN0YW5jZW9mIEZpcmVzdG9yZSQxKSB7XG4gICAgICAgIGNvbnN0IHIgPSBSZXNvdXJjZVBhdGguZnJvbVN0cmluZyh0LCAuLi5uKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV92YWxpZGF0ZUNvbGxlY3Rpb25QYXRoKHIpLCBuZXcgQ29sbGVjdGlvblJlZmVyZW5jZShlLCAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIHIpO1xuICAgIH1cbiAgICB7XG4gICAgICAgIGlmICghKGUgaW5zdGFuY2VvZiBEb2N1bWVudFJlZmVyZW5jZSB8fCBlIGluc3RhbmNlb2YgQ29sbGVjdGlvblJlZmVyZW5jZSkpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDLklOVkFMSURfQVJHVU1FTlQsIFwiRXhwZWN0ZWQgZmlyc3QgYXJndW1lbnQgdG8gY29sbGVjdGlvbigpIHRvIGJlIGEgQ29sbGVjdGlvblJlZmVyZW5jZSwgYSBEb2N1bWVudFJlZmVyZW5jZSBvciBGaXJlYmFzZUZpcmVzdG9yZVwiKTtcbiAgICAgICAgY29uc3QgciA9IGUuX3BhdGguY2hpbGQoUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcodCwgLi4ubikpO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3ZhbGlkYXRlQ29sbGVjdGlvblBhdGgociksIG5ldyBDb2xsZWN0aW9uUmVmZXJlbmNlKGUuZmlyZXN0b3JlLCBcbiAgICAgICAgLyogY29udmVydGVyPSAqLyBudWxsLCByKTtcbiAgICB9XG59XG5cbi8vIFRPRE8oZmlyZXN0b3JlbGl0ZSk6IENvbnNpZGVyIHVzaW5nIEVycm9yRmFjdG9yeSAtXG4vLyBodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtanMtc2RrL2Jsb2IvMDEzMWUxZi9wYWNrYWdlcy91dGlsL3NyYy9lcnJvcnMudHMjTDEwNlxuLyoqXG4gKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgbmV3IGBRdWVyeWAgaW5zdGFuY2UgdGhhdCBpbmNsdWRlcyBhbGwgZG9jdW1lbnRzIGluIHRoZVxuICogZGF0YWJhc2UgdGhhdCBhcmUgY29udGFpbmVkIGluIGEgY29sbGVjdGlvbiBvciBzdWJjb2xsZWN0aW9uIHdpdGggdGhlXG4gKiBnaXZlbiBgY29sbGVjdGlvbklkYC5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gQSByZWZlcmVuY2UgdG8gdGhlIHJvb3QgYEZpcmVzdG9yZWAgaW5zdGFuY2UuXG4gKiBAcGFyYW0gY29sbGVjdGlvbklkIC0gSWRlbnRpZmllcyB0aGUgY29sbGVjdGlvbnMgdG8gcXVlcnkgb3Zlci4gRXZlcnlcbiAqIGNvbGxlY3Rpb24gb3Igc3ViY29sbGVjdGlvbiB3aXRoIHRoaXMgSUQgYXMgdGhlIGxhc3Qgc2VnbWVudCBvZiBpdHMgcGF0aFxuICogd2lsbCBiZSBpbmNsdWRlZC4gQ2Fubm90IGNvbnRhaW4gYSBzbGFzaC5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIGBRdWVyeWAuXG4gKi8gZnVuY3Rpb24gY29sbGVjdGlvbkdyb3VwKGUsIHQpIHtcbiAgICBpZiAoZSA9IF9fUFJJVkFURV9jYXN0KGUsIEZpcmVzdG9yZSQxKSwgX19QUklWQVRFX3ZhbGlkYXRlTm9uRW1wdHlBcmd1bWVudChcImNvbGxlY3Rpb25Hcm91cFwiLCBcImNvbGxlY3Rpb24gaWRcIiwgdCksIFxuICAgIHQuaW5kZXhPZihcIi9cIikgPj0gMCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEMuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgY29sbGVjdGlvbiBJRCAnJHt0fScgcGFzc2VkIHRvIGZ1bmN0aW9uIGNvbGxlY3Rpb25Hcm91cCgpLiBDb2xsZWN0aW9uIElEcyBtdXN0IG5vdCBjb250YWluICcvJy5gKTtcbiAgICByZXR1cm4gbmV3IFF1ZXJ5KGUsIFxuICAgIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgZnVuY3Rpb24gX19QUklWQVRFX25ld1F1ZXJ5Rm9yQ29sbGVjdGlvbkdyb3VwKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfUXVlcnlJbXBsKFJlc291cmNlUGF0aC5lbXB0eVBhdGgoKSwgZSk7XG4gICAgfSh0KSk7XG59XG5cbmZ1bmN0aW9uIGRvYyhlLCB0LCAuLi5uKSB7XG4gICAgaWYgKGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSksIFxuICAgIC8vIFdlIGFsbG93IG9taXNzaW9uIG9mICdwYXRoU3RyaW5nJyBidXQgZXhwbGljaXRseSBwcm9oaWJpdCBwYXNzaW5nIGluIGJvdGhcbiAgICAvLyAndW5kZWZpbmVkJyBhbmQgJ251bGwnLlxuICAgIDEgPT09IGFyZ3VtZW50cy5sZW5ndGggJiYgKHQgPSBfX1BSSVZBVEVfQXV0b0lkLm5ld0lkKCkpLCBfX1BSSVZBVEVfdmFsaWRhdGVOb25FbXB0eUFyZ3VtZW50KFwiZG9jXCIsIFwicGF0aFwiLCB0KSwgXG4gICAgZSBpbnN0YW5jZW9mIEZpcmVzdG9yZSQxKSB7XG4gICAgICAgIGNvbnN0IHIgPSBSZXNvdXJjZVBhdGguZnJvbVN0cmluZyh0LCAuLi5uKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV92YWxpZGF0ZURvY3VtZW50UGF0aChyKSwgbmV3IERvY3VtZW50UmVmZXJlbmNlKGUsIFxuICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIG5ldyBEb2N1bWVudEtleShyKSk7XG4gICAgfVxuICAgIHtcbiAgICAgICAgaWYgKCEoZSBpbnN0YW5jZW9mIERvY3VtZW50UmVmZXJlbmNlIHx8IGUgaW5zdGFuY2VvZiBDb2xsZWN0aW9uUmVmZXJlbmNlKSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEMuSU5WQUxJRF9BUkdVTUVOVCwgXCJFeHBlY3RlZCBmaXJzdCBhcmd1bWVudCB0byBjb2xsZWN0aW9uKCkgdG8gYmUgYSBDb2xsZWN0aW9uUmVmZXJlbmNlLCBhIERvY3VtZW50UmVmZXJlbmNlIG9yIEZpcmViYXNlRmlyZXN0b3JlXCIpO1xuICAgICAgICBjb25zdCByID0gZS5fcGF0aC5jaGlsZChSZXNvdXJjZVBhdGguZnJvbVN0cmluZyh0LCAuLi5uKSk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfdmFsaWRhdGVEb2N1bWVudFBhdGgociksIG5ldyBEb2N1bWVudFJlZmVyZW5jZShlLmZpcmVzdG9yZSwgZSBpbnN0YW5jZW9mIENvbGxlY3Rpb25SZWZlcmVuY2UgPyBlLmNvbnZlcnRlciA6IG51bGwsIG5ldyBEb2N1bWVudEtleShyKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcHJvdmlkZWQgcmVmZXJlbmNlcyBhcmUgZXF1YWwuXG4gKlxuICogQHBhcmFtIGxlZnQgLSBBIHJlZmVyZW5jZSB0byBjb21wYXJlLlxuICogQHBhcmFtIHJpZ2h0IC0gQSByZWZlcmVuY2UgdG8gY29tcGFyZS5cbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHJlZmVyZW5jZXMgcG9pbnQgdG8gdGhlIHNhbWUgbG9jYXRpb24gaW4gdGhlIHNhbWVcbiAqIEZpcmVzdG9yZSBkYXRhYmFzZS5cbiAqLyBmdW5jdGlvbiByZWZFcXVhbChlLCB0KSB7XG4gICAgcmV0dXJuIGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSksIHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCksIChlIGluc3RhbmNlb2YgRG9jdW1lbnRSZWZlcmVuY2UgfHwgZSBpbnN0YW5jZW9mIENvbGxlY3Rpb25SZWZlcmVuY2UpICYmICh0IGluc3RhbmNlb2YgRG9jdW1lbnRSZWZlcmVuY2UgfHwgdCBpbnN0YW5jZW9mIENvbGxlY3Rpb25SZWZlcmVuY2UpICYmIChlLmZpcmVzdG9yZSA9PT0gdC5maXJlc3RvcmUgJiYgZS5wYXRoID09PSB0LnBhdGggJiYgZS5jb252ZXJ0ZXIgPT09IHQuY29udmVydGVyKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIHF1ZXJpZXMgcG9pbnQgdG8gdGhlIHNhbWUgY29sbGVjdGlvbiBhbmQgYXBwbHlcbiAqIHRoZSBzYW1lIGNvbnN0cmFpbnRzLlxuICpcbiAqIEBwYXJhbSBsZWZ0IC0gQSBgUXVlcnlgIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0gcmlnaHQgLSBBIGBRdWVyeWAgdG8gY29tcGFyZS5cbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHJlZmVyZW5jZXMgcG9pbnQgdG8gdGhlIHNhbWUgbG9jYXRpb24gaW4gdGhlIHNhbWVcbiAqIEZpcmVzdG9yZSBkYXRhYmFzZS5cbiAqLyBmdW5jdGlvbiBxdWVyeUVxdWFsKGUsIHQpIHtcbiAgICByZXR1cm4gZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSwgdCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSwgZSBpbnN0YW5jZW9mIFF1ZXJ5ICYmIHQgaW5zdGFuY2VvZiBRdWVyeSAmJiAoZS5maXJlc3RvcmUgPT09IHQuZmlyZXN0b3JlICYmIF9fUFJJVkFURV9xdWVyeUVxdWFscyhlLl9xdWVyeSwgdC5fcXVlcnkpICYmIGUuY29udmVydGVyID09PSB0LmNvbnZlcnRlcik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIF9fUFJJVkFURV9Bc3luY1F1ZXVlSW1wbCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIFRoZSBsYXN0IHByb21pc2UgaW4gdGhlIHF1ZXVlLlxuICAgICAgICB0aGlzLml1ID0gUHJvbWlzZS5yZXNvbHZlKCksIFxuICAgICAgICAvLyBBIGxpc3Qgb2YgcmV0cnlhYmxlIG9wZXJhdGlvbnMuIFJldHJ5YWJsZSBvcGVyYXRpb25zIGFyZSBydW4gaW4gb3JkZXIgYW5kXG4gICAgICAgIC8vIHJldHJpZWQgd2l0aCBiYWNrb2ZmLlxuICAgICAgICB0aGlzLnN1ID0gW10sIFxuICAgICAgICAvLyBJcyB0aGlzIEFzeW5jUXVldWUgYmVpbmcgc2h1dCBkb3duPyBPbmNlIGl0IGlzIHNldCB0byB0cnVlLCBpdCB3aWxsIG5vdFxuICAgICAgICAvLyBiZSBjaGFuZ2VkIGFnYWluLlxuICAgICAgICB0aGlzLm91ID0gITEsIFxuICAgICAgICAvLyBPcGVyYXRpb25zIHNjaGVkdWxlZCB0byBiZSBxdWV1ZWQgaW4gdGhlIGZ1dHVyZS4gT3BlcmF0aW9ucyBhcmVcbiAgICAgICAgLy8gYXV0b21hdGljYWxseSByZW1vdmVkIGFmdGVyIHRoZXkgYXJlIHJ1biBvciBjYW5jZWxlZC5cbiAgICAgICAgdGhpcy5fdSA9IFtdLCBcbiAgICAgICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgICAgICB0aGlzLmF1ID0gbnVsbCwgXG4gICAgICAgIC8vIEZsYWcgc2V0IHdoaWxlIHRoZXJlJ3MgYW4gb3V0c3RhbmRpbmcgQXN5bmNRdWV1ZSBvcGVyYXRpb24sIHVzZWQgZm9yXG4gICAgICAgIC8vIGFzc2VydGlvbiBzYW5pdHktY2hlY2tzLlxuICAgICAgICB0aGlzLnV1ID0gITEsIFxuICAgICAgICAvLyBFbmFibGVkIGR1cmluZyBzaHV0ZG93biBvbiBTYWZhcmkgdG8gcHJldmVudCBmdXR1cmUgYWNjZXNzIHRvIEluZGV4ZWREQi5cbiAgICAgICAgdGhpcy5jdSA9ICExLCBcbiAgICAgICAgLy8gTGlzdCBvZiBUaW1lcklkcyB0byBmYXN0LWZvcndhcmQgZGVsYXlzIGZvci5cbiAgICAgICAgdGhpcy5sdSA9IFtdLCBcbiAgICAgICAgLy8gQmFja29mZiB0aW1lciB1c2VkIHRvIHNjaGVkdWxlIHJldHJpZXMgZm9yIHJldHJ5YWJsZSBvcGVyYXRpb25zXG4gICAgICAgIHRoaXMuWW8gPSBuZXcgX19QUklWQVRFX0V4cG9uZW50aWFsQmFja29mZih0aGlzLCBcImFzeW5jX3F1ZXVlX3JldHJ5XCIgLyogVGltZXJJZC5Bc3luY1F1ZXVlUmV0cnkgKi8pLCBcbiAgICAgICAgLy8gVmlzaWJpbGl0eSBoYW5kbGVyIHRoYXQgdHJpZ2dlcnMgYW4gaW1tZWRpYXRlIHJldHJ5IG9mIGFsbCByZXRyeWFibGVcbiAgICAgICAgLy8gb3BlcmF0aW9ucy4gTWVhbnQgdG8gc3BlZWQgdXAgcmVjb3Zlcnkgd2hlbiB3ZSByZWdhaW4gZmlsZSBzeXN0ZW0gYWNjZXNzXG4gICAgICAgIC8vIGFmdGVyIHBhZ2UgY29tZXMgaW50byBmb3JlZ3JvdW5kLlxuICAgICAgICB0aGlzLmh1ID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IGdldERvY3VtZW50KCk7XG4gICAgICAgICAgICBlICYmIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkFzeW5jUXVldWVcIiwgXCJWaXNpYmlsaXR5IHN0YXRlIGNoYW5nZWQgdG8gXCIgKyBlLnZpc2liaWxpdHlTdGF0ZSksIFxuICAgICAgICAgICAgdGhpcy5Zby5XbygpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBlID0gZ2V0RG9jdW1lbnQoKTtcbiAgICAgICAgZSAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGUuYWRkRXZlbnRMaXN0ZW5lciAmJiBlLmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHRoaXMuaHUpO1xuICAgIH1cbiAgICBnZXQgaXNTaHV0dGluZ0Rvd24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm91O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbmV3IG9wZXJhdGlvbiB0byB0aGUgcXVldWUgd2l0aG91dCB3YWl0aW5nIGZvciBpdCB0byBjb21wbGV0ZSAoaS5lLlxuICAgICAqIHdlIGlnbm9yZSB0aGUgUHJvbWlzZSByZXN1bHQpLlxuICAgICAqLyAgICBlbnF1ZXVlQW5kRm9yZ2V0KGUpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICAgICAgICB0aGlzLmVucXVldWUoZSk7XG4gICAgfVxuICAgIGVucXVldWVBbmRGb3JnZXRFdmVuV2hpbGVSZXN0cmljdGVkKGUpIHtcbiAgICAgICAgdGhpcy5QdSgpLCBcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICAgICAgICB0aGlzLkl1KGUpO1xuICAgIH1cbiAgICBlbnRlclJlc3RyaWN0ZWRNb2RlKGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLm91KSB7XG4gICAgICAgICAgICB0aGlzLm91ID0gITAsIHRoaXMuY3UgPSBlIHx8ICExO1xuICAgICAgICAgICAgY29uc3QgdCA9IGdldERvY3VtZW50KCk7XG4gICAgICAgICAgICB0ICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgdC5yZW1vdmVFdmVudExpc3RlbmVyICYmIHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgdGhpcy5odSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZW5xdWV1ZShlKSB7XG4gICAgICAgIGlmICh0aGlzLlB1KCksIHRoaXMub3UpIFxuICAgICAgICAvLyBSZXR1cm4gYSBQcm9taXNlIHdoaWNoIG5ldmVyIHJlc29sdmVzLlxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKCgpID0+IHt9KSk7XG4gICAgICAgIC8vIENyZWF0ZSBhIGRlZmVycmVkIFByb21pc2UgdGhhdCB3ZSBjYW4gcmV0dXJuIHRvIHRoZSBjYWxsZWUuIFRoaXNcbiAgICAgICAgLy8gYWxsb3dzIHVzIHRvIHJldHVybiBhIFwiaGFuZ2luZyBQcm9taXNlXCIgb25seSB0byB0aGUgY2FsbGVlIGFuZCBzdGlsbFxuICAgICAgICAvLyBhZHZhbmNlIHRoZSBxdWV1ZSBldmVuIHdoZW4gdGhlIG9wZXJhdGlvbiBpcyBub3QgcnVuLlxuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgX19QUklWQVRFX0RlZmVycmVkO1xuICAgICAgICByZXR1cm4gdGhpcy5JdSgoKCkgPT4gdGhpcy5vdSAmJiB0aGlzLmN1ID8gUHJvbWlzZS5yZXNvbHZlKCkgOiAoZSgpLnRoZW4odC5yZXNvbHZlLCB0LnJlamVjdCksIFxuICAgICAgICB0LnByb21pc2UpKSkudGhlbigoKCkgPT4gdC5wcm9taXNlKSk7XG4gICAgfVxuICAgIGVucXVldWVSZXRyeWFibGUoZSkge1xuICAgICAgICB0aGlzLmVucXVldWVBbmRGb3JnZXQoKCgpID0+ICh0aGlzLnN1LnB1c2goZSksIHRoaXMuVHUoKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUnVucyB0aGUgbmV4dCBvcGVyYXRpb24gZnJvbSB0aGUgcmV0cnlhYmxlIHF1ZXVlLiBJZiB0aGUgb3BlcmF0aW9uIGZhaWxzLFxuICAgICAqIHJlc2NoZWR1bGVzIHdpdGggYmFja29mZi5cbiAgICAgKi8gICAgYXN5bmMgVHUoKSB7XG4gICAgICAgIGlmICgwICE9PSB0aGlzLnN1Lmxlbmd0aCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnN1WzBdKCksIHRoaXMuc3Uuc2hpZnQoKSwgdGhpcy5Zby5yZXNldCgpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGlmICghX19QUklWQVRFX2lzSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvcihlKSkgdGhyb3cgZTtcbiAvLyBGYWlsdXJlIHdpbGwgYmUgaGFuZGxlZCBieSBBc3luY1F1ZXVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkFzeW5jUXVldWVcIiwgXCJPcGVyYXRpb24gZmFpbGVkIHdpdGggcmV0cnlhYmxlIGVycm9yOiBcIiArIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zdS5sZW5ndGggPiAwICYmIFxuICAgICAgICAgICAgLy8gSWYgdGhlcmUgYXJlIGFkZGl0aW9uYWwgb3BlcmF0aW9ucywgd2UgcmUtc2NoZWR1bGUgYHJldHJ5TmV4dE9wKClgLlxuICAgICAgICAgICAgLy8gVGhpcyBpcyBuZWNlc3NhcnkgdG8gcnVuIHJldHJ5YWJsZSBvcGVyYXRpb25zIHRoYXQgZmFpbGVkIGR1cmluZ1xuICAgICAgICAgICAgLy8gdGhlaXIgaW5pdGlhbCBhdHRlbXB0IHNpbmNlIHdlIGRvbid0IGtub3cgd2hldGhlciB0aGV5IGFyZSBhbHJlYWR5XG4gICAgICAgICAgICAvLyBlbnF1ZXVlZC4gSWYsIGZvciBleGFtcGxlLCBgb3AxYCwgYG9wMmAsIGBvcDNgIGFyZSBlbnF1ZXVlZCBhbmQgYG9wMWBcbiAgICAgICAgICAgIC8vIG5lZWRzIHRvICBiZSByZS1ydW4sIHdlIHdpbGwgcnVuIGBvcDFgLCBgb3AxYCwgYG9wMmAgdXNpbmcgdGhlXG4gICAgICAgICAgICAvLyBhbHJlYWR5IGVucXVldWVkIGNhbGxzIHRvIGByZXRyeU5leHRPcCgpYC4gYG9wMygpYCB3aWxsIHRoZW4gcnVuIGluIHRoZVxuICAgICAgICAgICAgLy8gY2FsbCBzY2hlZHVsZWQgaGVyZS5cbiAgICAgICAgICAgIC8vIFNpbmNlIGBiYWNrb2ZmQW5kUnVuKClgIGNhbmNlbHMgYW4gZXhpc3RpbmcgYmFja29mZiBhbmQgc2NoZWR1bGVzIGFcbiAgICAgICAgICAgIC8vIG5ldyBiYWNrb2ZmIG9uIGV2ZXJ5IGNhbGwsIHRoZXJlIGlzIG9ubHkgZXZlciBhIHNpbmdsZSBhZGRpdGlvbmFsXG4gICAgICAgICAgICAvLyBvcGVyYXRpb24gaW4gdGhlIHF1ZXVlLlxuICAgICAgICAgICAgdGhpcy5Zby4kbygoKCkgPT4gdGhpcy5UdSgpKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgSXUoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5pdS50aGVuKCgoKSA9PiAodGhpcy51dSA9ICEwLCBlKCkuY2F0Y2goKGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5hdSA9IGUsIHRoaXMudXUgPSAhMTtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBcbiAgICAgICAgICAgIC8qKlxuICogQ2hyb21lIGluY2x1ZGVzIEVycm9yLm1lc3NhZ2UgaW4gRXJyb3Iuc3RhY2suIE90aGVyIGJyb3dzZXJzIGRvIG5vdC5cbiAqIFRoaXMgcmV0dXJucyBleHBlY3RlZCBvdXRwdXQgb2YgbWVzc2FnZSArIHN0YWNrIHdoZW4gYXZhaWxhYmxlLlxuICogQHBhcmFtIGVycm9yIC0gRXJyb3Igb3IgRmlyZXN0b3JlRXJyb3JcbiAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX2dldE1lc3NhZ2VPclN0YWNrKGUpIHtcbiAgICAgICAgICAgICAgICBsZXQgdCA9IGUubWVzc2FnZSB8fCBcIlwiO1xuICAgICAgICAgICAgICAgIGUuc3RhY2sgJiYgKHQgPSBlLnN0YWNrLmluY2x1ZGVzKGUubWVzc2FnZSkgPyBlLnN0YWNrIDogZS5tZXNzYWdlICsgXCJcXG5cIiArIGUuc3RhY2spO1xuICAgICAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKGUpO1xuICAgICAgICAgICAgLy8gUmUtdGhyb3cgdGhlIGVycm9yIHNvIHRoYXQgdGhpcy50YWlsIGJlY29tZXMgYSByZWplY3RlZCBQcm9taXNlIGFuZFxuICAgICAgICAgICAgLy8gYWxsIGZ1cnRoZXIgYXR0ZW1wdHMgdG8gY2hhaW4gKHZpYSAudGhlbikgd2lsbCBqdXN0IHNob3J0LWNpcmN1aXRcbiAgICAgICAgICAgIC8vIGFuZCByZXR1cm4gdGhlIHJlamVjdGVkIFByb21pc2UuXG4gICAgICAgICAgICB0aHJvdyBfX1BSSVZBVEVfbG9nRXJyb3IoXCJJTlRFUk5BTCBVTkhBTkRMRUQgRVJST1I6IFwiLCB0KSwgZTtcbiAgICAgICAgfSkpLnRoZW4oKGUgPT4gKHRoaXMudXUgPSAhMSwgZSkpKSkpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXUgPSB0LCB0O1xuICAgIH1cbiAgICBlbnF1ZXVlQWZ0ZXJEZWxheShlLCB0LCBuKSB7XG4gICAgICAgIHRoaXMuUHUoKSwgXG4gICAgICAgIC8vIEZhc3QtZm9yd2FyZCBkZWxheXMgZm9yIHRpbWVySWRzIHRoYXQgaGF2ZSBiZWVuIG92ZXJyaWRlbi5cbiAgICAgICAgdGhpcy5sdS5pbmRleE9mKGUpID4gLTEgJiYgKHQgPSAwKTtcbiAgICAgICAgY29uc3QgciA9IERlbGF5ZWRPcGVyYXRpb24uY3JlYXRlQW5kU2NoZWR1bGUodGhpcywgZSwgdCwgbiwgKGUgPT4gdGhpcy5FdShlKSkpO1xuICAgICAgICByZXR1cm4gdGhpcy5fdS5wdXNoKHIpLCByO1xuICAgIH1cbiAgICBQdSgpIHtcbiAgICAgICAgdGhpcy5hdSAmJiBmYWlsKCk7XG4gICAgfVxuICAgIHZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MoKSB7fVxuICAgIC8qKlxuICAgICAqIFdhaXRzIHVudGlsIGFsbCBjdXJyZW50bHkgcXVldWVkIHRhc2tzIGFyZSBmaW5pc2hlZCBleGVjdXRpbmcuIERlbGF5ZWRcbiAgICAgKiBvcGVyYXRpb25zIGFyZSBub3QgcnVuLlxuICAgICAqLyAgICBhc3luYyBkdSgpIHtcbiAgICAgICAgLy8gT3BlcmF0aW9ucyBpbiB0aGUgcXVldWUgcHJpb3IgdG8gZHJhaW5pbmcgbWF5IGhhdmUgZW5xdWV1ZWQgYWRkaXRpb25hbFxuICAgICAgICAvLyBvcGVyYXRpb25zLiBLZWVwIGRyYWluaW5nIHRoZSBxdWV1ZSB1bnRpbCB0aGUgdGFpbCBpcyBubyBsb25nZXIgYWR2YW5jZWQsXG4gICAgICAgIC8vIHdoaWNoIGluZGljYXRlcyB0aGF0IG5vIG1vcmUgbmV3IG9wZXJhdGlvbnMgd2VyZSBlbnF1ZXVlZCBhbmQgdGhhdCBhbGxcbiAgICAgICAgLy8gb3BlcmF0aW9ucyB3ZXJlIGV4ZWN1dGVkLlxuICAgICAgICBsZXQgZTtcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgZSA9IHRoaXMuaXUsIGF3YWl0IGU7XG4gICAgICAgIH0gd2hpbGUgKGUgIT09IHRoaXMuaXUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3IgVGVzdHM6IERldGVybWluZSBpZiBhIGRlbGF5ZWQgb3BlcmF0aW9uIHdpdGggYSBwYXJ0aWN1bGFyIFRpbWVySWRcbiAgICAgKiBleGlzdHMuXG4gICAgICovICAgIEF1KGUpIHtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMuX3UpIGlmICh0LnRpbWVySWQgPT09IGUpIHJldHVybiAhMDtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3IgVGVzdHM6IFJ1bnMgc29tZSBvciBhbGwgZGVsYXllZCBvcGVyYXRpb25zIGVhcmx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGxhc3RUaW1lcklkIC0gRGVsYXllZCBvcGVyYXRpb25zIHVwIHRvIGFuZCBpbmNsdWRpbmcgdGhpcyBUaW1lcklkXG4gICAgICogd2lsbCBiZSBkcmFpbmVkLiBQYXNzIFRpbWVySWQuQWxsIHRvIHJ1biBhbGwgZGVsYXllZCBvcGVyYXRpb25zLlxuICAgICAqIEByZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIG9uY2UgYWxsIG9wZXJhdGlvbnMgaGF2ZSBiZWVuIHJ1bi5cbiAgICAgKi8gICAgUnUoZSkge1xuICAgICAgICAvLyBOb3RlIHRoYXQgZHJhaW5pbmcgbWF5IGdlbmVyYXRlIG1vcmUgZGVsYXllZCBvcHMsIHNvIHdlIGRvIHRoYXQgZmlyc3QuXG4gICAgICAgIHJldHVybiB0aGlzLmR1KCkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgLy8gUnVuIG9wcyBpbiB0aGUgc2FtZSBvcmRlciB0aGV5J2QgcnVuIGlmIHRoZXkgcmFuIG5hdHVyYWxseS5cbiAgICAgICAgICAgIHRoaXMuX3Uuc29ydCgoKGUsIHQpID0+IGUudGFyZ2V0VGltZU1zIC0gdC50YXJnZXRUaW1lTXMpKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiB0aGlzLl91KSBpZiAodC5za2lwRGVsYXkoKSwgXCJhbGxcIiAvKiBUaW1lcklkLkFsbCAqLyAhPT0gZSAmJiB0LnRpbWVySWQgPT09IGUpIGJyZWFrO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZHUoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3IgVGVzdHM6IFNraXAgYWxsIHN1YnNlcXVlbnQgZGVsYXlzIGZvciBhIHRpbWVyIGlkLlxuICAgICAqLyAgICBWdShlKSB7XG4gICAgICAgIHRoaXMubHUucHVzaChlKTtcbiAgICB9XG4gICAgLyoqIENhbGxlZCBvbmNlIGEgRGVsYXllZE9wZXJhdGlvbiBpcyBydW4gb3IgY2FuY2VsZWQuICovICAgIEV1KGUpIHtcbiAgICAgICAgLy8gTk9URTogaW5kZXhPZiAvIHNsaWNlIGFyZSBPKG4pLCBidXQgZGVsYXllZE9wZXJhdGlvbnMgaXMgZXhwZWN0ZWQgdG8gYmUgc21hbGwuXG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLl91LmluZGV4T2YoZSk7XG4gICAgICAgIHRoaXMuX3Uuc3BsaWNlKHQsIDEpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2lzUGFydGlhbE9ic2VydmVyKGUpIHtcbiAgICAvKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBvYmogaXMgYW4gb2JqZWN0IGFuZCBjb250YWlucyBhdCBsZWFzdCBvbmUgb2YgdGhlIHNwZWNpZmllZFxuICogbWV0aG9kcy5cbiAqL1xuICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfaW1wbGVtZW50c0FueU1ldGhvZHMoZSwgdCkge1xuICAgICAgICBpZiAoXCJvYmplY3RcIiAhPSB0eXBlb2YgZSB8fCBudWxsID09PSBlKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IG4gPSBlO1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdCkgaWYgKGUgaW4gbiAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIG5bZV0pIHJldHVybiAhMDtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgIC8qKlxuICogUmVwcmVzZW50cyB0aGUgdGFzayBvZiBsb2FkaW5nIGEgRmlyZXN0b3JlIGJ1bmRsZS4gSXQgcHJvdmlkZXMgcHJvZ3Jlc3Mgb2YgYnVuZGxlXG4gKiBsb2FkaW5nLCBhcyB3ZWxsIGFzIHRhc2sgY29tcGxldGlvbiBhbmQgZXJyb3IgZXZlbnRzLlxuICpcbiAqIFRoZSBBUEkgaXMgY29tcGF0aWJsZSB3aXRoIGBQcm9taXNlPExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3M+YC5cbiAqLyAoZSwgWyBcIm5leHRcIiwgXCJlcnJvclwiLCBcImNvbXBsZXRlXCIgXSk7XG59XG5cbmNsYXNzIExvYWRCdW5kbGVUYXNrIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlciA9IHt9LCB0aGlzLl90YXNrQ29tcGxldGlvblJlc29sdmVyID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZCwgXG4gICAgICAgIHRoaXMuX2xhc3RQcm9ncmVzcyA9IHtcbiAgICAgICAgICAgIHRhc2tTdGF0ZTogXCJSdW5uaW5nXCIsXG4gICAgICAgICAgICB0b3RhbEJ5dGVzOiAwLFxuICAgICAgICAgICAgdG90YWxEb2N1bWVudHM6IDAsXG4gICAgICAgICAgICBieXRlc0xvYWRlZDogMCxcbiAgICAgICAgICAgIGRvY3VtZW50c0xvYWRlZDogMFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgZnVuY3Rpb25zIHRvIGxpc3RlbiB0byBidW5kbGUgbG9hZGluZyBwcm9ncmVzcyBldmVudHMuXG4gICAgICogQHBhcmFtIG5leHQgLSBDYWxsZWQgd2hlbiB0aGVyZSBpcyBhIHByb2dyZXNzIHVwZGF0ZSBmcm9tIGJ1bmRsZSBsb2FkaW5nLiBUeXBpY2FsbHkgYG5leHRgIGNhbGxzIG9jY3VyXG4gICAgICogICBlYWNoIHRpbWUgYSBGaXJlc3RvcmUgZG9jdW1lbnQgaXMgbG9hZGVkIGZyb20gdGhlIGJ1bmRsZS5cbiAgICAgKiBAcGFyYW0gZXJyb3IgLSBDYWxsZWQgd2hlbiBhbiBlcnJvciBvY2N1cnMgZHVyaW5nIGJ1bmRsZSBsb2FkaW5nLiBUaGUgdGFzayBhYm9ydHMgYWZ0ZXIgcmVwb3J0aW5nIHRoZVxuICAgICAqICAgZXJyb3IsIGFuZCB0aGVyZSBzaG91bGQgYmUgbm8gbW9yZSB1cGRhdGVzIGFmdGVyIHRoaXMuXG4gICAgICogQHBhcmFtIGNvbXBsZXRlIC0gQ2FsbGVkIHdoZW4gdGhlIGxvYWRpbmcgdGFzayBpcyBjb21wbGV0ZS5cbiAgICAgKi8gICAgb25Qcm9ncmVzcyhlLCB0LCBuKSB7XG4gICAgICAgIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIgPSB7XG4gICAgICAgICAgICBuZXh0OiBlLFxuICAgICAgICAgICAgZXJyb3I6IHQsXG4gICAgICAgICAgICBjb21wbGV0ZTogblxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbXBsZW1lbnRzIHRoZSBgUHJvbWlzZTxMb2FkQnVuZGxlVGFza1Byb2dyZXNzPi5jYXRjaGAgaW50ZXJmYWNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9uUmVqZWN0ZWQgLSBDYWxsZWQgd2hlbiBhbiBlcnJvciBvY2N1cnMgZHVyaW5nIGJ1bmRsZSBsb2FkaW5nLlxuICAgICAqLyAgICBjYXRjaChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90YXNrQ29tcGxldGlvblJlc29sdmVyLnByb21pc2UuY2F0Y2goZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEltcGxlbWVudHMgdGhlIGBQcm9taXNlPExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3M+LnRoZW5gIGludGVyZmFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvbkZ1bGZpbGxlZCAtIENhbGxlZCBvbiB0aGUgY29tcGxldGlvbiBvZiB0aGUgbG9hZGluZyB0YXNrIHdpdGggYSBmaW5hbCBgTG9hZEJ1bmRsZVRhc2tQcm9ncmVzc2AgdXBkYXRlLlxuICAgICAqICAgVGhlIHVwZGF0ZSB3aWxsIGFsd2F5cyBoYXZlIGl0cyBgdGFza1N0YXRlYCBzZXQgdG8gYFwiU3VjY2Vzc1wiYC5cbiAgICAgKiBAcGFyYW0gb25SZWplY3RlZCAtIENhbGxlZCB3aGVuIGFuIGVycm9yIG9jY3VycyBkdXJpbmcgYnVuZGxlIGxvYWRpbmcuXG4gICAgICovICAgIHRoZW4oZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlci5wcm9taXNlLnRoZW4oZSwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5vdGlmaWVzIGFsbCBvYnNlcnZlcnMgdGhhdCBidW5kbGUgbG9hZGluZyBoYXMgY29tcGxldGVkLCB3aXRoIGEgcHJvdmlkZWRcbiAgICAgKiBgTG9hZEJ1bmRsZVRhc2tQcm9ncmVzc2Agb2JqZWN0LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi8gICAgX2NvbXBsZXRlV2l0aChlKSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZVByb2dyZXNzKGUpLCB0aGlzLl9wcm9ncmVzc09ic2VydmVyLmNvbXBsZXRlICYmIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIuY29tcGxldGUoKSwgXG4gICAgICAgIHRoaXMuX3Rhc2tDb21wbGV0aW9uUmVzb2x2ZXIucmVzb2x2ZShlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTm90aWZpZXMgYWxsIG9ic2VydmVycyB0aGF0IGJ1bmRsZSBsb2FkaW5nIGhhcyBmYWlsZWQsIHdpdGggYSBwcm92aWRlZFxuICAgICAqIGBFcnJvcmAgYXMgdGhlIHJlYXNvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovICAgIF9mYWlsV2l0aChlKSB7XG4gICAgICAgIHRoaXMuX2xhc3RQcm9ncmVzcy50YXNrU3RhdGUgPSBcIkVycm9yXCIsIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIubmV4dCAmJiB0aGlzLl9wcm9ncmVzc09ic2VydmVyLm5leHQodGhpcy5fbGFzdFByb2dyZXNzKSwgXG4gICAgICAgIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIuZXJyb3IgJiYgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5lcnJvcihlKSwgdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlci5yZWplY3QoZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5vdGlmaWVzIGEgcHJvZ3Jlc3MgdXBkYXRlIG9mIGxvYWRpbmcgYSBidW5kbGUuXG4gICAgICogQHBhcmFtIHByb2dyZXNzIC0gVGhlIG5ldyBwcm9ncmVzcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovICAgIF91cGRhdGVQcm9ncmVzcyhlKSB7XG4gICAgICAgIHRoaXMuX2xhc3RQcm9ncmVzcyA9IGUsIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIubmV4dCAmJiB0aGlzLl9wcm9ncmVzc09ic2VydmVyLm5leHQoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDb25zdGFudCB1c2VkIHRvIGluZGljYXRlIHRoZSBMUlUgZ2FyYmFnZSBjb2xsZWN0aW9uIHNob3VsZCBiZSBkaXNhYmxlZC5cbiAqIFNldCB0aGlzIHZhbHVlIGFzIHRoZSBgY2FjaGVTaXplQnl0ZXNgIG9uIHRoZSBzZXR0aW5ncyBwYXNzZWQgdG8gdGhlXG4gKiB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZS5cbiAqLyBjb25zdCB3ZSA9IC0xO1xuXG4vKipcbiAqIFRoZSBDbG91ZCBGaXJlc3RvcmUgc2VydmljZSBpbnRlcmZhY2UuXG4gKlxuICogRG8gbm90IGNhbGwgdGhpcyBjb25zdHJ1Y3RvciBkaXJlY3RseS4gSW5zdGVhZCwgdXNlIHtAbGluayAoZ2V0RmlyZXN0b3JlOjEpfS5cbiAqLyBjbGFzcyBGaXJlc3RvcmUgZXh0ZW5kcyBGaXJlc3RvcmUkMSB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByKSB7XG4gICAgICAgIHN1cGVyKGUsIHQsIG4sIHIpLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgaXQncyBhIHtAbGluayBGaXJlc3RvcmV9IG9yIEZpcmVzdG9yZSBMaXRlIGluc3RhbmNlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJmaXJlc3RvcmVcIiwgdGhpcy5fcXVldWUgPSBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3QXN5bmNRdWV1ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX0FzeW5jUXVldWVJbXBsO1xuICAgICAgICB9KCksIHRoaXMuX3BlcnNpc3RlbmNlS2V5ID0gKG51bGwgPT0gciA/IHZvaWQgMCA6IHIubmFtZSkgfHwgXCJbREVGQVVMVF1cIjtcbiAgICB9XG4gICAgX3Rlcm1pbmF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpcmVzdG9yZUNsaWVudCB8fCBcbiAgICAgICAgLy8gVGhlIGNsaWVudCBtdXN0IGJlIGluaXRpYWxpemVkIHRvIGVuc3VyZSB0aGF0IGFsbCBzdWJzZXF1ZW50IEFQSVxuICAgICAgICAvLyB1c2FnZSB0aHJvd3MgYW4gZXhjZXB0aW9uLlxuICAgICAgICBfX1BSSVZBVEVfY29uZmlndXJlRmlyZXN0b3JlKHRoaXMpLCB0aGlzLl9maXJlc3RvcmVDbGllbnQudGVybWluYXRlKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEluaXRpYWxpemVzIGEgbmV3IGluc3RhbmNlIG9mIHtAbGluayBGaXJlc3RvcmV9IHdpdGggdGhlIHByb3ZpZGVkIHNldHRpbmdzLlxuICogQ2FuIG9ubHkgYmUgY2FsbGVkIGJlZm9yZSBhbnkgb3RoZXIgZnVuY3Rpb24sIGluY2x1ZGluZ1xuICoge0BsaW5rIChnZXRGaXJlc3RvcmU6MSl9LiBJZiB0aGUgY3VzdG9tIHNldHRpbmdzIGFyZSBlbXB0eSwgdGhpcyBmdW5jdGlvbiBpc1xuICogZXF1aXZhbGVudCB0byBjYWxsaW5nIHtAbGluayAoZ2V0RmlyZXN0b3JlOjEpfS5cbiAqXG4gKiBAcGFyYW0gYXBwIC0gVGhlIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfSB3aXRoIHdoaWNoIHRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB3aWxsXG4gKiBiZSBhc3NvY2lhdGVkLlxuICogQHBhcmFtIHNldHRpbmdzIC0gQSBzZXR0aW5ncyBvYmplY3QgdG8gY29uZmlndXJlIHRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZS5cbiAqIEBwYXJhbSBkYXRhYmFzZUlkIC0gVGhlIG5hbWUgb2YgdGhlIGRhdGFiYXNlLlxuICogQHJldHVybnMgQSBuZXdseSBpbml0aWFsaXplZCB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZS5cbiAqLyBmdW5jdGlvbiBpbml0aWFsaXplRmlyZXN0b3JlKGUsIHQsIG4pIHtcbiAgICBuIHx8IChuID0gXCIoZGVmYXVsdClcIik7XG4gICAgY29uc3QgciA9IF9nZXRQcm92aWRlcihlLCBcImZpcmVzdG9yZVwiKTtcbiAgICBpZiAoci5pc0luaXRpYWxpemVkKG4pKSB7XG4gICAgICAgIGNvbnN0IGUgPSByLmdldEltbWVkaWF0ZSh7XG4gICAgICAgICAgICBpZGVudGlmaWVyOiBuXG4gICAgICAgIH0pLCBpID0gci5nZXRPcHRpb25zKG4pO1xuICAgICAgICBpZiAoZGVlcEVxdWFsKGksIHQpKSByZXR1cm4gZTtcbiAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEMuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJpbml0aWFsaXplRmlyZXN0b3JlKCkgaGFzIGFscmVhZHkgYmVlbiBjYWxsZWQgd2l0aCBkaWZmZXJlbnQgb3B0aW9ucy4gVG8gYXZvaWQgdGhpcyBlcnJvciwgY2FsbCBpbml0aWFsaXplRmlyZXN0b3JlKCkgd2l0aCB0aGUgc2FtZSBvcHRpb25zIGFzIHdoZW4gaXQgd2FzIG9yaWdpbmFsbHkgY2FsbGVkLCBvciBjYWxsIGdldEZpcmVzdG9yZSgpIHRvIHJldHVybiB0aGUgYWxyZWFkeSBpbml0aWFsaXplZCBpbnN0YW5jZS5cIik7XG4gICAgfVxuICAgIGlmICh2b2lkIDAgIT09IHQuY2FjaGVTaXplQnl0ZXMgJiYgdm9pZCAwICE9PSB0LmxvY2FsQ2FjaGUpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDLklOVkFMSURfQVJHVU1FTlQsIFwiY2FjaGUgYW5kIGNhY2hlU2l6ZUJ5dGVzIGNhbm5vdCBiZSBzcGVjaWZpZWQgYXQgdGhlIHNhbWUgdGltZSBhcyBjYWNoZVNpemVCeXRlcyB3aWxsYmUgZGVwcmVjYXRlZC4gSW5zdGVhZCwgc3BlY2lmeSB0aGUgY2FjaGUgc2l6ZSBpbiB0aGUgY2FjaGUgb2JqZWN0XCIpO1xuICAgIGlmICh2b2lkIDAgIT09IHQuY2FjaGVTaXplQnl0ZXMgJiYgLTEgIT09IHQuY2FjaGVTaXplQnl0ZXMgJiYgdC5jYWNoZVNpemVCeXRlcyA8IDEwNDg1NzYpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDLklOVkFMSURfQVJHVU1FTlQsIFwiY2FjaGVTaXplQnl0ZXMgbXVzdCBiZSBhdCBsZWFzdCAxMDQ4NTc2XCIpO1xuICAgIHJldHVybiByLmluaXRpYWxpemUoe1xuICAgICAgICBvcHRpb25zOiB0LFxuICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5cbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gZ2V0RmlyZXN0b3JlKHQsIG4pIHtcbiAgICBjb25zdCByID0gXCJvYmplY3RcIiA9PSB0eXBlb2YgdCA/IHQgOiBnZXRBcHAoKSwgaSA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgPyB0IDogbiB8fCBcIihkZWZhdWx0KVwiLCBzID0gX2dldFByb3ZpZGVyKHIsIFwiZmlyZXN0b3JlXCIpLmdldEltbWVkaWF0ZSh7XG4gICAgICAgIGlkZW50aWZpZXI6IGlcbiAgICB9KTtcbiAgICBpZiAoIXMuX2luaXRpYWxpemVkKSB7XG4gICAgICAgIGNvbnN0IGUgPSBnZXREZWZhdWx0RW11bGF0b3JIb3N0bmFtZUFuZFBvcnQoXCJmaXJlc3RvcmVcIik7XG4gICAgICAgIGUgJiYgY29ubmVjdEZpcmVzdG9yZUVtdWxhdG9yKHMsIC4uLmUpO1xuICAgIH1cbiAgICByZXR1cm4gcztcbn1cblxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiBlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKGUpIHtcbiAgICByZXR1cm4gZS5fZmlyZXN0b3JlQ2xpZW50IHx8IF9fUFJJVkFURV9jb25maWd1cmVGaXJlc3RvcmUoZSksIGUuX2ZpcmVzdG9yZUNsaWVudC52ZXJpZnlOb3RUZXJtaW5hdGVkKCksIFxuICAgIGUuX2ZpcmVzdG9yZUNsaWVudDtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2NvbmZpZ3VyZUZpcmVzdG9yZShlKSB7XG4gICAgdmFyIHQsIG4sIHI7XG4gICAgY29uc3QgaSA9IGUuX2ZyZWV6ZVNldHRpbmdzKCksIHMgPSBmdW5jdGlvbiBfX1BSSVZBVEVfbWFrZURhdGFiYXNlSW5mbyhlLCB0LCBuLCByKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0YWJhc2VJbmZvKGUsIHQsIG4sIHIuaG9zdCwgci5zc2wsIHIuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZywgci5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcsIF9fUFJJVkFURV9jbG9uZUxvbmdQb2xsaW5nT3B0aW9ucyhyLmV4cGVyaW1lbnRhbExvbmdQb2xsaW5nT3B0aW9ucyksIHIudXNlRmV0Y2hTdHJlYW1zKTtcbiAgICB9KGUuX2RhdGFiYXNlSWQsIChudWxsID09PSAodCA9IGUuX2FwcCkgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5vcHRpb25zLmFwcElkKSB8fCBcIlwiLCBlLl9wZXJzaXN0ZW5jZUtleSwgaSk7XG4gICAgZS5fZmlyZXN0b3JlQ2xpZW50ID0gbmV3IEZpcmVzdG9yZUNsaWVudChlLl9hdXRoQ3JlZGVudGlhbHMsIGUuX2FwcENoZWNrQ3JlZGVudGlhbHMsIGUuX3F1ZXVlLCBzKSwgXG4gICAgKG51bGwgPT09IChuID0gaS5sb2NhbENhY2hlKSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLl9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIpICYmIChudWxsID09PSAociA9IGkubG9jYWxDYWNoZSkgfHwgdm9pZCAwID09PSByID8gdm9pZCAwIDogci5fb25saW5lQ29tcG9uZW50UHJvdmlkZXIpICYmIChlLl9maXJlc3RvcmVDbGllbnQuX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIgPSB7XG4gICAgICAgIF9vZmZsaW5lS2luZDogaS5sb2NhbENhY2hlLmtpbmQsXG4gICAgICAgIF9vZmZsaW5lOiBpLmxvY2FsQ2FjaGUuX29mZmxpbmVDb21wb25lbnRQcm92aWRlcixcbiAgICAgICAgX29ubGluZTogaS5sb2NhbENhY2hlLl9vbmxpbmVDb21wb25lbnRQcm92aWRlclxuICAgIH0pO1xufVxuXG4vKipcbiAqIEF0dGVtcHRzIHRvIGVuYWJsZSBwZXJzaXN0ZW50IHN0b3JhZ2UsIGlmIHBvc3NpYmxlLlxuICpcbiAqIE9uIGZhaWx1cmUsIGBlbmFibGVJbmRleGVkRGJQZXJzaXN0ZW5jZSgpYCB3aWxsIHJlamVjdCB0aGUgcHJvbWlzZSBvclxuICogdGhyb3cgYW4gZXhjZXB0aW9uLiBUaGVyZSBhcmUgc2V2ZXJhbCByZWFzb25zIHdoeSB0aGlzIGNhbiBmYWlsLCB3aGljaCBjYW4gYmVcbiAqIGlkZW50aWZpZWQgYnkgdGhlIGBjb2RlYCBvbiB0aGUgZXJyb3IuXG4gKlxuICogICAqIGZhaWxlZC1wcmVjb25kaXRpb246IFRoZSBhcHAgaXMgYWxyZWFkeSBvcGVuIGluIGFub3RoZXIgYnJvd3NlciB0YWIuXG4gKiAgICogdW5pbXBsZW1lbnRlZDogVGhlIGJyb3dzZXIgaXMgaW5jb21wYXRpYmxlIHdpdGggdGhlIG9mZmxpbmUgcGVyc2lzdGVuY2VcbiAqICAgICBpbXBsZW1lbnRhdGlvbi5cbiAqXG4gKiBOb3RlIHRoYXQgZXZlbiBhZnRlciBhIGZhaWx1cmUsIHRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB3aWxsIHJlbWFpblxuICogdXNhYmxlLCBob3dldmVyIG9mZmxpbmUgcGVyc2lzdGVuY2Ugd2lsbCBiZSBkaXNhYmxlZC5cbiAqXG4gKiBOb3RlOiBgZW5hYmxlSW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgbXVzdCBiZSBjYWxsZWQgYmVmb3JlIGFueSBvdGhlciBmdW5jdGlvbnNcbiAqIChvdGhlciB0aGFuIHtAbGluayBpbml0aWFsaXplRmlyZXN0b3JlfSwge0BsaW5rIChnZXRGaXJlc3RvcmU6MSl9IG9yXG4gKiB7QGxpbmsgY2xlYXJJbmRleGVkRGJQZXJzaXN0ZW5jZX0uXG4gKlxuICogUGVyc2lzdGVuY2UgY2Fubm90IGJlIHVzZWQgaW4gYSBOb2RlLmpzIGVudmlyb25tZW50LlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgdG8gZW5hYmxlIHBlcnNpc3RlbmNlIGZvci5cbiAqIEBwYXJhbSBwZXJzaXN0ZW5jZVNldHRpbmdzIC0gT3B0aW9uYWwgc2V0dGluZ3Mgb2JqZWN0IHRvIGNvbmZpZ3VyZVxuICogcGVyc2lzdGVuY2UuXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IHJlcHJlc2VudHMgc3VjY2Vzc2Z1bGx5IGVuYWJsaW5nIHBlcnNpc3RlbnQgc3RvcmFnZS5cbiAqIEBkZXByZWNhdGVkIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSByZW1vdmVkIGluIGEgZnV0dXJlIG1ham9yIHJlbGVhc2UuIEluc3RlYWQsIHNldFxuICogYEZpcmVzdG9yZVNldHRpbmdzLmxvY2FsQ2FjaGVgIHRvIGFuIGluc3RhbmNlIG9mIGBQZXJzaXN0ZW50TG9jYWxDYWNoZWAgdG9cbiAqIHR1cm4gb24gSW5kZXhlZERiIGNhY2hlLiBDYWxsaW5nIHRoaXMgZnVuY3Rpb24gd2hlbiBgRmlyZXN0b3JlU2V0dGluZ3MubG9jYWxDYWNoZWBcbiAqIGlzIGFscmVhZHkgc3BlY2lmaWVkIHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uLlxuICovIGZ1bmN0aW9uIGVuYWJsZUluZGV4ZWREYlBlcnNpc3RlbmNlKGUsIHQpIHtcbiAgICBfX1BSSVZBVEVfdmVyaWZ5Tm90SW5pdGlhbGl6ZWQoZSA9IF9fUFJJVkFURV9jYXN0KGUsIEZpcmVzdG9yZSkpO1xuICAgIGNvbnN0IG4gPSBlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKGUpO1xuICAgIGlmIChuLl91bmluaXRpYWxpemVkQ29tcG9uZW50c1Byb3ZpZGVyKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQy5GQUlMRURfUFJFQ09ORElUSU9OLCBcIlNESyBjYWNoZSBpcyBhbHJlYWR5IHNwZWNpZmllZC5cIik7XG4gICAgX19QUklWQVRFX2xvZ1dhcm4oXCJlbmFibGVJbmRleGVkRGJQZXJzaXN0ZW5jZSgpIHdpbGwgYmUgZGVwcmVjYXRlZCBpbiB0aGUgZnV0dXJlLCB5b3UgY2FuIHVzZSBgRmlyZXN0b3JlU2V0dGluZ3MuY2FjaGVgIGluc3RlYWQuXCIpO1xuICAgIGNvbnN0IHIgPSBlLl9mcmVlemVTZXR0aW5ncygpLCBpID0gbmV3IE9ubGluZUNvbXBvbmVudFByb3ZpZGVyO1xuICAgIHJldHVybiBfX1BSSVZBVEVfc2V0UGVyc2lzdGVuY2VQcm92aWRlcnMobiwgaSwgbmV3IF9fUFJJVkFURV9JbmRleGVkRGJPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIoaSwgci5jYWNoZVNpemVCeXRlcywgbnVsbCA9PSB0ID8gdm9pZCAwIDogdC5mb3JjZU93bmVyc2hpcCkpO1xufVxuXG4vKipcbiAqIEF0dGVtcHRzIHRvIGVuYWJsZSBtdWx0aS10YWIgcGVyc2lzdGVudCBzdG9yYWdlLCBpZiBwb3NzaWJsZS4gSWYgZW5hYmxlZFxuICogYWNyb3NzIGFsbCB0YWJzLCBhbGwgb3BlcmF0aW9ucyBzaGFyZSBhY2Nlc3MgdG8gbG9jYWwgcGVyc2lzdGVuY2UsIGluY2x1ZGluZ1xuICogc2hhcmVkIGV4ZWN1dGlvbiBvZiBxdWVyaWVzIGFuZCBsYXRlbmN5LWNvbXBlbnNhdGVkIGxvY2FsIGRvY3VtZW50IHVwZGF0ZXNcbiAqIGFjcm9zcyBhbGwgY29ubmVjdGVkIGluc3RhbmNlcy5cbiAqXG4gKiBPbiBmYWlsdXJlLCBgZW5hYmxlTXVsdGlUYWJJbmRleGVkRGJQZXJzaXN0ZW5jZSgpYCB3aWxsIHJlamVjdCB0aGUgcHJvbWlzZSBvclxuICogdGhyb3cgYW4gZXhjZXB0aW9uLiBUaGVyZSBhcmUgc2V2ZXJhbCByZWFzb25zIHdoeSB0aGlzIGNhbiBmYWlsLCB3aGljaCBjYW4gYmVcbiAqIGlkZW50aWZpZWQgYnkgdGhlIGBjb2RlYCBvbiB0aGUgZXJyb3IuXG4gKlxuICogICAqIGZhaWxlZC1wcmVjb25kaXRpb246IFRoZSBhcHAgaXMgYWxyZWFkeSBvcGVuIGluIGFub3RoZXIgYnJvd3NlciB0YWIgYW5kXG4gKiAgICAgbXVsdGktdGFiIGlzIG5vdCBlbmFibGVkLlxuICogICAqIHVuaW1wbGVtZW50ZWQ6IFRoZSBicm93c2VyIGlzIGluY29tcGF0aWJsZSB3aXRoIHRoZSBvZmZsaW5lIHBlcnNpc3RlbmNlXG4gKiAgICAgaW1wbGVtZW50YXRpb24uXG4gKlxuICogTm90ZSB0aGF0IGV2ZW4gYWZ0ZXIgYSBmYWlsdXJlLCB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2Ugd2lsbCByZW1haW5cbiAqIHVzYWJsZSwgaG93ZXZlciBvZmZsaW5lIHBlcnNpc3RlbmNlIHdpbGwgYmUgZGlzYWJsZWQuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIFRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB0byBlbmFibGUgcGVyc2lzdGVuY2UgZm9yLlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCByZXByZXNlbnRzIHN1Y2Nlc3NmdWxseSBlbmFibGluZyBwZXJzaXN0ZW50XG4gKiBzdG9yYWdlLlxuICogQGRlcHJlY2F0ZWQgVGhpcyBmdW5jdGlvbiB3aWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgbWFqb3IgcmVsZWFzZS4gSW5zdGVhZCwgc2V0XG4gKiBgRmlyZXN0b3JlU2V0dGluZ3MubG9jYWxDYWNoZWAgdG8gYW4gaW5zdGFuY2Ugb2YgYFBlcnNpc3RlbnRMb2NhbENhY2hlYCB0b1xuICogdHVybiBvbiBpbmRleGVkZGIgY2FjaGUuIENhbGxpbmcgdGhpcyBmdW5jdGlvbiB3aGVuIGBGaXJlc3RvcmVTZXR0aW5ncy5sb2NhbENhY2hlYFxuICogaXMgYWxyZWFkeSBzcGVjaWZpZWQgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24uXG4gKi8gZnVuY3Rpb24gZW5hYmxlTXVsdGlUYWJJbmRleGVkRGJQZXJzaXN0ZW5jZShlKSB7XG4gICAgX19QUklWQVRFX3ZlcmlmeU5vdEluaXRpYWxpemVkKGUgPSBfX1BSSVZBVEVfY2FzdChlLCBGaXJlc3RvcmUpKTtcbiAgICBjb25zdCB0ID0gZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZChlKTtcbiAgICBpZiAodC5fdW5pbml0aWFsaXplZENvbXBvbmVudHNQcm92aWRlcikgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEMuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJTREsgY2FjaGUgaXMgYWxyZWFkeSBzcGVjaWZpZWQuXCIpO1xuICAgIF9fUFJJVkFURV9sb2dXYXJuKFwiZW5hYmxlTXVsdGlUYWJJbmRleGVkRGJQZXJzaXN0ZW5jZSgpIHdpbGwgYmUgZGVwcmVjYXRlZCBpbiB0aGUgZnV0dXJlLCB5b3UgY2FuIHVzZSBgRmlyZXN0b3JlU2V0dGluZ3MuY2FjaGVgIGluc3RlYWQuXCIpO1xuICAgIGNvbnN0IG4gPSBlLl9mcmVlemVTZXR0aW5ncygpLCByID0gbmV3IE9ubGluZUNvbXBvbmVudFByb3ZpZGVyO1xuICAgIHJldHVybiBfX1BSSVZBVEVfc2V0UGVyc2lzdGVuY2VQcm92aWRlcnModCwgciwgbmV3IF9fUFJJVkFURV9NdWx0aVRhYk9mZmxpbmVDb21wb25lbnRQcm92aWRlcihyLCBuLmNhY2hlU2l6ZUJ5dGVzKSk7XG59XG5cbi8qKlxuICogUmVnaXN0ZXJzIGJvdGggdGhlIGBPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXJgIGFuZCBgT25saW5lQ29tcG9uZW50UHJvdmlkZXJgLlxuICogSWYgdGhlIG9wZXJhdGlvbiBmYWlscyB3aXRoIGEgcmVjb3ZlcmFibGUgZXJyb3IgKHNlZVxuICogYGNhblJlY292ZXJGcm9tSW5kZXhlZERiRXJyb3IoKWAgYmVsb3cpLCB0aGUgcmV0dXJuZWQgUHJvbWlzZSBpcyByZWplY3RlZFxuICogYnV0IHRoZSBjbGllbnQgcmVtYWlucyB1c2FibGUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3NldFBlcnNpc3RlbmNlUHJvdmlkZXJzKGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZDtcbiAgICByZXR1cm4gZS5hc3luY1F1ZXVlLmVucXVldWUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IF9fUFJJVkFURV9zZXRPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIoZSwgbiksIGF3YWl0IF9fUFJJVkFURV9zZXRPbmxpbmVDb21wb25lbnRQcm92aWRlcihlLCB0KSwgXG4gICAgICAgICAgICByLnJlc29sdmUoKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGU7XG4gICAgICAgICAgICBpZiAoIV9fUFJJVkFURV9jYW5GYWxsYmFja0Zyb21JbmRleGVkRGJFcnJvcih0KSkgdGhyb3cgdDtcbiAgICAgICAgICAgIF9fUFJJVkFURV9sb2dXYXJuKFwiRXJyb3IgZW5hYmxpbmcgaW5kZXhlZGRiIGNhY2hlLiBGYWxsaW5nIGJhY2sgdG8gbWVtb3J5IGNhY2hlOiBcIiArIHQpLCBcbiAgICAgICAgICAgIHIucmVqZWN0KHQpO1xuICAgICAgICB9XG4gICAgfSkpLnRoZW4oKCgpID0+IHIucHJvbWlzZSkpO1xufVxuXG4vKipcbiAqIENsZWFycyB0aGUgcGVyc2lzdGVudCBzdG9yYWdlLiBUaGlzIGluY2x1ZGVzIHBlbmRpbmcgd3JpdGVzIGFuZCBjYWNoZWRcbiAqIGRvY3VtZW50cy5cbiAqXG4gKiBNdXN0IGJlIGNhbGxlZCB3aGlsZSB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgaXMgbm90IHN0YXJ0ZWQgKGFmdGVyIHRoZSBhcHAgaXNcbiAqIHRlcm1pbmF0ZWQgb3Igd2hlbiB0aGUgYXBwIGlzIGZpcnN0IGluaXRpYWxpemVkKS4gT24gc3RhcnR1cCwgdGhpcyBmdW5jdGlvblxuICogbXVzdCBiZSBjYWxsZWQgYmVmb3JlIG90aGVyIGZ1bmN0aW9ucyAob3RoZXIgdGhhbiB7QGxpbmtcbiAqIGluaXRpYWxpemVGaXJlc3RvcmV9IG9yIHtAbGluayAoZ2V0RmlyZXN0b3JlOjEpfSkpLiBJZiB0aGUge0BsaW5rIEZpcmVzdG9yZX1cbiAqIGluc3RhbmNlIGlzIHN0aWxsIHJ1bm5pbmcsIHRoZSBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQgd2l0aCB0aGUgZXJyb3IgY29kZVxuICogb2YgYGZhaWxlZC1wcmVjb25kaXRpb25gLlxuICpcbiAqIE5vdGU6IGBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlKClgIGlzIHByaW1hcmlseSBpbnRlbmRlZCB0byBoZWxwIHdyaXRlXG4gKiByZWxpYWJsZSB0ZXN0cyB0aGF0IHVzZSBDbG91ZCBGaXJlc3RvcmUuIEl0IHVzZXMgYW4gZWZmaWNpZW50IG1lY2hhbmlzbSBmb3JcbiAqIGRyb3BwaW5nIGV4aXN0aW5nIGRhdGEgYnV0IGRvZXMgbm90IGF0dGVtcHQgdG8gc2VjdXJlbHkgb3ZlcndyaXRlIG9yXG4gKiBvdGhlcndpc2UgbWFrZSBjYWNoZWQgZGF0YSB1bnJlY292ZXJhYmxlLiBGb3IgYXBwbGljYXRpb25zIHRoYXQgYXJlIHNlbnNpdGl2ZVxuICogdG8gdGhlIGRpc2Nsb3N1cmUgb2YgY2FjaGVkIGRhdGEgaW4gYmV0d2VlbiB1c2VyIHNlc3Npb25zLCB3ZSBzdHJvbmdseVxuICogcmVjb21tZW5kIG5vdCBlbmFibGluZyBwZXJzaXN0ZW5jZSBhdCBhbGwuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIFRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB0byBjbGVhciBwZXJzaXN0ZW5jZSBmb3IuXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IGlzIHJlc29sdmVkIHdoZW4gdGhlIHBlcnNpc3RlbnQgc3RvcmFnZSBpc1xuICogY2xlYXJlZC4gT3RoZXJ3aXNlLCB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCB3aXRoIGFuIGVycm9yLlxuICovIGZ1bmN0aW9uIGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UoZSkge1xuICAgIGlmIChlLl9pbml0aWFsaXplZCAmJiAhZS5fdGVybWluYXRlZCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEMuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJQZXJzaXN0ZW5jZSBjYW4gb25seSBiZSBjbGVhcmVkIGJlZm9yZSBhIEZpcmVzdG9yZSBpbnN0YW5jZSBpcyBpbml0aWFsaXplZCBvciBhZnRlciBpdCBpcyB0ZXJtaW5hdGVkLlwiKTtcbiAgICBjb25zdCB0ID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZDtcbiAgICByZXR1cm4gZS5fcXVldWUuZW5xdWV1ZUFuZEZvcmdldEV2ZW5XaGlsZVJlc3RyaWN0ZWQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9pbmRleGVkRGJDbGVhclBlcnNpc3RlbmNlKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIV9fUFJJVkFURV9TaW1wbGVEYi5EKCkpIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZSArIFwibWFpblwiO1xuICAgICAgICAgICAgICAgIGF3YWl0IF9fUFJJVkFURV9TaW1wbGVEYi5kZWxldGUodCk7XG4gICAgICAgICAgICB9KF9fUFJJVkFURV9pbmRleGVkRGJTdG9yYWdlUHJlZml4KGUuX2RhdGFiYXNlSWQsIGUuX3BlcnNpc3RlbmNlS2V5KSksIHQucmVzb2x2ZSgpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0LnJlamVjdChlKTtcbiAgICAgICAgfVxuICAgIH0pKSwgdC5wcm9taXNlO1xufVxuXG4vKipcbiAqIFdhaXRzIHVudGlsIGFsbCBjdXJyZW50bHkgcGVuZGluZyB3cml0ZXMgZm9yIHRoZSBhY3RpdmUgdXNlciBoYXZlIGJlZW5cbiAqIGFja25vd2xlZGdlZCBieSB0aGUgYmFja2VuZC5cbiAqXG4gKiBUaGUgcmV0dXJuZWQgcHJvbWlzZSByZXNvbHZlcyBpbW1lZGlhdGVseSBpZiB0aGVyZSBhcmUgbm8gb3V0c3RhbmRpbmcgd3JpdGVzLlxuICogT3RoZXJ3aXNlLCB0aGUgcHJvbWlzZSB3YWl0cyBmb3IgYWxsIHByZXZpb3VzbHkgaXNzdWVkIHdyaXRlcyAoaW5jbHVkaW5nXG4gKiB0aG9zZSB3cml0dGVuIGluIGEgcHJldmlvdXMgYXBwIHNlc3Npb24pLCBidXQgaXQgZG9lcyBub3Qgd2FpdCBmb3Igd3JpdGVzXG4gKiB0aGF0IHdlcmUgYWRkZWQgYWZ0ZXIgdGhlIGZ1bmN0aW9uIGlzIGNhbGxlZC4gSWYgeW91IHdhbnQgdG8gd2FpdCBmb3JcbiAqIGFkZGl0aW9uYWwgd3JpdGVzLCBjYWxsIGB3YWl0Rm9yUGVuZGluZ1dyaXRlcygpYCBhZ2Fpbi5cbiAqXG4gKiBBbnkgb3V0c3RhbmRpbmcgYHdhaXRGb3JQZW5kaW5nV3JpdGVzKClgIHByb21pc2VzIGFyZSByZWplY3RlZCBkdXJpbmcgdXNlclxuICogY2hhbmdlcy5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB3aGljaCByZXNvbHZlcyB3aGVuIGFsbCBjdXJyZW50bHkgcGVuZGluZyB3cml0ZXMgaGF2ZSBiZWVuXG4gKiBhY2tub3dsZWRnZWQgYnkgdGhlIGJhY2tlbmQuXG4gKi8gZnVuY3Rpb24gd2FpdEZvclBlbmRpbmdXcml0ZXMoZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50V2FpdEZvclBlbmRpbmdXcml0ZXMoZSkge1xuICAgICAgICBjb25zdCB0ID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZDtcbiAgICAgICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBfX1BSSVZBVEVfc3luY0VuZ2luZVJlZ2lzdGVyUGVuZGluZ1dyaXRlc0NhbGxiYWNrKGF3YWl0IF9fUFJJVkFURV9nZXRTeW5jRW5naW5lKGUpLCB0KSkpLCBcbiAgICAgICAgdC5wcm9taXNlO1xuICAgIH0oZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZChlID0gX19QUklWQVRFX2Nhc3QoZSwgRmlyZXN0b3JlKSkpO1xufVxuXG4vKipcbiAqIFJlLWVuYWJsZXMgdXNlIG9mIHRoZSBuZXR3b3JrIGZvciB0aGlzIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIGFmdGVyIGEgcHJpb3JcbiAqIGNhbGwgdG8ge0BsaW5rIGRpc2FibGVOZXR3b3JrfS5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IGlzIHJlc29sdmVkIG9uY2UgdGhlIG5ldHdvcmsgaGFzIGJlZW4gZW5hYmxlZC5cbiAqLyBmdW5jdGlvbiBlbmFibGVOZXR3b3JrKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEVuYWJsZU5ldHdvcmsoZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZChlID0gX19QUklWQVRFX2Nhc3QoZSwgRmlyZXN0b3JlKSkpO1xufVxuXG4vKipcbiAqIERpc2FibGVzIG5ldHdvcmsgdXNhZ2UgZm9yIHRoaXMgaW5zdGFuY2UuIEl0IGNhbiBiZSByZS1lbmFibGVkIHZpYSB7QGxpbmtcbiAqIGVuYWJsZU5ldHdvcmt9LiBXaGlsZSB0aGUgbmV0d29yayBpcyBkaXNhYmxlZCwgYW55IHNuYXBzaG90IGxpc3RlbmVycyxcbiAqIGBnZXREb2MoKWAgb3IgYGdldERvY3MoKWAgY2FsbHMgd2lsbCByZXR1cm4gcmVzdWx0cyBmcm9tIGNhY2hlLCBhbmQgYW55IHdyaXRlXG4gKiBvcGVyYXRpb25zIHdpbGwgYmUgcXVldWVkIHVudGlsIHRoZSBuZXR3b3JrIGlzIHJlc3RvcmVkLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgaXMgcmVzb2x2ZWQgb25jZSB0aGUgbmV0d29yayBoYXMgYmVlbiBkaXNhYmxlZC5cbiAqLyBmdW5jdGlvbiBkaXNhYmxlTmV0d29yayhlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnREaXNhYmxlTmV0d29yayhlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKGUgPSBfX1BSSVZBVEVfY2FzdChlLCBGaXJlc3RvcmUpKSk7XG59XG5cbi8qKlxuICogVGVybWluYXRlcyB0aGUgcHJvdmlkZWQge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UuXG4gKlxuICogQWZ0ZXIgY2FsbGluZyBgdGVybWluYXRlKClgIG9ubHkgdGhlIGBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlKClgIGZ1bmN0aW9uXG4gKiBtYXkgYmUgdXNlZC4gQW55IG90aGVyIGZ1bmN0aW9uIHdpbGwgdGhyb3cgYSBgRmlyZXN0b3JlRXJyb3JgLlxuICpcbiAqIFRvIHJlc3RhcnQgYWZ0ZXIgdGVybWluYXRpb24sIGNyZWF0ZSBhIG5ldyBpbnN0YW5jZSBvZiBGaXJlYmFzZUZpcmVzdG9yZSB3aXRoXG4gKiB7QGxpbmsgKGdldEZpcmVzdG9yZToxKX0uXG4gKlxuICogVGVybWluYXRpb24gZG9lcyBub3QgY2FuY2VsIGFueSBwZW5kaW5nIHdyaXRlcywgYW5kIGFueSBwcm9taXNlcyB0aGF0IGFyZVxuICogYXdhaXRpbmcgYSByZXNwb25zZSBmcm9tIHRoZSBzZXJ2ZXIgd2lsbCBub3QgYmUgcmVzb2x2ZWQuIElmIHlvdSBoYXZlXG4gKiBwZXJzaXN0ZW5jZSBlbmFibGVkLCB0aGUgbmV4dCB0aW1lIHlvdSBzdGFydCB0aGlzIGluc3RhbmNlLCBpdCB3aWxsIHJlc3VtZVxuICogc2VuZGluZyB0aGVzZSB3cml0ZXMgdG8gdGhlIHNlcnZlci5cbiAqXG4gKiBOb3RlOiBVbmRlciBub3JtYWwgY2lyY3Vtc3RhbmNlcywgY2FsbGluZyBgdGVybWluYXRlKClgIGlzIG5vdCByZXF1aXJlZC4gVGhpc1xuICogZnVuY3Rpb24gaXMgdXNlZnVsIG9ubHkgd2hlbiB5b3Ugd2FudCB0byBmb3JjZSB0aGlzIGluc3RhbmNlIHRvIHJlbGVhc2UgYWxsXG4gKiBvZiBpdHMgcmVzb3VyY2VzIG9yIGluIGNvbWJpbmF0aW9uIHdpdGggYGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgdG9cbiAqIGVuc3VyZSB0aGF0IGFsbCBsb2NhbCBzdGF0ZSBpcyBkZXN0cm95ZWQgYmV0d2VlbiB0ZXN0IHJ1bnMuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCBpcyByZXNvbHZlZCB3aGVuIHRoZSBpbnN0YW5jZSBoYXMgYmVlbiBzdWNjZXNzZnVsbHlcbiAqIHRlcm1pbmF0ZWQuXG4gKi8gZnVuY3Rpb24gdGVybWluYXRlKGUpIHtcbiAgICByZXR1cm4gX3JlbW92ZVNlcnZpY2VJbnN0YW5jZShlLmFwcCwgXCJmaXJlc3RvcmVcIiwgZS5fZGF0YWJhc2VJZC5kYXRhYmFzZSksIGUuX2RlbGV0ZSgpO1xufVxuXG4vKipcbiAqIExvYWRzIGEgRmlyZXN0b3JlIGJ1bmRsZSBpbnRvIHRoZSBsb2NhbCBjYWNoZS5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gVGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHRvIGxvYWQgYnVuZGxlcyBmb3IuXG4gKiBAcGFyYW0gYnVuZGxlRGF0YSAtIEFuIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGJ1bmRsZSB0byBiZSBsb2FkZWQuIFZhbGlkXG4gKiBvYmplY3RzIGFyZSBgQXJyYXlCdWZmZXJgLCBgUmVhZGFibGVTdHJlYW08VWludDhBcnJheT5gIG9yIGBzdHJpbmdgLlxuICpcbiAqIEByZXR1cm5zIEEgYExvYWRCdW5kbGVUYXNrYCBvYmplY3QsIHdoaWNoIG5vdGlmaWVzIGNhbGxlcnMgd2l0aCBwcm9ncmVzc1xuICogdXBkYXRlcywgYW5kIGNvbXBsZXRpb24gb3IgZXJyb3IgZXZlbnRzLiBJdCBjYW4gYmUgdXNlZCBhcyBhXG4gKiBgUHJvbWlzZTxMb2FkQnVuZGxlVGFza1Byb2dyZXNzPmAuXG4gKi8gZnVuY3Rpb24gbG9hZEJ1bmRsZShlLCB0KSB7XG4gICAgY29uc3QgbiA9IGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQoZSA9IF9fUFJJVkFURV9jYXN0KGUsIEZpcmVzdG9yZSkpLCByID0gbmV3IExvYWRCdW5kbGVUYXNrO1xuICAgIHJldHVybiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50TG9hZEJ1bmRsZShuLCBlLl9kYXRhYmFzZUlkLCB0LCByKSwgcjtcbn1cblxuLyoqXG4gKiBSZWFkcyBhIEZpcmVzdG9yZSB7QGxpbmsgUXVlcnl9IGZyb20gbG9jYWwgY2FjaGUsIGlkZW50aWZpZWQgYnkgdGhlIGdpdmVuXG4gKiBuYW1lLlxuICpcbiAqIFRoZSBuYW1lZCBxdWVyaWVzIGFyZSBwYWNrYWdlZCAgaW50byBidW5kbGVzIG9uIHRoZSBzZXJ2ZXIgc2lkZSAoYWxvbmdcbiAqIHdpdGggcmVzdWx0aW5nIGRvY3VtZW50cyksIGFuZCBsb2FkZWQgdG8gbG9jYWwgY2FjaGUgdXNpbmcgYGxvYWRCdW5kbGVgLiBPbmNlXG4gKiBpbiBsb2NhbCBjYWNoZSwgdXNlIHRoaXMgbWV0aG9kIHRvIGV4dHJhY3QgYSB7QGxpbmsgUXVlcnl9IGJ5IG5hbWUuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIFRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB0byByZWFkIHRoZSBxdWVyeSBmcm9tLlxuICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgcXVlcnkuXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IGlzIHJlc29sdmVkIHdpdGggdGhlIFF1ZXJ5IG9yIGBudWxsYC5cbiAqLyBmdW5jdGlvbiBuYW1lZFF1ZXJ5KGUsIHQpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEdldE5hbWVkUXVlcnkoZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZChlID0gX19QUklWQVRFX2Nhc3QoZSwgRmlyZXN0b3JlKSksIHQpLnRoZW4oKHQgPT4gdCA/IG5ldyBRdWVyeShlLCBudWxsLCB0LnF1ZXJ5KSA6IG51bGwpKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3ZlcmlmeU5vdEluaXRpYWxpemVkKGUpIHtcbiAgICBpZiAoZS5faW5pdGlhbGl6ZWQgfHwgZS5fdGVybWluYXRlZCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEMuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJGaXJlc3RvcmUgaGFzIGFscmVhZHkgYmVlbiBzdGFydGVkIGFuZCBwZXJzaXN0ZW5jZSBjYW4gbm8gbG9uZ2VyIGJlIGVuYWJsZWQuIFlvdSBjYW4gb25seSBlbmFibGUgcGVyc2lzdGVuY2UgYmVmb3JlIGNhbGxpbmcgYW55IG90aGVyIG1ldGhvZHMgb24gYSBGaXJlc3RvcmUgb2JqZWN0LlwiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYW4gYWdncmVnYXRpb24gdGhhdCBjYW4gYmUgcGVyZm9ybWVkIGJ5IEZpcmVzdG9yZS5cbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xuY2xhc3MgQWdncmVnYXRlRmllbGQge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBBZ2dyZWdhdGVGaWVsZDxUPlxuICAgICAqIEBwYXJhbSBhZ2dyZWdhdGVUeXBlIFNwZWNpZmllcyB0aGUgdHlwZSBvZiBhZ2dyZWdhdGlvbiBvcGVyYXRpb24gdG8gcGVyZm9ybS5cbiAgICAgKiBAcGFyYW0gX2ludGVybmFsRmllbGRQYXRoIE9wdGlvbmFsbHkgc3BlY2lmaWVzIHRoZSBmaWVsZCB0aGF0IGlzIGFnZ3JlZ2F0ZWQuXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZSA9IFwiY291bnRcIiwgdCkge1xuICAgICAgICB0aGlzLl9pbnRlcm5hbEZpZWxkUGF0aCA9IHQsIFxuICAgICAgICAvKiogQSB0eXBlIHN0cmluZyB0byB1bmlxdWVseSBpZGVudGlmeSBpbnN0YW5jZXMgb2YgdGhpcyBjbGFzcy4gKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJBZ2dyZWdhdGVGaWVsZFwiLCB0aGlzLmFnZ3JlZ2F0ZVR5cGUgPSBlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUaGUgcmVzdWx0cyBvZiBleGVjdXRpbmcgYW4gYWdncmVnYXRpb24gcXVlcnkuXG4gKi8gY2xhc3MgQWdncmVnYXRlUXVlcnlTbmFwc2hvdCB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuKSB7XG4gICAgICAgIHRoaXMuX3VzZXJEYXRhV3JpdGVyID0gdCwgdGhpcy5fZGF0YSA9IG4sIFxuICAgICAgICAvKiogQSB0eXBlIHN0cmluZyB0byB1bmlxdWVseSBpZGVudGlmeSBpbnN0YW5jZXMgb2YgdGhpcyBjbGFzcy4gKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJBZ2dyZWdhdGVRdWVyeVNuYXBzaG90XCIsIHRoaXMucXVlcnkgPSBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSByZXN1bHRzIG9mIHRoZSBhZ2dyZWdhdGlvbnMgcGVyZm9ybWVkIG92ZXIgdGhlIHVuZGVybHlpbmdcbiAgICAgKiBxdWVyeS5cbiAgICAgKlxuICAgICAqIFRoZSBrZXlzIG9mIHRoZSByZXR1cm5lZCBvYmplY3Qgd2lsbCBiZSB0aGUgc2FtZSBhcyB0aG9zZSBvZiB0aGVcbiAgICAgKiBgQWdncmVnYXRlU3BlY2Agb2JqZWN0IHNwZWNpZmllZCB0byB0aGUgYWdncmVnYXRpb24gbWV0aG9kLCBhbmQgdGhlIHZhbHVlc1xuICAgICAqIHdpbGwgYmUgdGhlIGNvcnJlc3BvbmRpbmcgYWdncmVnYXRpb24gcmVzdWx0LlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIHJlc3VsdHMgb2YgdGhlIGFnZ3JlZ2F0aW9ucyBwZXJmb3JtZWQgb3ZlciB0aGUgdW5kZXJseWluZ1xuICAgICAqIHF1ZXJ5LlxuICAgICAqLyAgICBkYXRhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdXNlckRhdGFXcml0ZXIuY29udmVydE9iamVjdE1hcCh0aGlzLl9kYXRhKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGltbXV0YWJsZSBvYmplY3QgcmVwcmVzZW50aW5nIGFuIGFycmF5IG9mIGJ5dGVzLlxuICovIGNsYXNzIEJ5dGVzIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5fYnl0ZVN0cmluZyA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgYEJ5dGVzYCBvYmplY3QgZnJvbSB0aGUgZ2l2ZW4gQmFzZTY0IHN0cmluZywgY29udmVydGluZyBpdCB0b1xuICAgICAqIGJ5dGVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGJhc2U2NCAtIFRoZSBCYXNlNjQgc3RyaW5nIHVzZWQgdG8gY3JlYXRlIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKi8gICAgc3RhdGljIGZyb21CYXNlNjRTdHJpbmcoZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBCeXRlcyhCeXRlU3RyaW5nLmZyb21CYXNlNjRTdHJpbmcoZSkpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQy5JTlZBTElEX0FSR1VNRU5ULCBcIkZhaWxlZCB0byBjb25zdHJ1Y3QgZGF0YSBmcm9tIEJhc2U2NCBzdHJpbmc6IFwiICsgZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBgQnl0ZXNgIG9iamVjdCBmcm9tIHRoZSBnaXZlbiBVaW50OEFycmF5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGFycmF5IC0gVGhlIFVpbnQ4QXJyYXkgdXNlZCB0byBjcmVhdGUgdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICBzdGF0aWMgZnJvbVVpbnQ4QXJyYXkoZSkge1xuICAgICAgICByZXR1cm4gbmV3IEJ5dGVzKEJ5dGVTdHJpbmcuZnJvbVVpbnQ4QXJyYXkoZSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB1bmRlcmx5aW5nIGJ5dGVzIGFzIGEgQmFzZTY0LWVuY29kZWQgc3RyaW5nLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIEJhc2U2NC1lbmNvZGVkIHN0cmluZyBjcmVhdGVkIGZyb20gdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICB0b0Jhc2U2NCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J5dGVTdHJpbmcudG9CYXNlNjQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdW5kZXJseWluZyBieXRlcyBpbiBhIG5ldyBgVWludDhBcnJheWAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgVWludDhBcnJheSBjcmVhdGVkIGZyb20gdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICB0b1VpbnQ4QXJyYXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ieXRlU3RyaW5nLnRvVWludDhBcnJheSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKi8gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBcIkJ5dGVzKGJhc2U2NDogXCIgKyB0aGlzLnRvQmFzZTY0KCkgKyBcIilcIjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgYEJ5dGVzYCBvYmplY3QgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBgQnl0ZXNgIG9iamVjdCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBCeXRlc2Agb2JqZWN0IGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICovICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnl0ZVN0cmluZy5pc0VxdWFsKGUuX2J5dGVTdHJpbmcpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBgRmllbGRQYXRoYCByZWZlcnMgdG8gYSBmaWVsZCBpbiBhIGRvY3VtZW50LiBUaGUgcGF0aCBtYXkgY29uc2lzdCBvZiBhXG4gKiBzaW5nbGUgZmllbGQgbmFtZSAocmVmZXJyaW5nIHRvIGEgdG9wLWxldmVsIGZpZWxkIGluIHRoZSBkb2N1bWVudCksIG9yIGFcbiAqIGxpc3Qgb2YgZmllbGQgbmFtZXMgKHJlZmVycmluZyB0byBhIG5lc3RlZCBmaWVsZCBpbiB0aGUgZG9jdW1lbnQpLlxuICpcbiAqIENyZWF0ZSBhIGBGaWVsZFBhdGhgIGJ5IHByb3ZpZGluZyBmaWVsZCBuYW1lcy4gSWYgbW9yZSB0aGFuIG9uZSBmaWVsZFxuICogbmFtZSBpcyBwcm92aWRlZCwgdGhlIHBhdGggd2lsbCBwb2ludCB0byBhIG5lc3RlZCBmaWVsZCBpbiBhIGRvY3VtZW50LlxuICovIGNsYXNzIEZpZWxkUGF0aCB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGBGaWVsZFBhdGhgIGZyb20gdGhlIHByb3ZpZGVkIGZpZWxkIG5hbWVzLiBJZiBtb3JlIHRoYW4gb25lIGZpZWxkXG4gICAgICogbmFtZSBpcyBwcm92aWRlZCwgdGhlIHBhdGggd2lsbCBwb2ludCB0byBhIG5lc3RlZCBmaWVsZCBpbiBhIGRvY3VtZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpZWxkTmFtZXMgLSBBIGxpc3Qgb2YgZmllbGQgbmFtZXMuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoLi4uZSkge1xuICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IGUubGVuZ3RoOyArK3QpIGlmICgwID09PSBlW3RdLmxlbmd0aCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEMuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIGZpZWxkIG5hbWUgYXQgYXJndW1lbnQgJChpICsgMSkuIEZpZWxkIG5hbWVzIG11c3Qgbm90IGJlIGVtcHR5LlwiKTtcbiAgICAgICAgdGhpcy5faW50ZXJuYWxQYXRoID0gbmV3IEZpZWxkUGF0aCQxKGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgRmllbGRQYXRoYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIC0gVGhlIGBGaWVsZFBhdGhgIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoaXMgYEZpZWxkUGF0aGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKi8gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnRlcm5hbFBhdGguaXNFcXVhbChlLl9pbnRlcm5hbFBhdGgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc3BlY2lhbCBzZW50aW5lbCBgRmllbGRQYXRoYCB0byByZWZlciB0byB0aGUgSUQgb2YgYSBkb2N1bWVudC5cbiAqIEl0IGNhbiBiZSB1c2VkIGluIHF1ZXJpZXMgdG8gc29ydCBvciBmaWx0ZXIgYnkgdGhlIGRvY3VtZW50IElELlxuICovIGZ1bmN0aW9uIGRvY3VtZW50SWQoKSB7XG4gICAgcmV0dXJuIG5ldyBGaWVsZFBhdGgoXCJfX25hbWVfX1wiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogU2VudGluZWwgdmFsdWVzIHRoYXQgY2FuIGJlIHVzZWQgd2hlbiB3cml0aW5nIGRvY3VtZW50IGZpZWxkcyB3aXRoIGBzZXQoKWBcbiAqIG9yIGB1cGRhdGUoKWAuXG4gKi8gY2xhc3MgRmllbGRWYWx1ZSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIF9tZXRob2ROYW1lIC0gVGhlIHB1YmxpYyBBUEkgZW5kcG9pbnQgdGhhdCByZXR1cm5zIHRoaXMgY2xhc3MuXG4gICAgICogQGhpZGVjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5fbWV0aG9kTmFtZSA9IGU7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbW11dGFibGUgb2JqZWN0IHJlcHJlc2VudGluZyBhIGdlb2dyYXBoaWMgbG9jYXRpb24gaW4gRmlyZXN0b3JlLiBUaGVcbiAqIGxvY2F0aW9uIGlzIHJlcHJlc2VudGVkIGFzIGxhdGl0dWRlL2xvbmdpdHVkZSBwYWlyLlxuICpcbiAqIExhdGl0dWRlIHZhbHVlcyBhcmUgaW4gdGhlIHJhbmdlIG9mIFstOTAsIDkwXS5cbiAqIExvbmdpdHVkZSB2YWx1ZXMgYXJlIGluIHRoZSByYW5nZSBvZiBbLTE4MCwgMTgwXS5cbiAqLyBjbGFzcyBHZW9Qb2ludCB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBpbW11dGFibGUgYEdlb1BvaW50YCBvYmplY3Qgd2l0aCB0aGUgcHJvdmlkZWQgbGF0aXR1ZGUgYW5kXG4gICAgICogbG9uZ2l0dWRlIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gbGF0aXR1ZGUgLSBUaGUgbGF0aXR1ZGUgYXMgbnVtYmVyIGJldHdlZW4gLTkwIGFuZCA5MC5cbiAgICAgKiBAcGFyYW0gbG9uZ2l0dWRlIC0gVGhlIGxvbmdpdHVkZSBhcyBudW1iZXIgYmV0d2VlbiAtMTgwIGFuZCAxODAuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBpZiAoIWlzRmluaXRlKGUpIHx8IGUgPCAtOTAgfHwgZSA+IDkwKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQy5JTlZBTElEX0FSR1VNRU5ULCBcIkxhdGl0dWRlIG11c3QgYmUgYSBudW1iZXIgYmV0d2VlbiAtOTAgYW5kIDkwLCBidXQgd2FzOiBcIiArIGUpO1xuICAgICAgICBpZiAoIWlzRmluaXRlKHQpIHx8IHQgPCAtMTgwIHx8IHQgPiAxODApIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDLklOVkFMSURfQVJHVU1FTlQsIFwiTG9uZ2l0dWRlIG11c3QgYmUgYSBudW1iZXIgYmV0d2VlbiAtMTgwIGFuZCAxODAsIGJ1dCB3YXM6IFwiICsgdCk7XG4gICAgICAgIHRoaXMuX2xhdCA9IGUsIHRoaXMuX2xvbmcgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgbGF0aXR1ZGUgb2YgdGhpcyBgR2VvUG9pbnRgIGluc3RhbmNlLlxuICAgICAqLyAgICBnZXQgbGF0aXR1ZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sYXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBsb25naXR1ZGUgb2YgdGhpcyBgR2VvUG9pbnRgIGluc3RhbmNlLlxuICAgICAqLyAgICBnZXQgbG9uZ2l0dWRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbG9uZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgYEdlb1BvaW50YCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIC0gVGhlIGBHZW9Qb2ludGAgdG8gY29tcGFyZSBhZ2FpbnN0LlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhpcyBgR2VvUG9pbnRgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICovICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbGF0ID09PSBlLl9sYXQgJiYgdGhpcy5fbG9uZyA9PT0gZS5fbG9uZztcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSBKU09OLXNlcmlhbGl6YWJsZSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIEdlb1BvaW50LiAqLyAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBsYXRpdHVkZTogdGhpcy5fbGF0LFxuICAgICAgICAgICAgbG9uZ2l0dWRlOiB0aGlzLl9sb25nXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFjdHVhbGx5IHByaXZhdGUgdG8gSlMgY29uc3VtZXJzIG9mIG91ciBBUEksIHNvIHRoaXMgZnVuY3Rpb24gaXMgcHJlZml4ZWRcbiAgICAgKiB3aXRoIGFuIHVuZGVyc2NvcmUuXG4gICAgICovICAgIF9jb21wYXJlVG8oZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IodGhpcy5fbGF0LCBlLl9sYXQpIHx8IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKHRoaXMuX2xvbmcsIGUuX2xvbmcpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgU2UgPSAvXl9fLipfXyQvO1xuXG4vKiogVGhlIHJlc3VsdCBvZiBwYXJzaW5nIGRvY3VtZW50IGRhdGEgKGUuZy4gZm9yIGEgc2V0RGF0YSBjYWxsKS4gKi8gY2xhc3MgUGFyc2VkU2V0RGF0YSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICB0aGlzLmRhdGEgPSBlLCB0aGlzLmZpZWxkTWFzayA9IHQsIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gbjtcbiAgICB9XG4gICAgdG9NdXRhdGlvbihlLCB0KSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLmZpZWxkTWFzayA/IG5ldyBfX1BSSVZBVEVfUGF0Y2hNdXRhdGlvbihlLCB0aGlzLmRhdGEsIHRoaXMuZmllbGRNYXNrLCB0LCB0aGlzLmZpZWxkVHJhbnNmb3JtcykgOiBuZXcgX19QUklWQVRFX1NldE11dGF0aW9uKGUsIHRoaXMuZGF0YSwgdCwgdGhpcy5maWVsZFRyYW5zZm9ybXMpO1xuICAgIH1cbn1cblxuLyoqIFRoZSByZXN1bHQgb2YgcGFyc2luZyBcInVwZGF0ZVwiIGRhdGEgKGkuZS4gZm9yIGFuIHVwZGF0ZURhdGEgY2FsbCkuICovIGNsYXNzIFBhcnNlZFVwZGF0ZURhdGEge1xuICAgIGNvbnN0cnVjdG9yKGUsIFxuICAgIC8vIFRoZSBmaWVsZE1hc2sgZG9lcyBub3QgaW5jbHVkZSBkb2N1bWVudCB0cmFuc2Zvcm1zLlxuICAgIHQsIG4pIHtcbiAgICAgICAgdGhpcy5kYXRhID0gZSwgdGhpcy5maWVsZE1hc2sgPSB0LCB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IG47XG4gICAgfVxuICAgIHRvTXV0YXRpb24oZSwgdCkge1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9QYXRjaE11dGF0aW9uKGUsIHRoaXMuZGF0YSwgdGhpcy5maWVsZE1hc2ssIHQsIHRoaXMuZmllbGRUcmFuc2Zvcm1zKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9pc1dyaXRlKGUpIHtcbiAgICBzd2l0Y2ggKGUpIHtcbiAgICAgIGNhc2UgMCAvKiBVc2VyRGF0YVNvdXJjZS5TZXQgKi8gOlxuIC8vIGZhbGwgdGhyb3VnaFxuICAgICAgICAgICAgICBjYXNlIDIgLyogVXNlckRhdGFTb3VyY2UuTWVyZ2VTZXQgKi8gOlxuIC8vIGZhbGwgdGhyb3VnaFxuICAgICAgICAgICAgICBjYXNlIDEgLyogVXNlckRhdGFTb3VyY2UuVXBkYXRlICovIDpcbiAgICAgICAgcmV0dXJuICEwO1xuXG4gICAgICBjYXNlIDMgLyogVXNlckRhdGFTb3VyY2UuQXJndW1lbnQgKi8gOlxuICAgICAgY2FzZSA0IC8qIFVzZXJEYXRhU291cmNlLkFycmF5QXJndW1lbnQgKi8gOlxuICAgICAgICByZXR1cm4gITE7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IGZhaWwoKTtcbiAgICB9XG59XG5cbi8qKiBBIFwiY29udGV4dFwiIG9iamVjdCBwYXNzZWQgYXJvdW5kIHdoaWxlIHBhcnNpbmcgdXNlciBkYXRhLiAqLyBjbGFzcyBfX1BSSVZBVEVfUGFyc2VDb250ZXh0SW1wbCB7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZXMgYSBQYXJzZUNvbnRleHQgd2l0aCB0aGUgZ2l2ZW4gc291cmNlIGFuZCBwYXRoLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNldHRpbmdzIC0gVGhlIHNldHRpbmdzIGZvciB0aGUgcGFyc2VyLlxuICAgICAqIEBwYXJhbSBkYXRhYmFzZUlkIC0gVGhlIGRhdGFiYXNlIElEIG9mIHRoZSBGaXJlc3RvcmUgaW5zdGFuY2UuXG4gICAgICogQHBhcmFtIHNlcmlhbGl6ZXIgLSBUaGUgc2VyaWFsaXplciB0byB1c2UgdG8gZ2VuZXJhdGUgdGhlIFZhbHVlIHByb3RvLlxuICAgICAqIEBwYXJhbSBpZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzIC0gV2hldGhlciB0byBpZ25vcmUgdW5kZWZpbmVkIHByb3BlcnRpZXNcbiAgICAgKiByYXRoZXIgdGhhbiB0aHJvdy5cbiAgICAgKiBAcGFyYW0gZmllbGRUcmFuc2Zvcm1zIC0gQSBtdXRhYmxlIGxpc3Qgb2YgZmllbGQgdHJhbnNmb3JtcyBlbmNvdW50ZXJlZFxuICAgICAqIHdoaWxlIHBhcnNpbmcgdGhlIGRhdGEuXG4gICAgICogQHBhcmFtIGZpZWxkTWFzayAtIEEgbXV0YWJsZSBsaXN0IG9mIGZpZWxkIHBhdGhzIGVuY291bnRlcmVkIHdoaWxlIHBhcnNpbmdcbiAgICAgKiB0aGUgZGF0YS5cbiAgICAgKlxuICAgICAqIFRPRE8oYi8zNDg3MTEzMSk6IFdlIGRvbid0IHN1cHBvcnQgYXJyYXkgcGF0aHMgcmlnaHQgbm93LCBzbyBwYXRoIGNhbiBiZVxuICAgICAqIG51bGwgdG8gaW5kaWNhdGUgdGhlIGNvbnRleHQgcmVwcmVzZW50cyBhbnkgbG9jYXRpb24gd2l0aGluIGFuIGFycmF5IChpblxuICAgICAqIHdoaWNoIGNhc2UgY2VydGFpbiBmZWF0dXJlcyB3aWxsIG5vdCB3b3JrIGFuZCBlcnJvcnMgd2lsbCBiZSBzb21ld2hhdFxuICAgICAqIGNvbXByb21pc2VkKS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByLCBpLCBzKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBlLCB0aGlzLmRhdGFiYXNlSWQgPSB0LCB0aGlzLnNlcmlhbGl6ZXIgPSBuLCB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgPSByLCBcbiAgICAgICAgLy8gTWlub3IgaGFjazogSWYgZmllbGRUcmFuc2Zvcm1zIGlzIHVuZGVmaW5lZCwgd2UgYXNzdW1lIHRoaXMgaXMgYW5cbiAgICAgICAgLy8gZXh0ZXJuYWwgY2FsbCBhbmQgd2UgbmVlZCB0byB2YWxpZGF0ZSB0aGUgZW50aXJlIHBhdGguXG4gICAgICAgIHZvaWQgMCA9PT0gaSAmJiB0aGlzLm11KCksIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gaSB8fCBbXSwgdGhpcy5maWVsZE1hc2sgPSBzIHx8IFtdO1xuICAgIH1cbiAgICBnZXQgcGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3MucGF0aDtcbiAgICB9XG4gICAgZ2V0IGZ1KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy5mdTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSBuZXcgY29udGV4dCB3aXRoIHRoZSBzcGVjaWZpZWQgc2V0dGluZ3Mgb3ZlcndyaXR0ZW4uICovICAgIGd1KGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfUGFyc2VDb250ZXh0SW1wbChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuc2V0dGluZ3MpLCBlKSwgdGhpcy5kYXRhYmFzZUlkLCB0aGlzLnNlcmlhbGl6ZXIsIHRoaXMuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcywgdGhpcy5maWVsZFRyYW5zZm9ybXMsIHRoaXMuZmllbGRNYXNrKTtcbiAgICB9XG4gICAgcHUoZSkge1xuICAgICAgICB2YXIgdDtcbiAgICAgICAgY29uc3QgbiA9IG51bGwgPT09ICh0ID0gdGhpcy5wYXRoKSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0LmNoaWxkKGUpLCByID0gdGhpcy5ndSh7XG4gICAgICAgICAgICBwYXRoOiBuLFxuICAgICAgICAgICAgeXU6ICExXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gci53dShlKSwgcjtcbiAgICB9XG4gICAgU3UoZSkge1xuICAgICAgICB2YXIgdDtcbiAgICAgICAgY29uc3QgbiA9IG51bGwgPT09ICh0ID0gdGhpcy5wYXRoKSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0LmNoaWxkKGUpLCByID0gdGhpcy5ndSh7XG4gICAgICAgICAgICBwYXRoOiBuLFxuICAgICAgICAgICAgeXU6ICExXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gci5tdSgpLCByO1xuICAgIH1cbiAgICBidShlKSB7XG4gICAgICAgIC8vIFRPRE8oYi8zNDg3MTEzMSk6IFdlIGRvbid0IHN1cHBvcnQgYXJyYXkgcGF0aHMgcmlnaHQgbm93OyBzbyBtYWtlIHBhdGhcbiAgICAgICAgLy8gdW5kZWZpbmVkLlxuICAgICAgICByZXR1cm4gdGhpcy5ndSh7XG4gICAgICAgICAgICBwYXRoOiB2b2lkIDAsXG4gICAgICAgICAgICB5dTogITBcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIER1KGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9jcmVhdGVFcnJvcihlLCB0aGlzLnNldHRpbmdzLm1ldGhvZE5hbWUsIHRoaXMuc2V0dGluZ3MuQ3UgfHwgITEsIHRoaXMucGF0aCwgdGhpcy5zZXR0aW5ncy52dSk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zICd0cnVlJyBpZiAnZmllbGRQYXRoJyB3YXMgdHJhdmVyc2VkIHdoZW4gY3JlYXRpbmcgdGhpcyBjb250ZXh0LiAqLyAgICBjb250YWlucyhlKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IHRoaXMuZmllbGRNYXNrLmZpbmQoKHQgPT4gZS5pc1ByZWZpeE9mKHQpKSkgfHwgdm9pZCAwICE9PSB0aGlzLmZpZWxkVHJhbnNmb3Jtcy5maW5kKCh0ID0+IGUuaXNQcmVmaXhPZih0LmZpZWxkKSkpO1xuICAgIH1cbiAgICBtdSgpIHtcbiAgICAgICAgLy8gVE9ETyhiLzM0ODcxMTMxKTogUmVtb3ZlIG51bGwgY2hlY2sgb25jZSB3ZSBoYXZlIHByb3BlciBwYXRocyBmb3IgZmllbGRzXG4gICAgICAgIC8vIHdpdGhpbiBhcnJheXMuXG4gICAgICAgIGlmICh0aGlzLnBhdGgpIGZvciAobGV0IGUgPSAwOyBlIDwgdGhpcy5wYXRoLmxlbmd0aDsgZSsrKSB0aGlzLnd1KHRoaXMucGF0aC5nZXQoZSkpO1xuICAgIH1cbiAgICB3dShlKSB7XG4gICAgICAgIGlmICgwID09PSBlLmxlbmd0aCkgdGhyb3cgdGhpcy5EdShcIkRvY3VtZW50IGZpZWxkcyBtdXN0IG5vdCBiZSBlbXB0eVwiKTtcbiAgICAgICAgaWYgKF9fUFJJVkFURV9pc1dyaXRlKHRoaXMuZnUpICYmIFNlLnRlc3QoZSkpIHRocm93IHRoaXMuRHUoJ0RvY3VtZW50IGZpZWxkcyBjYW5ub3QgYmVnaW4gYW5kIGVuZCB3aXRoIFwiX19cIicpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgZm9yIHBhcnNpbmcgcmF3IHVzZXIgaW5wdXQgKHByb3ZpZGVkIHZpYSB0aGUgQVBJKSBpbnRvIGludGVybmFsIG1vZGVsXG4gKiBjbGFzc2VzLlxuICovIGNsYXNzIF9fUFJJVkFURV9Vc2VyRGF0YVJlYWRlciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICB0aGlzLmRhdGFiYXNlSWQgPSBlLCB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgPSB0LCB0aGlzLnNlcmlhbGl6ZXIgPSBuIHx8IF9fUFJJVkFURV9uZXdTZXJpYWxpemVyKGUpO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyB0b3AtbGV2ZWwgcGFyc2UgY29udGV4dC4gKi8gICAgRnUoZSwgdCwgbiwgciA9ICExKSB7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1BhcnNlQ29udGV4dEltcGwoe1xuICAgICAgICAgICAgZnU6IGUsXG4gICAgICAgICAgICBtZXRob2ROYW1lOiB0LFxuICAgICAgICAgICAgdnU6IG4sXG4gICAgICAgICAgICBwYXRoOiBGaWVsZFBhdGgkMS5lbXB0eVBhdGgoKSxcbiAgICAgICAgICAgIHl1OiAhMSxcbiAgICAgICAgICAgIEN1OiByXG4gICAgICAgIH0sIHRoaXMuZGF0YWJhc2VJZCwgdGhpcy5zZXJpYWxpemVyLCB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX25ld1VzZXJEYXRhUmVhZGVyKGUpIHtcbiAgICBjb25zdCB0ID0gZS5fZnJlZXplU2V0dGluZ3MoKSwgbiA9IF9fUFJJVkFURV9uZXdTZXJpYWxpemVyKGUuX2RhdGFiYXNlSWQpO1xuICAgIHJldHVybiBuZXcgX19QUklWQVRFX1VzZXJEYXRhUmVhZGVyKGUuX2RhdGFiYXNlSWQsICEhdC5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzLCBuKTtcbn1cblxuLyoqIFBhcnNlIGRvY3VtZW50IGRhdGEgZnJvbSBhIHNldCgpIGNhbGwuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9wYXJzZVNldERhdGEoZSwgdCwgbiwgciwgaSwgcyA9IHt9KSB7XG4gICAgY29uc3QgbyA9IGUuRnUocy5tZXJnZSB8fCBzLm1lcmdlRmllbGRzID8gMiAvKiBVc2VyRGF0YVNvdXJjZS5NZXJnZVNldCAqLyA6IDAgLyogVXNlckRhdGFTb3VyY2UuU2V0ICovICwgdCwgbiwgaSk7XG4gICAgX19QUklWQVRFX3ZhbGlkYXRlUGxhaW5PYmplY3QoXCJEYXRhIG11c3QgYmUgYW4gb2JqZWN0LCBidXQgaXQgd2FzOlwiLCBvLCByKTtcbiAgICBjb25zdCBfID0gX19QUklWQVRFX3BhcnNlT2JqZWN0KHIsIG8pO1xuICAgIGxldCBhLCB1O1xuICAgIGlmIChzLm1lcmdlKSBhID0gbmV3IEZpZWxkTWFzayhvLmZpZWxkTWFzayksIHUgPSBvLmZpZWxkVHJhbnNmb3JtczsgZWxzZSBpZiAocy5tZXJnZUZpZWxkcykge1xuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIGZvciAoY29uc3QgciBvZiBzLm1lcmdlRmllbGRzKSB7XG4gICAgICAgICAgICBjb25zdCBpID0gX19QUklWQVRFX2ZpZWxkUGF0aEZyb21Bcmd1bWVudCQxKHQsIHIsIG4pO1xuICAgICAgICAgICAgaWYgKCFvLmNvbnRhaW5zKGkpKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQy5JTlZBTElEX0FSR1VNRU5ULCBgRmllbGQgJyR7aX0nIGlzIHNwZWNpZmllZCBpbiB5b3VyIGZpZWxkIG1hc2sgYnV0IG1pc3NpbmcgZnJvbSB5b3VyIGlucHV0IGRhdGEuYCk7XG4gICAgICAgICAgICBfX1BSSVZBVEVfZmllbGRNYXNrQ29udGFpbnMoZSwgaSkgfHwgZS5wdXNoKGkpO1xuICAgICAgICB9XG4gICAgICAgIGEgPSBuZXcgRmllbGRNYXNrKGUpLCB1ID0gby5maWVsZFRyYW5zZm9ybXMuZmlsdGVyKChlID0+IGEuY292ZXJzKGUuZmllbGQpKSk7XG4gICAgfSBlbHNlIGEgPSBudWxsLCB1ID0gby5maWVsZFRyYW5zZm9ybXM7XG4gICAgcmV0dXJuIG5ldyBQYXJzZWRTZXREYXRhKG5ldyBPYmplY3RWYWx1ZShfKSwgYSwgdSk7XG59XG5cbmNsYXNzIF9fUFJJVkFURV9EZWxldGVGaWVsZFZhbHVlSW1wbCBleHRlbmRzIEZpZWxkVmFsdWUge1xuICAgIF90b0ZpZWxkVHJhbnNmb3JtKGUpIHtcbiAgICAgICAgaWYgKDIgLyogVXNlckRhdGFTb3VyY2UuTWVyZ2VTZXQgKi8gIT09IGUuZnUpIHRocm93IDEgLyogVXNlckRhdGFTb3VyY2UuVXBkYXRlICovID09PSBlLmZ1ID8gZS5EdShgJHt0aGlzLl9tZXRob2ROYW1lfSgpIGNhbiBvbmx5IGFwcGVhciBhdCB0aGUgdG9wIGxldmVsIG9mIHlvdXIgdXBkYXRlIGRhdGFgKSA6IGUuRHUoYCR7dGhpcy5fbWV0aG9kTmFtZX0oKSBjYW5ub3QgYmUgdXNlZCB3aXRoIHNldCgpIHVubGVzcyB5b3UgcGFzcyB7bWVyZ2U6dHJ1ZX1gKTtcbiAgICAgICAgLy8gTm8gdHJhbnNmb3JtIHRvIGFkZCBmb3IgYSBkZWxldGUsIGJ1dCB3ZSBuZWVkIHRvIGFkZCBpdCB0byBvdXJcbiAgICAgICAgLy8gZmllbGRNYXNrIHNvIGl0IGdldHMgZGVsZXRlZC5cbiAgICAgICAgcmV0dXJuIGUuZmllbGRNYXNrLnB1c2goZS5wYXRoKSwgbnVsbDtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiBlIGluc3RhbmNlb2YgX19QUklWQVRFX0RlbGV0ZUZpZWxkVmFsdWVJbXBsO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgY2hpbGQgY29udGV4dCBmb3IgcGFyc2luZyBTZXJpYWxpemFibGVGaWVsZFZhbHVlcy5cbiAqXG4gKiBUaGlzIGlzIGRpZmZlcmVudCB0aGFuIGNhbGxpbmcgYFBhcnNlQ29udGV4dC5jb250ZXh0V2l0aGAgYmVjYXVzZSBpdCBrZWVwc1xuICogdGhlIGZpZWxkVHJhbnNmb3JtcyBhbmQgZmllbGRNYXNrIHNlcGFyYXRlLlxuICpcbiAqIFRoZSBjcmVhdGVkIGNvbnRleHQgaGFzIGl0cyBgZGF0YVNvdXJjZWAgc2V0IHRvIGBVc2VyRGF0YVNvdXJjZS5Bcmd1bWVudGAuXG4gKiBBbHRob3VnaCB0aGVzZSB2YWx1ZXMgYXJlIHVzZWQgd2l0aCB3cml0ZXMsIGFueSBlbGVtZW50cyBpbiB0aGVzZSBGaWVsZFZhbHVlc1xuICogYXJlIG5vdCBjb25zaWRlcmVkIHdyaXRlcyBzaW5jZSB0aGV5IGNhbm5vdCBjb250YWluIGFueSBGaWVsZFZhbHVlIHNlbnRpbmVscyxcbiAqIGV0Yy5cbiAqXG4gKiBAcGFyYW0gZmllbGRWYWx1ZSAtIFRoZSBzZW50aW5lbCBGaWVsZFZhbHVlIGZvciB3aGljaCB0byBjcmVhdGUgYSBjaGlsZFxuICogICAgIGNvbnRleHQuXG4gKiBAcGFyYW0gY29udGV4dCAtIFRoZSBwYXJlbnQgY29udGV4dC5cbiAqIEBwYXJhbSBhcnJheUVsZW1lbnQgLSBXaGV0aGVyIG9yIG5vdCB0aGUgRmllbGRWYWx1ZSBoYXMgYW4gYXJyYXkuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZVNlbnRpbmVsQ2hpbGRDb250ZXh0KGUsIHQsIG4pIHtcbiAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9QYXJzZUNvbnRleHRJbXBsKHtcbiAgICAgICAgZnU6IDMgLyogVXNlckRhdGFTb3VyY2UuQXJndW1lbnQgKi8gLFxuICAgICAgICB2dTogdC5zZXR0aW5ncy52dSxcbiAgICAgICAgbWV0aG9kTmFtZTogZS5fbWV0aG9kTmFtZSxcbiAgICAgICAgeXU6IG5cbiAgICB9LCB0LmRhdGFiYXNlSWQsIHQuc2VyaWFsaXplciwgdC5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzKTtcbn1cblxuY2xhc3MgX19QUklWQVRFX1NlcnZlclRpbWVzdGFtcEZpZWxkVmFsdWVJbXBsIGV4dGVuZHMgRmllbGRWYWx1ZSB7XG4gICAgX3RvRmllbGRUcmFuc2Zvcm0oZSkge1xuICAgICAgICByZXR1cm4gbmV3IEZpZWxkVHJhbnNmb3JtKGUucGF0aCwgbmV3IF9fUFJJVkFURV9TZXJ2ZXJUaW1lc3RhbXBUcmFuc2Zvcm0pO1xuICAgIH1cbiAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfU2VydmVyVGltZXN0YW1wRmllbGRWYWx1ZUltcGw7XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfQXJyYXlVbmlvbkZpZWxkVmFsdWVJbXBsIGV4dGVuZHMgRmllbGRWYWx1ZSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBzdXBlcihlKSwgdGhpcy5NdSA9IHQ7XG4gICAgfVxuICAgIF90b0ZpZWxkVHJhbnNmb3JtKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9jcmVhdGVTZW50aW5lbENoaWxkQ29udGV4dCh0aGlzLCBlLCBcbiAgICAgICAgLyphcnJheT0qLyAhMCksIG4gPSB0aGlzLk11Lm1hcCgoZSA9PiBfX1BSSVZBVEVfcGFyc2VEYXRhKGUsIHQpKSksIHIgPSBuZXcgX19QUklWQVRFX0FycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24obik7XG4gICAgICAgIHJldHVybiBuZXcgRmllbGRUcmFuc2Zvcm0oZS5wYXRoLCByKTtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiBlIGluc3RhbmNlb2YgX19QUklWQVRFX0FycmF5VW5pb25GaWVsZFZhbHVlSW1wbCAmJiBkZWVwRXF1YWwodGhpcy5NdSwgZS5NdSk7XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfQXJyYXlSZW1vdmVGaWVsZFZhbHVlSW1wbCBleHRlbmRzIEZpZWxkVmFsdWUge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgc3VwZXIoZSksIHRoaXMuTXUgPSB0O1xuICAgIH1cbiAgICBfdG9GaWVsZFRyYW5zZm9ybShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfY3JlYXRlU2VudGluZWxDaGlsZENvbnRleHQodGhpcywgZSwgXG4gICAgICAgIC8qYXJyYXk9Ki8gITApLCBuID0gdGhpcy5NdS5tYXAoKGUgPT4gX19QUklWQVRFX3BhcnNlRGF0YShlLCB0KSkpLCByID0gbmV3IF9fUFJJVkFURV9BcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbihuKTtcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFRyYW5zZm9ybShlLnBhdGgsIHIpO1xuICAgIH1cbiAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfQXJyYXlSZW1vdmVGaWVsZFZhbHVlSW1wbCAmJiBkZWVwRXF1YWwodGhpcy5NdSwgZS5NdSk7XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfTnVtZXJpY0luY3JlbWVudEZpZWxkVmFsdWVJbXBsIGV4dGVuZHMgRmllbGRWYWx1ZSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBzdXBlcihlKSwgdGhpcy54dSA9IHQ7XG4gICAgfVxuICAgIF90b0ZpZWxkVHJhbnNmb3JtKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IG5ldyBfX1BSSVZBVEVfTnVtZXJpY0luY3JlbWVudFRyYW5zZm9ybU9wZXJhdGlvbihlLnNlcmlhbGl6ZXIsIHRvTnVtYmVyKGUuc2VyaWFsaXplciwgdGhpcy54dSkpO1xuICAgICAgICByZXR1cm4gbmV3IEZpZWxkVHJhbnNmb3JtKGUucGF0aCwgdCk7XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9OdW1lcmljSW5jcmVtZW50RmllbGRWYWx1ZUltcGwgJiYgdGhpcy54dSA9PT0gZS54dTtcbiAgICB9XG59XG5cbi8qKiBQYXJzZSB1cGRhdGUgZGF0YSBmcm9tIGFuIHVwZGF0ZSgpIGNhbGwuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9wYXJzZVVwZGF0ZURhdGEoZSwgdCwgbiwgcikge1xuICAgIGNvbnN0IGkgPSBlLkZ1KDEgLyogVXNlckRhdGFTb3VyY2UuVXBkYXRlICovICwgdCwgbik7XG4gICAgX19QUklWQVRFX3ZhbGlkYXRlUGxhaW5PYmplY3QoXCJEYXRhIG11c3QgYmUgYW4gb2JqZWN0LCBidXQgaXQgd2FzOlwiLCBpLCByKTtcbiAgICBjb25zdCBzID0gW10sIG8gPSBPYmplY3RWYWx1ZS5lbXB0eSgpO1xuICAgIGZvckVhY2gociwgKChlLCByKSA9PiB7XG4gICAgICAgIGNvbnN0IF8gPSBfX1BSSVZBVEVfZmllbGRQYXRoRnJvbURvdFNlcGFyYXRlZFN0cmluZyh0LCBlLCBuKTtcbiAgICAgICAgLy8gRm9yIENvbXBhdCB0eXBlcywgd2UgaGF2ZSB0byBcImV4dHJhY3RcIiB0aGUgdW5kZXJseWluZyB0eXBlcyBiZWZvcmVcbiAgICAgICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgICAgICAgICAgICAgIHIgPSBnZXRNb2R1bGFySW5zdGFuY2Uocik7XG4gICAgICAgIGNvbnN0IGEgPSBpLlN1KF8pO1xuICAgICAgICBpZiAociBpbnN0YW5jZW9mIF9fUFJJVkFURV9EZWxldGVGaWVsZFZhbHVlSW1wbCkgXG4gICAgICAgIC8vIEFkZCBpdCB0byB0aGUgZmllbGQgbWFzaywgYnV0IGRvbid0IGFkZCBhbnl0aGluZyB0byB1cGRhdGVEYXRhLlxuICAgICAgICBzLnB1c2goXyk7IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZSA9IF9fUFJJVkFURV9wYXJzZURhdGEociwgYSk7XG4gICAgICAgICAgICBudWxsICE9IGUgJiYgKHMucHVzaChfKSwgby5zZXQoXywgZSkpO1xuICAgICAgICB9XG4gICAgfSkpO1xuICAgIGNvbnN0IF8gPSBuZXcgRmllbGRNYXNrKHMpO1xuICAgIHJldHVybiBuZXcgUGFyc2VkVXBkYXRlRGF0YShvLCBfLCBpLmZpZWxkVHJhbnNmb3Jtcyk7XG59XG5cbi8qKiBQYXJzZSB1cGRhdGUgZGF0YSBmcm9tIGEgbGlzdCBvZiBmaWVsZC92YWx1ZSBhcmd1bWVudHMuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9wYXJzZVVwZGF0ZVZhcmFyZ3MoZSwgdCwgbiwgciwgaSwgcykge1xuICAgIGNvbnN0IG8gPSBlLkZ1KDEgLyogVXNlckRhdGFTb3VyY2UuVXBkYXRlICovICwgdCwgbiksIF8gPSBbIF9fUFJJVkFURV9maWVsZFBhdGhGcm9tQXJndW1lbnQkMSh0LCByLCBuKSBdLCBhID0gWyBpIF07XG4gICAgaWYgKHMubGVuZ3RoICUgMiAhPSAwKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQy5JTlZBTElEX0FSR1VNRU5ULCBgRnVuY3Rpb24gJHt0fSgpIG5lZWRzIHRvIGJlIGNhbGxlZCB3aXRoIGFuIGV2ZW4gbnVtYmVyIG9mIGFyZ3VtZW50cyB0aGF0IGFsdGVybmF0ZSBiZXR3ZWVuIGZpZWxkIG5hbWVzIGFuZCB2YWx1ZXMuYCk7XG4gICAgZm9yIChsZXQgZSA9IDA7IGUgPCBzLmxlbmd0aDsgZSArPSAyKSBfLnB1c2goX19QUklWQVRFX2ZpZWxkUGF0aEZyb21Bcmd1bWVudCQxKHQsIHNbZV0pKSwgXG4gICAgYS5wdXNoKHNbZSArIDFdKTtcbiAgICBjb25zdCB1ID0gW10sIGMgPSBPYmplY3RWYWx1ZS5lbXB0eSgpO1xuICAgIC8vIFdlIGl0ZXJhdGUgaW4gcmV2ZXJzZSBvcmRlciB0byBwaWNrIHRoZSBsYXN0IHZhbHVlIGZvciBhIGZpZWxkIGlmIHRoZVxuICAgIC8vIHVzZXIgc3BlY2lmaWVkIHRoZSBmaWVsZCBtdWx0aXBsZSB0aW1lcy5cbiAgICBmb3IgKGxldCBlID0gXy5sZW5ndGggLSAxOyBlID49IDA7IC0tZSkgaWYgKCFfX1BSSVZBVEVfZmllbGRNYXNrQ29udGFpbnModSwgX1tlXSkpIHtcbiAgICAgICAgY29uc3QgdCA9IF9bZV07XG4gICAgICAgIGxldCBuID0gYVtlXTtcbiAgICAgICAgLy8gRm9yIENvbXBhdCB0eXBlcywgd2UgaGF2ZSB0byBcImV4dHJhY3RcIiB0aGUgdW5kZXJseWluZyB0eXBlcyBiZWZvcmVcbiAgICAgICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgICAgICAgICAgICAgIG4gPSBnZXRNb2R1bGFySW5zdGFuY2Uobik7XG4gICAgICAgIGNvbnN0IHIgPSBvLlN1KHQpO1xuICAgICAgICBpZiAobiBpbnN0YW5jZW9mIF9fUFJJVkFURV9EZWxldGVGaWVsZFZhbHVlSW1wbCkgXG4gICAgICAgIC8vIEFkZCBpdCB0byB0aGUgZmllbGQgbWFzaywgYnV0IGRvbid0IGFkZCBhbnl0aGluZyB0byB1cGRhdGVEYXRhLlxuICAgICAgICB1LnB1c2godCk7IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZSA9IF9fUFJJVkFURV9wYXJzZURhdGEobiwgcik7XG4gICAgICAgICAgICBudWxsICE9IGUgJiYgKHUucHVzaCh0KSwgYy5zZXQodCwgZSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGwgPSBuZXcgRmllbGRNYXNrKHUpO1xuICAgIHJldHVybiBuZXcgUGFyc2VkVXBkYXRlRGF0YShjLCBsLCBvLmZpZWxkVHJhbnNmb3Jtcyk7XG59XG5cbi8qKlxuICogUGFyc2UgYSBcInF1ZXJ5IHZhbHVlXCIgKGUuZy4gdmFsdWUgaW4gYSB3aGVyZSBmaWx0ZXIgb3IgYSB2YWx1ZSBpbiBhIGN1cnNvclxuICogYm91bmQpLlxuICpcbiAqIEBwYXJhbSBhbGxvd0FycmF5cyAtIFdoZXRoZXIgdGhlIHF1ZXJ5IHZhbHVlIGlzIGFuIGFycmF5IHRoYXQgbWF5IGRpcmVjdGx5XG4gKiBjb250YWluIGFkZGl0aW9uYWwgYXJyYXlzIChlLmcuIHRoZSBvcGVyYW5kIG9mIGFuIGBpbmAgcXVlcnkpLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9wYXJzZVF1ZXJ5VmFsdWUoZSwgdCwgbiwgciA9ICExKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9wYXJzZURhdGEobiwgZS5GdShyID8gNCAvKiBVc2VyRGF0YVNvdXJjZS5BcnJheUFyZ3VtZW50ICovIDogMyAvKiBVc2VyRGF0YVNvdXJjZS5Bcmd1bWVudCAqLyAsIHQpKTtcbn1cblxuLyoqXG4gKiBQYXJzZXMgdXNlciBkYXRhIHRvIFByb3RvYnVmIFZhbHVlcy5cbiAqXG4gKiBAcGFyYW0gaW5wdXQgLSBEYXRhIHRvIGJlIHBhcnNlZC5cbiAqIEBwYXJhbSBjb250ZXh0IC0gQSBjb250ZXh0IG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgcGF0aCBiZWluZyBwYXJzZWQsXG4gKiB0aGUgc291cmNlIG9mIHRoZSBkYXRhIGJlaW5nIHBhcnNlZCwgZXRjLlxuICogQHJldHVybnMgVGhlIHBhcnNlZCB2YWx1ZSwgb3IgbnVsbCBpZiB0aGUgdmFsdWUgd2FzIGEgRmllbGRWYWx1ZSBzZW50aW5lbFxuICogdGhhdCBzaG91bGQgbm90IGJlIGluY2x1ZGVkIGluIHRoZSByZXN1bHRpbmcgcGFyc2VkIGRhdGEuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3BhcnNlRGF0YShlLCB0KSB7XG4gICAgaWYgKF9fUFJJVkFURV9sb29rc0xpa2VKc29uT2JqZWN0KFxuICAgIC8vIFVud3JhcCB0aGUgQVBJIHR5cGUgZnJvbSB0aGUgQ29tcGF0IFNESy4gVGhpcyB3aWxsIHJldHVybiB0aGUgQVBJIHR5cGVcbiAgICAvLyBmcm9tIGZpcmVzdG9yZS1leHAuXG4gICAgZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSkpIHJldHVybiBfX1BSSVZBVEVfdmFsaWRhdGVQbGFpbk9iamVjdChcIlVuc3VwcG9ydGVkIGZpZWxkIHZhbHVlOlwiLCB0LCBlKSwgXG4gICAgX19QUklWQVRFX3BhcnNlT2JqZWN0KGUsIHQpO1xuICAgIGlmIChlIGluc3RhbmNlb2YgRmllbGRWYWx1ZSkgXG4gICAgLy8gRmllbGRWYWx1ZXMgdXN1YWxseSBwYXJzZSBpbnRvIHRyYW5zZm9ybXMgKGV4Y2VwdCBkZWxldGVGaWVsZCgpKVxuICAgIC8vIGluIHdoaWNoIGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gaW5jbHVkZSB0aGlzIGZpZWxkIGluIG91ciBwYXJzZWQgZGF0YVxuICAgIC8vIChhcyBkb2luZyBzbyB3aWxsIG92ZXJ3cml0ZSB0aGUgZmllbGQgZGlyZWN0bHkgcHJpb3IgdG8gdGhlIHRyYW5zZm9ybVxuICAgIC8vIHRyeWluZyB0byB0cmFuc2Zvcm0gaXQpLiBTbyB3ZSBkb24ndCBhZGQgdGhpcyBsb2NhdGlvbiB0b1xuICAgIC8vIGNvbnRleHQuZmllbGRNYXNrIGFuZCB3ZSByZXR1cm4gbnVsbCBhcyBvdXIgcGFyc2luZyByZXN1bHQuXG4gICAgLyoqXG4gKiBcIlBhcnNlc1wiIHRoZSBwcm92aWRlZCBGaWVsZFZhbHVlSW1wbCwgYWRkaW5nIGFueSBuZWNlc3NhcnkgdHJhbnNmb3JtcyB0b1xuICogY29udGV4dC5maWVsZFRyYW5zZm9ybXMuXG4gKi9cbiAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX3BhcnNlU2VudGluZWxGaWVsZFZhbHVlKGUsIHQpIHtcbiAgICAgICAgLy8gU2VudGluZWxzIGFyZSBvbmx5IHN1cHBvcnRlZCB3aXRoIHdyaXRlcywgYW5kIG5vdCB3aXRoaW4gYXJyYXlzLlxuICAgICAgICBpZiAoIV9fUFJJVkFURV9pc1dyaXRlKHQuZnUpKSB0aHJvdyB0LkR1KGAke2UuX21ldGhvZE5hbWV9KCkgY2FuIG9ubHkgYmUgdXNlZCB3aXRoIHVwZGF0ZSgpIGFuZCBzZXQoKWApO1xuICAgICAgICBpZiAoIXQucGF0aCkgdGhyb3cgdC5EdShgJHtlLl9tZXRob2ROYW1lfSgpIGlzIG5vdCBjdXJyZW50bHkgc3VwcG9ydGVkIGluc2lkZSBhcnJheXNgKTtcbiAgICAgICAgY29uc3QgbiA9IGUuX3RvRmllbGRUcmFuc2Zvcm0odCk7XG4gICAgICAgIG4gJiYgdC5maWVsZFRyYW5zZm9ybXMucHVzaChuKTtcbiAgICB9XG4gICAgLyoqXG4gKiBIZWxwZXIgdG8gcGFyc2UgYSBzY2FsYXIgdmFsdWUgKGkuZS4gbm90IGFuIE9iamVjdCwgQXJyYXksIG9yIEZpZWxkVmFsdWUpXG4gKlxuICogQHJldHVybnMgVGhlIHBhcnNlZCB2YWx1ZVxuICovIChlLCB0KSwgbnVsbDtcbiAgICBpZiAodm9pZCAwID09PSBlICYmIHQuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcykgXG4gICAgLy8gSWYgdGhlIGlucHV0IGlzIHVuZGVmaW5lZCBpdCBjYW4gbmV2ZXIgcGFydGljaXBhdGUgaW4gdGhlIGZpZWxkTWFzaywgc29cbiAgICAvLyBkb24ndCBoYW5kbGUgdGhpcyBiZWxvdy4gSWYgYGlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXNgIGlzIGZhbHNlLFxuICAgIC8vIGBwYXJzZVNjYWxhclZhbHVlYCB3aWxsIHJlamVjdCBhbiB1bmRlZmluZWQgdmFsdWUuXG4gICAgcmV0dXJuIG51bGw7XG4gICAgaWYgKFxuICAgIC8vIElmIGNvbnRleHQucGF0aCBpcyBudWxsIHdlIGFyZSBpbnNpZGUgYW4gYXJyYXkgYW5kIHdlIGRvbid0IHN1cHBvcnRcbiAgICAvLyBmaWVsZCBtYXNrIHBhdGhzIG1vcmUgZ3JhbnVsYXIgdGhhbiB0aGUgdG9wLWxldmVsIGFycmF5LlxuICAgIHQucGF0aCAmJiB0LmZpZWxkTWFzay5wdXNoKHQucGF0aCksIGUgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAvLyBUT0RPKGIvMzQ4NzExMzEpOiBJbmNsdWRlIHRoZSBwYXRoIGNvbnRhaW5pbmcgdGhlIGFycmF5IGluIHRoZSBlcnJvclxuICAgICAgICAvLyBtZXNzYWdlLlxuICAgICAgICAvLyBJbiB0aGUgY2FzZSBvZiBJTiBxdWVyaWVzLCB0aGUgcGFyc2VkIGRhdGEgaXMgYW4gYXJyYXkgKHJlcHJlc2VudGluZ1xuICAgICAgICAvLyB0aGUgc2V0IG9mIHZhbHVlcyB0byBiZSBpbmNsdWRlZCBmb3IgdGhlIElOIHF1ZXJ5KSB0aGF0IG1heSBkaXJlY3RseVxuICAgICAgICAvLyBjb250YWluIGFkZGl0aW9uYWwgYXJyYXlzIChlYWNoIHJlcHJlc2VudGluZyBhbiBpbmRpdmlkdWFsIGZpZWxkXG4gICAgICAgIC8vIHZhbHVlKSwgc28gd2UgZGlzYWJsZSB0aGlzIHZhbGlkYXRpb24uXG4gICAgICAgIGlmICh0LnNldHRpbmdzLnl1ICYmIDQgLyogVXNlckRhdGFTb3VyY2UuQXJyYXlBcmd1bWVudCAqLyAhPT0gdC5mdSkgdGhyb3cgdC5EdShcIk5lc3RlZCBhcnJheXMgYXJlIG5vdCBzdXBwb3J0ZWRcIik7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfcGFyc2VBcnJheShlLCB0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gW107XG4gICAgICAgICAgICBsZXQgciA9IDA7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGkgb2YgZSkge1xuICAgICAgICAgICAgICAgIGxldCBlID0gX19QUklWQVRFX3BhcnNlRGF0YShpLCB0LmJ1KHIpKTtcbiAgICAgICAgICAgICAgICBudWxsID09IGUgJiYgKFxuICAgICAgICAgICAgICAgIC8vIEp1c3QgaW5jbHVkZSBudWxscyBpbiB0aGUgYXJyYXkgZm9yIGZpZWxkcyBiZWluZyByZXBsYWNlZCB3aXRoIGFcbiAgICAgICAgICAgICAgICAvLyBzZW50aW5lbC5cbiAgICAgICAgICAgICAgICBlID0ge1xuICAgICAgICAgICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgICAgICAgICAgfSksIG4ucHVzaChlKSwgcisrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBhcnJheVZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlczogblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0oZSwgdCk7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfcGFyc2VTY2FsYXJWYWx1ZShlLCB0KSB7XG4gICAgICAgIGlmIChudWxsID09PSAoZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSkpIHJldHVybiB7XG4gICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgIH07XG4gICAgICAgIGlmIChcIm51bWJlclwiID09IHR5cGVvZiBlKSByZXR1cm4gdG9OdW1iZXIodC5zZXJpYWxpemVyLCBlKTtcbiAgICAgICAgaWYgKFwiYm9vbGVhblwiID09IHR5cGVvZiBlKSByZXR1cm4ge1xuICAgICAgICAgICAgYm9vbGVhblZhbHVlOiBlXG4gICAgICAgIH07XG4gICAgICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiBlKSByZXR1cm4ge1xuICAgICAgICAgICAgc3RyaW5nVmFsdWU6IGVcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gVGltZXN0YW1wLmZyb21EYXRlKGUpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXBWYWx1ZTogdG9UaW1lc3RhbXAodC5zZXJpYWxpemVyLCBuKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIFRpbWVzdGFtcCkge1xuICAgICAgICAgICAgLy8gRmlyZXN0b3JlIGJhY2tlbmQgdHJ1bmNhdGVzIHByZWNpc2lvbiBkb3duIHRvIG1pY3Jvc2Vjb25kcy4gVG8gZW5zdXJlXG4gICAgICAgICAgICAvLyBvZmZsaW5lIG1vZGUgd29ya3MgdGhlIHNhbWUgd2l0aCByZWdhcmRzIHRvIHRydW5jYXRpb24sIHBlcmZvcm0gdGhlXG4gICAgICAgICAgICAvLyB0cnVuY2F0aW9uIGltbWVkaWF0ZWx5IHdpdGhvdXQgd2FpdGluZyBmb3IgdGhlIGJhY2tlbmQgdG8gZG8gdGhhdC5cbiAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgVGltZXN0YW1wKGUuc2Vjb25kcywgMWUzICogTWF0aC5mbG9vcihlLm5hbm9zZWNvbmRzIC8gMWUzKSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRpbWVzdGFtcFZhbHVlOiB0b1RpbWVzdGFtcCh0LnNlcmlhbGl6ZXIsIG4pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgR2VvUG9pbnQpIHJldHVybiB7XG4gICAgICAgICAgICBnZW9Qb2ludFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgbGF0aXR1ZGU6IGUubGF0aXR1ZGUsXG4gICAgICAgICAgICAgICAgbG9uZ2l0dWRlOiBlLmxvbmdpdHVkZVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEJ5dGVzKSByZXR1cm4ge1xuICAgICAgICAgICAgYnl0ZXNWYWx1ZTogX19QUklWQVRFX3RvQnl0ZXModC5zZXJpYWxpemVyLCBlLl9ieXRlU3RyaW5nKVxuICAgICAgICB9O1xuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIERvY3VtZW50UmVmZXJlbmNlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5kYXRhYmFzZUlkLCByID0gZS5maXJlc3RvcmUuX2RhdGFiYXNlSWQ7XG4gICAgICAgICAgICBpZiAoIXIuaXNFcXVhbChuKSkgdGhyb3cgdC5EdShgRG9jdW1lbnQgcmVmZXJlbmNlIGlzIGZvciBkYXRhYmFzZSAke3IucHJvamVjdElkfS8ke3IuZGF0YWJhc2V9IGJ1dCBzaG91bGQgYmUgZm9yIGRhdGFiYXNlICR7bi5wcm9qZWN0SWR9LyR7bi5kYXRhYmFzZX1gKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcmVmZXJlbmNlVmFsdWU6IF9fUFJJVkFURV90b1Jlc291cmNlTmFtZShlLmZpcmVzdG9yZS5fZGF0YWJhc2VJZCB8fCB0LmRhdGFiYXNlSWQsIGUuX2tleS5wYXRoKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyB0LkR1KGBVbnN1cHBvcnRlZCBmaWVsZCB2YWx1ZTogJHtfX1BSSVZBVEVfdmFsdWVEZXNjcmlwdGlvbihlKX1gKTtcbiAgICB9XG4gICAgLyoqXG4gKiBDaGVja3Mgd2hldGhlciBhbiBvYmplY3QgbG9va3MgbGlrZSBhIEpTT04gb2JqZWN0IHRoYXQgc2hvdWxkIGJlIGNvbnZlcnRlZFxuICogaW50byBhIHN0cnVjdC4gTm9ybWFsIGNsYXNzL3Byb3RvdHlwZSBpbnN0YW5jZXMgYXJlIGNvbnNpZGVyZWQgdG8gbG9vayBsaWtlXG4gKiBKU09OIG9iamVjdHMgc2luY2UgdGhleSBzaG91bGQgYmUgY29udmVydGVkIHRvIGEgc3RydWN0IHZhbHVlLiBBcnJheXMsIERhdGVzLFxuICogR2VvUG9pbnRzLCBldGMuIGFyZSBub3QgY29uc2lkZXJlZCB0byBsb29rIGxpa2UgSlNPTiBvYmplY3RzIHNpbmNlIHRoZXkgbWFwXG4gKiB0byBzcGVjaWZpYyBGaWVsZFZhbHVlIHR5cGVzIG90aGVyIHRoYW4gT2JqZWN0VmFsdWUuXG4gKi8gKGUsIHQpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfcGFyc2VPYmplY3QoZSwgdCkge1xuICAgIGNvbnN0IG4gPSB7fTtcbiAgICByZXR1cm4gaXNFbXB0eShlKSA/IFxuICAgIC8vIElmIHdlIGVuY291bnRlciBhbiBlbXB0eSBvYmplY3QsIHdlIGV4cGxpY2l0bHkgYWRkIGl0IHRvIHRoZSB1cGRhdGVcbiAgICAvLyBtYXNrIHRvIGVuc3VyZSB0aGF0IHRoZSBzZXJ2ZXIgY3JlYXRlcyBhIG1hcCBlbnRyeS5cbiAgICB0LnBhdGggJiYgdC5wYXRoLmxlbmd0aCA+IDAgJiYgdC5maWVsZE1hc2sucHVzaCh0LnBhdGgpIDogZm9yRWFjaChlLCAoKGUsIHIpID0+IHtcbiAgICAgICAgY29uc3QgaSA9IF9fUFJJVkFURV9wYXJzZURhdGEociwgdC5wdShlKSk7XG4gICAgICAgIG51bGwgIT0gaSAmJiAobltlXSA9IGkpO1xuICAgIH0pKSwge1xuICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgZmllbGRzOiBuXG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfbG9va3NMaWtlSnNvbk9iamVjdChlKSB7XG4gICAgcmV0dXJuICEoXCJvYmplY3RcIiAhPSB0eXBlb2YgZSB8fCBudWxsID09PSBlIHx8IGUgaW5zdGFuY2VvZiBBcnJheSB8fCBlIGluc3RhbmNlb2YgRGF0ZSB8fCBlIGluc3RhbmNlb2YgVGltZXN0YW1wIHx8IGUgaW5zdGFuY2VvZiBHZW9Qb2ludCB8fCBlIGluc3RhbmNlb2YgQnl0ZXMgfHwgZSBpbnN0YW5jZW9mIERvY3VtZW50UmVmZXJlbmNlIHx8IGUgaW5zdGFuY2VvZiBGaWVsZFZhbHVlKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3ZhbGlkYXRlUGxhaW5PYmplY3QoZSwgdCwgbikge1xuICAgIGlmICghX19QUklWQVRFX2xvb2tzTGlrZUpzb25PYmplY3QobikgfHwgIWZ1bmN0aW9uIF9fUFJJVkFURV9pc1BsYWluT2JqZWN0KGUpIHtcbiAgICAgICAgcmV0dXJuIFwib2JqZWN0XCIgPT0gdHlwZW9mIGUgJiYgbnVsbCAhPT0gZSAmJiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKGUpID09PSBPYmplY3QucHJvdG90eXBlIHx8IG51bGwgPT09IE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSk7XG4gICAgfShuKSkge1xuICAgICAgICBjb25zdCByID0gX19QUklWQVRFX3ZhbHVlRGVzY3JpcHRpb24obik7XG4gICAgICAgIHRocm93IFwiYW4gb2JqZWN0XCIgPT09IHIgPyB0LkR1KGUgKyBcIiBhIGN1c3RvbSBvYmplY3RcIikgOiB0LkR1KGUgKyBcIiBcIiArIHIpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdGhhdCBjYWxscyBmcm9tRG90U2VwYXJhdGVkU3RyaW5nKCkgYnV0IHdyYXBzIGFueSBlcnJvciB0aHJvd24uXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2ZpZWxkUGF0aEZyb21Bcmd1bWVudCQxKGUsIHQsIG4pIHtcbiAgICBpZiAoKFxuICAgIC8vIElmIHJlcXVpcmVkLCByZXBsYWNlIHRoZSBGaWVsZFBhdGggQ29tcGF0IGNsYXNzIHdpdGggd2l0aCB0aGUgZmlyZXN0b3JlLWV4cFxuICAgIC8vIEZpZWxkUGF0aC5cbiAgICB0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpKSBpbnN0YW5jZW9mIEZpZWxkUGF0aCkgcmV0dXJuIHQuX2ludGVybmFsUGF0aDtcbiAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCkgcmV0dXJuIF9fUFJJVkFURV9maWVsZFBhdGhGcm9tRG90U2VwYXJhdGVkU3RyaW5nKGUsIHQpO1xuICAgIHRocm93IF9fUFJJVkFURV9jcmVhdGVFcnJvcihcIkZpZWxkIHBhdGggYXJndW1lbnRzIG11c3QgYmUgb2YgdHlwZSBzdHJpbmcgb3IgXCIsIGUsIFxuICAgIC8qIGhhc0NvbnZlcnRlcj0gKi8gITEsIFxuICAgIC8qIHBhdGg9ICovIHZvaWQgMCwgbik7XG59XG5cbi8qKlxuICogTWF0Y2hlcyBhbnkgY2hhcmFjdGVycyBpbiBhIGZpZWxkIHBhdGggc3RyaW5nIHRoYXQgYXJlIHJlc2VydmVkLlxuICovIGNvbnN0IGJlID0gbmV3IFJlZ0V4cChcIlt+XFxcXCovXFxcXFtcXFxcXV1cIik7XG5cbi8qKlxuICogV3JhcHMgZnJvbURvdFNlcGFyYXRlZFN0cmluZyB3aXRoIGFuIGVycm9yIG1lc3NhZ2UgYWJvdXQgdGhlIG1ldGhvZCB0aGF0XG4gKiB3YXMgdGhyb3duLlxuICogQHBhcmFtIG1ldGhvZE5hbWUgLSBUaGUgcHVibGljbHkgdmlzaWJsZSBtZXRob2QgbmFtZVxuICogQHBhcmFtIHBhdGggLSBUaGUgZG90LXNlcGFyYXRlZCBzdHJpbmcgZm9ybSBvZiBhIGZpZWxkIHBhdGggd2hpY2ggd2lsbCBiZVxuICogc3BsaXQgb24gZG90cy5cbiAqIEBwYXJhbSB0YXJnZXREb2MgLSBUaGUgZG9jdW1lbnQgYWdhaW5zdCB3aGljaCB0aGUgZmllbGQgcGF0aCB3aWxsIGJlXG4gKiBldmFsdWF0ZWQuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2ZpZWxkUGF0aEZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcoZSwgdCwgbikge1xuICAgIGlmICh0LnNlYXJjaChiZSkgPj0gMCkgdGhyb3cgX19QUklWQVRFX2NyZWF0ZUVycm9yKGBJbnZhbGlkIGZpZWxkIHBhdGggKCR7dH0pLiBQYXRocyBtdXN0IG5vdCBjb250YWluICd+JywgJyonLCAnLycsICdbJywgb3IgJ10nYCwgZSwgXG4gICAgLyogaGFzQ29udmVydGVyPSAqLyAhMSwgXG4gICAgLyogcGF0aD0gKi8gdm9pZCAwLCBuKTtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gbmV3IEZpZWxkUGF0aCguLi50LnNwbGl0KFwiLlwiKSkuX2ludGVybmFsUGF0aDtcbiAgICB9IGNhdGNoIChyKSB7XG4gICAgICAgIHRocm93IF9fUFJJVkFURV9jcmVhdGVFcnJvcihgSW52YWxpZCBmaWVsZCBwYXRoICgke3R9KS4gUGF0aHMgbXVzdCBub3QgYmUgZW1wdHksIGJlZ2luIHdpdGggJy4nLCBlbmQgd2l0aCAnLicsIG9yIGNvbnRhaW4gJy4uJ2AsIGUsIFxuICAgICAgICAvKiBoYXNDb252ZXJ0ZXI9ICovICExLCBcbiAgICAgICAgLyogcGF0aD0gKi8gdm9pZCAwLCBuKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jcmVhdGVFcnJvcihlLCB0LCBuLCByLCBpKSB7XG4gICAgY29uc3QgcyA9IHIgJiYgIXIuaXNFbXB0eSgpLCBvID0gdm9pZCAwICE9PSBpO1xuICAgIGxldCBfID0gYEZ1bmN0aW9uICR7dH0oKSBjYWxsZWQgd2l0aCBpbnZhbGlkIGRhdGFgO1xuICAgIG4gJiYgKF8gKz0gXCIgKHZpYSBgdG9GaXJlc3RvcmUoKWApXCIpLCBfICs9IFwiLiBcIjtcbiAgICBsZXQgYSA9IFwiXCI7XG4gICAgcmV0dXJuIChzIHx8IG8pICYmIChhICs9IFwiIChmb3VuZFwiLCBzICYmIChhICs9IGAgaW4gZmllbGQgJHtyfWApLCBvICYmIChhICs9IGAgaW4gZG9jdW1lbnQgJHtpfWApLCBcbiAgICBhICs9IFwiKVwiKSwgbmV3IEZpcmVzdG9yZUVycm9yKEMuSU5WQUxJRF9BUkdVTUVOVCwgXyArIGUgKyBhKTtcbn1cblxuLyoqIENoZWNrcyBgaGF5c3RhY2tgIGlmIEZpZWxkUGF0aCBgbmVlZGxlYCBpcyBwcmVzZW50LiBSdW5zIGluIE8obikuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9maWVsZE1hc2tDb250YWlucyhlLCB0KSB7XG4gICAgcmV0dXJuIGUuc29tZSgoZSA9PiBlLmlzRXF1YWwodCkpKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBgRG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbnMgZGF0YSByZWFkIGZyb20gYSBkb2N1bWVudCBpbiB5b3VyIEZpcmVzdG9yZVxuICogZGF0YWJhc2UuIFRoZSBkYXRhIGNhbiBiZSBleHRyYWN0ZWQgd2l0aCBgLmRhdGEoKWAgb3IgYC5nZXQoPGZpZWxkPilgIHRvXG4gKiBnZXQgYSBzcGVjaWZpYyBmaWVsZC5cbiAqXG4gKiBGb3IgYSBgRG9jdW1lbnRTbmFwc2hvdGAgdGhhdCBwb2ludHMgdG8gYSBub24tZXhpc3RpbmcgZG9jdW1lbnQsIGFueSBkYXRhXG4gKiBhY2Nlc3Mgd2lsbCByZXR1cm4gJ3VuZGVmaW5lZCcuIFlvdSBjYW4gdXNlIHRoZSBgZXhpc3RzKClgIG1ldGhvZCB0b1xuICogZXhwbGljaXRseSB2ZXJpZnkgYSBkb2N1bWVudCdzIGV4aXN0ZW5jZS5cbiAqLyBjbGFzcyBEb2N1bWVudFNuYXBzaG90JDEge1xuICAgIC8vIE5vdGU6IFRoaXMgY2xhc3MgaXMgc3RyaXBwZWQgZG93biB2ZXJzaW9uIG9mIHRoZSBEb2N1bWVudFNuYXBzaG90IGluXG4gICAgLy8gdGhlIGxlZ2FjeSBTREsuIFRoZSBjaGFuZ2VzIGFyZTpcbiAgICAvLyAtIE5vIHN1cHBvcnQgZm9yIFNuYXBzaG90TWV0YWRhdGEuXG4gICAgLy8gLSBObyBzdXBwb3J0IGZvciBTbmFwc2hvdE9wdGlvbnMuXG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgcHJvdGVjdGVkICovXG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgciwgaSkge1xuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSBlLCB0aGlzLl91c2VyRGF0YVdyaXRlciA9IHQsIHRoaXMuX2tleSA9IG4sIHRoaXMuX2RvY3VtZW50ID0gciwgXG4gICAgICAgIHRoaXMuX2NvbnZlcnRlciA9IGk7XG4gICAgfVxuICAgIC8qKiBQcm9wZXJ0eSBvZiB0aGUgYERvY3VtZW50U25hcHNob3RgIHRoYXQgcHJvdmlkZXMgdGhlIGRvY3VtZW50J3MgSUQuICovICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2tleS5wYXRoLmxhc3RTZWdtZW50KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBgRG9jdW1lbnRSZWZlcmVuY2VgIGZvciB0aGUgZG9jdW1lbnQgaW5jbHVkZWQgaW4gdGhlIGBEb2N1bWVudFNuYXBzaG90YC5cbiAgICAgKi8gICAgZ2V0IHJlZigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFJlZmVyZW5jZSh0aGlzLl9maXJlc3RvcmUsIHRoaXMuX2NvbnZlcnRlciwgdGhpcy5fa2V5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2lnbmFscyB3aGV0aGVyIG9yIG5vdCB0aGUgZG9jdW1lbnQgYXQgdGhlIHNuYXBzaG90J3MgbG9jYXRpb24gZXhpc3RzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgZG9jdW1lbnQgZXhpc3RzLlxuICAgICAqLyAgICBleGlzdHMoKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLl9kb2N1bWVudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IGFzIGFuIGBPYmplY3RgLiBSZXR1cm5zIGB1bmRlZmluZWRgIGlmXG4gICAgICogdGhlIGRvY3VtZW50IGRvZXNuJ3QgZXhpc3QuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBbiBgT2JqZWN0YCBjb250YWluaW5nIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IG9yIGB1bmRlZmluZWRgXG4gICAgICogaWYgdGhlIGRvY3VtZW50IGRvZXNuJ3QgZXhpc3QuXG4gICAgICovICAgIGRhdGEoKSB7XG4gICAgICAgIGlmICh0aGlzLl9kb2N1bWVudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2NvbnZlcnRlcikge1xuICAgICAgICAgICAgICAgIC8vIFdlIG9ubHkgd2FudCB0byB1c2UgdGhlIGNvbnZlcnRlciBhbmQgY3JlYXRlIGEgbmV3IERvY3VtZW50U25hcHNob3RcbiAgICAgICAgICAgICAgICAvLyBpZiBhIGNvbnZlcnRlciBoYXMgYmVlbiBwcm92aWRlZC5cbiAgICAgICAgICAgICAgICBjb25zdCBlID0gbmV3IFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCQxKHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fdXNlckRhdGFXcml0ZXIsIHRoaXMuX2tleSwgdGhpcy5fZG9jdW1lbnQsIFxuICAgICAgICAgICAgICAgIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnZlcnRlci5mcm9tRmlyZXN0b3JlKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJEYXRhV3JpdGVyLmNvbnZlcnRWYWx1ZSh0aGlzLl9kb2N1bWVudC5kYXRhLnZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGZpZWxkIHNwZWNpZmllZCBieSBgZmllbGRQYXRoYC4gUmV0dXJucyBgdW5kZWZpbmVkYCBpZiB0aGVcbiAgICAgKiBkb2N1bWVudCBvciBmaWVsZCBkb2Vzbid0IGV4aXN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpZWxkUGF0aCAtIFRoZSBwYXRoIChmb3IgZXhhbXBsZSAnZm9vJyBvciAnZm9vLmJhcicpIHRvIGEgc3BlY2lmaWNcbiAgICAgKiBmaWVsZC5cbiAgICAgKiBAcmV0dXJucyBUaGUgZGF0YSBhdCB0aGUgc3BlY2lmaWVkIGZpZWxkIGxvY2F0aW9uIG9yIHVuZGVmaW5lZCBpZiBubyBzdWNoXG4gICAgICogZmllbGQgZXhpc3RzIGluIHRoZSBkb2N1bWVudC5cbiAgICAgKi9cbiAgICAvLyBXZSBhcmUgdXNpbmcgYGFueWAgaGVyZSB0byBhdm9pZCBhbiBleHBsaWNpdCBjYXN0IGJ5IG91ciB1c2Vycy5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGdldChlKSB7XG4gICAgICAgIGlmICh0aGlzLl9kb2N1bWVudCkge1xuICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuX2RvY3VtZW50LmRhdGEuZmllbGQoX19QUklWQVRFX2ZpZWxkUGF0aEZyb21Bcmd1bWVudChcIkRvY3VtZW50U25hcHNob3QuZ2V0XCIsIGUpKTtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSB0KSByZXR1cm4gdGhpcy5fdXNlckRhdGFXcml0ZXIuY29udmVydFZhbHVlKHQpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEEgYFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbnMgZGF0YSByZWFkIGZyb20gYSBkb2N1bWVudCBpbiB5b3VyXG4gKiBGaXJlc3RvcmUgZGF0YWJhc2UgYXMgcGFydCBvZiBhIHF1ZXJ5LiBUaGUgZG9jdW1lbnQgaXMgZ3VhcmFudGVlZCB0byBleGlzdFxuICogYW5kIGl0cyBkYXRhIGNhbiBiZSBleHRyYWN0ZWQgd2l0aCBgLmRhdGEoKWAgb3IgYC5nZXQoPGZpZWxkPilgIHRvIGdldCBhXG4gKiBzcGVjaWZpYyBmaWVsZC5cbiAqXG4gKiBBIGBRdWVyeURvY3VtZW50U25hcHNob3RgIG9mZmVycyB0aGUgc2FtZSBBUEkgc3VyZmFjZSBhcyBhXG4gKiBgRG9jdW1lbnRTbmFwc2hvdGAuIFNpbmNlIHF1ZXJ5IHJlc3VsdHMgY29udGFpbiBvbmx5IGV4aXN0aW5nIGRvY3VtZW50cywgdGhlXG4gKiBgZXhpc3RzYCBwcm9wZXJ0eSB3aWxsIGFsd2F5cyBiZSB0cnVlIGFuZCBgZGF0YSgpYCB3aWxsIG5ldmVyIHJldHVyblxuICogJ3VuZGVmaW5lZCcuXG4gKi8gY2xhc3MgUXVlcnlEb2N1bWVudFNuYXBzaG90JDEgZXh0ZW5kcyBEb2N1bWVudFNuYXBzaG90JDEge1xuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBhcyBhbiBgT2JqZWN0YC5cbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEByZXR1cm5zIEFuIGBPYmplY3RgIGNvbnRhaW5pbmcgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICovXG4gICAgZGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmRhdGEoKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRoYXQgY2FsbHMgYGZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcoKWAgYnV0IHdyYXBzIGFueSBlcnJvciB0aHJvd24uXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2ZpZWxkUGF0aEZyb21Bcmd1bWVudChlLCB0KSB7XG4gICAgcmV0dXJuIFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgPyBfX1BSSVZBVEVfZmllbGRQYXRoRnJvbURvdFNlcGFyYXRlZFN0cmluZyhlLCB0KSA6IHQgaW5zdGFuY2VvZiBGaWVsZFBhdGggPyB0Ll9pbnRlcm5hbFBhdGggOiB0Ll9kZWxlZ2F0ZS5faW50ZXJuYWxQYXRoO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVIYXNFeHBsaWNpdE9yZGVyQnlGb3JMaW1pdFRvTGFzdChlKSB7XG4gICAgaWYgKFwiTFwiIC8qIExpbWl0VHlwZS5MYXN0ICovID09PSBlLmxpbWl0VHlwZSAmJiAwID09PSBlLmV4cGxpY2l0T3JkZXJCeS5sZW5ndGgpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDLlVOSU1QTEVNRU5URUQsIFwibGltaXRUb0xhc3QoKSBxdWVyaWVzIHJlcXVpcmUgc3BlY2lmeWluZyBhdCBsZWFzdCBvbmUgb3JkZXJCeSgpIGNsYXVzZVwiKTtcbn1cblxuLyoqXG4gKiBBbiBgQXBwbGlhYmxlQ29uc3RyYWludGAgaXMgYW4gYWJzdHJhY3Rpb24gb2YgYSBjb25zdHJhaW50IHRoYXQgY2FuIGJlIGFwcGxpZWRcbiAqIHRvIGEgRmlyZXN0b3JlIHF1ZXJ5LlxuICovIGNsYXNzIEFwcGxpYWJsZUNvbnN0cmFpbnQge31cblxuLyoqXG4gKiBBIGBRdWVyeUNvbnN0cmFpbnRgIGlzIHVzZWQgdG8gbmFycm93IHRoZSBzZXQgb2YgZG9jdW1lbnRzIHJldHVybmVkIGJ5IGFcbiAqIEZpcmVzdG9yZSBxdWVyeS4gYFF1ZXJ5Q29uc3RyYWludGBzIGFyZSBjcmVhdGVkIGJ5IGludm9raW5nIHtAbGluayB3aGVyZX0sXG4gKiB7QGxpbmsgb3JkZXJCeX0sIHtAbGluayAoc3RhcnRBdDoxKX0sIHtAbGluayAoc3RhcnRBZnRlcjoxKX0sIHtAbGlua1xuICogKGVuZEJlZm9yZToxKX0sIHtAbGluayAoZW5kQXQ6MSl9LCB7QGxpbmsgbGltaXR9LCB7QGxpbmsgbGltaXRUb0xhc3R9IGFuZFxuICogY2FuIHRoZW4gYmUgcGFzc2VkIHRvIHtAbGluayAocXVlcnk6MSl9IHRvIGNyZWF0ZSBhIG5ldyBxdWVyeSBpbnN0YW5jZSB0aGF0XG4gKiBhbHNvIGNvbnRhaW5zIHRoaXMgYFF1ZXJ5Q29uc3RyYWludGAuXG4gKi8gY2xhc3MgUXVlcnlDb25zdHJhaW50IGV4dGVuZHMgQXBwbGlhYmxlQ29uc3RyYWludCB7fVxuXG5mdW5jdGlvbiBxdWVyeShlLCB0LCAuLi5uKSB7XG4gICAgbGV0IHIgPSBbXTtcbiAgICB0IGluc3RhbmNlb2YgQXBwbGlhYmxlQ29uc3RyYWludCAmJiByLnB1c2godCksIHIgPSByLmNvbmNhdChuKSwgZnVuY3Rpb24gX19QUklWQVRFX3ZhbGlkYXRlUXVlcnlDb25zdHJhaW50QXJyYXkoZSkge1xuICAgICAgICBjb25zdCB0ID0gZS5maWx0ZXIoKGUgPT4gZSBpbnN0YW5jZW9mIFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludCkpLmxlbmd0aCwgbiA9IGUuZmlsdGVyKChlID0+IGUgaW5zdGFuY2VvZiBRdWVyeUZpZWxkRmlsdGVyQ29uc3RyYWludCkpLmxlbmd0aDtcbiAgICAgICAgaWYgKHQgPiAxIHx8IHQgPiAwICYmIG4gPiAwKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQy5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWRRdWVyeS4gV2hlbiB1c2luZyBjb21wb3NpdGUgZmlsdGVycywgeW91IGNhbm5vdCB1c2UgbW9yZSB0aGFuIG9uZSBmaWx0ZXIgYXQgdGhlIHRvcCBsZXZlbC4gQ29uc2lkZXIgbmVzdGluZyB0aGUgbXVsdGlwbGUgZmlsdGVycyB3aXRoaW4gYW4gYGFuZCguLi4pYCBzdGF0ZW1lbnQuIEZvciBleGFtcGxlOiBjaGFuZ2UgYHF1ZXJ5KHF1ZXJ5LCB3aGVyZSguLi4pLCBvciguLi4pKWAgdG8gYHF1ZXJ5KHF1ZXJ5LCBhbmQod2hlcmUoLi4uKSwgb3IoLi4uKSkpYC5cIik7XG4gICAgfVxuICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgLyoqXG4gKiBDb252ZXJ0cyBGaXJlc3RvcmUncyBpbnRlcm5hbCB0eXBlcyB0byB0aGUgSmF2YVNjcmlwdCB0eXBlcyB0aGF0IHdlIGV4cG9zZVxuICogdG8gdGhlIHVzZXIuXG4gKlxuICogQGludGVybmFsXG4gKi8gKHIpO1xuICAgIGZvciAoY29uc3QgdCBvZiByKSBlID0gdC5fYXBwbHkoZSk7XG4gICAgcmV0dXJuIGU7XG59XG5cbi8qKlxuICogQSBgUXVlcnlGaWVsZEZpbHRlckNvbnN0cmFpbnRgIGlzIHVzZWQgdG8gbmFycm93IHRoZSBzZXQgb2YgZG9jdW1lbnRzIHJldHVybmVkIGJ5XG4gKiBhIEZpcmVzdG9yZSBxdWVyeSBieSBmaWx0ZXJpbmcgb24gb25lIG9yIG1vcmUgZG9jdW1lbnQgZmllbGRzLlxuICogYFF1ZXJ5RmllbGRGaWx0ZXJDb25zdHJhaW50YHMgYXJlIGNyZWF0ZWQgYnkgaW52b2tpbmcge0BsaW5rIHdoZXJlfSBhbmQgY2FuIHRoZW5cbiAqIGJlIHBhc3NlZCB0byB7QGxpbmsgKHF1ZXJ5OjEpfSB0byBjcmVhdGUgYSBuZXcgcXVlcnkgaW5zdGFuY2UgdGhhdCBhbHNvIGNvbnRhaW5zXG4gKiB0aGlzIGBRdWVyeUZpZWxkRmlsdGVyQ29uc3RyYWludGAuXG4gKi8gY2xhc3MgUXVlcnlGaWVsZEZpbHRlckNvbnN0cmFpbnQgZXh0ZW5kcyBRdWVyeUNvbnN0cmFpbnQge1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5fZmllbGQgPSBlLCB0aGlzLl9vcCA9IHQsIHRoaXMuX3ZhbHVlID0gbiwgXG4gICAgICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIHF1ZXJ5IGNvbnN0cmFpbnQgKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJ3aGVyZVwiO1xuICAgIH1cbiAgICBzdGF0aWMgX2NyZWF0ZShlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnlGaWVsZEZpbHRlckNvbnN0cmFpbnQoZSwgdCwgbik7XG4gICAgfVxuICAgIF9hcHBseShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLl9wYXJzZShlKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV92YWxpZGF0ZU5ld0ZpZWxkRmlsdGVyKGUuX3F1ZXJ5LCB0KSwgbmV3IFF1ZXJ5KGUuZmlyZXN0b3JlLCBlLmNvbnZlcnRlciwgX19QUklWQVRFX3F1ZXJ5V2l0aEFkZGVkRmlsdGVyKGUuX3F1ZXJ5LCB0KSk7XG4gICAgfVxuICAgIF9wYXJzZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfbmV3VXNlckRhdGFSZWFkZXIoZS5maXJlc3RvcmUpLCBuID0gZnVuY3Rpb24gX19QUklWQVRFX25ld1F1ZXJ5RmlsdGVyKGUsIHQsIG4sIHIsIGksIHMsIG8pIHtcbiAgICAgICAgICAgIGxldCBfO1xuICAgICAgICAgICAgaWYgKGkuaXNLZXlGaWVsZCgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKFwiYXJyYXktY29udGFpbnNcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOUyAqLyA9PT0gcyB8fCBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSAqLyA9PT0gcykgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEMuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgUXVlcnkuIFlvdSBjYW4ndCBwZXJmb3JtICcke3N9JyBxdWVyaWVzIG9uIGRvY3VtZW50SWQoKS5gKTtcbiAgICAgICAgICAgICAgICBpZiAoXCJpblwiIC8qIE9wZXJhdG9yLklOICovID09PSBzIHx8IFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovID09PSBzKSB7XG4gICAgICAgICAgICAgICAgICAgIF9fUFJJVkFURV92YWxpZGF0ZURpc2p1bmN0aXZlRmlsdGVyRWxlbWVudHMobywgcyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIG8pIHQucHVzaChfX1BSSVZBVEVfcGFyc2VEb2N1bWVudElkVmFsdWUociwgZSwgbikpO1xuICAgICAgICAgICAgICAgICAgICBfID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXlWYWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlczogdFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSBfID0gX19QUklWQVRFX3BhcnNlRG9jdW1lbnRJZFZhbHVlKHIsIGUsIG8pO1xuICAgICAgICAgICAgfSBlbHNlIFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyAhPT0gcyAmJiBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyAhPT0gcyAmJiBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSAqLyAhPT0gcyB8fCBfX1BSSVZBVEVfdmFsaWRhdGVEaXNqdW5jdGl2ZUZpbHRlckVsZW1lbnRzKG8sIHMpLCBcbiAgICAgICAgICAgIF8gPSBfX1BSSVZBVEVfcGFyc2VRdWVyeVZhbHVlKG4sIHQsIG8sIFxuICAgICAgICAgICAgLyogYWxsb3dBcnJheXM9ICovIFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyA9PT0gcyB8fCBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyA9PT0gcyk7XG4gICAgICAgICAgICByZXR1cm4gRmllbGRGaWx0ZXIuY3JlYXRlKGksIHMsIF8pO1xuICAgICAgICB9KGUuX3F1ZXJ5LCBcIndoZXJlXCIsIHQsIGUuZmlyZXN0b3JlLl9kYXRhYmFzZUlkLCB0aGlzLl9maWVsZCwgdGhpcy5fb3AsIHRoaXMuX3ZhbHVlKTtcbiAgICAgICAgcmV0dXJuIG47XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgUXVlcnlGaWVsZEZpbHRlckNvbnN0cmFpbnR9IHRoYXQgZW5mb3JjZXMgdGhhdCBkb2N1bWVudHNcbiAqIG11c3QgY29udGFpbiB0aGUgc3BlY2lmaWVkIGZpZWxkIGFuZCB0aGF0IHRoZSB2YWx1ZSBzaG91bGQgc2F0aXNmeSB0aGVcbiAqIHJlbGF0aW9uIGNvbnN0cmFpbnQgcHJvdmlkZWQuXG4gKlxuICogQHBhcmFtIGZpZWxkUGF0aCAtIFRoZSBwYXRoIHRvIGNvbXBhcmVcbiAqIEBwYXJhbSBvcFN0ciAtIFRoZSBvcGVyYXRpb24gc3RyaW5nIChlLmcgXCImbHQ7XCIsIFwiJmx0Oz1cIiwgXCI9PVwiLCBcIiZsdDtcIixcbiAqICAgXCImbHQ7PVwiLCBcIiE9XCIpLlxuICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIGZvciBjb21wYXJpc29uXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCB7QGxpbmsgUXVlcnlGaWVsZEZpbHRlckNvbnN0cmFpbnR9LlxuICovIGZ1bmN0aW9uIHdoZXJlKGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gdCwgaSA9IF9fUFJJVkFURV9maWVsZFBhdGhGcm9tQXJndW1lbnQoXCJ3aGVyZVwiLCBlKTtcbiAgICByZXR1cm4gUXVlcnlGaWVsZEZpbHRlckNvbnN0cmFpbnQuX2NyZWF0ZShpLCByLCBuKTtcbn1cblxuLyoqXG4gKiBBIGBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnRgIGlzIHVzZWQgdG8gbmFycm93IHRoZSBzZXQgb2YgZG9jdW1lbnRzXG4gKiByZXR1cm5lZCBieSBhIEZpcmVzdG9yZSBxdWVyeSBieSBwZXJmb3JtaW5nIHRoZSBsb2dpY2FsIE9SIG9yIEFORCBvZiBtdWx0aXBsZVxuICoge0BsaW5rIFF1ZXJ5RmllbGRGaWx0ZXJDb25zdHJhaW50fXMgb3Ige0BsaW5rIFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludH1zLlxuICogYFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludGBzIGFyZSBjcmVhdGVkIGJ5IGludm9raW5nIHtAbGluayBvcn0gb3JcbiAqIHtAbGluayBhbmR9IGFuZCBjYW4gdGhlbiBiZSBwYXNzZWQgdG8ge0BsaW5rIChxdWVyeToxKX0gdG8gY3JlYXRlIGEgbmV3IHF1ZXJ5XG4gKiBpbnN0YW5jZSB0aGF0IGFsc28gY29udGFpbnMgdGhlIGBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnRgLlxuICovIGNsYXNzIFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludCBleHRlbmRzIEFwcGxpYWJsZUNvbnN0cmFpbnQge1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIHF1ZXJ5IGNvbnN0cmFpbnQgKi9cbiAgICBlLCB0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMudHlwZSA9IGUsIHRoaXMuX3F1ZXJ5Q29uc3RyYWludHMgPSB0O1xuICAgIH1cbiAgICBzdGF0aWMgX2NyZWF0ZShlLCB0KSB7XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnlDb21wb3NpdGVGaWx0ZXJDb25zdHJhaW50KGUsIHQpO1xuICAgIH1cbiAgICBfcGFyc2UoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5fcXVlcnlDb25zdHJhaW50cy5tYXAoKHQgPT4gdC5fcGFyc2UoZSkpKS5maWx0ZXIoKGUgPT4gZS5nZXRGaWx0ZXJzKCkubGVuZ3RoID4gMCkpO1xuICAgICAgICByZXR1cm4gMSA9PT0gdC5sZW5ndGggPyB0WzBdIDogQ29tcG9zaXRlRmlsdGVyLmNyZWF0ZSh0LCB0aGlzLl9nZXRPcGVyYXRvcigpKTtcbiAgICB9XG4gICAgX2FwcGx5KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuX3BhcnNlKGUpO1xuICAgICAgICByZXR1cm4gMCA9PT0gdC5nZXRGaWx0ZXJzKCkubGVuZ3RoID8gZSA6IChmdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVOZXdGaWx0ZXIoZSwgdCkge1xuICAgICAgICAgICAgbGV0IG4gPSBlO1xuICAgICAgICAgICAgY29uc3QgciA9IHQuZ2V0RmxhdHRlbmVkRmlsdGVycygpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHIpIF9fUFJJVkFURV92YWxpZGF0ZU5ld0ZpZWxkRmlsdGVyKG4sIGUpLCBuID0gX19QUklWQVRFX3F1ZXJ5V2l0aEFkZGVkRmlsdGVyKG4sIGUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIENoZWNrcyBpZiBhbnkgb2YgdGhlIHByb3ZpZGVkIGZpbHRlciBvcGVyYXRvcnMgYXJlIGluY2x1ZGVkIGluIHRoZSBnaXZlbiBsaXN0IG9mIGZpbHRlcnMgYW5kXG4gICAgICAgIC8vIHJldHVybnMgdGhlIGZpcnN0IG9uZSB0aGF0IGlzLCBvciBudWxsIGlmIG5vbmUgYXJlLlxuICAgICAgICAoZS5fcXVlcnksIHQpLCBuZXcgUXVlcnkoZS5maXJlc3RvcmUsIGUuY29udmVydGVyLCBfX1BSSVZBVEVfcXVlcnlXaXRoQWRkZWRGaWx0ZXIoZS5fcXVlcnksIHQpKSk7XG4gICAgfVxuICAgIF9nZXRRdWVyeUNvbnN0cmFpbnRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcXVlcnlDb25zdHJhaW50cztcbiAgICB9XG4gICAgX2dldE9wZXJhdG9yKCkge1xuICAgICAgICByZXR1cm4gXCJhbmRcIiA9PT0gdGhpcy50eXBlID8gXCJhbmRcIiAvKiBDb21wb3NpdGVPcGVyYXRvci5BTkQgKi8gOiBcIm9yXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuT1IgKi87XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcge0BsaW5rIFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludH0gdGhhdCBpcyBhIGRpc2p1bmN0aW9uIG9mXG4gKiB0aGUgZ2l2ZW4gZmlsdGVyIGNvbnN0cmFpbnRzLiBBIGRpc2p1bmN0aW9uIGZpbHRlciBpbmNsdWRlcyBhIGRvY3VtZW50IGlmIGl0XG4gKiBzYXRpc2ZpZXMgYW55IG9mIHRoZSBnaXZlbiBmaWx0ZXJzLlxuICpcbiAqIEBwYXJhbSBxdWVyeUNvbnN0cmFpbnRzIC0gT3B0aW9uYWwuIFRoZSBsaXN0IG9mXG4gKiB7QGxpbmsgUXVlcnlGaWx0ZXJDb25zdHJhaW50fXMgdG8gcGVyZm9ybSBhIGRpc2p1bmN0aW9uIGZvci4gVGhlc2UgbXVzdCBiZVxuICogY3JlYXRlZCB3aXRoIGNhbGxzIHRvIHtAbGluayB3aGVyZX0sIHtAbGluayBvcn0sIG9yIHtAbGluayBhbmR9LlxuICogQHJldHVybnMgVGhlIG5ld2x5IGNyZWF0ZWQge0BsaW5rIFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludH0uXG4gKi8gZnVuY3Rpb24gb3IoLi4uZSkge1xuICAgIC8vIE9ubHkgc3VwcG9ydCBRdWVyeUZpbHRlckNvbnN0cmFpbnRzXG4gICAgcmV0dXJuIGUuZm9yRWFjaCgoZSA9PiBfX1BSSVZBVEVfdmFsaWRhdGVRdWVyeUZpbHRlckNvbnN0cmFpbnQoXCJvclwiLCBlKSkpLCBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnQuX2NyZWF0ZShcIm9yXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuT1IgKi8gLCBlKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHtAbGluayBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnR9IHRoYXQgaXMgYSBjb25qdW5jdGlvbiBvZlxuICogdGhlIGdpdmVuIGZpbHRlciBjb25zdHJhaW50cy4gQSBjb25qdW5jdGlvbiBmaWx0ZXIgaW5jbHVkZXMgYSBkb2N1bWVudCBpZiBpdFxuICogc2F0aXNmaWVzIGFsbCBvZiB0aGUgZ2l2ZW4gZmlsdGVycy5cbiAqXG4gKiBAcGFyYW0gcXVlcnlDb25zdHJhaW50cyAtIE9wdGlvbmFsLiBUaGUgbGlzdCBvZlxuICoge0BsaW5rIFF1ZXJ5RmlsdGVyQ29uc3RyYWludH1zIHRvIHBlcmZvcm0gYSBjb25qdW5jdGlvbiBmb3IuIFRoZXNlIG11c3QgYmVcbiAqIGNyZWF0ZWQgd2l0aCBjYWxscyB0byB7QGxpbmsgd2hlcmV9LCB7QGxpbmsgb3J9LCBvciB7QGxpbmsgYW5kfS5cbiAqIEByZXR1cm5zIFRoZSBuZXdseSBjcmVhdGVkIHtAbGluayBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnR9LlxuICovIGZ1bmN0aW9uIGFuZCguLi5lKSB7XG4gICAgLy8gT25seSBzdXBwb3J0IFF1ZXJ5RmlsdGVyQ29uc3RyYWludHNcbiAgICByZXR1cm4gZS5mb3JFYWNoKChlID0+IF9fUFJJVkFURV92YWxpZGF0ZVF1ZXJ5RmlsdGVyQ29uc3RyYWludChcImFuZFwiLCBlKSkpLCBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnQuX2NyZWF0ZShcImFuZFwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLkFORCAqLyAsIGUpO1xufVxuXG4vKipcbiAqIEEgYFF1ZXJ5T3JkZXJCeUNvbnN0cmFpbnRgIGlzIHVzZWQgdG8gc29ydCB0aGUgc2V0IG9mIGRvY3VtZW50cyByZXR1cm5lZCBieSBhXG4gKiBGaXJlc3RvcmUgcXVlcnkuIGBRdWVyeU9yZGVyQnlDb25zdHJhaW50YHMgYXJlIGNyZWF0ZWQgYnkgaW52b2tpbmdcbiAqIHtAbGluayBvcmRlckJ5fSBhbmQgY2FuIHRoZW4gYmUgcGFzc2VkIHRvIHtAbGluayAocXVlcnk6MSl9IHRvIGNyZWF0ZSBhIG5ldyBxdWVyeVxuICogaW5zdGFuY2UgdGhhdCBhbHNvIGNvbnRhaW5zIHRoaXMgYFF1ZXJ5T3JkZXJCeUNvbnN0cmFpbnRgLlxuICpcbiAqIE5vdGU6IERvY3VtZW50cyB0aGF0IGRvIG5vdCBjb250YWluIHRoZSBvcmRlckJ5IGZpZWxkIHdpbGwgbm90IGJlIHByZXNlbnQgaW5cbiAqIHRoZSBxdWVyeSByZXN1bHQuXG4gKi8gY2xhc3MgUXVlcnlPcmRlckJ5Q29uc3RyYWludCBleHRlbmRzIFF1ZXJ5Q29uc3RyYWludCB7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLl9maWVsZCA9IGUsIHRoaXMuX2RpcmVjdGlvbiA9IHQsIFxuICAgICAgICAvKiogVGhlIHR5cGUgb2YgdGhpcyBxdWVyeSBjb25zdHJhaW50ICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwib3JkZXJCeVwiO1xuICAgIH1cbiAgICBzdGF0aWMgX2NyZWF0ZShlLCB0KSB7XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnlPcmRlckJ5Q29uc3RyYWludChlLCB0KTtcbiAgICB9XG4gICAgX2FwcGx5KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdRdWVyeU9yZGVyQnkoZSwgdCwgbikge1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IGUuc3RhcnRBdCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEMuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIHF1ZXJ5LiBZb3UgbXVzdCBub3QgY2FsbCBzdGFydEF0KCkgb3Igc3RhcnRBZnRlcigpIGJlZm9yZSBjYWxsaW5nIG9yZGVyQnkoKS5cIik7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gZS5lbmRBdCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEMuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIHF1ZXJ5LiBZb3UgbXVzdCBub3QgY2FsbCBlbmRBdCgpIG9yIGVuZEJlZm9yZSgpIGJlZm9yZSBjYWxsaW5nIG9yZGVyQnkoKS5cIik7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE9yZGVyQnkodCwgbik7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBDcmVhdGUgYSBgQm91bmRgIGZyb20gYSBxdWVyeSBhbmQgYSBkb2N1bWVudC5cbiAqXG4gKiBOb3RlIHRoYXQgdGhlIGBCb3VuZGAgd2lsbCBhbHdheXMgaW5jbHVkZSB0aGUga2V5IG9mIHRoZSBkb2N1bWVudFxuICogYW5kIHNvIG9ubHkgdGhlIHByb3ZpZGVkIGRvY3VtZW50IHdpbGwgY29tcGFyZSBlcXVhbCB0byB0aGUgcmV0dXJuZWRcbiAqIHBvc2l0aW9uLlxuICpcbiAqIFdpbGwgdGhyb3cgaWYgdGhlIGRvY3VtZW50IGRvZXMgbm90IGNvbnRhaW4gYWxsIGZpZWxkcyBvZiB0aGUgb3JkZXIgYnlcbiAqIG9mIHRoZSBxdWVyeSBvciBpZiBhbnkgb2YgdGhlIGZpZWxkcyBpbiB0aGUgb3JkZXIgYnkgYXJlIGFuIHVuY29tbWl0dGVkXG4gKiBzZXJ2ZXIgdGltZXN0YW1wLlxuICovIChlLl9xdWVyeSwgdGhpcy5fZmllbGQsIHRoaXMuX2RpcmVjdGlvbik7XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkoZS5maXJlc3RvcmUsIGUuY29udmVydGVyLCBmdW5jdGlvbiBfX1BSSVZBVEVfcXVlcnlXaXRoQWRkZWRPcmRlckJ5KGUsIHQpIHtcbiAgICAgICAgICAgIC8vIFRPRE8oZGltb25kKTogdmFsaWRhdGUgdGhhdCBvcmRlckJ5IGRvZXMgbm90IGxpc3QgdGhlIHNhbWUga2V5IHR3aWNlLlxuICAgICAgICAgICAgY29uc3QgbiA9IGUuZXhwbGljaXRPcmRlckJ5LmNvbmNhdChbIHQgXSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9RdWVyeUltcGwoZS5wYXRoLCBlLmNvbGxlY3Rpb25Hcm91cCwgbiwgZS5maWx0ZXJzLnNsaWNlKCksIGUubGltaXQsIGUubGltaXRUeXBlLCBlLnN0YXJ0QXQsIGUuZW5kQXQpO1xuICAgICAgICB9KGUuX3F1ZXJ5LCB0KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgUXVlcnlPcmRlckJ5Q29uc3RyYWludH0gdGhhdCBzb3J0cyB0aGUgcXVlcnkgcmVzdWx0IGJ5IHRoZVxuICogc3BlY2lmaWVkIGZpZWxkLCBvcHRpb25hbGx5IGluIGRlc2NlbmRpbmcgb3JkZXIgaW5zdGVhZCBvZiBhc2NlbmRpbmcuXG4gKlxuICogTm90ZTogRG9jdW1lbnRzIHRoYXQgZG8gbm90IGNvbnRhaW4gdGhlIHNwZWNpZmllZCBmaWVsZCB3aWxsIG5vdCBiZSBwcmVzZW50XG4gKiBpbiB0aGUgcXVlcnkgcmVzdWx0LlxuICpcbiAqIEBwYXJhbSBmaWVsZFBhdGggLSBUaGUgZmllbGQgdG8gc29ydCBieS5cbiAqIEBwYXJhbSBkaXJlY3Rpb25TdHIgLSBPcHRpb25hbCBkaXJlY3Rpb24gdG8gc29ydCBieSAoJ2FzYycgb3IgJ2Rlc2MnKS4gSWZcbiAqIG5vdCBzcGVjaWZpZWQsIG9yZGVyIHdpbGwgYmUgYXNjZW5kaW5nLlxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQge0BsaW5rIFF1ZXJ5T3JkZXJCeUNvbnN0cmFpbnR9LlxuICovIGZ1bmN0aW9uIG9yZGVyQnkoZSwgdCA9IFwiYXNjXCIpIHtcbiAgICBjb25zdCBuID0gdCwgciA9IF9fUFJJVkFURV9maWVsZFBhdGhGcm9tQXJndW1lbnQoXCJvcmRlckJ5XCIsIGUpO1xuICAgIHJldHVybiBRdWVyeU9yZGVyQnlDb25zdHJhaW50Ll9jcmVhdGUociwgbik7XG59XG5cbi8qKlxuICogQSBgUXVlcnlMaW1pdENvbnN0cmFpbnRgIGlzIHVzZWQgdG8gbGltaXQgdGhlIG51bWJlciBvZiBkb2N1bWVudHMgcmV0dXJuZWQgYnlcbiAqIGEgRmlyZXN0b3JlIHF1ZXJ5LlxuICogYFF1ZXJ5TGltaXRDb25zdHJhaW50YHMgYXJlIGNyZWF0ZWQgYnkgaW52b2tpbmcge0BsaW5rIGxpbWl0fSBvclxuICoge0BsaW5rIGxpbWl0VG9MYXN0fSBhbmQgY2FuIHRoZW4gYmUgcGFzc2VkIHRvIHtAbGluayAocXVlcnk6MSl9IHRvIGNyZWF0ZSBhIG5ld1xuICogcXVlcnkgaW5zdGFuY2UgdGhhdCBhbHNvIGNvbnRhaW5zIHRoaXMgYFF1ZXJ5TGltaXRDb25zdHJhaW50YC5cbiAqLyBjbGFzcyBRdWVyeUxpbWl0Q29uc3RyYWludCBleHRlbmRzIFF1ZXJ5Q29uc3RyYWludCB7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgcXVlcnkgY29uc3RyYWludCAqL1xuICAgIGUsIHQsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy50eXBlID0gZSwgdGhpcy5fbGltaXQgPSB0LCB0aGlzLl9saW1pdFR5cGUgPSBuO1xuICAgIH1cbiAgICBzdGF0aWMgX2NyZWF0ZShlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnlMaW1pdENvbnN0cmFpbnQoZSwgdCwgbik7XG4gICAgfVxuICAgIF9hcHBseShlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkoZS5maXJlc3RvcmUsIGUuY29udmVydGVyLCBfX1BSSVZBVEVfcXVlcnlXaXRoTGltaXQoZS5fcXVlcnksIHRoaXMuX2xpbWl0LCB0aGlzLl9saW1pdFR5cGUpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBRdWVyeUxpbWl0Q29uc3RyYWludH0gdGhhdCBvbmx5IHJldHVybnMgdGhlIGZpcnN0IG1hdGNoaW5nXG4gKiBkb2N1bWVudHMuXG4gKlxuICogQHBhcmFtIGxpbWl0IC0gVGhlIG1heGltdW0gbnVtYmVyIG9mIGl0ZW1zIHRvIHJldHVybi5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIHtAbGluayBRdWVyeUxpbWl0Q29uc3RyYWludH0uXG4gKi8gZnVuY3Rpb24gbGltaXQoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfdmFsaWRhdGVQb3NpdGl2ZU51bWJlcihcImxpbWl0XCIsIGUpLCBRdWVyeUxpbWl0Q29uc3RyYWludC5fY3JlYXRlKFwibGltaXRcIiwgZSwgXCJGXCIgLyogTGltaXRUeXBlLkZpcnN0ICovKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIFF1ZXJ5TGltaXRDb25zdHJhaW50fSB0aGF0IG9ubHkgcmV0dXJucyB0aGUgbGFzdCBtYXRjaGluZ1xuICogZG9jdW1lbnRzLlxuICpcbiAqIFlvdSBtdXN0IHNwZWNpZnkgYXQgbGVhc3Qgb25lIGBvcmRlckJ5YCBjbGF1c2UgZm9yIGBsaW1pdFRvTGFzdGAgcXVlcmllcyxcbiAqIG90aGVyd2lzZSBhbiBleGNlcHRpb24gd2lsbCBiZSB0aHJvd24gZHVyaW5nIGV4ZWN1dGlvbi5cbiAqXG4gKiBAcGFyYW0gbGltaXQgLSBUaGUgbWF4aW11bSBudW1iZXIgb2YgaXRlbXMgdG8gcmV0dXJuLlxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQge0BsaW5rIFF1ZXJ5TGltaXRDb25zdHJhaW50fS5cbiAqLyBmdW5jdGlvbiBsaW1pdFRvTGFzdChlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV92YWxpZGF0ZVBvc2l0aXZlTnVtYmVyKFwibGltaXRUb0xhc3RcIiwgZSksIFF1ZXJ5TGltaXRDb25zdHJhaW50Ll9jcmVhdGUoXCJsaW1pdFRvTGFzdFwiLCBlLCBcIkxcIiAvKiBMaW1pdFR5cGUuTGFzdCAqLyk7XG59XG5cbi8qKlxuICogQSBgUXVlcnlTdGFydEF0Q29uc3RyYWludGAgaXMgdXNlZCB0byBleGNsdWRlIGRvY3VtZW50cyBmcm9tIHRoZSBzdGFydCBvZiBhXG4gKiByZXN1bHQgc2V0IHJldHVybmVkIGJ5IGEgRmlyZXN0b3JlIHF1ZXJ5LlxuICogYFF1ZXJ5U3RhcnRBdENvbnN0cmFpbnRgcyBhcmUgY3JlYXRlZCBieSBpbnZva2luZyB7QGxpbmsgKHN0YXJ0QXQ6MSl9IG9yXG4gKiB7QGxpbmsgKHN0YXJ0QWZ0ZXI6MSl9IGFuZCBjYW4gdGhlbiBiZSBwYXNzZWQgdG8ge0BsaW5rIChxdWVyeToxKX0gdG8gY3JlYXRlIGFcbiAqIG5ldyBxdWVyeSBpbnN0YW5jZSB0aGF0IGFsc28gY29udGFpbnMgdGhpcyBgUXVlcnlTdGFydEF0Q29uc3RyYWludGAuXG4gKi8gY2xhc3MgUXVlcnlTdGFydEF0Q29uc3RyYWludCBleHRlbmRzIFF1ZXJ5Q29uc3RyYWludCB7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgcXVlcnkgY29uc3RyYWludCAqL1xuICAgIGUsIHQsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy50eXBlID0gZSwgdGhpcy5fZG9jT3JGaWVsZHMgPSB0LCB0aGlzLl9pbmNsdXNpdmUgPSBuO1xuICAgIH1cbiAgICBzdGF0aWMgX2NyZWF0ZShlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnlTdGFydEF0Q29uc3RyYWludChlLCB0LCBuKTtcbiAgICB9XG4gICAgX2FwcGx5KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9uZXdRdWVyeUJvdW5kRnJvbURvY09yRmllbGRzKGUsIHRoaXMudHlwZSwgdGhpcy5fZG9jT3JGaWVsZHMsIHRoaXMuX2luY2x1c2l2ZSk7XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkoZS5maXJlc3RvcmUsIGUuY29udmVydGVyLCBmdW5jdGlvbiBfX1BSSVZBVEVfcXVlcnlXaXRoU3RhcnRBdChlLCB0KSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9RdWVyeUltcGwoZS5wYXRoLCBlLmNvbGxlY3Rpb25Hcm91cCwgZS5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgZS5maWx0ZXJzLnNsaWNlKCksIGUubGltaXQsIGUubGltaXRUeXBlLCB0LCBlLmVuZEF0KTtcbiAgICAgICAgfShlLl9xdWVyeSwgdCkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc3RhcnRBdCguLi5lKSB7XG4gICAgcmV0dXJuIFF1ZXJ5U3RhcnRBdENvbnN0cmFpbnQuX2NyZWF0ZShcInN0YXJ0QXRcIiwgZSwgXG4gICAgLyppbmNsdXNpdmU9Ki8gITApO1xufVxuXG5mdW5jdGlvbiBzdGFydEFmdGVyKC4uLmUpIHtcbiAgICByZXR1cm4gUXVlcnlTdGFydEF0Q29uc3RyYWludC5fY3JlYXRlKFwic3RhcnRBZnRlclwiLCBlLCBcbiAgICAvKmluY2x1c2l2ZT0qLyAhMSk7XG59XG5cbi8qKlxuICogQSBgUXVlcnlFbmRBdENvbnN0cmFpbnRgIGlzIHVzZWQgdG8gZXhjbHVkZSBkb2N1bWVudHMgZnJvbSB0aGUgZW5kIG9mIGFcbiAqIHJlc3VsdCBzZXQgcmV0dXJuZWQgYnkgYSBGaXJlc3RvcmUgcXVlcnkuXG4gKiBgUXVlcnlFbmRBdENvbnN0cmFpbnRgcyBhcmUgY3JlYXRlZCBieSBpbnZva2luZyB7QGxpbmsgKGVuZEF0OjEpfSBvclxuICoge0BsaW5rIChlbmRCZWZvcmU6MSl9IGFuZCBjYW4gdGhlbiBiZSBwYXNzZWQgdG8ge0BsaW5rIChxdWVyeToxKX0gdG8gY3JlYXRlIGEgbmV3XG4gKiBxdWVyeSBpbnN0YW5jZSB0aGF0IGFsc28gY29udGFpbnMgdGhpcyBgUXVlcnlFbmRBdENvbnN0cmFpbnRgLlxuICovIGNsYXNzIFF1ZXJ5RW5kQXRDb25zdHJhaW50IGV4dGVuZHMgUXVlcnlDb25zdHJhaW50IHtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIHR5cGUgb2YgdGhpcyBxdWVyeSBjb25zdHJhaW50ICovXG4gICAgZSwgdCwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLnR5cGUgPSBlLCB0aGlzLl9kb2NPckZpZWxkcyA9IHQsIHRoaXMuX2luY2x1c2l2ZSA9IG47XG4gICAgfVxuICAgIHN0YXRpYyBfY3JlYXRlKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeUVuZEF0Q29uc3RyYWludChlLCB0LCBuKTtcbiAgICB9XG4gICAgX2FwcGx5KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9uZXdRdWVyeUJvdW5kRnJvbURvY09yRmllbGRzKGUsIHRoaXMudHlwZSwgdGhpcy5fZG9jT3JGaWVsZHMsIHRoaXMuX2luY2x1c2l2ZSk7XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkoZS5maXJlc3RvcmUsIGUuY29udmVydGVyLCBmdW5jdGlvbiBfX1BSSVZBVEVfcXVlcnlXaXRoRW5kQXQoZSwgdCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfUXVlcnlJbXBsKGUucGF0aCwgZS5jb2xsZWN0aW9uR3JvdXAsIGUuZXhwbGljaXRPcmRlckJ5LnNsaWNlKCksIGUuZmlsdGVycy5zbGljZSgpLCBlLmxpbWl0LCBlLmxpbWl0VHlwZSwgZS5zdGFydEF0LCB0KTtcbiAgICAgICAgfShlLl9xdWVyeSwgdCkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZW5kQmVmb3JlKC4uLmUpIHtcbiAgICByZXR1cm4gUXVlcnlFbmRBdENvbnN0cmFpbnQuX2NyZWF0ZShcImVuZEJlZm9yZVwiLCBlLCBcbiAgICAvKmluY2x1c2l2ZT0qLyAhMSk7XG59XG5cbmZ1bmN0aW9uIGVuZEF0KC4uLmUpIHtcbiAgICByZXR1cm4gUXVlcnlFbmRBdENvbnN0cmFpbnQuX2NyZWF0ZShcImVuZEF0XCIsIGUsIFxuICAgIC8qaW5jbHVzaXZlPSovICEwKTtcbn1cblxuLyoqIEhlbHBlciBmdW5jdGlvbiB0byBjcmVhdGUgYSBib3VuZCBmcm9tIGEgZG9jdW1lbnQgb3IgZmllbGRzICovIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdRdWVyeUJvdW5kRnJvbURvY09yRmllbGRzKGUsIHQsIG4sIHIpIHtcbiAgICBpZiAoblswXSA9IGdldE1vZHVsYXJJbnN0YW5jZShuWzBdKSwgblswXSBpbnN0YW5jZW9mIERvY3VtZW50U25hcHNob3QkMSkgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdRdWVyeUJvdW5kRnJvbURvY3VtZW50KGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgaWYgKCFyKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQy5OT1RfRk9VTkQsIGBDYW4ndCB1c2UgYSBEb2N1bWVudFNuYXBzaG90IHRoYXQgZG9lc24ndCBleGlzdCBmb3IgJHtufSgpLmApO1xuICAgICAgICBjb25zdCBzID0gW107XG4gICAgICAgIC8vIEJlY2F1c2UgcGVvcGxlIGV4cGVjdCB0byBjb250aW51ZS9lbmQgYSBxdWVyeSBhdCB0aGUgZXhhY3QgZG9jdW1lbnRcbiAgICAgICAgLy8gcHJvdmlkZWQsIHdlIG5lZWQgdG8gdXNlIHRoZSBpbXBsaWNpdCBzb3J0IG9yZGVyIHJhdGhlciB0aGFuIHRoZSBleHBsaWNpdFxuICAgICAgICAvLyBzb3J0IG9yZGVyLCBiZWNhdXNlIGl0J3MgZ3VhcmFudGVlZCB0byBjb250YWluIHRoZSBkb2N1bWVudCBrZXkuIFRoYXQgd2F5XG4gICAgICAgIC8vIHRoZSBwb3NpdGlvbiBiZWNvbWVzIHVuYW1iaWd1b3VzIGFuZCB0aGUgcXVlcnkgY29udGludWVzL2VuZHMgZXhhY3RseSBhdFxuICAgICAgICAvLyB0aGUgcHJvdmlkZWQgZG9jdW1lbnQuIFdpdGhvdXQgdGhlIGtleSAoYnkgdXNpbmcgdGhlIGV4cGxpY2l0IHNvcnRcbiAgICAgICAgLy8gb3JkZXJzKSwgbXVsdGlwbGUgZG9jdW1lbnRzIGNvdWxkIG1hdGNoIHRoZSBwb3NpdGlvbiwgeWllbGRpbmcgZHVwbGljYXRlXG4gICAgICAgIC8vIHJlc3VsdHMuXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIF9fUFJJVkFURV9xdWVyeU5vcm1hbGl6ZWRPcmRlckJ5KGUpKSBpZiAobi5maWVsZC5pc0tleUZpZWxkKCkpIHMucHVzaChfX1BSSVZBVEVfcmVmVmFsdWUodCwgci5rZXkpKTsgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBlID0gci5kYXRhLmZpZWxkKG4uZmllbGQpO1xuICAgICAgICAgICAgaWYgKF9fUFJJVkFURV9pc1NlcnZlclRpbWVzdGFtcChlKSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEMuSU5WQUxJRF9BUkdVTUVOVCwgJ0ludmFsaWQgcXVlcnkuIFlvdSBhcmUgdHJ5aW5nIHRvIHN0YXJ0IG9yIGVuZCBhIHF1ZXJ5IHVzaW5nIGEgZG9jdW1lbnQgZm9yIHdoaWNoIHRoZSBmaWVsZCBcIicgKyBuLmZpZWxkICsgJ1wiIGlzIGFuIHVuY29tbWl0dGVkIHNlcnZlciB0aW1lc3RhbXAuIChTaW5jZSB0aGUgdmFsdWUgb2YgdGhpcyBmaWVsZCBpcyB1bmtub3duLCB5b3UgY2Fubm90IHN0YXJ0L2VuZCBhIHF1ZXJ5IHdpdGggaXQuKScpO1xuICAgICAgICAgICAgaWYgKG51bGwgPT09IGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gbi5maWVsZC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gWW91IGFyZSB0cnlpbmcgdG8gc3RhcnQgb3IgZW5kIGEgcXVlcnkgdXNpbmcgYSBkb2N1bWVudCBmb3Igd2hpY2ggdGhlIGZpZWxkICcke2V9JyAodXNlZCBhcyB0aGUgb3JkZXJCeSkgZG9lcyBub3QgZXhpc3QuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzLnB1c2goZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBCb3VuZChzLCBpKTtcbiAgICB9XG4gICAgLyoqXG4gKiBDb252ZXJ0cyBhIGxpc3Qgb2YgZmllbGQgdmFsdWVzIHRvIGEgYEJvdW5kYCBmb3IgdGhlIGdpdmVuIHF1ZXJ5LlxuICovIChlLl9xdWVyeSwgZS5maXJlc3RvcmUuX2RhdGFiYXNlSWQsIHQsIG5bMF0uX2RvY3VtZW50LCByKTtcbiAgICB7XG4gICAgICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfbmV3VXNlckRhdGFSZWFkZXIoZS5maXJlc3RvcmUpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX25ld1F1ZXJ5Qm91bmRGcm9tRmllbGRzKGUsIHQsIG4sIHIsIGksIHMpIHtcbiAgICAgICAgICAgIC8vIFVzZSBleHBsaWNpdCBvcmRlciBieSdzIGJlY2F1c2UgaXQgaGFzIHRvIG1hdGNoIHRoZSBxdWVyeSB0aGUgdXNlciBtYWRlXG4gICAgICAgICAgICBjb25zdCBvID0gZS5leHBsaWNpdE9yZGVyQnk7XG4gICAgICAgICAgICBpZiAoaS5sZW5ndGggPiBvLmxlbmd0aCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEMuSU5WQUxJRF9BUkdVTUVOVCwgYFRvbyBtYW55IGFyZ3VtZW50cyBwcm92aWRlZCB0byAke3J9KCkuIFRoZSBudW1iZXIgb2YgYXJndW1lbnRzIG11c3QgYmUgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIHRoZSBudW1iZXIgb2Ygb3JkZXJCeSgpIGNsYXVzZXNgKTtcbiAgICAgICAgICAgIGNvbnN0IF8gPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IHMgPSAwOyBzIDwgaS5sZW5ndGg7IHMrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBpW3NdO1xuICAgICAgICAgICAgICAgIGlmIChvW3NdLmZpZWxkLmlzS2V5RmllbGQoKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoXCJzdHJpbmdcIiAhPSB0eXBlb2YgYSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEMuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIEV4cGVjdGVkIGEgc3RyaW5nIGZvciBkb2N1bWVudCBJRCBpbiAke3J9KCksIGJ1dCBnb3QgYSAke3R5cGVvZiBhfWApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIV9fUFJJVkFURV9pc0NvbGxlY3Rpb25Hcm91cFF1ZXJ5KGUpICYmIC0xICE9PSBhLmluZGV4T2YoXCIvXCIpKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyBhIGNvbGxlY3Rpb24gYW5kIG9yZGVyaW5nIGJ5IGRvY3VtZW50SWQoKSwgdGhlIHZhbHVlIHBhc3NlZCB0byAke3J9KCkgbXVzdCBiZSBhIHBsYWluIGRvY3VtZW50IElELCBidXQgJyR7YX0nIGNvbnRhaW5zIGEgc2xhc2guYCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBlLnBhdGguY2hpbGQoUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcoYSkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIURvY3VtZW50S2V5LmlzRG9jdW1lbnRLZXkobikpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIGEgY29sbGVjdGlvbiBncm91cCBhbmQgb3JkZXJpbmcgYnkgZG9jdW1lbnRJZCgpLCB0aGUgdmFsdWUgcGFzc2VkIHRvICR7cn0oKSBtdXN0IHJlc3VsdCBpbiBhIHZhbGlkIGRvY3VtZW50IHBhdGgsIGJ1dCAnJHtufScgaXMgbm90IGJlY2F1c2UgaXQgY29udGFpbnMgYW4gb2RkIG51bWJlciBvZiBzZWdtZW50cy5gKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaSA9IG5ldyBEb2N1bWVudEtleShuKTtcbiAgICAgICAgICAgICAgICAgICAgXy5wdXNoKF9fUFJJVkFURV9yZWZWYWx1ZSh0LCBpKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IF9fUFJJVkFURV9wYXJzZVF1ZXJ5VmFsdWUobiwgciwgYSk7XG4gICAgICAgICAgICAgICAgICAgIF8ucHVzaChlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IEJvdW5kKF8sIHMpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUGFyc2VzIHRoZSBnaXZlbiBgZG9jdW1lbnRJZFZhbHVlYCBpbnRvIGEgYFJlZmVyZW5jZVZhbHVlYCwgdGhyb3dpbmdcbiAqIGFwcHJvcHJpYXRlIGVycm9ycyBpZiB0aGUgdmFsdWUgaXMgYW55dGhpbmcgb3RoZXIgdGhhbiBhIGBEb2N1bWVudFJlZmVyZW5jZWBcbiAqIG9yIGBzdHJpbmdgLCBvciBpZiB0aGUgc3RyaW5nIGlzIG1hbGZvcm1lZC5cbiAqLyAoZS5fcXVlcnksIGUuZmlyZXN0b3JlLl9kYXRhYmFzZUlkLCBpLCB0LCBuLCByKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9wYXJzZURvY3VtZW50SWRWYWx1ZShlLCB0LCBuKSB7XG4gICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIChuID0gZ2V0TW9kdWxhckluc3RhbmNlKG4pKSkge1xuICAgICAgICBpZiAoXCJcIiA9PT0gbikgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEMuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIHdpdGggZG9jdW1lbnRJZCgpLCB5b3UgbXVzdCBwcm92aWRlIGEgdmFsaWQgZG9jdW1lbnQgSUQsIGJ1dCBpdCB3YXMgYW4gZW1wdHkgc3RyaW5nLlwiKTtcbiAgICAgICAgaWYgKCFfX1BSSVZBVEVfaXNDb2xsZWN0aW9uR3JvdXBRdWVyeSh0KSAmJiAtMSAhPT0gbi5pbmRleE9mKFwiL1wiKSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEMuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgYSBjb2xsZWN0aW9uIGJ5IGRvY3VtZW50SWQoKSwgeW91IG11c3QgcHJvdmlkZSBhIHBsYWluIGRvY3VtZW50IElELCBidXQgJyR7bn0nIGNvbnRhaW5zIGEgJy8nIGNoYXJhY3Rlci5gKTtcbiAgICAgICAgY29uc3QgciA9IHQucGF0aC5jaGlsZChSZXNvdXJjZVBhdGguZnJvbVN0cmluZyhuKSk7XG4gICAgICAgIGlmICghRG9jdW1lbnRLZXkuaXNEb2N1bWVudEtleShyKSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEMuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgYSBjb2xsZWN0aW9uIGdyb3VwIGJ5IGRvY3VtZW50SWQoKSwgdGhlIHZhbHVlIHByb3ZpZGVkIG11c3QgcmVzdWx0IGluIGEgdmFsaWQgZG9jdW1lbnQgcGF0aCwgYnV0ICcke3J9JyBpcyBub3QgYmVjYXVzZSBpdCBoYXMgYW4gb2RkIG51bWJlciBvZiBzZWdtZW50cyAoJHtyLmxlbmd0aH0pLmApO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3JlZlZhbHVlKGUsIG5ldyBEb2N1bWVudEtleShyKSk7XG4gICAgfVxuICAgIGlmIChuIGluc3RhbmNlb2YgRG9jdW1lbnRSZWZlcmVuY2UpIHJldHVybiBfX1BSSVZBVEVfcmVmVmFsdWUoZSwgbi5fa2V5KTtcbiAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyB3aXRoIGRvY3VtZW50SWQoKSwgeW91IG11c3QgcHJvdmlkZSBhIHZhbGlkIHN0cmluZyBvciBhIERvY3VtZW50UmVmZXJlbmNlLCBidXQgaXQgd2FzOiAke19fUFJJVkFURV92YWx1ZURlc2NyaXB0aW9uKG4pfS5gKTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhhdCB0aGUgdmFsdWUgcGFzc2VkIGludG8gYSBkaXNqdW5jdGl2ZSBmaWx0ZXIgc2F0aXNmaWVzIGFsbFxuICogYXJyYXkgcmVxdWlyZW1lbnRzLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV92YWxpZGF0ZURpc2p1bmN0aXZlRmlsdGVyRWxlbWVudHMoZSwgdCkge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShlKSB8fCAwID09PSBlLmxlbmd0aCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEMuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgUXVlcnkuIEEgbm9uLWVtcHR5IGFycmF5IGlzIHJlcXVpcmVkIGZvciAnJHt0LnRvU3RyaW5nKCl9JyBmaWx0ZXJzLmApO1xufVxuXG4vKipcbiAqIEdpdmVuIGFuIG9wZXJhdG9yLCByZXR1cm5zIHRoZSBzZXQgb2Ygb3BlcmF0b3JzIHRoYXQgY2Fubm90IGJlIHVzZWQgd2l0aCBpdC5cbiAqXG4gKiBUaGlzIGlzIG5vdCBhIGNvbXByZWhlbnNpdmUgY2hlY2ssIGFuZCB0aGlzIGZ1bmN0aW9uIHNob3VsZCBiZSByZW1vdmVkIGluIHRoZVxuICogbG9uZyB0ZXJtLiBWYWxpZGF0aW9ucyBzaG91bGQgb2NjdXIgaW4gdGhlIEZpcmVzdG9yZSBiYWNrZW5kLlxuICpcbiAqIE9wZXJhdG9ycyBpbiBhIHF1ZXJ5IG11c3QgYWRoZXJlIHRvIHRoZSBmb2xsb3dpbmcgc2V0IG9mIHJ1bGVzOlxuICogMS4gT25seSBvbmUgaW5lcXVhbGl0eSBwZXIgcXVlcnkuXG4gKiAyLiBgTk9UX0lOYCBjYW5ub3QgYmUgdXNlZCB3aXRoIGFycmF5LCBkaXNqdW5jdGl2ZSwgb3IgYE5PVF9FUVVBTGAgb3BlcmF0b3JzLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV92YWxpZGF0ZU5ld0ZpZWxkRmlsdGVyKGUsIHQpIHtcbiAgICBjb25zdCBuID0gZnVuY3Rpb24gX19QUklWQVRFX2ZpbmRPcEluc2lkZUZpbHRlcnMoZSwgdCkge1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgZSkgZm9yIChjb25zdCBlIG9mIG4uZ2V0RmxhdHRlbmVkRmlsdGVycygpKSBpZiAodC5pbmRleE9mKGUub3ApID49IDApIHJldHVybiBlLm9wO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9KGUuZmlsdGVycywgZnVuY3Rpb24gX19QUklWQVRFX2NvbmZsaWN0aW5nT3BzKGUpIHtcbiAgICAgICAgc3dpdGNoIChlKSB7XG4gICAgICAgICAgY2FzZSBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovIDpcbiAgICAgICAgICAgIHJldHVybiBbIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gLCBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyBdO1xuXG4gICAgICAgICAgY2FzZSBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSAqLyA6XG4gICAgICAgICAgY2FzZSBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gOlxuICAgICAgICAgICAgcmV0dXJuIFsgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gXTtcblxuICAgICAgICAgIGNhc2UgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gOlxuICAgICAgICAgICAgcmV0dXJuIFsgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkgKi8gLCBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gLCBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyAsIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gXTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICB9KHQub3ApKTtcbiAgICBpZiAobnVsbCAhPT0gbikgXG4gICAgLy8gU3BlY2lhbCBjYXNlIHdoZW4gaXQncyBhIGR1cGxpY2F0ZSBvcCB0byBnaXZlIGEgc2xpZ2h0bHkgY2xlYXJlciBlcnJvciBtZXNzYWdlLlxuICAgIHRocm93IG4gPT09IHQub3AgPyBuZXcgRmlyZXN0b3JlRXJyb3IoQy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gWW91IGNhbm5vdCB1c2UgbW9yZSB0aGFuIG9uZSAnJHt0Lm9wLnRvU3RyaW5nKCl9JyBmaWx0ZXIuYCkgOiBuZXcgRmlyZXN0b3JlRXJyb3IoQy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gWW91IGNhbm5vdCB1c2UgJyR7dC5vcC50b1N0cmluZygpfScgZmlsdGVycyB3aXRoICcke24udG9TdHJpbmcoKX0nIGZpbHRlcnMuYCk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV92YWxpZGF0ZVF1ZXJ5RmlsdGVyQ29uc3RyYWludChlLCB0KSB7XG4gICAgaWYgKCEodCBpbnN0YW5jZW9mIFF1ZXJ5RmllbGRGaWx0ZXJDb25zdHJhaW50IHx8IHQgaW5zdGFuY2VvZiBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnQpKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQy5JTlZBTElEX0FSR1VNRU5ULCBgRnVuY3Rpb24gJHtlfSgpIHJlcXVpcmVzIEFwcGxpYWJsZUNvbnN0cmFpbnRzIGNyZWF0ZWQgd2l0aCBhIGNhbGwgdG8gJ3doZXJlKC4uLiknLCAnb3IoLi4uKScsIG9yICdhbmQoLi4uKScuYCk7XG59XG5cbmNsYXNzIEFic3RyYWN0VXNlckRhdGFXcml0ZXIge1xuICAgIGNvbnZlcnRWYWx1ZShlLCB0ID0gXCJub25lXCIpIHtcbiAgICAgICAgc3dpdGNoIChfX1BSSVZBVEVfdHlwZU9yZGVyKGUpKSB7XG4gICAgICAgICAgY2FzZSAwIC8qIFR5cGVPcmRlci5OdWxsVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgICBjYXNlIDEgLyogVHlwZU9yZGVyLkJvb2xlYW5WYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gZS5ib29sZWFuVmFsdWU7XG5cbiAgICAgICAgICBjYXNlIDIgLyogVHlwZU9yZGVyLk51bWJlclZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKGUuaW50ZWdlclZhbHVlIHx8IGUuZG91YmxlVmFsdWUpO1xuXG4gICAgICAgICAgY2FzZSAzIC8qIFR5cGVPcmRlci5UaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0VGltZXN0YW1wKGUudGltZXN0YW1wVmFsdWUpO1xuXG4gICAgICAgICAgY2FzZSA0IC8qIFR5cGVPcmRlci5TZXJ2ZXJUaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0U2VydmVyVGltZXN0YW1wKGUsIHQpO1xuXG4gICAgICAgICAgY2FzZSA1IC8qIFR5cGVPcmRlci5TdHJpbmdWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gZS5zdHJpbmdWYWx1ZTtcblxuICAgICAgICAgIGNhc2UgNiAvKiBUeXBlT3JkZXIuQmxvYlZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRCeXRlcyhfX1BSSVZBVEVfbm9ybWFsaXplQnl0ZVN0cmluZyhlLmJ5dGVzVmFsdWUpKTtcblxuICAgICAgICAgIGNhc2UgNyAvKiBUeXBlT3JkZXIuUmVmVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydFJlZmVyZW5jZShlLnJlZmVyZW5jZVZhbHVlKTtcblxuICAgICAgICAgIGNhc2UgOCAvKiBUeXBlT3JkZXIuR2VvUG9pbnRWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0R2VvUG9pbnQoZS5nZW9Qb2ludFZhbHVlKTtcblxuICAgICAgICAgIGNhc2UgOSAvKiBUeXBlT3JkZXIuQXJyYXlWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0QXJyYXkoZS5hcnJheVZhbHVlLCB0KTtcblxuICAgICAgICAgIGNhc2UgMTAgLyogVHlwZU9yZGVyLk9iamVjdFZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRPYmplY3QoZS5tYXBWYWx1ZSwgdCk7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgZmFpbCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnZlcnRPYmplY3QoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0T2JqZWN0TWFwKGUuZmllbGRzLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovICAgIGNvbnZlcnRPYmplY3RNYXAoZSwgdCA9IFwibm9uZVwiKSB7XG4gICAgICAgIGNvbnN0IG4gPSB7fTtcbiAgICAgICAgcmV0dXJuIGZvckVhY2goZSwgKChlLCByKSA9PiB7XG4gICAgICAgICAgICBuW2VdID0gdGhpcy5jb252ZXJ0VmFsdWUociwgdCk7XG4gICAgICAgIH0pKSwgbjtcbiAgICB9XG4gICAgY29udmVydEdlb1BvaW50KGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBHZW9Qb2ludChfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKGUubGF0aXR1ZGUpLCBfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKGUubG9uZ2l0dWRlKSk7XG4gICAgfVxuICAgIGNvbnZlcnRBcnJheShlLCB0KSB7XG4gICAgICAgIHJldHVybiAoZS52YWx1ZXMgfHwgW10pLm1hcCgoZSA9PiB0aGlzLmNvbnZlcnRWYWx1ZShlLCB0KSkpO1xuICAgIH1cbiAgICBjb252ZXJ0U2VydmVyVGltZXN0YW1wKGUsIHQpIHtcbiAgICAgICAgc3dpdGNoICh0KSB7XG4gICAgICAgICAgY2FzZSBcInByZXZpb3VzXCI6XG4gICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2dldFByZXZpb3VzVmFsdWUoZSk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbCA9PSBuID8gbnVsbCA6IHRoaXMuY29udmVydFZhbHVlKG4sIHQpO1xuXG4gICAgICAgICAgY2FzZSBcImVzdGltYXRlXCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0VGltZXN0YW1wKF9fUFJJVkFURV9nZXRMb2NhbFdyaXRlVGltZShlKSk7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29udmVydFRpbWVzdGFtcChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfbm9ybWFsaXplVGltZXN0YW1wKGUpO1xuICAgICAgICByZXR1cm4gbmV3IFRpbWVzdGFtcCh0LnNlY29uZHMsIHQubmFub3MpO1xuICAgIH1cbiAgICBjb252ZXJ0RG9jdW1lbnRLZXkoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcoZSk7XG4gICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KF9fUFJJVkFURV9pc1ZhbGlkUmVzb3VyY2VOYW1lKG4pKTtcbiAgICAgICAgY29uc3QgciA9IG5ldyBEYXRhYmFzZUlkKG4uZ2V0KDEpLCBuLmdldCgzKSksIGkgPSBuZXcgRG9jdW1lbnRLZXkobi5wb3BGaXJzdCg1KSk7XG4gICAgICAgIHJldHVybiByLmlzRXF1YWwodCkgfHwgXG4gICAgICAgIC8vIFRPRE8oYi82NDEzMDIwMik6IFNvbWVob3cgc3VwcG9ydCBmb3JlaWduIHJlZmVyZW5jZXMuXG4gICAgICAgIF9fUFJJVkFURV9sb2dFcnJvcihgRG9jdW1lbnQgJHtpfSBjb250YWlucyBhIGRvY3VtZW50IHJlZmVyZW5jZSB3aXRoaW4gYSBkaWZmZXJlbnQgZGF0YWJhc2UgKCR7ci5wcm9qZWN0SWR9LyR7ci5kYXRhYmFzZX0pIHdoaWNoIGlzIG5vdCBzdXBwb3J0ZWQuIEl0IHdpbGwgYmUgdHJlYXRlZCBhcyBhIHJlZmVyZW5jZSBpbiB0aGUgY3VycmVudCBkYXRhYmFzZSAoJHt0LnByb2plY3RJZH0vJHt0LmRhdGFiYXNlfSkgaW5zdGVhZC5gKSwgXG4gICAgICAgIGk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDb252ZXJ0cyBjdXN0b20gbW9kZWwgb2JqZWN0IG9mIHR5cGUgVCBpbnRvIGBEb2N1bWVudERhdGFgIGJ5IGFwcGx5aW5nIHRoZVxuICogY29udmVydGVyIGlmIGl0IGV4aXN0cy5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgd2hlbiBjb252ZXJ0aW5nIHVzZXIgb2JqZWN0cyB0byBgRG9jdW1lbnREYXRhYFxuICogYmVjYXVzZSB3ZSB3YW50IHRvIHByb3ZpZGUgdGhlIHVzZXIgd2l0aCBhIG1vcmUgc3BlY2lmaWMgZXJyb3IgbWVzc2FnZSBpZlxuICogdGhlaXIgYHNldCgpYCBvciBmYWlscyBkdWUgdG8gaW52YWxpZCBkYXRhIG9yaWdpbmF0aW5nIGZyb20gYSBgdG9GaXJlc3RvcmUoKWBcbiAqIGNhbGwuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2FwcGx5RmlyZXN0b3JlRGF0YUNvbnZlcnRlcihlLCB0LCBuKSB7XG4gICAgbGV0IHI7XG4gICAgLy8gQ2FzdCB0byBgYW55YCBpbiBvcmRlciB0byBzYXRpc2Z5IHRoZSB1bmlvbiB0eXBlIGNvbnN0cmFpbnQgb25cbiAgICAvLyB0b0ZpcmVzdG9yZSgpLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgcmV0dXJuIHIgPSBlID8gbiAmJiAobi5tZXJnZSB8fCBuLm1lcmdlRmllbGRzKSA/IGUudG9GaXJlc3RvcmUodCwgbikgOiBlLnRvRmlyZXN0b3JlKHQpIDogdCwgXG4gICAgcjtcbn1cblxuY2xhc3MgX19QUklWQVRFX0xpdGVVc2VyRGF0YVdyaXRlciBleHRlbmRzIEFic3RyYWN0VXNlckRhdGFXcml0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5maXJlc3RvcmUgPSBlO1xuICAgIH1cbiAgICBjb252ZXJ0Qnl0ZXMoZSkge1xuICAgICAgICByZXR1cm4gbmV3IEJ5dGVzKGUpO1xuICAgIH1cbiAgICBjb252ZXJ0UmVmZXJlbmNlKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuY29udmVydERvY3VtZW50S2V5KGUsIHRoaXMuZmlyZXN0b3JlLl9kYXRhYmFzZUlkKTtcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFJlZmVyZW5jZSh0aGlzLmZpcmVzdG9yZSwgLyogY29udmVydGVyPSAqLyBudWxsLCB0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIENyZWF0ZSBhbiBBZ2dyZWdhdGVGaWVsZCBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0byBjb21wdXRlIHRoZSBzdW0gb2ZcbiAqIGEgc3BlY2lmaWVkIGZpZWxkIG92ZXIgYSByYW5nZSBvZiBkb2N1bWVudHMgaW4gdGhlIHJlc3VsdCBzZXQgb2YgYSBxdWVyeS5cbiAqIEBwYXJhbSBmaWVsZCBTcGVjaWZpZXMgdGhlIGZpZWxkIHRvIHN1bSBhY3Jvc3MgdGhlIHJlc3VsdCBzZXQuXG4gKi8gZnVuY3Rpb24gc3VtKGUpIHtcbiAgICByZXR1cm4gbmV3IEFnZ3JlZ2F0ZUZpZWxkKFwic3VtXCIsIF9fUFJJVkFURV9maWVsZFBhdGhGcm9tQXJndW1lbnQkMShcInN1bVwiLCBlKSk7XG59XG5cbi8qKlxuICogQ3JlYXRlIGFuIEFnZ3JlZ2F0ZUZpZWxkIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHRvIGNvbXB1dGUgdGhlIGF2ZXJhZ2Ugb2ZcbiAqIGEgc3BlY2lmaWVkIGZpZWxkIG92ZXIgYSByYW5nZSBvZiBkb2N1bWVudHMgaW4gdGhlIHJlc3VsdCBzZXQgb2YgYSBxdWVyeS5cbiAqIEBwYXJhbSBmaWVsZCBTcGVjaWZpZXMgdGhlIGZpZWxkIHRvIGF2ZXJhZ2UgYWNyb3NzIHRoZSByZXN1bHQgc2V0LlxuICovIGZ1bmN0aW9uIGF2ZXJhZ2UoZSkge1xuICAgIHJldHVybiBuZXcgQWdncmVnYXRlRmllbGQoXCJhdmdcIiwgX19QUklWQVRFX2ZpZWxkUGF0aEZyb21Bcmd1bWVudCQxKFwiYXZlcmFnZVwiLCBlKSk7XG59XG5cbi8qKlxuICogQ3JlYXRlIGFuIEFnZ3JlZ2F0ZUZpZWxkIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHRvIGNvbXB1dGUgdGhlIGNvdW50IG9mXG4gKiBkb2N1bWVudHMgaW4gdGhlIHJlc3VsdCBzZXQgb2YgYSBxdWVyeS5cbiAqLyBmdW5jdGlvbiBjb3VudCgpIHtcbiAgICByZXR1cm4gbmV3IEFnZ3JlZ2F0ZUZpZWxkKFwiY291bnRcIik7XG59XG5cbi8qKlxuICogQ29tcGFyZXMgdHdvICdBZ2dyZWdhdGVGaWVsZGAgaW5zdGFuY2VzIGZvciBlcXVhbGl0eS5cbiAqXG4gKiBAcGFyYW0gbGVmdCBDb21wYXJlIHRoaXMgQWdncmVnYXRlRmllbGQgdG8gdGhlIGByaWdodGAuXG4gKiBAcGFyYW0gcmlnaHQgQ29tcGFyZSB0aGlzIEFnZ3JlZ2F0ZUZpZWxkIHRvIHRoZSBgbGVmdGAuXG4gKi8gZnVuY3Rpb24gYWdncmVnYXRlRmllbGRFcXVhbChlLCB0KSB7XG4gICAgdmFyIG4sIHI7XG4gICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBBZ2dyZWdhdGVGaWVsZCAmJiB0IGluc3RhbmNlb2YgQWdncmVnYXRlRmllbGQgJiYgZS5hZ2dyZWdhdGVUeXBlID09PSB0LmFnZ3JlZ2F0ZVR5cGUgJiYgKG51bGwgPT09IChuID0gZS5faW50ZXJuYWxGaWVsZFBhdGgpIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4uY2Fub25pY2FsU3RyaW5nKCkpID09PSAobnVsbCA9PT0gKHIgPSB0Ll9pbnRlcm5hbEZpZWxkUGF0aCkgfHwgdm9pZCAwID09PSByID8gdm9pZCAwIDogci5jYW5vbmljYWxTdHJpbmcoKSk7XG59XG5cbi8qKlxuICogQ29tcGFyZXMgdHdvIGBBZ2dyZWdhdGVRdWVyeVNuYXBzaG90YCBpbnN0YW5jZXMgZm9yIGVxdWFsaXR5LlxuICpcbiAqIFR3byBgQWdncmVnYXRlUXVlcnlTbmFwc2hvdGAgaW5zdGFuY2VzIGFyZSBjb25zaWRlcmVkIFwiZXF1YWxcIiBpZiB0aGV5IGhhdmVcbiAqIHVuZGVybHlpbmcgcXVlcmllcyB0aGF0IGNvbXBhcmUgZXF1YWwsIGFuZCB0aGUgc2FtZSBkYXRhLlxuICpcbiAqIEBwYXJhbSBsZWZ0IC0gVGhlIGZpcnN0IGBBZ2dyZWdhdGVRdWVyeVNuYXBzaG90YCB0byBjb21wYXJlLlxuICogQHBhcmFtIHJpZ2h0IC0gVGhlIHNlY29uZCBgQWdncmVnYXRlUXVlcnlTbmFwc2hvdGAgdG8gY29tcGFyZS5cbiAqXG4gKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdHMgYXJlIFwiZXF1YWxcIiwgYXMgZGVmaW5lZCBhYm92ZSwgb3IgYGZhbHNlYFxuICogb3RoZXJ3aXNlLlxuICovIGZ1bmN0aW9uIGFnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3RFcXVhbChlLCB0KSB7XG4gICAgcmV0dXJuIHF1ZXJ5RXF1YWwoZS5xdWVyeSwgdC5xdWVyeSkgJiYgZGVlcEVxdWFsKGUuZGF0YSgpLCB0LmRhdGEoKSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIE1ldGFkYXRhIGFib3V0IGEgc25hcHNob3QsIGRlc2NyaWJpbmcgdGhlIHN0YXRlIG9mIHRoZSBzbmFwc2hvdC5cbiAqLyBjbGFzcyBTbmFwc2hvdE1ldGFkYXRhIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5oYXNQZW5kaW5nV3JpdGVzID0gZSwgdGhpcy5mcm9tQ2FjaGUgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgU25hcHNob3RNZXRhZGF0YWAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBgU25hcHNob3RNZXRhZGF0YWAgdG8gY29tcGFyZSBhZ2FpbnN0LlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhpcyBgU25hcHNob3RNZXRhZGF0YWAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKi8gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhc1BlbmRpbmdXcml0ZXMgPT09IGUuaGFzUGVuZGluZ1dyaXRlcyAmJiB0aGlzLmZyb21DYWNoZSA9PT0gZS5mcm9tQ2FjaGU7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgYERvY3VtZW50U25hcHNob3RgIGNvbnRhaW5zIGRhdGEgcmVhZCBmcm9tIGEgZG9jdW1lbnQgaW4geW91ciBGaXJlc3RvcmVcbiAqIGRhdGFiYXNlLiBUaGUgZGF0YSBjYW4gYmUgZXh0cmFjdGVkIHdpdGggYC5kYXRhKClgIG9yIGAuZ2V0KDxmaWVsZD4pYCB0b1xuICogZ2V0IGEgc3BlY2lmaWMgZmllbGQuXG4gKlxuICogRm9yIGEgYERvY3VtZW50U25hcHNob3RgIHRoYXQgcG9pbnRzIHRvIGEgbm9uLWV4aXN0aW5nIGRvY3VtZW50LCBhbnkgZGF0YVxuICogYWNjZXNzIHdpbGwgcmV0dXJuICd1bmRlZmluZWQnLiBZb3UgY2FuIHVzZSB0aGUgYGV4aXN0cygpYCBtZXRob2QgdG9cbiAqIGV4cGxpY2l0bHkgdmVyaWZ5IGEgZG9jdW1lbnQncyBleGlzdGVuY2UuXG4gKi8gY2xhc3MgRG9jdW1lbnRTbmFwc2hvdCBleHRlbmRzIERvY3VtZW50U25hcHNob3QkMSB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgcHJvdGVjdGVkICovXG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgciwgaSwgcykge1xuICAgICAgICBzdXBlcihlLCB0LCBuLCByLCBzKSwgdGhpcy5fZmlyZXN0b3JlID0gZSwgdGhpcy5fZmlyZXN0b3JlSW1wbCA9IGUsIHRoaXMubWV0YWRhdGEgPSBpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSBkYXRhIGV4aXN0cy4gVHJ1ZSBpZiB0aGUgZG9jdW1lbnQgZXhpc3RzLlxuICAgICAqLyAgICBleGlzdHMoKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5leGlzdHMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IGFzIGFuIGBPYmplY3RgLiBSZXR1cm5zIGB1bmRlZmluZWRgIGlmXG4gICAgICogdGhlIGRvY3VtZW50IGRvZXNuJ3QgZXhpc3QuXG4gICAgICpcbiAgICAgKiBCeSBkZWZhdWx0LCBgc2VydmVyVGltZXN0YW1wKClgIHZhbHVlcyB0aGF0IGhhdmUgbm90IHlldCBiZWVuXG4gICAgICogc2V0IHRvIHRoZWlyIGZpbmFsIHZhbHVlIHdpbGwgYmUgcmV0dXJuZWQgYXMgYG51bGxgLiBZb3UgY2FuIG92ZXJyaWRlXG4gICAgICogdGhpcyBieSBwYXNzaW5nIGFuIG9wdGlvbnMgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBBbiBvcHRpb25zIG9iamVjdCB0byBjb25maWd1cmUgaG93IGRhdGEgaXMgcmV0cmlldmVkIGZyb21cbiAgICAgKiB0aGUgc25hcHNob3QgKGZvciBleGFtcGxlIHRoZSBkZXNpcmVkIGJlaGF2aW9yIGZvciBzZXJ2ZXIgdGltZXN0YW1wcyB0aGF0XG4gICAgICogaGF2ZSBub3QgeWV0IGJlZW4gc2V0IHRvIHRoZWlyIGZpbmFsIHZhbHVlKS5cbiAgICAgKiBAcmV0dXJucyBBbiBgT2JqZWN0YCBjb250YWluaW5nIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IG9yIGB1bmRlZmluZWRgIGlmXG4gICAgICogdGhlIGRvY3VtZW50IGRvZXNuJ3QgZXhpc3QuXG4gICAgICovICAgIGRhdGEoZSA9IHt9KSB7XG4gICAgICAgIGlmICh0aGlzLl9kb2N1bWVudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2NvbnZlcnRlcikge1xuICAgICAgICAgICAgICAgIC8vIFdlIG9ubHkgd2FudCB0byB1c2UgdGhlIGNvbnZlcnRlciBhbmQgY3JlYXRlIGEgbmV3IERvY3VtZW50U25hcHNob3RcbiAgICAgICAgICAgICAgICAvLyBpZiBhIGNvbnZlcnRlciBoYXMgYmVlbiBwcm92aWRlZC5cbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gbmV3IFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCh0aGlzLl9maXJlc3RvcmUsIHRoaXMuX3VzZXJEYXRhV3JpdGVyLCB0aGlzLl9rZXksIHRoaXMuX2RvY3VtZW50LCB0aGlzLm1ldGFkYXRhLCBcbiAgICAgICAgICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jb252ZXJ0ZXIuZnJvbUZpcmVzdG9yZSh0LCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl91c2VyRGF0YVdyaXRlci5jb252ZXJ0VmFsdWUodGhpcy5fZG9jdW1lbnQuZGF0YS52YWx1ZSwgZS5zZXJ2ZXJUaW1lc3RhbXBzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGZpZWxkIHNwZWNpZmllZCBieSBgZmllbGRQYXRoYC4gUmV0dXJucyBgdW5kZWZpbmVkYCBpZiB0aGVcbiAgICAgKiBkb2N1bWVudCBvciBmaWVsZCBkb2Vzbid0IGV4aXN0LlxuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCwgYSBgc2VydmVyVGltZXN0YW1wKClgIHRoYXQgaGFzIG5vdCB5ZXQgYmVlbiBzZXQgdG9cbiAgICAgKiBpdHMgZmluYWwgdmFsdWUgd2lsbCBiZSByZXR1cm5lZCBhcyBgbnVsbGAuIFlvdSBjYW4gb3ZlcnJpZGUgdGhpcyBieVxuICAgICAqIHBhc3NpbmcgYW4gb3B0aW9ucyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmllbGRQYXRoIC0gVGhlIHBhdGggKGZvciBleGFtcGxlICdmb28nIG9yICdmb28uYmFyJykgdG8gYSBzcGVjaWZpY1xuICAgICAqIGZpZWxkLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb3B0aW9ucyBvYmplY3QgdG8gY29uZmlndXJlIGhvdyB0aGUgZmllbGQgaXMgcmV0cmlldmVkXG4gICAgICogZnJvbSB0aGUgc25hcHNob3QgKGZvciBleGFtcGxlIHRoZSBkZXNpcmVkIGJlaGF2aW9yIGZvciBzZXJ2ZXIgdGltZXN0YW1wc1xuICAgICAqIHRoYXQgaGF2ZSBub3QgeWV0IGJlZW4gc2V0IHRvIHRoZWlyIGZpbmFsIHZhbHVlKS5cbiAgICAgKiBAcmV0dXJucyBUaGUgZGF0YSBhdCB0aGUgc3BlY2lmaWVkIGZpZWxkIGxvY2F0aW9uIG9yIHVuZGVmaW5lZCBpZiBubyBzdWNoXG4gICAgICogZmllbGQgZXhpc3RzIGluIHRoZSBkb2N1bWVudC5cbiAgICAgKi9cbiAgICAvLyBXZSBhcmUgdXNpbmcgYGFueWAgaGVyZSB0byBhdm9pZCBhbiBleHBsaWNpdCBjYXN0IGJ5IG91ciB1c2Vycy5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGdldChlLCB0ID0ge30pIHtcbiAgICAgICAgaWYgKHRoaXMuX2RvY3VtZW50KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5fZG9jdW1lbnQuZGF0YS5maWVsZChfX1BSSVZBVEVfZmllbGRQYXRoRnJvbUFyZ3VtZW50KFwiRG9jdW1lbnRTbmFwc2hvdC5nZXRcIiwgZSkpO1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IG4pIHJldHVybiB0aGlzLl91c2VyRGF0YVdyaXRlci5jb252ZXJ0VmFsdWUobiwgdC5zZXJ2ZXJUaW1lc3RhbXBzKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBRdWVyeURvY3VtZW50U25hcHNob3RgIGNvbnRhaW5zIGRhdGEgcmVhZCBmcm9tIGEgZG9jdW1lbnQgaW4geW91clxuICogRmlyZXN0b3JlIGRhdGFiYXNlIGFzIHBhcnQgb2YgYSBxdWVyeS4gVGhlIGRvY3VtZW50IGlzIGd1YXJhbnRlZWQgdG8gZXhpc3RcbiAqIGFuZCBpdHMgZGF0YSBjYW4gYmUgZXh0cmFjdGVkIHdpdGggYC5kYXRhKClgIG9yIGAuZ2V0KDxmaWVsZD4pYCB0byBnZXQgYVxuICogc3BlY2lmaWMgZmllbGQuXG4gKlxuICogQSBgUXVlcnlEb2N1bWVudFNuYXBzaG90YCBvZmZlcnMgdGhlIHNhbWUgQVBJIHN1cmZhY2UgYXMgYVxuICogYERvY3VtZW50U25hcHNob3RgLiBTaW5jZSBxdWVyeSByZXN1bHRzIGNvbnRhaW4gb25seSBleGlzdGluZyBkb2N1bWVudHMsIHRoZVxuICogYGV4aXN0c2AgcHJvcGVydHkgd2lsbCBhbHdheXMgYmUgdHJ1ZSBhbmQgYGRhdGEoKWAgd2lsbCBuZXZlciByZXR1cm5cbiAqICd1bmRlZmluZWQnLlxuICovIGNsYXNzIFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCBleHRlbmRzIERvY3VtZW50U25hcHNob3Qge1xuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBhcyBhbiBgT2JqZWN0YC5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQsIGBzZXJ2ZXJUaW1lc3RhbXAoKWAgdmFsdWVzIHRoYXQgaGF2ZSBub3QgeWV0IGJlZW5cbiAgICAgKiBzZXQgdG8gdGhlaXIgZmluYWwgdmFsdWUgd2lsbCBiZSByZXR1cm5lZCBhcyBgbnVsbGAuIFlvdSBjYW4gb3ZlcnJpZGVcbiAgICAgKiB0aGlzIGJ5IHBhc3NpbmcgYW4gb3B0aW9ucyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9wdGlvbnMgb2JqZWN0IHRvIGNvbmZpZ3VyZSBob3cgZGF0YSBpcyByZXRyaWV2ZWQgZnJvbVxuICAgICAqIHRoZSBzbmFwc2hvdCAoZm9yIGV4YW1wbGUgdGhlIGRlc2lyZWQgYmVoYXZpb3IgZm9yIHNlcnZlciB0aW1lc3RhbXBzIHRoYXRcbiAgICAgKiBoYXZlIG5vdCB5ZXQgYmVlbiBzZXQgdG8gdGhlaXIgZmluYWwgdmFsdWUpLlxuICAgICAqIEByZXR1cm5zIEFuIGBPYmplY3RgIGNvbnRhaW5pbmcgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICovXG4gICAgZGF0YShlID0ge30pIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmRhdGEoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgYFF1ZXJ5U25hcHNob3RgIGNvbnRhaW5zIHplcm8gb3IgbW9yZSBgRG9jdW1lbnRTbmFwc2hvdGAgb2JqZWN0c1xuICogcmVwcmVzZW50aW5nIHRoZSByZXN1bHRzIG9mIGEgcXVlcnkuIFRoZSBkb2N1bWVudHMgY2FuIGJlIGFjY2Vzc2VkIGFzIGFuXG4gKiBhcnJheSB2aWEgdGhlIGBkb2NzYCBwcm9wZXJ0eSBvciBlbnVtZXJhdGVkIHVzaW5nIHRoZSBgZm9yRWFjaGAgbWV0aG9kLiBUaGVcbiAqIG51bWJlciBvZiBkb2N1bWVudHMgY2FuIGJlIGRldGVybWluZWQgdmlhIHRoZSBgZW1wdHlgIGFuZCBgc2l6ZWBcbiAqIHByb3BlcnRpZXMuXG4gKi8gY2xhc3MgUXVlcnlTbmFwc2hvdCB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByKSB7XG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IGUsIHRoaXMuX3VzZXJEYXRhV3JpdGVyID0gdCwgdGhpcy5fc25hcHNob3QgPSByLCB0aGlzLm1ldGFkYXRhID0gbmV3IFNuYXBzaG90TWV0YWRhdGEoci5oYXNQZW5kaW5nV3JpdGVzLCByLmZyb21DYWNoZSksIFxuICAgICAgICB0aGlzLnF1ZXJ5ID0gbjtcbiAgICB9XG4gICAgLyoqIEFuIGFycmF5IG9mIGFsbCB0aGUgZG9jdW1lbnRzIGluIHRoZSBgUXVlcnlTbmFwc2hvdGAuICovICAgIGdldCBkb2NzKCkge1xuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmZvckVhY2goKHQgPT4gZS5wdXNoKHQpKSksIGU7XG4gICAgfVxuICAgIC8qKiBUaGUgbnVtYmVyIG9mIGRvY3VtZW50cyBpbiB0aGUgYFF1ZXJ5U25hcHNob3RgLiAqLyAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NuYXBzaG90LmRvY3Muc2l6ZTtcbiAgICB9XG4gICAgLyoqIFRydWUgaWYgdGhlcmUgYXJlIG5vIGRvY3VtZW50cyBpbiB0aGUgYFF1ZXJ5U25hcHNob3RgLiAqLyAgICBnZXQgZW1wdHkoKSB7XG4gICAgICAgIHJldHVybiAwID09PSB0aGlzLnNpemU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVudW1lcmF0ZXMgYWxsIG9mIHRoZSBkb2N1bWVudHMgaW4gdGhlIGBRdWVyeVNuYXBzaG90YC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjYWxsYmFjayAtIEEgY2FsbGJhY2sgdG8gYmUgY2FsbGVkIHdpdGggYSBgUXVlcnlEb2N1bWVudFNuYXBzaG90YCBmb3JcbiAgICAgKiBlYWNoIGRvY3VtZW50IGluIHRoZSBzbmFwc2hvdC5cbiAgICAgKiBAcGFyYW0gdGhpc0FyZyAtIFRoZSBgdGhpc2AgYmluZGluZyBmb3IgdGhlIGNhbGxiYWNrLlxuICAgICAqLyAgICBmb3JFYWNoKGUsIHQpIHtcbiAgICAgICAgdGhpcy5fc25hcHNob3QuZG9jcy5mb3JFYWNoKChuID0+IHtcbiAgICAgICAgICAgIGUuY2FsbCh0LCBuZXcgUXVlcnlEb2N1bWVudFNuYXBzaG90KHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fdXNlckRhdGFXcml0ZXIsIG4ua2V5LCBuLCBuZXcgU25hcHNob3RNZXRhZGF0YSh0aGlzLl9zbmFwc2hvdC5tdXRhdGVkS2V5cy5oYXMobi5rZXkpLCB0aGlzLl9zbmFwc2hvdC5mcm9tQ2FjaGUpLCB0aGlzLnF1ZXJ5LmNvbnZlcnRlcikpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gYXJyYXkgb2YgdGhlIGRvY3VtZW50cyBjaGFuZ2VzIHNpbmNlIHRoZSBsYXN0IHNuYXBzaG90LiBJZiB0aGlzXG4gICAgICogaXMgdGhlIGZpcnN0IHNuYXBzaG90LCBhbGwgZG9jdW1lbnRzIHdpbGwgYmUgaW4gdGhlIGxpc3QgYXMgJ2FkZGVkJ1xuICAgICAqIGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIGBTbmFwc2hvdExpc3Rlbk9wdGlvbnNgIHRoYXQgY29udHJvbCB3aGV0aGVyIG1ldGFkYXRhLW9ubHlcbiAgICAgKiBjaGFuZ2VzIChpLmUuIG9ubHkgYERvY3VtZW50U25hcHNob3QubWV0YWRhdGFgIGNoYW5nZWQpIHNob3VsZCB0cmlnZ2VyXG4gICAgICogc25hcHNob3QgZXZlbnRzLlxuICAgICAqLyAgICBkb2NDaGFuZ2VzKGUgPSB7fSkge1xuICAgICAgICBjb25zdCB0ID0gISFlLmluY2x1ZGVNZXRhZGF0YUNoYW5nZXM7XG4gICAgICAgIGlmICh0ICYmIHRoaXMuX3NuYXBzaG90LmV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQy5JTlZBTElEX0FSR1VNRU5ULCBcIlRvIGluY2x1ZGUgbWV0YWRhdGEgY2hhbmdlcyB3aXRoIHlvdXIgZG9jdW1lbnQgY2hhbmdlcywgeW91IG11c3QgYWxzbyBwYXNzIHsgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlczp0cnVlIH0gdG8gb25TbmFwc2hvdCgpLlwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZENoYW5nZXMgJiYgdGhpcy5fY2FjaGVkQ2hhbmdlc0luY2x1ZGVNZXRhZGF0YUNoYW5nZXMgPT09IHQgfHwgKHRoaXMuX2NhY2hlZENoYW5nZXMgPSBcbiAgICAgICAgLyoqIENhbGN1bGF0ZXMgdGhlIGFycmF5IG9mIGBEb2N1bWVudENoYW5nZWBzIGZvciBhIGdpdmVuIGBWaWV3U25hcHNob3RgLiAqL1xuICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfY2hhbmdlc0Zyb21TbmFwc2hvdChlLCB0KSB7XG4gICAgICAgICAgICBpZiAoZS5fc25hcHNob3Qub2xkRG9jcy5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICBsZXQgdCA9IDA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUuX3NuYXBzaG90LmRvY0NoYW5nZXMubWFwKChuID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IG5ldyBRdWVyeURvY3VtZW50U25hcHNob3QoZS5fZmlyZXN0b3JlLCBlLl91c2VyRGF0YVdyaXRlciwgbi5kb2Mua2V5LCBuLmRvYywgbmV3IFNuYXBzaG90TWV0YWRhdGEoZS5fc25hcHNob3QubXV0YXRlZEtleXMuaGFzKG4uZG9jLmtleSksIGUuX3NuYXBzaG90LmZyb21DYWNoZSksIGUucXVlcnkuY29udmVydGVyKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uZG9jLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFkZGVkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2M6IHIsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRJbmRleDogLTEsXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdJbmRleDogdCsrXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC8vIEEgYERvY3VtZW50U2V0YCB0aGF0IGlzIHVwZGF0ZWQgaW5jcmVtZW50YWxseSBhcyBjaGFuZ2VzIGFyZSBhcHBsaWVkIHRvIHVzZVxuICAgICAgICAgICAgICAgIC8vIHRvIGxvb2t1cCB0aGUgaW5kZXggb2YgYSBkb2N1bWVudC5cbiAgICAgICAgICAgICAgICBsZXQgbiA9IGUuX3NuYXBzaG90Lm9sZERvY3M7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUuX3NuYXBzaG90LmRvY0NoYW5nZXMuZmlsdGVyKChlID0+IHQgfHwgMyAvKiBDaGFuZ2VUeXBlLk1ldGFkYXRhICovICE9PSBlLnR5cGUpKS5tYXAoKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByID0gbmV3IFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdChlLl9maXJlc3RvcmUsIGUuX3VzZXJEYXRhV3JpdGVyLCB0LmRvYy5rZXksIHQuZG9jLCBuZXcgU25hcHNob3RNZXRhZGF0YShlLl9zbmFwc2hvdC5tdXRhdGVkS2V5cy5oYXModC5kb2Mua2V5KSwgZS5fc25hcHNob3QuZnJvbUNhY2hlKSwgZS5xdWVyeS5jb252ZXJ0ZXIpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgaSA9IC0xLCBzID0gLTE7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gIT09IHQudHlwZSAmJiAoaSA9IG4uaW5kZXhPZih0LmRvYy5rZXkpLCBuID0gbi5kZWxldGUodC5kb2Mua2V5KSksIFxuICAgICAgICAgICAgICAgICAgICAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyAhPT0gdC50eXBlICYmIChuID0gbi5hZGQodC5kb2MpLCBzID0gbi5pbmRleE9mKHQuZG9jLmtleSkpLCBcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogX19QUklWQVRFX3Jlc3VsdENoYW5nZVR5cGUodC50eXBlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvYzogcixcbiAgICAgICAgICAgICAgICAgICAgICAgIG9sZEluZGV4OiBpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3SW5kZXg6IHNcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0odGhpcywgdCksIHRoaXMuX2NhY2hlZENoYW5nZXNJbmNsdWRlTWV0YWRhdGFDaGFuZ2VzID0gdCksIHRoaXMuX2NhY2hlZENoYW5nZXM7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfcmVzdWx0Q2hhbmdlVHlwZShlKSB7XG4gICAgc3dpdGNoIChlKSB7XG4gICAgICBjYXNlIDAgLyogQ2hhbmdlVHlwZS5BZGRlZCAqLyA6XG4gICAgICAgIHJldHVybiBcImFkZGVkXCI7XG5cbiAgICAgIGNhc2UgMiAvKiBDaGFuZ2VUeXBlLk1vZGlmaWVkICovIDpcbiAgICAgIGNhc2UgMyAvKiBDaGFuZ2VUeXBlLk1ldGFkYXRhICovIDpcbiAgICAgICAgcmV0dXJuIFwibW9kaWZpZWRcIjtcblxuICAgICAgY2FzZSAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyA6XG4gICAgICAgIHJldHVybiBcInJlbW92ZWRcIjtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGZhaWwoKTtcbiAgICB9XG59XG5cbi8vIFRPRE8oZmlyZXN0b3JlZXhwKTogQWRkIHRlc3RzIGZvciBzbmFwc2hvdEVxdWFsIHdpdGggZGlmZmVyZW50IHNuYXBzaG90XG4vLyBtZXRhZGF0YVxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIHNuYXBzaG90cyBhcmUgZXF1YWwuXG4gKlxuICogQHBhcmFtIGxlZnQgLSBBIHNuYXBzaG90IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0gcmlnaHQgLSBBIHNuYXBzaG90IHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBzbmFwc2hvdHMgYXJlIGVxdWFsLlxuICovIGZ1bmN0aW9uIHNuYXBzaG90RXF1YWwoZSwgdCkge1xuICAgIHJldHVybiBlIGluc3RhbmNlb2YgRG9jdW1lbnRTbmFwc2hvdCAmJiB0IGluc3RhbmNlb2YgRG9jdW1lbnRTbmFwc2hvdCA/IGUuX2ZpcmVzdG9yZSA9PT0gdC5fZmlyZXN0b3JlICYmIGUuX2tleS5pc0VxdWFsKHQuX2tleSkgJiYgKG51bGwgPT09IGUuX2RvY3VtZW50ID8gbnVsbCA9PT0gdC5fZG9jdW1lbnQgOiBlLl9kb2N1bWVudC5pc0VxdWFsKHQuX2RvY3VtZW50KSkgJiYgZS5fY29udmVydGVyID09PSB0Ll9jb252ZXJ0ZXIgOiBlIGluc3RhbmNlb2YgUXVlcnlTbmFwc2hvdCAmJiB0IGluc3RhbmNlb2YgUXVlcnlTbmFwc2hvdCAmJiAoZS5fZmlyZXN0b3JlID09PSB0Ll9maXJlc3RvcmUgJiYgcXVlcnlFcXVhbChlLnF1ZXJ5LCB0LnF1ZXJ5KSAmJiBlLm1ldGFkYXRhLmlzRXF1YWwodC5tZXRhZGF0YSkgJiYgZS5fc25hcHNob3QuaXNFcXVhbCh0Ll9zbmFwc2hvdCkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZWFkcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhpcyBgRG9jdW1lbnRSZWZlcmVuY2VgLlxuICpcbiAqIE5vdGU6IGBnZXREb2MoKWAgYXR0ZW1wdHMgdG8gcHJvdmlkZSB1cC10by1kYXRlIGRhdGEgd2hlbiBwb3NzaWJsZSBieSB3YWl0aW5nXG4gKiBmb3IgZGF0YSBmcm9tIHRoZSBzZXJ2ZXIsIGJ1dCBpdCBtYXkgcmV0dXJuIGNhY2hlZCBkYXRhIG9yIGZhaWwgaWYgeW91IGFyZVxuICogb2ZmbGluZSBhbmQgdGhlIHNlcnZlciBjYW5ub3QgYmUgcmVhY2hlZC4gVG8gc3BlY2lmeSB0aGlzIGJlaGF2aW9yLCBpbnZva2VcbiAqIHtAbGluayBnZXREb2NGcm9tQ2FjaGV9IG9yIHtAbGluayBnZXREb2NGcm9tU2VydmVyfS5cbiAqXG4gKiBAcGFyYW0gcmVmZXJlbmNlIC0gVGhlIHJlZmVyZW5jZSBvZiB0aGUgZG9jdW1lbnQgdG8gZmV0Y2guXG4gKiBAcmV0dXJucyBBIFByb21pc2UgcmVzb2x2ZWQgd2l0aCBhIGBEb2N1bWVudFNuYXBzaG90YCBjb250YWluaW5nIHRoZVxuICogY3VycmVudCBkb2N1bWVudCBjb250ZW50cy5cbiAqLyBmdW5jdGlvbiBnZXREb2MoZSkge1xuICAgIGUgPSBfX1BSSVZBVEVfY2FzdChlLCBEb2N1bWVudFJlZmVyZW5jZSk7XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9jYXN0KGUuZmlyZXN0b3JlLCBGaXJlc3RvcmUpO1xuICAgIHJldHVybiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50R2V0RG9jdW1lbnRWaWFTbmFwc2hvdExpc3RlbmVyKGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQodCksIGUuX2tleSkudGhlbigobiA9PiBfX1BSSVZBVEVfY29udmVydFRvRG9jU25hcHNob3QodCwgZSwgbikpKTtcbn1cblxuY2xhc3MgX19QUklWQVRFX0V4cFVzZXJEYXRhV3JpdGVyIGV4dGVuZHMgQWJzdHJhY3RVc2VyRGF0YVdyaXRlciB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmZpcmVzdG9yZSA9IGU7XG4gICAgfVxuICAgIGNvbnZlcnRCeXRlcyhlKSB7XG4gICAgICAgIHJldHVybiBuZXcgQnl0ZXMoZSk7XG4gICAgfVxuICAgIGNvbnZlcnRSZWZlcmVuY2UoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5jb252ZXJ0RG9jdW1lbnRLZXkoZSwgdGhpcy5maXJlc3RvcmUuX2RhdGFiYXNlSWQpO1xuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50UmVmZXJlbmNlKHRoaXMuZmlyZXN0b3JlLCAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZWFkcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhpcyBgRG9jdW1lbnRSZWZlcmVuY2VgIGZyb20gY2FjaGUuXG4gKiBSZXR1cm5zIGFuIGVycm9yIGlmIHRoZSBkb2N1bWVudCBpcyBub3QgY3VycmVudGx5IGNhY2hlZC5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCByZXNvbHZlZCB3aXRoIGEgYERvY3VtZW50U25hcHNob3RgIGNvbnRhaW5pbmcgdGhlXG4gKiBjdXJyZW50IGRvY3VtZW50IGNvbnRlbnRzLlxuICovIGZ1bmN0aW9uIGdldERvY0Zyb21DYWNoZShlKSB7XG4gICAgZSA9IF9fUFJJVkFURV9jYXN0KGUsIERvY3VtZW50UmVmZXJlbmNlKTtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2Nhc3QoZS5maXJlc3RvcmUsIEZpcmVzdG9yZSksIG4gPSBlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKHQpLCByID0gbmV3IF9fUFJJVkFURV9FeHBVc2VyRGF0YVdyaXRlcih0KTtcbiAgICByZXR1cm4gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEdldERvY3VtZW50RnJvbUxvY2FsQ2FjaGUobiwgZS5fa2V5KS50aGVuKChuID0+IG5ldyBEb2N1bWVudFNuYXBzaG90KHQsIHIsIGUuX2tleSwgbiwgbmV3IFNuYXBzaG90TWV0YWRhdGEobnVsbCAhPT0gbiAmJiBuLmhhc0xvY2FsTXV0YXRpb25zLCBcbiAgICAvKiBmcm9tQ2FjaGU9ICovICEwKSwgZS5jb252ZXJ0ZXIpKSk7XG59XG5cbi8qKlxuICogUmVhZHMgdGhlIGRvY3VtZW50IHJlZmVycmVkIHRvIGJ5IHRoaXMgYERvY3VtZW50UmVmZXJlbmNlYCBmcm9tIHRoZSBzZXJ2ZXIuXG4gKiBSZXR1cm5zIGFuIGVycm9yIGlmIHRoZSBuZXR3b3JrIGlzIG5vdCBhdmFpbGFibGUuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgcmVzb2x2ZWQgd2l0aCBhIGBEb2N1bWVudFNuYXBzaG90YCBjb250YWluaW5nIHRoZVxuICogY3VycmVudCBkb2N1bWVudCBjb250ZW50cy5cbiAqLyBmdW5jdGlvbiBnZXREb2NGcm9tU2VydmVyKGUpIHtcbiAgICBlID0gX19QUklWQVRFX2Nhc3QoZSwgRG9jdW1lbnRSZWZlcmVuY2UpO1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfY2FzdChlLmZpcmVzdG9yZSwgRmlyZXN0b3JlKTtcbiAgICByZXR1cm4gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEdldERvY3VtZW50VmlhU25hcHNob3RMaXN0ZW5lcihlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKHQpLCBlLl9rZXksIHtcbiAgICAgICAgc291cmNlOiBcInNlcnZlclwiXG4gICAgfSkudGhlbigobiA9PiBfX1BSSVZBVEVfY29udmVydFRvRG9jU25hcHNob3QodCwgZSwgbikpKTtcbn1cblxuLyoqXG4gKiBFeGVjdXRlcyB0aGUgcXVlcnkgYW5kIHJldHVybnMgdGhlIHJlc3VsdHMgYXMgYSBgUXVlcnlTbmFwc2hvdGAuXG4gKlxuICogTm90ZTogYGdldERvY3MoKWAgYXR0ZW1wdHMgdG8gcHJvdmlkZSB1cC10by1kYXRlIGRhdGEgd2hlbiBwb3NzaWJsZSBieVxuICogd2FpdGluZyBmb3IgZGF0YSBmcm9tIHRoZSBzZXJ2ZXIsIGJ1dCBpdCBtYXkgcmV0dXJuIGNhY2hlZCBkYXRhIG9yIGZhaWwgaWZcbiAqIHlvdSBhcmUgb2ZmbGluZSBhbmQgdGhlIHNlcnZlciBjYW5ub3QgYmUgcmVhY2hlZC4gVG8gc3BlY2lmeSB0aGlzIGJlaGF2aW9yLFxuICogaW52b2tlIHtAbGluayBnZXREb2NzRnJvbUNhY2hlfSBvciB7QGxpbmsgZ2V0RG9jc0Zyb21TZXJ2ZXJ9LlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aXRoIHRoZSByZXN1bHRzIG9mIHRoZSBxdWVyeS5cbiAqLyBmdW5jdGlvbiBnZXREb2NzKGUpIHtcbiAgICBlID0gX19QUklWQVRFX2Nhc3QoZSwgUXVlcnkpO1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfY2FzdChlLmZpcmVzdG9yZSwgRmlyZXN0b3JlKSwgbiA9IGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQodCksIHIgPSBuZXcgX19QUklWQVRFX0V4cFVzZXJEYXRhV3JpdGVyKHQpO1xuICAgIHJldHVybiBfX1BSSVZBVEVfdmFsaWRhdGVIYXNFeHBsaWNpdE9yZGVyQnlGb3JMaW1pdFRvTGFzdChlLl9xdWVyeSksIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRHZXREb2N1bWVudHNWaWFTbmFwc2hvdExpc3RlbmVyKG4sIGUuX3F1ZXJ5KS50aGVuKChuID0+IG5ldyBRdWVyeVNuYXBzaG90KHQsIHIsIGUsIG4pKSk7XG59XG5cbi8qKlxuICogRXhlY3V0ZXMgdGhlIHF1ZXJ5IGFuZCByZXR1cm5zIHRoZSByZXN1bHRzIGFzIGEgYFF1ZXJ5U25hcHNob3RgIGZyb20gY2FjaGUuXG4gKiBSZXR1cm5zIGFuIGVtcHR5IHJlc3VsdCBzZXQgaWYgbm8gZG9jdW1lbnRzIG1hdGNoaW5nIHRoZSBxdWVyeSBhcmUgY3VycmVudGx5XG4gKiBjYWNoZWQuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCB3aWxsIGJlIHJlc29sdmVkIHdpdGggdGhlIHJlc3VsdHMgb2YgdGhlIHF1ZXJ5LlxuICovIGZ1bmN0aW9uIGdldERvY3NGcm9tQ2FjaGUoZSkge1xuICAgIGUgPSBfX1BSSVZBVEVfY2FzdChlLCBRdWVyeSk7XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9jYXN0KGUuZmlyZXN0b3JlLCBGaXJlc3RvcmUpLCBuID0gZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZCh0KSwgciA9IG5ldyBfX1BSSVZBVEVfRXhwVXNlckRhdGFXcml0ZXIodCk7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRHZXREb2N1bWVudHNGcm9tTG9jYWxDYWNoZShuLCBlLl9xdWVyeSkudGhlbigobiA9PiBuZXcgUXVlcnlTbmFwc2hvdCh0LCByLCBlLCBuKSkpO1xufVxuXG4vKipcbiAqIEV4ZWN1dGVzIHRoZSBxdWVyeSBhbmQgcmV0dXJucyB0aGUgcmVzdWx0cyBhcyBhIGBRdWVyeVNuYXBzaG90YCBmcm9tIHRoZVxuICogc2VydmVyLiBSZXR1cm5zIGFuIGVycm9yIGlmIHRoZSBuZXR3b3JrIGlzIG5vdCBhdmFpbGFibGUuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCB3aWxsIGJlIHJlc29sdmVkIHdpdGggdGhlIHJlc3VsdHMgb2YgdGhlIHF1ZXJ5LlxuICovIGZ1bmN0aW9uIGdldERvY3NGcm9tU2VydmVyKGUpIHtcbiAgICBlID0gX19QUklWQVRFX2Nhc3QoZSwgUXVlcnkpO1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfY2FzdChlLmZpcmVzdG9yZSwgRmlyZXN0b3JlKSwgbiA9IGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQodCksIHIgPSBuZXcgX19QUklWQVRFX0V4cFVzZXJEYXRhV3JpdGVyKHQpO1xuICAgIHJldHVybiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50R2V0RG9jdW1lbnRzVmlhU25hcHNob3RMaXN0ZW5lcihuLCBlLl9xdWVyeSwge1xuICAgICAgICBzb3VyY2U6IFwic2VydmVyXCJcbiAgICB9KS50aGVuKChuID0+IG5ldyBRdWVyeVNuYXBzaG90KHQsIHIsIGUsIG4pKSk7XG59XG5cbmZ1bmN0aW9uIHNldERvYyhlLCB0LCBuKSB7XG4gICAgZSA9IF9fUFJJVkFURV9jYXN0KGUsIERvY3VtZW50UmVmZXJlbmNlKTtcbiAgICBjb25zdCByID0gX19QUklWQVRFX2Nhc3QoZS5maXJlc3RvcmUsIEZpcmVzdG9yZSksIGkgPSBfX1BSSVZBVEVfYXBwbHlGaXJlc3RvcmVEYXRhQ29udmVydGVyKGUuY29udmVydGVyLCB0LCBuKTtcbiAgICByZXR1cm4gZXhlY3V0ZVdyaXRlKHIsIFsgX19QUklWQVRFX3BhcnNlU2V0RGF0YShfX1BSSVZBVEVfbmV3VXNlckRhdGFSZWFkZXIociksIFwic2V0RG9jXCIsIGUuX2tleSwgaSwgbnVsbCAhPT0gZS5jb252ZXJ0ZXIsIG4pLnRvTXV0YXRpb24oZS5fa2V5LCBQcmVjb25kaXRpb24ubm9uZSgpKSBdKTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlRG9jKGUsIHQsIG4sIC4uLnIpIHtcbiAgICBlID0gX19QUklWQVRFX2Nhc3QoZSwgRG9jdW1lbnRSZWZlcmVuY2UpO1xuICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfY2FzdChlLmZpcmVzdG9yZSwgRmlyZXN0b3JlKSwgcyA9IF9fUFJJVkFURV9uZXdVc2VyRGF0YVJlYWRlcihpKTtcbiAgICBsZXQgbztcbiAgICBvID0gXCJzdHJpbmdcIiA9PSB0eXBlb2YgKFxuICAgIC8vIEZvciBDb21wYXQgdHlwZXMsIHdlIGhhdmUgdG8gXCJleHRyYWN0XCIgdGhlIHVuZGVybHlpbmcgdHlwZXMgYmVmb3JlXG4gICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgIHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCkpIHx8IHQgaW5zdGFuY2VvZiBGaWVsZFBhdGggPyBfX1BSSVZBVEVfcGFyc2VVcGRhdGVWYXJhcmdzKHMsIFwidXBkYXRlRG9jXCIsIGUuX2tleSwgdCwgbiwgcikgOiBfX1BSSVZBVEVfcGFyc2VVcGRhdGVEYXRhKHMsIFwidXBkYXRlRG9jXCIsIGUuX2tleSwgdCk7XG4gICAgcmV0dXJuIGV4ZWN1dGVXcml0ZShpLCBbIG8udG9NdXRhdGlvbihlLl9rZXksIFByZWNvbmRpdGlvbi5leGlzdHMoITApKSBdKTtcbn1cblxuLyoqXG4gKiBEZWxldGVzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGUgc3BlY2lmaWVkIGBEb2N1bWVudFJlZmVyZW5jZWAuXG4gKlxuICogQHBhcmFtIHJlZmVyZW5jZSAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBkZWxldGUuXG4gKiBAcmV0dXJucyBBIFByb21pc2UgcmVzb2x2ZWQgb25jZSB0aGUgZG9jdW1lbnQgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5XG4gKiBkZWxldGVkIGZyb20gdGhlIGJhY2tlbmQgKG5vdGUgdGhhdCBpdCB3b24ndCByZXNvbHZlIHdoaWxlIHlvdSdyZSBvZmZsaW5lKS5cbiAqLyBmdW5jdGlvbiBkZWxldGVEb2MoZSkge1xuICAgIHJldHVybiBleGVjdXRlV3JpdGUoX19QUklWQVRFX2Nhc3QoZS5maXJlc3RvcmUsIEZpcmVzdG9yZSksIFsgbmV3IF9fUFJJVkFURV9EZWxldGVNdXRhdGlvbihlLl9rZXksIFByZWNvbmRpdGlvbi5ub25lKCkpIF0pO1xufVxuXG4vKipcbiAqIEFkZCBhIG5ldyBkb2N1bWVudCB0byBzcGVjaWZpZWQgYENvbGxlY3Rpb25SZWZlcmVuY2VgIHdpdGggdGhlIGdpdmVuIGRhdGEsXG4gKiBhc3NpZ25pbmcgaXQgYSBkb2N1bWVudCBJRCBhdXRvbWF0aWNhbGx5LlxuICpcbiAqIEBwYXJhbSByZWZlcmVuY2UgLSBBIHJlZmVyZW5jZSB0byB0aGUgY29sbGVjdGlvbiB0byBhZGQgdGhpcyBkb2N1bWVudCB0by5cbiAqIEBwYXJhbSBkYXRhIC0gQW4gT2JqZWN0IGNvbnRhaW5pbmcgdGhlIGRhdGEgZm9yIHRoZSBuZXcgZG9jdW1lbnQuXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCByZXNvbHZlZCB3aXRoIGEgYERvY3VtZW50UmVmZXJlbmNlYCBwb2ludGluZyB0byB0aGVcbiAqIG5ld2x5IGNyZWF0ZWQgZG9jdW1lbnQgYWZ0ZXIgaXQgaGFzIGJlZW4gd3JpdHRlbiB0byB0aGUgYmFja2VuZCAoTm90ZSB0aGF0IGl0XG4gKiB3b24ndCByZXNvbHZlIHdoaWxlIHlvdSdyZSBvZmZsaW5lKS5cbiAqLyBmdW5jdGlvbiBhZGREb2MoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfY2FzdChlLmZpcmVzdG9yZSwgRmlyZXN0b3JlKSwgciA9IGRvYyhlKSwgaSA9IF9fUFJJVkFURV9hcHBseUZpcmVzdG9yZURhdGFDb252ZXJ0ZXIoZS5jb252ZXJ0ZXIsIHQpO1xuICAgIHJldHVybiBleGVjdXRlV3JpdGUobiwgWyBfX1BSSVZBVEVfcGFyc2VTZXREYXRhKF9fUFJJVkFURV9uZXdVc2VyRGF0YVJlYWRlcihlLmZpcmVzdG9yZSksIFwiYWRkRG9jXCIsIHIuX2tleSwgaSwgbnVsbCAhPT0gZS5jb252ZXJ0ZXIsIHt9KS50b011dGF0aW9uKHIuX2tleSwgUHJlY29uZGl0aW9uLmV4aXN0cyghMSkpIF0pLnRoZW4oKCgpID0+IHIpKTtcbn1cblxuZnVuY3Rpb24gb25TbmFwc2hvdChlLCAuLi50KSB7XG4gICAgdmFyIG4sIHIsIGk7XG4gICAgZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKTtcbiAgICBsZXQgcyA9IHtcbiAgICAgICAgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlczogITEsXG4gICAgICAgIHNvdXJjZTogXCJkZWZhdWx0XCJcbiAgICB9LCBvID0gMDtcbiAgICBcIm9iamVjdFwiICE9IHR5cGVvZiB0W29dIHx8IF9fUFJJVkFURV9pc1BhcnRpYWxPYnNlcnZlcih0W29dKSB8fCAocyA9IHRbb10sIG8rKyk7XG4gICAgY29uc3QgXyA9IHtcbiAgICAgICAgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlczogcy5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzLFxuICAgICAgICBzb3VyY2U6IHMuc291cmNlXG4gICAgfTtcbiAgICBpZiAoX19QUklWQVRFX2lzUGFydGlhbE9ic2VydmVyKHRbb10pKSB7XG4gICAgICAgIGNvbnN0IGUgPSB0W29dO1xuICAgICAgICB0W29dID0gbnVsbCA9PT0gKG4gPSBlLm5leHQpIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4uYmluZChlKSwgdFtvICsgMV0gPSBudWxsID09PSAociA9IGUuZXJyb3IpIHx8IHZvaWQgMCA9PT0gciA/IHZvaWQgMCA6IHIuYmluZChlKSwgXG4gICAgICAgIHRbbyArIDJdID0gbnVsbCA9PT0gKGkgPSBlLmNvbXBsZXRlKSB8fCB2b2lkIDAgPT09IGkgPyB2b2lkIDAgOiBpLmJpbmQoZSk7XG4gICAgfVxuICAgIGxldCBhLCB1LCBjO1xuICAgIGlmIChlIGluc3RhbmNlb2YgRG9jdW1lbnRSZWZlcmVuY2UpIHUgPSBfX1BSSVZBVEVfY2FzdChlLmZpcmVzdG9yZSwgRmlyZXN0b3JlKSwgXG4gICAgYyA9IF9fUFJJVkFURV9uZXdRdWVyeUZvclBhdGgoZS5fa2V5LnBhdGgpLCBhID0ge1xuICAgICAgICBuZXh0OiBuID0+IHtcbiAgICAgICAgICAgIHRbb10gJiYgdFtvXShfX1BSSVZBVEVfY29udmVydFRvRG9jU25hcHNob3QodSwgZSwgbikpO1xuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogdFtvICsgMV0sXG4gICAgICAgIGNvbXBsZXRlOiB0W28gKyAyXVxuICAgIH07IGVsc2Uge1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2Nhc3QoZSwgUXVlcnkpO1xuICAgICAgICB1ID0gX19QUklWQVRFX2Nhc3Qobi5maXJlc3RvcmUsIEZpcmVzdG9yZSksIGMgPSBuLl9xdWVyeTtcbiAgICAgICAgY29uc3QgciA9IG5ldyBfX1BSSVZBVEVfRXhwVXNlckRhdGFXcml0ZXIodSk7XG4gICAgICAgIGEgPSB7XG4gICAgICAgICAgICBuZXh0OiBlID0+IHtcbiAgICAgICAgICAgICAgICB0W29dICYmIHRbb10obmV3IFF1ZXJ5U25hcHNob3QodSwgciwgbiwgZSkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiB0W28gKyAxXSxcbiAgICAgICAgICAgIGNvbXBsZXRlOiB0W28gKyAyXVxuICAgICAgICB9LCBfX1BSSVZBVEVfdmFsaWRhdGVIYXNFeHBsaWNpdE9yZGVyQnlGb3JMaW1pdFRvTGFzdChlLl9xdWVyeSk7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50TGlzdGVuKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgY29uc3QgaSA9IG5ldyBfX1BSSVZBVEVfQXN5bmNPYnNlcnZlcihyKSwgcyA9IG5ldyBfX1BSSVZBVEVfUXVlcnlMaXN0ZW5lcih0LCBpLCBuKTtcbiAgICAgICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyTGlzdGVuKGF3YWl0IF9fUFJJVkFURV9nZXRFdmVudE1hbmFnZXIoZSksIHMpKSksIFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICBpLiRhKCksIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyVW5saXN0ZW4oYXdhaXQgX19QUklWQVRFX2dldEV2ZW50TWFuYWdlcihlKSwgcykpKTtcbiAgICAgICAgfTtcbiAgICB9KGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQodSksIGMsIF8sIGEpO1xufVxuXG5mdW5jdGlvbiBvblNuYXBzaG90c0luU3luYyhlLCB0KSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRBZGRTbmFwc2hvdHNJblN5bmNMaXN0ZW5lcihlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKGUgPSBfX1BSSVZBVEVfY2FzdChlLCBGaXJlc3RvcmUpKSwgX19QUklWQVRFX2lzUGFydGlhbE9ic2VydmVyKHQpID8gdCA6IHtcbiAgICAgICAgbmV4dDogdFxuICAgIH0pO1xufVxuXG4vKipcbiAqIExvY2FsbHkgd3JpdGVzIGBtdXRhdGlvbnNgIG9uIHRoZSBhc3luYyBxdWV1ZS5cbiAqIEBpbnRlcm5hbFxuICovIGZ1bmN0aW9uIGV4ZWN1dGVXcml0ZShlLCB0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRXcml0ZShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgX19QUklWQVRFX0RlZmVycmVkO1xuICAgICAgICByZXR1cm4gZS5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IF9fUFJJVkFURV9zeW5jRW5naW5lV3JpdGUoYXdhaXQgX19QUklWQVRFX2dldFN5bmNFbmdpbmUoZSksIHQsIG4pKSksIFxuICAgICAgICBuLnByb21pc2U7XG4gICAgfShlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKGUpLCB0KTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhIHtAbGluayBWaWV3U25hcHNob3R9IHRoYXQgY29udGFpbnMgdGhlIHNpbmdsZSBkb2N1bWVudCBzcGVjaWZpZWQgYnkgYHJlZmBcbiAqIHRvIGEge0BsaW5rIERvY3VtZW50U25hcHNob3R9LlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9jb252ZXJ0VG9Eb2NTbmFwc2hvdChlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IG4uZG9jcy5nZXQodC5fa2V5KSwgaSA9IG5ldyBfX1BSSVZBVEVfRXhwVXNlckRhdGFXcml0ZXIoZSk7XG4gICAgcmV0dXJuIG5ldyBEb2N1bWVudFNuYXBzaG90KGUsIGksIHQuX2tleSwgciwgbmV3IFNuYXBzaG90TWV0YWRhdGEobi5oYXNQZW5kaW5nV3JpdGVzLCBuLmZyb21DYWNoZSksIHQuY29udmVydGVyKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgbnVtYmVyIG9mIGRvY3VtZW50cyBpbiB0aGUgcmVzdWx0IHNldCBvZiB0aGUgZ2l2ZW4gcXVlcnlcbiAqIHdpdGhvdXQgYWN0dWFsbHkgZG93bmxvYWRpbmcgdGhlIGRvY3VtZW50cy5cbiAqXG4gKiBVc2luZyB0aGlzIGZ1bmN0aW9uIHRvIGNvdW50IHRoZSBkb2N1bWVudHMgaXMgZWZmaWNpZW50IGJlY2F1c2Ugb25seSB0aGVcbiAqIGZpbmFsIGNvdW50LCBub3QgdGhlIGRvY3VtZW50cycgZGF0YSwgaXMgZG93bmxvYWRlZC4gVGhpcyBmdW5jdGlvbiBjYW5cbiAqIGNvdW50IHRoZSBkb2N1bWVudHMgaW4gY2FzZXMgd2hlcmUgdGhlIHJlc3VsdCBzZXQgaXMgcHJvaGliaXRpdmVseSBsYXJnZSB0b1xuICogZG93bmxvYWQgZW50aXJlbHkgKHRob3VzYW5kcyBvZiBkb2N1bWVudHMpLlxuICpcbiAqIFRoZSByZXN1bHQgcmVjZWl2ZWQgZnJvbSB0aGUgc2VydmVyIGlzIHByZXNlbnRlZCwgdW5hbHRlcmVkLCB3aXRob3V0XG4gKiBjb25zaWRlcmluZyBhbnkgbG9jYWwgc3RhdGUuIFRoYXQgaXMsIGRvY3VtZW50cyBpbiB0aGUgbG9jYWwgY2FjaGUgYXJlIG5vdFxuICogdGFrZW4gaW50byBjb25zaWRlcmF0aW9uLCBuZWl0aGVyIGFyZSBsb2NhbCBtb2RpZmljYXRpb25zIG5vdCB5ZXRcbiAqIHN5bmNocm9uaXplZCB3aXRoIHRoZSBzZXJ2ZXIuIFByZXZpb3VzbHktZG93bmxvYWRlZCByZXN1bHRzLCBpZiBhbnksIGFyZSBub3RcbiAqIHVzZWQuIEV2ZXJ5IGludm9jYXRpb24gb2YgdGhpcyBmdW5jdGlvbiBuZWNlc3NhcmlseSBpbnZvbHZlcyBhIHJvdW5kIHRyaXAgdG9cbiAqIHRoZSBzZXJ2ZXIuXG4gKlxuICogQHBhcmFtIHF1ZXJ5IFRoZSBxdWVyeSB3aG9zZSByZXN1bHQgc2V0IHNpemUgaXMgY2FsY3VsYXRlZC5cbiAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgd2l0aCB0aGUgY291bnQ7IHRoZSBjb3VudCBjYW4gYmVcbiAqIHJldHJpZXZlZCBmcm9tIGBzbmFwc2hvdC5kYXRhKCkuY291bnRgLCB3aGVyZSBgc25hcHNob3RgIGlzIHRoZVxuICogYEFnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3RgIHRvIHdoaWNoIHRoZSByZXR1cm5lZCBQcm9taXNlIHJlc29sdmVzLlxuICovIGZ1bmN0aW9uIGdldENvdW50RnJvbVNlcnZlcihlKSB7XG4gICAgcmV0dXJuIGdldEFnZ3JlZ2F0ZUZyb21TZXJ2ZXIoZSwge1xuICAgICAgICBjb3VudDogY291bnQoKVxuICAgIH0pO1xufVxuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHNwZWNpZmllZCBhZ2dyZWdhdGlvbnMgb3ZlciB0aGUgZG9jdW1lbnRzIGluIHRoZSByZXN1bHRcbiAqIHNldCBvZiB0aGUgZ2l2ZW4gcXVlcnkgd2l0aG91dCBhY3R1YWxseSBkb3dubG9hZGluZyB0aGUgZG9jdW1lbnRzLlxuICpcbiAqIFVzaW5nIHRoaXMgZnVuY3Rpb24gdG8gcGVyZm9ybSBhZ2dyZWdhdGlvbnMgaXMgZWZmaWNpZW50IGJlY2F1c2Ugb25seSB0aGVcbiAqIGZpbmFsIGFnZ3JlZ2F0aW9uIHZhbHVlcywgbm90IHRoZSBkb2N1bWVudHMnIGRhdGEsIGFyZSBkb3dubG9hZGVkLiBUaGlzXG4gKiBmdW5jdGlvbiBjYW4gcGVyZm9ybSBhZ2dyZWdhdGlvbnMgb2YgdGhlIGRvY3VtZW50cyBpbiBjYXNlcyB3aGVyZSB0aGUgcmVzdWx0XG4gKiBzZXQgaXMgcHJvaGliaXRpdmVseSBsYXJnZSB0byBkb3dubG9hZCBlbnRpcmVseSAodGhvdXNhbmRzIG9mIGRvY3VtZW50cykuXG4gKlxuICogVGhlIHJlc3VsdCByZWNlaXZlZCBmcm9tIHRoZSBzZXJ2ZXIgaXMgcHJlc2VudGVkLCB1bmFsdGVyZWQsIHdpdGhvdXRcbiAqIGNvbnNpZGVyaW5nIGFueSBsb2NhbCBzdGF0ZS4gVGhhdCBpcywgZG9jdW1lbnRzIGluIHRoZSBsb2NhbCBjYWNoZSBhcmUgbm90XG4gKiB0YWtlbiBpbnRvIGNvbnNpZGVyYXRpb24sIG5laXRoZXIgYXJlIGxvY2FsIG1vZGlmaWNhdGlvbnMgbm90IHlldFxuICogc3luY2hyb25pemVkIHdpdGggdGhlIHNlcnZlci4gUHJldmlvdXNseS1kb3dubG9hZGVkIHJlc3VsdHMsIGlmIGFueSwgYXJlIG5vdFxuICogdXNlZC4gRXZlcnkgaW52b2NhdGlvbiBvZiB0aGlzIGZ1bmN0aW9uIG5lY2Vzc2FyaWx5IGludm9sdmVzIGEgcm91bmQgdHJpcCB0b1xuICogdGhlIHNlcnZlci5cbiAqXG4gKiBAcGFyYW0gcXVlcnkgVGhlIHF1ZXJ5IHdob3NlIHJlc3VsdCBzZXQgaXMgYWdncmVnYXRlZCBvdmVyLlxuICogQHBhcmFtIGFnZ3JlZ2F0ZVNwZWMgQW4gYEFnZ3JlZ2F0ZVNwZWNgIG9iamVjdCB0aGF0IHNwZWNpZmllcyB0aGUgYWdncmVnYXRlc1xuICogdG8gcGVyZm9ybSBvdmVyIHRoZSByZXN1bHQgc2V0LiBUaGUgQWdncmVnYXRlU3BlYyBzcGVjaWZpZXMgYWxpYXNlcyBmb3IgZWFjaFxuICogYWdncmVnYXRlLCB3aGljaCBjYW4gYmUgdXNlZCB0byByZXRyaWV2ZSB0aGUgYWdncmVnYXRlIHJlc3VsdC5cbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBhZ2dyZWdhdGVTbmFwc2hvdCA9IGF3YWl0IGdldEFnZ3JlZ2F0ZUZyb21TZXJ2ZXIocXVlcnksIHtcbiAqICAgY291bnRPZkRvY3M6IGNvdW50KCksXG4gKiAgIHRvdGFsSG91cnM6IHN1bSgnaG91cnMnKSxcbiAqICAgYXZlcmFnZVNjb3JlOiBhdmVyYWdlKCdzY29yZScpXG4gKiB9KTtcbiAqXG4gKiBjb25zdCBjb3VudE9mRG9jczogbnVtYmVyID0gYWdncmVnYXRlU25hcHNob3QuZGF0YSgpLmNvdW50T2ZEb2NzO1xuICogY29uc3QgdG90YWxIb3VyczogbnVtYmVyID0gYWdncmVnYXRlU25hcHNob3QuZGF0YSgpLnRvdGFsSG91cnM7XG4gKiBjb25zdCBhdmVyYWdlU2NvcmU6IG51bWJlciB8IG51bGwgPSBhZ2dyZWdhdGVTbmFwc2hvdC5kYXRhKCkuYXZlcmFnZVNjb3JlO1xuICogYGBgXG4gKi8gZnVuY3Rpb24gZ2V0QWdncmVnYXRlRnJvbVNlcnZlcihlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9jYXN0KGUuZmlyZXN0b3JlLCBGaXJlc3RvcmUpLCByID0gZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZChuKSwgaSA9IF9fUFJJVkFURV9tYXBUb0FycmF5KHQsICgoZSwgdCkgPT4gbmV3IF9fUFJJVkFURV9BZ2dyZWdhdGVJbXBsKHQsIGUuYWdncmVnYXRlVHlwZSwgZS5faW50ZXJuYWxGaWVsZFBhdGgpKSk7XG4gICAgLy8gUnVuIHRoZSBhZ2dyZWdhdGlvbiBhbmQgY29udmVydCB0aGUgcmVzdWx0c1xuICAgIHJldHVybiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50UnVuQWdncmVnYXRlUXVlcnkociwgZS5fcXVlcnksIGkpLnRoZW4oKHQgPT4gXG4gICAgLyoqXG4gKiBDb252ZXJ0cyB0aGUgY29yZSBhZ2dyZWdyYXRpb24gcmVzdWx0IHRvIGFuIGBBZ2dyZWdhdGVRdWVyeVNuYXBzaG90YFxuICogdGhhdCBjYW4gYmUgcmV0dXJuZWQgdG8gdGhlIGNvbnN1bWVyLlxuICogQHBhcmFtIHF1ZXJ5XG4gKiBAcGFyYW0gYWdncmVnYXRlUmVzdWx0IENvcmUgYWdncmVnYXRpb24gcmVzdWx0XG4gKiBAaW50ZXJuYWxcbiAqL1xuICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9jb252ZXJ0VG9BZ2dyZWdhdGVRdWVyeVNuYXBzaG90KGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IG5ldyBfX1BSSVZBVEVfRXhwVXNlckRhdGFXcml0ZXIoZSk7XG4gICAgICAgIHJldHVybiBuZXcgQWdncmVnYXRlUXVlcnlTbmFwc2hvdCh0LCByLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKG4sIGUsIHQpKSk7XG59XG5cbmNsYXNzIF9fUFJJVkFURV9NZW1vcnlMb2NhbENhY2hlSW1wbCB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLmtpbmQgPSBcIm1lbW9yeVwiLCB0aGlzLl9vbmxpbmVDb21wb25lbnRQcm92aWRlciA9IG5ldyBPbmxpbmVDb21wb25lbnRQcm92aWRlciwgXG4gICAgICAgIChudWxsID09IGUgPyB2b2lkIDAgOiBlLmdhcmJhZ2VDb2xsZWN0b3IpID8gdGhpcy5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyID0gZS5nYXJiYWdlQ29sbGVjdG9yLl9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIgOiB0aGlzLl9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIgPSBuZXcgTWVtb3J5T2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBraW5kOiB0aGlzLmtpbmRcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9QZXJzaXN0ZW50TG9jYWxDYWNoZUltcGwge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgbGV0IHQ7XG4gICAgICAgIHRoaXMua2luZCA9IFwicGVyc2lzdGVudFwiLCAobnVsbCA9PSBlID8gdm9pZCAwIDogZS50YWJNYW5hZ2VyKSA/IChlLnRhYk1hbmFnZXIuX2luaXRpYWxpemUoZSksIFxuICAgICAgICB0ID0gZS50YWJNYW5hZ2VyKSA6ICh0ID0gcGVyc2lzdGVudFNpbmdsZVRhYk1hbmFnZXIodm9pZCAwKSwgdC5faW5pdGlhbGl6ZShlKSksIFxuICAgICAgICB0aGlzLl9vbmxpbmVDb21wb25lbnRQcm92aWRlciA9IHQuX29ubGluZUNvbXBvbmVudFByb3ZpZGVyLCB0aGlzLl9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIgPSB0Ll9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXI7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtpbmQ6IHRoaXMua2luZFxuICAgICAgICB9O1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX01lbW9yeUVhZ2VyR2FiYWdlQ29sbGVjdG9ySW1wbCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMua2luZCA9IFwibWVtb3J5RWFnZXJcIiwgdGhpcy5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyID0gbmV3IE1lbW9yeU9mZmxpbmVDb21wb25lbnRQcm92aWRlcjtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAga2luZDogdGhpcy5raW5kXG4gICAgICAgIH07XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfTWVtb3J5THJ1R2FiYWdlQ29sbGVjdG9ySW1wbCB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLmtpbmQgPSBcIm1lbW9yeUxydVwiLCB0aGlzLl9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIgPSBuZXcgX19QUklWQVRFX0xydUdjTWVtb3J5T2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyKGUpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBraW5kOiB0aGlzLmtpbmRcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBgTWVtb3J5RWFnZXJHYXJiYWdlQ29sbGVjdG9yYC4gVGhpcyBpcyBhbHNvIHRoZVxuICogZGVmYXVsdCBnYXJiYWdlIGNvbGxlY3RvciB1bmxlc3MgaXQgaXMgZXhwbGljaXRseSBzcGVjaWZpZWQgb3RoZXJ3aXNlLlxuICovIGZ1bmN0aW9uIG1lbW9yeUVhZ2VyR2FyYmFnZUNvbGxlY3RvcigpIHtcbiAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9NZW1vcnlFYWdlckdhYmFnZUNvbGxlY3RvckltcGw7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBgTWVtb3J5THJ1R2FyYmFnZUNvbGxlY3RvcmAuXG4gKlxuICogQSB0YXJnZXQgc2l6ZSBjYW4gYmUgc3BlY2lmaWVkIGFzIHBhcnQgb2YgdGhlIHNldHRpbmcgcGFyYW1ldGVyLiBUaGVcbiAqIGNvbGxlY3RvciB3aWxsIHN0YXJ0IGRlbGV0aW5nIGRvY3VtZW50cyBvbmNlIHRoZSBjYWNoZSBzaXplIGV4Y2VlZHNcbiAqIHRoZSBnaXZlbiBzaXplLiBUaGUgZGVmYXVsdCBjYWNoZSBzaXplIGlzIDQwTUIgKDQwICogMTAyNCAqIDEwMjQgYnl0ZXMpLlxuICovIGZ1bmN0aW9uIG1lbW9yeUxydUdhcmJhZ2VDb2xsZWN0b3IoZSkge1xuICAgIHJldHVybiBuZXcgX19QUklWQVRFX01lbW9yeUxydUdhYmFnZUNvbGxlY3RvckltcGwobnVsbCA9PSBlID8gdm9pZCAwIDogZS5jYWNoZVNpemVCeXRlcyk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBgTWVtb3J5TG9jYWxDYWNoZWAuIFRoZSBpbnN0YW5jZSBjYW4gYmUgc2V0IHRvXG4gKiBgRmlyZXN0b3JlU2V0dGluZ3MuY2FjaGVgIHRvIHRlbGwgdGhlIFNESyB3aGljaCBjYWNoZSBsYXllciB0byB1c2UuXG4gKi8gZnVuY3Rpb24gbWVtb3J5TG9jYWxDYWNoZShlKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfTWVtb3J5TG9jYWxDYWNoZUltcGwoZSk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBgUGVyc2lzdGVudExvY2FsQ2FjaGVgLiBUaGUgaW5zdGFuY2UgY2FuIGJlIHNldCB0b1xuICogYEZpcmVzdG9yZVNldHRpbmdzLmNhY2hlYCB0byB0ZWxsIHRoZSBTREsgd2hpY2ggY2FjaGUgbGF5ZXIgdG8gdXNlLlxuICpcbiAqIFBlcnNpc3RlbnQgY2FjaGUgY2Fubm90IGJlIHVzZWQgaW4gYSBOb2RlLmpzIGVudmlyb25tZW50LlxuICovIGZ1bmN0aW9uIHBlcnNpc3RlbnRMb2NhbENhY2hlKGUpIHtcbiAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9QZXJzaXN0ZW50TG9jYWxDYWNoZUltcGwoZSk7XG59XG5cbmNsYXNzIF9fUFJJVkFURV9TaW5nbGVUYWJNYW5hZ2VySW1wbCB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLmZvcmNlT3duZXJzaGlwID0gZSwgdGhpcy5raW5kID0gXCJwZXJzaXN0ZW50U2luZ2xlVGFiXCI7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtpbmQ6IHRoaXMua2luZFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi8gICAgX2luaXRpYWxpemUoZSkge1xuICAgICAgICB0aGlzLl9vbmxpbmVDb21wb25lbnRQcm92aWRlciA9IG5ldyBPbmxpbmVDb21wb25lbnRQcm92aWRlciwgdGhpcy5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyID0gbmV3IF9fUFJJVkFURV9JbmRleGVkRGJPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIodGhpcy5fb25saW5lQ29tcG9uZW50UHJvdmlkZXIsIG51bGwgPT0gZSA/IHZvaWQgMCA6IGUuY2FjaGVTaXplQnl0ZXMsIHRoaXMuZm9yY2VPd25lcnNoaXApO1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX011bHRpVGFiTWFuYWdlckltcGwge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmtpbmQgPSBcIlBlcnNpc3RlbnRNdWx0aXBsZVRhYlwiO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBraW5kOiB0aGlzLmtpbmRcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovICAgIF9pbml0aWFsaXplKGUpIHtcbiAgICAgICAgdGhpcy5fb25saW5lQ29tcG9uZW50UHJvdmlkZXIgPSBuZXcgT25saW5lQ29tcG9uZW50UHJvdmlkZXIsIHRoaXMuX29mZmxpbmVDb21wb25lbnRQcm92aWRlciA9IG5ldyBfX1BSSVZBVEVfTXVsdGlUYWJPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIodGhpcy5fb25saW5lQ29tcG9uZW50UHJvdmlkZXIsIG51bGwgPT0gZSA/IHZvaWQgMCA6IGUuY2FjaGVTaXplQnl0ZXMpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIGBQZXJzaXN0ZW50U2luZ2xlVGFiTWFuYWdlcmAuXG4gKlxuICogQHBhcmFtIHNldHRpbmdzIENvbmZpZ3VyZXMgdGhlIGNyZWF0ZWQgdGFiIG1hbmFnZXIuXG4gKi8gZnVuY3Rpb24gcGVyc2lzdGVudFNpbmdsZVRhYk1hbmFnZXIoZSkge1xuICAgIHJldHVybiBuZXcgX19QUklWQVRFX1NpbmdsZVRhYk1hbmFnZXJJbXBsKG51bGwgPT0gZSA/IHZvaWQgMCA6IGUuZm9yY2VPd25lcnNoaXApO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgYFBlcnNpc3RlbnRNdWx0aXBsZVRhYk1hbmFnZXJgLlxuICovIGZ1bmN0aW9uIHBlcnNpc3RlbnRNdWx0aXBsZVRhYk1hbmFnZXIoKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfTXVsdGlUYWJNYW5hZ2VySW1wbDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgRGUgPSB7XG4gICAgbWF4QXR0ZW1wdHM6IDVcbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgd3JpdGUgYmF0Y2gsIHVzZWQgdG8gcGVyZm9ybSBtdWx0aXBsZSB3cml0ZXMgYXMgYSBzaW5nbGUgYXRvbWljIHVuaXQuXG4gKlxuICogQSBgV3JpdGVCYXRjaGAgb2JqZWN0IGNhbiBiZSBhY3F1aXJlZCBieSBjYWxsaW5nIHtAbGluayB3cml0ZUJhdGNofS4gSXRcbiAqIHByb3ZpZGVzIG1ldGhvZHMgZm9yIGFkZGluZyB3cml0ZXMgdG8gdGhlIHdyaXRlIGJhdGNoLiBOb25lIG9mIHRoZSB3cml0ZXNcbiAqIHdpbGwgYmUgY29tbWl0dGVkIChvciB2aXNpYmxlIGxvY2FsbHkpIHVudGlsIHtAbGluayBXcml0ZUJhdGNoLmNvbW1pdH0gaXNcbiAqIGNhbGxlZC5cbiAqL1xuY2xhc3MgV3JpdGVCYXRjaCB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IGUsIHRoaXMuX2NvbW1pdEhhbmRsZXIgPSB0LCB0aGlzLl9tdXRhdGlvbnMgPSBbXSwgdGhpcy5fY29tbWl0dGVkID0gITEsIFxuICAgICAgICB0aGlzLl9kYXRhUmVhZGVyID0gX19QUklWQVRFX25ld1VzZXJEYXRhUmVhZGVyKGUpO1xuICAgIH1cbiAgICBzZXQoZSwgdCwgbikge1xuICAgICAgICB0aGlzLl92ZXJpZnlOb3RDb21taXR0ZWQoKTtcbiAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV92YWxpZGF0ZVJlZmVyZW5jZShlLCB0aGlzLl9maXJlc3RvcmUpLCBpID0gX19QUklWQVRFX2FwcGx5RmlyZXN0b3JlRGF0YUNvbnZlcnRlcihyLmNvbnZlcnRlciwgdCwgbiksIHMgPSBfX1BSSVZBVEVfcGFyc2VTZXREYXRhKHRoaXMuX2RhdGFSZWFkZXIsIFwiV3JpdGVCYXRjaC5zZXRcIiwgci5fa2V5LCBpLCBudWxsICE9PSByLmNvbnZlcnRlciwgbik7XG4gICAgICAgIHJldHVybiB0aGlzLl9tdXRhdGlvbnMucHVzaChzLnRvTXV0YXRpb24oci5fa2V5LCBQcmVjb25kaXRpb24ubm9uZSgpKSksIHRoaXM7XG4gICAgfVxuICAgIHVwZGF0ZShlLCB0LCBuLCAuLi5yKSB7XG4gICAgICAgIHRoaXMuX3ZlcmlmeU5vdENvbW1pdHRlZCgpO1xuICAgICAgICBjb25zdCBpID0gX19QUklWQVRFX3ZhbGlkYXRlUmVmZXJlbmNlKGUsIHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIC8vIEZvciBDb21wYXQgdHlwZXMsIHdlIGhhdmUgdG8gXCJleHRyYWN0XCIgdGhlIHVuZGVybHlpbmcgdHlwZXMgYmVmb3JlXG4gICAgICAgIC8vIHBlcmZvcm1pbmcgdmFsaWRhdGlvbi5cbiAgICAgICAgICAgICAgICBsZXQgcztcbiAgICAgICAgcmV0dXJuIHMgPSBcInN0cmluZ1wiID09IHR5cGVvZiAodCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSkgfHwgdCBpbnN0YW5jZW9mIEZpZWxkUGF0aCA/IF9fUFJJVkFURV9wYXJzZVVwZGF0ZVZhcmFyZ3ModGhpcy5fZGF0YVJlYWRlciwgXCJXcml0ZUJhdGNoLnVwZGF0ZVwiLCBpLl9rZXksIHQsIG4sIHIpIDogX19QUklWQVRFX3BhcnNlVXBkYXRlRGF0YSh0aGlzLl9kYXRhUmVhZGVyLCBcIldyaXRlQmF0Y2gudXBkYXRlXCIsIGkuX2tleSwgdCksIFxuICAgICAgICB0aGlzLl9tdXRhdGlvbnMucHVzaChzLnRvTXV0YXRpb24oaS5fa2V5LCBQcmVjb25kaXRpb24uZXhpc3RzKCEwKSkpLCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGUgcHJvdmlkZWQge0BsaW5rIERvY3VtZW50UmVmZXJlbmNlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudFJlZiAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBiZSBkZWxldGVkLlxuICAgICAqIEByZXR1cm5zIFRoaXMgYFdyaXRlQmF0Y2hgIGluc3RhbmNlLiBVc2VkIGZvciBjaGFpbmluZyBtZXRob2QgY2FsbHMuXG4gICAgICovICAgIGRlbGV0ZShlKSB7XG4gICAgICAgIHRoaXMuX3ZlcmlmeU5vdENvbW1pdHRlZCgpO1xuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX3ZhbGlkYXRlUmVmZXJlbmNlKGUsIHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9tdXRhdGlvbnMgPSB0aGlzLl9tdXRhdGlvbnMuY29uY2F0KG5ldyBfX1BSSVZBVEVfRGVsZXRlTXV0YXRpb24odC5fa2V5LCBQcmVjb25kaXRpb24ubm9uZSgpKSksIFxuICAgICAgICB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21taXRzIGFsbCBvZiB0aGUgd3JpdGVzIGluIHRoaXMgd3JpdGUgYmF0Y2ggYXMgYSBzaW5nbGUgYXRvbWljIHVuaXQuXG4gICAgICpcbiAgICAgKiBUaGUgcmVzdWx0IG9mIHRoZXNlIHdyaXRlcyB3aWxsIG9ubHkgYmUgcmVmbGVjdGVkIGluIGRvY3VtZW50IHJlYWRzIHRoYXRcbiAgICAgKiBvY2N1ciBhZnRlciB0aGUgcmV0dXJuZWQgcHJvbWlzZSByZXNvbHZlcy4gSWYgdGhlIGNsaWVudCBpcyBvZmZsaW5lLCB0aGVcbiAgICAgKiB3cml0ZSBmYWlscy4gSWYgeW91IHdvdWxkIGxpa2UgdG8gc2VlIGxvY2FsIG1vZGlmaWNhdGlvbnMgb3IgYnVmZmVyIHdyaXRlc1xuICAgICAqIHVudGlsIHRoZSBjbGllbnQgaXMgb25saW5lLCB1c2UgdGhlIGZ1bGwgRmlyZXN0b3JlIFNESy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgYFByb21pc2VgIHJlc29sdmVkIG9uY2UgYWxsIG9mIHRoZSB3cml0ZXMgaW4gdGhlIGJhdGNoIGhhdmUgYmVlblxuICAgICAqIHN1Y2Nlc3NmdWxseSB3cml0dGVuIHRvIHRoZSBiYWNrZW5kIGFzIGFuIGF0b21pYyB1bml0IChub3RlIHRoYXQgaXQgd29uJ3RcbiAgICAgKiByZXNvbHZlIHdoaWxlIHlvdSdyZSBvZmZsaW5lKS5cbiAgICAgKi8gICAgY29tbWl0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdmVyaWZ5Tm90Q29tbWl0dGVkKCksIHRoaXMuX2NvbW1pdHRlZCA9ICEwLCB0aGlzLl9tdXRhdGlvbnMubGVuZ3RoID4gMCA/IHRoaXMuX2NvbW1pdEhhbmRsZXIodGhpcy5fbXV0YXRpb25zKSA6IFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBfdmVyaWZ5Tm90Q29tbWl0dGVkKCkge1xuICAgICAgICBpZiAodGhpcy5fY29tbWl0dGVkKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQy5GQUlMRURfUFJFQ09ORElUSU9OLCBcIkEgd3JpdGUgYmF0Y2ggY2FuIG5vIGxvbmdlciBiZSB1c2VkIGFmdGVyIGNvbW1pdCgpIGhhcyBiZWVuIGNhbGxlZC5cIik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVSZWZlcmVuY2UoZSwgdCkge1xuICAgIGlmICgoZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSkuZmlyZXN0b3JlICE9PSB0KSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQy5JTlZBTElEX0FSR1VNRU5ULCBcIlByb3ZpZGVkIGRvY3VtZW50IHJlZmVyZW5jZSBpcyBmcm9tIGEgZGlmZmVyZW50IEZpcmVzdG9yZSBpbnN0YW5jZS5cIik7XG4gICAgcmV0dXJuIGU7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBUT0RPKG1yc2NobWlkdCkgQ29uc2lkZXIgdXNpbmcgYEJhc2VUcmFuc2FjdGlvbmAgYXMgdGhlIGJhc2UgY2xhc3MgaW4gdGhlXG4vLyBsZWdhY3kgU0RLLlxuLyoqXG4gKiBBIHJlZmVyZW5jZSB0byBhIHRyYW5zYWN0aW9uLlxuICpcbiAqIFRoZSBgVHJhbnNhY3Rpb25gIG9iamVjdCBwYXNzZWQgdG8gYSB0cmFuc2FjdGlvbidzIGB1cGRhdGVGdW5jdGlvbmAgcHJvdmlkZXNcbiAqIHRoZSBtZXRob2RzIHRvIHJlYWQgYW5kIHdyaXRlIGRhdGEgd2l0aGluIHRoZSB0cmFuc2FjdGlvbiBjb250ZXh0LiBTZWVcbiAqIHtAbGluayBydW5UcmFuc2FjdGlvbn0uXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgcmVmZXJlbmNlIHRvIGEgdHJhbnNhY3Rpb24uXG4gKlxuICogVGhlIGBUcmFuc2FjdGlvbmAgb2JqZWN0IHBhc3NlZCB0byBhIHRyYW5zYWN0aW9uJ3MgYHVwZGF0ZUZ1bmN0aW9uYCBwcm92aWRlc1xuICogdGhlIG1ldGhvZHMgdG8gcmVhZCBhbmQgd3JpdGUgZGF0YSB3aXRoaW4gdGhlIHRyYW5zYWN0aW9uIGNvbnRleHQuIFNlZVxuICoge0BsaW5rIHJ1blRyYW5zYWN0aW9ufS5cbiAqL1xuY2xhc3MgVHJhbnNhY3Rpb24gZXh0ZW5kcyBjbGFzcyBUcmFuc2FjdGlvbiQxIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gZSwgdGhpcy5fdHJhbnNhY3Rpb24gPSB0LCB0aGlzLl9kYXRhUmVhZGVyID0gX19QUklWQVRFX25ld1VzZXJEYXRhUmVhZGVyKGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWFkcyB0aGUgZG9jdW1lbnQgcmVmZXJlbmNlZCBieSB0aGUgcHJvdmlkZWQge0BsaW5rIERvY3VtZW50UmVmZXJlbmNlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudFJlZiAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBiZSByZWFkLlxuICAgICAqIEByZXR1cm5zIEEgYERvY3VtZW50U25hcHNob3RgIHdpdGggdGhlIHJlYWQgZGF0YS5cbiAgICAgKi8gICAgZ2V0KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV92YWxpZGF0ZVJlZmVyZW5jZShlLCB0aGlzLl9maXJlc3RvcmUpLCBuID0gbmV3IF9fUFJJVkFURV9MaXRlVXNlckRhdGFXcml0ZXIodGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zYWN0aW9uLmxvb2t1cChbIHQuX2tleSBdKS50aGVuKChlID0+IHtcbiAgICAgICAgICAgIGlmICghZSB8fCAxICE9PSBlLmxlbmd0aCkgcmV0dXJuIGZhaWwoKTtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBlWzBdO1xuICAgICAgICAgICAgaWYgKHIuaXNGb3VuZERvY3VtZW50KCkpIHJldHVybiBuZXcgRG9jdW1lbnRTbmFwc2hvdCQxKHRoaXMuX2ZpcmVzdG9yZSwgbiwgci5rZXksIHIsIHQuY29udmVydGVyKTtcbiAgICAgICAgICAgIGlmIChyLmlzTm9Eb2N1bWVudCgpKSByZXR1cm4gbmV3IERvY3VtZW50U25hcHNob3QkMSh0aGlzLl9maXJlc3RvcmUsIG4sIHQuX2tleSwgbnVsbCwgdC5jb252ZXJ0ZXIpO1xuICAgICAgICAgICAgdGhyb3cgZmFpbCgpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHNldChlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfdmFsaWRhdGVSZWZlcmVuY2UoZSwgdGhpcy5fZmlyZXN0b3JlKSwgaSA9IF9fUFJJVkFURV9hcHBseUZpcmVzdG9yZURhdGFDb252ZXJ0ZXIoci5jb252ZXJ0ZXIsIHQsIG4pLCBzID0gX19QUklWQVRFX3BhcnNlU2V0RGF0YSh0aGlzLl9kYXRhUmVhZGVyLCBcIlRyYW5zYWN0aW9uLnNldFwiLCByLl9rZXksIGksIG51bGwgIT09IHIuY29udmVydGVyLCBuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zYWN0aW9uLnNldChyLl9rZXksIHMpLCB0aGlzO1xuICAgIH1cbiAgICB1cGRhdGUoZSwgdCwgbiwgLi4ucikge1xuICAgICAgICBjb25zdCBpID0gX19QUklWQVRFX3ZhbGlkYXRlUmVmZXJlbmNlKGUsIHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIC8vIEZvciBDb21wYXQgdHlwZXMsIHdlIGhhdmUgdG8gXCJleHRyYWN0XCIgdGhlIHVuZGVybHlpbmcgdHlwZXMgYmVmb3JlXG4gICAgICAgIC8vIHBlcmZvcm1pbmcgdmFsaWRhdGlvbi5cbiAgICAgICAgICAgICAgICBsZXQgcztcbiAgICAgICAgcmV0dXJuIHMgPSBcInN0cmluZ1wiID09IHR5cGVvZiAodCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSkgfHwgdCBpbnN0YW5jZW9mIEZpZWxkUGF0aCA/IF9fUFJJVkFURV9wYXJzZVVwZGF0ZVZhcmFyZ3ModGhpcy5fZGF0YVJlYWRlciwgXCJUcmFuc2FjdGlvbi51cGRhdGVcIiwgaS5fa2V5LCB0LCBuLCByKSA6IF9fUFJJVkFURV9wYXJzZVVwZGF0ZURhdGEodGhpcy5fZGF0YVJlYWRlciwgXCJUcmFuc2FjdGlvbi51cGRhdGVcIiwgaS5fa2V5LCB0KSwgXG4gICAgICAgIHRoaXMuX3RyYW5zYWN0aW9uLnVwZGF0ZShpLl9rZXksIHMpLCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGUgcHJvdmlkZWQge0BsaW5rIERvY3VtZW50UmVmZXJlbmNlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudFJlZiAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBiZSBkZWxldGVkLlxuICAgICAqIEByZXR1cm5zIFRoaXMgYFRyYW5zYWN0aW9uYCBpbnN0YW5jZS4gVXNlZCBmb3IgY2hhaW5pbmcgbWV0aG9kIGNhbGxzLlxuICAgICAqLyAgICBkZWxldGUoZSkge1xuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX3ZhbGlkYXRlUmVmZXJlbmNlKGUsIHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc2FjdGlvbi5kZWxldGUodC5fa2V5KSwgdGhpcztcbiAgICB9XG59IHtcbiAgICAvLyBUaGlzIGNsYXNzIGltcGxlbWVudHMgdGhlIHNhbWUgbG9naWMgYXMgdGhlIFRyYW5zYWN0aW9uIEFQSSBpbiB0aGUgTGl0ZSBTREtcbiAgICAvLyBidXQgaXMgc3ViY2xhc3NlZCBpbiBvcmRlciB0byByZXR1cm4gaXRzIG93biBEb2N1bWVudFNuYXBzaG90IHR5cGVzLlxuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBzdXBlcihlLCB0KSwgdGhpcy5fZmlyZXN0b3JlID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgdGhlIGRvY3VtZW50IHJlZmVyZW5jZWQgYnkgdGhlIHByb3ZpZGVkIHtAbGluayBEb2N1bWVudFJlZmVyZW5jZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRSZWYgLSBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gYmUgcmVhZC5cbiAgICAgKiBAcmV0dXJucyBBIGBEb2N1bWVudFNuYXBzaG90YCB3aXRoIHRoZSByZWFkIGRhdGEuXG4gICAgICovICAgIGdldChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfdmFsaWRhdGVSZWZlcmVuY2UoZSwgdGhpcy5fZmlyZXN0b3JlKSwgbiA9IG5ldyBfX1BSSVZBVEVfRXhwVXNlckRhdGFXcml0ZXIodGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmdldChlKS50aGVuKChlID0+IG5ldyBEb2N1bWVudFNuYXBzaG90KHRoaXMuX2ZpcmVzdG9yZSwgbiwgdC5fa2V5LCBlLl9kb2N1bWVudCwgbmV3IFNuYXBzaG90TWV0YWRhdGEoXG4gICAgICAgIC8qIGhhc1BlbmRpbmdXcml0ZXM9ICovICExLCBcbiAgICAgICAgLyogZnJvbUNhY2hlPSAqLyAhMSksIHQuY29udmVydGVyKSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBFeGVjdXRlcyB0aGUgZ2l2ZW4gYHVwZGF0ZUZ1bmN0aW9uYCBhbmQgdGhlbiBhdHRlbXB0cyB0byBjb21taXQgdGhlIGNoYW5nZXNcbiAqIGFwcGxpZWQgd2l0aGluIHRoZSB0cmFuc2FjdGlvbi4gSWYgYW55IGRvY3VtZW50IHJlYWQgd2l0aGluIHRoZSB0cmFuc2FjdGlvblxuICogaGFzIGNoYW5nZWQsIENsb3VkIEZpcmVzdG9yZSByZXRyaWVzIHRoZSBgdXBkYXRlRnVuY3Rpb25gLiBJZiBpdCBmYWlscyB0b1xuICogY29tbWl0IGFmdGVyIDUgYXR0ZW1wdHMsIHRoZSB0cmFuc2FjdGlvbiBmYWlscy5cbiAqXG4gKiBUaGUgbWF4aW11bSBudW1iZXIgb2Ygd3JpdGVzIGFsbG93ZWQgaW4gYSBzaW5nbGUgdHJhbnNhY3Rpb24gaXMgNTAwLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBBIHJlZmVyZW5jZSB0byB0aGUgRmlyZXN0b3JlIGRhdGFiYXNlIHRvIHJ1biB0aGlzXG4gKiB0cmFuc2FjdGlvbiBhZ2FpbnN0LlxuICogQHBhcmFtIHVwZGF0ZUZ1bmN0aW9uIC0gVGhlIGZ1bmN0aW9uIHRvIGV4ZWN1dGUgd2l0aGluIHRoZSB0cmFuc2FjdGlvblxuICogY29udGV4dC5cbiAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb3B0aW9ucyBvYmplY3QgdG8gY29uZmlndXJlIG1heGltdW0gbnVtYmVyIG9mIGF0dGVtcHRzIHRvXG4gKiBjb21taXQuXG4gKiBAcmV0dXJucyBJZiB0aGUgdHJhbnNhY3Rpb24gY29tcGxldGVkIHN1Y2Nlc3NmdWxseSBvciB3YXMgZXhwbGljaXRseSBhYm9ydGVkXG4gKiAodGhlIGB1cGRhdGVGdW5jdGlvbmAgcmV0dXJuZWQgYSBmYWlsZWQgcHJvbWlzZSksIHRoZSBwcm9taXNlIHJldHVybmVkIGJ5IHRoZVxuICogYHVwZGF0ZUZ1bmN0aW9uIGBpcyByZXR1cm5lZCBoZXJlLiBPdGhlcndpc2UsIGlmIHRoZSB0cmFuc2FjdGlvbiBmYWlsZWQsIGFcbiAqIHJlamVjdGVkIHByb21pc2Ugd2l0aCB0aGUgY29ycmVzcG9uZGluZyBmYWlsdXJlIGVycm9yIGlzIHJldHVybmVkLlxuICovIGZ1bmN0aW9uIHJ1blRyYW5zYWN0aW9uKGUsIHQsIG4pIHtcbiAgICBlID0gX19QUklWQVRFX2Nhc3QoZSwgRmlyZXN0b3JlKTtcbiAgICBjb25zdCByID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBEZSksIG4pO1xuICAgICFmdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVUcmFuc2FjdGlvbk9wdGlvbnMoZSkge1xuICAgICAgICBpZiAoZS5tYXhBdHRlbXB0cyA8IDEpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDLklOVkFMSURfQVJHVU1FTlQsIFwiTWF4IGF0dGVtcHRzIG11c3QgYmUgYXQgbGVhc3QgMVwiKTtcbiAgICB9KHIpO1xuICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50VHJhbnNhY3Rpb24oZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZDtcbiAgICAgICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gYXdhaXQgX19QUklWQVRFX2dldERhdGFzdG9yZShlKTtcbiAgICAgICAgICAgIG5ldyBfX1BSSVZBVEVfVHJhbnNhY3Rpb25SdW5uZXIoZS5hc3luY1F1ZXVlLCBpLCBuLCB0LCByKS5YYSgpO1xuICAgICAgICB9KSksIHIucHJvbWlzZTtcbiAgICB9KGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQoZSksIChuID0+IHQobmV3IFRyYW5zYWN0aW9uKGUsIG4pKSksIHIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIGEgc2VudGluZWwgZm9yIHVzZSB3aXRoIHtAbGluayBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHVwZGF0ZURvYzoxKX0gb3JcbiAqIHtAbGluayBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHNldERvYzoxKX0gd2l0aCBge21lcmdlOiB0cnVlfWAgdG8gbWFyayBhIGZpZWxkIGZvciBkZWxldGlvbi5cbiAqLyBmdW5jdGlvbiBkZWxldGVGaWVsZCgpIHtcbiAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9EZWxldGVGaWVsZFZhbHVlSW1wbChcImRlbGV0ZUZpZWxkXCIpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzZW50aW5lbCB1c2VkIHdpdGgge0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSMoc2V0RG9jOjEpfSBvciB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyh1cGRhdGVEb2M6MSl9IHRvXG4gKiBpbmNsdWRlIGEgc2VydmVyLWdlbmVyYXRlZCB0aW1lc3RhbXAgaW4gdGhlIHdyaXR0ZW4gZGF0YS5cbiAqLyBmdW5jdGlvbiBzZXJ2ZXJUaW1lc3RhbXAoKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfU2VydmVyVGltZXN0YW1wRmllbGRWYWx1ZUltcGwoXCJzZXJ2ZXJUaW1lc3RhbXBcIik7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHNwZWNpYWwgdmFsdWUgdGhhdCBjYW4gYmUgdXNlZCB3aXRoIHtAbGluayBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHNldERvYzoxKX0gb3Ige0BsaW5rXG4gKiBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHVwZGF0ZURvYzoxKX0gdGhhdCB0ZWxscyB0aGUgc2VydmVyIHRvIHVuaW9uIHRoZSBnaXZlbiBlbGVtZW50cyB3aXRoIGFueSBhcnJheVxuICogdmFsdWUgdGhhdCBhbHJlYWR5IGV4aXN0cyBvbiB0aGUgc2VydmVyLiBFYWNoIHNwZWNpZmllZCBlbGVtZW50IHRoYXQgZG9lc24ndFxuICogYWxyZWFkeSBleGlzdCBpbiB0aGUgYXJyYXkgd2lsbCBiZSBhZGRlZCB0byB0aGUgZW5kLiBJZiB0aGUgZmllbGQgYmVpbmdcbiAqIG1vZGlmaWVkIGlzIG5vdCBhbHJlYWR5IGFuIGFycmF5IGl0IHdpbGwgYmUgb3ZlcndyaXR0ZW4gd2l0aCBhbiBhcnJheVxuICogY29udGFpbmluZyBleGFjdGx5IHRoZSBzcGVjaWZpZWQgZWxlbWVudHMuXG4gKlxuICogQHBhcmFtIGVsZW1lbnRzIC0gVGhlIGVsZW1lbnRzIHRvIHVuaW9uIGludG8gdGhlIGFycmF5LlxuICogQHJldHVybnMgVGhlIGBGaWVsZFZhbHVlYCBzZW50aW5lbCBmb3IgdXNlIGluIGEgY2FsbCB0byBgc2V0RG9jKClgIG9yXG4gKiBgdXBkYXRlRG9jKClgLlxuICovIGZ1bmN0aW9uIGFycmF5VW5pb24oLi4uZSkge1xuICAgIC8vIE5PVEU6IFdlIGRvbid0IGFjdHVhbGx5IHBhcnNlIHRoZSBkYXRhIHVudGlsIGl0J3MgdXNlZCBpbiBzZXQoKSBvclxuICAgIC8vIHVwZGF0ZSgpIHNpbmNlIHdlJ2QgbmVlZCB0aGUgRmlyZXN0b3JlIGluc3RhbmNlIHRvIGRvIHRoaXMuXG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfQXJyYXlVbmlvbkZpZWxkVmFsdWVJbXBsKFwiYXJyYXlVbmlvblwiLCBlKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc3BlY2lhbCB2YWx1ZSB0aGF0IGNhbiBiZSB1c2VkIHdpdGgge0BsaW5rIChzZXREb2M6MSl9IG9yIHtAbGlua1xuICogdXBkYXRlRG9jOjF9IHRoYXQgdGVsbHMgdGhlIHNlcnZlciB0byByZW1vdmUgdGhlIGdpdmVuIGVsZW1lbnRzIGZyb20gYW55XG4gKiBhcnJheSB2YWx1ZSB0aGF0IGFscmVhZHkgZXhpc3RzIG9uIHRoZSBzZXJ2ZXIuIEFsbCBpbnN0YW5jZXMgb2YgZWFjaCBlbGVtZW50XG4gKiBzcGVjaWZpZWQgd2lsbCBiZSByZW1vdmVkIGZyb20gdGhlIGFycmF5LiBJZiB0aGUgZmllbGQgYmVpbmcgbW9kaWZpZWQgaXMgbm90XG4gKiBhbHJlYWR5IGFuIGFycmF5IGl0IHdpbGwgYmUgb3ZlcndyaXR0ZW4gd2l0aCBhbiBlbXB0eSBhcnJheS5cbiAqXG4gKiBAcGFyYW0gZWxlbWVudHMgLSBUaGUgZWxlbWVudHMgdG8gcmVtb3ZlIGZyb20gdGhlIGFycmF5LlxuICogQHJldHVybnMgVGhlIGBGaWVsZFZhbHVlYCBzZW50aW5lbCBmb3IgdXNlIGluIGEgY2FsbCB0byBgc2V0RG9jKClgIG9yXG4gKiBgdXBkYXRlRG9jKClgXG4gKi8gZnVuY3Rpb24gYXJyYXlSZW1vdmUoLi4uZSkge1xuICAgIC8vIE5PVEU6IFdlIGRvbid0IGFjdHVhbGx5IHBhcnNlIHRoZSBkYXRhIHVudGlsIGl0J3MgdXNlZCBpbiBzZXQoKSBvclxuICAgIC8vIHVwZGF0ZSgpIHNpbmNlIHdlJ2QgbmVlZCB0aGUgRmlyZXN0b3JlIGluc3RhbmNlIHRvIGRvIHRoaXMuXG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfQXJyYXlSZW1vdmVGaWVsZFZhbHVlSW1wbChcImFycmF5UmVtb3ZlXCIsIGUpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzcGVjaWFsIHZhbHVlIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyhzZXREb2M6MSl9IG9yIHtAbGlua1xuICogQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyh1cGRhdGVEb2M6MSl9IHRoYXQgdGVsbHMgdGhlIHNlcnZlciB0byBpbmNyZW1lbnQgdGhlIGZpZWxkJ3MgY3VycmVudCB2YWx1ZSBieVxuICogdGhlIGdpdmVuIHZhbHVlLlxuICpcbiAqIElmIGVpdGhlciB0aGUgb3BlcmFuZCBvciB0aGUgY3VycmVudCBmaWVsZCB2YWx1ZSB1c2VzIGZsb2F0aW5nIHBvaW50XG4gKiBwcmVjaXNpb24sIGFsbCBhcml0aG1ldGljIGZvbGxvd3MgSUVFRSA3NTQgc2VtYW50aWNzLiBJZiBib3RoIHZhbHVlcyBhcmVcbiAqIGludGVnZXJzLCB2YWx1ZXMgb3V0c2lkZSBvZiBKYXZhU2NyaXB0J3Mgc2FmZSBudW1iZXIgcmFuZ2VcbiAqIChgTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVJgIHRvIGBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUmApIGFyZSBhbHNvIHN1YmplY3QgdG9cbiAqIHByZWNpc2lvbiBsb3NzLiBGdXJ0aGVybW9yZSwgb25jZSBwcm9jZXNzZWQgYnkgdGhlIEZpcmVzdG9yZSBiYWNrZW5kLCBhbGxcbiAqIGludGVnZXIgb3BlcmF0aW9ucyBhcmUgY2FwcGVkIGJldHdlZW4gLTJeNjMgYW5kIDJeNjMtMS5cbiAqXG4gKiBJZiB0aGUgY3VycmVudCBmaWVsZCB2YWx1ZSBpcyBub3Qgb2YgdHlwZSBgbnVtYmVyYCwgb3IgaWYgdGhlIGZpZWxkIGRvZXMgbm90XG4gKiB5ZXQgZXhpc3QsIHRoZSB0cmFuc2Zvcm1hdGlvbiBzZXRzIHRoZSBmaWVsZCB0byB0aGUgZ2l2ZW4gdmFsdWUuXG4gKlxuICogQHBhcmFtIG4gLSBUaGUgdmFsdWUgdG8gaW5jcmVtZW50IGJ5LlxuICogQHJldHVybnMgVGhlIGBGaWVsZFZhbHVlYCBzZW50aW5lbCBmb3IgdXNlIGluIGEgY2FsbCB0byBgc2V0RG9jKClgIG9yXG4gKiBgdXBkYXRlRG9jKClgXG4gKi8gZnVuY3Rpb24gaW5jcmVtZW50KGUpIHtcbiAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9OdW1lcmljSW5jcmVtZW50RmllbGRWYWx1ZUltcGwoXCJpbmNyZW1lbnRcIiwgZSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIENyZWF0ZXMgYSB3cml0ZSBiYXRjaCwgdXNlZCBmb3IgcGVyZm9ybWluZyBtdWx0aXBsZSB3cml0ZXMgYXMgYSBzaW5nbGVcbiAqIGF0b21pYyBvcGVyYXRpb24uIFRoZSBtYXhpbXVtIG51bWJlciBvZiB3cml0ZXMgYWxsb3dlZCBpbiBhIHNpbmdsZSB7QGxpbmsgV3JpdGVCYXRjaH1cbiAqIGlzIDUwMC5cbiAqXG4gKiBVbmxpa2UgdHJhbnNhY3Rpb25zLCB3cml0ZSBiYXRjaGVzIGFyZSBwZXJzaXN0ZWQgb2ZmbGluZSBhbmQgdGhlcmVmb3JlIGFyZVxuICogcHJlZmVyYWJsZSB3aGVuIHlvdSBkb24ndCBuZWVkIHRvIGNvbmRpdGlvbiB5b3VyIHdyaXRlcyBvbiByZWFkIGRhdGEuXG4gKlxuICogQHJldHVybnMgQSB7QGxpbmsgV3JpdGVCYXRjaH0gdGhhdCBjYW4gYmUgdXNlZCB0byBhdG9taWNhbGx5IGV4ZWN1dGUgbXVsdGlwbGVcbiAqIHdyaXRlcy5cbiAqLyBmdW5jdGlvbiB3cml0ZUJhdGNoKGUpIHtcbiAgICByZXR1cm4gZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZChlID0gX19QUklWQVRFX2Nhc3QoZSwgRmlyZXN0b3JlKSksIG5ldyBXcml0ZUJhdGNoKGUsICh0ID0+IGV4ZWN1dGVXcml0ZShlLCB0KSkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBmdW5jdGlvbiBzZXRJbmRleENvbmZpZ3VyYXRpb24oZSwgdCkge1xuICAgIHZhciBuO1xuICAgIGNvbnN0IHIgPSBlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKGUgPSBfX1BSSVZBVEVfY2FzdChlLCBGaXJlc3RvcmUpKTtcbiAgICBpZiAoIXIuX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIgfHwgXCJtZW1vcnlcIiA9PT0gKG51bGwgPT09IChuID0gci5fdW5pbml0aWFsaXplZENvbXBvbmVudHNQcm92aWRlcikgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5fb2ZmbGluZUtpbmQpKSBcbiAgICAvLyBQT1JUSU5HIE5PVEU6IFdlIGRvbid0IHJldHVybiBhbiBlcnJvciBpZiB0aGUgdXNlciBoYXMgbm90IGVuYWJsZWRcbiAgICAvLyBwZXJzaXN0ZW5jZSBzaW5jZSBgZW5hYmxlSW5kZXhlZGRiUGVyc2lzdGVuY2UoKWAgY2FuIGZhaWwgb24gdGhlIFdlYi5cbiAgICByZXR1cm4gX19QUklWQVRFX2xvZ1dhcm4oXCJDYW5ub3QgZW5hYmxlIGluZGV4ZXMgd2hlbiBwZXJzaXN0ZW5jZSBpcyBkaXNhYmxlZFwiKSwgXG4gICAgUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgY29uc3QgaSA9IGZ1bmN0aW9uIF9fUFJJVkFURV9wYXJzZUluZGV4ZXMoZSkge1xuICAgICAgICBjb25zdCB0ID0gXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSA/IGZ1bmN0aW9uIF9fUFJJVkFURV90cnlQYXJzZUpzb24oZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShlKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQy5JTlZBTElEX0FSR1VNRU5ULCBcIkZhaWxlZCB0byBwYXJzZSBKU09OOiBcIiArIChudWxsID09IGUgPyB2b2lkIDAgOiBlLm1lc3NhZ2UpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfShlKSA6IGUsIG4gPSBbXTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodC5pbmRleGVzKSkgZm9yIChjb25zdCBlIG9mIHQuaW5kZXhlcykge1xuICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV90cnlHZXRTdHJpbmcoZSwgXCJjb2xsZWN0aW9uR3JvdXBcIiksIHIgPSBbXTtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGUuZmllbGRzKSkgZm9yIChjb25zdCB0IG9mIGUuZmllbGRzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IF9fUFJJVkFURV9maWVsZFBhdGhGcm9tRG90U2VwYXJhdGVkU3RyaW5nKFwic2V0SW5kZXhDb25maWd1cmF0aW9uXCIsIF9fUFJJVkFURV90cnlHZXRTdHJpbmcodCwgXCJmaWVsZFBhdGhcIikpO1xuICAgICAgICAgICAgICAgIFwiQ09OVEFJTlNcIiA9PT0gdC5hcnJheUNvbmZpZyA/IHIucHVzaChuZXcgSW5kZXhTZWdtZW50KGUsIDIgLyogSW5kZXhLaW5kLkNPTlRBSU5TICovKSkgOiBcIkFTQ0VORElOR1wiID09PSB0Lm9yZGVyID8gci5wdXNoKG5ldyBJbmRleFNlZ21lbnQoZSwgMCAvKiBJbmRleEtpbmQuQVNDRU5ESU5HICovKSkgOiBcIkRFU0NFTkRJTkdcIiA9PT0gdC5vcmRlciAmJiByLnB1c2gobmV3IEluZGV4U2VnbWVudChlLCAxIC8qIEluZGV4S2luZC5ERVNDRU5ESU5HICovKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuLnB1c2gobmV3IEZpZWxkSW5kZXgoRmllbGRJbmRleC5VTktOT1dOX0lELCB0LCByLCBJbmRleFN0YXRlLmVtcHR5KCkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbjtcbiAgICB9KHQpO1xuICAgIHJldHVybiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50U2V0SW5kZXhDb25maWd1cmF0aW9uKHIsIGkpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdHJ5R2V0U3RyaW5nKGUsIHQpIHtcbiAgICBpZiAoXCJzdHJpbmdcIiAhPSB0eXBlb2YgZVt0XSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEMuSU5WQUxJRF9BUkdVTUVOVCwgXCJNaXNzaW5nIHN0cmluZyB2YWx1ZSBmb3I6IFwiICsgdCk7XG4gICAgcmV0dXJuIGVbdF07XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgYFBlcnNpc3RlbnRDYWNoZUluZGV4TWFuYWdlcmAgZm9yIGNvbmZpZ3VyaW5nIHBlcnNpc3RlbnQgY2FjaGUgaW5kZXhlcyB1c2VkXG4gKiBmb3IgbG9jYWwgcXVlcnkgZXhlY3V0aW9uLlxuICpcbiAqIFRvIHVzZSwgY2FsbCBgZ2V0UGVyc2lzdGVudENhY2hlSW5kZXhNYW5hZ2VyKClgIHRvIGdldCBhbiBpbnN0YW5jZS5cbiAqLyBjbGFzcyBQZXJzaXN0ZW50Q2FjaGVJbmRleE1hbmFnZXIge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLl9jbGllbnQgPSBlLCBcbiAgICAgICAgLyoqIEEgdHlwZSBzdHJpbmcgdG8gdW5pcXVlbHkgaWRlbnRpZnkgaW5zdGFuY2VzIG9mIHRoaXMgY2xhc3MuICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwiUGVyc2lzdGVudENhY2hlSW5kZXhNYW5hZ2VyXCI7XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIFBlcnNpc3RlbnRDYWNoZSBJbmRleCBNYW5hZ2VyIHVzZWQgYnkgdGhlIGdpdmVuIGBGaXJlc3RvcmVgXG4gKiBvYmplY3QuXG4gKlxuICogQHJldHVybiBUaGUgYFBlcnNpc3RlbnRDYWNoZUluZGV4TWFuYWdlcmAgaW5zdGFuY2UsIG9yIGBudWxsYCBpZiBsb2NhbFxuICogcGVyc2lzdGVudCBzdG9yYWdlIGlzIG5vdCBpbiB1c2UuXG4gKi8gZnVuY3Rpb24gZ2V0UGVyc2lzdGVudENhY2hlSW5kZXhNYW5hZ2VyKGUpIHtcbiAgICB2YXIgdDtcbiAgICBlID0gX19QUklWQVRFX2Nhc3QoZSwgRmlyZXN0b3JlKTtcbiAgICBjb25zdCBuID0gQ2UuZ2V0KGUpO1xuICAgIGlmIChuKSByZXR1cm4gbjtcbiAgICBjb25zdCByID0gZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZChlKTtcbiAgICBpZiAoXCJwZXJzaXN0ZW50XCIgIT09IChudWxsID09PSAodCA9IHIuX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQuX29mZmxpbmVLaW5kKSkgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgaSA9IG5ldyBQZXJzaXN0ZW50Q2FjaGVJbmRleE1hbmFnZXIocik7XG4gICAgcmV0dXJuIENlLnNldChlLCBpKSwgaTtcbn1cblxuLyoqXG4gKiBFbmFibGVzIHRoZSBTREsgdG8gY3JlYXRlIHBlcnNpc3RlbnQgY2FjaGUgaW5kZXhlcyBhdXRvbWF0aWNhbGx5IGZvciBsb2NhbFxuICogcXVlcnkgZXhlY3V0aW9uIHdoZW4gdGhlIFNESyBiZWxpZXZlcyBjYWNoZSBpbmRleGVzIGNhbiBoZWxwIGltcHJvdmVcbiAqIHBlcmZvcm1hbmNlLlxuICpcbiAqIFRoaXMgZmVhdHVyZSBpcyBkaXNhYmxlZCBieSBkZWZhdWx0LlxuICovIGZ1bmN0aW9uIGVuYWJsZVBlcnNpc3RlbnRDYWNoZUluZGV4QXV0b0NyZWF0aW9uKGUpIHtcbiAgICBfX1BSSVZBVEVfc2V0UGVyc2lzdGVudENhY2hlSW5kZXhBdXRvQ3JlYXRpb25FbmFibGVkKGUsICEwKTtcbn1cblxuLyoqXG4gKiBTdG9wcyBjcmVhdGluZyBwZXJzaXN0ZW50IGNhY2hlIGluZGV4ZXMgYXV0b21hdGljYWxseSBmb3IgbG9jYWwgcXVlcnlcbiAqIGV4ZWN1dGlvbi4gVGhlIGluZGV4ZXMgd2hpY2ggaGF2ZSBiZWVuIGNyZWF0ZWQgYnkgY2FsbGluZ1xuICogYGVuYWJsZVBlcnNpc3RlbnRDYWNoZUluZGV4QXV0b0NyZWF0aW9uKClgIHN0aWxsIHRha2UgZWZmZWN0LlxuICovIGZ1bmN0aW9uIGRpc2FibGVQZXJzaXN0ZW50Q2FjaGVJbmRleEF1dG9DcmVhdGlvbihlKSB7XG4gICAgX19QUklWQVRFX3NldFBlcnNpc3RlbnRDYWNoZUluZGV4QXV0b0NyZWF0aW9uRW5hYmxlZChlLCAhMSk7XG59XG5cbi8qKlxuICogUmVtb3ZlcyBhbGwgcGVyc2lzdGVudCBjYWNoZSBpbmRleGVzLlxuICpcbiAqIFBsZWFzZSBub3RlIHRoaXMgZnVuY3Rpb24gd2lsbCBhbHNvIGRlbGV0ZXMgaW5kZXhlcyBnZW5lcmF0ZWQgYnlcbiAqIGBzZXRJbmRleENvbmZpZ3VyYXRpb24oKWAsIHdoaWNoIGlzIGRlcHJlY2F0ZWQuXG4gKi8gZnVuY3Rpb24gZGVsZXRlQWxsUGVyc2lzdGVudENhY2hlSW5kZXhlcyhlKSB7XG4gICAgZS5fY2xpZW50LnZlcmlmeU5vdFRlcm1pbmF0ZWQoKTtcbiAgICBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50RGVsZXRlQWxsRmllbGRJbmRleGVzKGUuX2NsaWVudCkudGhlbigoZSA9PiBfX1BSSVZBVEVfbG9nRGVidWcoXCJkZWxldGluZyBhbGwgcGVyc2lzdGVudCBjYWNoZSBpbmRleGVzIHN1Y2NlZWRlZFwiKSkpLmNhdGNoKChlID0+IF9fUFJJVkFURV9sb2dXYXJuKFwiZGVsZXRpbmcgYWxsIHBlcnNpc3RlbnQgY2FjaGUgaW5kZXhlcyBmYWlsZWRcIiwgZSkpKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3NldFBlcnNpc3RlbnRDYWNoZUluZGV4QXV0b0NyZWF0aW9uRW5hYmxlZChlLCB0KSB7XG4gICAgZS5fY2xpZW50LnZlcmlmeU5vdFRlcm1pbmF0ZWQoKTtcbiAgICBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50U2V0UGVyc2lzdGVudENhY2hlSW5kZXhBdXRvQ3JlYXRpb25FbmFibGVkKGUuX2NsaWVudCwgdCkudGhlbigoZSA9PiBfX1BSSVZBVEVfbG9nRGVidWcoYHNldHRpbmcgcGVyc2lzdGVudCBjYWNoZSBpbmRleCBhdXRvIGNyZWF0aW9uIGlzRW5hYmxlZD0ke3R9IHN1Y2NlZWRlZGApKSkuY2F0Y2goKGUgPT4gX19QUklWQVRFX2xvZ1dhcm4oYHNldHRpbmcgcGVyc2lzdGVudCBjYWNoZSBpbmRleCBhdXRvIGNyZWF0aW9uIGlzRW5hYmxlZD0ke3R9IGZhaWxlZGAsIGUpKSk7XG59XG5cbi8qKlxuICogTWFwcyBgRmlyZXN0b3JlYCBpbnN0YW5jZXMgdG8gdGhlaXIgY29ycmVzcG9uZGluZ1xuICogYFBlcnNpc3RlbnRDYWNoZUluZGV4TWFuYWdlcmAgaW5zdGFuY2VzLlxuICpcbiAqIFVzZSBhIGBXZWFrTWFwYCBzbyB0aGF0IHRoZSBtYXBwaW5nIHdpbGwgYmUgYXV0b21hdGljYWxseSBkcm9wcGVkIHdoZW4gdGhlXG4gKiBgRmlyZXN0b3JlYCBpbnN0YW5jZSBpcyBnYXJiYWdlIGNvbGxlY3RlZC4gVGhpcyBlbXVsYXRlcyBhIHByaXZhdGUgbWVtYmVyXG4gKiBhcyBkZXNjcmliZWQgaW4gaHR0cHM6Ly9nb28uZ2xlLzQ1NHl2dWcuXG4gKi8gY29uc3QgQ2UgPSBuZXcgV2Vha01hcDtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQGludGVybmFsXG4gKiBAcHJpdmF0ZVxuICpcbiAqIFRoaXMgZnVuY3Rpb24gaXMgZm9yIGludGVybmFsIHVzZSBvbmx5LlxuICpcbiAqIFJldHVybnMgdGhlIGBRdWVyeVRhcmdldGAgcmVwcmVzZW50YXRpb24gb2YgdGhlIGdpdmVuIHF1ZXJ5LiBSZXR1cm5zIGBudWxsYFxuICogaWYgdGhlIEZpcmVzdG9yZSBjbGllbnQgYXNzb2NpYXRlZCB3aXRoIHRoZSBnaXZlbiBxdWVyeSBoYXMgbm90IGJlZW5cbiAqIGluaXRpYWxpemVkIG9yIGhhcyBiZWVuIHRlcm1pbmF0ZWQuXG4gKlxuICogQHBhcmFtIHF1ZXJ5IC0gVGhlIFF1ZXJ5IHRvIGNvbnZlcnQgdG8gcHJvdG8gcmVwcmVzZW50YXRpb24uXG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5mdW5jdGlvbiBfaW50ZXJuYWxRdWVyeVRvUHJvdG9RdWVyeVRhcmdldChlKSB7XG4gICAgdmFyIHQ7XG4gICAgY29uc3QgbiA9IG51bGwgPT09ICh0ID0gZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZChfX1BSSVZBVEVfY2FzdChlLmZpcmVzdG9yZSwgRmlyZXN0b3JlKSkuX29ubGluZUNvbXBvbmVudHMpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQuZGF0YXN0b3JlLnNlcmlhbGl6ZXI7XG4gICAgcmV0dXJuIHZvaWQgMCA9PT0gbiA/IG51bGwgOiBfX1BSSVZBVEVfdG9RdWVyeVRhcmdldChuLCBfX1BSSVZBVEVfcXVlcnlUb1RhcmdldChlLl9xdWVyeSkpLl90O1xufVxuXG4vKipcbiAqIEBpbnRlcm5hbFxuICogQHByaXZhdGVcbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIGZvciBpbnRlcm5hbCB1c2Ugb25seS5cbiAqXG4gKiBSZXR1cm5zIGBSdW5BZ2dyZWdhdGlvblF1ZXJ5UmVxdWVzdGAgd2hpY2ggY29udGFpbnMgdGhlIHByb3RvIHJlcHJlc2VudGF0aW9uXG4gKiBvZiB0aGUgZ2l2ZW4gYWdncmVnYXRpb24gcXVlcnkgcmVxdWVzdC4gUmV0dXJucyBudWxsIGlmIHRoZSBGaXJlc3RvcmUgY2xpZW50XG4gKiBhc3NvY2lhdGVkIHdpdGggdGhlIGdpdmVuIHF1ZXJ5IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZCBvciBoYXMgYmVlblxuICogdGVybWluYXRlZC5cbiAqXG4gKiBAcGFyYW0gcXVlcnkgLSBUaGUgUXVlcnkgdG8gY29udmVydCB0byBwcm90byByZXByZXNlbnRhdGlvbi5cbiAqIEBwYXJhbSBhZ2dyZWdhdGVTcGVjIC0gVGhlIHNldCBvZiBhZ2dyZWdhdGlvbnMgYW5kIHRoZWlyIGFsaWFzZXMuXG4gKi8gZnVuY3Rpb24gX2ludGVybmFsQWdncmVnYXRpb25RdWVyeVRvUHJvdG9SdW5BZ2dyZWdhdGlvblF1ZXJ5UmVxdWVzdChlLCB0KSB7XG4gICAgdmFyIG47XG4gICAgY29uc3QgciA9IF9fUFJJVkFURV9tYXBUb0FycmF5KHQsICgoZSwgdCkgPT4gbmV3IF9fUFJJVkFURV9BZ2dyZWdhdGVJbXBsKHQsIGUuYWdncmVnYXRlVHlwZSwgZS5faW50ZXJuYWxGaWVsZFBhdGgpKSksIGkgPSBudWxsID09PSAobiA9IGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQoX19QUklWQVRFX2Nhc3QoZS5maXJlc3RvcmUsIEZpcmVzdG9yZSkpLl9vbmxpbmVDb21wb25lbnRzKSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLmRhdGFzdG9yZS5zZXJpYWxpemVyO1xuICAgIHJldHVybiB2b2lkIDAgPT09IGkgPyBudWxsIDogX19QUklWQVRFX3RvUnVuQWdncmVnYXRpb25RdWVyeVJlcXVlc3QoaSwgX19QUklWQVRFX3F1ZXJ5VG9BZ2dyZWdhdGVUYXJnZXQoZS5fcXVlcnkpLCByLCBcbiAgICAvKiBza2lwQWxpYXNpbmc9ICovICEwKS5yZXF1ZXN0O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUZXN0aW5nIGhvb2tzIGZvciB1c2UgYnkgRmlyZXN0b3JlJ3MgaW50ZWdyYXRpb24gdGVzdCBzdWl0ZSB0byByZWFjaCBpbnRvIHRoZVxuICogU0RLIGludGVybmFscyB0byB2YWxpZGF0ZSBsb2dpYyBhbmQgYmVoYXZpb3IgdGhhdCBpcyBub3QgdmlzaWJsZSBmcm9tIHRoZVxuICogcHVibGljIEFQSSBzdXJmYWNlLlxuICpcbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIFRlc3RpbmdIb29rcyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcImluc3RhbmNlcyBvZiB0aGlzIGNsYXNzIHNob3VsZCBub3QgYmUgY3JlYXRlZFwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGEgY2FsbGJhY2sgdG8gYmUgbm90aWZpZWQgd2hlbiBhbiBleGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoXG4gICAgICogb2NjdXJzIGluIHRoZSBXYXRjaCBsaXN0ZW4gc3RyZWFtLlxuICAgICAqXG4gICAgICogVGhlIHJlbGF0aXZlIG9yZGVyIGluIHdoaWNoIGNhbGxiYWNrcyBhcmUgbm90aWZpZWQgaXMgdW5zcGVjaWZpZWQ7IGRvIG5vdFxuICAgICAqIHJlbHkgb24gYW55IHBhcnRpY3VsYXIgb3JkZXJpbmcuIElmIGEgZ2l2ZW4gY2FsbGJhY2sgaXMgcmVnaXN0ZXJlZCBtdWx0aXBsZVxuICAgICAqIHRpbWVzIHRoZW4gaXQgd2lsbCBiZSBub3RpZmllZCBtdWx0aXBsZSB0aW1lcywgb25jZSBwZXIgcmVnaXN0cmF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIHRoZSBjYWxsYmFjayB0byBpbnZva2UgdXBvbiBleGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoLlxuICAgICAqXG4gICAgICogQHJldHVybiBhIGZ1bmN0aW9uIHRoYXQsIHdoZW4gY2FsbGVkLCB1bnJlZ2lzdGVycyB0aGUgZ2l2ZW4gY2FsbGJhY2s7IG9ubHlcbiAgICAgKiB0aGUgZmlyc3QgaW52b2NhdGlvbiBvZiB0aGUgcmV0dXJuZWQgZnVuY3Rpb24gZG9lcyBhbnl0aGluZzsgYWxsIHN1YnNlcXVlbnRcbiAgICAgKiBpbnZvY2F0aW9ucyBkbyBub3RoaW5nLlxuICAgICAqLyAgICBzdGF0aWMgb25FeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaChlKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfVGVzdGluZ0hvb2tzU3BpSW1wbC5pbnN0YW5jZS5vbkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoKGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUaGUgaW1wbGVtZW50YXRpb24gb2YgYFRlc3RpbmdIb29rc1NwaWAuXG4gKi8gY2xhc3MgX19QUklWQVRFX1Rlc3RpbmdIb29rc1NwaUltcGwge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLk91ID0gbmV3IE1hcDtcbiAgICB9XG4gICAgc3RhdGljIGdldCBpbnN0YW5jZSgpIHtcbiAgICAgICAgcmV0dXJuIHZlIHx8ICh2ZSA9IG5ldyBfX1BSSVZBVEVfVGVzdGluZ0hvb2tzU3BpSW1wbCwgZnVuY3Rpb24gX19QUklWQVRFX3NldFRlc3RpbmdIb29rc1NwaShlKSB7XG4gICAgICAgICAgICBpZiAoaGUpIHRocm93IG5ldyBFcnJvcihcImEgVGVzdGluZ0hvb2tzU3BpIGluc3RhbmNlIGlzIGFscmVhZHkgc2V0XCIpO1xuICAgICAgICAgICAgaGUgPSBlO1xuICAgICAgICB9KHZlKSksIHZlO1xuICAgIH1cbiAgICBldChlKSB7XG4gICAgICAgIHRoaXMuT3UuZm9yRWFjaCgodCA9PiB0KGUpKSk7XG4gICAgfVxuICAgIG9uRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2goZSkge1xuICAgICAgICBjb25zdCB0ID0gU3ltYm9sKCksIG4gPSB0aGlzLk91O1xuICAgICAgICByZXR1cm4gbi5zZXQodCwgZSksICgpID0+IG4uZGVsZXRlKHQpO1xuICAgIH1cbn1cblxubGV0IHZlID0gbnVsbDtcblxuLyoqXG4gKiBDbG91ZCBGaXJlc3RvcmVcbiAqXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cbiAqLyAhZnVuY3Rpb24gX19QUklWQVRFX3JlZ2lzdGVyRmlyZXN0b3JlKGUsIHQgPSAhMCkge1xuICAgICFmdW5jdGlvbiBfX1BSSVZBVEVfc2V0U0RLVmVyc2lvbihlKSB7XG4gICAgICAgIGIgPSBlO1xuICAgIH0oU0RLX1ZFUlNJT04pLCBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChcImZpcmVzdG9yZVwiLCAoKGUsIHtpbnN0YW5jZUlkZW50aWZpZXI6IG4sIG9wdGlvbnM6IHJ9KSA9PiB7XG4gICAgICAgIGNvbnN0IGkgPSBlLmdldFByb3ZpZGVyKFwiYXBwXCIpLmdldEltbWVkaWF0ZSgpLCBzID0gbmV3IEZpcmVzdG9yZShuZXcgX19QUklWQVRFX0ZpcmViYXNlQXV0aENyZWRlbnRpYWxzUHJvdmlkZXIoZS5nZXRQcm92aWRlcihcImF1dGgtaW50ZXJuYWxcIikpLCBuZXcgX19QUklWQVRFX0ZpcmViYXNlQXBwQ2hlY2tUb2tlblByb3ZpZGVyKGUuZ2V0UHJvdmlkZXIoXCJhcHAtY2hlY2staW50ZXJuYWxcIikpLCBmdW5jdGlvbiBfX1BSSVZBVEVfZGF0YWJhc2VJZEZyb21BcHAoZSwgdCkge1xuICAgICAgICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmFwcGx5KGUub3B0aW9ucywgWyBcInByb2plY3RJZFwiIF0pKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQy5JTlZBTElEX0FSR1VNRU5ULCAnXCJwcm9qZWN0SWRcIiBub3QgcHJvdmlkZWQgaW4gZmlyZWJhc2UuaW5pdGlhbGl6ZUFwcC4nKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0YWJhc2VJZChlLm9wdGlvbnMucHJvamVjdElkLCB0KTtcbiAgICAgICAgfShpLCBuKSwgaSk7XG4gICAgICAgIHJldHVybiByID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICB1c2VGZXRjaFN0cmVhbXM6IHRcbiAgICAgICAgfSwgciksIHMuX3NldFNldHRpbmdzKHIpLCBzO1xuICAgIH0pLCBcIlBVQkxJQ1wiKS5zZXRNdWx0aXBsZUluc3RhbmNlcyghMCkpLCByZWdpc3RlclZlcnNpb24oUywgXCI0LjYuNFwiLCBlKSwgXG4gICAgLy8gQlVJTERfVEFSR0VUIHdpbGwgYmUgcmVwbGFjZWQgYnkgdmFsdWVzIGxpa2UgZXNtNSwgZXNtMjAxNywgY2pzNSwgZXRjIGR1cmluZyB0aGUgY29tcGlsYXRpb25cbiAgICByZWdpc3RlclZlcnNpb24oUywgXCI0LjYuNFwiLCBcImVzbTIwMTdcIik7XG59KCk7XG5cbmV4cG9ydCB7IEFic3RyYWN0VXNlckRhdGFXcml0ZXIsIEFnZ3JlZ2F0ZUZpZWxkLCBBZ2dyZWdhdGVRdWVyeVNuYXBzaG90LCBCeXRlcywgd2UgYXMgQ0FDSEVfU0laRV9VTkxJTUlURUQsIENvbGxlY3Rpb25SZWZlcmVuY2UsIERvY3VtZW50UmVmZXJlbmNlLCBEb2N1bWVudFNuYXBzaG90LCBGaWVsZFBhdGgsIEZpZWxkVmFsdWUsIEZpcmVzdG9yZSwgRmlyZXN0b3JlRXJyb3IsIEdlb1BvaW50LCBMb2FkQnVuZGxlVGFzaywgUGVyc2lzdGVudENhY2hlSW5kZXhNYW5hZ2VyLCBRdWVyeSwgUXVlcnlDb21wb3NpdGVGaWx0ZXJDb25zdHJhaW50LCBRdWVyeUNvbnN0cmFpbnQsIFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCwgUXVlcnlFbmRBdENvbnN0cmFpbnQsIFF1ZXJ5RmllbGRGaWx0ZXJDb25zdHJhaW50LCBRdWVyeUxpbWl0Q29uc3RyYWludCwgUXVlcnlPcmRlckJ5Q29uc3RyYWludCwgUXVlcnlTbmFwc2hvdCwgUXVlcnlTdGFydEF0Q29uc3RyYWludCwgU25hcHNob3RNZXRhZGF0YSwgVGltZXN0YW1wLCBUcmFuc2FjdGlvbiwgV3JpdGVCYXRjaCwgX19QUklWQVRFX0F1dG9JZCBhcyBfQXV0b0lkLCBCeXRlU3RyaW5nIGFzIF9CeXRlU3RyaW5nLCBEYXRhYmFzZUlkIGFzIF9EYXRhYmFzZUlkLCBEb2N1bWVudEtleSBhcyBfRG9jdW1lbnRLZXksIF9fUFJJVkFURV9FbXB0eUFwcENoZWNrVG9rZW5Qcm92aWRlciBhcyBfRW1wdHlBcHBDaGVja1Rva2VuUHJvdmlkZXIsIF9fUFJJVkFURV9FbXB0eUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyIGFzIF9FbXB0eUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyLCBGaWVsZFBhdGgkMSBhcyBfRmllbGRQYXRoLCBUZXN0aW5nSG9va3MgYXMgX1Rlc3RpbmdIb29rcywgX19QUklWQVRFX2Nhc3QgYXMgX2Nhc3QsIF9fUFJJVkFURV9kZWJ1Z0Fzc2VydCBhcyBfZGVidWdBc3NlcnQsIF9pbnRlcm5hbEFnZ3JlZ2F0aW9uUXVlcnlUb1Byb3RvUnVuQWdncmVnYXRpb25RdWVyeVJlcXVlc3QsIF9pbnRlcm5hbFF1ZXJ5VG9Qcm90b1F1ZXJ5VGFyZ2V0LCBfX1BSSVZBVEVfaXNCYXNlNjRBdmFpbGFibGUgYXMgX2lzQmFzZTY0QXZhaWxhYmxlLCBfX1BSSVZBVEVfbG9nV2FybiBhcyBfbG9nV2FybiwgX19QUklWQVRFX3ZhbGlkYXRlSXNOb3RVc2VkVG9nZXRoZXIgYXMgX3ZhbGlkYXRlSXNOb3RVc2VkVG9nZXRoZXIsIGFkZERvYywgYWdncmVnYXRlRmllbGRFcXVhbCwgYWdncmVnYXRlUXVlcnlTbmFwc2hvdEVxdWFsLCBhbmQsIGFycmF5UmVtb3ZlLCBhcnJheVVuaW9uLCBhdmVyYWdlLCBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlLCBjb2xsZWN0aW9uLCBjb2xsZWN0aW9uR3JvdXAsIGNvbm5lY3RGaXJlc3RvcmVFbXVsYXRvciwgY291bnQsIGRlbGV0ZUFsbFBlcnNpc3RlbnRDYWNoZUluZGV4ZXMsIGRlbGV0ZURvYywgZGVsZXRlRmllbGQsIGRpc2FibGVOZXR3b3JrLCBkaXNhYmxlUGVyc2lzdGVudENhY2hlSW5kZXhBdXRvQ3JlYXRpb24sIGRvYywgZG9jdW1lbnRJZCwgZW5hYmxlSW5kZXhlZERiUGVyc2lzdGVuY2UsIGVuYWJsZU11bHRpVGFiSW5kZXhlZERiUGVyc2lzdGVuY2UsIGVuYWJsZU5ldHdvcmssIGVuYWJsZVBlcnNpc3RlbnRDYWNoZUluZGV4QXV0b0NyZWF0aW9uLCBlbmRBdCwgZW5kQmVmb3JlLCBlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkLCBleGVjdXRlV3JpdGUsIGdldEFnZ3JlZ2F0ZUZyb21TZXJ2ZXIsIGdldENvdW50RnJvbVNlcnZlciwgZ2V0RG9jLCBnZXREb2NGcm9tQ2FjaGUsIGdldERvY0Zyb21TZXJ2ZXIsIGdldERvY3MsIGdldERvY3NGcm9tQ2FjaGUsIGdldERvY3NGcm9tU2VydmVyLCBnZXRGaXJlc3RvcmUsIGdldFBlcnNpc3RlbnRDYWNoZUluZGV4TWFuYWdlciwgaW5jcmVtZW50LCBpbml0aWFsaXplRmlyZXN0b3JlLCBsaW1pdCwgbGltaXRUb0xhc3QsIGxvYWRCdW5kbGUsIG1lbW9yeUVhZ2VyR2FyYmFnZUNvbGxlY3RvciwgbWVtb3J5TG9jYWxDYWNoZSwgbWVtb3J5THJ1R2FyYmFnZUNvbGxlY3RvciwgbmFtZWRRdWVyeSwgb25TbmFwc2hvdCwgb25TbmFwc2hvdHNJblN5bmMsIG9yLCBvcmRlckJ5LCBwZXJzaXN0ZW50TG9jYWxDYWNoZSwgcGVyc2lzdGVudE11bHRpcGxlVGFiTWFuYWdlciwgcGVyc2lzdGVudFNpbmdsZVRhYk1hbmFnZXIsIHF1ZXJ5LCBxdWVyeUVxdWFsLCByZWZFcXVhbCwgcnVuVHJhbnNhY3Rpb24sIHNlcnZlclRpbWVzdGFtcCwgc2V0RG9jLCBzZXRJbmRleENvbmZpZ3VyYXRpb24sIHNldExvZ0xldmVsLCBzbmFwc2hvdEVxdWFsLCBzdGFydEFmdGVyLCBzdGFydEF0LCBzdW0sIHRlcm1pbmF0ZSwgdXBkYXRlRG9jLCB3YWl0Rm9yUGVuZGluZ1dyaXRlcywgd2hlcmUsIHdyaXRlQmF0Y2ggfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cblxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXG5cblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxuQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULFxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxuT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUlxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSwgU3VwcHJlc3NlZEVycm9yLCBTeW1ib2wgKi9cblxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XG4gIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XG4gIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59XG5cbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcbiAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcbiAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0O1xuICB9XG4gIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcbiAgdmFyIHQgPSB7fTtcbiAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXG4gICAgICB0W3BdID0gc1twXTtcbiAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxuICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcbiAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XG4gICAgICB9XG4gIHJldHVybiB0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2VzRGVjb3JhdGUoY3RvciwgZGVzY3JpcHRvckluLCBkZWNvcmF0b3JzLCBjb250ZXh0SW4sIGluaXRpYWxpemVycywgZXh0cmFJbml0aWFsaXplcnMpIHtcbiAgZnVuY3Rpb24gYWNjZXB0KGYpIHsgaWYgKGYgIT09IHZvaWQgMCAmJiB0eXBlb2YgZiAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRnVuY3Rpb24gZXhwZWN0ZWRcIik7IHJldHVybiBmOyB9XG4gIHZhciBraW5kID0gY29udGV4dEluLmtpbmQsIGtleSA9IGtpbmQgPT09IFwiZ2V0dGVyXCIgPyBcImdldFwiIDoga2luZCA9PT0gXCJzZXR0ZXJcIiA/IFwic2V0XCIgOiBcInZhbHVlXCI7XG4gIHZhciB0YXJnZXQgPSAhZGVzY3JpcHRvckluICYmIGN0b3IgPyBjb250ZXh0SW5bXCJzdGF0aWNcIl0gPyBjdG9yIDogY3Rvci5wcm90b3R5cGUgOiBudWxsO1xuICB2YXIgZGVzY3JpcHRvciA9IGRlc2NyaXB0b3JJbiB8fCAodGFyZ2V0ID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGNvbnRleHRJbi5uYW1lKSA6IHt9KTtcbiAgdmFyIF8sIGRvbmUgPSBmYWxzZTtcbiAgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIHZhciBjb250ZXh0ID0ge307XG4gICAgICBmb3IgKHZhciBwIGluIGNvbnRleHRJbikgY29udGV4dFtwXSA9IHAgPT09IFwiYWNjZXNzXCIgPyB7fSA6IGNvbnRleHRJbltwXTtcbiAgICAgIGZvciAodmFyIHAgaW4gY29udGV4dEluLmFjY2VzcykgY29udGV4dC5hY2Nlc3NbcF0gPSBjb250ZXh0SW4uYWNjZXNzW3BdO1xuICAgICAgY29udGV4dC5hZGRJbml0aWFsaXplciA9IGZ1bmN0aW9uIChmKSB7IGlmIChkb25lKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGFkZCBpbml0aWFsaXplcnMgYWZ0ZXIgZGVjb3JhdGlvbiBoYXMgY29tcGxldGVkXCIpOyBleHRyYUluaXRpYWxpemVycy5wdXNoKGFjY2VwdChmIHx8IG51bGwpKTsgfTtcbiAgICAgIHZhciByZXN1bHQgPSAoMCwgZGVjb3JhdG9yc1tpXSkoa2luZCA9PT0gXCJhY2Nlc3NvclwiID8geyBnZXQ6IGRlc2NyaXB0b3IuZ2V0LCBzZXQ6IGRlc2NyaXB0b3Iuc2V0IH0gOiBkZXNjcmlwdG9yW2tleV0sIGNvbnRleHQpO1xuICAgICAgaWYgKGtpbmQgPT09IFwiYWNjZXNzb3JcIikge1xuICAgICAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgY29udGludWU7XG4gICAgICAgICAgaWYgKHJlc3VsdCA9PT0gbnVsbCB8fCB0eXBlb2YgcmVzdWx0ICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiT2JqZWN0IGV4cGVjdGVkXCIpO1xuICAgICAgICAgIGlmIChfID0gYWNjZXB0KHJlc3VsdC5nZXQpKSBkZXNjcmlwdG9yLmdldCA9IF87XG4gICAgICAgICAgaWYgKF8gPSBhY2NlcHQocmVzdWx0LnNldCkpIGRlc2NyaXB0b3Iuc2V0ID0gXztcbiAgICAgICAgICBpZiAoXyA9IGFjY2VwdChyZXN1bHQuaW5pdCkpIGluaXRpYWxpemVycy51bnNoaWZ0KF8pO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoXyA9IGFjY2VwdChyZXN1bHQpKSB7XG4gICAgICAgICAgaWYgKGtpbmQgPT09IFwiZmllbGRcIikgaW5pdGlhbGl6ZXJzLnVuc2hpZnQoXyk7XG4gICAgICAgICAgZWxzZSBkZXNjcmlwdG9yW2tleV0gPSBfO1xuICAgICAgfVxuICB9XG4gIGlmICh0YXJnZXQpIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGNvbnRleHRJbi5uYW1lLCBkZXNjcmlwdG9yKTtcbiAgZG9uZSA9IHRydWU7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gX19ydW5Jbml0aWFsaXplcnModGhpc0FyZywgaW5pdGlhbGl6ZXJzLCB2YWx1ZSkge1xuICB2YXIgdXNlVmFsdWUgPSBhcmd1bWVudHMubGVuZ3RoID4gMjtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbml0aWFsaXplcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhbHVlID0gdXNlVmFsdWUgPyBpbml0aWFsaXplcnNbaV0uY2FsbCh0aGlzQXJnLCB2YWx1ZSkgOiBpbml0aWFsaXplcnNbaV0uY2FsbCh0aGlzQXJnKTtcbiAgfVxuICByZXR1cm4gdXNlVmFsdWUgPyB2YWx1ZSA6IHZvaWQgMDtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3Byb3BLZXkoeCkge1xuICByZXR1cm4gdHlwZW9mIHggPT09IFwic3ltYm9sXCIgPyB4IDogXCJcIi5jb25jYXQoeCk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gX19zZXRGdW5jdGlvbk5hbWUoZiwgbmFtZSwgcHJlZml4KSB7XG4gIGlmICh0eXBlb2YgbmFtZSA9PT0gXCJzeW1ib2xcIikgbmFtZSA9IG5hbWUuZGVzY3JpcHRpb24gPyBcIltcIi5jb25jYXQobmFtZS5kZXNjcmlwdGlvbiwgXCJdXCIpIDogXCJcIjtcbiAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmLCBcIm5hbWVcIiwgeyBjb25maWd1cmFibGU6IHRydWUsIHZhbHVlOiBwcmVmaXggPyBcIlwiLmNvbmNhdChwcmVmaXgsIFwiIFwiLCBuYW1lKSA6IG5hbWUgfSk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xuICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xuICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xuICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcbiAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XG4gIGZ1bmN0aW9uIHN0ZXAob3ApIHtcbiAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcbiAgICAgIHdoaWxlIChnICYmIChnID0gMCwgb3BbMF0gJiYgKF8gPSAwKSksIF8pIHRyeSB7XG4gICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xuICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcbiAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XG4gICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xuICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xuICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XG4gICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxuICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XG4gICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XG4gICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcbiAgfVxufVxuXG5leHBvcnQgdmFyIF9fY3JlYXRlQmluZGluZyA9IE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG0sIGspO1xuICBpZiAoIWRlc2MgfHwgKFwiZ2V0XCIgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkge1xuICAgICAgZGVzYyA9IHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfTtcbiAgfVxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIGRlc2MpO1xufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgb1trMl0gPSBtW2tdO1xufSk7XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgbykge1xuICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sIHApKSBfX2NyZWF0ZUJpbmRpbmcobywgbSwgcCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XG4gIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7XG4gIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xuICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHJldHVybiB7XG4gICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcbiAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XG4gICAgICB9XG4gIH07XG4gIHRocm93IG5ldyBUeXBlRXJyb3IocyA/IFwiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIiA6IFwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XG4gIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcbiAgaWYgKCFtKSByZXR1cm4gbztcbiAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XG4gIHRyeSB7XG4gICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcbiAgfVxuICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cbiAgZmluYWxseSB7XG4gICAgICB0cnkge1xuICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xuICAgICAgfVxuICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XG4gIH1cbiAgcmV0dXJuIGFyO1xufVxuXG4vKiogQGRlcHJlY2F0ZWQgKi9cbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcbiAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXG4gICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XG4gIHJldHVybiBhcjtcbn1cblxuLyoqIEBkZXByZWNhdGVkICovXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheXMoKSB7XG4gIGZvciAodmFyIHMgPSAwLCBpID0gMCwgaWwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWw7IGkrKykgcyArPSBhcmd1bWVudHNbaV0ubGVuZ3RoO1xuICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXG4gICAgICBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKylcbiAgICAgICAgICByW2tdID0gYVtqXTtcbiAgcmV0dXJuIHI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5KHRvLCBmcm9tLCBwYWNrKSB7XG4gIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkgPSAwLCBsID0gZnJvbS5sZW5ndGgsIGFyOyBpIDwgbDsgaSsrKSB7XG4gICAgICBpZiAoYXIgfHwgIShpIGluIGZyb20pKSB7XG4gICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICBhcltpXSA9IGZyb21baV07XG4gICAgICB9XG4gIH1cbiAgcmV0dXJuIHRvLmNvbmNhdChhciB8fCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcbiAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xuICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xuICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xuICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIsIGF3YWl0UmV0dXJuKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xuICBmdW5jdGlvbiBhd2FpdFJldHVybihmKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZiwgcmVqZWN0KTsgfTsgfVxuICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaWYgKGdbbl0pIHsgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgaWYgKGYpIGlbbl0gPSBmKGlbbl0pOyB9IH1cbiAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxuICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7IH1cbiAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxuICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XG4gIGZ1bmN0aW9uIHNldHRsZShmLCB2KSB7IGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7IH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNEZWxlZ2F0b3Iobykge1xuICB2YXIgaSwgcDtcbiAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcbiAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlbbl0gPSBvW25dID8gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIChwID0gIXApID8geyB2YWx1ZTogX19hd2FpdChvW25dKHYpKSwgZG9uZTogZmFsc2UgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xuICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xuICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xuICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XG4gIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cbiAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcbiAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cbiAgcmV0dXJuIGNvb2tlZDtcbn07XG5cbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSBPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xufSkgOiBmdW5jdGlvbihvLCB2KSB7XG4gIG9bXCJkZWZhdWx0XCJdID0gdjtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydFN0YXIobW9kKSB7XG4gIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XG4gIHZhciByZXN1bHQgPSB7fTtcbiAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspO1xuICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xuICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEdldChyZWNlaXZlciwgc3RhdGUsIGtpbmQsIGYpIHtcbiAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgZ2V0dGVyXCIpO1xuICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCByZWFkIHByaXZhdGUgbWVtYmVyIGZyb20gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcbiAgcmV0dXJuIGtpbmQgPT09IFwibVwiID8gZiA6IGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyKSA6IGYgPyBmLnZhbHVlIDogc3RhdGUuZ2V0KHJlY2VpdmVyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRTZXQocmVjZWl2ZXIsIHN0YXRlLCB2YWx1ZSwga2luZCwgZikge1xuICBpZiAoa2luZCA9PT0gXCJtXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIG1ldGhvZCBpcyBub3Qgd3JpdGFibGVcIik7XG4gIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIHNldHRlclwiKTtcbiAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3Qgd3JpdGUgcHJpdmF0ZSBtZW1iZXIgdG8gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcbiAgcmV0dXJuIChraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlciwgdmFsdWUpIDogZiA/IGYudmFsdWUgPSB2YWx1ZSA6IHN0YXRlLnNldChyZWNlaXZlciwgdmFsdWUpKSwgdmFsdWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkSW4oc3RhdGUsIHJlY2VpdmVyKSB7XG4gIGlmIChyZWNlaXZlciA9PT0gbnVsbCB8fCAodHlwZW9mIHJlY2VpdmVyICE9PSBcIm9iamVjdFwiICYmIHR5cGVvZiByZWNlaXZlciAhPT0gXCJmdW5jdGlvblwiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB1c2UgJ2luJyBvcGVyYXRvciBvbiBub24tb2JqZWN0XCIpO1xuICByZXR1cm4gdHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciA9PT0gc3RhdGUgOiBzdGF0ZS5oYXMocmVjZWl2ZXIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19hZGREaXNwb3NhYmxlUmVzb3VyY2UoZW52LCB2YWx1ZSwgYXN5bmMpIHtcbiAgaWYgKHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB2b2lkIDApIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSBcIm9iamVjdFwiICYmIHR5cGVvZiB2YWx1ZSAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiT2JqZWN0IGV4cGVjdGVkLlwiKTtcbiAgICB2YXIgZGlzcG9zZSwgaW5uZXI7XG4gICAgaWYgKGFzeW5jKSB7XG4gICAgICBpZiAoIVN5bWJvbC5hc3luY0Rpc3Bvc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNEaXNwb3NlIGlzIG5vdCBkZWZpbmVkLlwiKTtcbiAgICAgIGRpc3Bvc2UgPSB2YWx1ZVtTeW1ib2wuYXN5bmNEaXNwb3NlXTtcbiAgICB9XG4gICAgaWYgKGRpc3Bvc2UgPT09IHZvaWQgMCkge1xuICAgICAgaWYgKCFTeW1ib2wuZGlzcG9zZSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5kaXNwb3NlIGlzIG5vdCBkZWZpbmVkLlwiKTtcbiAgICAgIGRpc3Bvc2UgPSB2YWx1ZVtTeW1ib2wuZGlzcG9zZV07XG4gICAgICBpZiAoYXN5bmMpIGlubmVyID0gZGlzcG9zZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBkaXNwb3NlICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJPYmplY3Qgbm90IGRpc3Bvc2FibGUuXCIpO1xuICAgIGlmIChpbm5lcikgZGlzcG9zZSA9IGZ1bmN0aW9uKCkgeyB0cnkgeyBpbm5lci5jYWxsKHRoaXMpOyB9IGNhdGNoIChlKSB7IHJldHVybiBQcm9taXNlLnJlamVjdChlKTsgfSB9O1xuICAgIGVudi5zdGFjay5wdXNoKHsgdmFsdWU6IHZhbHVlLCBkaXNwb3NlOiBkaXNwb3NlLCBhc3luYzogYXN5bmMgfSk7XG4gIH1cbiAgZWxzZSBpZiAoYXN5bmMpIHtcbiAgICBlbnYuc3RhY2sucHVzaCh7IGFzeW5jOiB0cnVlIH0pO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cblxudmFyIF9TdXBwcmVzc2VkRXJyb3IgPSB0eXBlb2YgU3VwcHJlc3NlZEVycm9yID09PSBcImZ1bmN0aW9uXCIgPyBTdXBwcmVzc2VkRXJyb3IgOiBmdW5jdGlvbiAoZXJyb3IsIHN1cHByZXNzZWQsIG1lc3NhZ2UpIHtcbiAgdmFyIGUgPSBuZXcgRXJyb3IobWVzc2FnZSk7XG4gIHJldHVybiBlLm5hbWUgPSBcIlN1cHByZXNzZWRFcnJvclwiLCBlLmVycm9yID0gZXJyb3IsIGUuc3VwcHJlc3NlZCA9IHN1cHByZXNzZWQsIGU7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gX19kaXNwb3NlUmVzb3VyY2VzKGVudikge1xuICBmdW5jdGlvbiBmYWlsKGUpIHtcbiAgICBlbnYuZXJyb3IgPSBlbnYuaGFzRXJyb3IgPyBuZXcgX1N1cHByZXNzZWRFcnJvcihlLCBlbnYuZXJyb3IsIFwiQW4gZXJyb3Igd2FzIHN1cHByZXNzZWQgZHVyaW5nIGRpc3Bvc2FsLlwiKSA6IGU7XG4gICAgZW52Lmhhc0Vycm9yID0gdHJ1ZTtcbiAgfVxuICBmdW5jdGlvbiBuZXh0KCkge1xuICAgIHdoaWxlIChlbnYuc3RhY2subGVuZ3RoKSB7XG4gICAgICB2YXIgcmVjID0gZW52LnN0YWNrLnBvcCgpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHJlYy5kaXNwb3NlICYmIHJlYy5kaXNwb3NlLmNhbGwocmVjLnZhbHVlKTtcbiAgICAgICAgaWYgKHJlYy5hc3luYykgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHQpLnRoZW4obmV4dCwgZnVuY3Rpb24oZSkgeyBmYWlsKGUpOyByZXR1cm4gbmV4dCgpOyB9KTtcbiAgICAgIH1cbiAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgZmFpbChlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGVudi5oYXNFcnJvcikgdGhyb3cgZW52LmVycm9yO1xuICB9XG4gIHJldHVybiBuZXh0KCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgX19leHRlbmRzLFxuICBfX2Fzc2lnbixcbiAgX19yZXN0LFxuICBfX2RlY29yYXRlLFxuICBfX3BhcmFtLFxuICBfX21ldGFkYXRhLFxuICBfX2F3YWl0ZXIsXG4gIF9fZ2VuZXJhdG9yLFxuICBfX2NyZWF0ZUJpbmRpbmcsXG4gIF9fZXhwb3J0U3RhcixcbiAgX192YWx1ZXMsXG4gIF9fcmVhZCxcbiAgX19zcHJlYWQsXG4gIF9fc3ByZWFkQXJyYXlzLFxuICBfX3NwcmVhZEFycmF5LFxuICBfX2F3YWl0LFxuICBfX2FzeW5jR2VuZXJhdG9yLFxuICBfX2FzeW5jRGVsZWdhdG9yLFxuICBfX2FzeW5jVmFsdWVzLFxuICBfX21ha2VUZW1wbGF0ZU9iamVjdCxcbiAgX19pbXBvcnRTdGFyLFxuICBfX2ltcG9ydERlZmF1bHQsXG4gIF9fY2xhc3NQcml2YXRlRmllbGRHZXQsXG4gIF9fY2xhc3NQcml2YXRlRmllbGRTZXQsXG4gIF9fY2xhc3NQcml2YXRlRmllbGRJbixcbiAgX19hZGREaXNwb3NhYmxlUmVzb3VyY2UsXG4gIF9fZGlzcG9zZVJlc291cmNlcyxcbn07XG4iLCJpbXBvcnQgeyBTREtfVkVSU0lPTiwgX2lzRmlyZWJhc2VTZXJ2ZXJBcHAsIF9nZXRQcm92aWRlciwgX3JlZ2lzdGVyQ29tcG9uZW50LCByZWdpc3RlclZlcnNpb24sIGdldEFwcCB9IGZyb20gJ0BmaXJlYmFzZS9hcHAnO1xuaW1wb3J0IHsgRXJyb3JGYWN0b3J5LCBpc0Jyb3dzZXJFeHRlbnNpb24sIGlzTW9iaWxlQ29yZG92YSwgaXNSZWFjdE5hdGl2ZSwgRmlyZWJhc2VFcnJvciwgcXVlcnlzdHJpbmcsIGdldE1vZHVsYXJJbnN0YW5jZSwgYmFzZTY0RGVjb2RlLCBnZXRVQSwgaXNJRSwgY3JlYXRlU3Vic2NyaWJlLCBkZWVwRXF1YWwsIHF1ZXJ5c3RyaW5nRGVjb2RlLCBleHRyYWN0UXVlcnlzdHJpbmcsIGlzRW1wdHksIGdldEV4cGVyaW1lbnRhbFNldHRpbmcsIGdldERlZmF1bHRFbXVsYXRvckhvc3QgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBMb2dnZXIsIExvZ0xldmVsIH0gZnJvbSAnQGZpcmViYXNlL2xvZ2dlcic7XG5pbXBvcnQgeyBfX3Jlc3QgfSBmcm9tICd0c2xpYic7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEFuIGVudW0gb2YgZmFjdG9ycyB0aGF0IG1heSBiZSB1c2VkIGZvciBtdWx0aWZhY3RvciBhdXRoZW50aWNhdGlvbi5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgRmFjdG9ySWQgPSB7XHJcbiAgICAvKiogUGhvbmUgYXMgc2Vjb25kIGZhY3RvciAqL1xyXG4gICAgUEhPTkU6ICdwaG9uZScsXHJcbiAgICBUT1RQOiAndG90cCdcclxufTtcclxuLyoqXHJcbiAqIEVudW1lcmF0aW9uIG9mIHN1cHBvcnRlZCBwcm92aWRlcnMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IFByb3ZpZGVySWQgPSB7XHJcbiAgICAvKiogRmFjZWJvb2sgcHJvdmlkZXIgSUQgKi9cclxuICAgIEZBQ0VCT09LOiAnZmFjZWJvb2suY29tJyxcclxuICAgIC8qKiBHaXRIdWIgcHJvdmlkZXIgSUQgKi9cclxuICAgIEdJVEhVQjogJ2dpdGh1Yi5jb20nLFxyXG4gICAgLyoqIEdvb2dsZSBwcm92aWRlciBJRCAqL1xyXG4gICAgR09PR0xFOiAnZ29vZ2xlLmNvbScsXHJcbiAgICAvKiogUGFzc3dvcmQgcHJvdmlkZXIgKi9cclxuICAgIFBBU1NXT1JEOiAncGFzc3dvcmQnLFxyXG4gICAgLyoqIFBob25lIHByb3ZpZGVyICovXHJcbiAgICBQSE9ORTogJ3Bob25lJyxcclxuICAgIC8qKiBUd2l0dGVyIHByb3ZpZGVyIElEICovXHJcbiAgICBUV0lUVEVSOiAndHdpdHRlci5jb20nXHJcbn07XHJcbi8qKlxyXG4gKiBFbnVtZXJhdGlvbiBvZiBzdXBwb3J0ZWQgc2lnbi1pbiBtZXRob2RzLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBTaWduSW5NZXRob2QgPSB7XHJcbiAgICAvKiogRW1haWwgbGluayBzaWduIGluIG1ldGhvZCAqL1xyXG4gICAgRU1BSUxfTElOSzogJ2VtYWlsTGluaycsXHJcbiAgICAvKiogRW1haWwvcGFzc3dvcmQgc2lnbiBpbiBtZXRob2QgKi9cclxuICAgIEVNQUlMX1BBU1NXT1JEOiAncGFzc3dvcmQnLFxyXG4gICAgLyoqIEZhY2Vib29rIHNpZ24gaW4gbWV0aG9kICovXHJcbiAgICBGQUNFQk9PSzogJ2ZhY2Vib29rLmNvbScsXHJcbiAgICAvKiogR2l0SHViIHNpZ24gaW4gbWV0aG9kICovXHJcbiAgICBHSVRIVUI6ICdnaXRodWIuY29tJyxcclxuICAgIC8qKiBHb29nbGUgc2lnbiBpbiBtZXRob2QgKi9cclxuICAgIEdPT0dMRTogJ2dvb2dsZS5jb20nLFxyXG4gICAgLyoqIFBob25lIHNpZ24gaW4gbWV0aG9kICovXHJcbiAgICBQSE9ORTogJ3Bob25lJyxcclxuICAgIC8qKiBUd2l0dGVyIHNpZ24gaW4gbWV0aG9kICovXHJcbiAgICBUV0lUVEVSOiAndHdpdHRlci5jb20nXHJcbn07XHJcbi8qKlxyXG4gKiBFbnVtZXJhdGlvbiBvZiBzdXBwb3J0ZWQgb3BlcmF0aW9uIHR5cGVzLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBPcGVyYXRpb25UeXBlID0ge1xyXG4gICAgLyoqIE9wZXJhdGlvbiBpbnZvbHZpbmcgbGlua2luZyBhbiBhZGRpdGlvbmFsIHByb3ZpZGVyIHRvIGFuIGFscmVhZHkgc2lnbmVkLWluIHVzZXIuICovXHJcbiAgICBMSU5LOiAnbGluaycsXHJcbiAgICAvKiogT3BlcmF0aW9uIGludm9sdmluZyB1c2luZyBhIHByb3ZpZGVyIHRvIHJlYXV0aGVudGljYXRlIGFuIGFscmVhZHkgc2lnbmVkLWluIHVzZXIuICovXHJcbiAgICBSRUFVVEhFTlRJQ0FURTogJ3JlYXV0aGVudGljYXRlJyxcclxuICAgIC8qKiBPcGVyYXRpb24gaW52b2x2aW5nIHNpZ25pbmcgaW4gYSB1c2VyLiAqL1xyXG4gICAgU0lHTl9JTjogJ3NpZ25JbidcclxufTtcclxuLyoqXHJcbiAqIEFuIGVudW1lcmF0aW9uIG9mIHRoZSBwb3NzaWJsZSBlbWFpbCBhY3Rpb24gdHlwZXMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IEFjdGlvbkNvZGVPcGVyYXRpb24gPSB7XHJcbiAgICAvKiogVGhlIGVtYWlsIGxpbmsgc2lnbi1pbiBhY3Rpb24uICovXHJcbiAgICBFTUFJTF9TSUdOSU46ICdFTUFJTF9TSUdOSU4nLFxyXG4gICAgLyoqIFRoZSBwYXNzd29yZCByZXNldCBhY3Rpb24uICovXHJcbiAgICBQQVNTV09SRF9SRVNFVDogJ1BBU1NXT1JEX1JFU0VUJyxcclxuICAgIC8qKiBUaGUgZW1haWwgcmV2b2NhdGlvbiBhY3Rpb24uICovXHJcbiAgICBSRUNPVkVSX0VNQUlMOiAnUkVDT1ZFUl9FTUFJTCcsXHJcbiAgICAvKiogVGhlIHJldmVydCBzZWNvbmQgZmFjdG9yIGFkZGl0aW9uIGVtYWlsIGFjdGlvbi4gKi9cclxuICAgIFJFVkVSVF9TRUNPTkRfRkFDVE9SX0FERElUSU9OOiAnUkVWRVJUX1NFQ09ORF9GQUNUT1JfQURESVRJT04nLFxyXG4gICAgLyoqIFRoZSByZXZlcnQgc2Vjb25kIGZhY3RvciBhZGRpdGlvbiBlbWFpbCBhY3Rpb24uICovXHJcbiAgICBWRVJJRllfQU5EX0NIQU5HRV9FTUFJTDogJ1ZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMJyxcclxuICAgIC8qKiBUaGUgZW1haWwgdmVyaWZpY2F0aW9uIGFjdGlvbi4gKi9cclxuICAgIFZFUklGWV9FTUFJTDogJ1ZFUklGWV9FTUFJTCdcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gX2RlYnVnRXJyb3JNYXAoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIFtcImFkbWluLXJlc3RyaWN0ZWQtb3BlcmF0aW9uXCIgLyogQXV0aEVycm9yQ29kZS5BRE1JTl9PTkxZX09QRVJBVElPTiAqL106ICdUaGlzIG9wZXJhdGlvbiBpcyByZXN0cmljdGVkIHRvIGFkbWluaXN0cmF0b3JzIG9ubHkuJyxcclxuICAgICAgICBbXCJhcmd1bWVudC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuQVJHVU1FTlRfRVJST1IgKi9dOiAnJyxcclxuICAgICAgICBbXCJhcHAtbm90LWF1dGhvcml6ZWRcIiAvKiBBdXRoRXJyb3JDb2RlLkFQUF9OT1RfQVVUSE9SSVpFRCAqL106IFwiVGhpcyBhcHAsIGlkZW50aWZpZWQgYnkgdGhlIGRvbWFpbiB3aGVyZSBpdCdzIGhvc3RlZCwgaXMgbm90IFwiICtcclxuICAgICAgICAgICAgJ2F1dGhvcml6ZWQgdG8gdXNlIEZpcmViYXNlIEF1dGhlbnRpY2F0aW9uIHdpdGggdGhlIHByb3ZpZGVkIEFQSSBrZXkuICcgK1xyXG4gICAgICAgICAgICAnUmV2aWV3IHlvdXIga2V5IGNvbmZpZ3VyYXRpb24gaW4gdGhlIEdvb2dsZSBBUEkgY29uc29sZS4nLFxyXG4gICAgICAgIFtcImFwcC1ub3QtaW5zdGFsbGVkXCIgLyogQXV0aEVycm9yQ29kZS5BUFBfTk9UX0lOU1RBTExFRCAqL106ICdUaGUgcmVxdWVzdGVkIG1vYmlsZSBhcHBsaWNhdGlvbiBjb3JyZXNwb25kaW5nIHRvIHRoZSBpZGVudGlmaWVyICgnICtcclxuICAgICAgICAgICAgJ0FuZHJvaWQgcGFja2FnZSBuYW1lIG9yIGlPUyBidW5kbGUgSUQpIHByb3ZpZGVkIGlzIG5vdCBpbnN0YWxsZWQgb24gJyArXHJcbiAgICAgICAgICAgICd0aGlzIGRldmljZS4nLFxyXG4gICAgICAgIFtcImNhcHRjaGEtY2hlY2stZmFpbGVkXCIgLyogQXV0aEVycm9yQ29kZS5DQVBUQ0hBX0NIRUNLX0ZBSUxFRCAqL106ICdUaGUgcmVDQVBUQ0hBIHJlc3BvbnNlIHRva2VuIHByb3ZpZGVkIGlzIGVpdGhlciBpbnZhbGlkLCBleHBpcmVkLCAnICtcclxuICAgICAgICAgICAgJ2FscmVhZHkgdXNlZCBvciB0aGUgZG9tYWluIGFzc29jaWF0ZWQgd2l0aCBpdCBkb2VzIG5vdCBtYXRjaCB0aGUgbGlzdCAnICtcclxuICAgICAgICAgICAgJ29mIHdoaXRlbGlzdGVkIGRvbWFpbnMuJyxcclxuICAgICAgICBbXCJjb2RlLWV4cGlyZWRcIiAvKiBBdXRoRXJyb3JDb2RlLkNPREVfRVhQSVJFRCAqL106ICdUaGUgU01TIGNvZGUgaGFzIGV4cGlyZWQuIFBsZWFzZSByZS1zZW5kIHRoZSB2ZXJpZmljYXRpb24gY29kZSB0byB0cnkgJyArXHJcbiAgICAgICAgICAgICdhZ2Fpbi4nLFxyXG4gICAgICAgIFtcImNvcmRvdmEtbm90LXJlYWR5XCIgLyogQXV0aEVycm9yQ29kZS5DT1JET1ZBX05PVF9SRUFEWSAqL106ICdDb3Jkb3ZhIGZyYW1ld29yayBpcyBub3QgcmVhZHkuJyxcclxuICAgICAgICBbXCJjb3JzLXVuc3VwcG9ydGVkXCIgLyogQXV0aEVycm9yQ29kZS5DT1JTX1VOU1VQUE9SVEVEICovXTogJ1RoaXMgYnJvd3NlciBpcyBub3Qgc3VwcG9ydGVkLicsXHJcbiAgICAgICAgW1wiY3JlZGVudGlhbC1hbHJlYWR5LWluLXVzZVwiIC8qIEF1dGhFcnJvckNvZGUuQ1JFREVOVElBTF9BTFJFQURZX0lOX1VTRSAqL106ICdUaGlzIGNyZWRlbnRpYWwgaXMgYWxyZWFkeSBhc3NvY2lhdGVkIHdpdGggYSBkaWZmZXJlbnQgdXNlciBhY2NvdW50LicsXHJcbiAgICAgICAgW1wiY3VzdG9tLXRva2VuLW1pc21hdGNoXCIgLyogQXV0aEVycm9yQ29kZS5DUkVERU5USUFMX01JU01BVENIICovXTogJ1RoZSBjdXN0b20gdG9rZW4gY29ycmVzcG9uZHMgdG8gYSBkaWZmZXJlbnQgYXVkaWVuY2UuJyxcclxuICAgICAgICBbXCJyZXF1aXJlcy1yZWNlbnQtbG9naW5cIiAvKiBBdXRoRXJyb3JDb2RlLkNSRURFTlRJQUxfVE9PX09MRF9MT0dJTl9BR0FJTiAqL106ICdUaGlzIG9wZXJhdGlvbiBpcyBzZW5zaXRpdmUgYW5kIHJlcXVpcmVzIHJlY2VudCBhdXRoZW50aWNhdGlvbi4gTG9nIGluICcgK1xyXG4gICAgICAgICAgICAnYWdhaW4gYmVmb3JlIHJldHJ5aW5nIHRoaXMgcmVxdWVzdC4nLFxyXG4gICAgICAgIFtcImRlcGVuZGVudC1zZGstaW5pdGlhbGl6ZWQtYmVmb3JlLWF1dGhcIiAvKiBBdXRoRXJyb3JDb2RlLkRFUEVOREVOVF9TREtfSU5JVF9CRUZPUkVfQVVUSCAqL106ICdBbm90aGVyIEZpcmViYXNlIFNESyB3YXMgaW5pdGlhbGl6ZWQgYW5kIGlzIHRyeWluZyB0byB1c2UgQXV0aCBiZWZvcmUgQXV0aCBpcyAnICtcclxuICAgICAgICAgICAgJ2luaXRpYWxpemVkLiBQbGVhc2UgYmUgc3VyZSB0byBjYWxsIGBpbml0aWFsaXplQXV0aGAgb3IgYGdldEF1dGhgIGJlZm9yZSAnICtcclxuICAgICAgICAgICAgJ3N0YXJ0aW5nIGFueSBvdGhlciBGaXJlYmFzZSBTREsuJyxcclxuICAgICAgICBbXCJkeW5hbWljLWxpbmstbm90LWFjdGl2YXRlZFwiIC8qIEF1dGhFcnJvckNvZGUuRFlOQU1JQ19MSU5LX05PVF9BQ1RJVkFURUQgKi9dOiAnUGxlYXNlIGFjdGl2YXRlIER5bmFtaWMgTGlua3MgaW4gdGhlIEZpcmViYXNlIENvbnNvbGUgYW5kIGFncmVlIHRvIHRoZSB0ZXJtcyBhbmQgJyArXHJcbiAgICAgICAgICAgICdjb25kaXRpb25zLicsXHJcbiAgICAgICAgW1wiZW1haWwtY2hhbmdlLW5lZWRzLXZlcmlmaWNhdGlvblwiIC8qIEF1dGhFcnJvckNvZGUuRU1BSUxfQ0hBTkdFX05FRURTX1ZFUklGSUNBVElPTiAqL106ICdNdWx0aS1mYWN0b3IgdXNlcnMgbXVzdCBhbHdheXMgaGF2ZSBhIHZlcmlmaWVkIGVtYWlsLicsXHJcbiAgICAgICAgW1wiZW1haWwtYWxyZWFkeS1pbi11c2VcIiAvKiBBdXRoRXJyb3JDb2RlLkVNQUlMX0VYSVNUUyAqL106ICdUaGUgZW1haWwgYWRkcmVzcyBpcyBhbHJlYWR5IGluIHVzZSBieSBhbm90aGVyIGFjY291bnQuJyxcclxuICAgICAgICBbXCJlbXVsYXRvci1jb25maWctZmFpbGVkXCIgLyogQXV0aEVycm9yQ29kZS5FTVVMQVRPUl9DT05GSUdfRkFJTEVEICovXTogJ0F1dGggaW5zdGFuY2UgaGFzIGFscmVhZHkgYmVlbiB1c2VkIHRvIG1ha2UgYSBuZXR3b3JrIGNhbGwuIEF1dGggY2FuICcgK1xyXG4gICAgICAgICAgICAnbm8gbG9uZ2VyIGJlIGNvbmZpZ3VyZWQgdG8gdXNlIHRoZSBlbXVsYXRvci4gVHJ5IGNhbGxpbmcgJyArXHJcbiAgICAgICAgICAgICdcImNvbm5lY3RBdXRoRW11bGF0b3IoKVwiIHNvb25lci4nLFxyXG4gICAgICAgIFtcImV4cGlyZWQtYWN0aW9uLWNvZGVcIiAvKiBBdXRoRXJyb3JDb2RlLkVYUElSRURfT09CX0NPREUgKi9dOiAnVGhlIGFjdGlvbiBjb2RlIGhhcyBleHBpcmVkLicsXHJcbiAgICAgICAgW1wiY2FuY2VsbGVkLXBvcHVwLXJlcXVlc3RcIiAvKiBBdXRoRXJyb3JDb2RlLkVYUElSRURfUE9QVVBfUkVRVUVTVCAqL106ICdUaGlzIG9wZXJhdGlvbiBoYXMgYmVlbiBjYW5jZWxsZWQgZHVlIHRvIGFub3RoZXIgY29uZmxpY3RpbmcgcG9wdXAgYmVpbmcgb3BlbmVkLicsXHJcbiAgICAgICAgW1wiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovXTogJ0FuIGludGVybmFsIEF1dGhFcnJvciBoYXMgb2NjdXJyZWQuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWFwcC1jcmVkZW50aWFsXCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX0FQUF9DUkVERU5USUFMICovXTogJ1RoZSBwaG9uZSB2ZXJpZmljYXRpb24gcmVxdWVzdCBjb250YWlucyBhbiBpbnZhbGlkIGFwcGxpY2F0aW9uIHZlcmlmaWVyLicgK1xyXG4gICAgICAgICAgICAnIFRoZSByZUNBUFRDSEEgdG9rZW4gcmVzcG9uc2UgaXMgZWl0aGVyIGludmFsaWQgb3IgZXhwaXJlZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtYXBwLWlkXCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX0FQUF9JRCAqL106ICdUaGUgbW9iaWxlIGFwcCBpZGVudGlmaWVyIGlzIG5vdCByZWdpc3RlZCBmb3IgdGhlIGN1cnJlbnQgcHJvamVjdC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtdXNlci10b2tlblwiIC8qIEF1dGhFcnJvckNvZGUuSU5WQUxJRF9BVVRIICovXTogXCJUaGlzIHVzZXIncyBjcmVkZW50aWFsIGlzbid0IHZhbGlkIGZvciB0aGlzIHByb2plY3QuIFRoaXMgY2FuIGhhcHBlbiBcIiArXHJcbiAgICAgICAgICAgIFwiaWYgdGhlIHVzZXIncyB0b2tlbiBoYXMgYmVlbiB0YW1wZXJlZCB3aXRoLCBvciBpZiB0aGUgdXNlciBpc24ndCBmb3IgXCIgK1xyXG4gICAgICAgICAgICAndGhlIHByb2plY3QgYXNzb2NpYXRlZCB3aXRoIHRoaXMgQVBJIGtleS4nLFxyXG4gICAgICAgIFtcImludmFsaWQtYXV0aC1ldmVudFwiIC8qIEF1dGhFcnJvckNvZGUuSU5WQUxJRF9BVVRIX0VWRU5UICovXTogJ0FuIGludGVybmFsIEF1dGhFcnJvciBoYXMgb2NjdXJyZWQuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLXZlcmlmaWNhdGlvbi1jb2RlXCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX0NPREUgKi9dOiAnVGhlIFNNUyB2ZXJpZmljYXRpb24gY29kZSB1c2VkIHRvIGNyZWF0ZSB0aGUgcGhvbmUgYXV0aCBjcmVkZW50aWFsIGlzICcgK1xyXG4gICAgICAgICAgICAnaW52YWxpZC4gUGxlYXNlIHJlc2VuZCB0aGUgdmVyaWZpY2F0aW9uIGNvZGUgc21zIGFuZCBiZSBzdXJlIHRvIHVzZSB0aGUgJyArXHJcbiAgICAgICAgICAgICd2ZXJpZmljYXRpb24gY29kZSBwcm92aWRlZCBieSB0aGUgdXNlci4nLFxyXG4gICAgICAgIFtcImludmFsaWQtY29udGludWUtdXJpXCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX0NPTlRJTlVFX1VSSSAqL106ICdUaGUgY29udGludWUgVVJMIHByb3ZpZGVkIGluIHRoZSByZXF1ZXN0IGlzIGludmFsaWQuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWNvcmRvdmEtY29uZmlndXJhdGlvblwiIC8qIEF1dGhFcnJvckNvZGUuSU5WQUxJRF9DT1JET1ZBX0NPTkZJR1VSQVRJT04gKi9dOiAnVGhlIGZvbGxvd2luZyBDb3Jkb3ZhIHBsdWdpbnMgbXVzdCBiZSBpbnN0YWxsZWQgdG8gZW5hYmxlIE9BdXRoIHNpZ24taW46ICcgK1xyXG4gICAgICAgICAgICAnY29yZG92YS1wbHVnaW4tYnVpbGRpbmZvLCBjb3Jkb3ZhLXVuaXZlcnNhbC1saW5rcy1wbHVnaW4sICcgK1xyXG4gICAgICAgICAgICAnY29yZG92YS1wbHVnaW4tYnJvd3NlcnRhYiwgY29yZG92YS1wbHVnaW4taW5hcHBicm93c2VyIGFuZCAnICtcclxuICAgICAgICAgICAgJ2NvcmRvdmEtcGx1Z2luLWN1c3RvbXVybHNjaGVtZS4nLFxyXG4gICAgICAgIFtcImludmFsaWQtY3VzdG9tLXRva2VuXCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX0NVU1RPTV9UT0tFTiAqL106ICdUaGUgY3VzdG9tIHRva2VuIGZvcm1hdCBpcyBpbmNvcnJlY3QuIFBsZWFzZSBjaGVjayB0aGUgZG9jdW1lbnRhdGlvbi4nLFxyXG4gICAgICAgIFtcImludmFsaWQtZHluYW1pYy1saW5rLWRvbWFpblwiIC8qIEF1dGhFcnJvckNvZGUuSU5WQUxJRF9EWU5BTUlDX0xJTktfRE9NQUlOICovXTogJ1RoZSBwcm92aWRlZCBkeW5hbWljIGxpbmsgZG9tYWluIGlzIG5vdCBjb25maWd1cmVkIG9yIGF1dGhvcml6ZWQgZm9yIHRoZSBjdXJyZW50IHByb2plY3QuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWVtYWlsXCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX0VNQUlMICovXTogJ1RoZSBlbWFpbCBhZGRyZXNzIGlzIGJhZGx5IGZvcm1hdHRlZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtZW11bGF0b3Itc2NoZW1lXCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX0VNVUxBVE9SX1NDSEVNRSAqL106ICdFbXVsYXRvciBVUkwgbXVzdCBzdGFydCB3aXRoIGEgdmFsaWQgc2NoZW1lIChodHRwOi8vIG9yIGh0dHBzOi8vKS4nLFxyXG4gICAgICAgIFtcImludmFsaWQtYXBpLWtleVwiIC8qIEF1dGhFcnJvckNvZGUuSU5WQUxJRF9BUElfS0VZICovXTogJ1lvdXIgQVBJIGtleSBpcyBpbnZhbGlkLCBwbGVhc2UgY2hlY2sgeW91IGhhdmUgY29waWVkIGl0IGNvcnJlY3RseS4nLFxyXG4gICAgICAgIFtcImludmFsaWQtY2VydC1oYXNoXCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX0NFUlRfSEFTSCAqL106ICdUaGUgU0hBLTEgY2VydGlmaWNhdGUgaGFzaCBwcm92aWRlZCBpcyBpbnZhbGlkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1jcmVkZW50aWFsXCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX0NSRURFTlRJQUwgKi9dOiAnVGhlIHN1cHBsaWVkIGF1dGggY3JlZGVudGlhbCBpcyBpbmNvcnJlY3QsIG1hbGZvcm1lZCBvciBoYXMgZXhwaXJlZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtbWVzc2FnZS1wYXlsb2FkXCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX01FU1NBR0VfUEFZTE9BRCAqL106ICdUaGUgZW1haWwgdGVtcGxhdGUgY29ycmVzcG9uZGluZyB0byB0aGlzIGFjdGlvbiBjb250YWlucyBpbnZhbGlkIGNoYXJhY3RlcnMgaW4gaXRzIG1lc3NhZ2UuICcgK1xyXG4gICAgICAgICAgICAnUGxlYXNlIGZpeCBieSBnb2luZyB0byB0aGUgQXV0aCBlbWFpbCB0ZW1wbGF0ZXMgc2VjdGlvbiBpbiB0aGUgRmlyZWJhc2UgQ29uc29sZS4nLFxyXG4gICAgICAgIFtcImludmFsaWQtbXVsdGktZmFjdG9yLXNlc3Npb25cIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfTUZBX1NFU1NJT04gKi9dOiAnVGhlIHJlcXVlc3QgZG9lcyBub3QgY29udGFpbiBhIHZhbGlkIHByb29mIG9mIGZpcnN0IGZhY3RvciBzdWNjZXNzZnVsIHNpZ24taW4uJyxcclxuICAgICAgICBbXCJpbnZhbGlkLW9hdXRoLXByb3ZpZGVyXCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX09BVVRIX1BST1ZJREVSICovXTogJ0VtYWlsQXV0aFByb3ZpZGVyIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgb3BlcmF0aW9uLiBUaGlzIG9wZXJhdGlvbiAnICtcclxuICAgICAgICAgICAgJ29ubHkgc3VwcG9ydHMgT0F1dGggcHJvdmlkZXJzLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1vYXV0aC1jbGllbnQtaWRcIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfT0FVVEhfQ0xJRU5UX0lEICovXTogJ1RoZSBPQXV0aCBjbGllbnQgSUQgcHJvdmlkZWQgaXMgZWl0aGVyIGludmFsaWQgb3IgZG9lcyBub3QgbWF0Y2ggdGhlICcgK1xyXG4gICAgICAgICAgICAnc3BlY2lmaWVkIEFQSSBrZXkuJyxcclxuICAgICAgICBbXCJ1bmF1dGhvcml6ZWQtZG9tYWluXCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX09SSUdJTiAqL106ICdUaGlzIGRvbWFpbiBpcyBub3QgYXV0aG9yaXplZCBmb3IgT0F1dGggb3BlcmF0aW9ucyBmb3IgeW91ciBGaXJlYmFzZSAnICtcclxuICAgICAgICAgICAgJ3Byb2plY3QuIEVkaXQgdGhlIGxpc3Qgb2YgYXV0aG9yaXplZCBkb21haW5zIGZyb20gdGhlIEZpcmViYXNlIGNvbnNvbGUuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWFjdGlvbi1jb2RlXCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX09PQl9DT0RFICovXTogJ1RoZSBhY3Rpb24gY29kZSBpcyBpbnZhbGlkLiBUaGlzIGNhbiBoYXBwZW4gaWYgdGhlIGNvZGUgaXMgbWFsZm9ybWVkLCAnICtcclxuICAgICAgICAgICAgJ2V4cGlyZWQsIG9yIGhhcyBhbHJlYWR5IGJlZW4gdXNlZC4nLFxyXG4gICAgICAgIFtcIndyb25nLXBhc3N3b3JkXCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX1BBU1NXT1JEICovXTogJ1RoZSBwYXNzd29yZCBpcyBpbnZhbGlkIG9yIHRoZSB1c2VyIGRvZXMgbm90IGhhdmUgYSBwYXNzd29yZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtcGVyc2lzdGVuY2UtdHlwZVwiIC8qIEF1dGhFcnJvckNvZGUuSU5WQUxJRF9QRVJTSVNURU5DRSAqL106ICdUaGUgc3BlY2lmaWVkIHBlcnNpc3RlbmNlIHR5cGUgaXMgaW52YWxpZC4gSXQgY2FuIG9ubHkgYmUgbG9jYWwsIHNlc3Npb24gb3Igbm9uZS4nLFxyXG4gICAgICAgIFtcImludmFsaWQtcGhvbmUtbnVtYmVyXCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX1BIT05FX05VTUJFUiAqL106ICdUaGUgZm9ybWF0IG9mIHRoZSBwaG9uZSBudW1iZXIgcHJvdmlkZWQgaXMgaW5jb3JyZWN0LiBQbGVhc2UgZW50ZXIgdGhlICcgK1xyXG4gICAgICAgICAgICAncGhvbmUgbnVtYmVyIGluIGEgZm9ybWF0IHRoYXQgY2FuIGJlIHBhcnNlZCBpbnRvIEUuMTY0IGZvcm1hdC4gRS4xNjQgJyArXHJcbiAgICAgICAgICAgICdwaG9uZSBudW1iZXJzIGFyZSB3cml0dGVuIGluIHRoZSBmb3JtYXQgWytdW2NvdW50cnkgY29kZV1bc3Vic2NyaWJlciAnICtcclxuICAgICAgICAgICAgJ251bWJlciBpbmNsdWRpbmcgYXJlYSBjb2RlXS4nLFxyXG4gICAgICAgIFtcImludmFsaWQtcHJvdmlkZXItaWRcIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfUFJPVklERVJfSUQgKi9dOiAnVGhlIHNwZWNpZmllZCBwcm92aWRlciBJRCBpcyBpbnZhbGlkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1yZWNpcGllbnQtZW1haWxcIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfUkVDSVBJRU5UX0VNQUlMICovXTogJ1RoZSBlbWFpbCBjb3JyZXNwb25kaW5nIHRvIHRoaXMgYWN0aW9uIGZhaWxlZCB0byBzZW5kIGFzIHRoZSBwcm92aWRlZCAnICtcclxuICAgICAgICAgICAgJ3JlY2lwaWVudCBlbWFpbCBhZGRyZXNzIGlzIGludmFsaWQuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLXNlbmRlclwiIC8qIEF1dGhFcnJvckNvZGUuSU5WQUxJRF9TRU5ERVIgKi9dOiAnVGhlIGVtYWlsIHRlbXBsYXRlIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyBhY3Rpb24gY29udGFpbnMgYW4gaW52YWxpZCBzZW5kZXIgZW1haWwgb3IgbmFtZS4gJyArXHJcbiAgICAgICAgICAgICdQbGVhc2UgZml4IGJ5IGdvaW5nIHRvIHRoZSBBdXRoIGVtYWlsIHRlbXBsYXRlcyBzZWN0aW9uIGluIHRoZSBGaXJlYmFzZSBDb25zb2xlLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC12ZXJpZmljYXRpb24taWRcIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfU0VTU0lPTl9JTkZPICovXTogJ1RoZSB2ZXJpZmljYXRpb24gSUQgdXNlZCB0byBjcmVhdGUgdGhlIHBob25lIGF1dGggY3JlZGVudGlhbCBpcyBpbnZhbGlkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC10ZW5hbnQtaWRcIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfVEVOQU5UX0lEICovXTogXCJUaGUgQXV0aCBpbnN0YW5jZSdzIHRlbmFudCBJRCBpcyBpbnZhbGlkLlwiLFxyXG4gICAgICAgIFtcImxvZ2luLWJsb2NrZWRcIiAvKiBBdXRoRXJyb3JDb2RlLkxPR0lOX0JMT0NLRUQgKi9dOiAnTG9naW4gYmxvY2tlZCBieSB1c2VyLXByb3ZpZGVkIG1ldGhvZDogeyRvcmlnaW5hbE1lc3NhZ2V9JyxcclxuICAgICAgICBbXCJtaXNzaW5nLWFuZHJvaWQtcGtnLW5hbWVcIiAvKiBBdXRoRXJyb3JDb2RlLk1JU1NJTkdfQU5EUk9JRF9QQUNLQUdFX05BTUUgKi9dOiAnQW4gQW5kcm9pZCBQYWNrYWdlIE5hbWUgbXVzdCBiZSBwcm92aWRlZCBpZiB0aGUgQW5kcm9pZCBBcHAgaXMgcmVxdWlyZWQgdG8gYmUgaW5zdGFsbGVkLicsXHJcbiAgICAgICAgW1wiYXV0aC1kb21haW4tY29uZmlnLXJlcXVpcmVkXCIgLyogQXV0aEVycm9yQ29kZS5NSVNTSU5HX0FVVEhfRE9NQUlOICovXTogJ0JlIHN1cmUgdG8gaW5jbHVkZSBhdXRoRG9tYWluIHdoZW4gY2FsbGluZyBmaXJlYmFzZS5pbml0aWFsaXplQXBwKCksICcgK1xyXG4gICAgICAgICAgICAnYnkgZm9sbG93aW5nIHRoZSBpbnN0cnVjdGlvbnMgaW4gdGhlIEZpcmViYXNlIGNvbnNvbGUuJyxcclxuICAgICAgICBbXCJtaXNzaW5nLWFwcC1jcmVkZW50aWFsXCIgLyogQXV0aEVycm9yQ29kZS5NSVNTSU5HX0FQUF9DUkVERU5USUFMICovXTogJ1RoZSBwaG9uZSB2ZXJpZmljYXRpb24gcmVxdWVzdCBpcyBtaXNzaW5nIGFuIGFwcGxpY2F0aW9uIHZlcmlmaWVyICcgK1xyXG4gICAgICAgICAgICAnYXNzZXJ0aW9uLiBBIHJlQ0FQVENIQSByZXNwb25zZSB0b2tlbiBuZWVkcyB0byBiZSBwcm92aWRlZC4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctdmVyaWZpY2F0aW9uLWNvZGVcIiAvKiBBdXRoRXJyb3JDb2RlLk1JU1NJTkdfQ09ERSAqL106ICdUaGUgcGhvbmUgYXV0aCBjcmVkZW50aWFsIHdhcyBjcmVhdGVkIHdpdGggYW4gZW1wdHkgU01TIHZlcmlmaWNhdGlvbiBjb2RlLicsXHJcbiAgICAgICAgW1wibWlzc2luZy1jb250aW51ZS11cmlcIiAvKiBBdXRoRXJyb3JDb2RlLk1JU1NJTkdfQ09OVElOVUVfVVJJICovXTogJ0EgY29udGludWUgVVJMIG11c3QgYmUgcHJvdmlkZWQgaW4gdGhlIHJlcXVlc3QuJyxcclxuICAgICAgICBbXCJtaXNzaW5nLWlmcmFtZS1zdGFydFwiIC8qIEF1dGhFcnJvckNvZGUuTUlTU0lOR19JRlJBTUVfU1RBUlQgKi9dOiAnQW4gaW50ZXJuYWwgQXV0aEVycm9yIGhhcyBvY2N1cnJlZC4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctaW9zLWJ1bmRsZS1pZFwiIC8qIEF1dGhFcnJvckNvZGUuTUlTU0lOR19JT1NfQlVORExFX0lEICovXTogJ0FuIGlPUyBCdW5kbGUgSUQgbXVzdCBiZSBwcm92aWRlZCBpZiBhbiBBcHAgU3RvcmUgSUQgaXMgcHJvdmlkZWQuJyxcclxuICAgICAgICBbXCJtaXNzaW5nLW9yLWludmFsaWQtbm9uY2VcIiAvKiBBdXRoRXJyb3JDb2RlLk1JU1NJTkdfT1JfSU5WQUxJRF9OT05DRSAqL106ICdUaGUgcmVxdWVzdCBkb2VzIG5vdCBjb250YWluIGEgdmFsaWQgbm9uY2UuIFRoaXMgY2FuIG9jY3VyIGlmIHRoZSAnICtcclxuICAgICAgICAgICAgJ1NIQS0yNTYgaGFzaCBvZiB0aGUgcHJvdmlkZWQgcmF3IG5vbmNlIGRvZXMgbm90IG1hdGNoIHRoZSBoYXNoZWQgbm9uY2UgJyArXHJcbiAgICAgICAgICAgICdpbiB0aGUgSUQgdG9rZW4gcGF5bG9hZC4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctcGFzc3dvcmRcIiAvKiBBdXRoRXJyb3JDb2RlLk1JU1NJTkdfUEFTU1dPUkQgKi9dOiAnQSBub24tZW1wdHkgcGFzc3dvcmQgbXVzdCBiZSBwcm92aWRlZCcsXHJcbiAgICAgICAgW1wibWlzc2luZy1tdWx0aS1mYWN0b3ItaW5mb1wiIC8qIEF1dGhFcnJvckNvZGUuTUlTU0lOR19NRkFfSU5GTyAqL106ICdObyBzZWNvbmQgZmFjdG9yIGlkZW50aWZpZXIgaXMgcHJvdmlkZWQuJyxcclxuICAgICAgICBbXCJtaXNzaW5nLW11bHRpLWZhY3Rvci1zZXNzaW9uXCIgLyogQXV0aEVycm9yQ29kZS5NSVNTSU5HX01GQV9TRVNTSU9OICovXTogJ1RoZSByZXF1ZXN0IGlzIG1pc3NpbmcgcHJvb2Ygb2YgZmlyc3QgZmFjdG9yIHN1Y2Nlc3NmdWwgc2lnbi1pbi4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctcGhvbmUtbnVtYmVyXCIgLyogQXV0aEVycm9yQ29kZS5NSVNTSU5HX1BIT05FX05VTUJFUiAqL106ICdUbyBzZW5kIHZlcmlmaWNhdGlvbiBjb2RlcywgcHJvdmlkZSBhIHBob25lIG51bWJlciBmb3IgdGhlIHJlY2lwaWVudC4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctdmVyaWZpY2F0aW9uLWlkXCIgLyogQXV0aEVycm9yQ29kZS5NSVNTSU5HX1NFU1NJT05fSU5GTyAqL106ICdUaGUgcGhvbmUgYXV0aCBjcmVkZW50aWFsIHdhcyBjcmVhdGVkIHdpdGggYW4gZW1wdHkgdmVyaWZpY2F0aW9uIElELicsXHJcbiAgICAgICAgW1wiYXBwLWRlbGV0ZWRcIiAvKiBBdXRoRXJyb3JDb2RlLk1PRFVMRV9ERVNUUk9ZRUQgKi9dOiAnVGhpcyBpbnN0YW5jZSBvZiBGaXJlYmFzZUFwcCBoYXMgYmVlbiBkZWxldGVkLicsXHJcbiAgICAgICAgW1wibXVsdGktZmFjdG9yLWluZm8tbm90LWZvdW5kXCIgLyogQXV0aEVycm9yQ29kZS5NRkFfSU5GT19OT1RfRk9VTkQgKi9dOiAnVGhlIHVzZXIgZG9lcyBub3QgaGF2ZSBhIHNlY29uZCBmYWN0b3IgbWF0Y2hpbmcgdGhlIGlkZW50aWZpZXIgcHJvdmlkZWQuJyxcclxuICAgICAgICBbXCJtdWx0aS1mYWN0b3ItYXV0aC1yZXF1aXJlZFwiIC8qIEF1dGhFcnJvckNvZGUuTUZBX1JFUVVJUkVEICovXTogJ1Byb29mIG9mIG93bmVyc2hpcCBvZiBhIHNlY29uZCBmYWN0b3IgaXMgcmVxdWlyZWQgdG8gY29tcGxldGUgc2lnbi1pbi4nLFxyXG4gICAgICAgIFtcImFjY291bnQtZXhpc3RzLXdpdGgtZGlmZmVyZW50LWNyZWRlbnRpYWxcIiAvKiBBdXRoRXJyb3JDb2RlLk5FRURfQ09ORklSTUFUSU9OICovXTogJ0FuIGFjY291bnQgYWxyZWFkeSBleGlzdHMgd2l0aCB0aGUgc2FtZSBlbWFpbCBhZGRyZXNzIGJ1dCBkaWZmZXJlbnQgJyArXHJcbiAgICAgICAgICAgICdzaWduLWluIGNyZWRlbnRpYWxzLiBTaWduIGluIHVzaW5nIGEgcHJvdmlkZXIgYXNzb2NpYXRlZCB3aXRoIHRoaXMgJyArXHJcbiAgICAgICAgICAgICdlbWFpbCBhZGRyZXNzLicsXHJcbiAgICAgICAgW1wibmV0d29yay1yZXF1ZXN0LWZhaWxlZFwiIC8qIEF1dGhFcnJvckNvZGUuTkVUV09SS19SRVFVRVNUX0ZBSUxFRCAqL106ICdBIG5ldHdvcmsgQXV0aEVycm9yIChzdWNoIGFzIHRpbWVvdXQsIGludGVycnVwdGVkIGNvbm5lY3Rpb24gb3IgdW5yZWFjaGFibGUgaG9zdCkgaGFzIG9jY3VycmVkLicsXHJcbiAgICAgICAgW1wibm8tYXV0aC1ldmVudFwiIC8qIEF1dGhFcnJvckNvZGUuTk9fQVVUSF9FVkVOVCAqL106ICdBbiBpbnRlcm5hbCBBdXRoRXJyb3IgaGFzIG9jY3VycmVkLicsXHJcbiAgICAgICAgW1wibm8tc3VjaC1wcm92aWRlclwiIC8qIEF1dGhFcnJvckNvZGUuTk9fU1VDSF9QUk9WSURFUiAqL106ICdVc2VyIHdhcyBub3QgbGlua2VkIHRvIGFuIGFjY291bnQgd2l0aCB0aGUgZ2l2ZW4gcHJvdmlkZXIuJyxcclxuICAgICAgICBbXCJudWxsLXVzZXJcIiAvKiBBdXRoRXJyb3JDb2RlLk5VTExfVVNFUiAqL106ICdBIG51bGwgdXNlciBvYmplY3Qgd2FzIHByb3ZpZGVkIGFzIHRoZSBhcmd1bWVudCBmb3IgYW4gb3BlcmF0aW9uIHdoaWNoICcgK1xyXG4gICAgICAgICAgICAncmVxdWlyZXMgYSBub24tbnVsbCB1c2VyIG9iamVjdC4nLFxyXG4gICAgICAgIFtcIm9wZXJhdGlvbi1ub3QtYWxsb3dlZFwiIC8qIEF1dGhFcnJvckNvZGUuT1BFUkFUSU9OX05PVF9BTExPV0VEICovXTogJ1RoZSBnaXZlbiBzaWduLWluIHByb3ZpZGVyIGlzIGRpc2FibGVkIGZvciB0aGlzIEZpcmViYXNlIHByb2plY3QuICcgK1xyXG4gICAgICAgICAgICAnRW5hYmxlIGl0IGluIHRoZSBGaXJlYmFzZSBjb25zb2xlLCB1bmRlciB0aGUgc2lnbi1pbiBtZXRob2QgdGFiIG9mIHRoZSAnICtcclxuICAgICAgICAgICAgJ0F1dGggc2VjdGlvbi4nLFxyXG4gICAgICAgIFtcIm9wZXJhdGlvbi1ub3Qtc3VwcG9ydGVkLWluLXRoaXMtZW52aXJvbm1lbnRcIiAvKiBBdXRoRXJyb3JDb2RlLk9QRVJBVElPTl9OT1RfU1VQUE9SVEVEICovXTogJ1RoaXMgb3BlcmF0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhlIGVudmlyb25tZW50IHRoaXMgYXBwbGljYXRpb24gaXMgJyArXHJcbiAgICAgICAgICAgICdydW5uaW5nIG9uLiBcImxvY2F0aW9uLnByb3RvY29sXCIgbXVzdCBiZSBodHRwLCBodHRwcyBvciBjaHJvbWUtZXh0ZW5zaW9uJyArXHJcbiAgICAgICAgICAgICcgYW5kIHdlYiBzdG9yYWdlIG11c3QgYmUgZW5hYmxlZC4nLFxyXG4gICAgICAgIFtcInBvcHVwLWJsb2NrZWRcIiAvKiBBdXRoRXJyb3JDb2RlLlBPUFVQX0JMT0NLRUQgKi9dOiAnVW5hYmxlIHRvIGVzdGFibGlzaCBhIGNvbm5lY3Rpb24gd2l0aCB0aGUgcG9wdXAuIEl0IG1heSBoYXZlIGJlZW4gYmxvY2tlZCBieSB0aGUgYnJvd3Nlci4nLFxyXG4gICAgICAgIFtcInBvcHVwLWNsb3NlZC1ieS11c2VyXCIgLyogQXV0aEVycm9yQ29kZS5QT1BVUF9DTE9TRURfQllfVVNFUiAqL106ICdUaGUgcG9wdXAgaGFzIGJlZW4gY2xvc2VkIGJ5IHRoZSB1c2VyIGJlZm9yZSBmaW5hbGl6aW5nIHRoZSBvcGVyYXRpb24uJyxcclxuICAgICAgICBbXCJwcm92aWRlci1hbHJlYWR5LWxpbmtlZFwiIC8qIEF1dGhFcnJvckNvZGUuUFJPVklERVJfQUxSRUFEWV9MSU5LRUQgKi9dOiAnVXNlciBjYW4gb25seSBiZSBsaW5rZWQgdG8gb25lIGlkZW50aXR5IGZvciB0aGUgZ2l2ZW4gcHJvdmlkZXIuJyxcclxuICAgICAgICBbXCJxdW90YS1leGNlZWRlZFwiIC8qIEF1dGhFcnJvckNvZGUuUVVPVEFfRVhDRUVERUQgKi9dOiBcIlRoZSBwcm9qZWN0J3MgcXVvdGEgZm9yIHRoaXMgb3BlcmF0aW9uIGhhcyBiZWVuIGV4Y2VlZGVkLlwiLFxyXG4gICAgICAgIFtcInJlZGlyZWN0LWNhbmNlbGxlZC1ieS11c2VyXCIgLyogQXV0aEVycm9yQ29kZS5SRURJUkVDVF9DQU5DRUxMRURfQllfVVNFUiAqL106ICdUaGUgcmVkaXJlY3Qgb3BlcmF0aW9uIGhhcyBiZWVuIGNhbmNlbGxlZCBieSB0aGUgdXNlciBiZWZvcmUgZmluYWxpemluZy4nLFxyXG4gICAgICAgIFtcInJlZGlyZWN0LW9wZXJhdGlvbi1wZW5kaW5nXCIgLyogQXV0aEVycm9yQ29kZS5SRURJUkVDVF9PUEVSQVRJT05fUEVORElORyAqL106ICdBIHJlZGlyZWN0IHNpZ24taW4gb3BlcmF0aW9uIGlzIGFscmVhZHkgcGVuZGluZy4nLFxyXG4gICAgICAgIFtcInJlamVjdGVkLWNyZWRlbnRpYWxcIiAvKiBBdXRoRXJyb3JDb2RlLlJFSkVDVEVEX0NSRURFTlRJQUwgKi9dOiAnVGhlIHJlcXVlc3QgY29udGFpbnMgbWFsZm9ybWVkIG9yIG1pc21hdGNoaW5nIGNyZWRlbnRpYWxzLicsXHJcbiAgICAgICAgW1wic2Vjb25kLWZhY3Rvci1hbHJlYWR5LWluLXVzZVwiIC8qIEF1dGhFcnJvckNvZGUuU0VDT05EX0ZBQ1RPUl9BTFJFQURZX0VOUk9MTEVEICovXTogJ1RoZSBzZWNvbmQgZmFjdG9yIGlzIGFscmVhZHkgZW5yb2xsZWQgb24gdGhpcyBhY2NvdW50LicsXHJcbiAgICAgICAgW1wibWF4aW11bS1zZWNvbmQtZmFjdG9yLWNvdW50LWV4Y2VlZGVkXCIgLyogQXV0aEVycm9yQ29kZS5TRUNPTkRfRkFDVE9SX0xJTUlUX0VYQ0VFREVEICovXTogJ1RoZSBtYXhpbXVtIGFsbG93ZWQgbnVtYmVyIG9mIHNlY29uZCBmYWN0b3JzIG9uIGEgdXNlciBoYXMgYmVlbiBleGNlZWRlZC4nLFxyXG4gICAgICAgIFtcInRlbmFudC1pZC1taXNtYXRjaFwiIC8qIEF1dGhFcnJvckNvZGUuVEVOQU5UX0lEX01JU01BVENIICovXTogXCJUaGUgcHJvdmlkZWQgdGVuYW50IElEIGRvZXMgbm90IG1hdGNoIHRoZSBBdXRoIGluc3RhbmNlJ3MgdGVuYW50IElEXCIsXHJcbiAgICAgICAgW1widGltZW91dFwiIC8qIEF1dGhFcnJvckNvZGUuVElNRU9VVCAqL106ICdUaGUgb3BlcmF0aW9uIGhhcyB0aW1lZCBvdXQuJyxcclxuICAgICAgICBbXCJ1c2VyLXRva2VuLWV4cGlyZWRcIiAvKiBBdXRoRXJyb3JDb2RlLlRPS0VOX0VYUElSRUQgKi9dOiBcIlRoZSB1c2VyJ3MgY3JlZGVudGlhbCBpcyBubyBsb25nZXIgdmFsaWQuIFRoZSB1c2VyIG11c3Qgc2lnbiBpbiBhZ2Fpbi5cIixcclxuICAgICAgICBbXCJ0b28tbWFueS1yZXF1ZXN0c1wiIC8qIEF1dGhFcnJvckNvZGUuVE9PX01BTllfQVRURU1QVFNfVFJZX0xBVEVSICovXTogJ1dlIGhhdmUgYmxvY2tlZCBhbGwgcmVxdWVzdHMgZnJvbSB0aGlzIGRldmljZSBkdWUgdG8gdW51c3VhbCBhY3Rpdml0eS4gJyArXHJcbiAgICAgICAgICAgICdUcnkgYWdhaW4gbGF0ZXIuJyxcclxuICAgICAgICBbXCJ1bmF1dGhvcml6ZWQtY29udGludWUtdXJpXCIgLyogQXV0aEVycm9yQ29kZS5VTkFVVEhPUklaRURfRE9NQUlOICovXTogJ1RoZSBkb21haW4gb2YgdGhlIGNvbnRpbnVlIFVSTCBpcyBub3Qgd2hpdGVsaXN0ZWQuICBQbGVhc2Ugd2hpdGVsaXN0ICcgK1xyXG4gICAgICAgICAgICAndGhlIGRvbWFpbiBpbiB0aGUgRmlyZWJhc2UgY29uc29sZS4nLFxyXG4gICAgICAgIFtcInVuc3VwcG9ydGVkLWZpcnN0LWZhY3RvclwiIC8qIEF1dGhFcnJvckNvZGUuVU5TVVBQT1JURURfRklSU1RfRkFDVE9SICovXTogJ0Vucm9sbGluZyBhIHNlY29uZCBmYWN0b3Igb3Igc2lnbmluZyBpbiB3aXRoIGEgbXVsdGktZmFjdG9yIGFjY291bnQgcmVxdWlyZXMgc2lnbi1pbiB3aXRoIGEgc3VwcG9ydGVkIGZpcnN0IGZhY3Rvci4nLFxyXG4gICAgICAgIFtcInVuc3VwcG9ydGVkLXBlcnNpc3RlbmNlLXR5cGVcIiAvKiBBdXRoRXJyb3JDb2RlLlVOU1VQUE9SVEVEX1BFUlNJU1RFTkNFICovXTogJ1RoZSBjdXJyZW50IGVudmlyb25tZW50IGRvZXMgbm90IHN1cHBvcnQgdGhlIHNwZWNpZmllZCBwZXJzaXN0ZW5jZSB0eXBlLicsXHJcbiAgICAgICAgW1widW5zdXBwb3J0ZWQtdGVuYW50LW9wZXJhdGlvblwiIC8qIEF1dGhFcnJvckNvZGUuVU5TVVBQT1JURURfVEVOQU5UX09QRVJBVElPTiAqL106ICdUaGlzIG9wZXJhdGlvbiBpcyBub3Qgc3VwcG9ydGVkIGluIGEgbXVsdGktdGVuYW50IGNvbnRleHQuJyxcclxuICAgICAgICBbXCJ1bnZlcmlmaWVkLWVtYWlsXCIgLyogQXV0aEVycm9yQ29kZS5VTlZFUklGSUVEX0VNQUlMICovXTogJ1RoZSBvcGVyYXRpb24gcmVxdWlyZXMgYSB2ZXJpZmllZCBlbWFpbC4nLFxyXG4gICAgICAgIFtcInVzZXItY2FuY2VsbGVkXCIgLyogQXV0aEVycm9yQ29kZS5VU0VSX0NBTkNFTExFRCAqL106ICdUaGUgdXNlciBkaWQgbm90IGdyYW50IHlvdXIgYXBwbGljYXRpb24gdGhlIHBlcm1pc3Npb25zIGl0IHJlcXVlc3RlZC4nLFxyXG4gICAgICAgIFtcInVzZXItbm90LWZvdW5kXCIgLyogQXV0aEVycm9yQ29kZS5VU0VSX0RFTEVURUQgKi9dOiAnVGhlcmUgaXMgbm8gdXNlciByZWNvcmQgY29ycmVzcG9uZGluZyB0byB0aGlzIGlkZW50aWZpZXIuIFRoZSB1c2VyIG1heSAnICtcclxuICAgICAgICAgICAgJ2hhdmUgYmVlbiBkZWxldGVkLicsXHJcbiAgICAgICAgW1widXNlci1kaXNhYmxlZFwiIC8qIEF1dGhFcnJvckNvZGUuVVNFUl9ESVNBQkxFRCAqL106ICdUaGUgdXNlciBhY2NvdW50IGhhcyBiZWVuIGRpc2FibGVkIGJ5IGFuIGFkbWluaXN0cmF0b3IuJyxcclxuICAgICAgICBbXCJ1c2VyLW1pc21hdGNoXCIgLyogQXV0aEVycm9yQ29kZS5VU0VSX01JU01BVENIICovXTogJ1RoZSBzdXBwbGllZCBjcmVkZW50aWFscyBkbyBub3QgY29ycmVzcG9uZCB0byB0aGUgcHJldmlvdXNseSBzaWduZWQgaW4gdXNlci4nLFxyXG4gICAgICAgIFtcInVzZXItc2lnbmVkLW91dFwiIC8qIEF1dGhFcnJvckNvZGUuVVNFUl9TSUdORURfT1VUICovXTogJycsXHJcbiAgICAgICAgW1wid2Vhay1wYXNzd29yZFwiIC8qIEF1dGhFcnJvckNvZGUuV0VBS19QQVNTV09SRCAqL106ICdUaGUgcGFzc3dvcmQgbXVzdCBiZSA2IGNoYXJhY3RlcnMgbG9uZyBvciBtb3JlLicsXHJcbiAgICAgICAgW1wid2ViLXN0b3JhZ2UtdW5zdXBwb3J0ZWRcIiAvKiBBdXRoRXJyb3JDb2RlLldFQl9TVE9SQUdFX1VOU1VQUE9SVEVEICovXTogJ1RoaXMgYnJvd3NlciBpcyBub3Qgc3VwcG9ydGVkIG9yIDNyZCBwYXJ0eSBjb29raWVzIGFuZCBkYXRhIG1heSBiZSBkaXNhYmxlZC4nLFxyXG4gICAgICAgIFtcImFscmVhZHktaW5pdGlhbGl6ZWRcIiAvKiBBdXRoRXJyb3JDb2RlLkFMUkVBRFlfSU5JVElBTElaRUQgKi9dOiAnaW5pdGlhbGl6ZUF1dGgoKSBoYXMgYWxyZWFkeSBiZWVuIGNhbGxlZCB3aXRoICcgK1xyXG4gICAgICAgICAgICAnZGlmZmVyZW50IG9wdGlvbnMuIFRvIGF2b2lkIHRoaXMgZXJyb3IsIGNhbGwgaW5pdGlhbGl6ZUF1dGgoKSB3aXRoIHRoZSAnICtcclxuICAgICAgICAgICAgJ3NhbWUgb3B0aW9ucyBhcyB3aGVuIGl0IHdhcyBvcmlnaW5hbGx5IGNhbGxlZCwgb3IgY2FsbCBnZXRBdXRoKCkgdG8gcmV0dXJuIHRoZScgK1xyXG4gICAgICAgICAgICAnIGFscmVhZHkgaW5pdGlhbGl6ZWQgaW5zdGFuY2UuJyxcclxuICAgICAgICBbXCJtaXNzaW5nLXJlY2FwdGNoYS10b2tlblwiIC8qIEF1dGhFcnJvckNvZGUuTUlTU0lOR19SRUNBUFRDSEFfVE9LRU4gKi9dOiAnVGhlIHJlQ0FQVENIQSB0b2tlbiBpcyBtaXNzaW5nIHdoZW4gc2VuZGluZyByZXF1ZXN0IHRvIHRoZSBiYWNrZW5kLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1yZWNhcHRjaGEtdG9rZW5cIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfUkVDQVBUQ0hBX1RPS0VOICovXTogJ1RoZSByZUNBUFRDSEEgdG9rZW4gaXMgaW52YWxpZCB3aGVuIHNlbmRpbmcgcmVxdWVzdCB0byB0aGUgYmFja2VuZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtcmVjYXB0Y2hhLWFjdGlvblwiIC8qIEF1dGhFcnJvckNvZGUuSU5WQUxJRF9SRUNBUFRDSEFfQUNUSU9OICovXTogJ1RoZSByZUNBUFRDSEEgYWN0aW9uIGlzIGludmFsaWQgd2hlbiBzZW5kaW5nIHJlcXVlc3QgdG8gdGhlIGJhY2tlbmQuJyxcclxuICAgICAgICBbXCJyZWNhcHRjaGEtbm90LWVuYWJsZWRcIiAvKiBBdXRoRXJyb3JDb2RlLlJFQ0FQVENIQV9OT1RfRU5BQkxFRCAqL106ICdyZUNBUFRDSEEgRW50ZXJwcmlzZSBpbnRlZ3JhdGlvbiBpcyBub3QgZW5hYmxlZCBmb3IgdGhpcyBwcm9qZWN0LicsXHJcbiAgICAgICAgW1wibWlzc2luZy1jbGllbnQtdHlwZVwiIC8qIEF1dGhFcnJvckNvZGUuTUlTU0lOR19DTElFTlRfVFlQRSAqL106ICdUaGUgcmVDQVBUQ0hBIGNsaWVudCB0eXBlIGlzIG1pc3Npbmcgd2hlbiBzZW5kaW5nIHJlcXVlc3QgdG8gdGhlIGJhY2tlbmQuJyxcclxuICAgICAgICBbXCJtaXNzaW5nLXJlY2FwdGNoYS12ZXJzaW9uXCIgLyogQXV0aEVycm9yQ29kZS5NSVNTSU5HX1JFQ0FQVENIQV9WRVJTSU9OICovXTogJ1RoZSByZUNBUFRDSEEgdmVyc2lvbiBpcyBtaXNzaW5nIHdoZW4gc2VuZGluZyByZXF1ZXN0IHRvIHRoZSBiYWNrZW5kLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1yZXEtdHlwZVwiIC8qIEF1dGhFcnJvckNvZGUuSU5WQUxJRF9SRVFfVFlQRSAqL106ICdJbnZhbGlkIHJlcXVlc3QgcGFyYW1ldGVycy4nLFxyXG4gICAgICAgIFtcImludmFsaWQtcmVjYXB0Y2hhLXZlcnNpb25cIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfUkVDQVBUQ0hBX1ZFUlNJT04gKi9dOiAnVGhlIHJlQ0FQVENIQSB2ZXJzaW9uIGlzIGludmFsaWQgd2hlbiBzZW5kaW5nIHJlcXVlc3QgdG8gdGhlIGJhY2tlbmQuJyxcclxuICAgICAgICBbXCJ1bnN1cHBvcnRlZC1wYXNzd29yZC1wb2xpY3ktc2NoZW1hLXZlcnNpb25cIiAvKiBBdXRoRXJyb3JDb2RlLlVOU1VQUE9SVEVEX1BBU1NXT1JEX1BPTElDWV9TQ0hFTUFfVkVSU0lPTiAqL106ICdUaGUgcGFzc3dvcmQgcG9saWN5IHJlY2VpdmVkIGZyb20gdGhlIGJhY2tlbmQgdXNlcyBhIHNjaGVtYSB2ZXJzaW9uIHRoYXQgaXMgbm90IHN1cHBvcnRlZCBieSB0aGlzIHZlcnNpb24gb2YgdGhlIEZpcmViYXNlIFNESy4nLFxyXG4gICAgICAgIFtcInBhc3N3b3JkLWRvZXMtbm90LW1lZXQtcmVxdWlyZW1lbnRzXCIgLyogQXV0aEVycm9yQ29kZS5QQVNTV09SRF9ET0VTX05PVF9NRUVUX1JFUVVJUkVNRU5UUyAqL106ICdUaGUgcGFzc3dvcmQgZG9lcyBub3QgbWVldCB0aGUgcmVxdWlyZW1lbnRzLidcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gX3Byb2RFcnJvck1hcCgpIHtcclxuICAgIC8vIFdlIHdpbGwgaW5jbHVkZSB0aGlzIG9uZSBtZXNzYWdlIGluIHRoZSBwcm9kIGVycm9yIG1hcCBzaW5jZSBieSB0aGUgdmVyeVxyXG4gICAgLy8gbmF0dXJlIG9mIHRoaXMgZXJyb3IsIGRldmVsb3BlcnMgd2lsbCBuZXZlciBiZSBhYmxlIHRvIHNlZSB0aGUgbWVzc2FnZVxyXG4gICAgLy8gdXNpbmcgdGhlIGRlYnVnRXJyb3JNYXAgKHdoaWNoIGlzIGluc3RhbGxlZCBkdXJpbmcgYXV0aCBpbml0aWFsaXphdGlvbikuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIFtcImRlcGVuZGVudC1zZGstaW5pdGlhbGl6ZWQtYmVmb3JlLWF1dGhcIiAvKiBBdXRoRXJyb3JDb2RlLkRFUEVOREVOVF9TREtfSU5JVF9CRUZPUkVfQVVUSCAqL106ICdBbm90aGVyIEZpcmViYXNlIFNESyB3YXMgaW5pdGlhbGl6ZWQgYW5kIGlzIHRyeWluZyB0byB1c2UgQXV0aCBiZWZvcmUgQXV0aCBpcyAnICtcclxuICAgICAgICAgICAgJ2luaXRpYWxpemVkLiBQbGVhc2UgYmUgc3VyZSB0byBjYWxsIGBpbml0aWFsaXplQXV0aGAgb3IgYGdldEF1dGhgIGJlZm9yZSAnICtcclxuICAgICAgICAgICAgJ3N0YXJ0aW5nIGFueSBvdGhlciBGaXJlYmFzZSBTREsuJ1xyXG4gICAgfTtcclxufVxyXG4vKipcclxuICogQSB2ZXJib3NlIGVycm9yIG1hcCB3aXRoIGRldGFpbGVkIGRlc2NyaXB0aW9ucyBmb3IgbW9zdCBlcnJvciBjb2Rlcy5cclxuICpcclxuICogU2VlIGRpc2N1c3Npb24gYXQge0BsaW5rIEF1dGhFcnJvck1hcH1cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgZGVidWdFcnJvck1hcCA9IF9kZWJ1Z0Vycm9yTWFwO1xyXG4vKipcclxuICogQSBtaW5pbWFsIGVycm9yIG1hcCB3aXRoIGFsbCB2ZXJib3NlIGVycm9yIG1lc3NhZ2VzIHN0cmlwcGVkLlxyXG4gKlxyXG4gKiBTZWUgZGlzY3Vzc2lvbiBhdCB7QGxpbmsgQXV0aEVycm9yTWFwfVxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBwcm9kRXJyb3JNYXAgPSBfcHJvZEVycm9yTWFwO1xyXG5jb25zdCBfREVGQVVMVF9BVVRIX0VSUk9SX0ZBQ1RPUlkgPSBuZXcgRXJyb3JGYWN0b3J5KCdhdXRoJywgJ0ZpcmViYXNlJywgX3Byb2RFcnJvck1hcCgpKTtcclxuLyoqXHJcbiAqIEEgbWFwIG9mIHBvdGVudGlhbCBgQXV0aGAgZXJyb3IgY29kZXMsIGZvciBlYXNpZXIgY29tcGFyaXNvbiB3aXRoIGVycm9yc1xyXG4gKiB0aHJvd24gYnkgdGhlIFNESy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogTm90ZSB0aGF0IHlvdSBjYW4ndCB0cmVlLXNoYWtlIGluZGl2aWR1YWwga2V5c1xyXG4gKiBpbiB0aGUgbWFwLCBzbyBieSB1c2luZyB0aGUgbWFwIHlvdSBtaWdodCBzdWJzdGFudGlhbGx5IGluY3JlYXNlIHlvdXJcclxuICogYnVuZGxlIHNpemUuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IEFVVEhfRVJST1JfQ09ERVNfTUFQX0RPX05PVF9VU0VfSU5URVJOQUxMWSA9IHtcclxuICAgIEFETUlOX09OTFlfT1BFUkFUSU9OOiAnYXV0aC9hZG1pbi1yZXN0cmljdGVkLW9wZXJhdGlvbicsXHJcbiAgICBBUkdVTUVOVF9FUlJPUjogJ2F1dGgvYXJndW1lbnQtZXJyb3InLFxyXG4gICAgQVBQX05PVF9BVVRIT1JJWkVEOiAnYXV0aC9hcHAtbm90LWF1dGhvcml6ZWQnLFxyXG4gICAgQVBQX05PVF9JTlNUQUxMRUQ6ICdhdXRoL2FwcC1ub3QtaW5zdGFsbGVkJyxcclxuICAgIENBUFRDSEFfQ0hFQ0tfRkFJTEVEOiAnYXV0aC9jYXB0Y2hhLWNoZWNrLWZhaWxlZCcsXHJcbiAgICBDT0RFX0VYUElSRUQ6ICdhdXRoL2NvZGUtZXhwaXJlZCcsXHJcbiAgICBDT1JET1ZBX05PVF9SRUFEWTogJ2F1dGgvY29yZG92YS1ub3QtcmVhZHknLFxyXG4gICAgQ09SU19VTlNVUFBPUlRFRDogJ2F1dGgvY29ycy11bnN1cHBvcnRlZCcsXHJcbiAgICBDUkVERU5USUFMX0FMUkVBRFlfSU5fVVNFOiAnYXV0aC9jcmVkZW50aWFsLWFscmVhZHktaW4tdXNlJyxcclxuICAgIENSRURFTlRJQUxfTUlTTUFUQ0g6ICdhdXRoL2N1c3RvbS10b2tlbi1taXNtYXRjaCcsXHJcbiAgICBDUkVERU5USUFMX1RPT19PTERfTE9HSU5fQUdBSU46ICdhdXRoL3JlcXVpcmVzLXJlY2VudC1sb2dpbicsXHJcbiAgICBERVBFTkRFTlRfU0RLX0lOSVRfQkVGT1JFX0FVVEg6ICdhdXRoL2RlcGVuZGVudC1zZGstaW5pdGlhbGl6ZWQtYmVmb3JlLWF1dGgnLFxyXG4gICAgRFlOQU1JQ19MSU5LX05PVF9BQ1RJVkFURUQ6ICdhdXRoL2R5bmFtaWMtbGluay1ub3QtYWN0aXZhdGVkJyxcclxuICAgIEVNQUlMX0NIQU5HRV9ORUVEU19WRVJJRklDQVRJT046ICdhdXRoL2VtYWlsLWNoYW5nZS1uZWVkcy12ZXJpZmljYXRpb24nLFxyXG4gICAgRU1BSUxfRVhJU1RTOiAnYXV0aC9lbWFpbC1hbHJlYWR5LWluLXVzZScsXHJcbiAgICBFTVVMQVRPUl9DT05GSUdfRkFJTEVEOiAnYXV0aC9lbXVsYXRvci1jb25maWctZmFpbGVkJyxcclxuICAgIEVYUElSRURfT09CX0NPREU6ICdhdXRoL2V4cGlyZWQtYWN0aW9uLWNvZGUnLFxyXG4gICAgRVhQSVJFRF9QT1BVUF9SRVFVRVNUOiAnYXV0aC9jYW5jZWxsZWQtcG9wdXAtcmVxdWVzdCcsXHJcbiAgICBJTlRFUk5BTF9FUlJPUjogJ2F1dGgvaW50ZXJuYWwtZXJyb3InLFxyXG4gICAgSU5WQUxJRF9BUElfS0VZOiAnYXV0aC9pbnZhbGlkLWFwaS1rZXknLFxyXG4gICAgSU5WQUxJRF9BUFBfQ1JFREVOVElBTDogJ2F1dGgvaW52YWxpZC1hcHAtY3JlZGVudGlhbCcsXHJcbiAgICBJTlZBTElEX0FQUF9JRDogJ2F1dGgvaW52YWxpZC1hcHAtaWQnLFxyXG4gICAgSU5WQUxJRF9BVVRIOiAnYXV0aC9pbnZhbGlkLXVzZXItdG9rZW4nLFxyXG4gICAgSU5WQUxJRF9BVVRIX0VWRU5UOiAnYXV0aC9pbnZhbGlkLWF1dGgtZXZlbnQnLFxyXG4gICAgSU5WQUxJRF9DRVJUX0hBU0g6ICdhdXRoL2ludmFsaWQtY2VydC1oYXNoJyxcclxuICAgIElOVkFMSURfQ09ERTogJ2F1dGgvaW52YWxpZC12ZXJpZmljYXRpb24tY29kZScsXHJcbiAgICBJTlZBTElEX0NPTlRJTlVFX1VSSTogJ2F1dGgvaW52YWxpZC1jb250aW51ZS11cmknLFxyXG4gICAgSU5WQUxJRF9DT1JET1ZBX0NPTkZJR1VSQVRJT046ICdhdXRoL2ludmFsaWQtY29yZG92YS1jb25maWd1cmF0aW9uJyxcclxuICAgIElOVkFMSURfQ1VTVE9NX1RPS0VOOiAnYXV0aC9pbnZhbGlkLWN1c3RvbS10b2tlbicsXHJcbiAgICBJTlZBTElEX0RZTkFNSUNfTElOS19ET01BSU46ICdhdXRoL2ludmFsaWQtZHluYW1pYy1saW5rLWRvbWFpbicsXHJcbiAgICBJTlZBTElEX0VNQUlMOiAnYXV0aC9pbnZhbGlkLWVtYWlsJyxcclxuICAgIElOVkFMSURfRU1VTEFUT1JfU0NIRU1FOiAnYXV0aC9pbnZhbGlkLWVtdWxhdG9yLXNjaGVtZScsXHJcbiAgICBJTlZBTElEX0lEUF9SRVNQT05TRTogJ2F1dGgvaW52YWxpZC1jcmVkZW50aWFsJyxcclxuICAgIElOVkFMSURfTE9HSU5fQ1JFREVOVElBTFM6ICdhdXRoL2ludmFsaWQtY3JlZGVudGlhbCcsXHJcbiAgICBJTlZBTElEX01FU1NBR0VfUEFZTE9BRDogJ2F1dGgvaW52YWxpZC1tZXNzYWdlLXBheWxvYWQnLFxyXG4gICAgSU5WQUxJRF9NRkFfU0VTU0lPTjogJ2F1dGgvaW52YWxpZC1tdWx0aS1mYWN0b3Itc2Vzc2lvbicsXHJcbiAgICBJTlZBTElEX09BVVRIX0NMSUVOVF9JRDogJ2F1dGgvaW52YWxpZC1vYXV0aC1jbGllbnQtaWQnLFxyXG4gICAgSU5WQUxJRF9PQVVUSF9QUk9WSURFUjogJ2F1dGgvaW52YWxpZC1vYXV0aC1wcm92aWRlcicsXHJcbiAgICBJTlZBTElEX09PQl9DT0RFOiAnYXV0aC9pbnZhbGlkLWFjdGlvbi1jb2RlJyxcclxuICAgIElOVkFMSURfT1JJR0lOOiAnYXV0aC91bmF1dGhvcml6ZWQtZG9tYWluJyxcclxuICAgIElOVkFMSURfUEFTU1dPUkQ6ICdhdXRoL3dyb25nLXBhc3N3b3JkJyxcclxuICAgIElOVkFMSURfUEVSU0lTVEVOQ0U6ICdhdXRoL2ludmFsaWQtcGVyc2lzdGVuY2UtdHlwZScsXHJcbiAgICBJTlZBTElEX1BIT05FX05VTUJFUjogJ2F1dGgvaW52YWxpZC1waG9uZS1udW1iZXInLFxyXG4gICAgSU5WQUxJRF9QUk9WSURFUl9JRDogJ2F1dGgvaW52YWxpZC1wcm92aWRlci1pZCcsXHJcbiAgICBJTlZBTElEX1JFQ0lQSUVOVF9FTUFJTDogJ2F1dGgvaW52YWxpZC1yZWNpcGllbnQtZW1haWwnLFxyXG4gICAgSU5WQUxJRF9TRU5ERVI6ICdhdXRoL2ludmFsaWQtc2VuZGVyJyxcclxuICAgIElOVkFMSURfU0VTU0lPTl9JTkZPOiAnYXV0aC9pbnZhbGlkLXZlcmlmaWNhdGlvbi1pZCcsXHJcbiAgICBJTlZBTElEX1RFTkFOVF9JRDogJ2F1dGgvaW52YWxpZC10ZW5hbnQtaWQnLFxyXG4gICAgTUZBX0lORk9fTk9UX0ZPVU5EOiAnYXV0aC9tdWx0aS1mYWN0b3ItaW5mby1ub3QtZm91bmQnLFxyXG4gICAgTUZBX1JFUVVJUkVEOiAnYXV0aC9tdWx0aS1mYWN0b3ItYXV0aC1yZXF1aXJlZCcsXHJcbiAgICBNSVNTSU5HX0FORFJPSURfUEFDS0FHRV9OQU1FOiAnYXV0aC9taXNzaW5nLWFuZHJvaWQtcGtnLW5hbWUnLFxyXG4gICAgTUlTU0lOR19BUFBfQ1JFREVOVElBTDogJ2F1dGgvbWlzc2luZy1hcHAtY3JlZGVudGlhbCcsXHJcbiAgICBNSVNTSU5HX0FVVEhfRE9NQUlOOiAnYXV0aC9hdXRoLWRvbWFpbi1jb25maWctcmVxdWlyZWQnLFxyXG4gICAgTUlTU0lOR19DT0RFOiAnYXV0aC9taXNzaW5nLXZlcmlmaWNhdGlvbi1jb2RlJyxcclxuICAgIE1JU1NJTkdfQ09OVElOVUVfVVJJOiAnYXV0aC9taXNzaW5nLWNvbnRpbnVlLXVyaScsXHJcbiAgICBNSVNTSU5HX0lGUkFNRV9TVEFSVDogJ2F1dGgvbWlzc2luZy1pZnJhbWUtc3RhcnQnLFxyXG4gICAgTUlTU0lOR19JT1NfQlVORExFX0lEOiAnYXV0aC9taXNzaW5nLWlvcy1idW5kbGUtaWQnLFxyXG4gICAgTUlTU0lOR19PUl9JTlZBTElEX05PTkNFOiAnYXV0aC9taXNzaW5nLW9yLWludmFsaWQtbm9uY2UnLFxyXG4gICAgTUlTU0lOR19NRkFfSU5GTzogJ2F1dGgvbWlzc2luZy1tdWx0aS1mYWN0b3ItaW5mbycsXHJcbiAgICBNSVNTSU5HX01GQV9TRVNTSU9OOiAnYXV0aC9taXNzaW5nLW11bHRpLWZhY3Rvci1zZXNzaW9uJyxcclxuICAgIE1JU1NJTkdfUEhPTkVfTlVNQkVSOiAnYXV0aC9taXNzaW5nLXBob25lLW51bWJlcicsXHJcbiAgICBNSVNTSU5HX1NFU1NJT05fSU5GTzogJ2F1dGgvbWlzc2luZy12ZXJpZmljYXRpb24taWQnLFxyXG4gICAgTU9EVUxFX0RFU1RST1lFRDogJ2F1dGgvYXBwLWRlbGV0ZWQnLFxyXG4gICAgTkVFRF9DT05GSVJNQVRJT046ICdhdXRoL2FjY291bnQtZXhpc3RzLXdpdGgtZGlmZmVyZW50LWNyZWRlbnRpYWwnLFxyXG4gICAgTkVUV09SS19SRVFVRVNUX0ZBSUxFRDogJ2F1dGgvbmV0d29yay1yZXF1ZXN0LWZhaWxlZCcsXHJcbiAgICBOVUxMX1VTRVI6ICdhdXRoL251bGwtdXNlcicsXHJcbiAgICBOT19BVVRIX0VWRU5UOiAnYXV0aC9uby1hdXRoLWV2ZW50JyxcclxuICAgIE5PX1NVQ0hfUFJPVklERVI6ICdhdXRoL25vLXN1Y2gtcHJvdmlkZXInLFxyXG4gICAgT1BFUkFUSU9OX05PVF9BTExPV0VEOiAnYXV0aC9vcGVyYXRpb24tbm90LWFsbG93ZWQnLFxyXG4gICAgT1BFUkFUSU9OX05PVF9TVVBQT1JURUQ6ICdhdXRoL29wZXJhdGlvbi1ub3Qtc3VwcG9ydGVkLWluLXRoaXMtZW52aXJvbm1lbnQnLFxyXG4gICAgUE9QVVBfQkxPQ0tFRDogJ2F1dGgvcG9wdXAtYmxvY2tlZCcsXHJcbiAgICBQT1BVUF9DTE9TRURfQllfVVNFUjogJ2F1dGgvcG9wdXAtY2xvc2VkLWJ5LXVzZXInLFxyXG4gICAgUFJPVklERVJfQUxSRUFEWV9MSU5LRUQ6ICdhdXRoL3Byb3ZpZGVyLWFscmVhZHktbGlua2VkJyxcclxuICAgIFFVT1RBX0VYQ0VFREVEOiAnYXV0aC9xdW90YS1leGNlZWRlZCcsXHJcbiAgICBSRURJUkVDVF9DQU5DRUxMRURfQllfVVNFUjogJ2F1dGgvcmVkaXJlY3QtY2FuY2VsbGVkLWJ5LXVzZXInLFxyXG4gICAgUkVESVJFQ1RfT1BFUkFUSU9OX1BFTkRJTkc6ICdhdXRoL3JlZGlyZWN0LW9wZXJhdGlvbi1wZW5kaW5nJyxcclxuICAgIFJFSkVDVEVEX0NSRURFTlRJQUw6ICdhdXRoL3JlamVjdGVkLWNyZWRlbnRpYWwnLFxyXG4gICAgU0VDT05EX0ZBQ1RPUl9BTFJFQURZX0VOUk9MTEVEOiAnYXV0aC9zZWNvbmQtZmFjdG9yLWFscmVhZHktaW4tdXNlJyxcclxuICAgIFNFQ09ORF9GQUNUT1JfTElNSVRfRVhDRUVERUQ6ICdhdXRoL21heGltdW0tc2Vjb25kLWZhY3Rvci1jb3VudC1leGNlZWRlZCcsXHJcbiAgICBURU5BTlRfSURfTUlTTUFUQ0g6ICdhdXRoL3RlbmFudC1pZC1taXNtYXRjaCcsXHJcbiAgICBUSU1FT1VUOiAnYXV0aC90aW1lb3V0JyxcclxuICAgIFRPS0VOX0VYUElSRUQ6ICdhdXRoL3VzZXItdG9rZW4tZXhwaXJlZCcsXHJcbiAgICBUT09fTUFOWV9BVFRFTVBUU19UUllfTEFURVI6ICdhdXRoL3Rvby1tYW55LXJlcXVlc3RzJyxcclxuICAgIFVOQVVUSE9SSVpFRF9ET01BSU46ICdhdXRoL3VuYXV0aG9yaXplZC1jb250aW51ZS11cmknLFxyXG4gICAgVU5TVVBQT1JURURfRklSU1RfRkFDVE9SOiAnYXV0aC91bnN1cHBvcnRlZC1maXJzdC1mYWN0b3InLFxyXG4gICAgVU5TVVBQT1JURURfUEVSU0lTVEVOQ0U6ICdhdXRoL3Vuc3VwcG9ydGVkLXBlcnNpc3RlbmNlLXR5cGUnLFxyXG4gICAgVU5TVVBQT1JURURfVEVOQU5UX09QRVJBVElPTjogJ2F1dGgvdW5zdXBwb3J0ZWQtdGVuYW50LW9wZXJhdGlvbicsXHJcbiAgICBVTlZFUklGSUVEX0VNQUlMOiAnYXV0aC91bnZlcmlmaWVkLWVtYWlsJyxcclxuICAgIFVTRVJfQ0FOQ0VMTEVEOiAnYXV0aC91c2VyLWNhbmNlbGxlZCcsXHJcbiAgICBVU0VSX0RFTEVURUQ6ICdhdXRoL3VzZXItbm90LWZvdW5kJyxcclxuICAgIFVTRVJfRElTQUJMRUQ6ICdhdXRoL3VzZXItZGlzYWJsZWQnLFxyXG4gICAgVVNFUl9NSVNNQVRDSDogJ2F1dGgvdXNlci1taXNtYXRjaCcsXHJcbiAgICBVU0VSX1NJR05FRF9PVVQ6ICdhdXRoL3VzZXItc2lnbmVkLW91dCcsXHJcbiAgICBXRUFLX1BBU1NXT1JEOiAnYXV0aC93ZWFrLXBhc3N3b3JkJyxcclxuICAgIFdFQl9TVE9SQUdFX1VOU1VQUE9SVEVEOiAnYXV0aC93ZWItc3RvcmFnZS11bnN1cHBvcnRlZCcsXHJcbiAgICBBTFJFQURZX0lOSVRJQUxJWkVEOiAnYXV0aC9hbHJlYWR5LWluaXRpYWxpemVkJyxcclxuICAgIFJFQ0FQVENIQV9OT1RfRU5BQkxFRDogJ2F1dGgvcmVjYXB0Y2hhLW5vdC1lbmFibGVkJyxcclxuICAgIE1JU1NJTkdfUkVDQVBUQ0hBX1RPS0VOOiAnYXV0aC9taXNzaW5nLXJlY2FwdGNoYS10b2tlbicsXHJcbiAgICBJTlZBTElEX1JFQ0FQVENIQV9UT0tFTjogJ2F1dGgvaW52YWxpZC1yZWNhcHRjaGEtdG9rZW4nLFxyXG4gICAgSU5WQUxJRF9SRUNBUFRDSEFfQUNUSU9OOiAnYXV0aC9pbnZhbGlkLXJlY2FwdGNoYS1hY3Rpb24nLFxyXG4gICAgTUlTU0lOR19DTElFTlRfVFlQRTogJ2F1dGgvbWlzc2luZy1jbGllbnQtdHlwZScsXHJcbiAgICBNSVNTSU5HX1JFQ0FQVENIQV9WRVJTSU9OOiAnYXV0aC9taXNzaW5nLXJlY2FwdGNoYS12ZXJzaW9uJyxcclxuICAgIElOVkFMSURfUkVDQVBUQ0hBX1ZFUlNJT046ICdhdXRoL2ludmFsaWQtcmVjYXB0Y2hhLXZlcnNpb24nLFxyXG4gICAgSU5WQUxJRF9SRVFfVFlQRTogJ2F1dGgvaW52YWxpZC1yZXEtdHlwZSdcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgbG9nQ2xpZW50ID0gbmV3IExvZ2dlcignQGZpcmViYXNlL2F1dGgnKTtcclxuZnVuY3Rpb24gX2xvZ1dhcm4obXNnLCAuLi5hcmdzKSB7XHJcbiAgICBpZiAobG9nQ2xpZW50LmxvZ0xldmVsIDw9IExvZ0xldmVsLldBUk4pIHtcclxuICAgICAgICBsb2dDbGllbnQud2FybihgQXV0aCAoJHtTREtfVkVSU0lPTn0pOiAke21zZ31gLCAuLi5hcmdzKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBfbG9nRXJyb3IobXNnLCAuLi5hcmdzKSB7XHJcbiAgICBpZiAobG9nQ2xpZW50LmxvZ0xldmVsIDw9IExvZ0xldmVsLkVSUk9SKSB7XHJcbiAgICAgICAgbG9nQ2xpZW50LmVycm9yKGBBdXRoICgke1NES19WRVJTSU9OfSk6ICR7bXNnfWAsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIF9mYWlsKGF1dGhPckNvZGUsIC4uLnJlc3QpIHtcclxuICAgIHRocm93IGNyZWF0ZUVycm9ySW50ZXJuYWwoYXV0aE9yQ29kZSwgLi4ucmVzdCk7XHJcbn1cclxuZnVuY3Rpb24gX2NyZWF0ZUVycm9yKGF1dGhPckNvZGUsIC4uLnJlc3QpIHtcclxuICAgIHJldHVybiBjcmVhdGVFcnJvckludGVybmFsKGF1dGhPckNvZGUsIC4uLnJlc3QpO1xyXG59XHJcbmZ1bmN0aW9uIF9lcnJvcldpdGhDdXN0b21NZXNzYWdlKGF1dGgsIGNvZGUsIG1lc3NhZ2UpIHtcclxuICAgIGNvbnN0IGVycm9yTWFwID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBwcm9kRXJyb3JNYXAoKSksIHsgW2NvZGVdOiBtZXNzYWdlIH0pO1xyXG4gICAgY29uc3QgZmFjdG9yeSA9IG5ldyBFcnJvckZhY3RvcnkoJ2F1dGgnLCAnRmlyZWJhc2UnLCBlcnJvck1hcCk7XHJcbiAgICByZXR1cm4gZmFjdG9yeS5jcmVhdGUoY29kZSwge1xyXG4gICAgICAgIGFwcE5hbWU6IGF1dGgubmFtZVxyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gX3NlcnZlckFwcEN1cnJlbnRVc2VyT3BlcmF0aW9uTm90U3VwcG9ydGVkRXJyb3IoYXV0aCkge1xyXG4gICAgcmV0dXJuIF9lcnJvcldpdGhDdXN0b21NZXNzYWdlKGF1dGgsIFwib3BlcmF0aW9uLW5vdC1zdXBwb3J0ZWQtaW4tdGhpcy1lbnZpcm9ubWVudFwiIC8qIEF1dGhFcnJvckNvZGUuT1BFUkFUSU9OX05PVF9TVVBQT1JURUQgKi8sICdPcGVyYXRpb25zIHRoYXQgYWx0ZXIgdGhlIGN1cnJlbnQgdXNlciBhcmUgbm90IHN1cHBvcnRlZCBpbiBjb25qdW5jdGlvbiB3aXRoIEZpcmViYXNlU2VydmVyQXBwJyk7XHJcbn1cclxuZnVuY3Rpb24gX2Fzc2VydEluc3RhbmNlT2YoYXV0aCwgb2JqZWN0LCBpbnN0YW5jZSkge1xyXG4gICAgY29uc3QgY29uc3RydWN0b3JJbnN0YW5jZSA9IGluc3RhbmNlO1xyXG4gICAgaWYgKCEob2JqZWN0IGluc3RhbmNlb2YgY29uc3RydWN0b3JJbnN0YW5jZSkpIHtcclxuICAgICAgICBpZiAoY29uc3RydWN0b3JJbnN0YW5jZS5uYW1lICE9PSBvYmplY3QuY29uc3RydWN0b3IubmFtZSkge1xyXG4gICAgICAgICAgICBfZmFpbChhdXRoLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5BUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IF9lcnJvcldpdGhDdXN0b21NZXNzYWdlKGF1dGgsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLkFSR1VNRU5UX0VSUk9SICovLCBgVHlwZSBvZiAke29iamVjdC5jb25zdHJ1Y3Rvci5uYW1lfSBkb2VzIG5vdCBtYXRjaCBleHBlY3RlZCBpbnN0YW5jZS5gICtcclxuICAgICAgICAgICAgYERpZCB5b3UgcGFzcyBhIHJlZmVyZW5jZSBmcm9tIGEgZGlmZmVyZW50IEF1dGggU0RLP2ApO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZUVycm9ySW50ZXJuYWwoYXV0aE9yQ29kZSwgLi4ucmVzdCkge1xyXG4gICAgaWYgKHR5cGVvZiBhdXRoT3JDb2RlICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIGNvbnN0IGNvZGUgPSByZXN0WzBdO1xyXG4gICAgICAgIGNvbnN0IGZ1bGxQYXJhbXMgPSBbLi4ucmVzdC5zbGljZSgxKV07XHJcbiAgICAgICAgaWYgKGZ1bGxQYXJhbXNbMF0pIHtcclxuICAgICAgICAgICAgZnVsbFBhcmFtc1swXS5hcHBOYW1lID0gYXV0aE9yQ29kZS5uYW1lO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXV0aE9yQ29kZS5fZXJyb3JGYWN0b3J5LmNyZWF0ZShjb2RlLCAuLi5mdWxsUGFyYW1zKTtcclxuICAgIH1cclxuICAgIHJldHVybiBfREVGQVVMVF9BVVRIX0VSUk9SX0ZBQ1RPUlkuY3JlYXRlKGF1dGhPckNvZGUsIC4uLnJlc3QpO1xyXG59XHJcbmZ1bmN0aW9uIF9hc3NlcnQoYXNzZXJ0aW9uLCBhdXRoT3JDb2RlLCAuLi5yZXN0KSB7XHJcbiAgICBpZiAoIWFzc2VydGlvbikge1xyXG4gICAgICAgIHRocm93IGNyZWF0ZUVycm9ySW50ZXJuYWwoYXV0aE9yQ29kZSwgLi4ucmVzdCk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFVuY29uZGl0aW9uYWxseSBmYWlscywgdGhyb3dpbmcgYW4gaW50ZXJuYWwgZXJyb3Igd2l0aCB0aGUgZ2l2ZW4gbWVzc2FnZS5cclxuICpcclxuICogQHBhcmFtIGZhaWx1cmUgdHlwZSBvZiBmYWlsdXJlIGVuY291bnRlcmVkXHJcbiAqIEB0aHJvd3MgRXJyb3JcclxuICovXHJcbmZ1bmN0aW9uIGRlYnVnRmFpbChmYWlsdXJlKSB7XHJcbiAgICAvLyBMb2cgdGhlIGZhaWx1cmUgaW4gYWRkaXRpb24gdG8gdGhyb3cgYW4gZXhjZXB0aW9uLCBqdXN0IGluIGNhc2UgdGhlXHJcbiAgICAvLyBleGNlcHRpb24gaXMgc3dhbGxvd2VkLlxyXG4gICAgY29uc3QgbWVzc2FnZSA9IGBJTlRFUk5BTCBBU1NFUlRJT04gRkFJTEVEOiBgICsgZmFpbHVyZTtcclxuICAgIF9sb2dFcnJvcihtZXNzYWdlKTtcclxuICAgIC8vIE5PVEU6IFdlIGRvbid0IHVzZSBGaXJlYmFzZUVycm9yIGhlcmUgYmVjYXVzZSB0aGVzZSBhcmUgaW50ZXJuYWwgZmFpbHVyZXNcclxuICAgIC8vIHRoYXQgY2Fubm90IGJlIGhhbmRsZWQgYnkgdGhlIHVzZXIuIChBbHNvIGl0IHdvdWxkIGNyZWF0ZSBhIGNpcmN1bGFyXHJcbiAgICAvLyBkZXBlbmRlbmN5IGJldHdlZW4gdGhlIGVycm9yIGFuZCBhc3NlcnQgbW9kdWxlcyB3aGljaCBkb2Vzbid0IHdvcmsuKVxyXG4gICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xyXG59XHJcbi8qKlxyXG4gKiBGYWlscyBpZiB0aGUgZ2l2ZW4gYXNzZXJ0aW9uIGNvbmRpdGlvbiBpcyBmYWxzZSwgdGhyb3dpbmcgYW4gRXJyb3Igd2l0aCB0aGVcclxuICogZ2l2ZW4gbWVzc2FnZSBpZiBpdCBkaWQuXHJcbiAqXHJcbiAqIEBwYXJhbSBhc3NlcnRpb25cclxuICogQHBhcmFtIG1lc3NhZ2VcclxuICovXHJcbmZ1bmN0aW9uIGRlYnVnQXNzZXJ0KGFzc2VydGlvbiwgbWVzc2FnZSkge1xyXG4gICAgaWYgKCFhc3NlcnRpb24pIHtcclxuICAgICAgICBkZWJ1Z0ZhaWwobWVzc2FnZSk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gX2dldEN1cnJlbnRVcmwoKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICByZXR1cm4gKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyAmJiAoKF9hID0gc2VsZi5sb2NhdGlvbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmhyZWYpKSB8fCAnJztcclxufVxyXG5mdW5jdGlvbiBfaXNIdHRwT3JIdHRwcygpIHtcclxuICAgIHJldHVybiBfZ2V0Q3VycmVudFNjaGVtZSgpID09PSAnaHR0cDonIHx8IF9nZXRDdXJyZW50U2NoZW1lKCkgPT09ICdodHRwczonO1xyXG59XHJcbmZ1bmN0aW9uIF9nZXRDdXJyZW50U2NoZW1lKCkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgcmV0dXJuICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgJiYgKChfYSA9IHNlbGYubG9jYXRpb24pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wcm90b2NvbCkpIHx8IG51bGw7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIERldGVybWluZSB3aGV0aGVyIHRoZSBicm93c2VyIGlzIHdvcmtpbmcgb25saW5lXHJcbiAqL1xyXG5mdW5jdGlvbiBfaXNPbmxpbmUoKSB7XHJcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICBuYXZpZ2F0b3IgJiZcclxuICAgICAgICAnb25MaW5lJyBpbiBuYXZpZ2F0b3IgJiZcclxuICAgICAgICB0eXBlb2YgbmF2aWdhdG9yLm9uTGluZSA9PT0gJ2Jvb2xlYW4nICYmXHJcbiAgICAgICAgLy8gQXBwbHkgb25seSBmb3IgdHJhZGl0aW9uYWwgd2ViIGFwcHMgYW5kIENocm9tZSBleHRlbnNpb25zLlxyXG4gICAgICAgIC8vIFRoaXMgaXMgZXNwZWNpYWxseSB0cnVlIGZvciBDb3Jkb3ZhIGFwcHMgd2hpY2ggaGF2ZSB1bnJlbGlhYmxlXHJcbiAgICAgICAgLy8gbmF2aWdhdG9yLm9uTGluZSBiZWhhdmlvciB1bmxlc3MgY29yZG92YS1wbHVnaW4tbmV0d29yay1pbmZvcm1hdGlvbiBpc1xyXG4gICAgICAgIC8vIGluc3RhbGxlZCB3aGljaCBvdmVyd3JpdGVzIHRoZSBuYXRpdmUgbmF2aWdhdG9yLm9uTGluZSB2YWx1ZSBhbmRcclxuICAgICAgICAvLyBkZWZpbmVzIG5hdmlnYXRvci5jb25uZWN0aW9uLlxyXG4gICAgICAgIChfaXNIdHRwT3JIdHRwcygpIHx8IGlzQnJvd3NlckV4dGVuc2lvbigpIHx8ICdjb25uZWN0aW9uJyBpbiBuYXZpZ2F0b3IpKSB7XHJcbiAgICAgICAgcmV0dXJuIG5hdmlnYXRvci5vbkxpbmU7XHJcbiAgICB9XHJcbiAgICAvLyBJZiB3ZSBjYW4ndCBkZXRlcm1pbmUgdGhlIHN0YXRlLCBhc3N1bWUgaXQgaXMgb25saW5lLlxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuZnVuY3Rpb24gX2dldFVzZXJMYW5ndWFnZSgpIHtcclxuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbmF2aWdhdG9yTGFuZ3VhZ2UgPSBuYXZpZ2F0b3I7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgLy8gTW9zdCByZWxpYWJsZSwgYnV0IG9ubHkgc3VwcG9ydGVkIGluIENocm9tZS9GaXJlZm94LlxyXG4gICAgKG5hdmlnYXRvckxhbmd1YWdlLmxhbmd1YWdlcyAmJiBuYXZpZ2F0b3JMYW5ndWFnZS5sYW5ndWFnZXNbMF0pIHx8XHJcbiAgICAgICAgLy8gU3VwcG9ydGVkIGluIG1vc3QgYnJvd3NlcnMsIGJ1dCByZXR1cm5zIHRoZSBsYW5ndWFnZSBvZiB0aGUgYnJvd3NlclxyXG4gICAgICAgIC8vIFVJLCBub3QgdGhlIGxhbmd1YWdlIHNldCBpbiBicm93c2VyIHNldHRpbmdzLlxyXG4gICAgICAgIG5hdmlnYXRvckxhbmd1YWdlLmxhbmd1YWdlIHx8XHJcbiAgICAgICAgLy8gQ291bGRuJ3QgZGV0ZXJtaW5lIGxhbmd1YWdlLlxyXG4gICAgICAgIG51bGwpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBIHN0cnVjdHVyZSB0byBoZWxwIHBpY2sgYmV0d2VlbiBhIHJhbmdlIG9mIGxvbmcgYW5kIHNob3J0IGRlbGF5IGR1cmF0aW9uc1xyXG4gKiBkZXBlbmRpbmcgb24gdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQuIEluIGdlbmVyYWwsIHRoZSBsb25nIGRlbGF5IGlzIHVzZWQgZm9yXHJcbiAqIG1vYmlsZSBlbnZpcm9ubWVudHMgd2hlcmVhcyBzaG9ydCBkZWxheXMgYXJlIHVzZWQgZm9yIGRlc2t0b3AgZW52aXJvbm1lbnRzLlxyXG4gKi9cclxuY2xhc3MgRGVsYXkge1xyXG4gICAgY29uc3RydWN0b3Ioc2hvcnREZWxheSwgbG9uZ0RlbGF5KSB7XHJcbiAgICAgICAgdGhpcy5zaG9ydERlbGF5ID0gc2hvcnREZWxheTtcclxuICAgICAgICB0aGlzLmxvbmdEZWxheSA9IGxvbmdEZWxheTtcclxuICAgICAgICAvLyBJbnRlcm5hbCBlcnJvciB3aGVuIGltcHJvcGVybHkgaW5pdGlhbGl6ZWQuXHJcbiAgICAgICAgZGVidWdBc3NlcnQobG9uZ0RlbGF5ID4gc2hvcnREZWxheSwgJ1Nob3J0IGRlbGF5IHNob3VsZCBiZSBsZXNzIHRoYW4gbG9uZyBkZWxheSEnKTtcclxuICAgICAgICB0aGlzLmlzTW9iaWxlID0gaXNNb2JpbGVDb3Jkb3ZhKCkgfHwgaXNSZWFjdE5hdGl2ZSgpO1xyXG4gICAgfVxyXG4gICAgZ2V0KCkge1xyXG4gICAgICAgIGlmICghX2lzT25saW5lKCkpIHtcclxuICAgICAgICAgICAgLy8gUGljayB0aGUgc2hvcnRlciB0aW1lb3V0LlxyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5taW4oNTAwMCAvKiBEZWxheU1pbi5PRkZMSU5FICovLCB0aGlzLnNob3J0RGVsYXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJZiBydW5uaW5nIGluIGEgbW9iaWxlIGVudmlyb25tZW50LCByZXR1cm4gdGhlIGxvbmcgZGVsYXksIG90aGVyd2lzZVxyXG4gICAgICAgIC8vIHJldHVybiB0aGUgc2hvcnQgZGVsYXkuXHJcbiAgICAgICAgLy8gVGhpcyBjb3VsZCBiZSBpbXByb3ZlZCBpbiB0aGUgZnV0dXJlIHRvIGR5bmFtaWNhbGx5IGNoYW5nZSBiYXNlZCBvbiBvdGhlclxyXG4gICAgICAgIC8vIHZhcmlhYmxlcyBpbnN0ZWFkIG9mIGp1c3QgcmVhZGluZyB0aGUgY3VycmVudCBlbnZpcm9ubWVudC5cclxuICAgICAgICByZXR1cm4gdGhpcy5pc01vYmlsZSA/IHRoaXMubG9uZ0RlbGF5IDogdGhpcy5zaG9ydERlbGF5O1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIF9lbXVsYXRvclVybChjb25maWcsIHBhdGgpIHtcclxuICAgIGRlYnVnQXNzZXJ0KGNvbmZpZy5lbXVsYXRvciwgJ0VtdWxhdG9yIHNob3VsZCBhbHdheXMgYmUgc2V0IGhlcmUnKTtcclxuICAgIGNvbnN0IHsgdXJsIH0gPSBjb25maWcuZW11bGF0b3I7XHJcbiAgICBpZiAoIXBhdGgpIHtcclxuICAgICAgICByZXR1cm4gdXJsO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGAke3VybH0ke3BhdGguc3RhcnRzV2l0aCgnLycpID8gcGF0aC5zbGljZSgxKSA6IHBhdGh9YDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBGZXRjaFByb3ZpZGVyIHtcclxuICAgIHN0YXRpYyBpbml0aWFsaXplKGZldGNoSW1wbCwgaGVhZGVyc0ltcGwsIHJlc3BvbnNlSW1wbCkge1xyXG4gICAgICAgIHRoaXMuZmV0Y2hJbXBsID0gZmV0Y2hJbXBsO1xyXG4gICAgICAgIGlmIChoZWFkZXJzSW1wbCkge1xyXG4gICAgICAgICAgICB0aGlzLmhlYWRlcnNJbXBsID0gaGVhZGVyc0ltcGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZXNwb25zZUltcGwpIHtcclxuICAgICAgICAgICAgdGhpcy5yZXNwb25zZUltcGwgPSByZXNwb25zZUltcGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc3RhdGljIGZldGNoKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmZldGNoSW1wbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mZXRjaEltcGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgJiYgJ2ZldGNoJyBpbiBzZWxmKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmZldGNoO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnICYmIGdsb2JhbFRoaXMuZmV0Y2gpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGdsb2JhbFRoaXMuZmV0Y2g7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2YgZmV0Y2ggIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmZXRjaDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGVidWdGYWlsKCdDb3VsZCBub3QgZmluZCBmZXRjaCBpbXBsZW1lbnRhdGlvbiwgbWFrZSBzdXJlIHlvdSBjYWxsIEZldGNoUHJvdmlkZXIuaW5pdGlhbGl6ZSgpIHdpdGggYW4gYXBwcm9wcmlhdGUgcG9seWZpbGwnKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBoZWFkZXJzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmhlYWRlcnNJbXBsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhlYWRlcnNJbXBsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnICYmICdIZWFkZXJzJyBpbiBzZWxmKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLkhlYWRlcnM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgJiYgZ2xvYmFsVGhpcy5IZWFkZXJzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBnbG9iYWxUaGlzLkhlYWRlcnM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2YgSGVhZGVycyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEhlYWRlcnM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRlYnVnRmFpbCgnQ291bGQgbm90IGZpbmQgSGVhZGVycyBpbXBsZW1lbnRhdGlvbiwgbWFrZSBzdXJlIHlvdSBjYWxsIEZldGNoUHJvdmlkZXIuaW5pdGlhbGl6ZSgpIHdpdGggYW4gYXBwcm9wcmlhdGUgcG9seWZpbGwnKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyByZXNwb25zZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5yZXNwb25zZUltcGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVzcG9uc2VJbXBsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnICYmICdSZXNwb25zZScgaW4gc2VsZikge1xyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5SZXNwb25zZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyAmJiBnbG9iYWxUaGlzLlJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBnbG9iYWxUaGlzLlJlc3BvbnNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIFJlc3BvbnNlICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICByZXR1cm4gUmVzcG9uc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRlYnVnRmFpbCgnQ291bGQgbm90IGZpbmQgUmVzcG9uc2UgaW1wbGVtZW50YXRpb24sIG1ha2Ugc3VyZSB5b3UgY2FsbCBGZXRjaFByb3ZpZGVyLmluaXRpYWxpemUoKSB3aXRoIGFuIGFwcHJvcHJpYXRlIHBvbHlmaWxsJyk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIE1hcCBmcm9tIGVycm9ycyByZXR1cm5lZCBieSB0aGUgc2VydmVyIHRvIGVycm9ycyB0byBkZXZlbG9wZXIgdmlzaWJsZSBlcnJvcnNcclxuICovXHJcbmNvbnN0IFNFUlZFUl9FUlJPUl9NQVAgPSB7XHJcbiAgICAvLyBDdXN0b20gdG9rZW4gZXJyb3JzLlxyXG4gICAgW1wiQ1JFREVOVElBTF9NSVNNQVRDSFwiIC8qIFNlcnZlckVycm9yLkNSRURFTlRJQUxfTUlTTUFUQ0ggKi9dOiBcImN1c3RvbS10b2tlbi1taXNtYXRjaFwiIC8qIEF1dGhFcnJvckNvZGUuQ1JFREVOVElBTF9NSVNNQVRDSCAqLyxcclxuICAgIC8vIFRoaXMgY2FuIG9ubHkgaGFwcGVuIGlmIHRoZSBTREsgc2VuZHMgYSBiYWQgcmVxdWVzdC5cclxuICAgIFtcIk1JU1NJTkdfQ1VTVE9NX1RPS0VOXCIgLyogU2VydmVyRXJyb3IuTUlTU0lOR19DVVNUT01fVE9LRU4gKi9dOiBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLyxcclxuICAgIC8vIENyZWF0ZSBBdXRoIFVSSSBlcnJvcnMuXHJcbiAgICBbXCJJTlZBTElEX0lERU5USUZJRVJcIiAvKiBTZXJ2ZXJFcnJvci5JTlZBTElEX0lERU5USUZJRVIgKi9dOiBcImludmFsaWQtZW1haWxcIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfRU1BSUwgKi8sXHJcbiAgICAvLyBUaGlzIGNhbiBvbmx5IGhhcHBlbiBpZiB0aGUgU0RLIHNlbmRzIGEgYmFkIHJlcXVlc3QuXHJcbiAgICBbXCJNSVNTSU5HX0NPTlRJTlVFX1VSSVwiIC8qIFNlcnZlckVycm9yLk1JU1NJTkdfQ09OVElOVUVfVVJJICovXTogXCJpbnRlcm5hbC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IgKi8sXHJcbiAgICAvLyBTaWduIGluIHdpdGggZW1haWwgYW5kIHBhc3N3b3JkIGVycm9ycyAoc29tZSBhcHBseSB0byBzaWduIHVwIHRvbykuXHJcbiAgICBbXCJJTlZBTElEX1BBU1NXT1JEXCIgLyogU2VydmVyRXJyb3IuSU5WQUxJRF9QQVNTV09SRCAqL106IFwid3JvbmctcGFzc3dvcmRcIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfUEFTU1dPUkQgKi8sXHJcbiAgICAvLyBUaGlzIGNhbiBvbmx5IGhhcHBlbiBpZiB0aGUgU0RLIHNlbmRzIGEgYmFkIHJlcXVlc3QuXHJcbiAgICBbXCJNSVNTSU5HX1BBU1NXT1JEXCIgLyogU2VydmVyRXJyb3IuTUlTU0lOR19QQVNTV09SRCAqL106IFwibWlzc2luZy1wYXNzd29yZFwiIC8qIEF1dGhFcnJvckNvZGUuTUlTU0lOR19QQVNTV09SRCAqLyxcclxuICAgIC8vIFRocm93biBpZiBFbWFpbCBFbnVtZXJhdGlvbiBQcm90ZWN0aW9uIGlzIGVuYWJsZWQgaW4gdGhlIHByb2plY3QgYW5kIHRoZSBlbWFpbCBvciBwYXNzd29yZCBpc1xyXG4gICAgLy8gaW52YWxpZC5cclxuICAgIFtcIklOVkFMSURfTE9HSU5fQ1JFREVOVElBTFNcIiAvKiBTZXJ2ZXJFcnJvci5JTlZBTElEX0xPR0lOX0NSRURFTlRJQUxTICovXTogXCJpbnZhbGlkLWNyZWRlbnRpYWxcIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfQ1JFREVOVElBTCAqLyxcclxuICAgIC8vIFNpZ24gdXAgd2l0aCBlbWFpbCBhbmQgcGFzc3dvcmQgZXJyb3JzLlxyXG4gICAgW1wiRU1BSUxfRVhJU1RTXCIgLyogU2VydmVyRXJyb3IuRU1BSUxfRVhJU1RTICovXTogXCJlbWFpbC1hbHJlYWR5LWluLXVzZVwiIC8qIEF1dGhFcnJvckNvZGUuRU1BSUxfRVhJU1RTICovLFxyXG4gICAgW1wiUEFTU1dPUkRfTE9HSU5fRElTQUJMRURcIiAvKiBTZXJ2ZXJFcnJvci5QQVNTV09SRF9MT0dJTl9ESVNBQkxFRCAqL106IFwib3BlcmF0aW9uLW5vdC1hbGxvd2VkXCIgLyogQXV0aEVycm9yQ29kZS5PUEVSQVRJT05fTk9UX0FMTE9XRUQgKi8sXHJcbiAgICAvLyBWZXJpZnkgYXNzZXJ0aW9uIGZvciBzaWduIGluIHdpdGggY3JlZGVudGlhbCBlcnJvcnM6XHJcbiAgICBbXCJJTlZBTElEX0lEUF9SRVNQT05TRVwiIC8qIFNlcnZlckVycm9yLklOVkFMSURfSURQX1JFU1BPTlNFICovXTogXCJpbnZhbGlkLWNyZWRlbnRpYWxcIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfQ1JFREVOVElBTCAqLyxcclxuICAgIFtcIklOVkFMSURfUEVORElOR19UT0tFTlwiIC8qIFNlcnZlckVycm9yLklOVkFMSURfUEVORElOR19UT0tFTiAqL106IFwiaW52YWxpZC1jcmVkZW50aWFsXCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX0NSRURFTlRJQUwgKi8sXHJcbiAgICBbXCJGRURFUkFURURfVVNFUl9JRF9BTFJFQURZX0xJTktFRFwiIC8qIFNlcnZlckVycm9yLkZFREVSQVRFRF9VU0VSX0lEX0FMUkVBRFlfTElOS0VEICovXTogXCJjcmVkZW50aWFsLWFscmVhZHktaW4tdXNlXCIgLyogQXV0aEVycm9yQ29kZS5DUkVERU5USUFMX0FMUkVBRFlfSU5fVVNFICovLFxyXG4gICAgLy8gVGhpcyBjYW4gb25seSBoYXBwZW4gaWYgdGhlIFNESyBzZW5kcyBhIGJhZCByZXF1ZXN0LlxyXG4gICAgW1wiTUlTU0lOR19SRVFfVFlQRVwiIC8qIFNlcnZlckVycm9yLk1JU1NJTkdfUkVRX1RZUEUgKi9dOiBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLyxcclxuICAgIC8vIFNlbmQgUGFzc3dvcmQgcmVzZXQgZW1haWwgZXJyb3JzOlxyXG4gICAgW1wiRU1BSUxfTk9UX0ZPVU5EXCIgLyogU2VydmVyRXJyb3IuRU1BSUxfTk9UX0ZPVU5EICovXTogXCJ1c2VyLW5vdC1mb3VuZFwiIC8qIEF1dGhFcnJvckNvZGUuVVNFUl9ERUxFVEVEICovLFxyXG4gICAgW1wiUkVTRVRfUEFTU1dPUkRfRVhDRUVEX0xJTUlUXCIgLyogU2VydmVyRXJyb3IuUkVTRVRfUEFTU1dPUkRfRVhDRUVEX0xJTUlUICovXTogXCJ0b28tbWFueS1yZXF1ZXN0c1wiIC8qIEF1dGhFcnJvckNvZGUuVE9PX01BTllfQVRURU1QVFNfVFJZX0xBVEVSICovLFxyXG4gICAgW1wiRVhQSVJFRF9PT0JfQ09ERVwiIC8qIFNlcnZlckVycm9yLkVYUElSRURfT09CX0NPREUgKi9dOiBcImV4cGlyZWQtYWN0aW9uLWNvZGVcIiAvKiBBdXRoRXJyb3JDb2RlLkVYUElSRURfT09CX0NPREUgKi8sXHJcbiAgICBbXCJJTlZBTElEX09PQl9DT0RFXCIgLyogU2VydmVyRXJyb3IuSU5WQUxJRF9PT0JfQ09ERSAqL106IFwiaW52YWxpZC1hY3Rpb24tY29kZVwiIC8qIEF1dGhFcnJvckNvZGUuSU5WQUxJRF9PT0JfQ09ERSAqLyxcclxuICAgIC8vIFRoaXMgY2FuIG9ubHkgaGFwcGVuIGlmIHRoZSBTREsgc2VuZHMgYSBiYWQgcmVxdWVzdC5cclxuICAgIFtcIk1JU1NJTkdfT09CX0NPREVcIiAvKiBTZXJ2ZXJFcnJvci5NSVNTSU5HX09PQl9DT0RFICovXTogXCJpbnRlcm5hbC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IgKi8sXHJcbiAgICAvLyBPcGVyYXRpb25zIHRoYXQgcmVxdWlyZSBJRCB0b2tlbiBpbiByZXF1ZXN0OlxyXG4gICAgW1wiQ1JFREVOVElBTF9UT09fT0xEX0xPR0lOX0FHQUlOXCIgLyogU2VydmVyRXJyb3IuQ1JFREVOVElBTF9UT09fT0xEX0xPR0lOX0FHQUlOICovXTogXCJyZXF1aXJlcy1yZWNlbnQtbG9naW5cIiAvKiBBdXRoRXJyb3JDb2RlLkNSRURFTlRJQUxfVE9PX09MRF9MT0dJTl9BR0FJTiAqLyxcclxuICAgIFtcIklOVkFMSURfSURfVE9LRU5cIiAvKiBTZXJ2ZXJFcnJvci5JTlZBTElEX0lEX1RPS0VOICovXTogXCJpbnZhbGlkLXVzZXItdG9rZW5cIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfQVVUSCAqLyxcclxuICAgIFtcIlRPS0VOX0VYUElSRURcIiAvKiBTZXJ2ZXJFcnJvci5UT0tFTl9FWFBJUkVEICovXTogXCJ1c2VyLXRva2VuLWV4cGlyZWRcIiAvKiBBdXRoRXJyb3JDb2RlLlRPS0VOX0VYUElSRUQgKi8sXHJcbiAgICBbXCJVU0VSX05PVF9GT1VORFwiIC8qIFNlcnZlckVycm9yLlVTRVJfTk9UX0ZPVU5EICovXTogXCJ1c2VyLXRva2VuLWV4cGlyZWRcIiAvKiBBdXRoRXJyb3JDb2RlLlRPS0VOX0VYUElSRUQgKi8sXHJcbiAgICAvLyBPdGhlciBlcnJvcnMuXHJcbiAgICBbXCJUT09fTUFOWV9BVFRFTVBUU19UUllfTEFURVJcIiAvKiBTZXJ2ZXJFcnJvci5UT09fTUFOWV9BVFRFTVBUU19UUllfTEFURVIgKi9dOiBcInRvby1tYW55LXJlcXVlc3RzXCIgLyogQXV0aEVycm9yQ29kZS5UT09fTUFOWV9BVFRFTVBUU19UUllfTEFURVIgKi8sXHJcbiAgICBbXCJQQVNTV09SRF9ET0VTX05PVF9NRUVUX1JFUVVJUkVNRU5UU1wiIC8qIFNlcnZlckVycm9yLlBBU1NXT1JEX0RPRVNfTk9UX01FRVRfUkVRVUlSRU1FTlRTICovXTogXCJwYXNzd29yZC1kb2VzLW5vdC1tZWV0LXJlcXVpcmVtZW50c1wiIC8qIEF1dGhFcnJvckNvZGUuUEFTU1dPUkRfRE9FU19OT1RfTUVFVF9SRVFVSVJFTUVOVFMgKi8sXHJcbiAgICAvLyBQaG9uZSBBdXRoIHJlbGF0ZWQgZXJyb3JzLlxyXG4gICAgW1wiSU5WQUxJRF9DT0RFXCIgLyogU2VydmVyRXJyb3IuSU5WQUxJRF9DT0RFICovXTogXCJpbnZhbGlkLXZlcmlmaWNhdGlvbi1jb2RlXCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX0NPREUgKi8sXHJcbiAgICBbXCJJTlZBTElEX1NFU1NJT05fSU5GT1wiIC8qIFNlcnZlckVycm9yLklOVkFMSURfU0VTU0lPTl9JTkZPICovXTogXCJpbnZhbGlkLXZlcmlmaWNhdGlvbi1pZFwiIC8qIEF1dGhFcnJvckNvZGUuSU5WQUxJRF9TRVNTSU9OX0lORk8gKi8sXHJcbiAgICBbXCJJTlZBTElEX1RFTVBPUkFSWV9QUk9PRlwiIC8qIFNlcnZlckVycm9yLklOVkFMSURfVEVNUE9SQVJZX1BST09GICovXTogXCJpbnZhbGlkLWNyZWRlbnRpYWxcIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfQ1JFREVOVElBTCAqLyxcclxuICAgIFtcIk1JU1NJTkdfU0VTU0lPTl9JTkZPXCIgLyogU2VydmVyRXJyb3IuTUlTU0lOR19TRVNTSU9OX0lORk8gKi9dOiBcIm1pc3NpbmctdmVyaWZpY2F0aW9uLWlkXCIgLyogQXV0aEVycm9yQ29kZS5NSVNTSU5HX1NFU1NJT05fSU5GTyAqLyxcclxuICAgIFtcIlNFU1NJT05fRVhQSVJFRFwiIC8qIFNlcnZlckVycm9yLlNFU1NJT05fRVhQSVJFRCAqL106IFwiY29kZS1leHBpcmVkXCIgLyogQXV0aEVycm9yQ29kZS5DT0RFX0VYUElSRUQgKi8sXHJcbiAgICAvLyBPdGhlciBhY3Rpb24gY29kZSBlcnJvcnMgd2hlbiBhZGRpdGlvbmFsIHNldHRpbmdzIHBhc3NlZC5cclxuICAgIC8vIE1JU1NJTkdfQ09OVElOVUVfVVJJIGlzIGdldHRpbmcgbWFwcGVkIHRvIElOVEVSTkFMX0VSUk9SIGFib3ZlLlxyXG4gICAgLy8gVGhpcyBpcyBPSyBhcyB0aGlzIGVycm9yIHdpbGwgYmUgY2F1Z2h0IGJ5IGNsaWVudCBzaWRlIHZhbGlkYXRpb24uXHJcbiAgICBbXCJNSVNTSU5HX0FORFJPSURfUEFDS0FHRV9OQU1FXCIgLyogU2VydmVyRXJyb3IuTUlTU0lOR19BTkRST0lEX1BBQ0tBR0VfTkFNRSAqL106IFwibWlzc2luZy1hbmRyb2lkLXBrZy1uYW1lXCIgLyogQXV0aEVycm9yQ29kZS5NSVNTSU5HX0FORFJPSURfUEFDS0FHRV9OQU1FICovLFxyXG4gICAgW1wiVU5BVVRIT1JJWkVEX0RPTUFJTlwiIC8qIFNlcnZlckVycm9yLlVOQVVUSE9SSVpFRF9ET01BSU4gKi9dOiBcInVuYXV0aG9yaXplZC1jb250aW51ZS11cmlcIiAvKiBBdXRoRXJyb3JDb2RlLlVOQVVUSE9SSVpFRF9ET01BSU4gKi8sXHJcbiAgICAvLyBnZXRQcm9qZWN0Q29uZmlnIGVycm9ycyB3aGVuIGNsaWVudElkIGlzIHBhc3NlZC5cclxuICAgIFtcIklOVkFMSURfT0FVVEhfQ0xJRU5UX0lEXCIgLyogU2VydmVyRXJyb3IuSU5WQUxJRF9PQVVUSF9DTElFTlRfSUQgKi9dOiBcImludmFsaWQtb2F1dGgtY2xpZW50LWlkXCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX09BVVRIX0NMSUVOVF9JRCAqLyxcclxuICAgIC8vIFVzZXIgYWN0aW9ucyAoc2lnbi11cCBvciBkZWxldGlvbikgZGlzYWJsZWQgZXJyb3JzLlxyXG4gICAgW1wiQURNSU5fT05MWV9PUEVSQVRJT05cIiAvKiBTZXJ2ZXJFcnJvci5BRE1JTl9PTkxZX09QRVJBVElPTiAqL106IFwiYWRtaW4tcmVzdHJpY3RlZC1vcGVyYXRpb25cIiAvKiBBdXRoRXJyb3JDb2RlLkFETUlOX09OTFlfT1BFUkFUSU9OICovLFxyXG4gICAgLy8gTXVsdGkgZmFjdG9yIHJlbGF0ZWQgZXJyb3JzLlxyXG4gICAgW1wiSU5WQUxJRF9NRkFfUEVORElOR19DUkVERU5USUFMXCIgLyogU2VydmVyRXJyb3IuSU5WQUxJRF9NRkFfUEVORElOR19DUkVERU5USUFMICovXTogXCJpbnZhbGlkLW11bHRpLWZhY3Rvci1zZXNzaW9uXCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX01GQV9TRVNTSU9OICovLFxyXG4gICAgW1wiTUZBX0VOUk9MTE1FTlRfTk9UX0ZPVU5EXCIgLyogU2VydmVyRXJyb3IuTUZBX0VOUk9MTE1FTlRfTk9UX0ZPVU5EICovXTogXCJtdWx0aS1mYWN0b3ItaW5mby1ub3QtZm91bmRcIiAvKiBBdXRoRXJyb3JDb2RlLk1GQV9JTkZPX05PVF9GT1VORCAqLyxcclxuICAgIFtcIk1JU1NJTkdfTUZBX0VOUk9MTE1FTlRfSURcIiAvKiBTZXJ2ZXJFcnJvci5NSVNTSU5HX01GQV9FTlJPTExNRU5UX0lEICovXTogXCJtaXNzaW5nLW11bHRpLWZhY3Rvci1pbmZvXCIgLyogQXV0aEVycm9yQ29kZS5NSVNTSU5HX01GQV9JTkZPICovLFxyXG4gICAgW1wiTUlTU0lOR19NRkFfUEVORElOR19DUkVERU5USUFMXCIgLyogU2VydmVyRXJyb3IuTUlTU0lOR19NRkFfUEVORElOR19DUkVERU5USUFMICovXTogXCJtaXNzaW5nLW11bHRpLWZhY3Rvci1zZXNzaW9uXCIgLyogQXV0aEVycm9yQ29kZS5NSVNTSU5HX01GQV9TRVNTSU9OICovLFxyXG4gICAgW1wiU0VDT05EX0ZBQ1RPUl9FWElTVFNcIiAvKiBTZXJ2ZXJFcnJvci5TRUNPTkRfRkFDVE9SX0VYSVNUUyAqL106IFwic2Vjb25kLWZhY3Rvci1hbHJlYWR5LWluLXVzZVwiIC8qIEF1dGhFcnJvckNvZGUuU0VDT05EX0ZBQ1RPUl9BTFJFQURZX0VOUk9MTEVEICovLFxyXG4gICAgW1wiU0VDT05EX0ZBQ1RPUl9MSU1JVF9FWENFRURFRFwiIC8qIFNlcnZlckVycm9yLlNFQ09ORF9GQUNUT1JfTElNSVRfRVhDRUVERUQgKi9dOiBcIm1heGltdW0tc2Vjb25kLWZhY3Rvci1jb3VudC1leGNlZWRlZFwiIC8qIEF1dGhFcnJvckNvZGUuU0VDT05EX0ZBQ1RPUl9MSU1JVF9FWENFRURFRCAqLyxcclxuICAgIC8vIEJsb2NraW5nIGZ1bmN0aW9ucyByZWxhdGVkIGVycm9ycy5cclxuICAgIFtcIkJMT0NLSU5HX0ZVTkNUSU9OX0VSUk9SX1JFU1BPTlNFXCIgLyogU2VydmVyRXJyb3IuQkxPQ0tJTkdfRlVOQ1RJT05fRVJST1JfUkVTUE9OU0UgKi9dOiBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLyxcclxuICAgIC8vIFJlY2FwdGNoYSByZWxhdGVkIGVycm9ycy5cclxuICAgIFtcIlJFQ0FQVENIQV9OT1RfRU5BQkxFRFwiIC8qIFNlcnZlckVycm9yLlJFQ0FQVENIQV9OT1RfRU5BQkxFRCAqL106IFwicmVjYXB0Y2hhLW5vdC1lbmFibGVkXCIgLyogQXV0aEVycm9yQ29kZS5SRUNBUFRDSEFfTk9UX0VOQUJMRUQgKi8sXHJcbiAgICBbXCJNSVNTSU5HX1JFQ0FQVENIQV9UT0tFTlwiIC8qIFNlcnZlckVycm9yLk1JU1NJTkdfUkVDQVBUQ0hBX1RPS0VOICovXTogXCJtaXNzaW5nLXJlY2FwdGNoYS10b2tlblwiIC8qIEF1dGhFcnJvckNvZGUuTUlTU0lOR19SRUNBUFRDSEFfVE9LRU4gKi8sXHJcbiAgICBbXCJJTlZBTElEX1JFQ0FQVENIQV9UT0tFTlwiIC8qIFNlcnZlckVycm9yLklOVkFMSURfUkVDQVBUQ0hBX1RPS0VOICovXTogXCJpbnZhbGlkLXJlY2FwdGNoYS10b2tlblwiIC8qIEF1dGhFcnJvckNvZGUuSU5WQUxJRF9SRUNBUFRDSEFfVE9LRU4gKi8sXHJcbiAgICBbXCJJTlZBTElEX1JFQ0FQVENIQV9BQ1RJT05cIiAvKiBTZXJ2ZXJFcnJvci5JTlZBTElEX1JFQ0FQVENIQV9BQ1RJT04gKi9dOiBcImludmFsaWQtcmVjYXB0Y2hhLWFjdGlvblwiIC8qIEF1dGhFcnJvckNvZGUuSU5WQUxJRF9SRUNBUFRDSEFfQUNUSU9OICovLFxyXG4gICAgW1wiTUlTU0lOR19DTElFTlRfVFlQRVwiIC8qIFNlcnZlckVycm9yLk1JU1NJTkdfQ0xJRU5UX1RZUEUgKi9dOiBcIm1pc3NpbmctY2xpZW50LXR5cGVcIiAvKiBBdXRoRXJyb3JDb2RlLk1JU1NJTkdfQ0xJRU5UX1RZUEUgKi8sXHJcbiAgICBbXCJNSVNTSU5HX1JFQ0FQVENIQV9WRVJTSU9OXCIgLyogU2VydmVyRXJyb3IuTUlTU0lOR19SRUNBUFRDSEFfVkVSU0lPTiAqL106IFwibWlzc2luZy1yZWNhcHRjaGEtdmVyc2lvblwiIC8qIEF1dGhFcnJvckNvZGUuTUlTU0lOR19SRUNBUFRDSEFfVkVSU0lPTiAqLyxcclxuICAgIFtcIklOVkFMSURfUkVDQVBUQ0hBX1ZFUlNJT05cIiAvKiBTZXJ2ZXJFcnJvci5JTlZBTElEX1JFQ0FQVENIQV9WRVJTSU9OICovXTogXCJpbnZhbGlkLXJlY2FwdGNoYS12ZXJzaW9uXCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX1JFQ0FQVENIQV9WRVJTSU9OICovLFxyXG4gICAgW1wiSU5WQUxJRF9SRVFfVFlQRVwiIC8qIFNlcnZlckVycm9yLklOVkFMSURfUkVRX1RZUEUgKi9dOiBcImludmFsaWQtcmVxLXR5cGVcIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfUkVRX1RZUEUgKi9cclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9BUElfVElNRU9VVF9NUyA9IG5ldyBEZWxheSgzMDAwMCwgNjAwMDApO1xyXG5mdW5jdGlvbiBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgaWYgKGF1dGgudGVuYW50SWQgJiYgIXJlcXVlc3QudGVuYW50SWQpIHtcclxuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXF1ZXN0KSwgeyB0ZW5hbnRJZDogYXV0aC50ZW5hbnRJZCB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXF1ZXN0O1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBtZXRob2QsIHBhdGgsIHJlcXVlc3QsIGN1c3RvbUVycm9yTWFwID0ge30pIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUZldGNoV2l0aEVycm9ySGFuZGxpbmcoYXV0aCwgY3VzdG9tRXJyb3JNYXAsIGFzeW5jICgpID0+IHtcclxuICAgICAgICBsZXQgYm9keSA9IHt9O1xyXG4gICAgICAgIGxldCBwYXJhbXMgPSB7fTtcclxuICAgICAgICBpZiAocmVxdWVzdCkge1xyXG4gICAgICAgICAgICBpZiAobWV0aG9kID09PSBcIkdFVFwiIC8qIEh0dHBNZXRob2QuR0VUICovKSB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXMgPSByZXF1ZXN0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYm9keSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBxdWVyeSA9IHF1ZXJ5c3RyaW5nKE9iamVjdC5hc3NpZ24oeyBrZXk6IGF1dGguY29uZmlnLmFwaUtleSB9LCBwYXJhbXMpKS5zbGljZSgxKTtcclxuICAgICAgICBjb25zdCBoZWFkZXJzID0gYXdhaXQgYXV0aC5fZ2V0QWRkaXRpb25hbEhlYWRlcnMoKTtcclxuICAgICAgICBoZWFkZXJzW1wiQ29udGVudC1UeXBlXCIgLyogSHR0cEhlYWRlci5DT05URU5UX1RZUEUgKi9dID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xyXG4gICAgICAgIGlmIChhdXRoLmxhbmd1YWdlQ29kZSkge1xyXG4gICAgICAgICAgICBoZWFkZXJzW1wiWC1GaXJlYmFzZS1Mb2NhbGVcIiAvKiBIdHRwSGVhZGVyLlhfRklSRUJBU0VfTE9DQUxFICovXSA9IGF1dGgubGFuZ3VhZ2VDb2RlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gRmV0Y2hQcm92aWRlci5mZXRjaCgpKF9nZXRGaW5hbFRhcmdldChhdXRoLCBhdXRoLmNvbmZpZy5hcGlIb3N0LCBwYXRoLCBxdWVyeSksIE9iamVjdC5hc3NpZ24oeyBtZXRob2QsXHJcbiAgICAgICAgICAgIGhlYWRlcnMsIHJlZmVycmVyUG9saWN5OiAnbm8tcmVmZXJyZXInIH0sIGJvZHkpKTtcclxuICAgIH0pO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9wZXJmb3JtRmV0Y2hXaXRoRXJyb3JIYW5kbGluZyhhdXRoLCBjdXN0b21FcnJvck1hcCwgZmV0Y2hGbikge1xyXG4gICAgYXV0aC5fY2FuSW5pdEVtdWxhdG9yID0gZmFsc2U7XHJcbiAgICBjb25zdCBlcnJvck1hcCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgU0VSVkVSX0VSUk9SX01BUCksIGN1c3RvbUVycm9yTWFwKTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgbmV0d29ya1RpbWVvdXQgPSBuZXcgTmV0d29ya1RpbWVvdXQoYXV0aCk7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBQcm9taXNlLnJhY2UoW1xyXG4gICAgICAgICAgICBmZXRjaEZuKCksXHJcbiAgICAgICAgICAgIG5ldHdvcmtUaW1lb3V0LnByb21pc2VcclxuICAgICAgICBdKTtcclxuICAgICAgICAvLyBJZiB3ZSd2ZSByZWFjaGVkIHRoaXMgcG9pbnQsIHRoZSBmZXRjaCBzdWNjZWVkZWQgYW5kIHRoZSBuZXR3b3JrVGltZW91dFxyXG4gICAgICAgIC8vIGRpZG4ndCB0aHJvdzsgY2xlYXIgdGhlIG5ldHdvcmsgdGltZW91dCBkZWxheSBzbyB0aGF0IE5vZGUgd29uJ3QgaGFuZ1xyXG4gICAgICAgIG5ldHdvcmtUaW1lb3V0LmNsZWFyTmV0d29ya1RpbWVvdXQoKTtcclxuICAgICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgIGlmICgnbmVlZENvbmZpcm1hdGlvbicgaW4ganNvbikge1xyXG4gICAgICAgICAgICB0aHJvdyBfbWFrZVRhZ2dlZEVycm9yKGF1dGgsIFwiYWNjb3VudC1leGlzdHMtd2l0aC1kaWZmZXJlbnQtY3JlZGVudGlhbFwiIC8qIEF1dGhFcnJvckNvZGUuTkVFRF9DT05GSVJNQVRJT04gKi8sIGpzb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmVzcG9uc2Uub2sgJiYgISgnZXJyb3JNZXNzYWdlJyBpbiBqc29uKSkge1xyXG4gICAgICAgICAgICByZXR1cm4ganNvbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHJlc3BvbnNlLm9rID8ganNvbi5lcnJvck1lc3NhZ2UgOiBqc29uLmVycm9yLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgIGNvbnN0IFtzZXJ2ZXJFcnJvckNvZGUsIHNlcnZlckVycm9yTWVzc2FnZV0gPSBlcnJvck1lc3NhZ2Uuc3BsaXQoJyA6ICcpO1xyXG4gICAgICAgICAgICBpZiAoc2VydmVyRXJyb3JDb2RlID09PSBcIkZFREVSQVRFRF9VU0VSX0lEX0FMUkVBRFlfTElOS0VEXCIgLyogU2VydmVyRXJyb3IuRkVERVJBVEVEX1VTRVJfSURfQUxSRUFEWV9MSU5LRUQgKi8pIHtcclxuICAgICAgICAgICAgICAgIHRocm93IF9tYWtlVGFnZ2VkRXJyb3IoYXV0aCwgXCJjcmVkZW50aWFsLWFscmVhZHktaW4tdXNlXCIgLyogQXV0aEVycm9yQ29kZS5DUkVERU5USUFMX0FMUkVBRFlfSU5fVVNFICovLCBqc29uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChzZXJ2ZXJFcnJvckNvZGUgPT09IFwiRU1BSUxfRVhJU1RTXCIgLyogU2VydmVyRXJyb3IuRU1BSUxfRVhJU1RTICovKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBfbWFrZVRhZ2dlZEVycm9yKGF1dGgsIFwiZW1haWwtYWxyZWFkeS1pbi11c2VcIiAvKiBBdXRoRXJyb3JDb2RlLkVNQUlMX0VYSVNUUyAqLywganNvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoc2VydmVyRXJyb3JDb2RlID09PSBcIlVTRVJfRElTQUJMRURcIiAvKiBTZXJ2ZXJFcnJvci5VU0VSX0RJU0FCTEVEICovKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBfbWFrZVRhZ2dlZEVycm9yKGF1dGgsIFwidXNlci1kaXNhYmxlZFwiIC8qIEF1dGhFcnJvckNvZGUuVVNFUl9ESVNBQkxFRCAqLywganNvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgYXV0aEVycm9yID0gZXJyb3JNYXBbc2VydmVyRXJyb3JDb2RlXSB8fFxyXG4gICAgICAgICAgICAgICAgc2VydmVyRXJyb3JDb2RlXHJcbiAgICAgICAgICAgICAgICAgICAgLnRvTG93ZXJDYXNlKClcclxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvW19cXHNdKy9nLCAnLScpO1xyXG4gICAgICAgICAgICBpZiAoc2VydmVyRXJyb3JNZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBfZXJyb3JXaXRoQ3VzdG9tTWVzc2FnZShhdXRoLCBhdXRoRXJyb3IsIHNlcnZlckVycm9yTWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfZmFpbChhdXRoLCBhdXRoRXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IpIHtcclxuICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQ2hhbmdpbmcgdGhpcyB0byBhIGRpZmZlcmVudCBlcnJvciBjb2RlIHdpbGwgbG9nIHVzZXIgb3V0IHdoZW4gdGhlcmUgaXMgYSBuZXR3b3JrIGVycm9yXHJcbiAgICAgICAgLy8gYmVjYXVzZSB3ZSB0cmVhdCBhbnkgZXJyb3Igb3RoZXIgdGhhbiBORVRXT1JLX1JFUVVFU1RfRkFJTEVEIGFzIHRva2VuIGlzIGludmFsaWQuXHJcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWpzLXNkay9ibG9iLzRmYmM3MzYxMGQ3MGJlNGUwODUyZTdkZTYzYTM5Y2I3ODk3ZTg1NDYvcGFja2FnZXMvYXV0aC9zcmMvY29yZS9hdXRoL2F1dGhfaW1wbC50cyNMMzA5LUwzMTZcclxuICAgICAgICBfZmFpbChhdXRoLCBcIm5ldHdvcmstcmVxdWVzdC1mYWlsZWRcIiAvKiBBdXRoRXJyb3JDb2RlLk5FVFdPUktfUkVRVUVTVF9GQUlMRUQgKi8sIHsgJ21lc3NhZ2UnOiBTdHJpbmcoZSkgfSk7XHJcbiAgICB9XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX3BlcmZvcm1TaWduSW5SZXF1ZXN0KGF1dGgsIG1ldGhvZCwgcGF0aCwgcmVxdWVzdCwgY3VzdG9tRXJyb3JNYXAgPSB7fSkge1xyXG4gICAgY29uc3Qgc2VydmVyUmVzcG9uc2UgPSAoYXdhaXQgX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIG1ldGhvZCwgcGF0aCwgcmVxdWVzdCwgY3VzdG9tRXJyb3JNYXApKTtcclxuICAgIGlmICgnbWZhUGVuZGluZ0NyZWRlbnRpYWwnIGluIHNlcnZlclJlc3BvbnNlKSB7XHJcbiAgICAgICAgX2ZhaWwoYXV0aCwgXCJtdWx0aS1mYWN0b3ItYXV0aC1yZXF1aXJlZFwiIC8qIEF1dGhFcnJvckNvZGUuTUZBX1JFUVVJUkVEICovLCB7XHJcbiAgICAgICAgICAgIF9zZXJ2ZXJSZXNwb25zZTogc2VydmVyUmVzcG9uc2VcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBzZXJ2ZXJSZXNwb25zZTtcclxufVxyXG5mdW5jdGlvbiBfZ2V0RmluYWxUYXJnZXQoYXV0aCwgaG9zdCwgcGF0aCwgcXVlcnkpIHtcclxuICAgIGNvbnN0IGJhc2UgPSBgJHtob3N0fSR7cGF0aH0/JHtxdWVyeX1gO1xyXG4gICAgaWYgKCFhdXRoLmNvbmZpZy5lbXVsYXRvcikge1xyXG4gICAgICAgIHJldHVybiBgJHthdXRoLmNvbmZpZy5hcGlTY2hlbWV9Oi8vJHtiYXNlfWA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX2VtdWxhdG9yVXJsKGF1dGguY29uZmlnLCBiYXNlKTtcclxufVxyXG5mdW5jdGlvbiBfcGFyc2VFbmZvcmNlbWVudFN0YXRlKGVuZm9yY2VtZW50U3RhdGVTdHIpIHtcclxuICAgIHN3aXRjaCAoZW5mb3JjZW1lbnRTdGF0ZVN0cikge1xyXG4gICAgICAgIGNhc2UgJ0VORk9SQ0UnOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJFTkZPUkNFXCIgLyogRW5mb3JjZW1lbnRTdGF0ZS5FTkZPUkNFICovO1xyXG4gICAgICAgIGNhc2UgJ0FVRElUJzpcclxuICAgICAgICAgICAgcmV0dXJuIFwiQVVESVRcIiAvKiBFbmZvcmNlbWVudFN0YXRlLkFVRElUICovO1xyXG4gICAgICAgIGNhc2UgJ09GRic6XHJcbiAgICAgICAgICAgIHJldHVybiBcIk9GRlwiIC8qIEVuZm9yY2VtZW50U3RhdGUuT0ZGICovO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiBcIkVORk9SQ0VNRU5UX1NUQVRFX1VOU1BFQ0lGSUVEXCIgLyogRW5mb3JjZW1lbnRTdGF0ZS5FTkZPUkNFTUVOVF9TVEFURV9VTlNQRUNJRklFRCAqLztcclxuICAgIH1cclxufVxyXG5jbGFzcyBOZXR3b3JrVGltZW91dCB7XHJcbiAgICBjb25zdHJ1Y3RvcihhdXRoKSB7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gYXV0aDtcclxuICAgICAgICAvLyBOb2RlIHRpbWVycyBhbmQgYnJvd3NlciB0aW1lcnMgYXJlIGZ1bmRhbWVudGFsbHkgaW5jb21wYXRpYmxlLCBidXQgd2VcclxuICAgICAgICAvLyBkb24ndCBjYXJlIGFib3V0IHRoZSB2YWx1ZSBoZXJlXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICB0aGlzLnRpbWVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZSgoXywgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoX2NyZWF0ZUVycm9yKHRoaXMuYXV0aCwgXCJuZXR3b3JrLXJlcXVlc3QtZmFpbGVkXCIgLyogQXV0aEVycm9yQ29kZS5ORVRXT1JLX1JFUVVFU1RfRkFJTEVEICovKSk7XHJcbiAgICAgICAgICAgIH0sIERFRkFVTFRfQVBJX1RJTUVPVVRfTVMuZ2V0KCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgY2xlYXJOZXR3b3JrVGltZW91dCgpIHtcclxuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcik7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gX21ha2VUYWdnZWRFcnJvcihhdXRoLCBjb2RlLCByZXNwb25zZSkge1xyXG4gICAgY29uc3QgZXJyb3JQYXJhbXMgPSB7XHJcbiAgICAgICAgYXBwTmFtZTogYXV0aC5uYW1lXHJcbiAgICB9O1xyXG4gICAgaWYgKHJlc3BvbnNlLmVtYWlsKSB7XHJcbiAgICAgICAgZXJyb3JQYXJhbXMuZW1haWwgPSByZXNwb25zZS5lbWFpbDtcclxuICAgIH1cclxuICAgIGlmIChyZXNwb25zZS5waG9uZU51bWJlcikge1xyXG4gICAgICAgIGVycm9yUGFyYW1zLnBob25lTnVtYmVyID0gcmVzcG9uc2UucGhvbmVOdW1iZXI7XHJcbiAgICB9XHJcbiAgICBjb25zdCBlcnJvciA9IF9jcmVhdGVFcnJvcihhdXRoLCBjb2RlLCBlcnJvclBhcmFtcyk7XHJcbiAgICAvLyBXZSBrbm93IGN1c3RvbURhdGEgaXMgZGVmaW5lZCBvbiBlcnJvciBiZWNhdXNlIGVycm9yUGFyYW1zIGlzIGRlZmluZWRcclxuICAgIGVycm9yLmN1c3RvbURhdGEuX3Rva2VuUmVzcG9uc2UgPSByZXNwb25zZTtcclxuICAgIHJldHVybiBlcnJvcjtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1YyKGdyZWNhcHRjaGEpIHtcclxuICAgIHJldHVybiAoZ3JlY2FwdGNoYSAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgZ3JlY2FwdGNoYS5nZXRSZXNwb25zZSAhPT0gdW5kZWZpbmVkKTtcclxufVxyXG5mdW5jdGlvbiBpc0VudGVycHJpc2UoZ3JlY2FwdGNoYSkge1xyXG4gICAgcmV0dXJuIChncmVjYXB0Y2hhICE9PSB1bmRlZmluZWQgJiZcclxuICAgICAgICBncmVjYXB0Y2hhLmVudGVycHJpc2UgIT09IHVuZGVmaW5lZCk7XHJcbn1cclxuY2xhc3MgUmVjYXB0Y2hhQ29uZmlnIHtcclxuICAgIGNvbnN0cnVjdG9yKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIHJlQ0FQVENIQSBzaXRlIGtleS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnNpdGVLZXkgPSAnJztcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgbGlzdCBvZiBwcm92aWRlcnMgYW5kIHRoZWlyIGVuYWJsZW1lbnQgc3RhdHVzIGZvciByZUNBUFRDSEEgRW50ZXJwcmlzZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnJlY2FwdGNoYUVuZm9yY2VtZW50U3RhdGUgPSBbXTtcclxuICAgICAgICBpZiAocmVzcG9uc2UucmVjYXB0Y2hhS2V5ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdyZWNhcHRjaGFLZXkgdW5kZWZpbmVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEV4YW1wbGUgcmVzcG9uc2UucmVjYXB0Y2hhS2V5OiBcInByb2plY3RzL3Byb2oxMjMva2V5cy9zaXRla2V5MTIzXCJcclxuICAgICAgICB0aGlzLnNpdGVLZXkgPSByZXNwb25zZS5yZWNhcHRjaGFLZXkuc3BsaXQoJy8nKVszXTtcclxuICAgICAgICB0aGlzLnJlY2FwdGNoYUVuZm9yY2VtZW50U3RhdGUgPSByZXNwb25zZS5yZWNhcHRjaGFFbmZvcmNlbWVudFN0YXRlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSByZUNBUFRDSEEgRW50ZXJwcmlzZSBlbmZvcmNlbWVudCBzdGF0ZSBmb3IgdGhlIGdpdmVuIHByb3ZpZGVyLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBwcm92aWRlclN0ciAtIFRoZSBwcm92aWRlciB3aG9zZSBlbmZvcmNlbWVudCBzdGF0ZSBpcyB0byBiZSByZXR1cm5lZC5cclxuICAgICAqIEByZXR1cm5zIFRoZSByZUNBUFRDSEEgRW50ZXJwcmlzZSBlbmZvcmNlbWVudCBzdGF0ZSBmb3IgdGhlIGdpdmVuIHByb3ZpZGVyLlxyXG4gICAgICovXHJcbiAgICBnZXRQcm92aWRlckVuZm9yY2VtZW50U3RhdGUocHJvdmlkZXJTdHIpIHtcclxuICAgICAgICBpZiAoIXRoaXMucmVjYXB0Y2hhRW5mb3JjZW1lbnRTdGF0ZSB8fFxyXG4gICAgICAgICAgICB0aGlzLnJlY2FwdGNoYUVuZm9yY2VtZW50U3RhdGUubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGNvbnN0IHJlY2FwdGNoYUVuZm9yY2VtZW50U3RhdGUgb2YgdGhpcy5yZWNhcHRjaGFFbmZvcmNlbWVudFN0YXRlKSB7XHJcbiAgICAgICAgICAgIGlmIChyZWNhcHRjaGFFbmZvcmNlbWVudFN0YXRlLnByb3ZpZGVyICYmXHJcbiAgICAgICAgICAgICAgICByZWNhcHRjaGFFbmZvcmNlbWVudFN0YXRlLnByb3ZpZGVyID09PSBwcm92aWRlclN0cikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9wYXJzZUVuZm9yY2VtZW50U3RhdGUocmVjYXB0Y2hhRW5mb3JjZW1lbnRTdGF0ZS5lbmZvcmNlbWVudFN0YXRlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSByZUNBUFRDSEEgRW50ZXJwcmlzZSBlbmZvcmNlbWVudCBzdGF0ZSBmb3IgdGhlIHByb3ZpZGVyIGlzIHNldCB0byBFTkZPUkNFIG9yIEFVRElULlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBwcm92aWRlclN0ciAtIFRoZSBwcm92aWRlciB3aG9zZSBlbmFibGVtZW50IHN0YXRlIGlzIHRvIGJlIHJldHVybmVkLlxyXG4gICAgICogQHJldHVybnMgV2hldGhlciBvciBub3QgcmVDQVBUQ0hBIEVudGVycHJpc2UgcHJvdGVjdGlvbiBpcyBlbmFibGVkIGZvciB0aGUgZ2l2ZW4gcHJvdmlkZXIuXHJcbiAgICAgKi9cclxuICAgIGlzUHJvdmlkZXJFbmFibGVkKHByb3ZpZGVyU3RyKSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLmdldFByb3ZpZGVyRW5mb3JjZW1lbnRTdGF0ZShwcm92aWRlclN0cikgPT09XHJcbiAgICAgICAgICAgIFwiRU5GT1JDRVwiIC8qIEVuZm9yY2VtZW50U3RhdGUuRU5GT1JDRSAqLyB8fFxyXG4gICAgICAgICAgICB0aGlzLmdldFByb3ZpZGVyRW5mb3JjZW1lbnRTdGF0ZShwcm92aWRlclN0cikgPT09IFwiQVVESVRcIiAvKiBFbmZvcmNlbWVudFN0YXRlLkFVRElUICovKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBnZXRSZWNhcHRjaGFQYXJhbXMoYXV0aCkge1xyXG4gICAgcmV0dXJuICgoYXdhaXQgX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiR0VUXCIgLyogSHR0cE1ldGhvZC5HRVQgKi8sIFwiL3YxL3JlY2FwdGNoYVBhcmFtc1wiIC8qIEVuZHBvaW50LkdFVF9SRUNBUFRDSEFfUEFSQU0gKi8pKS5yZWNhcHRjaGFTaXRlS2V5IHx8ICcnKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBnZXRSZWNhcHRjaGFDb25maWcoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIkdFVFwiIC8qIEh0dHBNZXRob2QuR0VUICovLCBcIi92Mi9yZWNhcHRjaGFDb25maWdcIiAvKiBFbmRwb2ludC5HRVRfUkVDQVBUQ0hBX0NPTkZJRyAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBkZWxldGVBY2NvdW50KGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogSHR0cE1ldGhvZC5QT1NUICovLCBcIi92MS9hY2NvdW50czpkZWxldGVcIiAvKiBFbmRwb2ludC5ERUxFVEVfQUNDT1VOVCAqLywgcmVxdWVzdCk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlTGlua2VkQWNjb3VudHMoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBIdHRwTWV0aG9kLlBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnVwZGF0ZVwiIC8qIEVuZHBvaW50LlNFVF9BQ0NPVU5UX0lORk8gKi8sIHJlcXVlc3QpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIGdldEFjY291bnRJbmZvKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogSHR0cE1ldGhvZC5QT1NUICovLCBcIi92MS9hY2NvdW50czpsb29rdXBcIiAvKiBFbmRwb2ludC5HRVRfQUNDT1VOVF9JTkZPICovLCByZXF1ZXN0KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiB1dGNUaW1lc3RhbXBUb0RhdGVTdHJpbmcodXRjVGltZXN0YW1wKSB7XHJcbiAgICBpZiAoIXV0Y1RpbWVzdGFtcCkge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIENvbnZlcnQgdG8gZGF0ZSBvYmplY3QuXHJcbiAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKE51bWJlcih1dGNUaW1lc3RhbXApKTtcclxuICAgICAgICAvLyBUZXN0IGRhdGUgaXMgdmFsaWQuXHJcbiAgICAgICAgaWYgKCFpc05hTihkYXRlLmdldFRpbWUoKSkpIHtcclxuICAgICAgICAgICAgLy8gQ29udmVydCB0byBVVEMgZGF0ZSBzdHJpbmcuXHJcbiAgICAgICAgICAgIHJldHVybiBkYXRlLnRvVVRDU3RyaW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAvLyBEbyBub3RoaW5nLiB1bmRlZmluZWQgd2lsbCBiZSByZXR1cm5lZC5cclxuICAgIH1cclxuICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybnMgYSBKU09OIFdlYiBUb2tlbiAoSldUKSB1c2VkIHRvIGlkZW50aWZ5IHRoZSB1c2VyIHRvIGEgRmlyZWJhc2Ugc2VydmljZS5cclxuICpcclxuICogQHJlbWFya3NcclxuICogUmV0dXJucyB0aGUgY3VycmVudCB0b2tlbiBpZiBpdCBoYXMgbm90IGV4cGlyZWQgb3IgaWYgaXQgd2lsbCBub3QgZXhwaXJlIGluIHRoZSBuZXh0IGZpdmVcclxuICogbWludXRlcy4gT3RoZXJ3aXNlLCB0aGlzIHdpbGwgcmVmcmVzaCB0aGUgdG9rZW4gYW5kIHJldHVybiBhIG5ldyBvbmUuXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBmb3JjZVJlZnJlc2ggLSBGb3JjZSByZWZyZXNoIHJlZ2FyZGxlc3Mgb2YgdG9rZW4gZXhwaXJhdGlvbi5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0SWRUb2tlbih1c2VyLCBmb3JjZVJlZnJlc2ggPSBmYWxzZSkge1xyXG4gICAgcmV0dXJuIGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKS5nZXRJZFRva2VuKGZvcmNlUmVmcmVzaCk7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgYSBkZXNlcmlhbGl6ZWQgSlNPTiBXZWIgVG9rZW4gKEpXVCkgdXNlZCB0byBpZGVudGlmeSB0aGUgdXNlciB0byBhIEZpcmViYXNlIHNlcnZpY2UuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFJldHVybnMgdGhlIGN1cnJlbnQgdG9rZW4gaWYgaXQgaGFzIG5vdCBleHBpcmVkIG9yIGlmIGl0IHdpbGwgbm90IGV4cGlyZSBpbiB0aGUgbmV4dCBmaXZlXHJcbiAqIG1pbnV0ZXMuIE90aGVyd2lzZSwgdGhpcyB3aWxsIHJlZnJlc2ggdGhlIHRva2VuIGFuZCByZXR1cm4gYSBuZXcgb25lLlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gZm9yY2VSZWZyZXNoIC0gRm9yY2UgcmVmcmVzaCByZWdhcmRsZXNzIG9mIHRva2VuIGV4cGlyYXRpb24uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGdldElkVG9rZW5SZXN1bHQodXNlciwgZm9yY2VSZWZyZXNoID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGNvbnN0IHRva2VuID0gYXdhaXQgdXNlckludGVybmFsLmdldElkVG9rZW4oZm9yY2VSZWZyZXNoKTtcclxuICAgIGNvbnN0IGNsYWltcyA9IF9wYXJzZVRva2VuKHRva2VuKTtcclxuICAgIF9hc3NlcnQoY2xhaW1zICYmIGNsYWltcy5leHAgJiYgY2xhaW1zLmF1dGhfdGltZSAmJiBjbGFpbXMuaWF0LCB1c2VySW50ZXJuYWwuYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgY29uc3QgZmlyZWJhc2UgPSB0eXBlb2YgY2xhaW1zLmZpcmViYXNlID09PSAnb2JqZWN0JyA/IGNsYWltcy5maXJlYmFzZSA6IHVuZGVmaW5lZDtcclxuICAgIGNvbnN0IHNpZ25JblByb3ZpZGVyID0gZmlyZWJhc2UgPT09IG51bGwgfHwgZmlyZWJhc2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZpcmViYXNlWydzaWduX2luX3Byb3ZpZGVyJ107XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGNsYWltcyxcclxuICAgICAgICB0b2tlbixcclxuICAgICAgICBhdXRoVGltZTogdXRjVGltZXN0YW1wVG9EYXRlU3RyaW5nKHNlY29uZHNTdHJpbmdUb01pbGxpc2Vjb25kcyhjbGFpbXMuYXV0aF90aW1lKSksXHJcbiAgICAgICAgaXNzdWVkQXRUaW1lOiB1dGNUaW1lc3RhbXBUb0RhdGVTdHJpbmcoc2Vjb25kc1N0cmluZ1RvTWlsbGlzZWNvbmRzKGNsYWltcy5pYXQpKSxcclxuICAgICAgICBleHBpcmF0aW9uVGltZTogdXRjVGltZXN0YW1wVG9EYXRlU3RyaW5nKHNlY29uZHNTdHJpbmdUb01pbGxpc2Vjb25kcyhjbGFpbXMuZXhwKSksXHJcbiAgICAgICAgc2lnbkluUHJvdmlkZXI6IHNpZ25JblByb3ZpZGVyIHx8IG51bGwsXHJcbiAgICAgICAgc2lnbkluU2Vjb25kRmFjdG9yOiAoZmlyZWJhc2UgPT09IG51bGwgfHwgZmlyZWJhc2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZpcmViYXNlWydzaWduX2luX3NlY29uZF9mYWN0b3InXSkgfHwgbnVsbFxyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiBzZWNvbmRzU3RyaW5nVG9NaWxsaXNlY29uZHMoc2Vjb25kcykge1xyXG4gICAgcmV0dXJuIE51bWJlcihzZWNvbmRzKSAqIDEwMDA7XHJcbn1cclxuZnVuY3Rpb24gX3BhcnNlVG9rZW4odG9rZW4pIHtcclxuICAgIGNvbnN0IFthbGdvcml0aG0sIHBheWxvYWQsIHNpZ25hdHVyZV0gPSB0b2tlbi5zcGxpdCgnLicpO1xyXG4gICAgaWYgKGFsZ29yaXRobSA9PT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgICAgcGF5bG9hZCA9PT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgICAgc2lnbmF0dXJlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBfbG9nRXJyb3IoJ0pXVCBtYWxmb3JtZWQsIGNvbnRhaW5lZCBmZXdlciB0aGFuIDMgc2VjdGlvbnMnKTtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZGVjb2RlZCA9IGJhc2U2NERlY29kZShwYXlsb2FkKTtcclxuICAgICAgICBpZiAoIWRlY29kZWQpIHtcclxuICAgICAgICAgICAgX2xvZ0Vycm9yKCdGYWlsZWQgdG8gZGVjb2RlIGJhc2U2NCBKV1QgcGF5bG9hZCcpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoZGVjb2RlZCk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIF9sb2dFcnJvcignQ2F1Z2h0IGVycm9yIHBhcnNpbmcgSldUIHBheWxvYWQgYXMgSlNPTicsIGUgPT09IG51bGwgfHwgZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZS50b1N0cmluZygpKTtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogRXh0cmFjdCBleHBpcmVzSW4gVFRMIGZyb20gYSB0b2tlbiBieSBzdWJ0cmFjdGluZyB0aGUgZXhwaXJhdGlvbiBmcm9tIHRoZSBpc3N1YW5jZS5cclxuICovXHJcbmZ1bmN0aW9uIF90b2tlbkV4cGlyZXNJbih0b2tlbikge1xyXG4gICAgY29uc3QgcGFyc2VkVG9rZW4gPSBfcGFyc2VUb2tlbih0b2tlbik7XHJcbiAgICBfYXNzZXJ0KHBhcnNlZFRva2VuLCBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICBfYXNzZXJ0KHR5cGVvZiBwYXJzZWRUb2tlbi5leHAgIT09ICd1bmRlZmluZWQnLCBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICBfYXNzZXJ0KHR5cGVvZiBwYXJzZWRUb2tlbi5pYXQgIT09ICd1bmRlZmluZWQnLCBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICByZXR1cm4gTnVtYmVyKHBhcnNlZFRva2VuLmV4cCkgLSBOdW1iZXIocGFyc2VkVG9rZW4uaWF0KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBfbG9nb3V0SWZJbnZhbGlkYXRlZCh1c2VyLCBwcm9taXNlLCBieXBhc3NBdXRoU3RhdGUgPSBmYWxzZSkge1xyXG4gICAgaWYgKGJ5cGFzc0F1dGhTdGF0ZSkge1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gYXdhaXQgcHJvbWlzZTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBGaXJlYmFzZUVycm9yICYmIGlzVXNlckludmFsaWRhdGVkKGUpKSB7XHJcbiAgICAgICAgICAgIGlmICh1c2VyLmF1dGguY3VycmVudFVzZXIgPT09IHVzZXIpIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHVzZXIuYXV0aC5zaWduT3V0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgZTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBpc1VzZXJJbnZhbGlkYXRlZCh7IGNvZGUgfSkge1xyXG4gICAgcmV0dXJuIChjb2RlID09PSBgYXV0aC8ke1widXNlci1kaXNhYmxlZFwiIC8qIEF1dGhFcnJvckNvZGUuVVNFUl9ESVNBQkxFRCAqL31gIHx8XHJcbiAgICAgICAgY29kZSA9PT0gYGF1dGgvJHtcInVzZXItdG9rZW4tZXhwaXJlZFwiIC8qIEF1dGhFcnJvckNvZGUuVE9LRU5fRVhQSVJFRCAqL31gKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBQcm9hY3RpdmVSZWZyZXNoIHtcclxuICAgIGNvbnN0cnVjdG9yKHVzZXIpIHtcclxuICAgICAgICB0aGlzLnVzZXIgPSB1c2VyO1xyXG4gICAgICAgIHRoaXMuaXNSdW5uaW5nID0gZmFsc2U7XHJcbiAgICAgICAgLy8gTm9kZSB0aW1lcnMgYW5kIGJyb3dzZXIgdGltZXJzIHJldHVybiBmdW5kYW1lbnRhbGx5IGRpZmZlcmVudCB0eXBlcy5cclxuICAgICAgICAvLyBXZSBkb24ndCBhY3R1YWxseSBjYXJlIHdoYXQgdGhlIHZhbHVlIGlzIGJ1dCBUUyB3b24ndCBhY2NlcHQgdW5rbm93biBhbmRcclxuICAgICAgICAvLyB3ZSBjYW4ndCBjYXN0IHByb3Blcmx5IGluIGJvdGggZW52aXJvbm1lbnRzLlxyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgdGhpcy50aW1lcklkID0gbnVsbDtcclxuICAgICAgICB0aGlzLmVycm9yQmFja29mZiA9IDMwMDAwIC8qIER1cmF0aW9uLlJFVFJZX0JBQ0tPRkZfTUlOICovO1xyXG4gICAgfVxyXG4gICAgX3N0YXJ0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzUnVubmluZykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaXNSdW5uaW5nID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnNjaGVkdWxlKCk7XHJcbiAgICB9XHJcbiAgICBfc3RvcCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNSdW5uaW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pc1J1bm5pbmcgPSBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy50aW1lcklkICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVySWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldEludGVydmFsKHdhc0Vycm9yKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGlmICh3YXNFcnJvcikge1xyXG4gICAgICAgICAgICBjb25zdCBpbnRlcnZhbCA9IHRoaXMuZXJyb3JCYWNrb2ZmO1xyXG4gICAgICAgICAgICB0aGlzLmVycm9yQmFja29mZiA9IE1hdGgubWluKHRoaXMuZXJyb3JCYWNrb2ZmICogMiwgOTYwMDAwIC8qIER1cmF0aW9uLlJFVFJZX0JBQ0tPRkZfTUFYICovKTtcclxuICAgICAgICAgICAgcmV0dXJuIGludGVydmFsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gUmVzZXQgdGhlIGVycm9yIGJhY2tvZmZcclxuICAgICAgICAgICAgdGhpcy5lcnJvckJhY2tvZmYgPSAzMDAwMCAvKiBEdXJhdGlvbi5SRVRSWV9CQUNLT0ZGX01JTiAqLztcclxuICAgICAgICAgICAgY29uc3QgZXhwVGltZSA9IChfYSA9IHRoaXMudXNlci5zdHNUb2tlbk1hbmFnZXIuZXhwaXJhdGlvblRpbWUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IGludGVydmFsID0gZXhwVGltZSAtIERhdGUubm93KCkgLSAzMDAwMDAgLyogRHVyYXRpb24uT0ZGU0VUICovO1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5tYXgoMCwgaW50ZXJ2YWwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHNjaGVkdWxlKHdhc0Vycm9yID0gZmFsc2UpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNSdW5uaW5nKSB7XHJcbiAgICAgICAgICAgIC8vIEp1c3QgaW4gY2FzZS4uLlxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGludGVydmFsID0gdGhpcy5nZXRJbnRlcnZhbCh3YXNFcnJvcik7XHJcbiAgICAgICAgdGhpcy50aW1lcklkID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaXRlcmF0aW9uKCk7XHJcbiAgICAgICAgfSwgaW50ZXJ2YWwpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgaXRlcmF0aW9uKCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudXNlci5nZXRJZFRva2VuKHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAvLyBPbmx5IHJldHJ5IG9uIG5ldHdvcmsgZXJyb3JzXHJcbiAgICAgICAgICAgIGlmICgoZSA9PT0gbnVsbCB8fCBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlLmNvZGUpID09PVxyXG4gICAgICAgICAgICAgICAgYGF1dGgvJHtcIm5ldHdvcmstcmVxdWVzdC1mYWlsZWRcIiAvKiBBdXRoRXJyb3JDb2RlLk5FVFdPUktfUkVRVUVTVF9GQUlMRUQgKi99YCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2hlZHVsZSgvKiB3YXNFcnJvciAqLyB0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2NoZWR1bGUoKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBVc2VyTWV0YWRhdGEge1xyXG4gICAgY29uc3RydWN0b3IoY3JlYXRlZEF0LCBsYXN0TG9naW5BdCkge1xyXG4gICAgICAgIHRoaXMuY3JlYXRlZEF0ID0gY3JlYXRlZEF0O1xyXG4gICAgICAgIHRoaXMubGFzdExvZ2luQXQgPSBsYXN0TG9naW5BdDtcclxuICAgICAgICB0aGlzLl9pbml0aWFsaXplVGltZSgpO1xyXG4gICAgfVxyXG4gICAgX2luaXRpYWxpemVUaW1lKCkge1xyXG4gICAgICAgIHRoaXMubGFzdFNpZ25JblRpbWUgPSB1dGNUaW1lc3RhbXBUb0RhdGVTdHJpbmcodGhpcy5sYXN0TG9naW5BdCk7XHJcbiAgICAgICAgdGhpcy5jcmVhdGlvblRpbWUgPSB1dGNUaW1lc3RhbXBUb0RhdGVTdHJpbmcodGhpcy5jcmVhdGVkQXQpO1xyXG4gICAgfVxyXG4gICAgX2NvcHkobWV0YWRhdGEpIHtcclxuICAgICAgICB0aGlzLmNyZWF0ZWRBdCA9IG1ldGFkYXRhLmNyZWF0ZWRBdDtcclxuICAgICAgICB0aGlzLmxhc3RMb2dpbkF0ID0gbWV0YWRhdGEubGFzdExvZ2luQXQ7XHJcbiAgICAgICAgdGhpcy5faW5pdGlhbGl6ZVRpbWUoKTtcclxuICAgIH1cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IHRoaXMuY3JlYXRlZEF0LFxyXG4gICAgICAgICAgICBsYXN0TG9naW5BdDogdGhpcy5sYXN0TG9naW5BdFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gX3JlbG9hZFdpdGhvdXRTYXZpbmcodXNlcikge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgY29uc3QgYXV0aCA9IHVzZXIuYXV0aDtcclxuICAgIGNvbnN0IGlkVG9rZW4gPSBhd2FpdCB1c2VyLmdldElkVG9rZW4oKTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX2xvZ291dElmSW52YWxpZGF0ZWQodXNlciwgZ2V0QWNjb3VudEluZm8oYXV0aCwgeyBpZFRva2VuIH0pKTtcclxuICAgIF9hc3NlcnQocmVzcG9uc2UgPT09IG51bGwgfHwgcmVzcG9uc2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlc3BvbnNlLnVzZXJzLmxlbmd0aCwgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgY29uc3QgY29yZUFjY291bnQgPSByZXNwb25zZS51c2Vyc1swXTtcclxuICAgIHVzZXIuX25vdGlmeVJlbG9hZExpc3RlbmVyKGNvcmVBY2NvdW50KTtcclxuICAgIGNvbnN0IG5ld1Byb3ZpZGVyRGF0YSA9ICgoX2EgPSBjb3JlQWNjb3VudC5wcm92aWRlclVzZXJJbmZvKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubGVuZ3RoKVxyXG4gICAgICAgID8gZXh0cmFjdFByb3ZpZGVyRGF0YShjb3JlQWNjb3VudC5wcm92aWRlclVzZXJJbmZvKVxyXG4gICAgICAgIDogW107XHJcbiAgICBjb25zdCBwcm92aWRlckRhdGEgPSBtZXJnZVByb3ZpZGVyRGF0YSh1c2VyLnByb3ZpZGVyRGF0YSwgbmV3UHJvdmlkZXJEYXRhKTtcclxuICAgIC8vIFByZXNlcnZlcyB0aGUgbm9uLW5vbnltb3VzIHN0YXR1cyBvZiB0aGUgc3RvcmVkIHVzZXIsIGV2ZW4gaWYgbm8gbW9yZVxyXG4gICAgLy8gY3JlZGVudGlhbHMgKGZlZGVyYXRlZCBvciBlbWFpbC9wYXNzd29yZCkgYXJlIGxpbmtlZCB0byB0aGUgdXNlci4gSWZcclxuICAgIC8vIHRoZSB1c2VyIHdhcyBwcmV2aW91c2x5IGFub255bW91cywgdGhlbiB1c2UgcHJvdmlkZXIgZGF0YSB0byB1cGRhdGUuXHJcbiAgICAvLyBPbiB0aGUgb3RoZXIgaGFuZCwgaWYgaXQgd2FzIG5vdCBhbm9ueW1vdXMgYmVmb3JlLCBpdCBzaG91bGQgbmV2ZXIgYmVcclxuICAgIC8vIGNvbnNpZGVyZWQgYW5vbnltb3VzIG5vdy5cclxuICAgIGNvbnN0IG9sZElzQW5vbnltb3VzID0gdXNlci5pc0Fub255bW91cztcclxuICAgIGNvbnN0IG5ld0lzQW5vbnltb3VzID0gISh1c2VyLmVtYWlsICYmIGNvcmVBY2NvdW50LnBhc3N3b3JkSGFzaCkgJiYgIShwcm92aWRlckRhdGEgPT09IG51bGwgfHwgcHJvdmlkZXJEYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwcm92aWRlckRhdGEubGVuZ3RoKTtcclxuICAgIGNvbnN0IGlzQW5vbnltb3VzID0gIW9sZElzQW5vbnltb3VzID8gZmFsc2UgOiBuZXdJc0Fub255bW91cztcclxuICAgIGNvbnN0IHVwZGF0ZXMgPSB7XHJcbiAgICAgICAgdWlkOiBjb3JlQWNjb3VudC5sb2NhbElkLFxyXG4gICAgICAgIGRpc3BsYXlOYW1lOiBjb3JlQWNjb3VudC5kaXNwbGF5TmFtZSB8fCBudWxsLFxyXG4gICAgICAgIHBob3RvVVJMOiBjb3JlQWNjb3VudC5waG90b1VybCB8fCBudWxsLFxyXG4gICAgICAgIGVtYWlsOiBjb3JlQWNjb3VudC5lbWFpbCB8fCBudWxsLFxyXG4gICAgICAgIGVtYWlsVmVyaWZpZWQ6IGNvcmVBY2NvdW50LmVtYWlsVmVyaWZpZWQgfHwgZmFsc2UsXHJcbiAgICAgICAgcGhvbmVOdW1iZXI6IGNvcmVBY2NvdW50LnBob25lTnVtYmVyIHx8IG51bGwsXHJcbiAgICAgICAgdGVuYW50SWQ6IGNvcmVBY2NvdW50LnRlbmFudElkIHx8IG51bGwsXHJcbiAgICAgICAgcHJvdmlkZXJEYXRhLFxyXG4gICAgICAgIG1ldGFkYXRhOiBuZXcgVXNlck1ldGFkYXRhKGNvcmVBY2NvdW50LmNyZWF0ZWRBdCwgY29yZUFjY291bnQubGFzdExvZ2luQXQpLFxyXG4gICAgICAgIGlzQW5vbnltb3VzXHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmFzc2lnbih1c2VyLCB1cGRhdGVzKTtcclxufVxyXG4vKipcclxuICogUmVsb2FkcyB1c2VyIGFjY291bnQgZGF0YSwgaWYgc2lnbmVkIGluLlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiByZWxvYWQodXNlcikge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgYXdhaXQgX3JlbG9hZFdpdGhvdXRTYXZpbmcodXNlckludGVybmFsKTtcclxuICAgIC8vIEV2ZW4gdGhvdWdoIHRoZSBjdXJyZW50IHVzZXIgaGFzbid0IGNoYW5nZWQsIHVwZGF0ZVxyXG4gICAgLy8gY3VycmVudCB1c2VyIHdpbGwgdHJpZ2dlciBhIHBlcnNpc3RlbmNlIHVwZGF0ZSB3LyB0aGVcclxuICAgIC8vIG5ldyBpbmZvLlxyXG4gICAgYXdhaXQgdXNlckludGVybmFsLmF1dGguX3BlcnNpc3RVc2VySWZDdXJyZW50KHVzZXJJbnRlcm5hbCk7XHJcbiAgICB1c2VySW50ZXJuYWwuYXV0aC5fbm90aWZ5TGlzdGVuZXJzSWZDdXJyZW50KHVzZXJJbnRlcm5hbCk7XHJcbn1cclxuZnVuY3Rpb24gbWVyZ2VQcm92aWRlckRhdGEob3JpZ2luYWwsIG5ld0RhdGEpIHtcclxuICAgIGNvbnN0IGRlZHVwZWQgPSBvcmlnaW5hbC5maWx0ZXIobyA9PiAhbmV3RGF0YS5zb21lKG4gPT4gbi5wcm92aWRlcklkID09PSBvLnByb3ZpZGVySWQpKTtcclxuICAgIHJldHVybiBbLi4uZGVkdXBlZCwgLi4ubmV3RGF0YV07XHJcbn1cclxuZnVuY3Rpb24gZXh0cmFjdFByb3ZpZGVyRGF0YShwcm92aWRlcnMpIHtcclxuICAgIHJldHVybiBwcm92aWRlcnMubWFwKChfYSkgPT4ge1xyXG4gICAgICAgIHZhciB7IHByb3ZpZGVySWQgfSA9IF9hLCBwcm92aWRlciA9IF9fcmVzdChfYSwgW1wicHJvdmlkZXJJZFwiXSk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcHJvdmlkZXJJZCxcclxuICAgICAgICAgICAgdWlkOiBwcm92aWRlci5yYXdJZCB8fCAnJyxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWU6IHByb3ZpZGVyLmRpc3BsYXlOYW1lIHx8IG51bGwsXHJcbiAgICAgICAgICAgIGVtYWlsOiBwcm92aWRlci5lbWFpbCB8fCBudWxsLFxyXG4gICAgICAgICAgICBwaG9uZU51bWJlcjogcHJvdmlkZXIucGhvbmVOdW1iZXIgfHwgbnVsbCxcclxuICAgICAgICAgICAgcGhvdG9VUkw6IHByb3ZpZGVyLnBob3RvVXJsIHx8IG51bGxcclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gcmVxdWVzdFN0c1Rva2VuKGF1dGgsIHJlZnJlc2hUb2tlbikge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfcGVyZm9ybUZldGNoV2l0aEVycm9ySGFuZGxpbmcoYXV0aCwge30sIGFzeW5jICgpID0+IHtcclxuICAgICAgICBjb25zdCBib2R5ID0gcXVlcnlzdHJpbmcoe1xyXG4gICAgICAgICAgICAnZ3JhbnRfdHlwZSc6ICdyZWZyZXNoX3Rva2VuJyxcclxuICAgICAgICAgICAgJ3JlZnJlc2hfdG9rZW4nOiByZWZyZXNoVG9rZW5cclxuICAgICAgICB9KS5zbGljZSgxKTtcclxuICAgICAgICBjb25zdCB7IHRva2VuQXBpSG9zdCwgYXBpS2V5IH0gPSBhdXRoLmNvbmZpZztcclxuICAgICAgICBjb25zdCB1cmwgPSBfZ2V0RmluYWxUYXJnZXQoYXV0aCwgdG9rZW5BcGlIb3N0LCBcIi92MS90b2tlblwiIC8qIEVuZHBvaW50LlRPS0VOICovLCBga2V5PSR7YXBpS2V5fWApO1xyXG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSBhd2FpdCBhdXRoLl9nZXRBZGRpdGlvbmFsSGVhZGVycygpO1xyXG4gICAgICAgIGhlYWRlcnNbXCJDb250ZW50LVR5cGVcIiAvKiBIdHRwSGVhZGVyLkNPTlRFTlRfVFlQRSAqL10gPSAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJztcclxuICAgICAgICByZXR1cm4gRmV0Y2hQcm92aWRlci5mZXRjaCgpKHVybCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiIC8qIEh0dHBNZXRob2QuUE9TVCAqLyxcclxuICAgICAgICAgICAgaGVhZGVycyxcclxuICAgICAgICAgICAgYm9keVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICAvLyBUaGUgcmVzcG9uc2UgY29tZXMgYmFjayBpbiBzbmFrZV9jYXNlLiBDb252ZXJ0IHRvIGNhbWVsOlxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBhY2Nlc3NUb2tlbjogcmVzcG9uc2UuYWNjZXNzX3Rva2VuLFxyXG4gICAgICAgIGV4cGlyZXNJbjogcmVzcG9uc2UuZXhwaXJlc19pbixcclxuICAgICAgICByZWZyZXNoVG9rZW46IHJlc3BvbnNlLnJlZnJlc2hfdG9rZW5cclxuICAgIH07XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gcmV2b2tlVG9rZW4oYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBIdHRwTWV0aG9kLlBPU1QgKi8sIFwiL3YyL2FjY291bnRzOnJldm9rZVRva2VuXCIgLyogRW5kcG9pbnQuUkVWT0tFX1RPS0VOICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBXZSBuZWVkIHRvIG1hcmsgdGhpcyBjbGFzcyBhcyBpbnRlcm5hbCBleHBsaWNpdGx5IHRvIGV4Y2x1ZGUgaXQgaW4gdGhlIHB1YmxpYyB0eXBpbmdzLCBiZWNhdXNlXHJcbiAqIGl0IHJlZmVyZW5jZXMgQXV0aEludGVybmFsIHdoaWNoIGhhcyBhIGNpcmN1bGFyIGRlcGVuZGVuY3kgd2l0aCBVc2VySW50ZXJuYWwuXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY2xhc3MgU3RzVG9rZW5NYW5hZ2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMucmVmcmVzaFRva2VuID0gbnVsbDtcclxuICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gbnVsbDtcclxuICAgICAgICB0aGlzLmV4cGlyYXRpb25UaW1lID0gbnVsbDtcclxuICAgIH1cclxuICAgIGdldCBpc0V4cGlyZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuICghdGhpcy5leHBpcmF0aW9uVGltZSB8fFxyXG4gICAgICAgICAgICBEYXRlLm5vdygpID4gdGhpcy5leHBpcmF0aW9uVGltZSAtIDMwMDAwIC8qIEJ1ZmZlci5UT0tFTl9SRUZSRVNIICovKTtcclxuICAgIH1cclxuICAgIHVwZGF0ZUZyb21TZXJ2ZXJSZXNwb25zZShyZXNwb25zZSkge1xyXG4gICAgICAgIF9hc3NlcnQocmVzcG9uc2UuaWRUb2tlbiwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIF9hc3NlcnQodHlwZW9mIHJlc3BvbnNlLmlkVG9rZW4gIT09ICd1bmRlZmluZWQnLCBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgX2Fzc2VydCh0eXBlb2YgcmVzcG9uc2UucmVmcmVzaFRva2VuICE9PSAndW5kZWZpbmVkJywgXCJpbnRlcm5hbC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGNvbnN0IGV4cGlyZXNJbiA9ICdleHBpcmVzSW4nIGluIHJlc3BvbnNlICYmIHR5cGVvZiByZXNwb25zZS5leHBpcmVzSW4gIT09ICd1bmRlZmluZWQnXHJcbiAgICAgICAgICAgID8gTnVtYmVyKHJlc3BvbnNlLmV4cGlyZXNJbilcclxuICAgICAgICAgICAgOiBfdG9rZW5FeHBpcmVzSW4ocmVzcG9uc2UuaWRUb2tlbik7XHJcbiAgICAgICAgdGhpcy51cGRhdGVUb2tlbnNBbmRFeHBpcmF0aW9uKHJlc3BvbnNlLmlkVG9rZW4sIHJlc3BvbnNlLnJlZnJlc2hUb2tlbiwgZXhwaXJlc0luKTtcclxuICAgIH1cclxuICAgIHVwZGF0ZUZyb21JZFRva2VuKGlkVG9rZW4pIHtcclxuICAgICAgICBfYXNzZXJ0KGlkVG9rZW4ubGVuZ3RoICE9PSAwLCBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgY29uc3QgZXhwaXJlc0luID0gX3Rva2VuRXhwaXJlc0luKGlkVG9rZW4pO1xyXG4gICAgICAgIHRoaXMudXBkYXRlVG9rZW5zQW5kRXhwaXJhdGlvbihpZFRva2VuLCBudWxsLCBleHBpcmVzSW4pO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZ2V0VG9rZW4oYXV0aCwgZm9yY2VSZWZyZXNoID0gZmFsc2UpIHtcclxuICAgICAgICBpZiAoIWZvcmNlUmVmcmVzaCAmJiB0aGlzLmFjY2Vzc1Rva2VuICYmICF0aGlzLmlzRXhwaXJlZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hY2Nlc3NUb2tlbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgX2Fzc2VydCh0aGlzLnJlZnJlc2hUb2tlbiwgYXV0aCwgXCJ1c2VyLXRva2VuLWV4cGlyZWRcIiAvKiBBdXRoRXJyb3JDb2RlLlRPS0VOX0VYUElSRUQgKi8pO1xyXG4gICAgICAgIGlmICh0aGlzLnJlZnJlc2hUb2tlbikge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2goYXV0aCwgdGhpcy5yZWZyZXNoVG9rZW4pO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hY2Nlc3NUb2tlbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBjbGVhclJlZnJlc2hUb2tlbigpIHtcclxuICAgICAgICB0aGlzLnJlZnJlc2hUb2tlbiA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBhc3luYyByZWZyZXNoKGF1dGgsIG9sZFRva2VuKSB7XHJcbiAgICAgICAgY29uc3QgeyBhY2Nlc3NUb2tlbiwgcmVmcmVzaFRva2VuLCBleHBpcmVzSW4gfSA9IGF3YWl0IHJlcXVlc3RTdHNUb2tlbihhdXRoLCBvbGRUb2tlbik7XHJcbiAgICAgICAgdGhpcy51cGRhdGVUb2tlbnNBbmRFeHBpcmF0aW9uKGFjY2Vzc1Rva2VuLCByZWZyZXNoVG9rZW4sIE51bWJlcihleHBpcmVzSW4pKTtcclxuICAgIH1cclxuICAgIHVwZGF0ZVRva2Vuc0FuZEV4cGlyYXRpb24oYWNjZXNzVG9rZW4sIHJlZnJlc2hUb2tlbiwgZXhwaXJlc0luU2VjKSB7XHJcbiAgICAgICAgdGhpcy5yZWZyZXNoVG9rZW4gPSByZWZyZXNoVG9rZW4gfHwgbnVsbDtcclxuICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gYWNjZXNzVG9rZW4gfHwgbnVsbDtcclxuICAgICAgICB0aGlzLmV4cGlyYXRpb25UaW1lID0gRGF0ZS5ub3coKSArIGV4cGlyZXNJblNlYyAqIDEwMDA7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgZnJvbUpTT04oYXBwTmFtZSwgb2JqZWN0KSB7XHJcbiAgICAgICAgY29uc3QgeyByZWZyZXNoVG9rZW4sIGFjY2Vzc1Rva2VuLCBleHBpcmF0aW9uVGltZSB9ID0gb2JqZWN0O1xyXG4gICAgICAgIGNvbnN0IG1hbmFnZXIgPSBuZXcgU3RzVG9rZW5NYW5hZ2VyKCk7XHJcbiAgICAgICAgaWYgKHJlZnJlc2hUb2tlbikge1xyXG4gICAgICAgICAgICBfYXNzZXJ0KHR5cGVvZiByZWZyZXNoVG9rZW4gPT09ICdzdHJpbmcnLCBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLywge1xyXG4gICAgICAgICAgICAgICAgYXBwTmFtZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbWFuYWdlci5yZWZyZXNoVG9rZW4gPSByZWZyZXNoVG9rZW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhY2Nlc3NUb2tlbikge1xyXG4gICAgICAgICAgICBfYXNzZXJ0KHR5cGVvZiBhY2Nlc3NUb2tlbiA9PT0gJ3N0cmluZycsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovLCB7XHJcbiAgICAgICAgICAgICAgICBhcHBOYW1lXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBtYW5hZ2VyLmFjY2Vzc1Rva2VuID0gYWNjZXNzVG9rZW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChleHBpcmF0aW9uVGltZSkge1xyXG4gICAgICAgICAgICBfYXNzZXJ0KHR5cGVvZiBleHBpcmF0aW9uVGltZSA9PT0gJ251bWJlcicsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovLCB7XHJcbiAgICAgICAgICAgICAgICBhcHBOYW1lXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBtYW5hZ2VyLmV4cGlyYXRpb25UaW1lID0gZXhwaXJhdGlvblRpbWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtYW5hZ2VyO1xyXG4gICAgfVxyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlZnJlc2hUb2tlbjogdGhpcy5yZWZyZXNoVG9rZW4sXHJcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiB0aGlzLmFjY2Vzc1Rva2VuLFxyXG4gICAgICAgICAgICBleHBpcmF0aW9uVGltZTogdGhpcy5leHBpcmF0aW9uVGltZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBfYXNzaWduKHN0c1Rva2VuTWFuYWdlcikge1xyXG4gICAgICAgIHRoaXMuYWNjZXNzVG9rZW4gPSBzdHNUb2tlbk1hbmFnZXIuYWNjZXNzVG9rZW47XHJcbiAgICAgICAgdGhpcy5yZWZyZXNoVG9rZW4gPSBzdHNUb2tlbk1hbmFnZXIucmVmcmVzaFRva2VuO1xyXG4gICAgICAgIHRoaXMuZXhwaXJhdGlvblRpbWUgPSBzdHNUb2tlbk1hbmFnZXIuZXhwaXJhdGlvblRpbWU7XHJcbiAgICB9XHJcbiAgICBfY2xvbmUoKSB7XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24obmV3IFN0c1Rva2VuTWFuYWdlcigpLCB0aGlzLnRvSlNPTigpKTtcclxuICAgIH1cclxuICAgIF9wZXJmb3JtUmVmcmVzaCgpIHtcclxuICAgICAgICByZXR1cm4gZGVidWdGYWlsKCdub3QgaW1wbGVtZW50ZWQnKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBhc3NlcnRTdHJpbmdPclVuZGVmaW5lZChhc3NlcnRpb24sIGFwcE5hbWUpIHtcclxuICAgIF9hc3NlcnQodHlwZW9mIGFzc2VydGlvbiA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGFzc2VydGlvbiA9PT0gJ3VuZGVmaW5lZCcsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovLCB7IGFwcE5hbWUgfSk7XHJcbn1cclxuY2xhc3MgVXNlckltcGwge1xyXG4gICAgY29uc3RydWN0b3IoX2EpIHtcclxuICAgICAgICB2YXIgeyB1aWQsIGF1dGgsIHN0c1Rva2VuTWFuYWdlciB9ID0gX2EsIG9wdCA9IF9fcmVzdChfYSwgW1widWlkXCIsIFwiYXV0aFwiLCBcInN0c1Rva2VuTWFuYWdlclwiXSk7XHJcbiAgICAgICAgLy8gRm9yIHRoZSB1c2VyIG9iamVjdCwgcHJvdmlkZXIgaXMgYWx3YXlzIEZpcmViYXNlLlxyXG4gICAgICAgIHRoaXMucHJvdmlkZXJJZCA9IFwiZmlyZWJhc2VcIiAvKiBQcm92aWRlcklkLkZJUkVCQVNFICovO1xyXG4gICAgICAgIHRoaXMucHJvYWN0aXZlUmVmcmVzaCA9IG5ldyBQcm9hY3RpdmVSZWZyZXNoKHRoaXMpO1xyXG4gICAgICAgIHRoaXMucmVsb2FkVXNlckluZm8gPSBudWxsO1xyXG4gICAgICAgIHRoaXMucmVsb2FkTGlzdGVuZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMudWlkID0gdWlkO1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IGF1dGg7XHJcbiAgICAgICAgdGhpcy5zdHNUb2tlbk1hbmFnZXIgPSBzdHNUb2tlbk1hbmFnZXI7XHJcbiAgICAgICAgdGhpcy5hY2Nlc3NUb2tlbiA9IHN0c1Rva2VuTWFuYWdlci5hY2Nlc3NUb2tlbjtcclxuICAgICAgICB0aGlzLmRpc3BsYXlOYW1lID0gb3B0LmRpc3BsYXlOYW1lIHx8IG51bGw7XHJcbiAgICAgICAgdGhpcy5lbWFpbCA9IG9wdC5lbWFpbCB8fCBudWxsO1xyXG4gICAgICAgIHRoaXMuZW1haWxWZXJpZmllZCA9IG9wdC5lbWFpbFZlcmlmaWVkIHx8IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucGhvbmVOdW1iZXIgPSBvcHQucGhvbmVOdW1iZXIgfHwgbnVsbDtcclxuICAgICAgICB0aGlzLnBob3RvVVJMID0gb3B0LnBob3RvVVJMIHx8IG51bGw7XHJcbiAgICAgICAgdGhpcy5pc0Fub255bW91cyA9IG9wdC5pc0Fub255bW91cyB8fCBmYWxzZTtcclxuICAgICAgICB0aGlzLnRlbmFudElkID0gb3B0LnRlbmFudElkIHx8IG51bGw7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlckRhdGEgPSBvcHQucHJvdmlkZXJEYXRhID8gWy4uLm9wdC5wcm92aWRlckRhdGFdIDogW107XHJcbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IG5ldyBVc2VyTWV0YWRhdGEob3B0LmNyZWF0ZWRBdCB8fCB1bmRlZmluZWQsIG9wdC5sYXN0TG9naW5BdCB8fCB1bmRlZmluZWQpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZ2V0SWRUb2tlbihmb3JjZVJlZnJlc2gpIHtcclxuICAgICAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKHRoaXMsIHRoaXMuc3RzVG9rZW5NYW5hZ2VyLmdldFRva2VuKHRoaXMuYXV0aCwgZm9yY2VSZWZyZXNoKSk7XHJcbiAgICAgICAgX2Fzc2VydChhY2Nlc3NUb2tlbiwgdGhpcy5hdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgaWYgKHRoaXMuYWNjZXNzVG9rZW4gIT09IGFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWNjZXNzVG9rZW4gPSBhY2Nlc3NUb2tlbjtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hdXRoLl9wZXJzaXN0VXNlcklmQ3VycmVudCh0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5hdXRoLl9ub3RpZnlMaXN0ZW5lcnNJZkN1cnJlbnQodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhY2Nlc3NUb2tlbjtcclxuICAgIH1cclxuICAgIGdldElkVG9rZW5SZXN1bHQoZm9yY2VSZWZyZXNoKSB7XHJcbiAgICAgICAgcmV0dXJuIGdldElkVG9rZW5SZXN1bHQodGhpcywgZm9yY2VSZWZyZXNoKTtcclxuICAgIH1cclxuICAgIHJlbG9hZCgpIHtcclxuICAgICAgICByZXR1cm4gcmVsb2FkKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgX2Fzc2lnbih1c2VyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMgPT09IHVzZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfYXNzZXJ0KHRoaXMudWlkID09PSB1c2VyLnVpZCwgdGhpcy5hdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5TmFtZSA9IHVzZXIuZGlzcGxheU5hbWU7XHJcbiAgICAgICAgdGhpcy5waG90b1VSTCA9IHVzZXIucGhvdG9VUkw7XHJcbiAgICAgICAgdGhpcy5lbWFpbCA9IHVzZXIuZW1haWw7XHJcbiAgICAgICAgdGhpcy5lbWFpbFZlcmlmaWVkID0gdXNlci5lbWFpbFZlcmlmaWVkO1xyXG4gICAgICAgIHRoaXMucGhvbmVOdW1iZXIgPSB1c2VyLnBob25lTnVtYmVyO1xyXG4gICAgICAgIHRoaXMuaXNBbm9ueW1vdXMgPSB1c2VyLmlzQW5vbnltb3VzO1xyXG4gICAgICAgIHRoaXMudGVuYW50SWQgPSB1c2VyLnRlbmFudElkO1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJEYXRhID0gdXNlci5wcm92aWRlckRhdGEubWFwKHVzZXJJbmZvID0+IChPYmplY3QuYXNzaWduKHt9LCB1c2VySW5mbykpKTtcclxuICAgICAgICB0aGlzLm1ldGFkYXRhLl9jb3B5KHVzZXIubWV0YWRhdGEpO1xyXG4gICAgICAgIHRoaXMuc3RzVG9rZW5NYW5hZ2VyLl9hc3NpZ24odXNlci5zdHNUb2tlbk1hbmFnZXIpO1xyXG4gICAgfVxyXG4gICAgX2Nsb25lKGF1dGgpIHtcclxuICAgICAgICBjb25zdCBuZXdVc2VyID0gbmV3IFVzZXJJbXBsKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcyksIHsgYXV0aCwgc3RzVG9rZW5NYW5hZ2VyOiB0aGlzLnN0c1Rva2VuTWFuYWdlci5fY2xvbmUoKSB9KSk7XHJcbiAgICAgICAgbmV3VXNlci5tZXRhZGF0YS5fY29weSh0aGlzLm1ldGFkYXRhKTtcclxuICAgICAgICByZXR1cm4gbmV3VXNlcjtcclxuICAgIH1cclxuICAgIF9vblJlbG9hZChjYWxsYmFjaykge1xyXG4gICAgICAgIC8vIFRoZXJlIHNob3VsZCBvbmx5IGV2ZXIgYmUgb25lIGxpc3RlbmVyLCBhbmQgdGhhdCBpcyBhIHNpbmdsZSBpbnN0YW5jZSBvZiBNdWx0aUZhY3RvclVzZXJcclxuICAgICAgICBfYXNzZXJ0KCF0aGlzLnJlbG9hZExpc3RlbmVyLCB0aGlzLmF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICB0aGlzLnJlbG9hZExpc3RlbmVyID0gY2FsbGJhY2s7XHJcbiAgICAgICAgaWYgKHRoaXMucmVsb2FkVXNlckluZm8pIHtcclxuICAgICAgICAgICAgdGhpcy5fbm90aWZ5UmVsb2FkTGlzdGVuZXIodGhpcy5yZWxvYWRVc2VySW5mbyk7XHJcbiAgICAgICAgICAgIHRoaXMucmVsb2FkVXNlckluZm8gPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF9ub3RpZnlSZWxvYWRMaXN0ZW5lcih1c2VySW5mbykge1xyXG4gICAgICAgIGlmICh0aGlzLnJlbG9hZExpc3RlbmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVsb2FkTGlzdGVuZXIodXNlckluZm8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gSWYgbm8gbGlzdGVuZXIgaXMgc3Vic2NyaWJlZCB5ZXQsIHNhdmUgdGhlIHJlc3VsdCBzbyBpdCdzIGF2YWlsYWJsZSB3aGVuIHRoZXkgZG8gc3Vic2NyaWJlXHJcbiAgICAgICAgICAgIHRoaXMucmVsb2FkVXNlckluZm8gPSB1c2VySW5mbztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfc3RhcnRQcm9hY3RpdmVSZWZyZXNoKCkge1xyXG4gICAgICAgIHRoaXMucHJvYWN0aXZlUmVmcmVzaC5fc3RhcnQoKTtcclxuICAgIH1cclxuICAgIF9zdG9wUHJvYWN0aXZlUmVmcmVzaCgpIHtcclxuICAgICAgICB0aGlzLnByb2FjdGl2ZVJlZnJlc2guX3N0b3AoKTtcclxuICAgIH1cclxuICAgIGFzeW5jIF91cGRhdGVUb2tlbnNJZk5lY2Vzc2FyeShyZXNwb25zZSwgcmVsb2FkID0gZmFsc2UpIHtcclxuICAgICAgICBsZXQgdG9rZW5zUmVmcmVzaGVkID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlLmlkVG9rZW4gJiZcclxuICAgICAgICAgICAgcmVzcG9uc2UuaWRUb2tlbiAhPT0gdGhpcy5zdHNUb2tlbk1hbmFnZXIuYWNjZXNzVG9rZW4pIHtcclxuICAgICAgICAgICAgdGhpcy5zdHNUb2tlbk1hbmFnZXIudXBkYXRlRnJvbVNlcnZlclJlc3BvbnNlKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgdG9rZW5zUmVmcmVzaGVkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlbG9hZCkge1xyXG4gICAgICAgICAgICBhd2FpdCBfcmVsb2FkV2l0aG91dFNhdmluZyh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYXdhaXQgdGhpcy5hdXRoLl9wZXJzaXN0VXNlcklmQ3VycmVudCh0aGlzKTtcclxuICAgICAgICBpZiAodG9rZW5zUmVmcmVzaGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0aC5fbm90aWZ5TGlzdGVuZXJzSWZDdXJyZW50KHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGFzeW5jIGRlbGV0ZSgpIHtcclxuICAgICAgICBpZiAoX2lzRmlyZWJhc2VTZXJ2ZXJBcHAodGhpcy5hdXRoLmFwcCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KF9zZXJ2ZXJBcHBDdXJyZW50VXNlck9wZXJhdGlvbk5vdFN1cHBvcnRlZEVycm9yKHRoaXMuYXV0aCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBpZFRva2VuID0gYXdhaXQgdGhpcy5nZXRJZFRva2VuKCk7XHJcbiAgICAgICAgYXdhaXQgX2xvZ291dElmSW52YWxpZGF0ZWQodGhpcywgZGVsZXRlQWNjb3VudCh0aGlzLmF1dGgsIHsgaWRUb2tlbiB9KSk7XHJcbiAgICAgICAgdGhpcy5zdHNUb2tlbk1hbmFnZXIuY2xlYXJSZWZyZXNoVG9rZW4oKTtcclxuICAgICAgICAvLyBUT0RPOiBEZXRlcm1pbmUgaWYgY2FuY2VsbGFibGUtcHJvbWlzZXMgYXJlIG5lY2Vzc2FyeSB0byB1c2UgaW4gdGhpcyBjbGFzcyBzbyB0aGF0IGRlbGV0ZSgpXHJcbiAgICAgICAgLy8gICAgICAgY2FuY2VscyBwZW5kaW5nIGFjdGlvbnMuLi5cclxuICAgICAgICByZXR1cm4gdGhpcy5hdXRoLnNpZ25PdXQoKTtcclxuICAgIH1cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHsgdWlkOiB0aGlzLnVpZCwgZW1haWw6IHRoaXMuZW1haWwgfHwgdW5kZWZpbmVkLCBlbWFpbFZlcmlmaWVkOiB0aGlzLmVtYWlsVmVyaWZpZWQsIGRpc3BsYXlOYW1lOiB0aGlzLmRpc3BsYXlOYW1lIHx8IHVuZGVmaW5lZCwgaXNBbm9ueW1vdXM6IHRoaXMuaXNBbm9ueW1vdXMsIHBob3RvVVJMOiB0aGlzLnBob3RvVVJMIHx8IHVuZGVmaW5lZCwgcGhvbmVOdW1iZXI6IHRoaXMucGhvbmVOdW1iZXIgfHwgdW5kZWZpbmVkLCB0ZW5hbnRJZDogdGhpcy50ZW5hbnRJZCB8fCB1bmRlZmluZWQsIHByb3ZpZGVyRGF0YTogdGhpcy5wcm92aWRlckRhdGEubWFwKHVzZXJJbmZvID0+IChPYmplY3QuYXNzaWduKHt9LCB1c2VySW5mbykpKSwgc3RzVG9rZW5NYW5hZ2VyOiB0aGlzLnN0c1Rva2VuTWFuYWdlci50b0pTT04oKSwgXHJcbiAgICAgICAgICAgIC8vIFJlZGlyZWN0IGV2ZW50IElEIG11c3QgYmUgbWFpbnRhaW5lZCBpbiBjYXNlIHRoZXJlIGlzIGEgcGVuZGluZ1xyXG4gICAgICAgICAgICAvLyByZWRpcmVjdCBldmVudC5cclxuICAgICAgICAgICAgX3JlZGlyZWN0RXZlbnRJZDogdGhpcy5fcmVkaXJlY3RFdmVudElkIH0sIHRoaXMubWV0YWRhdGEudG9KU09OKCkpLCB7IFxyXG4gICAgICAgICAgICAvLyBSZXF1aXJlZCBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIHRoZSBsZWdhY3kgU0RLIChnby9maXJlYmFzZS1hdXRoLXNkay1wZXJzaXN0ZW5jZS1wYXJzaW5nKTpcclxuICAgICAgICAgICAgYXBpS2V5OiB0aGlzLmF1dGguY29uZmlnLmFwaUtleSwgYXBwTmFtZTogdGhpcy5hdXRoLm5hbWUgfSk7XHJcbiAgICB9XHJcbiAgICBnZXQgcmVmcmVzaFRva2VuKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0c1Rva2VuTWFuYWdlci5yZWZyZXNoVG9rZW4gfHwgJyc7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgX2Zyb21KU09OKGF1dGgsIG9iamVjdCkge1xyXG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2g7XHJcbiAgICAgICAgY29uc3QgZGlzcGxheU5hbWUgPSAoX2EgPSBvYmplY3QuZGlzcGxheU5hbWUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCBlbWFpbCA9IChfYiA9IG9iamVjdC5lbWFpbCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogdW5kZWZpbmVkO1xyXG4gICAgICAgIGNvbnN0IHBob25lTnVtYmVyID0gKF9jID0gb2JqZWN0LnBob25lTnVtYmVyKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgY29uc3QgcGhvdG9VUkwgPSAoX2QgPSBvYmplY3QucGhvdG9VUkwpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCB0ZW5hbnRJZCA9IChfZSA9IG9iamVjdC50ZW5hbnRJZCkgIT09IG51bGwgJiYgX2UgIT09IHZvaWQgMCA/IF9lIDogdW5kZWZpbmVkO1xyXG4gICAgICAgIGNvbnN0IF9yZWRpcmVjdEV2ZW50SWQgPSAoX2YgPSBvYmplY3QuX3JlZGlyZWN0RXZlbnRJZCkgIT09IG51bGwgJiYgX2YgIT09IHZvaWQgMCA/IF9mIDogdW5kZWZpbmVkO1xyXG4gICAgICAgIGNvbnN0IGNyZWF0ZWRBdCA9IChfZyA9IG9iamVjdC5jcmVhdGVkQXQpICE9PSBudWxsICYmIF9nICE9PSB2b2lkIDAgPyBfZyA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCBsYXN0TG9naW5BdCA9IChfaCA9IG9iamVjdC5sYXN0TG9naW5BdCkgIT09IG51bGwgJiYgX2ggIT09IHZvaWQgMCA/IF9oIDogdW5kZWZpbmVkO1xyXG4gICAgICAgIGNvbnN0IHsgdWlkLCBlbWFpbFZlcmlmaWVkLCBpc0Fub255bW91cywgcHJvdmlkZXJEYXRhLCBzdHNUb2tlbk1hbmFnZXI6IHBsYWluT2JqZWN0VG9rZW5NYW5hZ2VyIH0gPSBvYmplY3Q7XHJcbiAgICAgICAgX2Fzc2VydCh1aWQgJiYgcGxhaW5PYmplY3RUb2tlbk1hbmFnZXIsIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICBjb25zdCBzdHNUb2tlbk1hbmFnZXIgPSBTdHNUb2tlbk1hbmFnZXIuZnJvbUpTT04odGhpcy5uYW1lLCBwbGFpbk9iamVjdFRva2VuTWFuYWdlcik7XHJcbiAgICAgICAgX2Fzc2VydCh0eXBlb2YgdWlkID09PSAnc3RyaW5nJywgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKGRpc3BsYXlOYW1lLCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKGVtYWlsLCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIF9hc3NlcnQodHlwZW9mIGVtYWlsVmVyaWZpZWQgPT09ICdib29sZWFuJywgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIF9hc3NlcnQodHlwZW9mIGlzQW5vbnltb3VzID09PSAnYm9vbGVhbicsIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICBhc3NlcnRTdHJpbmdPclVuZGVmaW5lZChwaG9uZU51bWJlciwgYXV0aC5uYW1lKTtcclxuICAgICAgICBhc3NlcnRTdHJpbmdPclVuZGVmaW5lZChwaG90b1VSTCwgYXV0aC5uYW1lKTtcclxuICAgICAgICBhc3NlcnRTdHJpbmdPclVuZGVmaW5lZCh0ZW5hbnRJZCwgYXV0aC5uYW1lKTtcclxuICAgICAgICBhc3NlcnRTdHJpbmdPclVuZGVmaW5lZChfcmVkaXJlY3RFdmVudElkLCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKGNyZWF0ZWRBdCwgYXV0aC5uYW1lKTtcclxuICAgICAgICBhc3NlcnRTdHJpbmdPclVuZGVmaW5lZChsYXN0TG9naW5BdCwgYXV0aC5uYW1lKTtcclxuICAgICAgICBjb25zdCB1c2VyID0gbmV3IFVzZXJJbXBsKHtcclxuICAgICAgICAgICAgdWlkLFxyXG4gICAgICAgICAgICBhdXRoLFxyXG4gICAgICAgICAgICBlbWFpbCxcclxuICAgICAgICAgICAgZW1haWxWZXJpZmllZCxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUsXHJcbiAgICAgICAgICAgIGlzQW5vbnltb3VzLFxyXG4gICAgICAgICAgICBwaG90b1VSTCxcclxuICAgICAgICAgICAgcGhvbmVOdW1iZXIsXHJcbiAgICAgICAgICAgIHRlbmFudElkLFxyXG4gICAgICAgICAgICBzdHNUb2tlbk1hbmFnZXIsXHJcbiAgICAgICAgICAgIGNyZWF0ZWRBdCxcclxuICAgICAgICAgICAgbGFzdExvZ2luQXRcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAocHJvdmlkZXJEYXRhICYmIEFycmF5LmlzQXJyYXkocHJvdmlkZXJEYXRhKSkge1xyXG4gICAgICAgICAgICB1c2VyLnByb3ZpZGVyRGF0YSA9IHByb3ZpZGVyRGF0YS5tYXAodXNlckluZm8gPT4gKE9iamVjdC5hc3NpZ24oe30sIHVzZXJJbmZvKSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoX3JlZGlyZWN0RXZlbnRJZCkge1xyXG4gICAgICAgICAgICB1c2VyLl9yZWRpcmVjdEV2ZW50SWQgPSBfcmVkaXJlY3RFdmVudElkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdXNlcjtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZSBhIFVzZXIgZnJvbSBhbiBpZFRva2VuIHNlcnZlciByZXNwb25zZVxyXG4gICAgICogQHBhcmFtIGF1dGhcclxuICAgICAqIEBwYXJhbSBpZFRva2VuUmVzcG9uc2VcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGFzeW5jIF9mcm9tSWRUb2tlblJlc3BvbnNlKGF1dGgsIGlkVG9rZW5SZXNwb25zZSwgaXNBbm9ueW1vdXMgPSBmYWxzZSkge1xyXG4gICAgICAgIGNvbnN0IHN0c1Rva2VuTWFuYWdlciA9IG5ldyBTdHNUb2tlbk1hbmFnZXIoKTtcclxuICAgICAgICBzdHNUb2tlbk1hbmFnZXIudXBkYXRlRnJvbVNlcnZlclJlc3BvbnNlKGlkVG9rZW5SZXNwb25zZSk7XHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSB0aGUgRmlyZWJhc2UgQXV0aCB1c2VyLlxyXG4gICAgICAgIGNvbnN0IHVzZXIgPSBuZXcgVXNlckltcGwoe1xyXG4gICAgICAgICAgICB1aWQ6IGlkVG9rZW5SZXNwb25zZS5sb2NhbElkLFxyXG4gICAgICAgICAgICBhdXRoLFxyXG4gICAgICAgICAgICBzdHNUb2tlbk1hbmFnZXIsXHJcbiAgICAgICAgICAgIGlzQW5vbnltb3VzXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gVXBkYXRlcyB0aGUgdXNlciBpbmZvIGFuZCBkYXRhIGFuZCByZXNvbHZlcyB3aXRoIGEgdXNlciBpbnN0YW5jZS5cclxuICAgICAgICBhd2FpdCBfcmVsb2FkV2l0aG91dFNhdmluZyh1c2VyKTtcclxuICAgICAgICByZXR1cm4gdXNlcjtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZSBhIFVzZXIgZnJvbSBhbiBpZFRva2VuIHNlcnZlciByZXNwb25zZVxyXG4gICAgICogQHBhcmFtIGF1dGhcclxuICAgICAqIEBwYXJhbSBpZFRva2VuUmVzcG9uc2VcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGFzeW5jIF9mcm9tR2V0QWNjb3VudEluZm9SZXNwb25zZShhdXRoLCByZXNwb25zZSwgaWRUb2tlbikge1xyXG4gICAgICAgIGNvbnN0IGNvcmVBY2NvdW50ID0gcmVzcG9uc2UudXNlcnNbMF07XHJcbiAgICAgICAgX2Fzc2VydChjb3JlQWNjb3VudC5sb2NhbElkICE9PSB1bmRlZmluZWQsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICBjb25zdCBwcm92aWRlckRhdGEgPSBjb3JlQWNjb3VudC5wcm92aWRlclVzZXJJbmZvICE9PSB1bmRlZmluZWRcclxuICAgICAgICAgICAgPyBleHRyYWN0UHJvdmlkZXJEYXRhKGNvcmVBY2NvdW50LnByb3ZpZGVyVXNlckluZm8pXHJcbiAgICAgICAgICAgIDogW107XHJcbiAgICAgICAgY29uc3QgaXNBbm9ueW1vdXMgPSAhKGNvcmVBY2NvdW50LmVtYWlsICYmIGNvcmVBY2NvdW50LnBhc3N3b3JkSGFzaCkgJiYgIShwcm92aWRlckRhdGEgPT09IG51bGwgfHwgcHJvdmlkZXJEYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwcm92aWRlckRhdGEubGVuZ3RoKTtcclxuICAgICAgICBjb25zdCBzdHNUb2tlbk1hbmFnZXIgPSBuZXcgU3RzVG9rZW5NYW5hZ2VyKCk7XHJcbiAgICAgICAgc3RzVG9rZW5NYW5hZ2VyLnVwZGF0ZUZyb21JZFRva2VuKGlkVG9rZW4pO1xyXG4gICAgICAgIC8vIEluaXRpYWxpemUgdGhlIEZpcmViYXNlIEF1dGggdXNlci5cclxuICAgICAgICBjb25zdCB1c2VyID0gbmV3IFVzZXJJbXBsKHtcclxuICAgICAgICAgICAgdWlkOiBjb3JlQWNjb3VudC5sb2NhbElkLFxyXG4gICAgICAgICAgICBhdXRoLFxyXG4gICAgICAgICAgICBzdHNUb2tlbk1hbmFnZXIsXHJcbiAgICAgICAgICAgIGlzQW5vbnltb3VzXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gdXBkYXRlIHRoZSB1c2VyIHdpdGggZGF0YSBmcm9tIHRoZSBHZXRBY2NvdW50SW5mbyByZXNwb25zZS5cclxuICAgICAgICBjb25zdCB1cGRhdGVzID0ge1xyXG4gICAgICAgICAgICB1aWQ6IGNvcmVBY2NvdW50LmxvY2FsSWQsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBjb3JlQWNjb3VudC5kaXNwbGF5TmFtZSB8fCBudWxsLFxyXG4gICAgICAgICAgICBwaG90b1VSTDogY29yZUFjY291bnQucGhvdG9VcmwgfHwgbnVsbCxcclxuICAgICAgICAgICAgZW1haWw6IGNvcmVBY2NvdW50LmVtYWlsIHx8IG51bGwsXHJcbiAgICAgICAgICAgIGVtYWlsVmVyaWZpZWQ6IGNvcmVBY2NvdW50LmVtYWlsVmVyaWZpZWQgfHwgZmFsc2UsXHJcbiAgICAgICAgICAgIHBob25lTnVtYmVyOiBjb3JlQWNjb3VudC5waG9uZU51bWJlciB8fCBudWxsLFxyXG4gICAgICAgICAgICB0ZW5hbnRJZDogY29yZUFjY291bnQudGVuYW50SWQgfHwgbnVsbCxcclxuICAgICAgICAgICAgcHJvdmlkZXJEYXRhLFxyXG4gICAgICAgICAgICBtZXRhZGF0YTogbmV3IFVzZXJNZXRhZGF0YShjb3JlQWNjb3VudC5jcmVhdGVkQXQsIGNvcmVBY2NvdW50Lmxhc3RMb2dpbkF0KSxcclxuICAgICAgICAgICAgaXNBbm9ueW1vdXM6ICEoY29yZUFjY291bnQuZW1haWwgJiYgY29yZUFjY291bnQucGFzc3dvcmRIYXNoKSAmJlxyXG4gICAgICAgICAgICAgICAgIShwcm92aWRlckRhdGEgPT09IG51bGwgfHwgcHJvdmlkZXJEYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwcm92aWRlckRhdGEubGVuZ3RoKVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgT2JqZWN0LmFzc2lnbih1c2VyLCB1cGRhdGVzKTtcclxuICAgICAgICByZXR1cm4gdXNlcjtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBpbnN0YW5jZUNhY2hlID0gbmV3IE1hcCgpO1xyXG5mdW5jdGlvbiBfZ2V0SW5zdGFuY2UoY2xzKSB7XHJcbiAgICBkZWJ1Z0Fzc2VydChjbHMgaW5zdGFuY2VvZiBGdW5jdGlvbiwgJ0V4cGVjdGVkIGEgY2xhc3MgZGVmaW5pdGlvbicpO1xyXG4gICAgbGV0IGluc3RhbmNlID0gaW5zdGFuY2VDYWNoZS5nZXQoY2xzKTtcclxuICAgIGlmIChpbnN0YW5jZSkge1xyXG4gICAgICAgIGRlYnVnQXNzZXJ0KGluc3RhbmNlIGluc3RhbmNlb2YgY2xzLCAnSW5zdGFuY2Ugc3RvcmVkIGluIGNhY2hlIG1pc21hdGNoZWQgd2l0aCBjbGFzcycpO1xyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZTtcclxuICAgIH1cclxuICAgIGluc3RhbmNlID0gbmV3IGNscygpO1xyXG4gICAgaW5zdGFuY2VDYWNoZS5zZXQoY2xzLCBpbnN0YW5jZSk7XHJcbiAgICByZXR1cm4gaW5zdGFuY2U7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgSW5NZW1vcnlQZXJzaXN0ZW5jZSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnR5cGUgPSBcIk5PTkVcIiAvKiBQZXJzaXN0ZW5jZVR5cGUuTk9ORSAqLztcclxuICAgICAgICB0aGlzLnN0b3JhZ2UgPSB7fTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9pc0F2YWlsYWJsZSgpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9zZXQoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuc3RvcmFnZVtrZXldID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfZ2V0KGtleSkge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5zdG9yYWdlW2tleV07XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgPyBudWxsIDogdmFsdWU7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfcmVtb3ZlKGtleSkge1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLnN0b3JhZ2Vba2V5XTtcclxuICAgIH1cclxuICAgIF9hZGRMaXN0ZW5lcihfa2V5LCBfbGlzdGVuZXIpIHtcclxuICAgICAgICAvLyBMaXN0ZW5lcnMgYXJlIG5vdCBzdXBwb3J0ZWQgZm9yIGluLW1lbW9yeSBzdG9yYWdlIHNpbmNlIGl0IGNhbm5vdCBiZSBzaGFyZWQgYWNyb3NzIHdpbmRvd3Mvd29ya2Vyc1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIF9yZW1vdmVMaXN0ZW5lcihfa2V5LCBfbGlzdGVuZXIpIHtcclxuICAgICAgICAvLyBMaXN0ZW5lcnMgYXJlIG5vdCBzdXBwb3J0ZWQgZm9yIGluLW1lbW9yeSBzdG9yYWdlIHNpbmNlIGl0IGNhbm5vdCBiZSBzaGFyZWQgYWNyb3NzIHdpbmRvd3Mvd29ya2Vyc1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxufVxyXG5Jbk1lbW9yeVBlcnNpc3RlbmNlLnR5cGUgPSAnTk9ORSc7XHJcbi8qKlxyXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiB7QGxpbmsgUGVyc2lzdGVuY2V9IG9mIHR5cGUgJ05PTkUnLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBpbk1lbW9yeVBlcnNpc3RlbmNlID0gSW5NZW1vcnlQZXJzaXN0ZW5jZTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gX3BlcnNpc3RlbmNlS2V5TmFtZShrZXksIGFwaUtleSwgYXBwTmFtZSkge1xyXG4gICAgcmV0dXJuIGAke1wiZmlyZWJhc2VcIiAvKiBOYW1lc3BhY2UuUEVSU0lTVEVOQ0UgKi99OiR7a2V5fToke2FwaUtleX06JHthcHBOYW1lfWA7XHJcbn1cclxuY2xhc3MgUGVyc2lzdGVuY2VVc2VyTWFuYWdlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihwZXJzaXN0ZW5jZSwgYXV0aCwgdXNlcktleSkge1xyXG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSBwZXJzaXN0ZW5jZTtcclxuICAgICAgICB0aGlzLmF1dGggPSBhdXRoO1xyXG4gICAgICAgIHRoaXMudXNlcktleSA9IHVzZXJLZXk7XHJcbiAgICAgICAgY29uc3QgeyBjb25maWcsIG5hbWUgfSA9IHRoaXMuYXV0aDtcclxuICAgICAgICB0aGlzLmZ1bGxVc2VyS2V5ID0gX3BlcnNpc3RlbmNlS2V5TmFtZSh0aGlzLnVzZXJLZXksIGNvbmZpZy5hcGlLZXksIG5hbWUpO1xyXG4gICAgICAgIHRoaXMuZnVsbFBlcnNpc3RlbmNlS2V5ID0gX3BlcnNpc3RlbmNlS2V5TmFtZShcInBlcnNpc3RlbmNlXCIgLyogS2V5TmFtZS5QRVJTSVNURU5DRV9VU0VSICovLCBjb25maWcuYXBpS2V5LCBuYW1lKTtcclxuICAgICAgICB0aGlzLmJvdW5kRXZlbnRIYW5kbGVyID0gYXV0aC5fb25TdG9yYWdlRXZlbnQuYmluZChhdXRoKTtcclxuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlLl9hZGRMaXN0ZW5lcih0aGlzLmZ1bGxVc2VyS2V5LCB0aGlzLmJvdW5kRXZlbnRIYW5kbGVyKTtcclxuICAgIH1cclxuICAgIHNldEN1cnJlbnRVc2VyKHVzZXIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5fc2V0KHRoaXMuZnVsbFVzZXJLZXksIHVzZXIudG9KU09OKCkpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZ2V0Q3VycmVudFVzZXIoKSB7XHJcbiAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IHRoaXMucGVyc2lzdGVuY2UuX2dldCh0aGlzLmZ1bGxVc2VyS2V5KTtcclxuICAgICAgICByZXR1cm4gYmxvYiA/IFVzZXJJbXBsLl9mcm9tSlNPTih0aGlzLmF1dGgsIGJsb2IpIDogbnVsbDtcclxuICAgIH1cclxuICAgIHJlbW92ZUN1cnJlbnRVc2VyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLl9yZW1vdmUodGhpcy5mdWxsVXNlcktleSk7XHJcbiAgICB9XHJcbiAgICBzYXZlUGVyc2lzdGVuY2VGb3JSZWRpcmVjdCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5fc2V0KHRoaXMuZnVsbFBlcnNpc3RlbmNlS2V5LCB0aGlzLnBlcnNpc3RlbmNlLnR5cGUpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgc2V0UGVyc2lzdGVuY2UobmV3UGVyc2lzdGVuY2UpIHtcclxuICAgICAgICBpZiAodGhpcy5wZXJzaXN0ZW5jZSA9PT0gbmV3UGVyc2lzdGVuY2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjdXJyZW50VXNlciA9IGF3YWl0IHRoaXMuZ2V0Q3VycmVudFVzZXIoKTtcclxuICAgICAgICBhd2FpdCB0aGlzLnJlbW92ZUN1cnJlbnRVc2VyKCk7XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IG5ld1BlcnNpc3RlbmNlO1xyXG4gICAgICAgIGlmIChjdXJyZW50VXNlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZXRDdXJyZW50VXNlcihjdXJyZW50VXNlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZGVsZXRlKCkge1xyXG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UuX3JlbW92ZUxpc3RlbmVyKHRoaXMuZnVsbFVzZXJLZXksIHRoaXMuYm91bmRFdmVudEhhbmRsZXIpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGFzeW5jIGNyZWF0ZShhdXRoLCBwZXJzaXN0ZW5jZUhpZXJhcmNoeSwgdXNlcktleSA9IFwiYXV0aFVzZXJcIiAvKiBLZXlOYW1lLkFVVEhfVVNFUiAqLykge1xyXG4gICAgICAgIGlmICghcGVyc2lzdGVuY2VIaWVyYXJjaHkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VVc2VyTWFuYWdlcihfZ2V0SW5zdGFuY2UoaW5NZW1vcnlQZXJzaXN0ZW5jZSksIGF1dGgsIHVzZXJLZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBFbGltaW5hdGUgYW55IHBlcnNpc3RlbmNlcyB0aGF0IGFyZSBub3QgYXZhaWxhYmxlXHJcbiAgICAgICAgY29uc3QgYXZhaWxhYmxlUGVyc2lzdGVuY2VzID0gKGF3YWl0IFByb21pc2UuYWxsKHBlcnNpc3RlbmNlSGllcmFyY2h5Lm1hcChhc3luYyAocGVyc2lzdGVuY2UpID0+IHtcclxuICAgICAgICAgICAgaWYgKGF3YWl0IHBlcnNpc3RlbmNlLl9pc0F2YWlsYWJsZSgpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcGVyc2lzdGVuY2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9KSkpLmZpbHRlcihwZXJzaXN0ZW5jZSA9PiBwZXJzaXN0ZW5jZSk7XHJcbiAgICAgICAgLy8gRmFsbCBiYWNrIHRvIHRoZSBmaXJzdCBwZXJzaXN0ZW5jZSBsaXN0ZWQsIG9yIGluIG1lbW9yeSBpZiBub25lIGF2YWlsYWJsZVxyXG4gICAgICAgIGxldCBzZWxlY3RlZFBlcnNpc3RlbmNlID0gYXZhaWxhYmxlUGVyc2lzdGVuY2VzWzBdIHx8XHJcbiAgICAgICAgICAgIF9nZXRJbnN0YW5jZShpbk1lbW9yeVBlcnNpc3RlbmNlKTtcclxuICAgICAgICBjb25zdCBrZXkgPSBfcGVyc2lzdGVuY2VLZXlOYW1lKHVzZXJLZXksIGF1dGguY29uZmlnLmFwaUtleSwgYXV0aC5uYW1lKTtcclxuICAgICAgICAvLyBQdWxsIG91dCB0aGUgZXhpc3RpbmcgdXNlciwgc2V0dGluZyB0aGUgY2hvc2VuIHBlcnNpc3RlbmNlIHRvIHRoYXRcclxuICAgICAgICAvLyBwZXJzaXN0ZW5jZSBpZiB0aGUgdXNlciBleGlzdHMuXHJcbiAgICAgICAgbGV0IHVzZXJUb01pZ3JhdGUgPSBudWxsO1xyXG4gICAgICAgIC8vIE5vdGUsIGhlcmUgd2UgY2hlY2sgZm9yIGEgdXNlciBpbiBfYWxsXyBwZXJzaXN0ZW5jZXMsIG5vdCBqdXN0IHRoZVxyXG4gICAgICAgIC8vIG9uZXMgZGVlbWVkIGF2YWlsYWJsZS4gSWYgd2UgY2FuIG1pZ3JhdGUgYSB1c2VyIG91dCBvZiBhIGJyb2tlblxyXG4gICAgICAgIC8vIHBlcnNpc3RlbmNlLCB3ZSB3aWxsIChidXQgb25seSBpZiB0aGF0IHBlcnNpc3RlbmNlIHN1cHBvcnRzIG1pZ3JhdGlvbikuXHJcbiAgICAgICAgZm9yIChjb25zdCBwZXJzaXN0ZW5jZSBvZiBwZXJzaXN0ZW5jZUhpZXJhcmNoeSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IHBlcnNpc3RlbmNlLl9nZXQoa2V5KTtcclxuICAgICAgICAgICAgICAgIGlmIChibG9iKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXNlciA9IFVzZXJJbXBsLl9mcm9tSlNPTihhdXRoLCBibG9iKTsgLy8gdGhyb3dzIGZvciB1bnBhcnNhYmxlIGJsb2IgKHdyb25nIGZvcm1hdClcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGVyc2lzdGVuY2UgIT09IHNlbGVjdGVkUGVyc2lzdGVuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlclRvTWlncmF0ZSA9IHVzZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkUGVyc2lzdGVuY2UgPSBwZXJzaXN0ZW5jZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoX2EpIHsgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJZiB3ZSBmaW5kIHRoZSB1c2VyIGluIGEgcGVyc2lzdGVuY2UgdGhhdCBkb2VzIHN1cHBvcnQgbWlncmF0aW9uLCB1c2VcclxuICAgICAgICAvLyB0aGF0IG1pZ3JhdGlvbiBwYXRoIChvZiBvbmx5IHBlcnNpc3RlbmNlcyB0aGF0IHN1cHBvcnQgbWlncmF0aW9uKVxyXG4gICAgICAgIGNvbnN0IG1pZ3JhdGlvbkhpZXJhcmNoeSA9IGF2YWlsYWJsZVBlcnNpc3RlbmNlcy5maWx0ZXIocCA9PiBwLl9zaG91bGRBbGxvd01pZ3JhdGlvbik7XHJcbiAgICAgICAgLy8gSWYgdGhlIHBlcnNpc3RlbmNlIGRvZXMgX25vdF8gYWxsb3cgbWlncmF0aW9uLCBqdXN0IGZpbmlzaCBvZmYgaGVyZVxyXG4gICAgICAgIGlmICghc2VsZWN0ZWRQZXJzaXN0ZW5jZS5fc2hvdWxkQWxsb3dNaWdyYXRpb24gfHxcclxuICAgICAgICAgICAgIW1pZ3JhdGlvbkhpZXJhcmNoeS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVVzZXJNYW5hZ2VyKHNlbGVjdGVkUGVyc2lzdGVuY2UsIGF1dGgsIHVzZXJLZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxlY3RlZFBlcnNpc3RlbmNlID0gbWlncmF0aW9uSGllcmFyY2h5WzBdO1xyXG4gICAgICAgIGlmICh1c2VyVG9NaWdyYXRlKSB7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgbm9ybWFsbHkgc2hvdWxkbid0IHRocm93IHNpbmNlIGNob3NlblBlcnNpc3RlbmNlLmlzQXZhaWxhYmxlKCkgaXMgdHJ1ZSwgYnV0IGlmIGl0IGRvZXNcclxuICAgICAgICAgICAgLy8gd2UnbGwganVzdCBsZXQgaXQgYnViYmxlIHRvIHN1cmZhY2UgdGhlIGVycm9yLlxyXG4gICAgICAgICAgICBhd2FpdCBzZWxlY3RlZFBlcnNpc3RlbmNlLl9zZXQoa2V5LCB1c2VyVG9NaWdyYXRlLnRvSlNPTigpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQXR0ZW1wdCB0byBjbGVhciB0aGUga2V5IGluIG90aGVyIHBlcnNpc3RlbmNlcyBidXQgaWdub3JlIGVycm9ycy4gVGhpcyBoZWxwcyBwcmV2ZW50IGlzc3Vlc1xyXG4gICAgICAgIC8vIHN1Y2ggYXMgdXNlcnMgZ2V0dGluZyBzdHVjayB3aXRoIGEgcHJldmlvdXMgYWNjb3VudCBhZnRlciBzaWduaW5nIG91dCBhbmQgcmVmcmVzaGluZyB0aGUgdGFiLlxyXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHBlcnNpc3RlbmNlSGllcmFyY2h5Lm1hcChhc3luYyAocGVyc2lzdGVuY2UpID0+IHtcclxuICAgICAgICAgICAgaWYgKHBlcnNpc3RlbmNlICE9PSBzZWxlY3RlZFBlcnNpc3RlbmNlKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHBlcnNpc3RlbmNlLl9yZW1vdmUoa2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChfYSkgeyB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVVzZXJNYW5hZ2VyKHNlbGVjdGVkUGVyc2lzdGVuY2UsIGF1dGgsIHVzZXJLZXkpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBEZXRlcm1pbmUgdGhlIGJyb3dzZXIgZm9yIHRoZSBwdXJwb3NlcyBvZiByZXBvcnRpbmcgdXNhZ2UgdG8gdGhlIEFQSVxyXG4gKi9cclxuZnVuY3Rpb24gX2dldEJyb3dzZXJOYW1lKHVzZXJBZ2VudCkge1xyXG4gICAgY29uc3QgdWEgPSB1c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcclxuICAgIGlmICh1YS5pbmNsdWRlcygnb3BlcmEvJykgfHwgdWEuaW5jbHVkZXMoJ29wci8nKSB8fCB1YS5pbmNsdWRlcygnb3Bpb3MvJykpIHtcclxuICAgICAgICByZXR1cm4gXCJPcGVyYVwiIC8qIEJyb3dzZXJOYW1lLk9QRVJBICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoX2lzSUVNb2JpbGUodWEpKSB7XHJcbiAgICAgICAgLy8gV2luZG93cyBwaG9uZSBJRU1vYmlsZSBicm93c2VyLlxyXG4gICAgICAgIHJldHVybiBcIklFTW9iaWxlXCIgLyogQnJvd3Nlck5hbWUuSUVNT0JJTEUgKi87XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh1YS5pbmNsdWRlcygnbXNpZScpIHx8IHVhLmluY2x1ZGVzKCd0cmlkZW50LycpKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiSUVcIiAvKiBCcm93c2VyTmFtZS5JRSAqLztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHVhLmluY2x1ZGVzKCdlZGdlLycpKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiRWRnZVwiIC8qIEJyb3dzZXJOYW1lLkVER0UgKi87XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChfaXNGaXJlZm94KHVhKSkge1xyXG4gICAgICAgIHJldHVybiBcIkZpcmVmb3hcIiAvKiBCcm93c2VyTmFtZS5GSVJFRk9YICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodWEuaW5jbHVkZXMoJ3NpbGsvJykpIHtcclxuICAgICAgICByZXR1cm4gXCJTaWxrXCIgLyogQnJvd3Nlck5hbWUuU0lMSyAqLztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKF9pc0JsYWNrQmVycnkodWEpKSB7XHJcbiAgICAgICAgLy8gQmxhY2tiZXJyeSBicm93c2VyLlxyXG4gICAgICAgIHJldHVybiBcIkJsYWNrYmVycnlcIiAvKiBCcm93c2VyTmFtZS5CTEFDS0JFUlJZICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoX2lzV2ViT1ModWEpKSB7XHJcbiAgICAgICAgLy8gV2ViT1MgZGVmYXVsdCBicm93c2VyLlxyXG4gICAgICAgIHJldHVybiBcIldlYm9zXCIgLyogQnJvd3Nlck5hbWUuV0VCT1MgKi87XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChfaXNTYWZhcmkodWEpKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiU2FmYXJpXCIgLyogQnJvd3Nlck5hbWUuU0FGQVJJICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoKHVhLmluY2x1ZGVzKCdjaHJvbWUvJykgfHwgX2lzQ2hyb21lSU9TKHVhKSkgJiZcclxuICAgICAgICAhdWEuaW5jbHVkZXMoJ2VkZ2UvJykpIHtcclxuICAgICAgICByZXR1cm4gXCJDaHJvbWVcIiAvKiBCcm93c2VyTmFtZS5DSFJPTUUgKi87XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChfaXNBbmRyb2lkKHVhKSkge1xyXG4gICAgICAgIC8vIEFuZHJvaWQgc3RvY2sgYnJvd3Nlci5cclxuICAgICAgICByZXR1cm4gXCJBbmRyb2lkXCIgLyogQnJvd3Nlck5hbWUuQU5EUk9JRCAqLztcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIC8vIE1vc3QgbW9kZXJuIGJyb3dzZXJzIGhhdmUgbmFtZS92ZXJzaW9uIGF0IGVuZCBvZiB1c2VyIGFnZW50IHN0cmluZy5cclxuICAgICAgICBjb25zdCByZSA9IC8oW2EtekEtWlxcZFxcLl0rKVxcL1thLXpBLVpcXGRcXC5dKiQvO1xyXG4gICAgICAgIGNvbnN0IG1hdGNoZXMgPSB1c2VyQWdlbnQubWF0Y2gocmUpO1xyXG4gICAgICAgIGlmICgobWF0Y2hlcyA9PT0gbnVsbCB8fCBtYXRjaGVzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtYXRjaGVzLmxlbmd0aCkgPT09IDIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1hdGNoZXNbMV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIFwiT3RoZXJcIiAvKiBCcm93c2VyTmFtZS5PVEhFUiAqLztcclxufVxyXG5mdW5jdGlvbiBfaXNGaXJlZm94KHVhID0gZ2V0VUEoKSkge1xyXG4gICAgcmV0dXJuIC9maXJlZm94XFwvL2kudGVzdCh1YSk7XHJcbn1cclxuZnVuY3Rpb24gX2lzU2FmYXJpKHVzZXJBZ2VudCA9IGdldFVBKCkpIHtcclxuICAgIGNvbnN0IHVhID0gdXNlckFnZW50LnRvTG93ZXJDYXNlKCk7XHJcbiAgICByZXR1cm4gKHVhLmluY2x1ZGVzKCdzYWZhcmkvJykgJiZcclxuICAgICAgICAhdWEuaW5jbHVkZXMoJ2Nocm9tZS8nKSAmJlxyXG4gICAgICAgICF1YS5pbmNsdWRlcygnY3Jpb3MvJykgJiZcclxuICAgICAgICAhdWEuaW5jbHVkZXMoJ2FuZHJvaWQnKSk7XHJcbn1cclxuZnVuY3Rpb24gX2lzQ2hyb21lSU9TKHVhID0gZ2V0VUEoKSkge1xyXG4gICAgcmV0dXJuIC9jcmlvc1xcLy9pLnRlc3QodWEpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0lFTW9iaWxlKHVhID0gZ2V0VUEoKSkge1xyXG4gICAgcmV0dXJuIC9pZW1vYmlsZS9pLnRlc3QodWEpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0FuZHJvaWQodWEgPSBnZXRVQSgpKSB7XHJcbiAgICByZXR1cm4gL2FuZHJvaWQvaS50ZXN0KHVhKTtcclxufVxyXG5mdW5jdGlvbiBfaXNCbGFja0JlcnJ5KHVhID0gZ2V0VUEoKSkge1xyXG4gICAgcmV0dXJuIC9ibGFja2JlcnJ5L2kudGVzdCh1YSk7XHJcbn1cclxuZnVuY3Rpb24gX2lzV2ViT1ModWEgPSBnZXRVQSgpKSB7XHJcbiAgICByZXR1cm4gL3dlYm9zL2kudGVzdCh1YSk7XHJcbn1cclxuZnVuY3Rpb24gX2lzSU9TKHVhID0gZ2V0VUEoKSkge1xyXG4gICAgcmV0dXJuICgvaXBob25lfGlwYWR8aXBvZC9pLnRlc3QodWEpIHx8XHJcbiAgICAgICAgKC9tYWNpbnRvc2gvaS50ZXN0KHVhKSAmJiAvbW9iaWxlL2kudGVzdCh1YSkpKTtcclxufVxyXG5mdW5jdGlvbiBfaXNJT1M3T3I4KHVhID0gZ2V0VUEoKSkge1xyXG4gICAgcmV0dXJuICgvKGlQYWR8aVBob25lfGlQb2QpLipPUyA3X1xcZC9pLnRlc3QodWEpIHx8XHJcbiAgICAgICAgLyhpUGFkfGlQaG9uZXxpUG9kKS4qT1MgOF9cXGQvaS50ZXN0KHVhKSk7XHJcbn1cclxuZnVuY3Rpb24gX2lzSU9TU3RhbmRhbG9uZSh1YSA9IGdldFVBKCkpIHtcclxuICAgIHZhciBfYTtcclxuICAgIHJldHVybiBfaXNJT1ModWEpICYmICEhKChfYSA9IHdpbmRvdy5uYXZpZ2F0b3IpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zdGFuZGFsb25lKTtcclxufVxyXG5mdW5jdGlvbiBfaXNJRTEwKCkge1xyXG4gICAgcmV0dXJuIGlzSUUoKSAmJiBkb2N1bWVudC5kb2N1bWVudE1vZGUgPT09IDEwO1xyXG59XHJcbmZ1bmN0aW9uIF9pc01vYmlsZUJyb3dzZXIodWEgPSBnZXRVQSgpKSB7XHJcbiAgICAvLyBUT0RPOiBpbXBsZW1lbnQgZ2V0QnJvd3Nlck5hbWUgZXF1aXZhbGVudCBmb3IgT1MuXHJcbiAgICByZXR1cm4gKF9pc0lPUyh1YSkgfHxcclxuICAgICAgICBfaXNBbmRyb2lkKHVhKSB8fFxyXG4gICAgICAgIF9pc1dlYk9TKHVhKSB8fFxyXG4gICAgICAgIF9pc0JsYWNrQmVycnkodWEpIHx8XHJcbiAgICAgICAgL3dpbmRvd3MgcGhvbmUvaS50ZXN0KHVhKSB8fFxyXG4gICAgICAgIF9pc0lFTW9iaWxlKHVhKSk7XHJcbn1cclxuZnVuY3Rpb24gX2lzSWZyYW1lKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyBDaGVjayB0aGF0IHRoZSBjdXJyZW50IHdpbmRvdyBpcyBub3QgdGhlIHRvcCB3aW5kb3cuXHJcbiAgICAgICAgLy8gSWYgc28sIHJldHVybiB0cnVlLlxyXG4gICAgICAgIHJldHVybiAhISh3aW5kb3cgJiYgd2luZG93ICE9PSB3aW5kb3cudG9wKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qXHJcbiAqIERldGVybWluZSB0aGUgU0RLIHZlcnNpb24gc3RyaW5nXHJcbiAqL1xyXG5mdW5jdGlvbiBfZ2V0Q2xpZW50VmVyc2lvbihjbGllbnRQbGF0Zm9ybSwgZnJhbWV3b3JrcyA9IFtdKSB7XHJcbiAgICBsZXQgcmVwb3J0ZWRQbGF0Zm9ybTtcclxuICAgIHN3aXRjaCAoY2xpZW50UGxhdGZvcm0pIHtcclxuICAgICAgICBjYXNlIFwiQnJvd3NlclwiIC8qIENsaWVudFBsYXRmb3JtLkJST1dTRVIgKi86XHJcbiAgICAgICAgICAgIC8vIEluIGEgYnJvd3NlciBlbnZpcm9ubWVudCwgcmVwb3J0IHRoZSBicm93c2VyIG5hbWUuXHJcbiAgICAgICAgICAgIHJlcG9ydGVkUGxhdGZvcm0gPSBfZ2V0QnJvd3Nlck5hbWUoZ2V0VUEoKSk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJXb3JrZXJcIiAvKiBDbGllbnRQbGF0Zm9ybS5XT1JLRVIgKi86XHJcbiAgICAgICAgICAgIC8vIFRlY2huaWNhbGx5IGEgd29ya2VyIHJ1bnMgZnJvbSBhIGJyb3dzZXIgYnV0IHdlIG5lZWQgdG8gZGlmZmVyZW50aWF0ZSBhXHJcbiAgICAgICAgICAgIC8vIHdvcmtlciBmcm9tIGEgYnJvd3Nlci5cclxuICAgICAgICAgICAgLy8gRm9yIGV4YW1wbGU6IENocm9tZS1Xb3JrZXIvSnNDb3JlLzQuOS4xL0ZpcmViYXNlQ29yZS13ZWIuXHJcbiAgICAgICAgICAgIHJlcG9ydGVkUGxhdGZvcm0gPSBgJHtfZ2V0QnJvd3Nlck5hbWUoZ2V0VUEoKSl9LSR7Y2xpZW50UGxhdGZvcm19YDtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmVwb3J0ZWRQbGF0Zm9ybSA9IGNsaWVudFBsYXRmb3JtO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcmVwb3J0ZWRGcmFtZXdvcmtzID0gZnJhbWV3b3Jrcy5sZW5ndGhcclxuICAgICAgICA/IGZyYW1ld29ya3Muam9pbignLCcpXHJcbiAgICAgICAgOiAnRmlyZWJhc2VDb3JlLXdlYic7IC8qIGRlZmF1bHQgdmFsdWUgaWYgbm8gb3RoZXIgZnJhbWV3b3JrIGlzIHVzZWQgKi9cclxuICAgIHJldHVybiBgJHtyZXBvcnRlZFBsYXRmb3JtfS8ke1wiSnNDb3JlXCIgLyogQ2xpZW50SW1wbGVtZW50YXRpb24uQ09SRSAqL30vJHtTREtfVkVSU0lPTn0vJHtyZXBvcnRlZEZyYW1ld29ya3N9YDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBBdXRoTWlkZGxld2FyZVF1ZXVlIHtcclxuICAgIGNvbnN0cnVjdG9yKGF1dGgpIHtcclxuICAgICAgICB0aGlzLmF1dGggPSBhdXRoO1xyXG4gICAgICAgIHRoaXMucXVldWUgPSBbXTtcclxuICAgIH1cclxuICAgIHB1c2hDYWxsYmFjayhjYWxsYmFjaywgb25BYm9ydCkge1xyXG4gICAgICAgIC8vIFRoZSBjYWxsYmFjayBjb3VsZCBiZSBzeW5jIG9yIGFzeW5jLiBXcmFwIGl0IGludG8gYVxyXG4gICAgICAgIC8vIGZ1bmN0aW9uIHRoYXQgaXMgYWx3YXlzIGFzeW5jLlxyXG4gICAgICAgIGNvbnN0IHdyYXBwZWRDYWxsYmFjayA9ICh1c2VyKSA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBjYWxsYmFjayh1c2VyKTtcclxuICAgICAgICAgICAgICAgIC8vIEVpdGhlciByZXNvbHZlIHdpdGggZXhpc3RpbmcgcHJvbWlzZSBvciB3cmFwIGEgbm9uLXByb21pc2VcclxuICAgICAgICAgICAgICAgIC8vIHJldHVybiB2YWx1ZSBpbnRvIGEgcHJvbWlzZS5cclxuICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gU3luYyBjYWxsYmFjayB0aHJvd3MuXHJcbiAgICAgICAgICAgICAgICByZWplY3QoZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBBdHRhY2ggdGhlIG9uQWJvcnQgaWYgcHJlc2VudFxyXG4gICAgICAgIHdyYXBwZWRDYWxsYmFjay5vbkFib3J0ID0gb25BYm9ydDtcclxuICAgICAgICB0aGlzLnF1ZXVlLnB1c2god3JhcHBlZENhbGxiYWNrKTtcclxuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMucXVldWUubGVuZ3RoIC0gMTtcclxuICAgICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBVbnN1YnNjcmliZS4gUmVwbGFjZSB3aXRoIG5vLW9wLiBEbyBub3QgcmVtb3ZlIGZyb20gYXJyYXksIG9yIGl0IHdpbGwgZGlzdHVyYlxyXG4gICAgICAgICAgICAvLyBpbmRleGluZyBvZiBvdGhlciBlbGVtZW50cy5cclxuICAgICAgICAgICAgdGhpcy5xdWV1ZVtpbmRleF0gPSAoKSA9PiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgYXN5bmMgcnVuTWlkZGxld2FyZShuZXh0VXNlcikge1xyXG4gICAgICAgIGlmICh0aGlzLmF1dGguY3VycmVudFVzZXIgPT09IG5leHRVc2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gV2hpbGUgcnVubmluZyB0aGUgbWlkZGxld2FyZSwgYnVpbGQgYSB0ZW1wb3Jhcnkgc3RhY2sgb2Ygb25BYm9ydFxyXG4gICAgICAgIC8vIGNhbGxiYWNrcyB0byBjYWxsIGlmIG9uZSBtaWRkbGV3YXJlIGNhbGxiYWNrIHJlamVjdHMuXHJcbiAgICAgICAgY29uc3Qgb25BYm9ydFN0YWNrID0gW107XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBiZWZvcmVTdGF0ZUNhbGxiYWNrIG9mIHRoaXMucXVldWUpIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IGJlZm9yZVN0YXRlQ2FsbGJhY2sobmV4dFVzZXIpO1xyXG4gICAgICAgICAgICAgICAgLy8gT25seSBwdXNoIHRoZSBvbkFib3J0IGlmIHRoZSBjYWxsYmFjayBzdWNjZWVkc1xyXG4gICAgICAgICAgICAgICAgaWYgKGJlZm9yZVN0YXRlQ2FsbGJhY2sub25BYm9ydCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9uQWJvcnRTdGFjay5wdXNoKGJlZm9yZVN0YXRlQ2FsbGJhY2sub25BYm9ydCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgLy8gUnVuIGFsbCBvbkFib3J0LCB3aXRoIHNlcGFyYXRlIHRyeS9jYXRjaCB0byBpZ25vcmUgYW55IGVycm9ycyBhbmRcclxuICAgICAgICAgICAgLy8gY29udGludWVcclxuICAgICAgICAgICAgb25BYm9ydFN0YWNrLnJldmVyc2UoKTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBvbkFib3J0IG9mIG9uQWJvcnRTdGFjaykge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBvbkFib3J0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoXykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIHN3YWxsb3cgZXJyb3IgKi9cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aHJvdyB0aGlzLmF1dGguX2Vycm9yRmFjdG9yeS5jcmVhdGUoXCJsb2dpbi1ibG9ja2VkXCIgLyogQXV0aEVycm9yQ29kZS5MT0dJTl9CTE9DS0VEICovLCB7XHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbE1lc3NhZ2U6IGUgPT09IG51bGwgfHwgZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZS5tZXNzYWdlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRmV0Y2hlcyB0aGUgcGFzc3dvcmQgcG9saWN5IGZvciB0aGUgY3VycmVudGx5IHNldCB0ZW5hbnQgb3IgdGhlIHByb2plY3QgaWYgbm8gdGVuYW50IGlzIHNldC5cclxuICpcclxuICogQHBhcmFtIGF1dGggQXV0aCBvYmplY3QuXHJcbiAqIEBwYXJhbSByZXF1ZXN0IFBhc3N3b3JkIHBvbGljeSByZXF1ZXN0LlxyXG4gKiBAcmV0dXJucyBQYXNzd29yZCBwb2xpY3kgcmVzcG9uc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBfZ2V0UGFzc3dvcmRQb2xpY3koYXV0aCwgcmVxdWVzdCA9IHt9KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiR0VUXCIgLyogSHR0cE1ldGhvZC5HRVQgKi8sIFwiL3YyL3Bhc3N3b3JkUG9saWN5XCIgLyogRW5kcG9pbnQuR0VUX1BBU1NXT1JEX1BPTElDWSAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBNaW5pbXVtIG1pbiBwYXNzd29yZCBsZW5ndGggZW5mb3JjZWQgYnkgdGhlIGJhY2tlbmQsIGV2ZW4gaWYgbm8gbWluaW11bSBsZW5ndGggaXMgc2V0LlxyXG5jb25zdCBNSU5JTVVNX01JTl9QQVNTV09SRF9MRU5HVEggPSA2O1xyXG4vKipcclxuICogU3RvcmVzIHBhc3N3b3JkIHBvbGljeSByZXF1aXJlbWVudHMgYW5kIHByb3ZpZGVzIHBhc3N3b3JkIHZhbGlkYXRpb24gYWdhaW5zdCB0aGUgcG9saWN5LlxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmNsYXNzIFBhc3N3b3JkUG9saWN5SW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihyZXNwb25zZSkge1xyXG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZDtcclxuICAgICAgICAvLyBPbmx5IGluY2x1ZGUgY3VzdG9tIHN0cmVuZ3RoIG9wdGlvbnMgZGVmaW5lZCBpbiB0aGUgcmVzcG9uc2UuXHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2VPcHRpb25zID0gcmVzcG9uc2UuY3VzdG9tU3RyZW5ndGhPcHRpb25zO1xyXG4gICAgICAgIHRoaXMuY3VzdG9tU3RyZW5ndGhPcHRpb25zID0ge307XHJcbiAgICAgICAgLy8gVE9ETzogUmVtb3ZlIG9uY2UgdGhlIGJhY2tlbmQgaXMgdXBkYXRlZCB0byBpbmNsdWRlIHRoZSBtaW5pbXVtIG1pbiBwYXNzd29yZCBsZW5ndGggaW5zdGVhZCBvZiB1bmRlZmluZWQgd2hlbiB0aGVyZSBpcyBubyBtaW5pbXVtIGxlbmd0aCBzZXQuXHJcbiAgICAgICAgdGhpcy5jdXN0b21TdHJlbmd0aE9wdGlvbnMubWluUGFzc3dvcmRMZW5ndGggPVxyXG4gICAgICAgICAgICAoX2EgPSByZXNwb25zZU9wdGlvbnMubWluUGFzc3dvcmRMZW5ndGgpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IE1JTklNVU1fTUlOX1BBU1NXT1JEX0xFTkdUSDtcclxuICAgICAgICBpZiAocmVzcG9uc2VPcHRpb25zLm1heFBhc3N3b3JkTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tU3RyZW5ndGhPcHRpb25zLm1heFBhc3N3b3JkTGVuZ3RoID1cclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlT3B0aW9ucy5tYXhQYXNzd29yZExlbmd0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlT3B0aW9ucy5jb250YWluc0xvd2VyY2FzZUNoYXJhY3RlciAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tU3RyZW5ndGhPcHRpb25zLmNvbnRhaW5zTG93ZXJjYXNlTGV0dGVyID1cclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlT3B0aW9ucy5jb250YWluc0xvd2VyY2FzZUNoYXJhY3RlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlT3B0aW9ucy5jb250YWluc1VwcGVyY2FzZUNoYXJhY3RlciAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tU3RyZW5ndGhPcHRpb25zLmNvbnRhaW5zVXBwZXJjYXNlTGV0dGVyID1cclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlT3B0aW9ucy5jb250YWluc1VwcGVyY2FzZUNoYXJhY3RlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlT3B0aW9ucy5jb250YWluc051bWVyaWNDaGFyYWN0ZXIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmN1c3RvbVN0cmVuZ3RoT3B0aW9ucy5jb250YWluc051bWVyaWNDaGFyYWN0ZXIgPVxyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VPcHRpb25zLmNvbnRhaW5zTnVtZXJpY0NoYXJhY3RlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlT3B0aW9ucy5jb250YWluc05vbkFscGhhbnVtZXJpY0NoYXJhY3RlciAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tU3RyZW5ndGhPcHRpb25zLmNvbnRhaW5zTm9uQWxwaGFudW1lcmljQ2hhcmFjdGVyID1cclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlT3B0aW9ucy5jb250YWluc05vbkFscGhhbnVtZXJpY0NoYXJhY3RlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5lbmZvcmNlbWVudFN0YXRlID0gcmVzcG9uc2UuZW5mb3JjZW1lbnRTdGF0ZTtcclxuICAgICAgICBpZiAodGhpcy5lbmZvcmNlbWVudFN0YXRlID09PSAnRU5GT1JDRU1FTlRfU1RBVEVfVU5TUEVDSUZJRUQnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW5mb3JjZW1lbnRTdGF0ZSA9ICdPRkYnO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBVc2UgYW4gZW1wdHkgc3RyaW5nIGlmIG5vIG5vbi1hbHBoYW51bWVyaWMgY2hhcmFjdGVycyBhcmUgc3BlY2lmaWVkIGluIHRoZSByZXNwb25zZS5cclxuICAgICAgICB0aGlzLmFsbG93ZWROb25BbHBoYW51bWVyaWNDaGFyYWN0ZXJzID1cclxuICAgICAgICAgICAgKF9jID0gKF9iID0gcmVzcG9uc2UuYWxsb3dlZE5vbkFscGhhbnVtZXJpY0NoYXJhY3RlcnMpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5qb2luKCcnKSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogJyc7XHJcbiAgICAgICAgdGhpcy5mb3JjZVVwZ3JhZGVPblNpZ25pbiA9IChfZCA9IHJlc3BvbnNlLmZvcmNlVXBncmFkZU9uU2lnbmluKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiBmYWxzZTtcclxuICAgICAgICB0aGlzLnNjaGVtYVZlcnNpb24gPSByZXNwb25zZS5zY2hlbWFWZXJzaW9uO1xyXG4gICAgfVxyXG4gICAgdmFsaWRhdGVQYXNzd29yZChwYXNzd29yZCkge1xyXG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mO1xyXG4gICAgICAgIGNvbnN0IHN0YXR1cyA9IHtcclxuICAgICAgICAgICAgaXNWYWxpZDogdHJ1ZSxcclxuICAgICAgICAgICAgcGFzc3dvcmRQb2xpY3k6IHRoaXNcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIENoZWNrIHRoZSBwYXNzd29yZCBsZW5ndGggYW5kIGNoYXJhY3RlciBvcHRpb25zLlxyXG4gICAgICAgIHRoaXMudmFsaWRhdGVQYXNzd29yZExlbmd0aE9wdGlvbnMocGFzc3dvcmQsIHN0YXR1cyk7XHJcbiAgICAgICAgdGhpcy52YWxpZGF0ZVBhc3N3b3JkQ2hhcmFjdGVyT3B0aW9ucyhwYXNzd29yZCwgc3RhdHVzKTtcclxuICAgICAgICAvLyBDb21iaW5lIHRoZSBzdGF0dXMgaW50byBzaW5nbGUgaXNWYWxpZCBwcm9wZXJ0eS5cclxuICAgICAgICBzdGF0dXMuaXNWYWxpZCAmJiAoc3RhdHVzLmlzVmFsaWQgPSAoX2EgPSBzdGF0dXMubWVldHNNaW5QYXNzd29yZExlbmd0aCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogdHJ1ZSk7XHJcbiAgICAgICAgc3RhdHVzLmlzVmFsaWQgJiYgKHN0YXR1cy5pc1ZhbGlkID0gKF9iID0gc3RhdHVzLm1lZXRzTWF4UGFzc3dvcmRMZW5ndGgpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHRydWUpO1xyXG4gICAgICAgIHN0YXR1cy5pc1ZhbGlkICYmIChzdGF0dXMuaXNWYWxpZCA9IChfYyA9IHN0YXR1cy5jb250YWluc0xvd2VyY2FzZUxldHRlcikgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogdHJ1ZSk7XHJcbiAgICAgICAgc3RhdHVzLmlzVmFsaWQgJiYgKHN0YXR1cy5pc1ZhbGlkID0gKF9kID0gc3RhdHVzLmNvbnRhaW5zVXBwZXJjYXNlTGV0dGVyKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiB0cnVlKTtcclxuICAgICAgICBzdGF0dXMuaXNWYWxpZCAmJiAoc3RhdHVzLmlzVmFsaWQgPSAoX2UgPSBzdGF0dXMuY29udGFpbnNOdW1lcmljQ2hhcmFjdGVyKSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiB0cnVlKTtcclxuICAgICAgICBzdGF0dXMuaXNWYWxpZCAmJiAoc3RhdHVzLmlzVmFsaWQgPSAoX2YgPSBzdGF0dXMuY29udGFpbnNOb25BbHBoYW51bWVyaWNDaGFyYWN0ZXIpICE9PSBudWxsICYmIF9mICE9PSB2b2lkIDAgPyBfZiA6IHRydWUpO1xyXG4gICAgICAgIHJldHVybiBzdGF0dXM7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFZhbGlkYXRlcyB0aGF0IHRoZSBwYXNzd29yZCBtZWV0cyB0aGUgbGVuZ3RoIG9wdGlvbnMgZm9yIHRoZSBwb2xpY3kuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBhc3N3b3JkIFBhc3N3b3JkIHRvIHZhbGlkYXRlLlxyXG4gICAgICogQHBhcmFtIHN0YXR1cyBWYWxpZGF0aW9uIHN0YXR1cy5cclxuICAgICAqL1xyXG4gICAgdmFsaWRhdGVQYXNzd29yZExlbmd0aE9wdGlvbnMocGFzc3dvcmQsIHN0YXR1cykge1xyXG4gICAgICAgIGNvbnN0IG1pblBhc3N3b3JkTGVuZ3RoID0gdGhpcy5jdXN0b21TdHJlbmd0aE9wdGlvbnMubWluUGFzc3dvcmRMZW5ndGg7XHJcbiAgICAgICAgY29uc3QgbWF4UGFzc3dvcmRMZW5ndGggPSB0aGlzLmN1c3RvbVN0cmVuZ3RoT3B0aW9ucy5tYXhQYXNzd29yZExlbmd0aDtcclxuICAgICAgICBpZiAobWluUGFzc3dvcmRMZW5ndGgpIHtcclxuICAgICAgICAgICAgc3RhdHVzLm1lZXRzTWluUGFzc3dvcmRMZW5ndGggPSBwYXNzd29yZC5sZW5ndGggPj0gbWluUGFzc3dvcmRMZW5ndGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChtYXhQYXNzd29yZExlbmd0aCkge1xyXG4gICAgICAgICAgICBzdGF0dXMubWVldHNNYXhQYXNzd29yZExlbmd0aCA9IHBhc3N3b3JkLmxlbmd0aCA8PSBtYXhQYXNzd29yZExlbmd0aDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFZhbGlkYXRlcyB0aGF0IHRoZSBwYXNzd29yZCBtZWV0cyB0aGUgY2hhcmFjdGVyIG9wdGlvbnMgZm9yIHRoZSBwb2xpY3kuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBhc3N3b3JkIFBhc3N3b3JkIHRvIHZhbGlkYXRlLlxyXG4gICAgICogQHBhcmFtIHN0YXR1cyBWYWxpZGF0aW9uIHN0YXR1cy5cclxuICAgICAqL1xyXG4gICAgdmFsaWRhdGVQYXNzd29yZENoYXJhY3Rlck9wdGlvbnMocGFzc3dvcmQsIHN0YXR1cykge1xyXG4gICAgICAgIC8vIEFzc2lnbiBzdGF0dXNlcyBmb3IgcmVxdWlyZW1lbnRzIGV2ZW4gaWYgdGhlIHBhc3N3b3JkIGlzIGFuIGVtcHR5IHN0cmluZy5cclxuICAgICAgICB0aGlzLnVwZGF0ZVBhc3N3b3JkQ2hhcmFjdGVyT3B0aW9uc1N0YXR1c2VzKHN0YXR1cywgXHJcbiAgICAgICAgLyogY29udGFpbnNMb3dlcmNhc2VDaGFyYWN0ZXI9ICovIGZhbHNlLCBcclxuICAgICAgICAvKiBjb250YWluc1VwcGVyY2FzZUNoYXJhY3Rlcj0gKi8gZmFsc2UsIFxyXG4gICAgICAgIC8qIGNvbnRhaW5zTnVtZXJpY0NoYXJhY3Rlcj0gKi8gZmFsc2UsIFxyXG4gICAgICAgIC8qIGNvbnRhaW5zTm9uQWxwaGFudW1lcmljQ2hhcmFjdGVyPSAqLyBmYWxzZSk7XHJcbiAgICAgICAgbGV0IHBhc3N3b3JkQ2hhcjtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhc3N3b3JkLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHBhc3N3b3JkQ2hhciA9IHBhc3N3b3JkLmNoYXJBdChpKTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVQYXNzd29yZENoYXJhY3Rlck9wdGlvbnNTdGF0dXNlcyhzdGF0dXMsIFxyXG4gICAgICAgICAgICAvKiBjb250YWluc0xvd2VyY2FzZUNoYXJhY3Rlcj0gKi8gcGFzc3dvcmRDaGFyID49ICdhJyAmJlxyXG4gICAgICAgICAgICAgICAgcGFzc3dvcmRDaGFyIDw9ICd6JywgXHJcbiAgICAgICAgICAgIC8qIGNvbnRhaW5zVXBwZXJjYXNlQ2hhcmFjdGVyPSAqLyBwYXNzd29yZENoYXIgPj0gJ0EnICYmXHJcbiAgICAgICAgICAgICAgICBwYXNzd29yZENoYXIgPD0gJ1onLCBcclxuICAgICAgICAgICAgLyogY29udGFpbnNOdW1lcmljQ2hhcmFjdGVyPSAqLyBwYXNzd29yZENoYXIgPj0gJzAnICYmXHJcbiAgICAgICAgICAgICAgICBwYXNzd29yZENoYXIgPD0gJzknLCBcclxuICAgICAgICAgICAgLyogY29udGFpbnNOb25BbHBoYW51bWVyaWNDaGFyYWN0ZXI9ICovIHRoaXMuYWxsb3dlZE5vbkFscGhhbnVtZXJpY0NoYXJhY3RlcnMuaW5jbHVkZXMocGFzc3dvcmRDaGFyKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGVzIHRoZSBydW5uaW5nIHZhbGlkYXRpb24gc3RhdHVzIHdpdGggdGhlIHN0YXR1c2VzIGZvciB0aGUgY2hhcmFjdGVyIG9wdGlvbnMuXHJcbiAgICAgKiBFeHBlY3RlZCB0byBiZSBjYWxsZWQgZWFjaCB0aW1lIGEgY2hhcmFjdGVyIGlzIHByb2Nlc3NlZCB0byB1cGRhdGUgZWFjaCBvcHRpb24gc3RhdHVzXHJcbiAgICAgKiBiYXNlZCBvbiB0aGUgY3VycmVudCBjaGFyYWN0ZXIuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHN0YXR1cyBWYWxpZGF0aW9uIHN0YXR1cy5cclxuICAgICAqIEBwYXJhbSBjb250YWluc0xvd2VyY2FzZUNoYXJhY3RlciBXaGV0aGVyIHRoZSBjaGFyYWN0ZXIgaXMgYSBsb3dlcmNhc2UgbGV0dGVyLlxyXG4gICAgICogQHBhcmFtIGNvbnRhaW5zVXBwZXJjYXNlQ2hhcmFjdGVyIFdoZXRoZXIgdGhlIGNoYXJhY3RlciBpcyBhbiB1cHBlcmNhc2UgbGV0dGVyLlxyXG4gICAgICogQHBhcmFtIGNvbnRhaW5zTnVtZXJpY0NoYXJhY3RlciBXaGV0aGVyIHRoZSBjaGFyYWN0ZXIgaXMgYSBudW1lcmljIGNoYXJhY3Rlci5cclxuICAgICAqIEBwYXJhbSBjb250YWluc05vbkFscGhhbnVtZXJpY0NoYXJhY3RlciBXaGV0aGVyIHRoZSBjaGFyYWN0ZXIgaXMgYSBub24tYWxwaGFudW1lcmljIGNoYXJhY3Rlci5cclxuICAgICAqL1xyXG4gICAgdXBkYXRlUGFzc3dvcmRDaGFyYWN0ZXJPcHRpb25zU3RhdHVzZXMoc3RhdHVzLCBjb250YWluc0xvd2VyY2FzZUNoYXJhY3RlciwgY29udGFpbnNVcHBlcmNhc2VDaGFyYWN0ZXIsIGNvbnRhaW5zTnVtZXJpY0NoYXJhY3RlciwgY29udGFpbnNOb25BbHBoYW51bWVyaWNDaGFyYWN0ZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5jdXN0b21TdHJlbmd0aE9wdGlvbnMuY29udGFpbnNMb3dlcmNhc2VMZXR0ZXIpIHtcclxuICAgICAgICAgICAgc3RhdHVzLmNvbnRhaW5zTG93ZXJjYXNlTGV0dGVyIHx8IChzdGF0dXMuY29udGFpbnNMb3dlcmNhc2VMZXR0ZXIgPSBjb250YWluc0xvd2VyY2FzZUNoYXJhY3Rlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmN1c3RvbVN0cmVuZ3RoT3B0aW9ucy5jb250YWluc1VwcGVyY2FzZUxldHRlcikge1xyXG4gICAgICAgICAgICBzdGF0dXMuY29udGFpbnNVcHBlcmNhc2VMZXR0ZXIgfHwgKHN0YXR1cy5jb250YWluc1VwcGVyY2FzZUxldHRlciA9IGNvbnRhaW5zVXBwZXJjYXNlQ2hhcmFjdGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuY3VzdG9tU3RyZW5ndGhPcHRpb25zLmNvbnRhaW5zTnVtZXJpY0NoYXJhY3Rlcikge1xyXG4gICAgICAgICAgICBzdGF0dXMuY29udGFpbnNOdW1lcmljQ2hhcmFjdGVyIHx8IChzdGF0dXMuY29udGFpbnNOdW1lcmljQ2hhcmFjdGVyID0gY29udGFpbnNOdW1lcmljQ2hhcmFjdGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuY3VzdG9tU3RyZW5ndGhPcHRpb25zLmNvbnRhaW5zTm9uQWxwaGFudW1lcmljQ2hhcmFjdGVyKSB7XHJcbiAgICAgICAgICAgIHN0YXR1cy5jb250YWluc05vbkFscGhhbnVtZXJpY0NoYXJhY3RlciB8fCAoc3RhdHVzLmNvbnRhaW5zTm9uQWxwaGFudW1lcmljQ2hhcmFjdGVyID0gY29udGFpbnNOb25BbHBoYW51bWVyaWNDaGFyYWN0ZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBBdXRoSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihhcHAsIGhlYXJ0YmVhdFNlcnZpY2VQcm92aWRlciwgYXBwQ2hlY2tTZXJ2aWNlUHJvdmlkZXIsIGNvbmZpZykge1xyXG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xyXG4gICAgICAgIHRoaXMuaGVhcnRiZWF0U2VydmljZVByb3ZpZGVyID0gaGVhcnRiZWF0U2VydmljZVByb3ZpZGVyO1xyXG4gICAgICAgIHRoaXMuYXBwQ2hlY2tTZXJ2aWNlUHJvdmlkZXIgPSBhcHBDaGVja1NlcnZpY2VQcm92aWRlcjtcclxuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcclxuICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0gbnVsbDtcclxuICAgICAgICB0aGlzLmVtdWxhdG9yQ29uZmlnID0gbnVsbDtcclxuICAgICAgICB0aGlzLm9wZXJhdGlvbnMgPSBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB0aGlzLmF1dGhTdGF0ZVN1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb24odGhpcyk7XHJcbiAgICAgICAgdGhpcy5pZFRva2VuU3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbih0aGlzKTtcclxuICAgICAgICB0aGlzLmJlZm9yZVN0YXRlUXVldWUgPSBuZXcgQXV0aE1pZGRsZXdhcmVRdWV1ZSh0aGlzKTtcclxuICAgICAgICB0aGlzLnJlZGlyZWN0VXNlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pc1Byb2FjdGl2ZVJlZnJlc2hFbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5FWFBFQ1RFRF9QQVNTV09SRF9QT0xJQ1lfU0NIRU1BX1ZFUlNJT04gPSAxO1xyXG4gICAgICAgIC8vIEFueSBuZXR3b3JrIGNhbGxzIHdpbGwgc2V0IHRoaXMgdG8gdHJ1ZSBhbmQgcHJldmVudCBzdWJzZXF1ZW50IGVtdWxhdG9yXHJcbiAgICAgICAgLy8gaW5pdGlhbGl6YXRpb25cclxuICAgICAgICB0aGlzLl9jYW5Jbml0RW11bGF0b3IgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX2lzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9kZWxldGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5faW5pdGlhbGl6YXRpb25Qcm9taXNlID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9wb3B1cFJlZGlyZWN0UmVzb2x2ZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX2Vycm9yRmFjdG9yeSA9IF9ERUZBVUxUX0FVVEhfRVJST1JfRkFDVE9SWTtcclxuICAgICAgICB0aGlzLl9hZ2VudFJlY2FwdGNoYUNvbmZpZyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fdGVuYW50UmVjYXB0Y2hhQ29uZmlncyA9IHt9O1xyXG4gICAgICAgIHRoaXMuX3Byb2plY3RQYXNzd29yZFBvbGljeSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fdGVuYW50UGFzc3dvcmRQb2xpY2llcyA9IHt9O1xyXG4gICAgICAgIC8vIFRyYWNrcyB0aGUgbGFzdCBub3RpZmllZCBVSUQgZm9yIHN0YXRlIGNoYW5nZSBsaXN0ZW5lcnMgdG8gcHJldmVudFxyXG4gICAgICAgIC8vIHJlcGVhdGVkIGNhbGxzIHRvIHRoZSBjYWxsYmFja3MuIFVuZGVmaW5lZCBtZWFucyBpdCdzIG5ldmVyIGJlZW5cclxuICAgICAgICAvLyBjYWxsZWQsIHdoZXJlYXMgbnVsbCBtZWFucyBpdCdzIGJlZW4gY2FsbGVkIHdpdGggYSBzaWduZWQgb3V0IHVzZXJcclxuICAgICAgICB0aGlzLmxhc3ROb3RpZmllZFVpZCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLmxhbmd1YWdlQ29kZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy50ZW5hbnRJZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHsgYXBwVmVyaWZpY2F0aW9uRGlzYWJsZWRGb3JUZXN0aW5nOiBmYWxzZSB9O1xyXG4gICAgICAgIHRoaXMuZnJhbWV3b3JrcyA9IFtdO1xyXG4gICAgICAgIHRoaXMubmFtZSA9IGFwcC5uYW1lO1xyXG4gICAgICAgIHRoaXMuY2xpZW50VmVyc2lvbiA9IGNvbmZpZy5zZGtDbGllbnRWZXJzaW9uO1xyXG4gICAgfVxyXG4gICAgX2luaXRpYWxpemVXaXRoUGVyc2lzdGVuY2UocGVyc2lzdGVuY2VIaWVyYXJjaHksIHBvcHVwUmVkaXJlY3RSZXNvbHZlcikge1xyXG4gICAgICAgIGlmIChwb3B1cFJlZGlyZWN0UmVzb2x2ZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fcG9wdXBSZWRpcmVjdFJlc29sdmVyID0gX2dldEluc3RhbmNlKHBvcHVwUmVkaXJlY3RSZXNvbHZlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEhhdmUgdG8gY2hlY2sgZm9yIGFwcCBkZWxldGlvbiB0aHJvdWdob3V0IGluaXRpYWxpemF0aW9uIChhZnRlciBlYWNoXHJcbiAgICAgICAgLy8gcHJvbWlzZSByZXNvbHV0aW9uKVxyXG4gICAgICAgIHRoaXMuX2luaXRpYWxpemF0aW9uUHJvbWlzZSA9IHRoaXMucXVldWUoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICB2YXIgX2EsIF9iO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fZGVsZXRlZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucGVyc2lzdGVuY2VNYW5hZ2VyID0gYXdhaXQgUGVyc2lzdGVuY2VVc2VyTWFuYWdlci5jcmVhdGUodGhpcywgcGVyc2lzdGVuY2VIaWVyYXJjaHkpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fZGVsZXRlZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgdGhlIHJlc29sdmVyIGVhcmx5IGlmIG5lY2Vzc2FyeSAob25seSBhcHBsaWNhYmxlIHRvIHdlYjpcclxuICAgICAgICAgICAgLy8gdGhpcyB3aWxsIGNhdXNlIHRoZSBpZnJhbWUgdG8gbG9hZCBpbW1lZGlhdGVseSBpbiBjZXJ0YWluIGNhc2VzKVxyXG4gICAgICAgICAgICBpZiAoKF9hID0gdGhpcy5fcG9wdXBSZWRpcmVjdFJlc29sdmVyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuX3Nob3VsZEluaXRQcm9hY3RpdmVseSkge1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhpcyBmYWlscywgZG9uJ3QgaGFsdCBhdXRoIGxvYWRpbmdcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fcG9wdXBSZWRpcmVjdFJlc29sdmVyLl9pbml0aWFsaXplKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvKiBJZ25vcmUgdGhlIGVycm9yICovXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplQ3VycmVudFVzZXIocG9wdXBSZWRpcmVjdFJlc29sdmVyKTtcclxuICAgICAgICAgICAgdGhpcy5sYXN0Tm90aWZpZWRVaWQgPSAoKF9iID0gdGhpcy5jdXJyZW50VXNlcikgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnVpZCkgfHwgbnVsbDtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2RlbGV0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9pc0luaXRpYWxpemVkID0gdHJ1ZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5faW5pdGlhbGl6YXRpb25Qcm9taXNlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJZiB0aGUgcGVyc2lzdGVuY2UgaXMgY2hhbmdlZCBpbiBhbm90aGVyIHdpbmRvdywgdGhlIHVzZXIgbWFuYWdlciB3aWxsIGxldCB1cyBrbm93XHJcbiAgICAgKi9cclxuICAgIGFzeW5jIF9vblN0b3JhZ2VFdmVudCgpIHtcclxuICAgICAgICBpZiAodGhpcy5fZGVsZXRlZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB0aGlzLmFzc2VydGVkUGVyc2lzdGVuY2UuZ2V0Q3VycmVudFVzZXIoKTtcclxuICAgICAgICBpZiAoIXRoaXMuY3VycmVudFVzZXIgJiYgIXVzZXIpIHtcclxuICAgICAgICAgICAgLy8gTm8gY2hhbmdlLCBkbyBub3RoaW5nICh3YXMgc2lnbmVkIG91dCBhbmQgcmVtYWluZWQgc2lnbmVkIG91dCkuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgdGhlIHNhbWUgdXNlciBpcyB0byBiZSBzeW5jaHJvbml6ZWQuXHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFVzZXIgJiYgdXNlciAmJiB0aGlzLmN1cnJlbnRVc2VyLnVpZCA9PT0gdXNlci51aWQpIHtcclxuICAgICAgICAgICAgLy8gRGF0YSB1cGRhdGUsIHNpbXBseSBjb3B5IGRhdGEgY2hhbmdlcy5cclxuICAgICAgICAgICAgdGhpcy5fY3VycmVudFVzZXIuX2Fzc2lnbih1c2VyKTtcclxuICAgICAgICAgICAgLy8gSWYgdG9rZW5zIGNoYW5nZWQgZnJvbSBwcmV2aW91cyB1c2VyIHRva2VucywgdGhpcyB3aWxsIHRyaWdnZXJcclxuICAgICAgICAgICAgLy8gbm90aWZ5QXV0aExpc3RlbmVyc18uXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3VycmVudFVzZXIuZ2V0SWRUb2tlbigpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFVwZGF0ZSBjdXJyZW50IEF1dGggc3RhdGUuIEVpdGhlciBhIG5ldyBsb2dpbiBvciBsb2dvdXQuXHJcbiAgICAgICAgLy8gU2tpcCBibG9ja2luZyBjYWxsYmFja3MsIHRoZXkgc2hvdWxkIG5vdCBhcHBseSB0byBhIGNoYW5nZSBpbiBhbm90aGVyIHRhYi5cclxuICAgICAgICBhd2FpdCB0aGlzLl91cGRhdGVDdXJyZW50VXNlcih1c2VyLCAvKiBza2lwQmVmb3JlU3RhdGVDYWxsYmFja3MgKi8gdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBpbml0aWFsaXplQ3VycmVudFVzZXJGcm9tSWRUb2tlbihpZFRva2VuKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnZXRBY2NvdW50SW5mbyh0aGlzLCB7IGlkVG9rZW4gfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VySW1wbC5fZnJvbUdldEFjY291bnRJbmZvUmVzcG9uc2UodGhpcywgcmVzcG9uc2UsIGlkVG9rZW4pO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmRpcmVjdGx5U2V0Q3VycmVudFVzZXIodXNlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdGaXJlYmFzZVNlcnZlckFwcCBjb3VsZCBub3QgbG9naW4gdXNlciB3aXRoIHByb3ZpZGVkIGF1dGhJZFRva2VuOiAnLCBlcnIpO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmRpcmVjdGx5U2V0Q3VycmVudFVzZXIobnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgYXN5bmMgaW5pdGlhbGl6ZUN1cnJlbnRVc2VyKHBvcHVwUmVkaXJlY3RSZXNvbHZlcikge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBpZiAoX2lzRmlyZWJhc2VTZXJ2ZXJBcHAodGhpcy5hcHApKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlkVG9rZW4gPSB0aGlzLmFwcC5zZXR0aW5ncy5hdXRoSWRUb2tlbjtcclxuICAgICAgICAgICAgaWYgKGlkVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIC8vIFN0YXJ0IHRoZSBhdXRoIG9wZXJhdGlvbiBpbiB0aGUgbmV4dCB0aWNrIHRvIGFsbG93IGEgbW9tZW50IGZvciB0aGUgY3VzdG9tZXIncyBhcHAgdG9cclxuICAgICAgICAgICAgICAgIC8vIGF0dGFjaCBhbiBlbXVsYXRvciwgaWYgZGVzaXJlZC5cclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuaW5pdGlhbGl6ZUN1cnJlbnRVc2VyRnJvbUlkVG9rZW4oaWRUb2tlbikudGhlbihyZXNvbHZlLCByZXNvbHZlKSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGx5U2V0Q3VycmVudFVzZXIobnVsbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRmlyc3QgY2hlY2sgdG8gc2VlIGlmIHdlIGhhdmUgYSBwZW5kaW5nIHJlZGlyZWN0IGV2ZW50LlxyXG4gICAgICAgIGNvbnN0IHByZXZpb3VzbHlTdG9yZWRVc2VyID0gKGF3YWl0IHRoaXMuYXNzZXJ0ZWRQZXJzaXN0ZW5jZS5nZXRDdXJyZW50VXNlcigpKTtcclxuICAgICAgICBsZXQgZnV0dXJlQ3VycmVudFVzZXIgPSBwcmV2aW91c2x5U3RvcmVkVXNlcjtcclxuICAgICAgICBsZXQgbmVlZHNUb2NoZWNrTWlkZGxld2FyZSA9IGZhbHNlO1xyXG4gICAgICAgIGlmIChwb3B1cFJlZGlyZWN0UmVzb2x2ZXIgJiYgdGhpcy5jb25maWcuYXV0aERvbWFpbikge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmdldE9ySW5pdFJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlZGlyZWN0VXNlckV2ZW50SWQgPSAoX2EgPSB0aGlzLnJlZGlyZWN0VXNlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLl9yZWRpcmVjdEV2ZW50SWQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0b3JlZFVzZXJFdmVudElkID0gZnV0dXJlQ3VycmVudFVzZXIgPT09IG51bGwgfHwgZnV0dXJlQ3VycmVudFVzZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZ1dHVyZUN1cnJlbnRVc2VyLl9yZWRpcmVjdEV2ZW50SWQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMudHJ5UmVkaXJlY3RTaWduSW4ocG9wdXBSZWRpcmVjdFJlc29sdmVyKTtcclxuICAgICAgICAgICAgLy8gSWYgdGhlIHN0b3JlZCB1c2VyIChpLmUuIHRoZSBvbGQgXCJjdXJyZW50VXNlclwiKSBoYXMgYSByZWRpcmVjdElkIHRoYXRcclxuICAgICAgICAgICAgLy8gbWF0Y2hlcyB0aGUgcmVkaXJlY3QgdXNlciwgdGhlbiB3ZSB3YW50IHRvIGluaXRpYWxseSBzaWduIGluIHdpdGggdGhlXHJcbiAgICAgICAgICAgIC8vIG5ldyB1c2VyIG9iamVjdCBmcm9tIHJlc3VsdC5cclxuICAgICAgICAgICAgLy8gVE9ETyhzYW1naG8pOiBNb3JlIHRob3JvdWdobHkgdGVzdCBhbGwgb2YgdGhpc1xyXG4gICAgICAgICAgICBpZiAoKCFyZWRpcmVjdFVzZXJFdmVudElkIHx8IHJlZGlyZWN0VXNlckV2ZW50SWQgPT09IHN0b3JlZFVzZXJFdmVudElkKSAmJlxyXG4gICAgICAgICAgICAgICAgKHJlc3VsdCA9PT0gbnVsbCB8fCByZXN1bHQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlc3VsdC51c2VyKSkge1xyXG4gICAgICAgICAgICAgICAgZnV0dXJlQ3VycmVudFVzZXIgPSByZXN1bHQudXNlcjtcclxuICAgICAgICAgICAgICAgIG5lZWRzVG9jaGVja01pZGRsZXdhcmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIG5vIHVzZXIgaW4gcGVyc2lzdGVuY2UsIHRoZXJlIGlzIG5vIGN1cnJlbnQgdXNlci4gU2V0IHRvIG51bGwuXHJcbiAgICAgICAgaWYgKCFmdXR1cmVDdXJyZW50VXNlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kaXJlY3RseVNldEN1cnJlbnRVc2VyKG51bGwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWZ1dHVyZUN1cnJlbnRVc2VyLl9yZWRpcmVjdEV2ZW50SWQpIHtcclxuICAgICAgICAgICAgLy8gVGhpcyBpc24ndCBhIHJlZGlyZWN0IGxpbmsgb3BlcmF0aW9uLCB3ZSBjYW4gcmVsb2FkIGFuZCBiYWlsLlxyXG4gICAgICAgICAgICAvLyBGaXJzdCB0aG91Z2gsIGVuc3VyZSB0aGF0IHdlIGNoZWNrIHRoZSBtaWRkbGV3YXJlIGlzIGhhcHB5LlxyXG4gICAgICAgICAgICBpZiAobmVlZHNUb2NoZWNrTWlkZGxld2FyZSkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmJlZm9yZVN0YXRlUXVldWUucnVuTWlkZGxld2FyZShmdXR1cmVDdXJyZW50VXNlcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZ1dHVyZUN1cnJlbnRVc2VyID0gcHJldmlvdXNseVN0b3JlZFVzZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gV2Uga25vdyB0aGlzIGlzIGF2YWlsYWJsZSBzaW5jZSB0aGUgYml0IGlzIG9ubHkgc2V0IHdoZW4gdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVzb2x2ZXIgaXMgYXZhaWxhYmxlXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcG9wdXBSZWRpcmVjdFJlc29sdmVyLl9vdmVycmlkZVJlZGlyZWN0UmVzdWx0KHRoaXMsICgpID0+IFByb21pc2UucmVqZWN0KGUpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZnV0dXJlQ3VycmVudFVzZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbG9hZEFuZFNldEN1cnJlbnRVc2VyT3JDbGVhcihmdXR1cmVDdXJyZW50VXNlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kaXJlY3RseVNldEN1cnJlbnRVc2VyKG51bGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF9hc3NlcnQodGhpcy5fcG9wdXBSZWRpcmVjdFJlc29sdmVyLCB0aGlzLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5BUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5nZXRPckluaXRSZWRpcmVjdFBlcnNpc3RlbmNlTWFuYWdlcigpO1xyXG4gICAgICAgIC8vIElmIHRoZSByZWRpcmVjdCB1c2VyJ3MgZXZlbnQgSUQgbWF0Y2hlcyB0aGUgY3VycmVudCB1c2VyJ3MgZXZlbnQgSUQsXHJcbiAgICAgICAgLy8gRE8gTk9UIHJlbG9hZCB0aGUgY3VycmVudCB1c2VyLCBvdGhlcndpc2UgdGhleSdsbCBiZSBjbGVhcmVkIGZyb20gc3RvcmFnZS5cclxuICAgICAgICAvLyBUaGlzIGlzIGltcG9ydGFudCBmb3IgdGhlIHJlYXV0aGVudGljYXRlV2l0aFJlZGlyZWN0KCkgZmxvdy5cclxuICAgICAgICBpZiAodGhpcy5yZWRpcmVjdFVzZXIgJiZcclxuICAgICAgICAgICAgdGhpcy5yZWRpcmVjdFVzZXIuX3JlZGlyZWN0RXZlbnRJZCA9PT0gZnV0dXJlQ3VycmVudFVzZXIuX3JlZGlyZWN0RXZlbnRJZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kaXJlY3RseVNldEN1cnJlbnRVc2VyKGZ1dHVyZUN1cnJlbnRVc2VyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVsb2FkQW5kU2V0Q3VycmVudFVzZXJPckNsZWFyKGZ1dHVyZUN1cnJlbnRVc2VyKTtcclxuICAgIH1cclxuICAgIGFzeW5jIHRyeVJlZGlyZWN0U2lnbkluKHJlZGlyZWN0UmVzb2x2ZXIpIHtcclxuICAgICAgICAvLyBUaGUgcmVkaXJlY3QgdXNlciBuZWVkcyB0byBiZSBjaGVja2VkIChhbmQgc2lnbmVkIGluIGlmIGF2YWlsYWJsZSlcclxuICAgICAgICAvLyBkdXJpbmcgYXV0aCBpbml0aWFsaXphdGlvbi4gQWxsIG9mIHRoZSBub3JtYWwgc2lnbiBpbiBhbmQgbGluay9yZWF1dGhcclxuICAgICAgICAvLyBmbG93cyBjYWxsIGJhY2sgaW50byBhdXRoIGFuZCBwdXNoIHRoaW5ncyBvbnRvIHRoZSBwcm9taXNlIHF1ZXVlLiBXZVxyXG4gICAgICAgIC8vIG5lZWQgdG8gYXdhaXQgdGhlIHJlc3VsdCBvZiB0aGUgcmVkaXJlY3Qgc2lnbiBpbiAqaW5zaWRlIHRoZSBwcm9taXNlXHJcbiAgICAgICAgLy8gcXVldWUqLiBUaGlzIHByZXNlbnRzIGEgcHJvYmxlbTogd2UgcnVuIGludG8gZGVhZGxvY2suIFNlZTpcclxuICAgICAgICAvLyAgICDilIw+IFtJbml0aWFsaXphdGlvbl0g4pSA4pSA4pSA4pSA4pSA4pSQXHJcbiAgICAgICAgLy8gICAg4pSMPiBbPG90aGVyIHF1ZXVlIHRhc2tzPl0g4pSCXHJcbiAgICAgICAgLy8gICAg4pSU4pSAIFtnZXRSZWRpcmVjdFJlc3VsdF0gPOKUgOKUmFxyXG4gICAgICAgIC8vICAgIHdoZXJlIFtdIGFyZSB0YXNrcyBvbiB0aGUgcXVldWUgYW5kIGFycm93cyBkZW5vdGUgYXdhaXRzXHJcbiAgICAgICAgLy8gSW5pdGlhbGl6YXRpb24gd2lsbCBuZXZlciBjb21wbGV0ZSBiZWNhdXNlIGl0J3Mgd2FpdGluZyBvbiBzb21ldGhpbmdcclxuICAgICAgICAvLyB0aGF0J3Mgd2FpdGluZyBmb3IgaW5pdGlhbGl6YXRpb24gdG8gY29tcGxldGUhXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyBJbnN0ZWFkLCB0aGlzIG1ldGhvZCBjYWxscyBnZXRSZWRpcmVjdFJlc3VsdCgpIChzdG9yZWQgaW5cclxuICAgICAgICAvLyBfY29tcGxldGVSZWRpcmVjdEZuKSB3aXRoIGFuIG9wdGlvbmFsIHBhcmFtZXRlciB0aGF0IGluc3RydWN0cyBhbGwgb2ZcclxuICAgICAgICAvLyB0aGUgdW5kZXJseWluZyBhdXRoIG9wZXJhdGlvbnMgdG8gc2tpcCBhbnl0aGluZyB0aGF0IG11dGF0ZXMgYXV0aCBzdGF0ZS5cclxuICAgICAgICBsZXQgcmVzdWx0ID0gbnVsbDtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBXZSBrbm93IHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlciBpcyBzZXQgc2luY2UgcmVkaXJlY3RSZXNvbHZlclxyXG4gICAgICAgICAgICAvLyBpcyBwYXNzZWQgaW4uIFRoZSBfY29tcGxldGVSZWRpcmVjdEZuIGV4cGVjdHMgdGhlIHVud3JhcHBlZCBleHRlcm4uXHJcbiAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlci5fY29tcGxldGVSZWRpcmVjdEZuKHRoaXMsIHJlZGlyZWN0UmVzb2x2ZXIsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAvLyBTd2FsbG93IGFueSBlcnJvcnMgaGVyZTsgdGhlIGNvZGUgY2FuIHJldHJpZXZlIHRoZW0gaW5cclxuICAgICAgICAgICAgLy8gZ2V0UmVkaXJlY3RSZXN1bHQoKS5cclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fc2V0UmVkaXJlY3RVc2VyKG51bGwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG4gICAgYXN5bmMgcmVsb2FkQW5kU2V0Q3VycmVudFVzZXJPckNsZWFyKHVzZXIpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBhd2FpdCBfcmVsb2FkV2l0aG91dFNhdmluZyh1c2VyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgaWYgKChlID09PSBudWxsIHx8IGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGUuY29kZSkgIT09XHJcbiAgICAgICAgICAgICAgICBgYXV0aC8ke1wibmV0d29yay1yZXF1ZXN0LWZhaWxlZFwiIC8qIEF1dGhFcnJvckNvZGUuTkVUV09SS19SRVFVRVNUX0ZBSUxFRCAqL31gKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBTb21ldGhpbmcncyB3cm9uZyB3aXRoIHRoZSB1c2VyJ3MgdG9rZW4uIExvZyB0aGVtIG91dCBhbmQgcmVtb3ZlXHJcbiAgICAgICAgICAgICAgICAvLyB0aGVtIGZyb20gc3RvcmFnZVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0bHlTZXRDdXJyZW50VXNlcihudWxsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5kaXJlY3RseVNldEN1cnJlbnRVc2VyKHVzZXIpO1xyXG4gICAgfVxyXG4gICAgdXNlRGV2aWNlTGFuZ3VhZ2UoKSB7XHJcbiAgICAgICAgdGhpcy5sYW5ndWFnZUNvZGUgPSBfZ2V0VXNlckxhbmd1YWdlKCk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfZGVsZXRlKCkge1xyXG4gICAgICAgIHRoaXMuX2RlbGV0ZWQgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgdXBkYXRlQ3VycmVudFVzZXIodXNlckV4dGVybikge1xyXG4gICAgICAgIGlmIChfaXNGaXJlYmFzZVNlcnZlckFwcCh0aGlzLmFwcCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KF9zZXJ2ZXJBcHBDdXJyZW50VXNlck9wZXJhdGlvbk5vdFN1cHBvcnRlZEVycm9yKHRoaXMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVGhlIHB1YmxpYyB1cGRhdGVDdXJyZW50VXNlciBtZXRob2QgbmVlZHMgdG8gbWFrZSBhIGNvcHkgb2YgdGhlIHVzZXIsXHJcbiAgICAgICAgLy8gYW5kIGFsc28gY2hlY2sgdGhhdCB0aGUgcHJvamVjdCBtYXRjaGVzXHJcbiAgICAgICAgY29uc3QgdXNlciA9IHVzZXJFeHRlcm5cclxuICAgICAgICAgICAgPyBnZXRNb2R1bGFySW5zdGFuY2UodXNlckV4dGVybilcclxuICAgICAgICAgICAgOiBudWxsO1xyXG4gICAgICAgIGlmICh1c2VyKSB7XHJcbiAgICAgICAgICAgIF9hc3NlcnQodXNlci5hdXRoLmNvbmZpZy5hcGlLZXkgPT09IHRoaXMuY29uZmlnLmFwaUtleSwgdGhpcywgXCJpbnZhbGlkLXVzZXItdG9rZW5cIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfQVVUSCAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl91cGRhdGVDdXJyZW50VXNlcih1c2VyICYmIHVzZXIuX2Nsb25lKHRoaXMpKTtcclxuICAgIH1cclxuICAgIGFzeW5jIF91cGRhdGVDdXJyZW50VXNlcih1c2VyLCBza2lwQmVmb3JlU3RhdGVDYWxsYmFja3MgPSBmYWxzZSkge1xyXG4gICAgICAgIGlmICh0aGlzLl9kZWxldGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHVzZXIpIHtcclxuICAgICAgICAgICAgX2Fzc2VydCh0aGlzLnRlbmFudElkID09PSB1c2VyLnRlbmFudElkLCB0aGlzLCBcInRlbmFudC1pZC1taXNtYXRjaFwiIC8qIEF1dGhFcnJvckNvZGUuVEVOQU5UX0lEX01JU01BVENIICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFza2lwQmVmb3JlU3RhdGVDYWxsYmFja3MpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5iZWZvcmVTdGF0ZVF1ZXVlLnJ1bk1pZGRsZXdhcmUodXNlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXVlKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5kaXJlY3RseVNldEN1cnJlbnRVc2VyKHVzZXIpO1xyXG4gICAgICAgICAgICB0aGlzLm5vdGlmeUF1dGhMaXN0ZW5lcnMoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGFzeW5jIHNpZ25PdXQoKSB7XHJcbiAgICAgICAgaWYgKF9pc0ZpcmViYXNlU2VydmVyQXBwKHRoaXMuYXBwKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoX3NlcnZlckFwcEN1cnJlbnRVc2VyT3BlcmF0aW9uTm90U3VwcG9ydGVkRXJyb3IodGhpcykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBSdW4gZmlyc3QsIHRvIGJsb2NrIF9zZXRSZWRpcmVjdFVzZXIoKSBpZiBhbnkgY2FsbGJhY2tzIGZhaWwuXHJcbiAgICAgICAgYXdhaXQgdGhpcy5iZWZvcmVTdGF0ZVF1ZXVlLnJ1bk1pZGRsZXdhcmUobnVsbCk7XHJcbiAgICAgICAgLy8gQ2xlYXIgdGhlIHJlZGlyZWN0IHVzZXIgd2hlbiBzaWduT3V0IGlzIGNhbGxlZFxyXG4gICAgICAgIGlmICh0aGlzLnJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyIHx8IHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlcikge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9zZXRSZWRpcmVjdFVzZXIobnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFByZXZlbnQgY2FsbGJhY2tzIGZyb20gYmVpbmcgY2FsbGVkIGFnYWluIGluIF91cGRhdGVDdXJyZW50VXNlciwgYXNcclxuICAgICAgICAvLyB0aGV5IHdlcmUgYWxyZWFkeSBjYWxsZWQgaW4gdGhlIGZpcnN0IGxpbmUuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VwZGF0ZUN1cnJlbnRVc2VyKG51bGwsIC8qIHNraXBCZWZvcmVTdGF0ZUNhbGxiYWNrcyAqLyB0cnVlKTtcclxuICAgIH1cclxuICAgIHNldFBlcnNpc3RlbmNlKHBlcnNpc3RlbmNlKSB7XHJcbiAgICAgICAgaWYgKF9pc0ZpcmViYXNlU2VydmVyQXBwKHRoaXMuYXBwKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoX3NlcnZlckFwcEN1cnJlbnRVc2VyT3BlcmF0aW9uTm90U3VwcG9ydGVkRXJyb3IodGhpcykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZShhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXNzZXJ0ZWRQZXJzaXN0ZW5jZS5zZXRQZXJzaXN0ZW5jZShfZ2V0SW5zdGFuY2UocGVyc2lzdGVuY2UpKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIF9nZXRSZWNhcHRjaGFDb25maWcoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudGVuYW50SWQgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYWdlbnRSZWNhcHRjaGFDb25maWc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdGVuYW50UmVjYXB0Y2hhQ29uZmlnc1t0aGlzLnRlbmFudElkXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBhc3luYyB2YWxpZGF0ZVBhc3N3b3JkKHBhc3N3b3JkKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9nZXRQYXNzd29yZFBvbGljeUludGVybmFsKCkpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fdXBkYXRlUGFzc3dvcmRQb2xpY3koKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUGFzc3dvcmQgcG9saWN5IHdpbGwgYmUgZGVmaW5lZCBhZnRlciBmZXRjaGluZy5cclxuICAgICAgICBjb25zdCBwYXNzd29yZFBvbGljeSA9IHRoaXMuX2dldFBhc3N3b3JkUG9saWN5SW50ZXJuYWwoKTtcclxuICAgICAgICAvLyBDaGVjayB0aGF0IHRoZSBwb2xpY3kgc2NoZW1hIHZlcnNpb24gaXMgc3VwcG9ydGVkIGJ5IHRoZSBTREsuXHJcbiAgICAgICAgLy8gVE9ETzogVXBkYXRlIHRoaXMgbG9naWMgdG8gdXNlIGEgbWF4IHN1cHBvcnRlZCBwb2xpY3kgc2NoZW1hIHZlcnNpb24gb25jZSB3ZSBoYXZlIG11bHRpcGxlIHNjaGVtYSB2ZXJzaW9ucy5cclxuICAgICAgICBpZiAocGFzc3dvcmRQb2xpY3kuc2NoZW1hVmVyc2lvbiAhPT1cclxuICAgICAgICAgICAgdGhpcy5FWFBFQ1RFRF9QQVNTV09SRF9QT0xJQ1lfU0NIRU1BX1ZFUlNJT04pIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHRoaXMuX2Vycm9yRmFjdG9yeS5jcmVhdGUoXCJ1bnN1cHBvcnRlZC1wYXNzd29yZC1wb2xpY3ktc2NoZW1hLXZlcnNpb25cIiAvKiBBdXRoRXJyb3JDb2RlLlVOU1VQUE9SVEVEX1BBU1NXT1JEX1BPTElDWV9TQ0hFTUFfVkVSU0lPTiAqLywge30pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHBhc3N3b3JkUG9saWN5LnZhbGlkYXRlUGFzc3dvcmQocGFzc3dvcmQpO1xyXG4gICAgfVxyXG4gICAgX2dldFBhc3N3b3JkUG9saWN5SW50ZXJuYWwoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudGVuYW50SWQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Byb2plY3RQYXNzd29yZFBvbGljeTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90ZW5hbnRQYXNzd29yZFBvbGljaWVzW3RoaXMudGVuYW50SWRdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGFzeW5jIF91cGRhdGVQYXNzd29yZFBvbGljeSgpIHtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9nZXRQYXNzd29yZFBvbGljeSh0aGlzKTtcclxuICAgICAgICBjb25zdCBwYXNzd29yZFBvbGljeSA9IG5ldyBQYXNzd29yZFBvbGljeUltcGwocmVzcG9uc2UpO1xyXG4gICAgICAgIGlmICh0aGlzLnRlbmFudElkID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Byb2plY3RQYXNzd29yZFBvbGljeSA9IHBhc3N3b3JkUG9saWN5O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fdGVuYW50UGFzc3dvcmRQb2xpY2llc1t0aGlzLnRlbmFudElkXSA9IHBhc3N3b3JkUG9saWN5O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF9nZXRQZXJzaXN0ZW5jZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hc3NlcnRlZFBlcnNpc3RlbmNlLnBlcnNpc3RlbmNlLnR5cGU7XHJcbiAgICB9XHJcbiAgICBfdXBkYXRlRXJyb3JNYXAoZXJyb3JNYXApIHtcclxuICAgICAgICB0aGlzLl9lcnJvckZhY3RvcnkgPSBuZXcgRXJyb3JGYWN0b3J5KCdhdXRoJywgJ0ZpcmViYXNlJywgZXJyb3JNYXAoKSk7XHJcbiAgICB9XHJcbiAgICBvbkF1dGhTdGF0ZUNoYW5nZWQobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZWdpc3RlclN0YXRlTGlzdGVuZXIodGhpcy5hdXRoU3RhdGVTdWJzY3JpcHRpb24sIG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKTtcclxuICAgIH1cclxuICAgIGJlZm9yZUF1dGhTdGF0ZUNoYW5nZWQoY2FsbGJhY2ssIG9uQWJvcnQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iZWZvcmVTdGF0ZVF1ZXVlLnB1c2hDYWxsYmFjayhjYWxsYmFjaywgb25BYm9ydCk7XHJcbiAgICB9XHJcbiAgICBvbklkVG9rZW5DaGFuZ2VkKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJTdGF0ZUxpc3RlbmVyKHRoaXMuaWRUb2tlblN1YnNjcmlwdGlvbiwgbmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpO1xyXG4gICAgfVxyXG4gICAgYXV0aFN0YXRlUmVhZHkoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudFVzZXIpIHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gdGhpcy5vbkF1dGhTdGF0ZUNoYW5nZWQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSwgcmVqZWN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXZva2VzIHRoZSBnaXZlbiBhY2Nlc3MgdG9rZW4uIEN1cnJlbnRseSBvbmx5IHN1cHBvcnRzIEFwcGxlIE9BdXRoIGFjY2VzcyB0b2tlbnMuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHJldm9rZUFjY2Vzc1Rva2VuKHRva2VuKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFVzZXIpIHtcclxuICAgICAgICAgICAgY29uc3QgaWRUb2tlbiA9IGF3YWl0IHRoaXMuY3VycmVudFVzZXIuZ2V0SWRUb2tlbigpO1xyXG4gICAgICAgICAgICAvLyBHZW5lcmFsaXplIHRoaXMgdG8gYWNjZXB0IG90aGVyIHByb3ZpZGVycyBvbmNlIHN1cHBvcnRlZC5cclxuICAgICAgICAgICAgY29uc3QgcmVxdWVzdCA9IHtcclxuICAgICAgICAgICAgICAgIHByb3ZpZGVySWQ6ICdhcHBsZS5jb20nLFxyXG4gICAgICAgICAgICAgICAgdG9rZW5UeXBlOiBcIkFDQ0VTU19UT0tFTlwiIC8qIFRva2VuVHlwZS5BQ0NFU1NfVE9LRU4gKi8sXHJcbiAgICAgICAgICAgICAgICB0b2tlbixcclxuICAgICAgICAgICAgICAgIGlkVG9rZW5cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgaWYgKHRoaXMudGVuYW50SWQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdC50ZW5hbnRJZCA9IHRoaXMudGVuYW50SWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXdhaXQgcmV2b2tlVG9rZW4odGhpcywgcmVxdWVzdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBhcGlLZXk6IHRoaXMuY29uZmlnLmFwaUtleSxcclxuICAgICAgICAgICAgYXV0aERvbWFpbjogdGhpcy5jb25maWcuYXV0aERvbWFpbixcclxuICAgICAgICAgICAgYXBwTmFtZTogdGhpcy5uYW1lLFxyXG4gICAgICAgICAgICBjdXJyZW50VXNlcjogKF9hID0gdGhpcy5fY3VycmVudFVzZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50b0pTT04oKVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBhc3luYyBfc2V0UmVkaXJlY3RVc2VyKHVzZXIsIHBvcHVwUmVkaXJlY3RSZXNvbHZlcikge1xyXG4gICAgICAgIGNvbnN0IHJlZGlyZWN0TWFuYWdlciA9IGF3YWl0IHRoaXMuZ2V0T3JJbml0UmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIocG9wdXBSZWRpcmVjdFJlc29sdmVyKTtcclxuICAgICAgICByZXR1cm4gdXNlciA9PT0gbnVsbFxyXG4gICAgICAgICAgICA/IHJlZGlyZWN0TWFuYWdlci5yZW1vdmVDdXJyZW50VXNlcigpXHJcbiAgICAgICAgICAgIDogcmVkaXJlY3RNYW5hZ2VyLnNldEN1cnJlbnRVc2VyKHVzZXIpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZ2V0T3JJbml0UmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIocG9wdXBSZWRpcmVjdFJlc29sdmVyKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc29sdmVyID0gKHBvcHVwUmVkaXJlY3RSZXNvbHZlciAmJiBfZ2V0SW5zdGFuY2UocG9wdXBSZWRpcmVjdFJlc29sdmVyKSkgfHxcclxuICAgICAgICAgICAgICAgIHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlcjtcclxuICAgICAgICAgICAgX2Fzc2VydChyZXNvbHZlciwgdGhpcywgXCJhcmd1bWVudC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgICAgICB0aGlzLnJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyID0gYXdhaXQgUGVyc2lzdGVuY2VVc2VyTWFuYWdlci5jcmVhdGUodGhpcywgW19nZXRJbnN0YW5jZShyZXNvbHZlci5fcmVkaXJlY3RQZXJzaXN0ZW5jZSldLCBcInJlZGlyZWN0VXNlclwiIC8qIEtleU5hbWUuUkVESVJFQ1RfVVNFUiAqLyk7XHJcbiAgICAgICAgICAgIHRoaXMucmVkaXJlY3RVc2VyID1cclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIuZ2V0Q3VycmVudFVzZXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXI7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfcmVkaXJlY3RVc2VyRm9ySWQoaWQpIHtcclxuICAgICAgICB2YXIgX2EsIF9iO1xyXG4gICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSd2ZSBjbGVhcmVkIGFueSBwZW5kaW5nIHBlcnNpc3RlbmNlIGFjdGlvbnMgaWYgd2UncmUgbm90IGluXHJcbiAgICAgICAgLy8gdGhlIGluaXRpYWxpemVyXHJcbiAgICAgICAgaWYgKHRoaXMuX2lzSW5pdGlhbGl6ZWQpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5xdWV1ZShhc3luYyAoKSA9PiB7IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoKChfYSA9IHRoaXMuX2N1cnJlbnRVc2VyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuX3JlZGlyZWN0RXZlbnRJZCkgPT09IGlkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jdXJyZW50VXNlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCgoX2IgPSB0aGlzLnJlZGlyZWN0VXNlcikgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLl9yZWRpcmVjdEV2ZW50SWQpID09PSBpZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZWRpcmVjdFVzZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX3BlcnNpc3RVc2VySWZDdXJyZW50KHVzZXIpIHtcclxuICAgICAgICBpZiAodXNlciA9PT0gdGhpcy5jdXJyZW50VXNlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZShhc3luYyAoKSA9PiB0aGlzLmRpcmVjdGx5U2V0Q3VycmVudFVzZXIodXNlcikpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiBOb3RpZmllcyBsaXN0ZW5lcnMgb25seSBpZiB0aGUgdXNlciBpcyBjdXJyZW50ICovXHJcbiAgICBfbm90aWZ5TGlzdGVuZXJzSWZDdXJyZW50KHVzZXIpIHtcclxuICAgICAgICBpZiAodXNlciA9PT0gdGhpcy5jdXJyZW50VXNlcikge1xyXG4gICAgICAgICAgICB0aGlzLm5vdGlmeUF1dGhMaXN0ZW5lcnMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfa2V5KCkge1xyXG4gICAgICAgIHJldHVybiBgJHt0aGlzLmNvbmZpZy5hdXRoRG9tYWlufToke3RoaXMuY29uZmlnLmFwaUtleX06JHt0aGlzLm5hbWV9YDtcclxuICAgIH1cclxuICAgIF9zdGFydFByb2FjdGl2ZVJlZnJlc2goKSB7XHJcbiAgICAgICAgdGhpcy5pc1Byb2FjdGl2ZVJlZnJlc2hFbmFibGVkID0gdHJ1ZTtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50VXNlcikge1xyXG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50VXNlci5fc3RhcnRQcm9hY3RpdmVSZWZyZXNoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX3N0b3BQcm9hY3RpdmVSZWZyZXNoKCkge1xyXG4gICAgICAgIHRoaXMuaXNQcm9hY3RpdmVSZWZyZXNoRW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRVc2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRVc2VyLl9zdG9wUHJvYWN0aXZlUmVmcmVzaCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiBSZXR1cm5zIHRoZSBjdXJyZW50IHVzZXIgY2FzdCBhcyB0aGUgaW50ZXJuYWwgdHlwZSAqL1xyXG4gICAgZ2V0IF9jdXJyZW50VXNlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50VXNlcjtcclxuICAgIH1cclxuICAgIG5vdGlmeUF1dGhMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICBpZiAoIXRoaXMuX2lzSW5pdGlhbGl6ZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmlkVG9rZW5TdWJzY3JpcHRpb24ubmV4dCh0aGlzLmN1cnJlbnRVc2VyKTtcclxuICAgICAgICBjb25zdCBjdXJyZW50VWlkID0gKF9iID0gKF9hID0gdGhpcy5jdXJyZW50VXNlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnVpZCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogbnVsbDtcclxuICAgICAgICBpZiAodGhpcy5sYXN0Tm90aWZpZWRVaWQgIT09IGN1cnJlbnRVaWQpIHtcclxuICAgICAgICAgICAgdGhpcy5sYXN0Tm90aWZpZWRVaWQgPSBjdXJyZW50VWlkO1xyXG4gICAgICAgICAgICB0aGlzLmF1dGhTdGF0ZVN1YnNjcmlwdGlvbi5uZXh0KHRoaXMuY3VycmVudFVzZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJlZ2lzdGVyU3RhdGVMaXN0ZW5lcihzdWJzY3JpcHRpb24sIG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2RlbGV0ZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuICgpID0+IHsgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgY2IgPSB0eXBlb2YgbmV4dE9yT2JzZXJ2ZXIgPT09ICdmdW5jdGlvbidcclxuICAgICAgICAgICAgPyBuZXh0T3JPYnNlcnZlclxyXG4gICAgICAgICAgICA6IG5leHRPck9ic2VydmVyLm5leHQuYmluZChuZXh0T3JPYnNlcnZlcik7XHJcbiAgICAgICAgbGV0IGlzVW5zdWJzY3JpYmVkID0gZmFsc2U7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMuX2lzSW5pdGlhbGl6ZWRcclxuICAgICAgICAgICAgPyBQcm9taXNlLnJlc29sdmUoKVxyXG4gICAgICAgICAgICA6IHRoaXMuX2luaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgICAgICBfYXNzZXJ0KHByb21pc2UsIHRoaXMsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICAvLyBUaGUgY2FsbGJhY2sgbmVlZHMgdG8gYmUgY2FsbGVkIGFzeW5jaHJvbm91c2x5IHBlciB0aGUgc3BlYy5cclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgcHJvbWlzZS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGlzVW5zdWJzY3JpYmVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2IodGhpcy5jdXJyZW50VXNlcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBuZXh0T3JPYnNlcnZlciA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICBjb25zdCB1bnN1YnNjcmliZSA9IHN1YnNjcmlwdGlvbi5hZGRPYnNlcnZlcihuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlZCk7XHJcbiAgICAgICAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpc1Vuc3Vic2NyaWJlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB1bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgdW5zdWJzY3JpYmUgPSBzdWJzY3JpcHRpb24uYWRkT2JzZXJ2ZXIobmV4dE9yT2JzZXJ2ZXIpO1xyXG4gICAgICAgICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaXNVbnN1YnNjcmliZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVucHJvdGVjdGVkIChmcm9tIHJhY2UgY29uZGl0aW9ucykgbWV0aG9kIHRvIHNldCB0aGUgY3VycmVudCB1c2VyLiBUaGlzXHJcbiAgICAgKiBzaG91bGQgb25seSBiZSBjYWxsZWQgZnJvbSB3aXRoaW4gYSBxdWV1ZWQgY2FsbGJhY2suIFRoaXMgaXMgbmVjZXNzYXJ5XHJcbiAgICAgKiBiZWNhdXNlIHRoZSBxdWV1ZSBzaG91bGRuJ3QgcmVseSBvbiBhbm90aGVyIHF1ZXVlZCBjYWxsYmFjay5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgZGlyZWN0bHlTZXRDdXJyZW50VXNlcih1c2VyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFVzZXIgJiYgdGhpcy5jdXJyZW50VXNlciAhPT0gdXNlcikge1xyXG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50VXNlci5fc3RvcFByb2FjdGl2ZVJlZnJlc2goKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHVzZXIgJiYgdGhpcy5pc1Byb2FjdGl2ZVJlZnJlc2hFbmFibGVkKSB7XHJcbiAgICAgICAgICAgIHVzZXIuX3N0YXJ0UHJvYWN0aXZlUmVmcmVzaCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0gdXNlcjtcclxuICAgICAgICBpZiAodXNlcikge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFzc2VydGVkUGVyc2lzdGVuY2Uuc2V0Q3VycmVudFVzZXIodXNlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFzc2VydGVkUGVyc2lzdGVuY2UucmVtb3ZlQ3VycmVudFVzZXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBxdWV1ZShhY3Rpb24pIHtcclxuICAgICAgICAvLyBJbiBjYXNlIHNvbWV0aGluZyBlcnJvcnMsIHRoZSBjYWxsYmFjayBzdGlsbCBzaG91bGQgYmUgY2FsbGVkIGluIG9yZGVyXHJcbiAgICAgICAgLy8gdG8ga2VlcCB0aGUgcHJvbWlzZSBjaGFpbiBhbGl2ZVxyXG4gICAgICAgIHRoaXMub3BlcmF0aW9ucyA9IHRoaXMub3BlcmF0aW9ucy50aGVuKGFjdGlvbiwgYWN0aW9uKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5vcGVyYXRpb25zO1xyXG4gICAgfVxyXG4gICAgZ2V0IGFzc2VydGVkUGVyc2lzdGVuY2UoKSB7XHJcbiAgICAgICAgX2Fzc2VydCh0aGlzLnBlcnNpc3RlbmNlTWFuYWdlciwgdGhpcywgXCJpbnRlcm5hbC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlTWFuYWdlcjtcclxuICAgIH1cclxuICAgIF9sb2dGcmFtZXdvcmsoZnJhbWV3b3JrKSB7XHJcbiAgICAgICAgaWYgKCFmcmFtZXdvcmsgfHwgdGhpcy5mcmFtZXdvcmtzLmluY2x1ZGVzKGZyYW1ld29yaykpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmZyYW1ld29ya3MucHVzaChmcmFtZXdvcmspO1xyXG4gICAgICAgIC8vIFNvcnQgYWxwaGFiZXRpY2FsbHkgc28gdGhhdCBcIkZpcmViYXNlQ29yZS13ZWIsRmlyZWJhc2VVSS13ZWJcIiBhbmRcclxuICAgICAgICAvLyBcIkZpcmViYXNlVUktd2ViLEZpcmViYXNlQ29yZS13ZWJcIiBhcmVuJ3Qgdmlld2VkIGFzIGRpZmZlcmVudC5cclxuICAgICAgICB0aGlzLmZyYW1ld29ya3Muc29ydCgpO1xyXG4gICAgICAgIHRoaXMuY2xpZW50VmVyc2lvbiA9IF9nZXRDbGllbnRWZXJzaW9uKHRoaXMuY29uZmlnLmNsaWVudFBsYXRmb3JtLCB0aGlzLl9nZXRGcmFtZXdvcmtzKCkpO1xyXG4gICAgfVxyXG4gICAgX2dldEZyYW1ld29ya3MoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZnJhbWV3b3JrcztcclxuICAgIH1cclxuICAgIGFzeW5jIF9nZXRBZGRpdGlvbmFsSGVhZGVycygpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgLy8gQWRkaXRpb25hbCBoZWFkZXJzIG9uIGV2ZXJ5IHJlcXVlc3RcclxuICAgICAgICBjb25zdCBoZWFkZXJzID0ge1xyXG4gICAgICAgICAgICBbXCJYLUNsaWVudC1WZXJzaW9uXCIgLyogSHR0cEhlYWRlci5YX0NMSUVOVF9WRVJTSU9OICovXTogdGhpcy5jbGllbnRWZXJzaW9uXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAodGhpcy5hcHAub3B0aW9ucy5hcHBJZCkge1xyXG4gICAgICAgICAgICBoZWFkZXJzW1wiWC1GaXJlYmFzZS1nbXBpZFwiIC8qIEh0dHBIZWFkZXIuWF9GSVJFQkFTRV9HTVBJRCAqL10gPSB0aGlzLmFwcC5vcHRpb25zLmFwcElkO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJZiB0aGUgaGVhcnRiZWF0IHNlcnZpY2UgZXhpc3RzLCBhZGQgdGhlIGhlYXJ0YmVhdCBzdHJpbmdcclxuICAgICAgICBjb25zdCBoZWFydGJlYXRzSGVhZGVyID0gYXdhaXQgKChfYSA9IHRoaXMuaGVhcnRiZWF0U2VydmljZVByb3ZpZGVyXHJcbiAgICAgICAgICAgIC5nZXRJbW1lZGlhdGUoe1xyXG4gICAgICAgICAgICBvcHRpb25hbDogdHJ1ZVxyXG4gICAgICAgIH0pKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZ2V0SGVhcnRiZWF0c0hlYWRlcigpKTtcclxuICAgICAgICBpZiAoaGVhcnRiZWF0c0hlYWRlcikge1xyXG4gICAgICAgICAgICBoZWFkZXJzW1wiWC1GaXJlYmFzZS1DbGllbnRcIiAvKiBIdHRwSGVhZGVyLlhfRklSRUJBU0VfQ0xJRU5UICovXSA9IGhlYXJ0YmVhdHNIZWFkZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIHRoZSBBcHAgQ2hlY2sgc2VydmljZSBleGlzdHMsIGFkZCB0aGUgQXBwIENoZWNrIHRva2VuIGluIHRoZSBoZWFkZXJzXHJcbiAgICAgICAgY29uc3QgYXBwQ2hlY2tUb2tlbiA9IGF3YWl0IHRoaXMuX2dldEFwcENoZWNrVG9rZW4oKTtcclxuICAgICAgICBpZiAoYXBwQ2hlY2tUb2tlbikge1xyXG4gICAgICAgICAgICBoZWFkZXJzW1wiWC1GaXJlYmFzZS1BcHBDaGVja1wiIC8qIEh0dHBIZWFkZXIuWF9GSVJFQkFTRV9BUFBfQ0hFQ0sgKi9dID0gYXBwQ2hlY2tUb2tlbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGhlYWRlcnM7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfZ2V0QXBwQ2hlY2tUb2tlbigpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgY29uc3QgYXBwQ2hlY2tUb2tlblJlc3VsdCA9IGF3YWl0ICgoX2EgPSB0aGlzLmFwcENoZWNrU2VydmljZVByb3ZpZGVyXHJcbiAgICAgICAgICAgIC5nZXRJbW1lZGlhdGUoeyBvcHRpb25hbDogdHJ1ZSB9KSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmdldFRva2VuKCkpO1xyXG4gICAgICAgIGlmIChhcHBDaGVja1Rva2VuUmVzdWx0ID09PSBudWxsIHx8IGFwcENoZWNrVG9rZW5SZXN1bHQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFwcENoZWNrVG9rZW5SZXN1bHQuZXJyb3IpIHtcclxuICAgICAgICAgICAgLy8gQ29udGV4dDogYXBwQ2hlY2suZ2V0VG9rZW4oKSB3aWxsIG5ldmVyIHRocm93IGV2ZW4gaWYgYW4gZXJyb3IgaGFwcGVuZWQuXHJcbiAgICAgICAgICAgIC8vIEluIHRoZSBlcnJvciBjYXNlLCBhIGR1bW15IHRva2VuIHdpbGwgYmUgcmV0dXJuZWQgYWxvbmcgd2l0aCBhbiBlcnJvciBmaWVsZCBkZXNjcmliaW5nXHJcbiAgICAgICAgICAgIC8vIHRoZSBlcnJvci4gSW4gZ2VuZXJhbCwgd2Ugc2hvdWxkbid0IGNhcmUgYWJvdXQgdGhlIGVycm9yIGNvbmRpdGlvbiBhbmQganVzdCB1c2VcclxuICAgICAgICAgICAgLy8gdGhlIHRva2VuIChhY3R1YWwgb3IgZHVtbXkpIHRvIHNlbmQgcmVxdWVzdHMuXHJcbiAgICAgICAgICAgIF9sb2dXYXJuKGBFcnJvciB3aGlsZSByZXRyaWV2aW5nIEFwcCBDaGVjayB0b2tlbjogJHthcHBDaGVja1Rva2VuUmVzdWx0LmVycm9yfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXBwQ2hlY2tUb2tlblJlc3VsdCA9PT0gbnVsbCB8fCBhcHBDaGVja1Rva2VuUmVzdWx0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhcHBDaGVja1Rva2VuUmVzdWx0LnRva2VuO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBNZXRob2QgdG8gYmUgdXNlZCB0byBjYXN0IGRvd24gdG8gb3VyIHByaXZhdGUgaW1wbG1lbnRhdGlvbiBvZiBBdXRoLlxyXG4gKiBJdCB3aWxsIGFsc28gaGFuZGxlIHVud3JhcHBpbmcgZnJvbSB0aGUgY29tcGF0IHR5cGUgaWYgbmVjZXNzYXJ5XHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIEF1dGggb2JqZWN0IHBhc3NlZCBpbiBmcm9tIGRldmVsb3BlclxyXG4gKi9cclxuZnVuY3Rpb24gX2Nhc3RBdXRoKGF1dGgpIHtcclxuICAgIHJldHVybiBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCk7XHJcbn1cclxuLyoqIEhlbHBlciBjbGFzcyB0byB3cmFwIHN1YnNjcmliZXIgbG9naWMgKi9cclxuY2xhc3MgU3Vic2NyaXB0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKGF1dGgpIHtcclxuICAgICAgICB0aGlzLmF1dGggPSBhdXRoO1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuYWRkT2JzZXJ2ZXIgPSBjcmVhdGVTdWJzY3JpYmUob2JzZXJ2ZXIgPT4gKHRoaXMub2JzZXJ2ZXIgPSBvYnNlcnZlcikpO1xyXG4gICAgfVxyXG4gICAgZ2V0IG5leHQoKSB7XHJcbiAgICAgICAgX2Fzc2VydCh0aGlzLm9ic2VydmVyLCB0aGlzLmF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5vYnNlcnZlci5uZXh0LmJpbmQodGhpcy5vYnNlcnZlcik7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxubGV0IGV4dGVybmFsSlNQcm92aWRlciA9IHtcclxuICAgIGFzeW5jIGxvYWRKUygpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byBsb2FkIGV4dGVybmFsIHNjcmlwdHMnKTtcclxuICAgIH0sXHJcbiAgICByZWNhcHRjaGFWMlNjcmlwdDogJycsXHJcbiAgICByZWNhcHRjaGFFbnRlcnByaXNlU2NyaXB0OiAnJyxcclxuICAgIGdhcGlTY3JpcHQ6ICcnXHJcbn07XHJcbmZ1bmN0aW9uIF9zZXRFeHRlcm5hbEpTUHJvdmlkZXIocCkge1xyXG4gICAgZXh0ZXJuYWxKU1Byb3ZpZGVyID0gcDtcclxufVxyXG5mdW5jdGlvbiBfbG9hZEpTKHVybCkge1xyXG4gICAgcmV0dXJuIGV4dGVybmFsSlNQcm92aWRlci5sb2FkSlModXJsKTtcclxufVxyXG5mdW5jdGlvbiBfcmVjYXB0Y2hhVjJTY3JpcHRVcmwoKSB7XHJcbiAgICByZXR1cm4gZXh0ZXJuYWxKU1Byb3ZpZGVyLnJlY2FwdGNoYVYyU2NyaXB0O1xyXG59XHJcbmZ1bmN0aW9uIF9yZWNhcHRjaGFFbnRlcnByaXNlU2NyaXB0VXJsKCkge1xyXG4gICAgcmV0dXJuIGV4dGVybmFsSlNQcm92aWRlci5yZWNhcHRjaGFFbnRlcnByaXNlU2NyaXB0O1xyXG59XHJcbmZ1bmN0aW9uIF9nYXBpU2NyaXB0VXJsKCkge1xyXG4gICAgcmV0dXJuIGV4dGVybmFsSlNQcm92aWRlci5nYXBpU2NyaXB0O1xyXG59XHJcbmZ1bmN0aW9uIF9nZW5lcmF0ZUNhbGxiYWNrTmFtZShwcmVmaXgpIHtcclxuICAgIHJldHVybiBgX18ke3ByZWZpeH0ke01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDAwMDApfWA7XHJcbn1cblxuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXJlcXVpcmUtaW1wb3J0cyAqL1xyXG5jb25zdCBSRUNBUFRDSEFfRU5URVJQUklTRV9WRVJJRklFUl9UWVBFID0gJ3JlY2FwdGNoYS1lbnRlcnByaXNlJztcclxuY29uc3QgRkFLRV9UT0tFTiA9ICdOT19SRUNBUFRDSEEnO1xyXG5jbGFzcyBSZWNhcHRjaGFFbnRlcnByaXNlVmVyaWZpZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGF1dGhFeHRlcm4gLSBUaGUgY29ycmVzcG9uZGluZyBGaXJlYmFzZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihhdXRoRXh0ZXJuKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSWRlbnRpZmllcyB0aGUgdHlwZSBvZiBhcHBsaWNhdGlvbiB2ZXJpZmllciAoZS5nLiBcInJlY2FwdGNoYS1lbnRlcnByaXNlXCIpLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMudHlwZSA9IFJFQ0FQVENIQV9FTlRFUlBSSVNFX1ZFUklGSUVSX1RZUEU7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gX2Nhc3RBdXRoKGF1dGhFeHRlcm4pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBFeGVjdXRlcyB0aGUgdmVyaWZpY2F0aW9uIHByb2Nlc3MuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIGZvciBhIHRva2VuIHRoYXQgY2FuIGJlIHVzZWQgdG8gYXNzZXJ0IHRoZSB2YWxpZGl0eSBvZiBhIHJlcXVlc3QuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHZlcmlmeShhY3Rpb24gPSAndmVyaWZ5JywgZm9yY2VSZWZyZXNoID0gZmFsc2UpIHtcclxuICAgICAgICBhc3luYyBmdW5jdGlvbiByZXRyaWV2ZVNpdGVLZXkoYXV0aCkge1xyXG4gICAgICAgICAgICBpZiAoIWZvcmNlUmVmcmVzaCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGF1dGgudGVuYW50SWQgPT0gbnVsbCAmJiBhdXRoLl9hZ2VudFJlY2FwdGNoYUNvbmZpZyAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF1dGguX2FnZW50UmVjYXB0Y2hhQ29uZmlnLnNpdGVLZXk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoYXV0aC50ZW5hbnRJZCAhPSBudWxsICYmXHJcbiAgICAgICAgICAgICAgICAgICAgYXV0aC5fdGVuYW50UmVjYXB0Y2hhQ29uZmlnc1thdXRoLnRlbmFudElkXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF1dGguX3RlbmFudFJlY2FwdGNoYUNvbmZpZ3NbYXV0aC50ZW5hbnRJZF0uc2l0ZUtleTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZ2V0UmVjYXB0Y2hhQ29uZmlnKGF1dGgsIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGllbnRUeXBlOiBcIkNMSUVOVF9UWVBFX1dFQlwiIC8qIFJlY2FwdGNoYUNsaWVudFR5cGUuV0VCICovLFxyXG4gICAgICAgICAgICAgICAgICAgIHZlcnNpb246IFwiUkVDQVBUQ0hBX0VOVEVSUFJJU0VcIiAvKiBSZWNhcHRjaGFWZXJzaW9uLkVOVEVSUFJJU0UgKi9cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5yZWNhcHRjaGFLZXkgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdyZWNhcHRjaGEgRW50ZXJwcmlzZSBzaXRlIGtleSB1bmRlZmluZWQnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb25maWcgPSBuZXcgUmVjYXB0Y2hhQ29uZmlnKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF1dGgudGVuYW50SWQgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0aC5fYWdlbnRSZWNhcHRjaGFDb25maWcgPSBjb25maWc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRoLl90ZW5hbnRSZWNhcHRjaGFDb25maWdzW2F1dGgudGVuYW50SWRdID0gY29uZmlnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGNvbmZpZy5zaXRlS2V5KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmV0cmlldmVSZWNhcHRjaGFUb2tlbihzaXRlS2V5LCByZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgY29uc3QgZ3JlY2FwdGNoYSA9IHdpbmRvdy5ncmVjYXB0Y2hhO1xyXG4gICAgICAgICAgICBpZiAoaXNFbnRlcnByaXNlKGdyZWNhcHRjaGEpKSB7XHJcbiAgICAgICAgICAgICAgICBncmVjYXB0Y2hhLmVudGVycHJpc2UucmVhZHkoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGdyZWNhcHRjaGEuZW50ZXJwcmlzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZXhlY3V0ZShzaXRlS2V5LCB7IGFjdGlvbiB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbih0b2tlbiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoRkFLRV9UT0tFTik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChFcnJvcignTm8gcmVDQVBUQ0hBIGVudGVycHJpc2Ugc2NyaXB0IGxvYWRlZC4nKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgcmV0cmlldmVTaXRlS2V5KHRoaXMuYXV0aClcclxuICAgICAgICAgICAgICAgIC50aGVuKHNpdGVLZXkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFmb3JjZVJlZnJlc2ggJiYgaXNFbnRlcnByaXNlKHdpbmRvdy5ncmVjYXB0Y2hhKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHJpZXZlUmVjYXB0Y2hhVG9rZW4oc2l0ZUtleSwgcmVzb2x2ZSwgcmVqZWN0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdSZWNhcHRjaGFWZXJpZmllciBpcyBvbmx5IHN1cHBvcnRlZCBpbiBicm93c2VyJykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGxldCB1cmwgPSBfcmVjYXB0Y2hhRW50ZXJwcmlzZVNjcmlwdFVybCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh1cmwubGVuZ3RoICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybCArPSBzaXRlS2V5O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBfbG9hZEpTKHVybClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXRyaWV2ZVJlY2FwdGNoYVRva2VuKHNpdGVLZXksIHJlc29sdmUsIHJlamVjdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5hc3luYyBmdW5jdGlvbiBpbmplY3RSZWNhcHRjaGFGaWVsZHMoYXV0aCwgcmVxdWVzdCwgYWN0aW9uLCBjYXB0Y2hhUmVzcCA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCB2ZXJpZmllciA9IG5ldyBSZWNhcHRjaGFFbnRlcnByaXNlVmVyaWZpZXIoYXV0aCk7XHJcbiAgICBsZXQgY2FwdGNoYVJlc3BvbnNlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjYXB0Y2hhUmVzcG9uc2UgPSBhd2FpdCB2ZXJpZmllci52ZXJpZnkoYWN0aW9uKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNhcHRjaGFSZXNwb25zZSA9IGF3YWl0IHZlcmlmaWVyLnZlcmlmeShhY3Rpb24sIHRydWUpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbmV3UmVxdWVzdCA9IE9iamVjdC5hc3NpZ24oe30sIHJlcXVlc3QpO1xyXG4gICAgaWYgKCFjYXB0Y2hhUmVzcCkge1xyXG4gICAgICAgIE9iamVjdC5hc3NpZ24obmV3UmVxdWVzdCwgeyBjYXB0Y2hhUmVzcG9uc2UgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBPYmplY3QuYXNzaWduKG5ld1JlcXVlc3QsIHsgJ2NhcHRjaGFSZXNwJzogY2FwdGNoYVJlc3BvbnNlIH0pO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmFzc2lnbihuZXdSZXF1ZXN0LCB7ICdjbGllbnRUeXBlJzogXCJDTElFTlRfVFlQRV9XRUJcIiAvKiBSZWNhcHRjaGFDbGllbnRUeXBlLldFQiAqLyB9KTtcclxuICAgIE9iamVjdC5hc3NpZ24obmV3UmVxdWVzdCwge1xyXG4gICAgICAgICdyZWNhcHRjaGFWZXJzaW9uJzogXCJSRUNBUFRDSEFfRU5URVJQUklTRVwiIC8qIFJlY2FwdGNoYVZlcnNpb24uRU5URVJQUklTRSAqL1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gbmV3UmVxdWVzdDtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBoYW5kbGVSZWNhcHRjaGFGbG93KGF1dGhJbnN0YW5jZSwgcmVxdWVzdCwgYWN0aW9uTmFtZSwgYWN0aW9uTWV0aG9kKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICBpZiAoKF9hID0gYXV0aEluc3RhbmNlXHJcbiAgICAgICAgLl9nZXRSZWNhcHRjaGFDb25maWcoKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmlzUHJvdmlkZXJFbmFibGVkKFwiRU1BSUxfUEFTU1dPUkRfUFJPVklERVJcIiAvKiBSZWNhcHRjaGFQcm92aWRlci5FTUFJTF9QQVNTV09SRF9QUk9WSURFUiAqLykpIHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0V2l0aFJlY2FwdGNoYSA9IGF3YWl0IGluamVjdFJlY2FwdGNoYUZpZWxkcyhhdXRoSW5zdGFuY2UsIHJlcXVlc3QsIGFjdGlvbk5hbWUsIGFjdGlvbk5hbWUgPT09IFwiZ2V0T29iQ29kZVwiIC8qIFJlY2FwdGNoYUFjdGlvbk5hbWUuR0VUX09PQl9DT0RFICovKTtcclxuICAgICAgICByZXR1cm4gYWN0aW9uTWV0aG9kKGF1dGhJbnN0YW5jZSwgcmVxdWVzdFdpdGhSZWNhcHRjaGEpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGFjdGlvbk1ldGhvZChhdXRoSW5zdGFuY2UsIHJlcXVlc3QpLmNhdGNoKGFzeW5jIChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IuY29kZSA9PT0gYGF1dGgvJHtcIm1pc3NpbmctcmVjYXB0Y2hhLXRva2VuXCIgLyogQXV0aEVycm9yQ29kZS5NSVNTSU5HX1JFQ0FQVENIQV9UT0tFTiAqL31gKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgJHthY3Rpb25OYW1lfSBpcyBwcm90ZWN0ZWQgYnkgcmVDQVBUQ0hBIEVudGVycHJpc2UgZm9yIHRoaXMgcHJvamVjdC4gQXV0b21hdGljYWxseSB0cmlnZ2VyaW5nIHRoZSByZUNBUFRDSEEgZmxvdyBhbmQgcmVzdGFydGluZyB0aGUgZmxvdy5gKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RXaXRoUmVjYXB0Y2hhID0gYXdhaXQgaW5qZWN0UmVjYXB0Y2hhRmllbGRzKGF1dGhJbnN0YW5jZSwgcmVxdWVzdCwgYWN0aW9uTmFtZSwgYWN0aW9uTmFtZSA9PT0gXCJnZXRPb2JDb2RlXCIgLyogUmVjYXB0Y2hhQWN0aW9uTmFtZS5HRVRfT09CX0NPREUgKi8pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjdGlvbk1ldGhvZChhdXRoSW5zdGFuY2UsIHJlcXVlc3RXaXRoUmVjYXB0Y2hhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5hc3luYyBmdW5jdGlvbiBfaW5pdGlhbGl6ZVJlY2FwdGNoYUNvbmZpZyhhdXRoKSB7XHJcbiAgICBjb25zdCBhdXRoSW50ZXJuYWwgPSBfY2FzdEF1dGgoYXV0aCk7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdldFJlY2FwdGNoYUNvbmZpZyhhdXRoSW50ZXJuYWwsIHtcclxuICAgICAgICBjbGllbnRUeXBlOiBcIkNMSUVOVF9UWVBFX1dFQlwiIC8qIFJlY2FwdGNoYUNsaWVudFR5cGUuV0VCICovLFxyXG4gICAgICAgIHZlcnNpb246IFwiUkVDQVBUQ0hBX0VOVEVSUFJJU0VcIiAvKiBSZWNhcHRjaGFWZXJzaW9uLkVOVEVSUFJJU0UgKi9cclxuICAgIH0pO1xyXG4gICAgY29uc3QgY29uZmlnID0gbmV3IFJlY2FwdGNoYUNvbmZpZyhyZXNwb25zZSk7XHJcbiAgICBpZiAoYXV0aEludGVybmFsLnRlbmFudElkID09IG51bGwpIHtcclxuICAgICAgICBhdXRoSW50ZXJuYWwuX2FnZW50UmVjYXB0Y2hhQ29uZmlnID0gY29uZmlnO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgYXV0aEludGVybmFsLl90ZW5hbnRSZWNhcHRjaGFDb25maWdzW2F1dGhJbnRlcm5hbC50ZW5hbnRJZF0gPSBjb25maWc7XHJcbiAgICB9XHJcbiAgICBpZiAoY29uZmlnLmlzUHJvdmlkZXJFbmFibGVkKFwiRU1BSUxfUEFTU1dPUkRfUFJPVklERVJcIiAvKiBSZWNhcHRjaGFQcm92aWRlci5FTUFJTF9QQVNTV09SRF9QUk9WSURFUiAqLykpIHtcclxuICAgICAgICBjb25zdCB2ZXJpZmllciA9IG5ldyBSZWNhcHRjaGFFbnRlcnByaXNlVmVyaWZpZXIoYXV0aEludGVybmFsKTtcclxuICAgICAgICB2b2lkIHZlcmlmaWVyLnZlcmlmeSgpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplcyBhbiB7QGxpbmsgQXV0aH0gaW5zdGFuY2Ugd2l0aCBmaW5lLWdyYWluZWQgY29udHJvbCBvdmVyXHJcbiAqIHtAbGluayBEZXBlbmRlbmNpZXN9LlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKlxyXG4gKiBUaGlzIGZ1bmN0aW9uIGFsbG93cyBtb3JlIGNvbnRyb2wgb3ZlciB0aGUge0BsaW5rIEF1dGh9IGluc3RhbmNlIHRoYW5cclxuICoge0BsaW5rIGdldEF1dGh9LiBgZ2V0QXV0aGAgdXNlcyBwbGF0Zm9ybS1zcGVjaWZpYyBkZWZhdWx0cyB0byBzdXBwbHlcclxuICogdGhlIHtAbGluayBEZXBlbmRlbmNpZXN9LiBJbiBnZW5lcmFsLCBgZ2V0QXV0aGAgaXMgdGhlIGVhc2llc3Qgd2F5IHRvXHJcbiAqIGluaXRpYWxpemUgQXV0aCBhbmQgd29ya3MgZm9yIG1vc3QgdXNlIGNhc2VzLiBVc2UgYGluaXRpYWxpemVBdXRoYCBpZiB5b3VcclxuICogbmVlZCBjb250cm9sIG92ZXIgd2hpY2ggcGVyc2lzdGVuY2UgbGF5ZXIgaXMgdXNlZCwgb3IgdG8gbWluaW1pemUgYnVuZGxlXHJcbiAqIHNpemUgaWYgeW91J3JlIG5vdCB1c2luZyBlaXRoZXIgYHNpZ25JbldpdGhQb3B1cGAgb3IgYHNpZ25JbldpdGhSZWRpcmVjdGAuXHJcbiAqXHJcbiAqIEZvciBleGFtcGxlLCBpZiB5b3VyIGFwcCBvbmx5IHVzZXMgYW5vbnltb3VzIGFjY291bnRzIGFuZCB5b3Ugb25seSB3YW50XHJcbiAqIGFjY291bnRzIHNhdmVkIGZvciB0aGUgY3VycmVudCBzZXNzaW9uLCBpbml0aWFsaXplIGBBdXRoYCB3aXRoOlxyXG4gKlxyXG4gKiBgYGBqc1xyXG4gKiBjb25zdCBhdXRoID0gaW5pdGlhbGl6ZUF1dGgoYXBwLCB7XHJcbiAqICAgcGVyc2lzdGVuY2U6IGJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2UsXHJcbiAqICAgcG9wdXBSZWRpcmVjdFJlc29sdmVyOiB1bmRlZmluZWQsXHJcbiAqIH0pO1xyXG4gKiBgYGBcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gaW5pdGlhbGl6ZUF1dGgoYXBwLCBkZXBzKSB7XHJcbiAgICBjb25zdCBwcm92aWRlciA9IF9nZXRQcm92aWRlcihhcHAsICdhdXRoJyk7XHJcbiAgICBpZiAocHJvdmlkZXIuaXNJbml0aWFsaXplZCgpKSB7XHJcbiAgICAgICAgY29uc3QgYXV0aCA9IHByb3ZpZGVyLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIGNvbnN0IGluaXRpYWxPcHRpb25zID0gcHJvdmlkZXIuZ2V0T3B0aW9ucygpO1xyXG4gICAgICAgIGlmIChkZWVwRXF1YWwoaW5pdGlhbE9wdGlvbnMsIGRlcHMgIT09IG51bGwgJiYgZGVwcyAhPT0gdm9pZCAwID8gZGVwcyA6IHt9KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYXV0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIF9mYWlsKGF1dGgsIFwiYWxyZWFkeS1pbml0aWFsaXplZFwiIC8qIEF1dGhFcnJvckNvZGUuQUxSRUFEWV9JTklUSUFMSVpFRCAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgYXV0aCA9IHByb3ZpZGVyLmluaXRpYWxpemUoeyBvcHRpb25zOiBkZXBzIH0pO1xyXG4gICAgcmV0dXJuIGF1dGg7XHJcbn1cclxuZnVuY3Rpb24gX2luaXRpYWxpemVBdXRoSW5zdGFuY2UoYXV0aCwgZGVwcykge1xyXG4gICAgY29uc3QgcGVyc2lzdGVuY2UgPSAoZGVwcyA9PT0gbnVsbCB8fCBkZXBzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkZXBzLnBlcnNpc3RlbmNlKSB8fCBbXTtcclxuICAgIGNvbnN0IGhpZXJhcmNoeSA9IChBcnJheS5pc0FycmF5KHBlcnNpc3RlbmNlKSA/IHBlcnNpc3RlbmNlIDogW3BlcnNpc3RlbmNlXSkubWFwKF9nZXRJbnN0YW5jZSk7XHJcbiAgICBpZiAoZGVwcyA9PT0gbnVsbCB8fCBkZXBzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkZXBzLmVycm9yTWFwKSB7XHJcbiAgICAgICAgYXV0aC5fdXBkYXRlRXJyb3JNYXAoZGVwcy5lcnJvck1hcCk7XHJcbiAgICB9XHJcbiAgICAvLyBUaGlzIHByb21pc2UgaXMgaW50ZW5kZWQgdG8gZmxvYXQ7IGF1dGggaW5pdGlhbGl6YXRpb24gaGFwcGVucyBpbiB0aGVcclxuICAgIC8vIGJhY2tncm91bmQsIG1lYW53aGlsZSB0aGUgYXV0aCBvYmplY3QgbWF5IGJlIHVzZWQgYnkgdGhlIGFwcC5cclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgIGF1dGguX2luaXRpYWxpemVXaXRoUGVyc2lzdGVuY2UoaGllcmFyY2h5LCBkZXBzID09PSBudWxsIHx8IGRlcHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRlcHMucG9wdXBSZWRpcmVjdFJlc29sdmVyKTtcclxufVxuXG4vKipcclxuICogQ2hhbmdlcyB0aGUge0BsaW5rIEF1dGh9IGluc3RhbmNlIHRvIGNvbW11bmljYXRlIHdpdGggdGhlIEZpcmViYXNlIEF1dGggRW11bGF0b3IsIGluc3RlYWQgb2YgcHJvZHVjdGlvblxyXG4gKiBGaXJlYmFzZSBBdXRoIHNlcnZpY2VzLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUaGlzIG11c3QgYmUgY2FsbGVkIHN5bmNocm9ub3VzbHkgaW1tZWRpYXRlbHkgZm9sbG93aW5nIHRoZSBmaXJzdCBjYWxsIHRvXHJcbiAqIHtAbGluayBpbml0aWFsaXplQXV0aH0uICBEbyBub3QgdXNlIHdpdGggcHJvZHVjdGlvbiBjcmVkZW50aWFscyBhcyBlbXVsYXRvclxyXG4gKiB0cmFmZmljIGlzIG5vdCBlbmNyeXB0ZWQuXHJcbiAqXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogY29ubmVjdEF1dGhFbXVsYXRvcihhdXRoLCAnaHR0cDovLzEyNy4wLjAuMTo5MDk5JywgeyBkaXNhYmxlV2FybmluZ3M6IHRydWUgfSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSB1cmwgLSBUaGUgVVJMIGF0IHdoaWNoIHRoZSBlbXVsYXRvciBpcyBydW5uaW5nIChlZywgJ2h0dHA6Ly9sb2NhbGhvc3Q6OTA5OScpLlxyXG4gKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsLiBgb3B0aW9ucy5kaXNhYmxlV2FybmluZ3NgIGRlZmF1bHRzIHRvIGBmYWxzZWAuIFNldCBpdCB0b1xyXG4gKiBgdHJ1ZWAgdG8gZGlzYWJsZSB0aGUgd2FybmluZyBiYW5uZXIgYXR0YWNoZWQgdG8gdGhlIERPTS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gY29ubmVjdEF1dGhFbXVsYXRvcihhdXRoLCB1cmwsIG9wdGlvbnMpIHtcclxuICAgIGNvbnN0IGF1dGhJbnRlcm5hbCA9IF9jYXN0QXV0aChhdXRoKTtcclxuICAgIF9hc3NlcnQoYXV0aEludGVybmFsLl9jYW5Jbml0RW11bGF0b3IsIGF1dGhJbnRlcm5hbCwgXCJlbXVsYXRvci1jb25maWctZmFpbGVkXCIgLyogQXV0aEVycm9yQ29kZS5FTVVMQVRPUl9DT05GSUdfRkFJTEVEICovKTtcclxuICAgIF9hc3NlcnQoL15odHRwcz86XFwvXFwvLy50ZXN0KHVybCksIGF1dGhJbnRlcm5hbCwgXCJpbnZhbGlkLWVtdWxhdG9yLXNjaGVtZVwiIC8qIEF1dGhFcnJvckNvZGUuSU5WQUxJRF9FTVVMQVRPUl9TQ0hFTUUgKi8pO1xyXG4gICAgY29uc3QgZGlzYWJsZVdhcm5pbmdzID0gISEob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmRpc2FibGVXYXJuaW5ncyk7XHJcbiAgICBjb25zdCBwcm90b2NvbCA9IGV4dHJhY3RQcm90b2NvbCh1cmwpO1xyXG4gICAgY29uc3QgeyBob3N0LCBwb3J0IH0gPSBleHRyYWN0SG9zdEFuZFBvcnQodXJsKTtcclxuICAgIGNvbnN0IHBvcnRTdHIgPSBwb3J0ID09PSBudWxsID8gJycgOiBgOiR7cG9ydH1gO1xyXG4gICAgLy8gQWx3YXlzIHJlcGxhY2UgcGF0aCB3aXRoIFwiL1wiIChldmVuIGlmIGlucHV0IHVybCBoYWQgbm8gcGF0aCBhdCBhbGwsIG9yIGhhZCBhIGRpZmZlcmVudCBvbmUpLlxyXG4gICAgYXV0aEludGVybmFsLmNvbmZpZy5lbXVsYXRvciA9IHsgdXJsOiBgJHtwcm90b2NvbH0vLyR7aG9zdH0ke3BvcnRTdHJ9L2AgfTtcclxuICAgIGF1dGhJbnRlcm5hbC5zZXR0aW5ncy5hcHBWZXJpZmljYXRpb25EaXNhYmxlZEZvclRlc3RpbmcgPSB0cnVlO1xyXG4gICAgYXV0aEludGVybmFsLmVtdWxhdG9yQ29uZmlnID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgaG9zdCxcclxuICAgICAgICBwb3J0LFxyXG4gICAgICAgIHByb3RvY29sOiBwcm90b2NvbC5yZXBsYWNlKCc6JywgJycpLFxyXG4gICAgICAgIG9wdGlvbnM6IE9iamVjdC5mcmVlemUoeyBkaXNhYmxlV2FybmluZ3MgfSlcclxuICAgIH0pO1xyXG4gICAgaWYgKCFkaXNhYmxlV2FybmluZ3MpIHtcclxuICAgICAgICBlbWl0RW11bGF0b3JXYXJuaW5nKCk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZXh0cmFjdFByb3RvY29sKHVybCkge1xyXG4gICAgY29uc3QgcHJvdG9jb2xFbmQgPSB1cmwuaW5kZXhPZignOicpO1xyXG4gICAgcmV0dXJuIHByb3RvY29sRW5kIDwgMCA/ICcnIDogdXJsLnN1YnN0cigwLCBwcm90b2NvbEVuZCArIDEpO1xyXG59XHJcbmZ1bmN0aW9uIGV4dHJhY3RIb3N0QW5kUG9ydCh1cmwpIHtcclxuICAgIGNvbnN0IHByb3RvY29sID0gZXh0cmFjdFByb3RvY29sKHVybCk7XHJcbiAgICBjb25zdCBhdXRob3JpdHkgPSAvKFxcL1xcLyk/KFtePyMvXSspLy5leGVjKHVybC5zdWJzdHIocHJvdG9jb2wubGVuZ3RoKSk7IC8vIEJldHdlZW4gLy8gYW5kIC8sID8gb3IgIy5cclxuICAgIGlmICghYXV0aG9yaXR5KSB7XHJcbiAgICAgICAgcmV0dXJuIHsgaG9zdDogJycsIHBvcnQ6IG51bGwgfTtcclxuICAgIH1cclxuICAgIGNvbnN0IGhvc3RBbmRQb3J0ID0gYXV0aG9yaXR5WzJdLnNwbGl0KCdAJykucG9wKCkgfHwgJyc7IC8vIFN0cmlwIG91dCBcInVzZXJuYW1lOnBhc3N3b3JkQFwiLlxyXG4gICAgY29uc3QgYnJhY2tldGVkSVB2NiA9IC9eKFxcW1teXFxdXStcXF0pKDp8JCkvLmV4ZWMoaG9zdEFuZFBvcnQpO1xyXG4gICAgaWYgKGJyYWNrZXRlZElQdjYpIHtcclxuICAgICAgICBjb25zdCBob3N0ID0gYnJhY2tldGVkSVB2NlsxXTtcclxuICAgICAgICByZXR1cm4geyBob3N0LCBwb3J0OiBwYXJzZVBvcnQoaG9zdEFuZFBvcnQuc3Vic3RyKGhvc3QubGVuZ3RoICsgMSkpIH07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBjb25zdCBbaG9zdCwgcG9ydF0gPSBob3N0QW5kUG9ydC5zcGxpdCgnOicpO1xyXG4gICAgICAgIHJldHVybiB7IGhvc3QsIHBvcnQ6IHBhcnNlUG9ydChwb3J0KSB9O1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHBhcnNlUG9ydChwb3J0U3RyKSB7XHJcbiAgICBpZiAoIXBvcnRTdHIpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGNvbnN0IHBvcnQgPSBOdW1iZXIocG9ydFN0cik7XHJcbiAgICBpZiAoaXNOYU4ocG9ydCkpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIHJldHVybiBwb3J0O1xyXG59XHJcbmZ1bmN0aW9uIGVtaXRFbXVsYXRvcldhcm5pbmcoKSB7XHJcbiAgICBmdW5jdGlvbiBhdHRhY2hCYW5uZXIoKSB7XHJcbiAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgICAgICAgY29uc3Qgc3R5ID0gZWwuc3R5bGU7XHJcbiAgICAgICAgZWwuaW5uZXJUZXh0ID1cclxuICAgICAgICAgICAgJ1J1bm5pbmcgaW4gZW11bGF0b3IgbW9kZS4gRG8gbm90IHVzZSB3aXRoIHByb2R1Y3Rpb24gY3JlZGVudGlhbHMuJztcclxuICAgICAgICBzdHkucG9zaXRpb24gPSAnZml4ZWQnO1xyXG4gICAgICAgIHN0eS53aWR0aCA9ICcxMDAlJztcclxuICAgICAgICBzdHkuYmFja2dyb3VuZENvbG9yID0gJyNmZmZmZmYnO1xyXG4gICAgICAgIHN0eS5ib3JkZXIgPSAnLjFlbSBzb2xpZCAjMDAwMDAwJztcclxuICAgICAgICBzdHkuY29sb3IgPSAnI2I1MDAwMCc7XHJcbiAgICAgICAgc3R5LmJvdHRvbSA9ICcwcHgnO1xyXG4gICAgICAgIHN0eS5sZWZ0ID0gJzBweCc7XHJcbiAgICAgICAgc3R5Lm1hcmdpbiA9ICcwcHgnO1xyXG4gICAgICAgIHN0eS56SW5kZXggPSAnMTAwMDAnO1xyXG4gICAgICAgIHN0eS50ZXh0QWxpZ24gPSAnY2VudGVyJztcclxuICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdmaXJlYmFzZS1lbXVsYXRvci13YXJuaW5nJyk7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbCk7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBjb25zb2xlLmluZm8gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICBjb25zb2xlLmluZm8oJ1dBUk5JTkc6IFlvdSBhcmUgdXNpbmcgdGhlIEF1dGggRW11bGF0b3IsJyArXHJcbiAgICAgICAgICAgICcgd2hpY2ggaXMgaW50ZW5kZWQgZm9yIGxvY2FsIHRlc3Rpbmcgb25seS4gIERvIG5vdCB1c2Ugd2l0aCcgK1xyXG4gICAgICAgICAgICAnIHByb2R1Y3Rpb24gY3JlZGVudGlhbHMuJyk7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnbG9hZGluZycpIHtcclxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBhdHRhY2hCYW5uZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgYXR0YWNoQmFubmVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBJbnRlcmZhY2UgdGhhdCByZXByZXNlbnRzIHRoZSBjcmVkZW50aWFscyByZXR1cm5lZCBieSBhbiB7QGxpbmsgQXV0aFByb3ZpZGVyfS5cclxuICpcclxuICogQHJlbWFya3NcclxuICogSW1wbGVtZW50YXRpb25zIHNwZWNpZnkgdGhlIGRldGFpbHMgYWJvdXQgZWFjaCBhdXRoIHByb3ZpZGVyJ3MgY3JlZGVudGlhbCByZXF1aXJlbWVudHMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIEF1dGhDcmVkZW50aWFsIHtcclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgYXV0aGVudGljYXRpb24gcHJvdmlkZXIgSUQgZm9yIHRoZSBjcmVkZW50aWFsLlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKiBGb3IgZXhhbXBsZSwgJ2ZhY2Vib29rLmNvbScsIG9yICdnb29nbGUuY29tJy5cclxuICAgICAqL1xyXG4gICAgcHJvdmlkZXJJZCwgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBhdXRoZW50aWNhdGlvbiBzaWduIGluIG1ldGhvZCBmb3IgdGhlIGNyZWRlbnRpYWwuXHJcbiAgICAgKlxyXG4gICAgICogQHJlbWFya3NcclxuICAgICAqIEZvciBleGFtcGxlLCB7QGxpbmsgU2lnbkluTWV0aG9kfS5FTUFJTF9QQVNTV09SRCwgb3JcclxuICAgICAqIHtAbGluayBTaWduSW5NZXRob2R9LkVNQUlMX0xJTksuIFRoaXMgY29ycmVzcG9uZHMgdG8gdGhlIHNpZ24taW4gbWV0aG9kXHJcbiAgICAgKiBpZGVudGlmaWVyIGFzIHJldHVybmVkIGluIHtAbGluayBmZXRjaFNpZ25Jbk1ldGhvZHNGb3JFbWFpbH0uXHJcbiAgICAgKi9cclxuICAgIHNpZ25Jbk1ldGhvZCkge1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJJZCA9IHByb3ZpZGVySWQ7XHJcbiAgICAgICAgdGhpcy5zaWduSW5NZXRob2QgPSBzaWduSW5NZXRob2Q7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBKU09OLXNlcmlhbGl6YWJsZSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIG9iamVjdC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgb2JqZWN0LlxyXG4gICAgICovXHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgcmV0dXJuIGRlYnVnRmFpbCgnbm90IGltcGxlbWVudGVkJyk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfZ2V0SWRUb2tlblJlc3BvbnNlKF9hdXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIGRlYnVnRmFpbCgnbm90IGltcGxlbWVudGVkJyk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfbGlua1RvSWRUb2tlbihfYXV0aCwgX2lkVG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gZGVidWdGYWlsKCdub3QgaW1wbGVtZW50ZWQnKTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9nZXRSZWF1dGhlbnRpY2F0aW9uUmVzb2x2ZXIoX2F1dGgpIHtcclxuICAgICAgICByZXR1cm4gZGVidWdGYWlsKCdub3QgaW1wbGVtZW50ZWQnKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiByZXNldFBhc3N3b3JkKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogSHR0cE1ldGhvZC5QT1NUICovLCBcIi92MS9hY2NvdW50czpyZXNldFBhc3N3b3JkXCIgLyogRW5kcG9pbnQuUkVTRVRfUEFTU1dPUkQgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlRW1haWxQYXNzd29yZChhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIEh0dHBNZXRob2QuUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6dXBkYXRlXCIgLyogRW5kcG9pbnQuU0VUX0FDQ09VTlRfSU5GTyAqLywgcmVxdWVzdCk7XHJcbn1cclxuLy8gVXNlZCBmb3IgbGlua2luZyBhbiBlbWFpbC9wYXNzd29yZCBhY2NvdW50IHRvIGFuIGV4aXN0aW5nIGlkVG9rZW4uIFVzZXMgdGhlIHNhbWUgcmVxdWVzdC9yZXNwb25zZVxyXG4vLyBmb3JtYXQgYXMgdXBkYXRlRW1haWxQYXNzd29yZC5cclxuYXN5bmMgZnVuY3Rpb24gbGlua0VtYWlsUGFzc3dvcmQoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBIdHRwTWV0aG9kLlBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNpZ25VcFwiIC8qIEVuZHBvaW50LlNJR05fVVAgKi8sIHJlcXVlc3QpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIGFwcGx5QWN0aW9uQ29kZSQxKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogSHR0cE1ldGhvZC5QT1NUICovLCBcIi92MS9hY2NvdW50czp1cGRhdGVcIiAvKiBFbmRwb2ludC5TRVRfQUNDT1VOVF9JTkZPICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNpZ25JbldpdGhQYXNzd29yZChhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1TaWduSW5SZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIEh0dHBNZXRob2QuUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6c2lnbkluV2l0aFBhc3N3b3JkXCIgLyogRW5kcG9pbnQuU0lHTl9JTl9XSVRIX1BBU1NXT1JEICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHNlbmRPb2JDb2RlKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogSHR0cE1ldGhvZC5QT1NUICovLCBcIi92MS9hY2NvdW50czpzZW5kT29iQ29kZVwiIC8qIEVuZHBvaW50LlNFTkRfT09CX0NPREUgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gc2VuZEVtYWlsVmVyaWZpY2F0aW9uJDEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIHNlbmRPb2JDb2RlKGF1dGgsIHJlcXVlc3QpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHNlbmRQYXNzd29yZFJlc2V0RW1haWwkMShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gc2VuZE9vYkNvZGUoYXV0aCwgcmVxdWVzdCk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gc2VuZFNpZ25JbkxpbmtUb0VtYWlsJDEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIHNlbmRPb2JDb2RlKGF1dGgsIHJlcXVlc3QpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHZlcmlmeUFuZENoYW5nZUVtYWlsKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBzZW5kT29iQ29kZShhdXRoLCByZXF1ZXN0KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoRW1haWxMaW5rJDEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtU2lnbkluUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBIdHRwTWV0aG9kLlBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNpZ25JbldpdGhFbWFpbExpbmtcIiAvKiBFbmRwb2ludC5TSUdOX0lOX1dJVEhfRU1BSUxfTElOSyAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoRW1haWxMaW5rRm9yTGlua2luZyhhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1TaWduSW5SZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIEh0dHBNZXRob2QuUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6c2lnbkluV2l0aEVtYWlsTGlua1wiIC8qIEVuZHBvaW50LlNJR05fSU5fV0lUSF9FTUFJTF9MSU5LICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBJbnRlcmZhY2UgdGhhdCByZXByZXNlbnRzIHRoZSBjcmVkZW50aWFscyByZXR1cm5lZCBieSB7QGxpbmsgRW1haWxBdXRoUHJvdmlkZXJ9IGZvclxyXG4gKiB7QGxpbmsgUHJvdmlkZXJJZH0uUEFTU1dPUkRcclxuICpcclxuICogQHJlbWFya3NcclxuICogQ292ZXJzIGJvdGgge0BsaW5rIFNpZ25Jbk1ldGhvZH0uRU1BSUxfUEFTU1dPUkQgYW5kXHJcbiAqIHtAbGluayBTaWduSW5NZXRob2R9LkVNQUlMX0xJTksuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIEVtYWlsQXV0aENyZWRlbnRpYWwgZXh0ZW5kcyBBdXRoQ3JlZGVudGlhbCB7XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9lbWFpbCwgXHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfcGFzc3dvcmQsIHNpZ25Jbk1ldGhvZCwgXHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfdGVuYW50SWQgPSBudWxsKSB7XHJcbiAgICAgICAgc3VwZXIoXCJwYXNzd29yZFwiIC8qIFByb3ZpZGVySWQuUEFTU1dPUkQgKi8sIHNpZ25Jbk1ldGhvZCk7XHJcbiAgICAgICAgdGhpcy5fZW1haWwgPSBfZW1haWw7XHJcbiAgICAgICAgdGhpcy5fcGFzc3dvcmQgPSBfcGFzc3dvcmQ7XHJcbiAgICAgICAgdGhpcy5fdGVuYW50SWQgPSBfdGVuYW50SWQ7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBzdGF0aWMgX2Zyb21FbWFpbEFuZFBhc3N3b3JkKGVtYWlsLCBwYXNzd29yZCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgRW1haWxBdXRoQ3JlZGVudGlhbChlbWFpbCwgcGFzc3dvcmQsIFwicGFzc3dvcmRcIiAvKiBTaWduSW5NZXRob2QuRU1BSUxfUEFTU1dPUkQgKi8pO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgc3RhdGljIF9mcm9tRW1haWxBbmRDb2RlKGVtYWlsLCBvb2JDb2RlLCB0ZW5hbnRJZCA9IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEVtYWlsQXV0aENyZWRlbnRpYWwoZW1haWwsIG9vYkNvZGUsIFwiZW1haWxMaW5rXCIgLyogU2lnbkluTWV0aG9kLkVNQUlMX0xJTksgKi8sIHRlbmFudElkKTtcclxuICAgIH1cclxuICAgIC8qKiB7QGluaGVyaXRkb2MgQXV0aENyZWRlbnRpYWwudG9KU09OfSAqL1xyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGVtYWlsOiB0aGlzLl9lbWFpbCxcclxuICAgICAgICAgICAgcGFzc3dvcmQ6IHRoaXMuX3Bhc3N3b3JkLFxyXG4gICAgICAgICAgICBzaWduSW5NZXRob2Q6IHRoaXMuc2lnbkluTWV0aG9kLFxyXG4gICAgICAgICAgICB0ZW5hbnRJZDogdGhpcy5fdGVuYW50SWRcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTdGF0aWMgbWV0aG9kIHRvIGRlc2VyaWFsaXplIGEgSlNPTiByZXByZXNlbnRhdGlvbiBvZiBhbiBvYmplY3QgaW50byBhbiB7QGxpbmsgIEF1dGhDcmVkZW50aWFsfS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ganNvbiAtIEVpdGhlciBgb2JqZWN0YCBvciB0aGUgc3RyaW5naWZpZWQgcmVwcmVzZW50YXRpb24gb2YgdGhlIG9iamVjdC4gV2hlbiBzdHJpbmcgaXNcclxuICAgICAqIHByb3ZpZGVkLCBgSlNPTi5wYXJzZWAgd291bGQgYmUgY2FsbGVkIGZpcnN0LlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIElmIHRoZSBKU09OIGlucHV0IGRvZXMgbm90IHJlcHJlc2VudCBhbiB7QGxpbmsgQXV0aENyZWRlbnRpYWx9LCBudWxsIGlzIHJldHVybmVkLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZnJvbUpTT04oanNvbikge1xyXG4gICAgICAgIGNvbnN0IG9iaiA9IHR5cGVvZiBqc29uID09PSAnc3RyaW5nJyA/IEpTT04ucGFyc2UoanNvbikgOiBqc29uO1xyXG4gICAgICAgIGlmICgob2JqID09PSBudWxsIHx8IG9iaiA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqLmVtYWlsKSAmJiAob2JqID09PSBudWxsIHx8IG9iaiA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqLnBhc3N3b3JkKSkge1xyXG4gICAgICAgICAgICBpZiAob2JqLnNpZ25Jbk1ldGhvZCA9PT0gXCJwYXNzd29yZFwiIC8qIFNpZ25Jbk1ldGhvZC5FTUFJTF9QQVNTV09SRCAqLykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Zyb21FbWFpbEFuZFBhc3N3b3JkKG9iai5lbWFpbCwgb2JqLnBhc3N3b3JkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChvYmouc2lnbkluTWV0aG9kID09PSBcImVtYWlsTGlua1wiIC8qIFNpZ25Jbk1ldGhvZC5FTUFJTF9MSU5LICovKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZnJvbUVtYWlsQW5kQ29kZShvYmouZW1haWwsIG9iai5wYXNzd29yZCwgb2JqLnRlbmFudElkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIGFzeW5jIF9nZXRJZFRva2VuUmVzcG9uc2UoYXV0aCkge1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5zaWduSW5NZXRob2QpIHtcclxuICAgICAgICAgICAgY2FzZSBcInBhc3N3b3JkXCIgLyogU2lnbkluTWV0aG9kLkVNQUlMX1BBU1NXT1JEICovOlxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVxdWVzdCA9IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy5fZW1haWwsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHRoaXMuX3Bhc3N3b3JkLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsaWVudFR5cGU6IFwiQ0xJRU5UX1RZUEVfV0VCXCIgLyogUmVjYXB0Y2hhQ2xpZW50VHlwZS5XRUIgKi9cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlUmVjYXB0Y2hhRmxvdyhhdXRoLCByZXF1ZXN0LCBcInNpZ25JbldpdGhQYXNzd29yZFwiIC8qIFJlY2FwdGNoYUFjdGlvbk5hbWUuU0lHTl9JTl9XSVRIX1BBU1NXT1JEICovLCBzaWduSW5XaXRoUGFzc3dvcmQpO1xyXG4gICAgICAgICAgICBjYXNlIFwiZW1haWxMaW5rXCIgLyogU2lnbkluTWV0aG9kLkVNQUlMX0xJTksgKi86XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2lnbkluV2l0aEVtYWlsTGluayQxKGF1dGgsIHtcclxuICAgICAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy5fZW1haWwsXHJcbiAgICAgICAgICAgICAgICAgICAgb29iQ29kZTogdGhpcy5fcGFzc3dvcmRcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgX2ZhaWwoYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIGFzeW5jIF9saW5rVG9JZFRva2VuKGF1dGgsIGlkVG9rZW4pIHtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMuc2lnbkluTWV0aG9kKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJwYXNzd29yZFwiIC8qIFNpZ25Jbk1ldGhvZC5FTUFJTF9QQVNTV09SRCAqLzpcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWRUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy5fZW1haWwsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHRoaXMuX3Bhc3N3b3JkLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsaWVudFR5cGU6IFwiQ0xJRU5UX1RZUEVfV0VCXCIgLyogUmVjYXB0Y2hhQ2xpZW50VHlwZS5XRUIgKi9cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlUmVjYXB0Y2hhRmxvdyhhdXRoLCByZXF1ZXN0LCBcInNpZ25VcFBhc3N3b3JkXCIgLyogUmVjYXB0Y2hhQWN0aW9uTmFtZS5TSUdOX1VQX1BBU1NXT1JEICovLCBsaW5rRW1haWxQYXNzd29yZCk7XHJcbiAgICAgICAgICAgIGNhc2UgXCJlbWFpbExpbmtcIiAvKiBTaWduSW5NZXRob2QuRU1BSUxfTElOSyAqLzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBzaWduSW5XaXRoRW1haWxMaW5rRm9yTGlua2luZyhhdXRoLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWRUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy5fZW1haWwsXHJcbiAgICAgICAgICAgICAgICAgICAgb29iQ29kZTogdGhpcy5fcGFzc3dvcmRcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgX2ZhaWwoYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9nZXRSZWF1dGhlbnRpY2F0aW9uUmVzb2x2ZXIoYXV0aCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRJZFRva2VuUmVzcG9uc2UoYXV0aCk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aElkcChhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1TaWduSW5SZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIEh0dHBNZXRob2QuUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6c2lnbkluV2l0aElkcFwiIC8qIEVuZHBvaW50LlNJR05fSU5fV0lUSF9JRFAgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgSURQX1JFUVVFU1RfVVJJJDEgPSAnaHR0cDovL2xvY2FsaG9zdCc7XHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIHRoZSBPQXV0aCBjcmVkZW50aWFscyByZXR1cm5lZCBieSBhbiB7QGxpbmsgT0F1dGhQcm92aWRlcn0uXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIEltcGxlbWVudGF0aW9ucyBzcGVjaWZ5IHRoZSBkZXRhaWxzIGFib3V0IGVhY2ggYXV0aCBwcm92aWRlcidzIGNyZWRlbnRpYWwgcmVxdWlyZW1lbnRzLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBPQXV0aENyZWRlbnRpYWwgZXh0ZW5kcyBBdXRoQ3JlZGVudGlhbCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1Rva2VuID0gbnVsbDtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIHN0YXRpYyBfZnJvbVBhcmFtcyhwYXJhbXMpIHtcclxuICAgICAgICBjb25zdCBjcmVkID0gbmV3IE9BdXRoQ3JlZGVudGlhbChwYXJhbXMucHJvdmlkZXJJZCwgcGFyYW1zLnNpZ25Jbk1ldGhvZCk7XHJcbiAgICAgICAgaWYgKHBhcmFtcy5pZFRva2VuIHx8IHBhcmFtcy5hY2Nlc3NUb2tlbikge1xyXG4gICAgICAgICAgICAvLyBPQXV0aCAyIGFuZCBlaXRoZXIgSUQgdG9rZW4gb3IgYWNjZXNzIHRva2VuLlxyXG4gICAgICAgICAgICBpZiAocGFyYW1zLmlkVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIGNyZWQuaWRUb2tlbiA9IHBhcmFtcy5pZFRva2VuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChwYXJhbXMuYWNjZXNzVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIGNyZWQuYWNjZXNzVG9rZW4gPSBwYXJhbXMuYWNjZXNzVG9rZW47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gQWRkIG5vbmNlIGlmIGF2YWlsYWJsZSBhbmQgbm8gcGVuZGluZ1Rva2VuIGlzIHByZXNlbnQuXHJcbiAgICAgICAgICAgIGlmIChwYXJhbXMubm9uY2UgJiYgIXBhcmFtcy5wZW5kaW5nVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIGNyZWQubm9uY2UgPSBwYXJhbXMubm9uY2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHBhcmFtcy5wZW5kaW5nVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIGNyZWQucGVuZGluZ1Rva2VuID0gcGFyYW1zLnBlbmRpbmdUb2tlbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChwYXJhbXMub2F1dGhUb2tlbiAmJiBwYXJhbXMub2F1dGhUb2tlblNlY3JldCkge1xyXG4gICAgICAgICAgICAvLyBPQXV0aCAxIGFuZCBPQXV0aCB0b2tlbiB3aXRoIHRva2VuIHNlY3JldFxyXG4gICAgICAgICAgICBjcmVkLmFjY2Vzc1Rva2VuID0gcGFyYW1zLm9hdXRoVG9rZW47XHJcbiAgICAgICAgICAgIGNyZWQuc2VjcmV0ID0gcGFyYW1zLm9hdXRoVG9rZW5TZWNyZXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBfZmFpbChcImFyZ3VtZW50LWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5BUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjcmVkO1xyXG4gICAgfVxyXG4gICAgLyoqIHtAaW5oZXJpdGRvYyBBdXRoQ3JlZGVudGlhbC50b0pTT059ICAqL1xyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGlkVG9rZW46IHRoaXMuaWRUb2tlbixcclxuICAgICAgICAgICAgYWNjZXNzVG9rZW46IHRoaXMuYWNjZXNzVG9rZW4sXHJcbiAgICAgICAgICAgIHNlY3JldDogdGhpcy5zZWNyZXQsXHJcbiAgICAgICAgICAgIG5vbmNlOiB0aGlzLm5vbmNlLFxyXG4gICAgICAgICAgICBwZW5kaW5nVG9rZW46IHRoaXMucGVuZGluZ1Rva2VuLFxyXG4gICAgICAgICAgICBwcm92aWRlcklkOiB0aGlzLnByb3ZpZGVySWQsXHJcbiAgICAgICAgICAgIHNpZ25Jbk1ldGhvZDogdGhpcy5zaWduSW5NZXRob2RcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTdGF0aWMgbWV0aG9kIHRvIGRlc2VyaWFsaXplIGEgSlNPTiByZXByZXNlbnRhdGlvbiBvZiBhbiBvYmplY3QgaW50byBhblxyXG4gICAgICoge0BsaW5rICBBdXRoQ3JlZGVudGlhbH0uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGpzb24gLSBJbnB1dCBjYW4gYmUgZWl0aGVyIE9iamVjdCBvciB0aGUgc3RyaW5naWZpZWQgcmVwcmVzZW50YXRpb24gb2YgdGhlIG9iamVjdC5cclxuICAgICAqIFdoZW4gc3RyaW5nIGlzIHByb3ZpZGVkLCBKU09OLnBhcnNlIHdvdWxkIGJlIGNhbGxlZCBmaXJzdC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBJZiB0aGUgSlNPTiBpbnB1dCBkb2VzIG5vdCByZXByZXNlbnQgYW4ge0BsaW5rICBBdXRoQ3JlZGVudGlhbH0sIG51bGwgaXMgcmV0dXJuZWQuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBmcm9tSlNPTihqc29uKSB7XHJcbiAgICAgICAgY29uc3Qgb2JqID0gdHlwZW9mIGpzb24gPT09ICdzdHJpbmcnID8gSlNPTi5wYXJzZShqc29uKSA6IGpzb247XHJcbiAgICAgICAgY29uc3QgeyBwcm92aWRlcklkLCBzaWduSW5NZXRob2QgfSA9IG9iaiwgcmVzdCA9IF9fcmVzdChvYmosIFtcInByb3ZpZGVySWRcIiwgXCJzaWduSW5NZXRob2RcIl0pO1xyXG4gICAgICAgIGlmICghcHJvdmlkZXJJZCB8fCAhc2lnbkluTWV0aG9kKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjcmVkID0gbmV3IE9BdXRoQ3JlZGVudGlhbChwcm92aWRlcklkLCBzaWduSW5NZXRob2QpO1xyXG4gICAgICAgIGNyZWQuaWRUb2tlbiA9IHJlc3QuaWRUb2tlbiB8fCB1bmRlZmluZWQ7XHJcbiAgICAgICAgY3JlZC5hY2Nlc3NUb2tlbiA9IHJlc3QuYWNjZXNzVG9rZW4gfHwgdW5kZWZpbmVkO1xyXG4gICAgICAgIGNyZWQuc2VjcmV0ID0gcmVzdC5zZWNyZXQ7XHJcbiAgICAgICAgY3JlZC5ub25jZSA9IHJlc3Qubm9uY2U7XHJcbiAgICAgICAgY3JlZC5wZW5kaW5nVG9rZW4gPSByZXN0LnBlbmRpbmdUb2tlbiB8fCBudWxsO1xyXG4gICAgICAgIHJldHVybiBjcmVkO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2dldElkVG9rZW5SZXNwb25zZShhdXRoKSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuYnVpbGRSZXF1ZXN0KCk7XHJcbiAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhJZHAoYXV0aCwgcmVxdWVzdCk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfbGlua1RvSWRUb2tlbihhdXRoLCBpZFRva2VuKSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuYnVpbGRSZXF1ZXN0KCk7XHJcbiAgICAgICAgcmVxdWVzdC5pZFRva2VuID0gaWRUb2tlbjtcclxuICAgICAgICByZXR1cm4gc2lnbkluV2l0aElkcChhdXRoLCByZXF1ZXN0KTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9nZXRSZWF1dGhlbnRpY2F0aW9uUmVzb2x2ZXIoYXV0aCkge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLmJ1aWxkUmVxdWVzdCgpO1xyXG4gICAgICAgIHJlcXVlc3QuYXV0b0NyZWF0ZSA9IGZhbHNlO1xyXG4gICAgICAgIHJldHVybiBzaWduSW5XaXRoSWRwKGF1dGgsIHJlcXVlc3QpO1xyXG4gICAgfVxyXG4gICAgYnVpbGRSZXF1ZXN0KCkge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgICAgIHJlcXVlc3RVcmk6IElEUF9SRVFVRVNUX1VSSSQxLFxyXG4gICAgICAgICAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKHRoaXMucGVuZGluZ1Rva2VuKSB7XHJcbiAgICAgICAgICAgIHJlcXVlc3QucGVuZGluZ1Rva2VuID0gdGhpcy5wZW5kaW5nVG9rZW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBwb3N0Qm9keSA9IHt9O1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pZFRva2VuKSB7XHJcbiAgICAgICAgICAgICAgICBwb3N0Qm9keVsnaWRfdG9rZW4nXSA9IHRoaXMuaWRUb2tlbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5hY2Nlc3NUb2tlbikge1xyXG4gICAgICAgICAgICAgICAgcG9zdEJvZHlbJ2FjY2Vzc190b2tlbiddID0gdGhpcy5hY2Nlc3NUb2tlbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWNyZXQpIHtcclxuICAgICAgICAgICAgICAgIHBvc3RCb2R5WydvYXV0aF90b2tlbl9zZWNyZXQnXSA9IHRoaXMuc2VjcmV0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHBvc3RCb2R5Wydwcm92aWRlcklkJ10gPSB0aGlzLnByb3ZpZGVySWQ7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm5vbmNlICYmICF0aGlzLnBlbmRpbmdUb2tlbikge1xyXG4gICAgICAgICAgICAgICAgcG9zdEJvZHlbJ25vbmNlJ10gPSB0aGlzLm5vbmNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlcXVlc3QucG9zdEJvZHkgPSBxdWVyeXN0cmluZyhwb3N0Qm9keSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXF1ZXN0O1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNlbmRQaG9uZVZlcmlmaWNhdGlvbkNvZGUoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBIdHRwTWV0aG9kLlBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNlbmRWZXJpZmljYXRpb25Db2RlXCIgLyogRW5kcG9pbnQuU0VORF9WRVJJRklDQVRJT05fQ09ERSAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoUGhvbmVOdW1iZXIkMShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1TaWduSW5SZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIEh0dHBNZXRob2QuUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6c2lnbkluV2l0aFBob25lTnVtYmVyXCIgLyogRW5kcG9pbnQuU0lHTl9JTl9XSVRIX1BIT05FX05VTUJFUiAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBsaW5rV2l0aFBob25lTnVtYmVyJDEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfcGVyZm9ybVNpZ25JblJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogSHR0cE1ldGhvZC5QT1NUICovLCBcIi92MS9hY2NvdW50czpzaWduSW5XaXRoUGhvbmVOdW1iZXJcIiAvKiBFbmRwb2ludC5TSUdOX0lOX1dJVEhfUEhPTkVfTlVNQkVSICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG4gICAgaWYgKHJlc3BvbnNlLnRlbXBvcmFyeVByb29mKSB7XHJcbiAgICAgICAgdGhyb3cgX21ha2VUYWdnZWRFcnJvcihhdXRoLCBcImFjY291bnQtZXhpc3RzLXdpdGgtZGlmZmVyZW50LWNyZWRlbnRpYWxcIiAvKiBBdXRoRXJyb3JDb2RlLk5FRURfQ09ORklSTUFUSU9OICovLCByZXNwb25zZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzcG9uc2U7XHJcbn1cclxuY29uc3QgVkVSSUZZX1BIT05FX05VTUJFUl9GT1JfRVhJU1RJTkdfRVJST1JfTUFQXyA9IHtcclxuICAgIFtcIlVTRVJfTk9UX0ZPVU5EXCIgLyogU2VydmVyRXJyb3IuVVNFUl9OT1RfRk9VTkQgKi9dOiBcInVzZXItbm90LWZvdW5kXCIgLyogQXV0aEVycm9yQ29kZS5VU0VSX0RFTEVURUQgKi9cclxufTtcclxuYXN5bmMgZnVuY3Rpb24gdmVyaWZ5UGhvbmVOdW1iZXJGb3JFeGlzdGluZyhhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICBjb25zdCBhcGlSZXF1ZXN0ID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXF1ZXN0KSwgeyBvcGVyYXRpb246ICdSRUFVVEgnIH0pO1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtU2lnbkluUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBIdHRwTWV0aG9kLlBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNpZ25JbldpdGhQaG9uZU51bWJlclwiIC8qIEVuZHBvaW50LlNJR05fSU5fV0lUSF9QSE9ORV9OVU1CRVIgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCBhcGlSZXF1ZXN0KSwgVkVSSUZZX1BIT05FX05VTUJFUl9GT1JfRVhJU1RJTkdfRVJST1JfTUFQXyk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgdGhlIGNyZWRlbnRpYWxzIHJldHVybmVkIGJ5IHtAbGluayBQaG9uZUF1dGhQcm92aWRlcn0uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIFBob25lQXV0aENyZWRlbnRpYWwgZXh0ZW5kcyBBdXRoQ3JlZGVudGlhbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihwYXJhbXMpIHtcclxuICAgICAgICBzdXBlcihcInBob25lXCIgLyogUHJvdmlkZXJJZC5QSE9ORSAqLywgXCJwaG9uZVwiIC8qIFNpZ25Jbk1ldGhvZC5QSE9ORSAqLyk7XHJcbiAgICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBzdGF0aWMgX2Zyb21WZXJpZmljYXRpb24odmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFBob25lQXV0aENyZWRlbnRpYWwoeyB2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSB9KTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIHN0YXRpYyBfZnJvbVRva2VuUmVzcG9uc2UocGhvbmVOdW1iZXIsIHRlbXBvcmFyeVByb29mKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQaG9uZUF1dGhDcmVkZW50aWFsKHsgcGhvbmVOdW1iZXIsIHRlbXBvcmFyeVByb29mIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2dldElkVG9rZW5SZXNwb25zZShhdXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhQaG9uZU51bWJlciQxKGF1dGgsIHRoaXMuX21ha2VWZXJpZmljYXRpb25SZXF1ZXN0KCkpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2xpbmtUb0lkVG9rZW4oYXV0aCwgaWRUb2tlbikge1xyXG4gICAgICAgIHJldHVybiBsaW5rV2l0aFBob25lTnVtYmVyJDEoYXV0aCwgT2JqZWN0LmFzc2lnbih7IGlkVG9rZW4gfSwgdGhpcy5fbWFrZVZlcmlmaWNhdGlvblJlcXVlc3QoKSkpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2dldFJlYXV0aGVudGljYXRpb25SZXNvbHZlcihhdXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIHZlcmlmeVBob25lTnVtYmVyRm9yRXhpc3RpbmcoYXV0aCwgdGhpcy5fbWFrZVZlcmlmaWNhdGlvblJlcXVlc3QoKSk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfbWFrZVZlcmlmaWNhdGlvblJlcXVlc3QoKSB7XHJcbiAgICAgICAgY29uc3QgeyB0ZW1wb3JhcnlQcm9vZiwgcGhvbmVOdW1iZXIsIHZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlIH0gPSB0aGlzLnBhcmFtcztcclxuICAgICAgICBpZiAodGVtcG9yYXJ5UHJvb2YgJiYgcGhvbmVOdW1iZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdGVtcG9yYXJ5UHJvb2YsIHBob25lTnVtYmVyIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHNlc3Npb25JbmZvOiB2ZXJpZmljYXRpb25JZCxcclxuICAgICAgICAgICAgY29kZTogdmVyaWZpY2F0aW9uQ29kZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICAvKioge0Bpbmhlcml0ZG9jIEF1dGhDcmVkZW50aWFsLnRvSlNPTn0gKi9cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICBjb25zdCBvYmogPSB7XHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQ6IHRoaXMucHJvdmlkZXJJZFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKHRoaXMucGFyYW1zLnBob25lTnVtYmVyKSB7XHJcbiAgICAgICAgICAgIG9iai5waG9uZU51bWJlciA9IHRoaXMucGFyYW1zLnBob25lTnVtYmVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5wYXJhbXMudGVtcG9yYXJ5UHJvb2YpIHtcclxuICAgICAgICAgICAgb2JqLnRlbXBvcmFyeVByb29mID0gdGhpcy5wYXJhbXMudGVtcG9yYXJ5UHJvb2Y7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnBhcmFtcy52ZXJpZmljYXRpb25Db2RlKSB7XHJcbiAgICAgICAgICAgIG9iai52ZXJpZmljYXRpb25Db2RlID0gdGhpcy5wYXJhbXMudmVyaWZpY2F0aW9uQ29kZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucGFyYW1zLnZlcmlmaWNhdGlvbklkKSB7XHJcbiAgICAgICAgICAgIG9iai52ZXJpZmljYXRpb25JZCA9IHRoaXMucGFyYW1zLnZlcmlmaWNhdGlvbklkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgfVxyXG4gICAgLyoqIEdlbmVyYXRlcyBhIHBob25lIGNyZWRlbnRpYWwgYmFzZWQgb24gYSBwbGFpbiBvYmplY3Qgb3IgYSBKU09OIHN0cmluZy4gKi9cclxuICAgIHN0YXRpYyBmcm9tSlNPTihqc29uKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBqc29uID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBqc29uID0gSlNPTi5wYXJzZShqc29uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgeyB2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSwgcGhvbmVOdW1iZXIsIHRlbXBvcmFyeVByb29mIH0gPSBqc29uO1xyXG4gICAgICAgIGlmICghdmVyaWZpY2F0aW9uQ29kZSAmJlxyXG4gICAgICAgICAgICAhdmVyaWZpY2F0aW9uSWQgJiZcclxuICAgICAgICAgICAgIXBob25lTnVtYmVyICYmXHJcbiAgICAgICAgICAgICF0ZW1wb3JhcnlQcm9vZikge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQaG9uZUF1dGhDcmVkZW50aWFsKHtcclxuICAgICAgICAgICAgdmVyaWZpY2F0aW9uSWQsXHJcbiAgICAgICAgICAgIHZlcmlmaWNhdGlvbkNvZGUsXHJcbiAgICAgICAgICAgIHBob25lTnVtYmVyLFxyXG4gICAgICAgICAgICB0ZW1wb3JhcnlQcm9vZlxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBNYXBzIHRoZSBtb2RlIHN0cmluZyBpbiBhY3Rpb24gY29kZSBVUkwgdG8gQWN0aW9uIENvZGUgSW5mbyBvcGVyYXRpb24uXHJcbiAqXHJcbiAqIEBwYXJhbSBtb2RlXHJcbiAqL1xyXG5mdW5jdGlvbiBwYXJzZU1vZGUobW9kZSkge1xyXG4gICAgc3dpdGNoIChtb2RlKSB7XHJcbiAgICAgICAgY2FzZSAncmVjb3ZlckVtYWlsJzpcclxuICAgICAgICAgICAgcmV0dXJuIFwiUkVDT1ZFUl9FTUFJTFwiIC8qIEFjdGlvbkNvZGVPcGVyYXRpb24uUkVDT1ZFUl9FTUFJTCAqLztcclxuICAgICAgICBjYXNlICdyZXNldFBhc3N3b3JkJzpcclxuICAgICAgICAgICAgcmV0dXJuIFwiUEFTU1dPUkRfUkVTRVRcIiAvKiBBY3Rpb25Db2RlT3BlcmF0aW9uLlBBU1NXT1JEX1JFU0VUICovO1xyXG4gICAgICAgIGNhc2UgJ3NpZ25Jbic6XHJcbiAgICAgICAgICAgIHJldHVybiBcIkVNQUlMX1NJR05JTlwiIC8qIEFjdGlvbkNvZGVPcGVyYXRpb24uRU1BSUxfU0lHTklOICovO1xyXG4gICAgICAgIGNhc2UgJ3ZlcmlmeUVtYWlsJzpcclxuICAgICAgICAgICAgcmV0dXJuIFwiVkVSSUZZX0VNQUlMXCIgLyogQWN0aW9uQ29kZU9wZXJhdGlvbi5WRVJJRllfRU1BSUwgKi87XHJcbiAgICAgICAgY2FzZSAndmVyaWZ5QW5kQ2hhbmdlRW1haWwnOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJWRVJJRllfQU5EX0NIQU5HRV9FTUFJTFwiIC8qIEFjdGlvbkNvZGVPcGVyYXRpb24uVkVSSUZZX0FORF9DSEFOR0VfRU1BSUwgKi87XHJcbiAgICAgICAgY2FzZSAncmV2ZXJ0U2Vjb25kRmFjdG9yQWRkaXRpb24nOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJSRVZFUlRfU0VDT05EX0ZBQ1RPUl9BRERJVElPTlwiIC8qIEFjdGlvbkNvZGVPcGVyYXRpb24uUkVWRVJUX1NFQ09ORF9GQUNUT1JfQURESVRJT04gKi87XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEhlbHBlciB0byBwYXJzZSBGREwgbGlua3NcclxuICpcclxuICogQHBhcmFtIHVybFxyXG4gKi9cclxuZnVuY3Rpb24gcGFyc2VEZWVwTGluayh1cmwpIHtcclxuICAgIGNvbnN0IGxpbmsgPSBxdWVyeXN0cmluZ0RlY29kZShleHRyYWN0UXVlcnlzdHJpbmcodXJsKSlbJ2xpbmsnXTtcclxuICAgIC8vIERvdWJsZSBsaW5rIGNhc2UgKGF1dG9tYXRpYyByZWRpcmVjdCkuXHJcbiAgICBjb25zdCBkb3VibGVEZWVwTGluayA9IGxpbmtcclxuICAgICAgICA/IHF1ZXJ5c3RyaW5nRGVjb2RlKGV4dHJhY3RRdWVyeXN0cmluZyhsaW5rKSlbJ2RlZXBfbGlua19pZCddXHJcbiAgICAgICAgOiBudWxsO1xyXG4gICAgLy8gaU9TIGN1c3RvbSBzY2hlbWUgbGlua3MuXHJcbiAgICBjb25zdCBpT1NEZWVwTGluayA9IHF1ZXJ5c3RyaW5nRGVjb2RlKGV4dHJhY3RRdWVyeXN0cmluZyh1cmwpKVsnZGVlcF9saW5rX2lkJ107XHJcbiAgICBjb25zdCBpT1NEb3VibGVEZWVwTGluayA9IGlPU0RlZXBMaW5rXHJcbiAgICAgICAgPyBxdWVyeXN0cmluZ0RlY29kZShleHRyYWN0UXVlcnlzdHJpbmcoaU9TRGVlcExpbmspKVsnbGluayddXHJcbiAgICAgICAgOiBudWxsO1xyXG4gICAgcmV0dXJuIGlPU0RvdWJsZURlZXBMaW5rIHx8IGlPU0RlZXBMaW5rIHx8IGRvdWJsZURlZXBMaW5rIHx8IGxpbmsgfHwgdXJsO1xyXG59XHJcbi8qKlxyXG4gKiBBIHV0aWxpdHkgY2xhc3MgdG8gcGFyc2UgZW1haWwgYWN0aW9uIFVSTHMgc3VjaCBhcyBwYXNzd29yZCByZXNldCwgZW1haWwgdmVyaWZpY2F0aW9uLFxyXG4gKiBlbWFpbCBsaW5rIHNpZ24gaW4sIGV0Yy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgQWN0aW9uQ29kZVVSTCB7XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBhY3Rpb25MaW5rIC0gVGhlIGxpbmsgZnJvbSB3aGljaCB0byBleHRyYWN0IHRoZSBVUkwuXHJcbiAgICAgKiBAcmV0dXJucyBUaGUge0BsaW5rIEFjdGlvbkNvZGVVUkx9IG9iamVjdCwgb3IgbnVsbCBpZiB0aGUgbGluayBpcyBpbnZhbGlkLlxyXG4gICAgICpcclxuICAgICAqIEBpbnRlcm5hbFxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihhY3Rpb25MaW5rKSB7XHJcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2Y7XHJcbiAgICAgICAgY29uc3Qgc2VhcmNoUGFyYW1zID0gcXVlcnlzdHJpbmdEZWNvZGUoZXh0cmFjdFF1ZXJ5c3RyaW5nKGFjdGlvbkxpbmspKTtcclxuICAgICAgICBjb25zdCBhcGlLZXkgPSAoX2EgPSBzZWFyY2hQYXJhbXNbXCJhcGlLZXlcIiAvKiBRdWVyeUZpZWxkLkFQSV9LRVkgKi9dKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBudWxsO1xyXG4gICAgICAgIGNvbnN0IGNvZGUgPSAoX2IgPSBzZWFyY2hQYXJhbXNbXCJvb2JDb2RlXCIgLyogUXVlcnlGaWVsZC5DT0RFICovXSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogbnVsbDtcclxuICAgICAgICBjb25zdCBvcGVyYXRpb24gPSBwYXJzZU1vZGUoKF9jID0gc2VhcmNoUGFyYW1zW1wibW9kZVwiIC8qIFF1ZXJ5RmllbGQuTU9ERSAqL10pICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IG51bGwpO1xyXG4gICAgICAgIC8vIFZhbGlkYXRlIEFQSSBrZXksIGNvZGUgYW5kIG1vZGUuXHJcbiAgICAgICAgX2Fzc2VydChhcGlLZXkgJiYgY29kZSAmJiBvcGVyYXRpb24sIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLkFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICB0aGlzLmFwaUtleSA9IGFwaUtleTtcclxuICAgICAgICB0aGlzLm9wZXJhdGlvbiA9IG9wZXJhdGlvbjtcclxuICAgICAgICB0aGlzLmNvZGUgPSBjb2RlO1xyXG4gICAgICAgIHRoaXMuY29udGludWVVcmwgPSAoX2QgPSBzZWFyY2hQYXJhbXNbXCJjb250aW51ZVVybFwiIC8qIFF1ZXJ5RmllbGQuQ09OVElOVUVfVVJMICovXSkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogbnVsbDtcclxuICAgICAgICB0aGlzLmxhbmd1YWdlQ29kZSA9IChfZSA9IHNlYXJjaFBhcmFtc1tcImxhbmd1YWdlQ29kZVwiIC8qIFF1ZXJ5RmllbGQuTEFOR1VBR0VfQ09ERSAqL10pICE9PSBudWxsICYmIF9lICE9PSB2b2lkIDAgPyBfZSA6IG51bGw7XHJcbiAgICAgICAgdGhpcy50ZW5hbnRJZCA9IChfZiA9IHNlYXJjaFBhcmFtc1tcInRlbmFudElkXCIgLyogUXVlcnlGaWVsZC5URU5BTlRfSUQgKi9dKSAhPT0gbnVsbCAmJiBfZiAhPT0gdm9pZCAwID8gX2YgOiBudWxsO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBQYXJzZXMgdGhlIGVtYWlsIGFjdGlvbiBsaW5rIHN0cmluZyBhbmQgcmV0dXJucyBhbiB7QGxpbmsgQWN0aW9uQ29kZVVSTH0gaWYgdGhlIGxpbmsgaXMgdmFsaWQsXHJcbiAgICAgKiBvdGhlcndpc2UgcmV0dXJucyBudWxsLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBsaW5rICAtIFRoZSBlbWFpbCBhY3Rpb24gbGluayBzdHJpbmcuXHJcbiAgICAgKiBAcmV0dXJucyBUaGUge0BsaW5rIEFjdGlvbkNvZGVVUkx9IG9iamVjdCwgb3IgbnVsbCBpZiB0aGUgbGluayBpcyBpbnZhbGlkLlxyXG4gICAgICpcclxuICAgICAqIEBwdWJsaWNcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHBhcnNlTGluayhsaW5rKSB7XHJcbiAgICAgICAgY29uc3QgYWN0aW9uTGluayA9IHBhcnNlRGVlcExpbmsobGluayk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBBY3Rpb25Db2RlVVJMKGFjdGlvbkxpbmspO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBQYXJzZXMgdGhlIGVtYWlsIGFjdGlvbiBsaW5rIHN0cmluZyBhbmQgcmV0dXJucyBhbiB7QGxpbmsgQWN0aW9uQ29kZVVSTH0gaWZcclxuICogdGhlIGxpbmsgaXMgdmFsaWQsIG90aGVyd2lzZSByZXR1cm5zIG51bGwuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHBhcnNlQWN0aW9uQ29kZVVSTChsaW5rKSB7XHJcbiAgICByZXR1cm4gQWN0aW9uQ29kZVVSTC5wYXJzZUxpbmsobGluayk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBnZW5lcmF0aW5nIHtAbGluayBFbWFpbEF1dGhDcmVkZW50aWFsfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgRW1haWxBdXRoUHJvdmlkZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQWx3YXlzIHNldCB0byB7QGxpbmsgUHJvdmlkZXJJZH0uUEFTU1dPUkQsIGV2ZW4gZm9yIGVtYWlsIGxpbmsuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5wcm92aWRlcklkID0gRW1haWxBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQ7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemUgYW4ge0BsaW5rIEF1dGhDcmVkZW50aWFsfSB1c2luZyBhbiBlbWFpbCBhbmQgcGFzc3dvcmQuXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIGNvbnN0IGF1dGhDcmVkZW50aWFsID0gRW1haWxBdXRoUHJvdmlkZXIuY3JlZGVudGlhbChlbWFpbCwgcGFzc3dvcmQpO1xyXG4gICAgICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBzaWduSW5XaXRoQ3JlZGVudGlhbChhdXRoLCBhdXRoQ3JlZGVudGlhbCk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBlbWFpbCwgcGFzc3dvcmQpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGVtYWlsIC0gRW1haWwgYWRkcmVzcy5cclxuICAgICAqIEBwYXJhbSBwYXNzd29yZCAtIFVzZXIgYWNjb3VudCBwYXNzd29yZC5cclxuICAgICAqIEByZXR1cm5zIFRoZSBhdXRoIHByb3ZpZGVyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsKGVtYWlsLCBwYXNzd29yZCkge1xyXG4gICAgICAgIHJldHVybiBFbWFpbEF1dGhDcmVkZW50aWFsLl9mcm9tRW1haWxBbmRQYXNzd29yZChlbWFpbCwgcGFzc3dvcmQpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplIGFuIHtAbGluayBBdXRoQ3JlZGVudGlhbH0gdXNpbmcgYW4gZW1haWwgYW5kIGFuIGVtYWlsIGxpbmsgYWZ0ZXIgYSBzaWduIGluIHdpdGhcclxuICAgICAqIGVtYWlsIGxpbmsgb3BlcmF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBgYGBqYXZhc2NyaXB0XHJcbiAgICAgKiBjb25zdCBhdXRoQ3JlZGVudGlhbCA9IEVtYWlsQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxXaXRoTGluayhhdXRoLCBlbWFpbCwgZW1haWxMaW5rKTtcclxuICAgICAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgc2lnbkluV2l0aENyZWRlbnRpYWwoYXV0aCwgYXV0aENyZWRlbnRpYWwpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIGF3YWl0IHNlbmRTaWduSW5MaW5rVG9FbWFpbChhdXRoLCBlbWFpbCk7XHJcbiAgICAgKiAvLyBPYnRhaW4gZW1haWxMaW5rIGZyb20gdXNlci5cclxuICAgICAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgc2lnbkluV2l0aEVtYWlsTGluayhhdXRoLCBlbWFpbCwgZW1haWxMaW5rKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZSB1c2VkIHRvIHZlcmlmeSB0aGUgbGluay5cclxuICAgICAqIEBwYXJhbSBlbWFpbCAtIEVtYWlsIGFkZHJlc3MuXHJcbiAgICAgKiBAcGFyYW0gZW1haWxMaW5rIC0gU2lnbi1pbiBlbWFpbCBsaW5rLlxyXG4gICAgICogQHJldHVybnMgLSBUaGUgYXV0aCBwcm92aWRlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbFdpdGhMaW5rKGVtYWlsLCBlbWFpbExpbmspIHtcclxuICAgICAgICBjb25zdCBhY3Rpb25Db2RlVXJsID0gQWN0aW9uQ29kZVVSTC5wYXJzZUxpbmsoZW1haWxMaW5rKTtcclxuICAgICAgICBfYXNzZXJ0KGFjdGlvbkNvZGVVcmwsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLkFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICByZXR1cm4gRW1haWxBdXRoQ3JlZGVudGlhbC5fZnJvbUVtYWlsQW5kQ29kZShlbWFpbCwgYWN0aW9uQ29kZVVybC5jb2RlLCBhY3Rpb25Db2RlVXJsLnRlbmFudElkKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQWx3YXlzIHNldCB0byB7QGxpbmsgUHJvdmlkZXJJZH0uUEFTU1dPUkQsIGV2ZW4gZm9yIGVtYWlsIGxpbmsuXHJcbiAqL1xyXG5FbWFpbEF1dGhQcm92aWRlci5QUk9WSURFUl9JRCA9IFwicGFzc3dvcmRcIiAvKiBQcm92aWRlcklkLlBBU1NXT1JEICovO1xyXG4vKipcclxuICogQWx3YXlzIHNldCB0byB7QGxpbmsgU2lnbkluTWV0aG9kfS5FTUFJTF9QQVNTV09SRC5cclxuICovXHJcbkVtYWlsQXV0aFByb3ZpZGVyLkVNQUlMX1BBU1NXT1JEX1NJR05fSU5fTUVUSE9EID0gXCJwYXNzd29yZFwiIC8qIFNpZ25Jbk1ldGhvZC5FTUFJTF9QQVNTV09SRCAqLztcclxuLyoqXHJcbiAqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFNpZ25Jbk1ldGhvZH0uRU1BSUxfTElOSy5cclxuICovXHJcbkVtYWlsQXV0aFByb3ZpZGVyLkVNQUlMX0xJTktfU0lHTl9JTl9NRVRIT0QgPSBcImVtYWlsTGlua1wiIC8qIFNpZ25Jbk1ldGhvZC5FTUFJTF9MSU5LICovO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhlIGJhc2UgY2xhc3MgZm9yIGFsbCBGZWRlcmF0ZWQgcHJvdmlkZXJzIChPQXV0aCAoaW5jbHVkaW5nIE9JREMpLCBTQU1MKS5cclxuICpcclxuICogVGhpcyBjbGFzcyBpcyBub3QgbWVhbnQgdG8gYmUgaW5zdGFudGlhdGVkIGRpcmVjdGx5LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBGZWRlcmF0ZWRBdXRoUHJvdmlkZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdHJ1Y3RvciBmb3IgZ2VuZXJpYyBPQXV0aCBwcm92aWRlcnMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHByb3ZpZGVySWQgLSBQcm92aWRlciBmb3Igd2hpY2ggY3JlZGVudGlhbHMgc2hvdWxkIGJlIGdlbmVyYXRlZC5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IocHJvdmlkZXJJZCkge1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJJZCA9IHByb3ZpZGVySWQ7XHJcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgICAgIHRoaXMuZGVmYXVsdExhbmd1YWdlQ29kZSA9IG51bGw7XHJcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgICAgIHRoaXMuY3VzdG9tUGFyYW1ldGVycyA9IHt9O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIGxhbmd1YWdlIGdvZGUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGxhbmd1YWdlQ29kZSAtIGxhbmd1YWdlIGNvZGVcclxuICAgICAqL1xyXG4gICAgc2V0RGVmYXVsdExhbmd1YWdlKGxhbmd1YWdlQ29kZSkge1xyXG4gICAgICAgIHRoaXMuZGVmYXVsdExhbmd1YWdlQ29kZSA9IGxhbmd1YWdlQ29kZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgT0F1dGggY3VzdG9tIHBhcmFtZXRlcnMgdG8gcGFzcyBpbiBhbiBPQXV0aCByZXF1ZXN0IGZvciBwb3B1cCBhbmQgcmVkaXJlY3Qgc2lnbi1pblxyXG4gICAgICogb3BlcmF0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICogRm9yIGEgZGV0YWlsZWQgbGlzdCwgY2hlY2sgdGhlIHJlc2VydmVkIHJlcXVpcmVkIE9BdXRoIDIuMCBwYXJhbWV0ZXJzIHN1Y2ggYXMgYGNsaWVudF9pZGAsXHJcbiAgICAgKiBgcmVkaXJlY3RfdXJpYCwgYHNjb3BlYCwgYHJlc3BvbnNlX3R5cGVgLCBhbmQgYHN0YXRlYCBhcmUgbm90IGFsbG93ZWQgYW5kIHdpbGwgYmUgaWdub3JlZC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY3VzdG9tT0F1dGhQYXJhbWV0ZXJzIC0gVGhlIGN1c3RvbSBPQXV0aCBwYXJhbWV0ZXJzIHRvIHBhc3MgaW4gdGhlIE9BdXRoIHJlcXVlc3QuXHJcbiAgICAgKi9cclxuICAgIHNldEN1c3RvbVBhcmFtZXRlcnMoY3VzdG9tT0F1dGhQYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgdGhpcy5jdXN0b21QYXJhbWV0ZXJzID0gY3VzdG9tT0F1dGhQYXJhbWV0ZXJzO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXRyaWV2ZSB0aGUgY3VycmVudCBsaXN0IG9mIHtAbGluayBDdXN0b21QYXJhbWV0ZXJzfS5cclxuICAgICAqL1xyXG4gICAgZ2V0Q3VzdG9tUGFyYW1ldGVycygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jdXN0b21QYXJhbWV0ZXJzO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBDb21tb24gY29kZSB0byBhbGwgT0F1dGggcHJvdmlkZXJzLiBUaGlzIGlzIHNlcGFyYXRlIGZyb20gdGhlXHJcbiAqIHtAbGluayBPQXV0aFByb3ZpZGVyfSBzbyB0aGF0IGNoaWxkIHByb3ZpZGVycyAobGlrZVxyXG4gKiB7QGxpbmsgR29vZ2xlQXV0aFByb3ZpZGVyfSkgZG9uJ3QgaW5oZXJpdCB0aGUgYGNyZWRlbnRpYWxgIGluc3RhbmNlIG1ldGhvZC5cclxuICogSW5zdGVhZCwgdGhleSByZWx5IG9uIGEgc3RhdGljIGBjcmVkZW50aWFsYCBtZXRob2QuXHJcbiAqL1xyXG5jbGFzcyBCYXNlT0F1dGhQcm92aWRlciBleHRlbmRzIEZlZGVyYXRlZEF1dGhQcm92aWRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xyXG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgICAgICB0aGlzLnNjb3BlcyA9IFtdO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgYW4gT0F1dGggc2NvcGUgdG8gdGhlIGNyZWRlbnRpYWwuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHNjb3BlIC0gUHJvdmlkZXIgT0F1dGggc2NvcGUgdG8gYWRkLlxyXG4gICAgICovXHJcbiAgICBhZGRTY29wZShzY29wZSkge1xyXG4gICAgICAgIC8vIElmIG5vdCBhbHJlYWR5IGFkZGVkLCBhZGQgc2NvcGUgdG8gbGlzdC5cclxuICAgICAgICBpZiAoIXRoaXMuc2NvcGVzLmluY2x1ZGVzKHNjb3BlKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNjb3Blcy5wdXNoKHNjb3BlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHJpZXZlIHRoZSBjdXJyZW50IGxpc3Qgb2YgT0F1dGggc2NvcGVzLlxyXG4gICAgICovXHJcbiAgICBnZXRTY29wZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIFsuLi50aGlzLnNjb3Blc107XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBnZW5lcmF0aW5nIGdlbmVyaWMge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0uXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHJlZGlyZWN0LlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBPQXV0aFByb3ZpZGVyKCdnb29nbGUuY29tJyk7XHJcbiAqIC8vIFN0YXJ0IGEgc2lnbiBpbiBwcm9jZXNzIGZvciBhbiB1bmF1dGhlbnRpY2F0ZWQgdXNlci5cclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ3Byb2ZpbGUnKTtcclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ2VtYWlsJyk7XHJcbiAqIGF3YWl0IHNpZ25JbldpdGhSZWRpcmVjdChhdXRoLCBwcm92aWRlcik7XHJcbiAqIC8vIFRoaXMgd2lsbCB0cmlnZ2VyIGEgZnVsbCBwYWdlIHJlZGlyZWN0IGF3YXkgZnJvbSB5b3VyIGFwcFxyXG4gKlxyXG4gKiAvLyBBZnRlciByZXR1cm5pbmcgZnJvbSB0aGUgcmVkaXJlY3Qgd2hlbiB5b3VyIGFwcCBpbml0aWFsaXplcyB5b3UgY2FuIG9idGFpbiB0aGUgcmVzdWx0XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFJlZGlyZWN0UmVzdWx0KGF1dGgpO1xyXG4gKiBpZiAocmVzdWx0KSB7XHJcbiAqICAgLy8gVGhpcyBpcyB0aGUgc2lnbmVkLWluIHVzZXJcclxuICogICBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XHJcbiAqICAgLy8gVGhpcyBnaXZlcyB5b3UgYSBPQXV0aCBBY2Nlc3MgVG9rZW4gZm9yIHRoZSBwcm92aWRlci5cclxuICogICBjb25zdCBjcmVkZW50aWFsID0gcHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQoYXV0aCwgcmVzdWx0KTtcclxuICogICBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIH1cclxuICogYGBgXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHBvcHVwLlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBPQXV0aFByb3ZpZGVyKCdnb29nbGUuY29tJyk7XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdwcm9maWxlJyk7XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdlbWFpbCcpO1xyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKlxyXG4gKiAvLyBUaGUgc2lnbmVkLWluIHVzZXIgaW5mby5cclxuICogY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAvLyBUaGlzIGdpdmVzIHlvdSBhIE9BdXRoIEFjY2VzcyBUb2tlbiBmb3IgdGhlIHByb3ZpZGVyLlxyXG4gKiBjb25zdCBjcmVkZW50aWFsID0gcHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQoYXV0aCwgcmVzdWx0KTtcclxuICogY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiBgYGBcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgT0F1dGhQcm92aWRlciBleHRlbmRzIEJhc2VPQXV0aFByb3ZpZGVyIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbiB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEgSlNPTiBzdHJpbmcgb3IgYSBwbGFpbiBvYmplY3QuXHJcbiAgICAgKiBAcGFyYW0ganNvbiAtIEEgcGxhaW4gb2JqZWN0IG9yIGEgSlNPTiBzdHJpbmdcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tSlNPTihqc29uKSB7XHJcbiAgICAgICAgY29uc3Qgb2JqID0gdHlwZW9mIGpzb24gPT09ICdzdHJpbmcnID8gSlNPTi5wYXJzZShqc29uKSA6IGpzb247XHJcbiAgICAgICAgX2Fzc2VydCgncHJvdmlkZXJJZCcgaW4gb2JqICYmICdzaWduSW5NZXRob2QnIGluIG9iaiwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIHJldHVybiBPQXV0aENyZWRlbnRpYWwuX2Zyb21QYXJhbXMob2JqKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSBnZW5lcmljIE9BdXRoIHByb3ZpZGVyJ3MgYWNjZXNzIHRva2VuIG9yIElEIHRva2VuLlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKiBUaGUgcmF3IG5vbmNlIGlzIHJlcXVpcmVkIHdoZW4gYW4gSUQgdG9rZW4gd2l0aCBhIG5vbmNlIGZpZWxkIGlzIHByb3ZpZGVkLiBUaGUgU0hBLTI1NiBoYXNoIG9mXHJcbiAgICAgKiB0aGUgcmF3IG5vbmNlIG11c3QgbWF0Y2ggdGhlIG5vbmNlIGZpZWxkIGluIHRoZSBJRCB0b2tlbi5cclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICogLy8gYGdvb2dsZVVzZXJgIGZyb20gdGhlIG9uc3VjY2VzcyBHb29nbGUgU2lnbiBJbiBjYWxsYmFjay5cclxuICAgICAqIC8vIEluaXRpYWxpemUgYSBnZW5lcmF0ZSBPQXV0aCBwcm92aWRlciB3aXRoIGEgYGdvb2dsZS5jb21gIHByb3ZpZGVySWQuXHJcbiAgICAgKiBjb25zdCBwcm92aWRlciA9IG5ldyBPQXV0aFByb3ZpZGVyKCdnb29nbGUuY29tJyk7XHJcbiAgICAgKiBjb25zdCBjcmVkZW50aWFsID0gcHJvdmlkZXIuY3JlZGVudGlhbCh7XHJcbiAgICAgKiAgIGlkVG9rZW46IGdvb2dsZVVzZXIuZ2V0QXV0aFJlc3BvbnNlKCkuaWRfdG9rZW4sXHJcbiAgICAgKiB9KTtcclxuICAgICAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhDcmVkZW50aWFsKGNyZWRlbnRpYWwpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBhcmFtcyAtIEVpdGhlciB0aGUgb3B0aW9ucyBvYmplY3QgY29udGFpbmluZyB0aGUgSUQgdG9rZW4sIGFjY2VzcyB0b2tlbiBhbmQgcmF3IG5vbmNlXHJcbiAgICAgKiBvciB0aGUgSUQgdG9rZW4gc3RyaW5nLlxyXG4gICAgICovXHJcbiAgICBjcmVkZW50aWFsKHBhcmFtcykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jcmVkZW50aWFsKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcGFyYW1zKSwgeyBub25jZTogcGFyYW1zLnJhd05vbmNlIH0pKTtcclxuICAgIH1cclxuICAgIC8qKiBBbiBpbnRlcm5hbCBjcmVkZW50aWFsIG1ldGhvZCB0aGF0IGFjY2VwdHMgbW9yZSBwZXJtaXNzaXZlIG9wdGlvbnMgKi9cclxuICAgIF9jcmVkZW50aWFsKHBhcmFtcykge1xyXG4gICAgICAgIF9hc3NlcnQocGFyYW1zLmlkVG9rZW4gfHwgcGFyYW1zLmFjY2Vzc1Rva2VuLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5BUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgLy8gRm9yIE9BdXRoQ3JlZGVudGlhbCwgc2lnbiBpbiBtZXRob2QgaXMgc2FtZSBhcyBwcm92aWRlcklkLlxyXG4gICAgICAgIHJldHVybiBPQXV0aENyZWRlbnRpYWwuX2Zyb21QYXJhbXMoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBwYXJhbXMpLCB7IHByb3ZpZGVySWQ6IHRoaXMucHJvdmlkZXJJZCwgc2lnbkluTWV0aG9kOiB0aGlzLnByb3ZpZGVySWQgfSkpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBVc2VyQ3JlZGVudGlhbH0uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tUmVzdWx0KHVzZXJDcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIE9BdXRoUHJvdmlkZXIub2F1dGhDcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh1c2VyQ3JlZGVudGlhbCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIEF1dGhFcnJvcn0gd2hpY2ggd2FzXHJcbiAgICAgKiB0aHJvd24gZHVyaW5nIGEgc2lnbi1pbiwgbGluaywgb3IgcmVhdXRoZW50aWNhdGUgb3BlcmF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbUVycm9yKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIE9BdXRoUHJvdmlkZXIub2F1dGhDcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCgoZXJyb3IuY3VzdG9tRGF0YSB8fCB7fSkpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIG9hdXRoQ3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoeyBfdG9rZW5SZXNwb25zZTogdG9rZW5SZXNwb25zZSB9KSB7XHJcbiAgICAgICAgaWYgKCF0b2tlblJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB7IG9hdXRoSWRUb2tlbiwgb2F1dGhBY2Nlc3NUb2tlbiwgb2F1dGhUb2tlblNlY3JldCwgcGVuZGluZ1Rva2VuLCBub25jZSwgcHJvdmlkZXJJZCB9ID0gdG9rZW5SZXNwb25zZTtcclxuICAgICAgICBpZiAoIW9hdXRoQWNjZXNzVG9rZW4gJiZcclxuICAgICAgICAgICAgIW9hdXRoVG9rZW5TZWNyZXQgJiZcclxuICAgICAgICAgICAgIW9hdXRoSWRUb2tlbiAmJlxyXG4gICAgICAgICAgICAhcGVuZGluZ1Rva2VuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXByb3ZpZGVySWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgT0F1dGhQcm92aWRlcihwcm92aWRlcklkKS5fY3JlZGVudGlhbCh7XHJcbiAgICAgICAgICAgICAgICBpZFRva2VuOiBvYXV0aElkVG9rZW4sXHJcbiAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbjogb2F1dGhBY2Nlc3NUb2tlbixcclxuICAgICAgICAgICAgICAgIG5vbmNlLFxyXG4gICAgICAgICAgICAgICAgcGVuZGluZ1Rva2VuXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBnZW5lcmF0aW5nIGFuIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZvciB7QGxpbmsgUHJvdmlkZXJJZH0uRkFDRUJPT0suXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHJlZGlyZWN0LlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBGYWNlYm9va0F1dGhQcm92aWRlcigpO1xyXG4gKiAvLyBTdGFydCBhIHNpZ24gaW4gcHJvY2VzcyBmb3IgYW4gdW5hdXRoZW50aWNhdGVkIHVzZXIuXHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCd1c2VyX2JpcnRoZGF5Jyk7XHJcbiAqIGF3YWl0IHNpZ25JbldpdGhSZWRpcmVjdChhdXRoLCBwcm92aWRlcik7XHJcbiAqIC8vIFRoaXMgd2lsbCB0cmlnZ2VyIGEgZnVsbCBwYWdlIHJlZGlyZWN0IGF3YXkgZnJvbSB5b3VyIGFwcFxyXG4gKlxyXG4gKiAvLyBBZnRlciByZXR1cm5pbmcgZnJvbSB0aGUgcmVkaXJlY3Qgd2hlbiB5b3VyIGFwcCBpbml0aWFsaXplcyB5b3UgY2FuIG9idGFpbiB0aGUgcmVzdWx0XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFJlZGlyZWN0UmVzdWx0KGF1dGgpO1xyXG4gKiBpZiAocmVzdWx0KSB7XHJcbiAqICAgLy8gVGhpcyBpcyB0aGUgc2lnbmVkLWluIHVzZXJcclxuICogICBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XHJcbiAqICAgLy8gVGhpcyBnaXZlcyB5b3UgYSBGYWNlYm9vayBBY2Nlc3MgVG9rZW4uXHJcbiAqICAgY29uc3QgY3JlZGVudGlhbCA9IEZhY2Vib29rQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KHJlc3VsdCk7XHJcbiAqICAgY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSBwb3B1cC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgRmFjZWJvb2tBdXRoUHJvdmlkZXIoKTtcclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ3VzZXJfYmlydGhkYXknKTtcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aFBvcHVwKGF1dGgsIHByb3ZpZGVyKTtcclxuICpcclxuICogLy8gVGhlIHNpZ25lZC1pbiB1c2VyIGluZm8uXHJcbiAqIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogLy8gVGhpcyBnaXZlcyB5b3UgYSBGYWNlYm9vayBBY2Nlc3MgVG9rZW4uXHJcbiAqIGNvbnN0IGNyZWRlbnRpYWwgPSBGYWNlYm9va0F1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChyZXN1bHQpO1xyXG4gKiBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBGYWNlYm9va0F1dGhQcm92aWRlciBleHRlbmRzIEJhc2VPQXV0aFByb3ZpZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKFwiZmFjZWJvb2suY29tXCIgLyogUHJvdmlkZXJJZC5GQUNFQk9PSyAqLyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBjcmVkZW50aWFsIGZvciBGYWNlYm9vay5cclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICogLy8gYGV2ZW50YCBmcm9tIHRoZSBGYWNlYm9vayBhdXRoLmF1dGhSZXNwb25zZUNoYW5nZSBjYWxsYmFjay5cclxuICAgICAqIGNvbnN0IGNyZWRlbnRpYWwgPSBGYWNlYm9va0F1dGhQcm92aWRlci5jcmVkZW50aWFsKGV2ZW50LmF1dGhSZXNwb25zZS5hY2Nlc3NUb2tlbik7XHJcbiAgICAgKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBhY2Nlc3NUb2tlbiAtIEZhY2Vib29rIGFjY2VzcyB0b2tlbi5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWwoYWNjZXNzVG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gT0F1dGhDcmVkZW50aWFsLl9mcm9tUGFyYW1zKHtcclxuICAgICAgICAgICAgcHJvdmlkZXJJZDogRmFjZWJvb2tBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQsXHJcbiAgICAgICAgICAgIHNpZ25Jbk1ldGhvZDogRmFjZWJvb2tBdXRoUHJvdmlkZXIuRkFDRUJPT0tfU0lHTl9JTl9NRVRIT0QsXHJcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIFVzZXJDcmVkZW50aWFsfS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21SZXN1bHQodXNlckNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gRmFjZWJvb2tBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QodXNlckNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBBdXRoRXJyb3J9IHdoaWNoIHdhc1xyXG4gICAgICogdGhyb3duIGR1cmluZyBhIHNpZ24taW4sIGxpbmssIG9yIHJlYXV0aGVudGljYXRlIG9wZXJhdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21FcnJvcihlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBGYWNlYm9va0F1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCgoZXJyb3IuY3VzdG9tRGF0YSB8fCB7fSkpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHsgX3Rva2VuUmVzcG9uc2U6IHRva2VuUmVzcG9uc2UgfSkge1xyXG4gICAgICAgIGlmICghdG9rZW5SZXNwb25zZSB8fCAhKCdvYXV0aEFjY2Vzc1Rva2VuJyBpbiB0b2tlblJlc3BvbnNlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0b2tlblJlc3BvbnNlLm9hdXRoQWNjZXNzVG9rZW4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBGYWNlYm9va0F1dGhQcm92aWRlci5jcmVkZW50aWFsKHRva2VuUmVzcG9uc2Uub2F1dGhBY2Nlc3NUb2tlbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFNpZ25Jbk1ldGhvZH0uRkFDRUJPT0suICovXHJcbkZhY2Vib29rQXV0aFByb3ZpZGVyLkZBQ0VCT09LX1NJR05fSU5fTUVUSE9EID0gXCJmYWNlYm9vay5jb21cIiAvKiBTaWduSW5NZXRob2QuRkFDRUJPT0sgKi87XHJcbi8qKiBBbHdheXMgc2V0IHRvIHtAbGluayBQcm92aWRlcklkfS5GQUNFQk9PSy4gKi9cclxuRmFjZWJvb2tBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQgPSBcImZhY2Vib29rLmNvbVwiIC8qIFByb3ZpZGVySWQuRkFDRUJPT0sgKi87XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlciBmb3IgZ2VuZXJhdGluZyBhbiB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmb3Ige0BsaW5rIFByb3ZpZGVySWR9LkdPT0dMRS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEdvb2dsZUF1dGhQcm92aWRlcigpO1xyXG4gKiAvLyBTdGFydCBhIHNpZ24gaW4gcHJvY2VzcyBmb3IgYW4gdW5hdXRoZW50aWNhdGVkIHVzZXIuXHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdwcm9maWxlJyk7XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdlbWFpbCcpO1xyXG4gKiBhd2FpdCBzaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKiAvLyBUaGlzIHdpbGwgdHJpZ2dlciBhIGZ1bGwgcGFnZSByZWRpcmVjdCBhd2F5IGZyb20geW91ciBhcHBcclxuICpcclxuICogLy8gQWZ0ZXIgcmV0dXJuaW5nIGZyb20gdGhlIHJlZGlyZWN0IHdoZW4geW91ciBhcHAgaW5pdGlhbGl6ZXMgeW91IGNhbiBvYnRhaW4gdGhlIHJlc3VsdFxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRSZWRpcmVjdFJlc3VsdChhdXRoKTtcclxuICogaWYgKHJlc3VsdCkge1xyXG4gKiAgIC8vIFRoaXMgaXMgdGhlIHNpZ25lZC1pbiB1c2VyXHJcbiAqICAgY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAgIC8vIFRoaXMgZ2l2ZXMgeW91IGEgR29vZ2xlIEFjY2VzcyBUb2tlbi5cclxuICogICBjb25zdCBjcmVkZW50aWFsID0gR29vZ2xlQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KHJlc3VsdCk7XHJcbiAqICAgY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSBwb3B1cC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgR29vZ2xlQXV0aFByb3ZpZGVyKCk7XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdwcm9maWxlJyk7XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdlbWFpbCcpO1xyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKlxyXG4gKiAvLyBUaGUgc2lnbmVkLWluIHVzZXIgaW5mby5cclxuICogY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAvLyBUaGlzIGdpdmVzIHlvdSBhIEdvb2dsZSBBY2Nlc3MgVG9rZW4uXHJcbiAqIGNvbnN0IGNyZWRlbnRpYWwgPSBHb29nbGVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQocmVzdWx0KTtcclxuICogY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiBgYGBcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgR29vZ2xlQXV0aFByb3ZpZGVyIGV4dGVuZHMgQmFzZU9BdXRoUHJvdmlkZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoXCJnb29nbGUuY29tXCIgLyogUHJvdmlkZXJJZC5HT09HTEUgKi8pO1xyXG4gICAgICAgIHRoaXMuYWRkU2NvcGUoJ3Byb2ZpbGUnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIGNyZWRlbnRpYWwgZm9yIEdvb2dsZS4gQXQgbGVhc3Qgb25lIG9mIElEIHRva2VuIGFuZCBhY2Nlc3MgdG9rZW4gaXMgcmVxdWlyZWQuXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIC8vIFxcYGdvb2dsZVVzZXJcXGAgZnJvbSB0aGUgb25zdWNjZXNzIEdvb2dsZSBTaWduIEluIGNhbGxiYWNrLlxyXG4gICAgICogY29uc3QgY3JlZGVudGlhbCA9IEdvb2dsZUF1dGhQcm92aWRlci5jcmVkZW50aWFsKGdvb2dsZVVzZXIuZ2V0QXV0aFJlc3BvbnNlKCkuaWRfdG9rZW4pO1xyXG4gICAgICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aENyZWRlbnRpYWwoY3JlZGVudGlhbCk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaWRUb2tlbiAtIEdvb2dsZSBJRCB0b2tlbi5cclxuICAgICAqIEBwYXJhbSBhY2Nlc3NUb2tlbiAtIEdvb2dsZSBhY2Nlc3MgdG9rZW4uXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsKGlkVG9rZW4sIGFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIE9BdXRoQ3JlZGVudGlhbC5fZnJvbVBhcmFtcyh7XHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQ6IEdvb2dsZUF1dGhQcm92aWRlci5QUk9WSURFUl9JRCxcclxuICAgICAgICAgICAgc2lnbkluTWV0aG9kOiBHb29nbGVBdXRoUHJvdmlkZXIuR09PR0xFX1NJR05fSU5fTUVUSE9ELFxyXG4gICAgICAgICAgICBpZFRva2VuLFxyXG4gICAgICAgICAgICBhY2Nlc3NUb2tlblxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBVc2VyQ3JlZGVudGlhbH0uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tUmVzdWx0KHVzZXJDcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIEdvb2dsZUF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh1c2VyQ3JlZGVudGlhbCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIEF1dGhFcnJvcn0gd2hpY2ggd2FzXHJcbiAgICAgKiB0aHJvd24gZHVyaW5nIGEgc2lnbi1pbiwgbGluaywgb3IgcmVhdXRoZW50aWNhdGUgb3BlcmF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbUVycm9yKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIEdvb2dsZUF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCgoZXJyb3IuY3VzdG9tRGF0YSB8fCB7fSkpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHsgX3Rva2VuUmVzcG9uc2U6IHRva2VuUmVzcG9uc2UgfSkge1xyXG4gICAgICAgIGlmICghdG9rZW5SZXNwb25zZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgeyBvYXV0aElkVG9rZW4sIG9hdXRoQWNjZXNzVG9rZW4gfSA9IHRva2VuUmVzcG9uc2U7XHJcbiAgICAgICAgaWYgKCFvYXV0aElkVG9rZW4gJiYgIW9hdXRoQWNjZXNzVG9rZW4pIHtcclxuICAgICAgICAgICAgLy8gVGhpcyBjb3VsZCBiZSBhbiBvYXV0aCAxIGNyZWRlbnRpYWwgb3IgYSBwaG9uZSBjcmVkZW50aWFsXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gR29vZ2xlQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwob2F1dGhJZFRva2VuLCBvYXV0aEFjY2Vzc1Rva2VuKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4vKiogQWx3YXlzIHNldCB0byB7QGxpbmsgU2lnbkluTWV0aG9kfS5HT09HTEUuICovXHJcbkdvb2dsZUF1dGhQcm92aWRlci5HT09HTEVfU0lHTl9JTl9NRVRIT0QgPSBcImdvb2dsZS5jb21cIiAvKiBTaWduSW5NZXRob2QuR09PR0xFICovO1xyXG4vKiogQWx3YXlzIHNldCB0byB7QGxpbmsgUHJvdmlkZXJJZH0uR09PR0xFLiAqL1xyXG5Hb29nbGVBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQgPSBcImdvb2dsZS5jb21cIiAvKiBQcm92aWRlcklkLkdPT0dMRSAqLztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBnZW5lcmF0aW5nIGFuIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZvciB7QGxpbmsgUHJvdmlkZXJJZH0uR0lUSFVCLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBHaXRIdWIgcmVxdWlyZXMgYW4gT0F1dGggMi4wIHJlZGlyZWN0LCBzbyB5b3UgY2FuIGVpdGhlciBoYW5kbGUgdGhlIHJlZGlyZWN0IGRpcmVjdGx5LCBvciB1c2VcclxuICogdGhlIHtAbGluayBzaWduSW5XaXRoUG9wdXB9IGhhbmRsZXI6XHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHJlZGlyZWN0LlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBHaXRodWJBdXRoUHJvdmlkZXIoKTtcclxuICogLy8gU3RhcnQgYSBzaWduIGluIHByb2Nlc3MgZm9yIGFuIHVuYXV0aGVudGljYXRlZCB1c2VyLlxyXG4gKiBwcm92aWRlci5hZGRTY29wZSgncmVwbycpO1xyXG4gKiBhd2FpdCBzaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKiAvLyBUaGlzIHdpbGwgdHJpZ2dlciBhIGZ1bGwgcGFnZSByZWRpcmVjdCBhd2F5IGZyb20geW91ciBhcHBcclxuICpcclxuICogLy8gQWZ0ZXIgcmV0dXJuaW5nIGZyb20gdGhlIHJlZGlyZWN0IHdoZW4geW91ciBhcHAgaW5pdGlhbGl6ZXMgeW91IGNhbiBvYnRhaW4gdGhlIHJlc3VsdFxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRSZWRpcmVjdFJlc3VsdChhdXRoKTtcclxuICogaWYgKHJlc3VsdCkge1xyXG4gKiAgIC8vIFRoaXMgaXMgdGhlIHNpZ25lZC1pbiB1c2VyXHJcbiAqICAgY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAgIC8vIFRoaXMgZ2l2ZXMgeW91IGEgR2l0aHViIEFjY2VzcyBUb2tlbi5cclxuICogICBjb25zdCBjcmVkZW50aWFsID0gR2l0aHViQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KHJlc3VsdCk7XHJcbiAqICAgY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSBwb3B1cC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgR2l0aHViQXV0aFByb3ZpZGVyKCk7XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdyZXBvJyk7XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhQb3B1cChhdXRoLCBwcm92aWRlcik7XHJcbiAqXHJcbiAqIC8vIFRoZSBzaWduZWQtaW4gdXNlciBpbmZvLlxyXG4gKiBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XHJcbiAqIC8vIFRoaXMgZ2l2ZXMgeW91IGEgR2l0aHViIEFjY2VzcyBUb2tlbi5cclxuICogY29uc3QgY3JlZGVudGlhbCA9IEdpdGh1YkF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChyZXN1bHQpO1xyXG4gKiBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIGBgYFxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBHaXRodWJBdXRoUHJvdmlkZXIgZXh0ZW5kcyBCYXNlT0F1dGhQcm92aWRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcihcImdpdGh1Yi5jb21cIiAvKiBQcm92aWRlcklkLkdJVEhVQiAqLyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBjcmVkZW50aWFsIGZvciBHaXRodWIuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGFjY2Vzc1Rva2VuIC0gR2l0aHViIGFjY2VzcyB0b2tlbi5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWwoYWNjZXNzVG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gT0F1dGhDcmVkZW50aWFsLl9mcm9tUGFyYW1zKHtcclxuICAgICAgICAgICAgcHJvdmlkZXJJZDogR2l0aHViQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lELFxyXG4gICAgICAgICAgICBzaWduSW5NZXRob2Q6IEdpdGh1YkF1dGhQcm92aWRlci5HSVRIVUJfU0lHTl9JTl9NRVRIT0QsXHJcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIFVzZXJDcmVkZW50aWFsfS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21SZXN1bHQodXNlckNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gR2l0aHViQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHVzZXJDcmVkZW50aWFsKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCB0byBleHRyYWN0IHRoZSB1bmRlcmx5aW5nIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgQXV0aEVycm9yfSB3aGljaCB3YXNcclxuICAgICAqIHRocm93biBkdXJpbmcgYSBzaWduLWluLCBsaW5rLCBvciByZWF1dGhlbnRpY2F0ZSBvcGVyYXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tRXJyb3IoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gR2l0aHViQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KChlcnJvci5jdXN0b21EYXRhIHx8IHt9KSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoeyBfdG9rZW5SZXNwb25zZTogdG9rZW5SZXNwb25zZSB9KSB7XHJcbiAgICAgICAgaWYgKCF0b2tlblJlc3BvbnNlIHx8ICEoJ29hdXRoQWNjZXNzVG9rZW4nIGluIHRva2VuUmVzcG9uc2UpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRva2VuUmVzcG9uc2Uub2F1dGhBY2Nlc3NUb2tlbikge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIEdpdGh1YkF1dGhQcm92aWRlci5jcmVkZW50aWFsKHRva2VuUmVzcG9uc2Uub2F1dGhBY2Nlc3NUb2tlbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFNpZ25Jbk1ldGhvZH0uR0lUSFVCLiAqL1xyXG5HaXRodWJBdXRoUHJvdmlkZXIuR0lUSFVCX1NJR05fSU5fTUVUSE9EID0gXCJnaXRodWIuY29tXCIgLyogU2lnbkluTWV0aG9kLkdJVEhVQiAqLztcclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFByb3ZpZGVySWR9LkdJVEhVQi4gKi9cclxuR2l0aHViQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lEID0gXCJnaXRodWIuY29tXCIgLyogUHJvdmlkZXJJZC5HSVRIVUIgKi87XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IElEUF9SRVFVRVNUX1VSSSA9ICdodHRwOi8vbG9jYWxob3N0JztcclxuLyoqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIFNBTUxBdXRoQ3JlZGVudGlhbCBleHRlbmRzIEF1dGhDcmVkZW50aWFsIHtcclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIGNvbnN0cnVjdG9yKHByb3ZpZGVySWQsIHBlbmRpbmdUb2tlbikge1xyXG4gICAgICAgIHN1cGVyKHByb3ZpZGVySWQsIHByb3ZpZGVySWQpO1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1Rva2VuID0gcGVuZGluZ1Rva2VuO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2dldElkVG9rZW5SZXNwb25zZShhdXRoKSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuYnVpbGRSZXF1ZXN0KCk7XHJcbiAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhJZHAoYXV0aCwgcmVxdWVzdCk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfbGlua1RvSWRUb2tlbihhdXRoLCBpZFRva2VuKSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuYnVpbGRSZXF1ZXN0KCk7XHJcbiAgICAgICAgcmVxdWVzdC5pZFRva2VuID0gaWRUb2tlbjtcclxuICAgICAgICByZXR1cm4gc2lnbkluV2l0aElkcChhdXRoLCByZXF1ZXN0KTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9nZXRSZWF1dGhlbnRpY2F0aW9uUmVzb2x2ZXIoYXV0aCkge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLmJ1aWxkUmVxdWVzdCgpO1xyXG4gICAgICAgIHJlcXVlc3QuYXV0b0NyZWF0ZSA9IGZhbHNlO1xyXG4gICAgICAgIHJldHVybiBzaWduSW5XaXRoSWRwKGF1dGgsIHJlcXVlc3QpO1xyXG4gICAgfVxyXG4gICAgLyoqIHtAaW5oZXJpdGRvYyBBdXRoQ3JlZGVudGlhbC50b0pTT059ICAqL1xyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHNpZ25Jbk1ldGhvZDogdGhpcy5zaWduSW5NZXRob2QsXHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQ6IHRoaXMucHJvdmlkZXJJZCxcclxuICAgICAgICAgICAgcGVuZGluZ1Rva2VuOiB0aGlzLnBlbmRpbmdUb2tlblxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFN0YXRpYyBtZXRob2QgdG8gZGVzZXJpYWxpemUgYSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIGFuIG9iamVjdCBpbnRvIGFuXHJcbiAgICAgKiB7QGxpbmsgIEF1dGhDcmVkZW50aWFsfS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ganNvbiAtIElucHV0IGNhbiBiZSBlaXRoZXIgT2JqZWN0IG9yIHRoZSBzdHJpbmdpZmllZCByZXByZXNlbnRhdGlvbiBvZiB0aGUgb2JqZWN0LlxyXG4gICAgICogV2hlbiBzdHJpbmcgaXMgcHJvdmlkZWQsIEpTT04ucGFyc2Ugd291bGQgYmUgY2FsbGVkIGZpcnN0LlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIElmIHRoZSBKU09OIGlucHV0IGRvZXMgbm90IHJlcHJlc2VudCBhbiB7QGxpbmsgIEF1dGhDcmVkZW50aWFsfSwgbnVsbCBpcyByZXR1cm5lZC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcclxuICAgICAgICBjb25zdCBvYmogPSB0eXBlb2YganNvbiA9PT0gJ3N0cmluZycgPyBKU09OLnBhcnNlKGpzb24pIDoganNvbjtcclxuICAgICAgICBjb25zdCB7IHByb3ZpZGVySWQsIHNpZ25Jbk1ldGhvZCwgcGVuZGluZ1Rva2VuIH0gPSBvYmo7XHJcbiAgICAgICAgaWYgKCFwcm92aWRlcklkIHx8XHJcbiAgICAgICAgICAgICFzaWduSW5NZXRob2QgfHxcclxuICAgICAgICAgICAgIXBlbmRpbmdUb2tlbiB8fFxyXG4gICAgICAgICAgICBwcm92aWRlcklkICE9PSBzaWduSW5NZXRob2QpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgU0FNTEF1dGhDcmVkZW50aWFsKHByb3ZpZGVySWQsIHBlbmRpbmdUb2tlbik7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEhlbHBlciBzdGF0aWMgbWV0aG9kIHRvIGF2b2lkIGV4cG9zaW5nIHRoZSBjb25zdHJ1Y3RvciB0byBlbmQgdXNlcnMuXHJcbiAgICAgKlxyXG4gICAgICogQGludGVybmFsXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBfY3JlYXRlKHByb3ZpZGVySWQsIHBlbmRpbmdUb2tlbikge1xyXG4gICAgICAgIHJldHVybiBuZXcgU0FNTEF1dGhDcmVkZW50aWFsKHByb3ZpZGVySWQsIHBlbmRpbmdUb2tlbik7XHJcbiAgICB9XHJcbiAgICBidWlsZFJlcXVlc3QoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVxdWVzdFVyaTogSURQX1JFUVVFU1RfVVJJLFxyXG4gICAgICAgICAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZSxcclxuICAgICAgICAgICAgcGVuZGluZ1Rva2VuOiB0aGlzLnBlbmRpbmdUb2tlblxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgU0FNTF9QUk9WSURFUl9QUkVGSVggPSAnc2FtbC4nO1xyXG4vKipcclxuICogQW4ge0BsaW5rIEF1dGhQcm92aWRlcn0gZm9yIFNBTUwuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIFNBTUxBdXRoUHJvdmlkZXIgZXh0ZW5kcyBGZWRlcmF0ZWRBdXRoUHJvdmlkZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdHJ1Y3Rvci4gVGhlIHByb3ZpZGVySWQgbXVzdCBzdGFydCB3aXRoIFwic2FtbC5cIlxyXG4gICAgICogQHBhcmFtIHByb3ZpZGVySWQgLSBTQU1MIHByb3ZpZGVyIElELlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm92aWRlcklkKSB7XHJcbiAgICAgICAgX2Fzc2VydChwcm92aWRlcklkLnN0YXJ0c1dpdGgoU0FNTF9QUk9WSURFUl9QUkVGSVgpLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5BUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgc3VwZXIocHJvdmlkZXJJZCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEdlbmVyYXRlcyBhbiB7QGxpbmsgQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgVXNlckNyZWRlbnRpYWx9IGFmdGVyIGFcclxuICAgICAqIHN1Y2Nlc3NmdWwgU0FNTCBmbG93IGNvbXBsZXRlcy5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICpcclxuICAgICAqIEZvciBleGFtcGxlLCB0byBnZXQgYW4ge0BsaW5rIEF1dGhDcmVkZW50aWFsfSwgeW91IGNvdWxkIHdyaXRlIHRoZVxyXG4gICAgICogZm9sbG93aW5nIGNvZGU6XHJcbiAgICAgKlxyXG4gICAgICogYGBganNcclxuICAgICAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgc2lnbkluV2l0aFBvcHVwKGF1dGgsIHNhbWxQcm92aWRlcik7XHJcbiAgICAgKiBjb25zdCBjcmVkZW50aWFsID0gU0FNTEF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdCh1c2VyQ3JlZGVudGlhbCk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21SZXN1bHQodXNlckNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gU0FNTEF1dGhQcm92aWRlci5zYW1sQ3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QodXNlckNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBBdXRoRXJyb3J9IHdoaWNoIHdhc1xyXG4gICAgICogdGhyb3duIGR1cmluZyBhIHNpZ24taW4sIGxpbmssIG9yIHJlYXV0aGVudGljYXRlIG9wZXJhdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21FcnJvcihlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBTQU1MQXV0aFByb3ZpZGVyLnNhbWxDcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCgoZXJyb3IuY3VzdG9tRGF0YSB8fCB7fSkpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGFuIHtAbGluayBBdXRoQ3JlZGVudGlhbH0gZnJvbSBhIEpTT04gc3RyaW5nIG9yIGEgcGxhaW4gb2JqZWN0LlxyXG4gICAgICogQHBhcmFtIGpzb24gLSBBIHBsYWluIG9iamVjdCBvciBhIEpTT04gc3RyaW5nXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbUpTT04oanNvbikge1xyXG4gICAgICAgIGNvbnN0IGNyZWRlbnRpYWwgPSBTQU1MQXV0aENyZWRlbnRpYWwuZnJvbUpTT04oanNvbik7XHJcbiAgICAgICAgX2Fzc2VydChjcmVkZW50aWFsLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5BUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgcmV0dXJuIGNyZWRlbnRpYWw7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgc2FtbENyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHsgX3Rva2VuUmVzcG9uc2U6IHRva2VuUmVzcG9uc2UgfSkge1xyXG4gICAgICAgIGlmICghdG9rZW5SZXNwb25zZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgeyBwZW5kaW5nVG9rZW4sIHByb3ZpZGVySWQgfSA9IHRva2VuUmVzcG9uc2U7XHJcbiAgICAgICAgaWYgKCFwZW5kaW5nVG9rZW4gfHwgIXByb3ZpZGVySWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBTQU1MQXV0aENyZWRlbnRpYWwuX2NyZWF0ZShwcm92aWRlcklkLCBwZW5kaW5nVG9rZW4pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBnZW5lcmF0aW5nIGFuIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZvciB7QGxpbmsgUHJvdmlkZXJJZH0uVFdJVFRFUi5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IFR3aXR0ZXJBdXRoUHJvdmlkZXIoKTtcclxuICogLy8gU3RhcnQgYSBzaWduIGluIHByb2Nlc3MgZm9yIGFuIHVuYXV0aGVudGljYXRlZCB1c2VyLlxyXG4gKiBhd2FpdCBzaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKiAvLyBUaGlzIHdpbGwgdHJpZ2dlciBhIGZ1bGwgcGFnZSByZWRpcmVjdCBhd2F5IGZyb20geW91ciBhcHBcclxuICpcclxuICogLy8gQWZ0ZXIgcmV0dXJuaW5nIGZyb20gdGhlIHJlZGlyZWN0IHdoZW4geW91ciBhcHAgaW5pdGlhbGl6ZXMgeW91IGNhbiBvYnRhaW4gdGhlIHJlc3VsdFxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRSZWRpcmVjdFJlc3VsdChhdXRoKTtcclxuICogaWYgKHJlc3VsdCkge1xyXG4gKiAgIC8vIFRoaXMgaXMgdGhlIHNpZ25lZC1pbiB1c2VyXHJcbiAqICAgY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAgIC8vIFRoaXMgZ2l2ZXMgeW91IGEgVHdpdHRlciBBY2Nlc3MgVG9rZW4gYW5kIFNlY3JldC5cclxuICogICBjb25zdCBjcmVkZW50aWFsID0gVHdpdHRlckF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChyZXN1bHQpO1xyXG4gKiAgIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcclxuICogICBjb25zdCBzZWNyZXQgPSBjcmVkZW50aWFsLnNlY3JldDtcclxuICogfVxyXG4gKiBgYGBcclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcG9wdXAuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IFR3aXR0ZXJBdXRoUHJvdmlkZXIoKTtcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aFBvcHVwKGF1dGgsIHByb3ZpZGVyKTtcclxuICpcclxuICogLy8gVGhlIHNpZ25lZC1pbiB1c2VyIGluZm8uXHJcbiAqIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogLy8gVGhpcyBnaXZlcyB5b3UgYSBUd2l0dGVyIEFjY2VzcyBUb2tlbiBhbmQgU2VjcmV0LlxyXG4gKiBjb25zdCBjcmVkZW50aWFsID0gVHdpdHRlckF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChyZXN1bHQpO1xyXG4gKiBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIGNvbnN0IHNlY3JldCA9IGNyZWRlbnRpYWwuc2VjcmV0O1xyXG4gKiBgYGBcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgVHdpdHRlckF1dGhQcm92aWRlciBleHRlbmRzIEJhc2VPQXV0aFByb3ZpZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKFwidHdpdHRlci5jb21cIiAvKiBQcm92aWRlcklkLlRXSVRURVIgKi8pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgY3JlZGVudGlhbCBmb3IgVHdpdHRlci5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdG9rZW4gLSBUd2l0dGVyIGFjY2VzcyB0b2tlbi5cclxuICAgICAqIEBwYXJhbSBzZWNyZXQgLSBUd2l0dGVyIHNlY3JldC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWwodG9rZW4sIHNlY3JldCkge1xyXG4gICAgICAgIHJldHVybiBPQXV0aENyZWRlbnRpYWwuX2Zyb21QYXJhbXMoe1xyXG4gICAgICAgICAgICBwcm92aWRlcklkOiBUd2l0dGVyQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lELFxyXG4gICAgICAgICAgICBzaWduSW5NZXRob2Q6IFR3aXR0ZXJBdXRoUHJvdmlkZXIuVFdJVFRFUl9TSUdOX0lOX01FVEhPRCxcclxuICAgICAgICAgICAgb2F1dGhUb2tlbjogdG9rZW4sXHJcbiAgICAgICAgICAgIG9hdXRoVG9rZW5TZWNyZXQ6IHNlY3JldFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBVc2VyQ3JlZGVudGlhbH0uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tUmVzdWx0KHVzZXJDcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIFR3aXR0ZXJBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QodXNlckNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBBdXRoRXJyb3J9IHdoaWNoIHdhc1xyXG4gICAgICogdGhyb3duIGR1cmluZyBhIHNpZ24taW4sIGxpbmssIG9yIHJlYXV0aGVudGljYXRlIG9wZXJhdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21FcnJvcihlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBUd2l0dGVyQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KChlcnJvci5jdXN0b21EYXRhIHx8IHt9KSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoeyBfdG9rZW5SZXNwb25zZTogdG9rZW5SZXNwb25zZSB9KSB7XHJcbiAgICAgICAgaWYgKCF0b2tlblJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB7IG9hdXRoQWNjZXNzVG9rZW4sIG9hdXRoVG9rZW5TZWNyZXQgfSA9IHRva2VuUmVzcG9uc2U7XHJcbiAgICAgICAgaWYgKCFvYXV0aEFjY2Vzc1Rva2VuIHx8ICFvYXV0aFRva2VuU2VjcmV0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gVHdpdHRlckF1dGhQcm92aWRlci5jcmVkZW50aWFsKG9hdXRoQWNjZXNzVG9rZW4sIG9hdXRoVG9rZW5TZWNyZXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbi8qKiBBbHdheXMgc2V0IHRvIHtAbGluayBTaWduSW5NZXRob2R9LlRXSVRURVIuICovXHJcblR3aXR0ZXJBdXRoUHJvdmlkZXIuVFdJVFRFUl9TSUdOX0lOX01FVEhPRCA9IFwidHdpdHRlci5jb21cIiAvKiBTaWduSW5NZXRob2QuVFdJVFRFUiAqLztcclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFByb3ZpZGVySWR9LlRXSVRURVIuICovXHJcblR3aXR0ZXJBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQgPSBcInR3aXR0ZXIuY29tXCIgLyogUHJvdmlkZXJJZC5UV0lUVEVSICovO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduVXAoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtU2lnbkluUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBIdHRwTWV0aG9kLlBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNpZ25VcFwiIC8qIEVuZHBvaW50LlNJR05fVVAgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgVXNlckNyZWRlbnRpYWxJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xyXG4gICAgICAgIHRoaXMudXNlciA9IHBhcmFtcy51c2VyO1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJJZCA9IHBhcmFtcy5wcm92aWRlcklkO1xyXG4gICAgICAgIHRoaXMuX3Rva2VuUmVzcG9uc2UgPSBwYXJhbXMuX3Rva2VuUmVzcG9uc2U7XHJcbiAgICAgICAgdGhpcy5vcGVyYXRpb25UeXBlID0gcGFyYW1zLm9wZXJhdGlvblR5cGU7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgYXN5bmMgX2Zyb21JZFRva2VuUmVzcG9uc2UoYXV0aCwgb3BlcmF0aW9uVHlwZSwgaWRUb2tlblJlc3BvbnNlLCBpc0Fub255bW91cyA9IGZhbHNlKSB7XHJcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXJJbXBsLl9mcm9tSWRUb2tlblJlc3BvbnNlKGF1dGgsIGlkVG9rZW5SZXNwb25zZSwgaXNBbm9ueW1vdXMpO1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVySWQgPSBwcm92aWRlcklkRm9yUmVzcG9uc2UoaWRUb2tlblJlc3BvbnNlKTtcclxuICAgICAgICBjb25zdCB1c2VyQ3JlZCA9IG5ldyBVc2VyQ3JlZGVudGlhbEltcGwoe1xyXG4gICAgICAgICAgICB1c2VyLFxyXG4gICAgICAgICAgICBwcm92aWRlcklkLFxyXG4gICAgICAgICAgICBfdG9rZW5SZXNwb25zZTogaWRUb2tlblJlc3BvbnNlLFxyXG4gICAgICAgICAgICBvcGVyYXRpb25UeXBlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHVzZXJDcmVkO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGFzeW5jIF9mb3JPcGVyYXRpb24odXNlciwgb3BlcmF0aW9uVHlwZSwgcmVzcG9uc2UpIHtcclxuICAgICAgICBhd2FpdCB1c2VyLl91cGRhdGVUb2tlbnNJZk5lY2Vzc2FyeShyZXNwb25zZSwgLyogcmVsb2FkICovIHRydWUpO1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVySWQgPSBwcm92aWRlcklkRm9yUmVzcG9uc2UocmVzcG9uc2UpO1xyXG4gICAgICAgIHJldHVybiBuZXcgVXNlckNyZWRlbnRpYWxJbXBsKHtcclxuICAgICAgICAgICAgdXNlcixcclxuICAgICAgICAgICAgcHJvdmlkZXJJZCxcclxuICAgICAgICAgICAgX3Rva2VuUmVzcG9uc2U6IHJlc3BvbnNlLFxyXG4gICAgICAgICAgICBvcGVyYXRpb25UeXBlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gcHJvdmlkZXJJZEZvclJlc3BvbnNlKHJlc3BvbnNlKSB7XHJcbiAgICBpZiAocmVzcG9uc2UucHJvdmlkZXJJZCkge1xyXG4gICAgICAgIHJldHVybiByZXNwb25zZS5wcm92aWRlcklkO1xyXG4gICAgfVxyXG4gICAgaWYgKCdwaG9uZU51bWJlcicgaW4gcmVzcG9uc2UpIHtcclxuICAgICAgICByZXR1cm4gXCJwaG9uZVwiIC8qIFByb3ZpZGVySWQuUEhPTkUgKi87XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQXN5bmNocm9ub3VzbHkgc2lnbnMgaW4gYXMgYW4gYW5vbnltb3VzIHVzZXIuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIElmIHRoZXJlIGlzIGFscmVhZHkgYW4gYW5vbnltb3VzIHVzZXIgc2lnbmVkIGluLCB0aGF0IHVzZXIgd2lsbCBiZSByZXR1cm5lZDsgb3RoZXJ3aXNlLCBhXHJcbiAqIG5ldyBhbm9ueW1vdXMgdXNlciBpZGVudGl0eSB3aWxsIGJlIGNyZWF0ZWQgYW5kIHJldHVybmVkLlxyXG4gKlxyXG4gKiBUaGlzIG1ldGhvZCBpcyBub3Qgc3VwcG9ydGVkIGJ5IHtAbGluayBBdXRofSBpbnN0YW5jZXMgY3JlYXRlZCB3aXRoIGFcclxuICoge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VTZXJ2ZXJBcHB9LlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNpZ25JbkFub255bW91c2x5KGF1dGgpIHtcclxuICAgIHZhciBfYTtcclxuICAgIGlmIChfaXNGaXJlYmFzZVNlcnZlckFwcChhdXRoLmFwcCkpIHtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoX3NlcnZlckFwcEN1cnJlbnRVc2VyT3BlcmF0aW9uTm90U3VwcG9ydGVkRXJyb3IoYXV0aCkpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYXV0aEludGVybmFsID0gX2Nhc3RBdXRoKGF1dGgpO1xyXG4gICAgYXdhaXQgYXV0aEludGVybmFsLl9pbml0aWFsaXphdGlvblByb21pc2U7XHJcbiAgICBpZiAoKF9hID0gYXV0aEludGVybmFsLmN1cnJlbnRVc2VyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaXNBbm9ueW1vdXMpIHtcclxuICAgICAgICAvLyBJZiBhbiBhbm9ueW1vdXMgdXNlciBpcyBhbHJlYWR5IHNpZ25lZCBpbiwgbm8gbmVlZCB0byBzaWduIHRoZW0gaW4gYWdhaW4uXHJcbiAgICAgICAgcmV0dXJuIG5ldyBVc2VyQ3JlZGVudGlhbEltcGwoe1xyXG4gICAgICAgICAgICB1c2VyOiBhdXRoSW50ZXJuYWwuY3VycmVudFVzZXIsXHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQ6IG51bGwsXHJcbiAgICAgICAgICAgIG9wZXJhdGlvblR5cGU6IFwic2lnbkluXCIgLyogT3BlcmF0aW9uVHlwZS5TSUdOX0lOICovXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNpZ25VcChhdXRoSW50ZXJuYWwsIHtcclxuICAgICAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IFVzZXJDcmVkZW50aWFsSW1wbC5fZnJvbUlkVG9rZW5SZXNwb25zZShhdXRoSW50ZXJuYWwsIFwic2lnbkluXCIgLyogT3BlcmF0aW9uVHlwZS5TSUdOX0lOICovLCByZXNwb25zZSwgdHJ1ZSk7XHJcbiAgICBhd2FpdCBhdXRoSW50ZXJuYWwuX3VwZGF0ZUN1cnJlbnRVc2VyKHVzZXJDcmVkZW50aWFsLnVzZXIpO1xyXG4gICAgcmV0dXJuIHVzZXJDcmVkZW50aWFsO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIE11bHRpRmFjdG9yRXJyb3IgZXh0ZW5kcyBGaXJlYmFzZUVycm9yIHtcclxuICAgIGNvbnN0cnVjdG9yKGF1dGgsIGVycm9yLCBvcGVyYXRpb25UeXBlLCB1c2VyKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIHN1cGVyKGVycm9yLmNvZGUsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgIHRoaXMub3BlcmF0aW9uVHlwZSA9IG9wZXJhdGlvblR5cGU7XHJcbiAgICAgICAgdGhpcy51c2VyID0gdXNlcjtcclxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vTWljcm9zb2Z0L1R5cGVTY3JpcHQtd2lraS9ibG9iL21hc3Rlci9CcmVha2luZy1DaGFuZ2VzLm1kI2V4dGVuZGluZy1idWlsdC1pbnMtbGlrZS1lcnJvci1hcnJheS1hbmQtbWFwLW1heS1uby1sb25nZXItd29ya1xyXG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBNdWx0aUZhY3RvckVycm9yLnByb3RvdHlwZSk7XHJcbiAgICAgICAgdGhpcy5jdXN0b21EYXRhID0ge1xyXG4gICAgICAgICAgICBhcHBOYW1lOiBhdXRoLm5hbWUsXHJcbiAgICAgICAgICAgIHRlbmFudElkOiAoX2EgPSBhdXRoLnRlbmFudElkKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIF9zZXJ2ZXJSZXNwb25zZTogZXJyb3IuY3VzdG9tRGF0YS5fc2VydmVyUmVzcG9uc2UsXHJcbiAgICAgICAgICAgIG9wZXJhdGlvblR5cGVcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgc3RhdGljIF9mcm9tRXJyb3JBbmRPcGVyYXRpb24oYXV0aCwgZXJyb3IsIG9wZXJhdGlvblR5cGUsIHVzZXIpIHtcclxuICAgICAgICByZXR1cm4gbmV3IE11bHRpRmFjdG9yRXJyb3IoYXV0aCwgZXJyb3IsIG9wZXJhdGlvblR5cGUsIHVzZXIpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIF9wcm9jZXNzQ3JlZGVudGlhbFNhdmluZ01mYUNvbnRleHRJZk5lY2Vzc2FyeShhdXRoLCBvcGVyYXRpb25UeXBlLCBjcmVkZW50aWFsLCB1c2VyKSB7XHJcbiAgICBjb25zdCBpZFRva2VuUHJvdmlkZXIgPSBvcGVyYXRpb25UeXBlID09PSBcInJlYXV0aGVudGljYXRlXCIgLyogT3BlcmF0aW9uVHlwZS5SRUFVVEhFTlRJQ0FURSAqL1xyXG4gICAgICAgID8gY3JlZGVudGlhbC5fZ2V0UmVhdXRoZW50aWNhdGlvblJlc29sdmVyKGF1dGgpXHJcbiAgICAgICAgOiBjcmVkZW50aWFsLl9nZXRJZFRva2VuUmVzcG9uc2UoYXV0aCk7XHJcbiAgICByZXR1cm4gaWRUb2tlblByb3ZpZGVyLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICBpZiAoZXJyb3IuY29kZSA9PT0gYGF1dGgvJHtcIm11bHRpLWZhY3Rvci1hdXRoLXJlcXVpcmVkXCIgLyogQXV0aEVycm9yQ29kZS5NRkFfUkVRVUlSRUQgKi99YCkge1xyXG4gICAgICAgICAgICB0aHJvdyBNdWx0aUZhY3RvckVycm9yLl9mcm9tRXJyb3JBbmRPcGVyYXRpb24oYXV0aCwgZXJyb3IsIG9wZXJhdGlvblR5cGUsIHVzZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH0pO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUYWtlcyBhIHNldCBvZiBVc2VySW5mbyBwcm92aWRlciBkYXRhIGFuZCBjb252ZXJ0cyBpdCB0byBhIHNldCBvZiBuYW1lc1xyXG4gKi9cclxuZnVuY3Rpb24gcHJvdmlkZXJEYXRhQXNOYW1lcyhwcm92aWRlckRhdGEpIHtcclxuICAgIHJldHVybiBuZXcgU2V0KHByb3ZpZGVyRGF0YVxyXG4gICAgICAgIC5tYXAoKHsgcHJvdmlkZXJJZCB9KSA9PiBwcm92aWRlcklkKVxyXG4gICAgICAgIC5maWx0ZXIocGlkID0+ICEhcGlkKSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFVubGlua3MgYSBwcm92aWRlciBmcm9tIGEgdXNlciBhY2NvdW50LlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gcHJvdmlkZXJJZCAtIFRoZSBwcm92aWRlciB0byB1bmxpbmsuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHVubGluayh1c2VyLCBwcm92aWRlcklkKSB7XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBhd2FpdCBfYXNzZXJ0TGlua2VkU3RhdHVzKHRydWUsIHVzZXJJbnRlcm5hbCwgcHJvdmlkZXJJZCk7XHJcbiAgICBjb25zdCB7IHByb3ZpZGVyVXNlckluZm8gfSA9IGF3YWl0IGRlbGV0ZUxpbmtlZEFjY291bnRzKHVzZXJJbnRlcm5hbC5hdXRoLCB7XHJcbiAgICAgICAgaWRUb2tlbjogYXdhaXQgdXNlckludGVybmFsLmdldElkVG9rZW4oKSxcclxuICAgICAgICBkZWxldGVQcm92aWRlcjogW3Byb3ZpZGVySWRdXHJcbiAgICB9KTtcclxuICAgIGNvbnN0IHByb3ZpZGVyc0xlZnQgPSBwcm92aWRlckRhdGFBc05hbWVzKHByb3ZpZGVyVXNlckluZm8gfHwgW10pO1xyXG4gICAgdXNlckludGVybmFsLnByb3ZpZGVyRGF0YSA9IHVzZXJJbnRlcm5hbC5wcm92aWRlckRhdGEuZmlsdGVyKHBkID0+IHByb3ZpZGVyc0xlZnQuaGFzKHBkLnByb3ZpZGVySWQpKTtcclxuICAgIGlmICghcHJvdmlkZXJzTGVmdC5oYXMoXCJwaG9uZVwiIC8qIFByb3ZpZGVySWQuUEhPTkUgKi8pKSB7XHJcbiAgICAgICAgdXNlckludGVybmFsLnBob25lTnVtYmVyID0gbnVsbDtcclxuICAgIH1cclxuICAgIGF3YWl0IHVzZXJJbnRlcm5hbC5hdXRoLl9wZXJzaXN0VXNlcklmQ3VycmVudCh1c2VySW50ZXJuYWwpO1xyXG4gICAgcmV0dXJuIHVzZXJJbnRlcm5hbDtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfbGluayQxKHVzZXIsIGNyZWRlbnRpYWwsIGJ5cGFzc0F1dGhTdGF0ZSA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKHVzZXIsIGNyZWRlbnRpYWwuX2xpbmtUb0lkVG9rZW4odXNlci5hdXRoLCBhd2FpdCB1c2VyLmdldElkVG9rZW4oKSksIGJ5cGFzc0F1dGhTdGF0ZSk7XHJcbiAgICByZXR1cm4gVXNlckNyZWRlbnRpYWxJbXBsLl9mb3JPcGVyYXRpb24odXNlciwgXCJsaW5rXCIgLyogT3BlcmF0aW9uVHlwZS5MSU5LICovLCByZXNwb25zZSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX2Fzc2VydExpbmtlZFN0YXR1cyhleHBlY3RlZCwgdXNlciwgcHJvdmlkZXIpIHtcclxuICAgIGF3YWl0IF9yZWxvYWRXaXRob3V0U2F2aW5nKHVzZXIpO1xyXG4gICAgY29uc3QgcHJvdmlkZXJJZHMgPSBwcm92aWRlckRhdGFBc05hbWVzKHVzZXIucHJvdmlkZXJEYXRhKTtcclxuICAgIGNvbnN0IGNvZGUgPSBleHBlY3RlZCA9PT0gZmFsc2VcclxuICAgICAgICA/IFwicHJvdmlkZXItYWxyZWFkeS1saW5rZWRcIiAvKiBBdXRoRXJyb3JDb2RlLlBST1ZJREVSX0FMUkVBRFlfTElOS0VEICovXHJcbiAgICAgICAgOiBcIm5vLXN1Y2gtcHJvdmlkZXJcIiAvKiBBdXRoRXJyb3JDb2RlLk5PX1NVQ0hfUFJPVklERVIgKi87XHJcbiAgICBfYXNzZXJ0KHByb3ZpZGVySWRzLmhhcyhwcm92aWRlcikgPT09IGV4cGVjdGVkLCB1c2VyLmF1dGgsIGNvZGUpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIF9yZWF1dGhlbnRpY2F0ZSh1c2VyLCBjcmVkZW50aWFsLCBieXBhc3NBdXRoU3RhdGUgPSBmYWxzZSkge1xyXG4gICAgY29uc3QgeyBhdXRoIH0gPSB1c2VyO1xyXG4gICAgaWYgKF9pc0ZpcmViYXNlU2VydmVyQXBwKGF1dGguYXBwKSkge1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChfc2VydmVyQXBwQ3VycmVudFVzZXJPcGVyYXRpb25Ob3RTdXBwb3J0ZWRFcnJvcihhdXRoKSk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBvcGVyYXRpb25UeXBlID0gXCJyZWF1dGhlbnRpY2F0ZVwiIC8qIE9wZXJhdGlvblR5cGUuUkVBVVRIRU5USUNBVEUgKi87XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX2xvZ291dElmSW52YWxpZGF0ZWQodXNlciwgX3Byb2Nlc3NDcmVkZW50aWFsU2F2aW5nTWZhQ29udGV4dElmTmVjZXNzYXJ5KGF1dGgsIG9wZXJhdGlvblR5cGUsIGNyZWRlbnRpYWwsIHVzZXIpLCBieXBhc3NBdXRoU3RhdGUpO1xyXG4gICAgICAgIF9hc3NlcnQocmVzcG9uc2UuaWRUb2tlbiwgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IF9wYXJzZVRva2VuKHJlc3BvbnNlLmlkVG9rZW4pO1xyXG4gICAgICAgIF9hc3NlcnQocGFyc2VkLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgY29uc3QgeyBzdWI6IGxvY2FsSWQgfSA9IHBhcnNlZDtcclxuICAgICAgICBfYXNzZXJ0KHVzZXIudWlkID09PSBsb2NhbElkLCBhdXRoLCBcInVzZXItbWlzbWF0Y2hcIiAvKiBBdXRoRXJyb3JDb2RlLlVTRVJfTUlTTUFUQ0ggKi8pO1xyXG4gICAgICAgIHJldHVybiBVc2VyQ3JlZGVudGlhbEltcGwuX2Zvck9wZXJhdGlvbih1c2VyLCBvcGVyYXRpb25UeXBlLCByZXNwb25zZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIC8vIENvbnZlcnQgdXNlciBkZWxldGVkIGVycm9yIGludG8gdXNlciBtaXNtYXRjaFxyXG4gICAgICAgIGlmICgoZSA9PT0gbnVsbCB8fCBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlLmNvZGUpID09PSBgYXV0aC8ke1widXNlci1ub3QtZm91bmRcIiAvKiBBdXRoRXJyb3JDb2RlLlVTRVJfREVMRVRFRCAqL31gKSB7XHJcbiAgICAgICAgICAgIF9mYWlsKGF1dGgsIFwidXNlci1taXNtYXRjaFwiIC8qIEF1dGhFcnJvckNvZGUuVVNFUl9NSVNNQVRDSCAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IGU7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gX3NpZ25JbldpdGhDcmVkZW50aWFsKGF1dGgsIGNyZWRlbnRpYWwsIGJ5cGFzc0F1dGhTdGF0ZSA9IGZhbHNlKSB7XHJcbiAgICBpZiAoX2lzRmlyZWJhc2VTZXJ2ZXJBcHAoYXV0aC5hcHApKSB7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KF9zZXJ2ZXJBcHBDdXJyZW50VXNlck9wZXJhdGlvbk5vdFN1cHBvcnRlZEVycm9yKGF1dGgpKTtcclxuICAgIH1cclxuICAgIGNvbnN0IG9wZXJhdGlvblR5cGUgPSBcInNpZ25JblwiIC8qIE9wZXJhdGlvblR5cGUuU0lHTl9JTiAqLztcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX3Byb2Nlc3NDcmVkZW50aWFsU2F2aW5nTWZhQ29udGV4dElmTmVjZXNzYXJ5KGF1dGgsIG9wZXJhdGlvblR5cGUsIGNyZWRlbnRpYWwpO1xyXG4gICAgY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBVc2VyQ3JlZGVudGlhbEltcGwuX2Zyb21JZFRva2VuUmVzcG9uc2UoYXV0aCwgb3BlcmF0aW9uVHlwZSwgcmVzcG9uc2UpO1xyXG4gICAgaWYgKCFieXBhc3NBdXRoU3RhdGUpIHtcclxuICAgICAgICBhd2FpdCBhdXRoLl91cGRhdGVDdXJyZW50VXNlcih1c2VyQ3JlZGVudGlhbC51c2VyKTtcclxuICAgIH1cclxuICAgIHJldHVybiB1c2VyQ3JlZGVudGlhbDtcclxufVxyXG4vKipcclxuICogQXN5bmNocm9ub3VzbHkgc2lnbnMgaW4gd2l0aCB0aGUgZ2l2ZW4gY3JlZGVudGlhbHMuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIEFuIHtAbGluayBBdXRoUHJvdmlkZXJ9IGNhbiBiZSB1c2VkIHRvIGdlbmVyYXRlIHRoZSBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKiBUaGlzIG1ldGhvZCBpcyBub3Qgc3VwcG9ydGVkIGJ5IHtAbGluayBBdXRofSBpbnN0YW5jZXMgY3JlYXRlZCB3aXRoIGFcclxuICoge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VTZXJ2ZXJBcHB9LlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBjcmVkZW50aWFsIC0gVGhlIGF1dGggY3JlZGVudGlhbC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aENyZWRlbnRpYWwoYXV0aCwgY3JlZGVudGlhbCkge1xyXG4gICAgcmV0dXJuIF9zaWduSW5XaXRoQ3JlZGVudGlhbChfY2FzdEF1dGgoYXV0aCksIGNyZWRlbnRpYWwpO1xyXG59XHJcbi8qKlxyXG4gKiBMaW5rcyB0aGUgdXNlciBhY2NvdW50IHdpdGggdGhlIGdpdmVuIGNyZWRlbnRpYWxzLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBBbiB7QGxpbmsgQXV0aFByb3ZpZGVyfSBjYW4gYmUgdXNlZCB0byBnZW5lcmF0ZSB0aGUgY3JlZGVudGlhbC5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIGNyZWRlbnRpYWwgLSBUaGUgYXV0aCBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBsaW5rV2l0aENyZWRlbnRpYWwodXNlciwgY3JlZGVudGlhbCkge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgYXdhaXQgX2Fzc2VydExpbmtlZFN0YXR1cyhmYWxzZSwgdXNlckludGVybmFsLCBjcmVkZW50aWFsLnByb3ZpZGVySWQpO1xyXG4gICAgcmV0dXJuIF9saW5rJDEodXNlckludGVybmFsLCBjcmVkZW50aWFsKTtcclxufVxyXG4vKipcclxuICogUmUtYXV0aGVudGljYXRlcyBhIHVzZXIgdXNpbmcgYSBmcmVzaCBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBVc2UgYmVmb3JlIG9wZXJhdGlvbnMgc3VjaCBhcyB7QGxpbmsgdXBkYXRlUGFzc3dvcmR9IHRoYXQgcmVxdWlyZSB0b2tlbnMgZnJvbSByZWNlbnQgc2lnbi1pblxyXG4gKiBhdHRlbXB0cy4gVGhpcyBtZXRob2QgY2FuIGJlIHVzZWQgdG8gcmVjb3ZlciBmcm9tIGEgYENSRURFTlRJQUxfVE9PX09MRF9MT0dJTl9BR0FJTmAgZXJyb3JcclxuICogb3IgYSBgVE9LRU5fRVhQSVJFRGAgZXJyb3IuXHJcbiAqXHJcbiAqIFRoaXMgbWV0aG9kIGlzIG5vdCBzdXBwb3J0ZWQgb24gYW55IHtAbGluayBVc2VyfSBzaWduZWQgaW4gYnkge0BsaW5rIEF1dGh9IGluc3RhbmNlc1xyXG4gKiBjcmVhdGVkIHdpdGggYSB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZVNlcnZlckFwcH0uXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBjcmVkZW50aWFsIC0gVGhlIGF1dGggY3JlZGVudGlhbC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gcmVhdXRoZW50aWNhdGVXaXRoQ3JlZGVudGlhbCh1c2VyLCBjcmVkZW50aWFsKSB7XHJcbiAgICByZXR1cm4gX3JlYXV0aGVudGljYXRlKGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKSwgY3JlZGVudGlhbCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aEN1c3RvbVRva2VuJDEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtU2lnbkluUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBIdHRwTWV0aG9kLlBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNpZ25JbldpdGhDdXN0b21Ub2tlblwiIC8qIEVuZHBvaW50LlNJR05fSU5fV0lUSF9DVVNUT01fVE9LRU4gKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEFzeW5jaHJvbm91c2x5IHNpZ25zIGluIHVzaW5nIGEgY3VzdG9tIHRva2VuLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBDdXN0b20gdG9rZW5zIGFyZSB1c2VkIHRvIGludGVncmF0ZSBGaXJlYmFzZSBBdXRoIHdpdGggZXhpc3RpbmcgYXV0aCBzeXN0ZW1zLCBhbmQgbXVzdFxyXG4gKiBiZSBnZW5lcmF0ZWQgYnkgYW4gYXV0aCBiYWNrZW5kIHVzaW5nIHRoZVxyXG4gKiB7QGxpbmsgaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3MvcmVmZXJlbmNlL2FkbWluL25vZGUvYWRtaW4uYXV0aC5BdXRoI2NyZWF0ZWN1c3RvbXRva2VuIHwgY3JlYXRlQ3VzdG9tVG9rZW59XHJcbiAqIG1ldGhvZCBpbiB0aGUge0BsaW5rIGh0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlLmNvbS9kb2NzL2F1dGgvYWRtaW4gfCBBZG1pbiBTREt9IC5cclxuICpcclxuICogRmFpbHMgd2l0aCBhbiBlcnJvciBpZiB0aGUgdG9rZW4gaXMgaW52YWxpZCwgZXhwaXJlZCwgb3Igbm90IGFjY2VwdGVkIGJ5IHRoZSBGaXJlYmFzZSBBdXRoIHNlcnZpY2UuXHJcbiAqXHJcbiAqIFRoaXMgbWV0aG9kIGlzIG5vdCBzdXBwb3J0ZWQgYnkge0BsaW5rIEF1dGh9IGluc3RhbmNlcyBjcmVhdGVkIHdpdGggYVxyXG4gKiB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZVNlcnZlckFwcH0uXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGN1c3RvbVRva2VuIC0gVGhlIGN1c3RvbSB0b2tlbiB0byBzaWduIGluIHdpdGguXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNpZ25JbldpdGhDdXN0b21Ub2tlbihhdXRoLCBjdXN0b21Ub2tlbikge1xyXG4gICAgaWYgKF9pc0ZpcmViYXNlU2VydmVyQXBwKGF1dGguYXBwKSkge1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChfc2VydmVyQXBwQ3VycmVudFVzZXJPcGVyYXRpb25Ob3RTdXBwb3J0ZWRFcnJvcihhdXRoKSk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBhdXRoSW50ZXJuYWwgPSBfY2FzdEF1dGgoYXV0aCk7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNpZ25JbldpdGhDdXN0b21Ub2tlbiQxKGF1dGhJbnRlcm5hbCwge1xyXG4gICAgICAgIHRva2VuOiBjdXN0b21Ub2tlbixcclxuICAgICAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBjcmVkID0gYXdhaXQgVXNlckNyZWRlbnRpYWxJbXBsLl9mcm9tSWRUb2tlblJlc3BvbnNlKGF1dGhJbnRlcm5hbCwgXCJzaWduSW5cIiAvKiBPcGVyYXRpb25UeXBlLlNJR05fSU4gKi8sIHJlc3BvbnNlKTtcclxuICAgIGF3YWl0IGF1dGhJbnRlcm5hbC5fdXBkYXRlQ3VycmVudFVzZXIoY3JlZC51c2VyKTtcclxuICAgIHJldHVybiBjcmVkO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIE11bHRpRmFjdG9ySW5mb0ltcGwge1xyXG4gICAgY29uc3RydWN0b3IoZmFjdG9ySWQsIHJlc3BvbnNlKSB7XHJcbiAgICAgICAgdGhpcy5mYWN0b3JJZCA9IGZhY3RvcklkO1xyXG4gICAgICAgIHRoaXMudWlkID0gcmVzcG9uc2UubWZhRW5yb2xsbWVudElkO1xyXG4gICAgICAgIHRoaXMuZW5yb2xsbWVudFRpbWUgPSBuZXcgRGF0ZShyZXNwb25zZS5lbnJvbGxlZEF0KS50b1VUQ1N0cmluZygpO1xyXG4gICAgICAgIHRoaXMuZGlzcGxheU5hbWUgPSByZXNwb25zZS5kaXNwbGF5TmFtZTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBfZnJvbVNlcnZlclJlc3BvbnNlKGF1dGgsIGVucm9sbG1lbnQpIHtcclxuICAgICAgICBpZiAoJ3Bob25lSW5mbycgaW4gZW5yb2xsbWVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gUGhvbmVNdWx0aUZhY3RvckluZm9JbXBsLl9mcm9tU2VydmVyUmVzcG9uc2UoYXV0aCwgZW5yb2xsbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCd0b3RwSW5mbycgaW4gZW5yb2xsbWVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gVG90cE11bHRpRmFjdG9ySW5mb0ltcGwuX2Zyb21TZXJ2ZXJSZXNwb25zZShhdXRoLCBlbnJvbGxtZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIF9mYWlsKGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIH1cclxufVxyXG5jbGFzcyBQaG9uZU11bHRpRmFjdG9ySW5mb0ltcGwgZXh0ZW5kcyBNdWx0aUZhY3RvckluZm9JbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgc3VwZXIoXCJwaG9uZVwiIC8qIEZhY3RvcklkLlBIT05FICovLCByZXNwb25zZSk7XHJcbiAgICAgICAgdGhpcy5waG9uZU51bWJlciA9IHJlc3BvbnNlLnBob25lSW5mbztcclxuICAgIH1cclxuICAgIHN0YXRpYyBfZnJvbVNlcnZlclJlc3BvbnNlKF9hdXRoLCBlbnJvbGxtZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQaG9uZU11bHRpRmFjdG9ySW5mb0ltcGwoZW5yb2xsbWVudCk7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgVG90cE11bHRpRmFjdG9ySW5mb0ltcGwgZXh0ZW5kcyBNdWx0aUZhY3RvckluZm9JbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgc3VwZXIoXCJ0b3RwXCIgLyogRmFjdG9ySWQuVE9UUCAqLywgcmVzcG9uc2UpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIF9mcm9tU2VydmVyUmVzcG9uc2UoX2F1dGgsIGVucm9sbG1lbnQpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFRvdHBNdWx0aUZhY3RvckluZm9JbXBsKGVucm9sbG1lbnQpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIF9zZXRBY3Rpb25Db2RlU2V0dGluZ3NPblJlcXVlc3QoYXV0aCwgcmVxdWVzdCwgYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICBfYXNzZXJ0KCgoX2EgPSBhY3Rpb25Db2RlU2V0dGluZ3MudXJsKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubGVuZ3RoKSA+IDAsIGF1dGgsIFwiaW52YWxpZC1jb250aW51ZS11cmlcIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfQ09OVElOVUVfVVJJICovKTtcclxuICAgIF9hc3NlcnQodHlwZW9mIGFjdGlvbkNvZGVTZXR0aW5ncy5keW5hbWljTGlua0RvbWFpbiA9PT0gJ3VuZGVmaW5lZCcgfHxcclxuICAgICAgICBhY3Rpb25Db2RlU2V0dGluZ3MuZHluYW1pY0xpbmtEb21haW4ubGVuZ3RoID4gMCwgYXV0aCwgXCJpbnZhbGlkLWR5bmFtaWMtbGluay1kb21haW5cIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfRFlOQU1JQ19MSU5LX0RPTUFJTiAqLyk7XHJcbiAgICByZXF1ZXN0LmNvbnRpbnVlVXJsID0gYWN0aW9uQ29kZVNldHRpbmdzLnVybDtcclxuICAgIHJlcXVlc3QuZHluYW1pY0xpbmtEb21haW4gPSBhY3Rpb25Db2RlU2V0dGluZ3MuZHluYW1pY0xpbmtEb21haW47XHJcbiAgICByZXF1ZXN0LmNhbkhhbmRsZUNvZGVJbkFwcCA9IGFjdGlvbkNvZGVTZXR0aW5ncy5oYW5kbGVDb2RlSW5BcHA7XHJcbiAgICBpZiAoYWN0aW9uQ29kZVNldHRpbmdzLmlPUykge1xyXG4gICAgICAgIF9hc3NlcnQoYWN0aW9uQ29kZVNldHRpbmdzLmlPUy5idW5kbGVJZC5sZW5ndGggPiAwLCBhdXRoLCBcIm1pc3NpbmctaW9zLWJ1bmRsZS1pZFwiIC8qIEF1dGhFcnJvckNvZGUuTUlTU0lOR19JT1NfQlVORExFX0lEICovKTtcclxuICAgICAgICByZXF1ZXN0LmlPU0J1bmRsZUlkID0gYWN0aW9uQ29kZVNldHRpbmdzLmlPUy5idW5kbGVJZDtcclxuICAgIH1cclxuICAgIGlmIChhY3Rpb25Db2RlU2V0dGluZ3MuYW5kcm9pZCkge1xyXG4gICAgICAgIF9hc3NlcnQoYWN0aW9uQ29kZVNldHRpbmdzLmFuZHJvaWQucGFja2FnZU5hbWUubGVuZ3RoID4gMCwgYXV0aCwgXCJtaXNzaW5nLWFuZHJvaWQtcGtnLW5hbWVcIiAvKiBBdXRoRXJyb3JDb2RlLk1JU1NJTkdfQU5EUk9JRF9QQUNLQUdFX05BTUUgKi8pO1xyXG4gICAgICAgIHJlcXVlc3QuYW5kcm9pZEluc3RhbGxBcHAgPSBhY3Rpb25Db2RlU2V0dGluZ3MuYW5kcm9pZC5pbnN0YWxsQXBwO1xyXG4gICAgICAgIHJlcXVlc3QuYW5kcm9pZE1pbmltdW1WZXJzaW9uQ29kZSA9XHJcbiAgICAgICAgICAgIGFjdGlvbkNvZGVTZXR0aW5ncy5hbmRyb2lkLm1pbmltdW1WZXJzaW9uO1xyXG4gICAgICAgIHJlcXVlc3QuYW5kcm9pZFBhY2thZ2VOYW1lID0gYWN0aW9uQ29kZVNldHRpbmdzLmFuZHJvaWQucGFja2FnZU5hbWU7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFVwZGF0ZXMgdGhlIHBhc3N3b3JkIHBvbGljeSBjYWNoZWQgaW4gdGhlIHtAbGluayBBdXRofSBpbnN0YW5jZSBpZiBhIHBvbGljeSBpcyBhbHJlYWR5XHJcbiAqIGNhY2hlZCBmb3IgdGhlIHByb2plY3Qgb3IgdGVuYW50LlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBXZSBvbmx5IGZldGNoIHRoZSBwYXNzd29yZCBwb2xpY3kgaWYgdGhlIHBhc3N3b3JkIGRpZCBub3QgbWVldCBwb2xpY3kgcmVxdWlyZW1lbnRzIGFuZFxyXG4gKiB0aGVyZSBpcyBhbiBleGlzdGluZyBwb2xpY3kgY2FjaGVkLiBBIGRldmVsb3BlciBtdXN0IGNhbGwgdmFsaWRhdGVQYXNzd29yZCBhdCBsZWFzdFxyXG4gKiBvbmNlIGZvciB0aGUgY2FjaGUgdG8gYmUgYXV0b21hdGljYWxseSB1cGRhdGVkLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqXHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiByZWNhY2hlUGFzc3dvcmRQb2xpY3koYXV0aCkge1xyXG4gICAgY29uc3QgYXV0aEludGVybmFsID0gX2Nhc3RBdXRoKGF1dGgpO1xyXG4gICAgaWYgKGF1dGhJbnRlcm5hbC5fZ2V0UGFzc3dvcmRQb2xpY3lJbnRlcm5hbCgpKSB7XHJcbiAgICAgICAgYXdhaXQgYXV0aEludGVybmFsLl91cGRhdGVQYXNzd29yZFBvbGljeSgpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBTZW5kcyBhIHBhc3N3b3JkIHJlc2V0IGVtYWlsIHRvIHRoZSBnaXZlbiBlbWFpbCBhZGRyZXNzLiBUaGlzIG1ldGhvZCBkb2VzIG5vdCB0aHJvdyBhbiBlcnJvciB3aGVuXHJcbiAqIHRoZXJlJ3Mgbm8gdXNlciBhY2NvdW50IHdpdGggdGhlIGdpdmVuIGVtYWlsIGFkZHJlc3MgYW5kXHJcbiAqIHtAbGluayBodHRwczovL2Nsb3VkLmdvb2dsZS5jb20vaWRlbnRpdHktcGxhdGZvcm0vZG9jcy9hZG1pbi9lbWFpbC1lbnVtZXJhdGlvbi1wcm90ZWN0aW9uIHwgRW1haWwgRW51bWVyYXRpb24gUHJvdGVjdGlvbn1cclxuICogaXMgZW5hYmxlZC5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVG8gY29tcGxldGUgdGhlIHBhc3N3b3JkIHJlc2V0LCBjYWxsIHtAbGluayBjb25maXJtUGFzc3dvcmRSZXNldH0gd2l0aCB0aGUgY29kZSBzdXBwbGllZCBpblxyXG4gKiB0aGUgZW1haWwgc2VudCB0byB0aGUgdXNlciwgYWxvbmcgd2l0aCB0aGUgbmV3IHBhc3N3b3JkIHNwZWNpZmllZCBieSB0aGUgdXNlci5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiBjb25zdCBhY3Rpb25Db2RlU2V0dGluZ3MgPSB7XHJcbiAqICAgdXJsOiAnaHR0cHM6Ly93d3cuZXhhbXBsZS5jb20vP2VtYWlsPXVzZXJAZXhhbXBsZS5jb20nLFxyXG4gKiAgIGlPUzoge1xyXG4gKiAgICAgIGJ1bmRsZUlkOiAnY29tLmV4YW1wbGUuaW9zJ1xyXG4gKiAgIH0sXHJcbiAqICAgYW5kcm9pZDoge1xyXG4gKiAgICAgcGFja2FnZU5hbWU6ICdjb20uZXhhbXBsZS5hbmRyb2lkJyxcclxuICogICAgIGluc3RhbGxBcHA6IHRydWUsXHJcbiAqICAgICBtaW5pbXVtVmVyc2lvbjogJzEyJ1xyXG4gKiAgIH0sXHJcbiAqICAgaGFuZGxlQ29kZUluQXBwOiB0cnVlXHJcbiAqIH07XHJcbiAqIGF3YWl0IHNlbmRQYXNzd29yZFJlc2V0RW1haWwoYXV0aCwgJ3VzZXJAZXhhbXBsZS5jb20nLCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gKiAvLyBPYnRhaW4gY29kZSBmcm9tIHVzZXIuXHJcbiAqIGF3YWl0IGNvbmZpcm1QYXNzd29yZFJlc2V0KCd1c2VyQGV4YW1wbGUuY29tJywgY29kZSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBlbWFpbCAtIFRoZSB1c2VyJ3MgZW1haWwgYWRkcmVzcy5cclxuICogQHBhcmFtIGFjdGlvbkNvZGVTZXR0aW5ncyAtIFRoZSB7QGxpbmsgQWN0aW9uQ29kZVNldHRpbmdzfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2VuZFBhc3N3b3JkUmVzZXRFbWFpbChhdXRoLCBlbWFpbCwgYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICBjb25zdCBhdXRoSW50ZXJuYWwgPSBfY2FzdEF1dGgoYXV0aCk7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0ge1xyXG4gICAgICAgIHJlcXVlc3RUeXBlOiBcIlBBU1NXT1JEX1JFU0VUXCIgLyogQWN0aW9uQ29kZU9wZXJhdGlvbi5QQVNTV09SRF9SRVNFVCAqLyxcclxuICAgICAgICBlbWFpbCxcclxuICAgICAgICBjbGllbnRUeXBlOiBcIkNMSUVOVF9UWVBFX1dFQlwiIC8qIFJlY2FwdGNoYUNsaWVudFR5cGUuV0VCICovXHJcbiAgICB9O1xyXG4gICAgaWYgKGFjdGlvbkNvZGVTZXR0aW5ncykge1xyXG4gICAgICAgIF9zZXRBY3Rpb25Db2RlU2V0dGluZ3NPblJlcXVlc3QoYXV0aEludGVybmFsLCByZXF1ZXN0LCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gICAgfVxyXG4gICAgYXdhaXQgaGFuZGxlUmVjYXB0Y2hhRmxvdyhhdXRoSW50ZXJuYWwsIHJlcXVlc3QsIFwiZ2V0T29iQ29kZVwiIC8qIFJlY2FwdGNoYUFjdGlvbk5hbWUuR0VUX09PQl9DT0RFICovLCBzZW5kUGFzc3dvcmRSZXNldEVtYWlsJDEpO1xyXG59XHJcbi8qKlxyXG4gKiBDb21wbGV0ZXMgdGhlIHBhc3N3b3JkIHJlc2V0IHByb2Nlc3MsIGdpdmVuIGEgY29uZmlybWF0aW9uIGNvZGUgYW5kIG5ldyBwYXNzd29yZC5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gb29iQ29kZSAtIEEgY29uZmlybWF0aW9uIGNvZGUgc2VudCB0byB0aGUgdXNlci5cclxuICogQHBhcmFtIG5ld1Bhc3N3b3JkIC0gVGhlIG5ldyBwYXNzd29yZC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gY29uZmlybVBhc3N3b3JkUmVzZXQoYXV0aCwgb29iQ29kZSwgbmV3UGFzc3dvcmQpIHtcclxuICAgIGF3YWl0IHJlc2V0UGFzc3dvcmQoZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLCB7XHJcbiAgICAgICAgb29iQ29kZSxcclxuICAgICAgICBuZXdQYXNzd29yZFxyXG4gICAgfSlcclxuICAgICAgICAuY2F0Y2goYXN5bmMgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgaWYgKGVycm9yLmNvZGUgPT09XHJcbiAgICAgICAgICAgIGBhdXRoLyR7XCJwYXNzd29yZC1kb2VzLW5vdC1tZWV0LXJlcXVpcmVtZW50c1wiIC8qIEF1dGhFcnJvckNvZGUuUEFTU1dPUkRfRE9FU19OT1RfTUVFVF9SRVFVSVJFTUVOVFMgKi99YCkge1xyXG4gICAgICAgICAgICB2b2lkIHJlY2FjaGVQYXNzd29yZFBvbGljeShhdXRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9KTtcclxuICAgIC8vIERvIG5vdCByZXR1cm4gdGhlIGVtYWlsLlxyXG59XHJcbi8qKlxyXG4gKiBBcHBsaWVzIGEgdmVyaWZpY2F0aW9uIGNvZGUgc2VudCB0byB0aGUgdXNlciBieSBlbWFpbCBvciBvdGhlciBvdXQtb2YtYmFuZCBtZWNoYW5pc20uXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIG9vYkNvZGUgLSBBIHZlcmlmaWNhdGlvbiBjb2RlIHNlbnQgdG8gdGhlIHVzZXIuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGFwcGx5QWN0aW9uQ29kZShhdXRoLCBvb2JDb2RlKSB7XHJcbiAgICBhd2FpdCBhcHBseUFjdGlvbkNvZGUkMShnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCksIHsgb29iQ29kZSB9KTtcclxufVxyXG4vKipcclxuICogQ2hlY2tzIGEgdmVyaWZpY2F0aW9uIGNvZGUgc2VudCB0byB0aGUgdXNlciBieSBlbWFpbCBvciBvdGhlciBvdXQtb2YtYmFuZCBtZWNoYW5pc20uXHJcbiAqXHJcbiAqIEByZXR1cm5zIG1ldGFkYXRhIGFib3V0IHRoZSBjb2RlLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBvb2JDb2RlIC0gQSB2ZXJpZmljYXRpb24gY29kZSBzZW50IHRvIHRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBjaGVja0FjdGlvbkNvZGUoYXV0aCwgb29iQ29kZSkge1xyXG4gICAgY29uc3QgYXV0aE1vZHVsYXIgPSBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCk7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlc2V0UGFzc3dvcmQoYXV0aE1vZHVsYXIsIHsgb29iQ29kZSB9KTtcclxuICAgIC8vIEVtYWlsIGNvdWxkIGJlIGVtcHR5IG9ubHkgaWYgdGhlIHJlcXVlc3QgdHlwZSBpcyBFTUFJTF9TSUdOSU4gb3JcclxuICAgIC8vIFZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMLlxyXG4gICAgLy8gTmV3IGVtYWlsIHNob3VsZCBub3QgYmUgZW1wdHkgaWYgdGhlIHJlcXVlc3QgdHlwZSBpc1xyXG4gICAgLy8gVkVSSUZZX0FORF9DSEFOR0VfRU1BSUwuXHJcbiAgICAvLyBNdWx0aS1mYWN0b3IgaW5mbyBjb3VsZCBub3QgYmUgZW1wdHkgaWYgdGhlIHJlcXVlc3QgdHlwZSBpc1xyXG4gICAgLy8gUkVWRVJUX1NFQ09ORF9GQUNUT1JfQURESVRJT04uXHJcbiAgICBjb25zdCBvcGVyYXRpb24gPSByZXNwb25zZS5yZXF1ZXN0VHlwZTtcclxuICAgIF9hc3NlcnQob3BlcmF0aW9uLCBhdXRoTW9kdWxhciwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgc3dpdGNoIChvcGVyYXRpb24pIHtcclxuICAgICAgICBjYXNlIFwiRU1BSUxfU0lHTklOXCIgLyogQWN0aW9uQ29kZU9wZXJhdGlvbi5FTUFJTF9TSUdOSU4gKi86XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJWRVJJRllfQU5EX0NIQU5HRV9FTUFJTFwiIC8qIEFjdGlvbkNvZGVPcGVyYXRpb24uVkVSSUZZX0FORF9DSEFOR0VfRU1BSUwgKi86XHJcbiAgICAgICAgICAgIF9hc3NlcnQocmVzcG9uc2UubmV3RW1haWwsIGF1dGhNb2R1bGFyLCBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJSRVZFUlRfU0VDT05EX0ZBQ1RPUl9BRERJVElPTlwiIC8qIEFjdGlvbkNvZGVPcGVyYXRpb24uUkVWRVJUX1NFQ09ORF9GQUNUT1JfQURESVRJT04gKi86XHJcbiAgICAgICAgICAgIF9hc3NlcnQocmVzcG9uc2UubWZhSW5mbywgYXV0aE1vZHVsYXIsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICAvLyBmYWxsIHRocm91Z2hcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICBfYXNzZXJ0KHJlc3BvbnNlLmVtYWlsLCBhdXRoTW9kdWxhciwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgfVxyXG4gICAgLy8gVGhlIG11bHRpLWZhY3RvciBpbmZvIGZvciByZXZlcnQgc2Vjb25kIGZhY3RvciBhZGRpdGlvblxyXG4gICAgbGV0IG11bHRpRmFjdG9ySW5mbyA9IG51bGw7XHJcbiAgICBpZiAocmVzcG9uc2UubWZhSW5mbykge1xyXG4gICAgICAgIG11bHRpRmFjdG9ySW5mbyA9IE11bHRpRmFjdG9ySW5mb0ltcGwuX2Zyb21TZXJ2ZXJSZXNwb25zZShfY2FzdEF1dGgoYXV0aE1vZHVsYXIpLCByZXNwb25zZS5tZmFJbmZvKTtcclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICBlbWFpbDogKHJlc3BvbnNlLnJlcXVlc3RUeXBlID09PSBcIlZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMXCIgLyogQWN0aW9uQ29kZU9wZXJhdGlvbi5WRVJJRllfQU5EX0NIQU5HRV9FTUFJTCAqL1xyXG4gICAgICAgICAgICAgICAgPyByZXNwb25zZS5uZXdFbWFpbFxyXG4gICAgICAgICAgICAgICAgOiByZXNwb25zZS5lbWFpbCkgfHwgbnVsbCxcclxuICAgICAgICAgICAgcHJldmlvdXNFbWFpbDogKHJlc3BvbnNlLnJlcXVlc3RUeXBlID09PSBcIlZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMXCIgLyogQWN0aW9uQ29kZU9wZXJhdGlvbi5WRVJJRllfQU5EX0NIQU5HRV9FTUFJTCAqL1xyXG4gICAgICAgICAgICAgICAgPyByZXNwb25zZS5lbWFpbFxyXG4gICAgICAgICAgICAgICAgOiByZXNwb25zZS5uZXdFbWFpbCkgfHwgbnVsbCxcclxuICAgICAgICAgICAgbXVsdGlGYWN0b3JJbmZvXHJcbiAgICAgICAgfSxcclxuICAgICAgICBvcGVyYXRpb25cclxuICAgIH07XHJcbn1cclxuLyoqXHJcbiAqIENoZWNrcyBhIHBhc3N3b3JkIHJlc2V0IGNvZGUgc2VudCB0byB0aGUgdXNlciBieSBlbWFpbCBvciBvdGhlciBvdXQtb2YtYmFuZCBtZWNoYW5pc20uXHJcbiAqXHJcbiAqIEByZXR1cm5zIHRoZSB1c2VyJ3MgZW1haWwgYWRkcmVzcyBpZiB2YWxpZC5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gY29kZSAtIEEgdmVyaWZpY2F0aW9uIGNvZGUgc2VudCB0byB0aGUgdXNlci5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gdmVyaWZ5UGFzc3dvcmRSZXNldENvZGUoYXV0aCwgY29kZSkge1xyXG4gICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBjaGVja0FjdGlvbkNvZGUoZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLCBjb2RlKTtcclxuICAgIC8vIEVtYWlsIHNob3VsZCBhbHdheXMgYmUgcHJlc2VudCBzaW5jZSBhIGNvZGUgd2FzIHNlbnQgdG8gaXRcclxuICAgIHJldHVybiBkYXRhLmVtYWlsO1xyXG59XHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgbmV3IHVzZXIgYWNjb3VudCBhc3NvY2lhdGVkIHdpdGggdGhlIHNwZWNpZmllZCBlbWFpbCBhZGRyZXNzIGFuZCBwYXNzd29yZC5cclxuICpcclxuICogQHJlbWFya3NcclxuICogT24gc3VjY2Vzc2Z1bCBjcmVhdGlvbiBvZiB0aGUgdXNlciBhY2NvdW50LCB0aGlzIHVzZXIgd2lsbCBhbHNvIGJlIHNpZ25lZCBpbiB0byB5b3VyIGFwcGxpY2F0aW9uLlxyXG4gKlxyXG4gKiBVc2VyIGFjY291bnQgY3JlYXRpb24gY2FuIGZhaWwgaWYgdGhlIGFjY291bnQgYWxyZWFkeSBleGlzdHMgb3IgdGhlIHBhc3N3b3JkIGlzIGludmFsaWQuXHJcbiAqXHJcbiAqIFRoaXMgbWV0aG9kIGlzIG5vdCBzdXBwb3J0ZWQgb24ge0BsaW5rIEF1dGh9IGluc3RhbmNlcyBjcmVhdGVkIHdpdGggYVxyXG4gKiB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZVNlcnZlckFwcH0uXHJcbiAqXHJcbiAqIE5vdGU6IFRoZSBlbWFpbCBhZGRyZXNzIGFjdHMgYXMgYSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIHVzZXIgYW5kIGVuYWJsZXMgYW4gZW1haWwtYmFzZWRcclxuICogcGFzc3dvcmQgcmVzZXQuIFRoaXMgZnVuY3Rpb24gd2lsbCBjcmVhdGUgYSBuZXcgdXNlciBhY2NvdW50IGFuZCBzZXQgdGhlIGluaXRpYWwgdXNlciBwYXNzd29yZC5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gZW1haWwgLSBUaGUgdXNlcidzIGVtYWlsIGFkZHJlc3MuXHJcbiAqIEBwYXJhbSBwYXNzd29yZCAtIFRoZSB1c2VyJ3MgY2hvc2VuIHBhc3N3b3JkLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQoYXV0aCwgZW1haWwsIHBhc3N3b3JkKSB7XHJcbiAgICBpZiAoX2lzRmlyZWJhc2VTZXJ2ZXJBcHAoYXV0aC5hcHApKSB7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KF9zZXJ2ZXJBcHBDdXJyZW50VXNlck9wZXJhdGlvbk5vdFN1cHBvcnRlZEVycm9yKGF1dGgpKTtcclxuICAgIH1cclxuICAgIGNvbnN0IGF1dGhJbnRlcm5hbCA9IF9jYXN0QXV0aChhdXRoKTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWUsXHJcbiAgICAgICAgZW1haWwsXHJcbiAgICAgICAgcGFzc3dvcmQsXHJcbiAgICAgICAgY2xpZW50VHlwZTogXCJDTElFTlRfVFlQRV9XRUJcIiAvKiBSZWNhcHRjaGFDbGllbnRUeXBlLldFQiAqL1xyXG4gICAgfTtcclxuICAgIGNvbnN0IHNpZ25VcFJlc3BvbnNlID0gaGFuZGxlUmVjYXB0Y2hhRmxvdyhhdXRoSW50ZXJuYWwsIHJlcXVlc3QsIFwic2lnblVwUGFzc3dvcmRcIiAvKiBSZWNhcHRjaGFBY3Rpb25OYW1lLlNJR05fVVBfUEFTU1dPUkQgKi8sIHNpZ25VcCk7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNpZ25VcFJlc3BvbnNlLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICBpZiAoZXJyb3IuY29kZSA9PT0gYGF1dGgvJHtcInBhc3N3b3JkLWRvZXMtbm90LW1lZXQtcmVxdWlyZW1lbnRzXCIgLyogQXV0aEVycm9yQ29kZS5QQVNTV09SRF9ET0VTX05PVF9NRUVUX1JFUVVJUkVNRU5UUyAqL31gKSB7XHJcbiAgICAgICAgICAgIHZvaWQgcmVjYWNoZVBhc3N3b3JkUG9saWN5KGF1dGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH0pO1xyXG4gICAgY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBVc2VyQ3JlZGVudGlhbEltcGwuX2Zyb21JZFRva2VuUmVzcG9uc2UoYXV0aEludGVybmFsLCBcInNpZ25JblwiIC8qIE9wZXJhdGlvblR5cGUuU0lHTl9JTiAqLywgcmVzcG9uc2UpO1xyXG4gICAgYXdhaXQgYXV0aEludGVybmFsLl91cGRhdGVDdXJyZW50VXNlcih1c2VyQ3JlZGVudGlhbC51c2VyKTtcclxuICAgIHJldHVybiB1c2VyQ3JlZGVudGlhbDtcclxufVxyXG4vKipcclxuICogQXN5bmNocm9ub3VzbHkgc2lnbnMgaW4gdXNpbmcgYW4gZW1haWwgYW5kIHBhc3N3b3JkLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBGYWlscyB3aXRoIGFuIGVycm9yIGlmIHRoZSBlbWFpbCBhZGRyZXNzIGFuZCBwYXNzd29yZCBkbyBub3QgbWF0Y2guIFdoZW5cclxuICoge0BsaW5rIGh0dHBzOi8vY2xvdWQuZ29vZ2xlLmNvbS9pZGVudGl0eS1wbGF0Zm9ybS9kb2NzL2FkbWluL2VtYWlsLWVudW1lcmF0aW9uLXByb3RlY3Rpb24gfCBFbWFpbCBFbnVtZXJhdGlvbiBQcm90ZWN0aW9ufVxyXG4gKiBpcyBlbmFibGVkLCB0aGlzIG1ldGhvZCBmYWlscyB3aXRoIFwiYXV0aC9pbnZhbGlkLWNyZWRlbnRpYWxcIiBpbiBjYXNlIG9mIGFuIGludmFsaWRcclxuICogZW1haWwvcGFzc3dvcmQuXHJcbiAqXHJcbiAqIFRoaXMgbWV0aG9kIGlzIG5vdCBzdXBwb3J0ZWQgb24ge0BsaW5rIEF1dGh9IGluc3RhbmNlcyBjcmVhdGVkIHdpdGggYVxyXG4gKiB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZVNlcnZlckFwcH0uXHJcbiAqXHJcbiAqIE5vdGU6IFRoZSB1c2VyJ3MgcGFzc3dvcmQgaXMgTk9UIHRoZSBwYXNzd29yZCB1c2VkIHRvIGFjY2VzcyB0aGUgdXNlcidzIGVtYWlsIGFjY291bnQuIFRoZVxyXG4gKiBlbWFpbCBhZGRyZXNzIHNlcnZlcyBhcyBhIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgdXNlciwgYW5kIHRoZSBwYXNzd29yZCBpcyB1c2VkIHRvIGFjY2Vzc1xyXG4gKiB0aGUgdXNlcidzIGFjY291bnQgaW4geW91ciBGaXJlYmFzZSBwcm9qZWN0LiBTZWUgYWxzbzoge0BsaW5rIGNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZH0uXHJcbiAqXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGVtYWlsIC0gVGhlIHVzZXJzIGVtYWlsIGFkZHJlc3MuXHJcbiAqIEBwYXJhbSBwYXNzd29yZCAtIFRoZSB1c2VycyBwYXNzd29yZC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQoYXV0aCwgZW1haWwsIHBhc3N3b3JkKSB7XHJcbiAgICBpZiAoX2lzRmlyZWJhc2VTZXJ2ZXJBcHAoYXV0aC5hcHApKSB7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KF9zZXJ2ZXJBcHBDdXJyZW50VXNlck9wZXJhdGlvbk5vdFN1cHBvcnRlZEVycm9yKGF1dGgpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBzaWduSW5XaXRoQ3JlZGVudGlhbChnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCksIEVtYWlsQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwoZW1haWwsIHBhc3N3b3JkKSkuY2F0Y2goYXN5bmMgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgaWYgKGVycm9yLmNvZGUgPT09IGBhdXRoLyR7XCJwYXNzd29yZC1kb2VzLW5vdC1tZWV0LXJlcXVpcmVtZW50c1wiIC8qIEF1dGhFcnJvckNvZGUuUEFTU1dPUkRfRE9FU19OT1RfTUVFVF9SRVFVSVJFTUVOVFMgKi99YCkge1xyXG4gICAgICAgICAgICB2b2lkIHJlY2FjaGVQYXNzd29yZFBvbGljeShhdXRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogU2VuZHMgYSBzaWduLWluIGVtYWlsIGxpbmsgdG8gdGhlIHVzZXIgd2l0aCB0aGUgc3BlY2lmaWVkIGVtYWlsLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUaGUgc2lnbi1pbiBvcGVyYXRpb24gaGFzIHRvIGFsd2F5cyBiZSBjb21wbGV0ZWQgaW4gdGhlIGFwcCB1bmxpa2Ugb3RoZXIgb3V0IG9mIGJhbmQgZW1haWxcclxuICogYWN0aW9ucyAocGFzc3dvcmQgcmVzZXQgYW5kIGVtYWlsIHZlcmlmaWNhdGlvbnMpLiBUaGlzIGlzIGJlY2F1c2UsIGF0IHRoZSBlbmQgb2YgdGhlIGZsb3csXHJcbiAqIHRoZSB1c2VyIGlzIGV4cGVjdGVkIHRvIGJlIHNpZ25lZCBpbiBhbmQgdGhlaXIgQXV0aCBzdGF0ZSBwZXJzaXN0ZWQgd2l0aGluIHRoZSBhcHAuXHJcbiAqXHJcbiAqIFRvIGNvbXBsZXRlIHNpZ24gaW4gd2l0aCB0aGUgZW1haWwgbGluaywgY2FsbCB7QGxpbmsgc2lnbkluV2l0aEVtYWlsTGlua30gd2l0aCB0aGUgZW1haWxcclxuICogYWRkcmVzcyBhbmQgdGhlIGVtYWlsIGxpbmsgc3VwcGxpZWQgaW4gdGhlIGVtYWlsIHNlbnQgdG8gdGhlIHVzZXIuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogY29uc3QgYWN0aW9uQ29kZVNldHRpbmdzID0ge1xyXG4gKiAgIHVybDogJ2h0dHBzOi8vd3d3LmV4YW1wbGUuY29tLz9lbWFpbD11c2VyQGV4YW1wbGUuY29tJyxcclxuICogICBpT1M6IHtcclxuICogICAgICBidW5kbGVJZDogJ2NvbS5leGFtcGxlLmlvcydcclxuICogICB9LFxyXG4gKiAgIGFuZHJvaWQ6IHtcclxuICogICAgIHBhY2thZ2VOYW1lOiAnY29tLmV4YW1wbGUuYW5kcm9pZCcsXHJcbiAqICAgICBpbnN0YWxsQXBwOiB0cnVlLFxyXG4gKiAgICAgbWluaW11bVZlcnNpb246ICcxMidcclxuICogICB9LFxyXG4gKiAgIGhhbmRsZUNvZGVJbkFwcDogdHJ1ZVxyXG4gKiB9O1xyXG4gKiBhd2FpdCBzZW5kU2lnbkluTGlua1RvRW1haWwoYXV0aCwgJ3VzZXJAZXhhbXBsZS5jb20nLCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gKiAvLyBPYnRhaW4gZW1haWxMaW5rIGZyb20gdGhlIHVzZXIuXHJcbiAqIGlmKGlzU2lnbkluV2l0aEVtYWlsTGluayhhdXRoLCBlbWFpbExpbmspKSB7XHJcbiAqICAgYXdhaXQgc2lnbkluV2l0aEVtYWlsTGluayhhdXRoLCAndXNlckBleGFtcGxlLmNvbScsIGVtYWlsTGluayk7XHJcbiAqIH1cclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoSW50ZXJuYWwgLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gZW1haWwgLSBUaGUgdXNlcidzIGVtYWlsIGFkZHJlc3MuXHJcbiAqIEBwYXJhbSBhY3Rpb25Db2RlU2V0dGluZ3MgLSBUaGUge0BsaW5rIEFjdGlvbkNvZGVTZXR0aW5nc30uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNlbmRTaWduSW5MaW5rVG9FbWFpbChhdXRoLCBlbWFpbCwgYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICBjb25zdCBhdXRoSW50ZXJuYWwgPSBfY2FzdEF1dGgoYXV0aCk7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0ge1xyXG4gICAgICAgIHJlcXVlc3RUeXBlOiBcIkVNQUlMX1NJR05JTlwiIC8qIEFjdGlvbkNvZGVPcGVyYXRpb24uRU1BSUxfU0lHTklOICovLFxyXG4gICAgICAgIGVtYWlsLFxyXG4gICAgICAgIGNsaWVudFR5cGU6IFwiQ0xJRU5UX1RZUEVfV0VCXCIgLyogUmVjYXB0Y2hhQ2xpZW50VHlwZS5XRUIgKi9cclxuICAgIH07XHJcbiAgICBmdW5jdGlvbiBzZXRBY3Rpb25Db2RlU2V0dGluZ3MocmVxdWVzdCwgYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICAgICAgX2Fzc2VydChhY3Rpb25Db2RlU2V0dGluZ3MuaGFuZGxlQ29kZUluQXBwLCBhdXRoSW50ZXJuYWwsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLkFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICBpZiAoYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICAgICAgICAgIF9zZXRBY3Rpb25Db2RlU2V0dGluZ3NPblJlcXVlc3QoYXV0aEludGVybmFsLCByZXF1ZXN0LCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHNldEFjdGlvbkNvZGVTZXR0aW5ncyhyZXF1ZXN0LCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gICAgYXdhaXQgaGFuZGxlUmVjYXB0Y2hhRmxvdyhhdXRoSW50ZXJuYWwsIHJlcXVlc3QsIFwiZ2V0T29iQ29kZVwiIC8qIFJlY2FwdGNoYUFjdGlvbk5hbWUuR0VUX09PQl9DT0RFICovLCBzZW5kU2lnbkluTGlua1RvRW1haWwkMSk7XHJcbn1cclxuLyoqXHJcbiAqIENoZWNrcyBpZiBhbiBpbmNvbWluZyBsaW5rIGlzIGEgc2lnbi1pbiB3aXRoIGVtYWlsIGxpbmsgc3VpdGFibGUgZm9yIHtAbGluayBzaWduSW5XaXRoRW1haWxMaW5rfS5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gZW1haWxMaW5rIC0gVGhlIGxpbmsgc2VudCB0byB0aGUgdXNlcidzIGVtYWlsIGFkZHJlc3MuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGlzU2lnbkluV2l0aEVtYWlsTGluayhhdXRoLCBlbWFpbExpbmspIHtcclxuICAgIGNvbnN0IGFjdGlvbkNvZGVVcmwgPSBBY3Rpb25Db2RlVVJMLnBhcnNlTGluayhlbWFpbExpbmspO1xyXG4gICAgcmV0dXJuIChhY3Rpb25Db2RlVXJsID09PSBudWxsIHx8IGFjdGlvbkNvZGVVcmwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFjdGlvbkNvZGVVcmwub3BlcmF0aW9uKSA9PT0gXCJFTUFJTF9TSUdOSU5cIiAvKiBBY3Rpb25Db2RlT3BlcmF0aW9uLkVNQUlMX1NJR05JTiAqLztcclxufVxyXG4vKipcclxuICogQXN5bmNocm9ub3VzbHkgc2lnbnMgaW4gdXNpbmcgYW4gZW1haWwgYW5kIHNpZ24taW4gZW1haWwgbGluay5cclxuICpcclxuICogQHJlbWFya3NcclxuICogSWYgbm8gbGluayBpcyBwYXNzZWQsIHRoZSBsaW5rIGlzIGluZmVycmVkIGZyb20gdGhlIGN1cnJlbnQgVVJMLlxyXG4gKlxyXG4gKiBGYWlscyB3aXRoIGFuIGVycm9yIGlmIHRoZSBlbWFpbCBhZGRyZXNzIGlzIGludmFsaWQgb3IgT1RQIGluIGVtYWlsIGxpbmsgZXhwaXJlcy5cclxuICpcclxuICogVGhpcyBtZXRob2QgaXMgbm90IHN1cHBvcnRlZCBieSB7QGxpbmsgQXV0aH0gaW5zdGFuY2VzIGNyZWF0ZWQgd2l0aCBhXHJcbiAqIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlU2VydmVyQXBwfS5cclxuICpcclxuICogTm90ZTogQ29uZmlybSB0aGUgbGluayBpcyBhIHNpZ24taW4gZW1haWwgbGluayBiZWZvcmUgY2FsbGluZyB0aGlzIG1ldGhvZCBmaXJlYmFzZS5hdXRoLkF1dGguaXNTaWduSW5XaXRoRW1haWxMaW5rLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIGNvbnN0IGFjdGlvbkNvZGVTZXR0aW5ncyA9IHtcclxuICogICB1cmw6ICdodHRwczovL3d3dy5leGFtcGxlLmNvbS8/ZW1haWw9dXNlckBleGFtcGxlLmNvbScsXHJcbiAqICAgaU9TOiB7XHJcbiAqICAgICAgYnVuZGxlSWQ6ICdjb20uZXhhbXBsZS5pb3MnXHJcbiAqICAgfSxcclxuICogICBhbmRyb2lkOiB7XHJcbiAqICAgICBwYWNrYWdlTmFtZTogJ2NvbS5leGFtcGxlLmFuZHJvaWQnLFxyXG4gKiAgICAgaW5zdGFsbEFwcDogdHJ1ZSxcclxuICogICAgIG1pbmltdW1WZXJzaW9uOiAnMTInXHJcbiAqICAgfSxcclxuICogICBoYW5kbGVDb2RlSW5BcHA6IHRydWVcclxuICogfTtcclxuICogYXdhaXQgc2VuZFNpZ25JbkxpbmtUb0VtYWlsKGF1dGgsICd1c2VyQGV4YW1wbGUuY29tJywgYWN0aW9uQ29kZVNldHRpbmdzKTtcclxuICogLy8gT2J0YWluIGVtYWlsTGluayBmcm9tIHRoZSB1c2VyLlxyXG4gKiBpZihpc1NpZ25JbldpdGhFbWFpbExpbmsoYXV0aCwgZW1haWxMaW5rKSkge1xyXG4gKiAgIGF3YWl0IHNpZ25JbldpdGhFbWFpbExpbmsoYXV0aCwgJ3VzZXJAZXhhbXBsZS5jb20nLCBlbWFpbExpbmspO1xyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBlbWFpbCAtIFRoZSB1c2VyJ3MgZW1haWwgYWRkcmVzcy5cclxuICogQHBhcmFtIGVtYWlsTGluayAtIFRoZSBsaW5rIHNlbnQgdG8gdGhlIHVzZXIncyBlbWFpbCBhZGRyZXNzLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoRW1haWxMaW5rKGF1dGgsIGVtYWlsLCBlbWFpbExpbmspIHtcclxuICAgIGlmIChfaXNGaXJlYmFzZVNlcnZlckFwcChhdXRoLmFwcCkpIHtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoX3NlcnZlckFwcEN1cnJlbnRVc2VyT3BlcmF0aW9uTm90U3VwcG9ydGVkRXJyb3IoYXV0aCkpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYXV0aE1vZHVsYXIgPSBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCk7XHJcbiAgICBjb25zdCBjcmVkZW50aWFsID0gRW1haWxBdXRoUHJvdmlkZXIuY3JlZGVudGlhbFdpdGhMaW5rKGVtYWlsLCBlbWFpbExpbmsgfHwgX2dldEN1cnJlbnRVcmwoKSk7XHJcbiAgICAvLyBDaGVjayBpZiB0aGUgdGVuYW50IElEIGluIHRoZSBlbWFpbCBsaW5rIG1hdGNoZXMgdGhlIHRlbmFudCBJRCBvbiBBdXRoXHJcbiAgICAvLyBpbnN0YW5jZS5cclxuICAgIF9hc3NlcnQoY3JlZGVudGlhbC5fdGVuYW50SWQgPT09IChhdXRoTW9kdWxhci50ZW5hbnRJZCB8fCBudWxsKSwgYXV0aE1vZHVsYXIsIFwidGVuYW50LWlkLW1pc21hdGNoXCIgLyogQXV0aEVycm9yQ29kZS5URU5BTlRfSURfTUlTTUFUQ0ggKi8pO1xyXG4gICAgcmV0dXJuIHNpZ25JbldpdGhDcmVkZW50aWFsKGF1dGhNb2R1bGFyLCBjcmVkZW50aWFsKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVBdXRoVXJpKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogSHR0cE1ldGhvZC5QT1NUICovLCBcIi92MS9hY2NvdW50czpjcmVhdGVBdXRoVXJpXCIgLyogRW5kcG9pbnQuQ1JFQVRFX0FVVEhfVVJJICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBHZXRzIHRoZSBsaXN0IG9mIHBvc3NpYmxlIHNpZ24gaW4gbWV0aG9kcyBmb3IgdGhlIGdpdmVuIGVtYWlsIGFkZHJlc3MuIFRoaXMgbWV0aG9kIHJldHVybnMgYW5cclxuICogZW1wdHkgbGlzdCB3aGVuXHJcbiAqIHtAbGluayBodHRwczovL2Nsb3VkLmdvb2dsZS5jb20vaWRlbnRpdHktcGxhdGZvcm0vZG9jcy9hZG1pbi9lbWFpbC1lbnVtZXJhdGlvbi1wcm90ZWN0aW9uIHwgRW1haWwgRW51bWVyYXRpb24gUHJvdGVjdGlvbn1cclxuICogaXMgZW5hYmxlZCwgaXJyZXNwZWN0aXZlIG9mIHRoZSBudW1iZXIgb2YgYXV0aGVudGljYXRpb24gbWV0aG9kcyBhdmFpbGFibGUgZm9yIHRoZSBnaXZlbiBlbWFpbC5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVGhpcyBpcyB1c2VmdWwgdG8gZGlmZmVyZW50aWF0ZSBtZXRob2RzIG9mIHNpZ24taW4gZm9yIHRoZSBzYW1lIHByb3ZpZGVyLCBlZy5cclxuICoge0BsaW5rIEVtYWlsQXV0aFByb3ZpZGVyfSB3aGljaCBoYXMgMiBtZXRob2RzIG9mIHNpZ24taW4sXHJcbiAqIHtAbGluayBTaWduSW5NZXRob2R9LkVNQUlMX1BBU1NXT1JEIGFuZFxyXG4gKiB7QGxpbmsgU2lnbkluTWV0aG9kfS5FTUFJTF9MSU5LLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBlbWFpbCAtIFRoZSB1c2VyJ3MgZW1haWwgYWRkcmVzcy5cclxuICpcclxuICogRGVwcmVjYXRlZC4gTWlncmF0aW5nIG9mZiBvZiB0aGlzIG1ldGhvZCBpcyByZWNvbW1lbmRlZCBhcyBhIHNlY3VyaXR5IGJlc3QtcHJhY3RpY2UuXHJcbiAqIExlYXJuIG1vcmUgaW4gdGhlIElkZW50aXR5IFBsYXRmb3JtIGRvY3VtZW50YXRpb24gZm9yXHJcbiAqIHtAbGluayBodHRwczovL2Nsb3VkLmdvb2dsZS5jb20vaWRlbnRpdHktcGxhdGZvcm0vZG9jcy9hZG1pbi9lbWFpbC1lbnVtZXJhdGlvbi1wcm90ZWN0aW9uIHwgRW1haWwgRW51bWVyYXRpb24gUHJvdGVjdGlvbn0uXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGZldGNoU2lnbkluTWV0aG9kc0ZvckVtYWlsKGF1dGgsIGVtYWlsKSB7XHJcbiAgICAvLyBjcmVhdGVBdXRoVXJpIHJldHVybnMgYW4gZXJyb3IgaWYgY29udGludWUgVVJJIGlzIG5vdCBodHRwIG9yIGh0dHBzLlxyXG4gICAgLy8gRm9yIGVudmlyb25tZW50cyBsaWtlIENvcmRvdmEsIENocm9tZSBleHRlbnNpb25zLCBuYXRpdmUgZnJhbWV3b3JrcywgZmlsZVxyXG4gICAgLy8gc3lzdGVtcywgZXRjLCB1c2UgaHR0cDovL2xvY2FsaG9zdCBhcyBjb250aW51ZSBVUkwuXHJcbiAgICBjb25zdCBjb250aW51ZVVyaSA9IF9pc0h0dHBPckh0dHBzKCkgPyBfZ2V0Q3VycmVudFVybCgpIDogJ2h0dHA6Ly9sb2NhbGhvc3QnO1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IHtcclxuICAgICAgICBpZGVudGlmaWVyOiBlbWFpbCxcclxuICAgICAgICBjb250aW51ZVVyaVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHsgc2lnbmluTWV0aG9kcyB9ID0gYXdhaXQgY3JlYXRlQXV0aFVyaShnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCksIHJlcXVlc3QpO1xyXG4gICAgcmV0dXJuIHNpZ25pbk1ldGhvZHMgfHwgW107XHJcbn1cclxuLyoqXHJcbiAqIFNlbmRzIGEgdmVyaWZpY2F0aW9uIGVtYWlsIHRvIGEgdXNlci5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVGhlIHZlcmlmaWNhdGlvbiBwcm9jZXNzIGlzIGNvbXBsZXRlZCBieSBjYWxsaW5nIHtAbGluayBhcHBseUFjdGlvbkNvZGV9LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIGNvbnN0IGFjdGlvbkNvZGVTZXR0aW5ncyA9IHtcclxuICogICB1cmw6ICdodHRwczovL3d3dy5leGFtcGxlLmNvbS8/ZW1haWw9dXNlckBleGFtcGxlLmNvbScsXHJcbiAqICAgaU9TOiB7XHJcbiAqICAgICAgYnVuZGxlSWQ6ICdjb20uZXhhbXBsZS5pb3MnXHJcbiAqICAgfSxcclxuICogICBhbmRyb2lkOiB7XHJcbiAqICAgICBwYWNrYWdlTmFtZTogJ2NvbS5leGFtcGxlLmFuZHJvaWQnLFxyXG4gKiAgICAgaW5zdGFsbEFwcDogdHJ1ZSxcclxuICogICAgIG1pbmltdW1WZXJzaW9uOiAnMTInXHJcbiAqICAgfSxcclxuICogICBoYW5kbGVDb2RlSW5BcHA6IHRydWVcclxuICogfTtcclxuICogYXdhaXQgc2VuZEVtYWlsVmVyaWZpY2F0aW9uKHVzZXIsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAqIC8vIE9idGFpbiBjb2RlIGZyb20gdGhlIHVzZXIuXHJcbiAqIGF3YWl0IGFwcGx5QWN0aW9uQ29kZShhdXRoLCBjb2RlKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBhY3Rpb25Db2RlU2V0dGluZ3MgLSBUaGUge0BsaW5rIEFjdGlvbkNvZGVTZXR0aW5nc30uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNlbmRFbWFpbFZlcmlmaWNhdGlvbih1c2VyLCBhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGNvbnN0IGlkVG9rZW4gPSBhd2FpdCB1c2VyLmdldElkVG9rZW4oKTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgcmVxdWVzdFR5cGU6IFwiVkVSSUZZX0VNQUlMXCIgLyogQWN0aW9uQ29kZU9wZXJhdGlvbi5WRVJJRllfRU1BSUwgKi8sXHJcbiAgICAgICAgaWRUb2tlblxyXG4gICAgfTtcclxuICAgIGlmIChhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgICAgICBfc2V0QWN0aW9uQ29kZVNldHRpbmdzT25SZXF1ZXN0KHVzZXJJbnRlcm5hbC5hdXRoLCByZXF1ZXN0LCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgeyBlbWFpbCB9ID0gYXdhaXQgc2VuZEVtYWlsVmVyaWZpY2F0aW9uJDEodXNlckludGVybmFsLmF1dGgsIHJlcXVlc3QpO1xyXG4gICAgaWYgKGVtYWlsICE9PSB1c2VyLmVtYWlsKSB7XHJcbiAgICAgICAgYXdhaXQgdXNlci5yZWxvYWQoKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogU2VuZHMgYSB2ZXJpZmljYXRpb24gZW1haWwgdG8gYSBuZXcgZW1haWwgYWRkcmVzcy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVGhlIHVzZXIncyBlbWFpbCB3aWxsIGJlIHVwZGF0ZWQgdG8gdGhlIG5ldyBvbmUgYWZ0ZXIgYmVpbmcgdmVyaWZpZWQuXHJcbiAqXHJcbiAqIElmIHlvdSBoYXZlIGEgY3VzdG9tIGVtYWlsIGFjdGlvbiBoYW5kbGVyLCB5b3UgY2FuIGNvbXBsZXRlIHRoZSB2ZXJpZmljYXRpb24gcHJvY2VzcyBieSBjYWxsaW5nXHJcbiAqIHtAbGluayBhcHBseUFjdGlvbkNvZGV9LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIGNvbnN0IGFjdGlvbkNvZGVTZXR0aW5ncyA9IHtcclxuICogICB1cmw6ICdodHRwczovL3d3dy5leGFtcGxlLmNvbS8/ZW1haWw9dXNlckBleGFtcGxlLmNvbScsXHJcbiAqICAgaU9TOiB7XHJcbiAqICAgICAgYnVuZGxlSWQ6ICdjb20uZXhhbXBsZS5pb3MnXHJcbiAqICAgfSxcclxuICogICBhbmRyb2lkOiB7XHJcbiAqICAgICBwYWNrYWdlTmFtZTogJ2NvbS5leGFtcGxlLmFuZHJvaWQnLFxyXG4gKiAgICAgaW5zdGFsbEFwcDogdHJ1ZSxcclxuICogICAgIG1pbmltdW1WZXJzaW9uOiAnMTInXHJcbiAqICAgfSxcclxuICogICBoYW5kbGVDb2RlSW5BcHA6IHRydWVcclxuICogfTtcclxuICogYXdhaXQgdmVyaWZ5QmVmb3JlVXBkYXRlRW1haWwodXNlciwgJ25ld2VtYWlsQGV4YW1wbGUuY29tJywgYWN0aW9uQ29kZVNldHRpbmdzKTtcclxuICogLy8gT2J0YWluIGNvZGUgZnJvbSB0aGUgdXNlci5cclxuICogYXdhaXQgYXBwbHlBY3Rpb25Db2RlKGF1dGgsIGNvZGUpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIG5ld0VtYWlsIC0gVGhlIG5ldyBlbWFpbCBhZGRyZXNzIHRvIGJlIHZlcmlmaWVkIGJlZm9yZSB1cGRhdGUuXHJcbiAqIEBwYXJhbSBhY3Rpb25Db2RlU2V0dGluZ3MgLSBUaGUge0BsaW5rIEFjdGlvbkNvZGVTZXR0aW5nc30uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHZlcmlmeUJlZm9yZVVwZGF0ZUVtYWlsKHVzZXIsIG5ld0VtYWlsLCBhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGNvbnN0IGlkVG9rZW4gPSBhd2FpdCB1c2VyLmdldElkVG9rZW4oKTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgcmVxdWVzdFR5cGU6IFwiVkVSSUZZX0FORF9DSEFOR0VfRU1BSUxcIiAvKiBBY3Rpb25Db2RlT3BlcmF0aW9uLlZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMICovLFxyXG4gICAgICAgIGlkVG9rZW4sXHJcbiAgICAgICAgbmV3RW1haWxcclxuICAgIH07XHJcbiAgICBpZiAoYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICAgICAgX3NldEFjdGlvbkNvZGVTZXR0aW5nc09uUmVxdWVzdCh1c2VySW50ZXJuYWwuYXV0aCwgcmVxdWVzdCwgYWN0aW9uQ29kZVNldHRpbmdzKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHsgZW1haWwgfSA9IGF3YWl0IHZlcmlmeUFuZENoYW5nZUVtYWlsKHVzZXJJbnRlcm5hbC5hdXRoLCByZXF1ZXN0KTtcclxuICAgIGlmIChlbWFpbCAhPT0gdXNlci5lbWFpbCkge1xyXG4gICAgICAgIC8vIElmIHRoZSBsb2NhbCBjb3B5IG9mIHRoZSBlbWFpbCBvbiB1c2VyIGlzIG91dGRhdGVkLCByZWxvYWQgdGhlXHJcbiAgICAgICAgLy8gdXNlci5cclxuICAgICAgICBhd2FpdCB1c2VyLnJlbG9hZCgpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVByb2ZpbGUkMShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIEh0dHBNZXRob2QuUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6dXBkYXRlXCIgLyogRW5kcG9pbnQuU0VUX0FDQ09VTlRfSU5GTyAqLywgcmVxdWVzdCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFVwZGF0ZXMgYSB1c2VyJ3MgcHJvZmlsZSBkYXRhLlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gcHJvZmlsZSAtIFRoZSBwcm9maWxlJ3MgYGRpc3BsYXlOYW1lYCBhbmQgYHBob3RvVVJMYCB0byB1cGRhdGUuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVByb2ZpbGUodXNlciwgeyBkaXNwbGF5TmFtZSwgcGhvdG9VUkw6IHBob3RvVXJsIH0pIHtcclxuICAgIGlmIChkaXNwbGF5TmFtZSA9PT0gdW5kZWZpbmVkICYmIHBob3RvVXJsID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBjb25zdCBpZFRva2VuID0gYXdhaXQgdXNlckludGVybmFsLmdldElkVG9rZW4oKTtcclxuICAgIGNvbnN0IHByb2ZpbGVSZXF1ZXN0ID0ge1xyXG4gICAgICAgIGlkVG9rZW4sXHJcbiAgICAgICAgZGlzcGxheU5hbWUsXHJcbiAgICAgICAgcGhvdG9VcmwsXHJcbiAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWVcclxuICAgIH07XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKHVzZXJJbnRlcm5hbCwgdXBkYXRlUHJvZmlsZSQxKHVzZXJJbnRlcm5hbC5hdXRoLCBwcm9maWxlUmVxdWVzdCkpO1xyXG4gICAgdXNlckludGVybmFsLmRpc3BsYXlOYW1lID0gcmVzcG9uc2UuZGlzcGxheU5hbWUgfHwgbnVsbDtcclxuICAgIHVzZXJJbnRlcm5hbC5waG90b1VSTCA9IHJlc3BvbnNlLnBob3RvVXJsIHx8IG51bGw7XHJcbiAgICAvLyBVcGRhdGUgdGhlIHBhc3N3b3JkIHByb3ZpZGVyIGFzIHdlbGxcclxuICAgIGNvbnN0IHBhc3N3b3JkUHJvdmlkZXIgPSB1c2VySW50ZXJuYWwucHJvdmlkZXJEYXRhLmZpbmQoKHsgcHJvdmlkZXJJZCB9KSA9PiBwcm92aWRlcklkID09PSBcInBhc3N3b3JkXCIgLyogUHJvdmlkZXJJZC5QQVNTV09SRCAqLyk7XHJcbiAgICBpZiAocGFzc3dvcmRQcm92aWRlcikge1xyXG4gICAgICAgIHBhc3N3b3JkUHJvdmlkZXIuZGlzcGxheU5hbWUgPSB1c2VySW50ZXJuYWwuZGlzcGxheU5hbWU7XHJcbiAgICAgICAgcGFzc3dvcmRQcm92aWRlci5waG90b1VSTCA9IHVzZXJJbnRlcm5hbC5waG90b1VSTDtcclxuICAgIH1cclxuICAgIGF3YWl0IHVzZXJJbnRlcm5hbC5fdXBkYXRlVG9rZW5zSWZOZWNlc3NhcnkocmVzcG9uc2UpO1xyXG59XHJcbi8qKlxyXG4gKiBVcGRhdGVzIHRoZSB1c2VyJ3MgZW1haWwgYWRkcmVzcy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogQW4gZW1haWwgd2lsbCBiZSBzZW50IHRvIHRoZSBvcmlnaW5hbCBlbWFpbCBhZGRyZXNzIChpZiBpdCB3YXMgc2V0KSB0aGF0IGFsbG93cyB0byByZXZva2UgdGhlXHJcbiAqIGVtYWlsIGFkZHJlc3MgY2hhbmdlLCBpbiBvcmRlciB0byBwcm90ZWN0IHRoZW0gZnJvbSBhY2NvdW50IGhpamFja2luZy5cclxuICpcclxuICogVGhpcyBtZXRob2QgaXMgbm90IHN1cHBvcnRlZCBvbiBhbnkge0BsaW5rIFVzZXJ9IHNpZ25lZCBpbiBieSB7QGxpbmsgQXV0aH0gaW5zdGFuY2VzXHJcbiAqIGNyZWF0ZWQgd2l0aCBhIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlU2VydmVyQXBwfS5cclxuICpcclxuICogSW1wb3J0YW50OiB0aGlzIGlzIGEgc2VjdXJpdHkgc2Vuc2l0aXZlIG9wZXJhdGlvbiB0aGF0IHJlcXVpcmVzIHRoZSB1c2VyIHRvIGhhdmUgcmVjZW50bHkgc2lnbmVkXHJcbiAqIGluLiBJZiB0aGlzIHJlcXVpcmVtZW50IGlzbid0IG1ldCwgYXNrIHRoZSB1c2VyIHRvIGF1dGhlbnRpY2F0ZSBhZ2FpbiBhbmQgdGhlbiBjYWxsXHJcbiAqIHtAbGluayByZWF1dGhlbnRpY2F0ZVdpdGhDcmVkZW50aWFsfS5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIG5ld0VtYWlsIC0gVGhlIG5ldyBlbWFpbCBhZGRyZXNzLlxyXG4gKlxyXG4gKiBUaHJvd3MgXCJhdXRoL29wZXJhdGlvbi1ub3QtYWxsb3dlZFwiIGVycm9yIHdoZW5cclxuICoge0BsaW5rIGh0dHBzOi8vY2xvdWQuZ29vZ2xlLmNvbS9pZGVudGl0eS1wbGF0Zm9ybS9kb2NzL2FkbWluL2VtYWlsLWVudW1lcmF0aW9uLXByb3RlY3Rpb24gfCBFbWFpbCBFbnVtZXJhdGlvbiBQcm90ZWN0aW9ufVxyXG4gKiBpcyBlbmFibGVkLlxyXG4gKiBEZXByZWNhdGVkIC0gVXNlIHtAbGluayB2ZXJpZnlCZWZvcmVVcGRhdGVFbWFpbH0gaW5zdGVhZC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlRW1haWwodXNlciwgbmV3RW1haWwpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGlmIChfaXNGaXJlYmFzZVNlcnZlckFwcCh1c2VySW50ZXJuYWwuYXV0aC5hcHApKSB7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KF9zZXJ2ZXJBcHBDdXJyZW50VXNlck9wZXJhdGlvbk5vdFN1cHBvcnRlZEVycm9yKHVzZXJJbnRlcm5hbC5hdXRoKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdXBkYXRlRW1haWxPclBhc3N3b3JkKHVzZXJJbnRlcm5hbCwgbmV3RW1haWwsIG51bGwpO1xyXG59XHJcbi8qKlxyXG4gKiBVcGRhdGVzIHRoZSB1c2VyJ3MgcGFzc3dvcmQuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIEltcG9ydGFudDogdGhpcyBpcyBhIHNlY3VyaXR5IHNlbnNpdGl2ZSBvcGVyYXRpb24gdGhhdCByZXF1aXJlcyB0aGUgdXNlciB0byBoYXZlIHJlY2VudGx5IHNpZ25lZFxyXG4gKiBpbi4gSWYgdGhpcyByZXF1aXJlbWVudCBpc24ndCBtZXQsIGFzayB0aGUgdXNlciB0byBhdXRoZW50aWNhdGUgYWdhaW4gYW5kIHRoZW4gY2FsbFxyXG4gKiB7QGxpbmsgcmVhdXRoZW50aWNhdGVXaXRoQ3JlZGVudGlhbH0uXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBuZXdQYXNzd29yZCAtIFRoZSBuZXcgcGFzc3dvcmQuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZVBhc3N3b3JkKHVzZXIsIG5ld1Bhc3N3b3JkKSB7XHJcbiAgICByZXR1cm4gdXBkYXRlRW1haWxPclBhc3N3b3JkKGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKSwgbnVsbCwgbmV3UGFzc3dvcmQpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUVtYWlsT3JQYXNzd29yZCh1c2VyLCBlbWFpbCwgcGFzc3dvcmQpIHtcclxuICAgIGNvbnN0IHsgYXV0aCB9ID0gdXNlcjtcclxuICAgIGNvbnN0IGlkVG9rZW4gPSBhd2FpdCB1c2VyLmdldElkVG9rZW4oKTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgaWRUb2tlbixcclxuICAgICAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZVxyXG4gICAgfTtcclxuICAgIGlmIChlbWFpbCkge1xyXG4gICAgICAgIHJlcXVlc3QuZW1haWwgPSBlbWFpbDtcclxuICAgIH1cclxuICAgIGlmIChwYXNzd29yZCkge1xyXG4gICAgICAgIHJlcXVlc3QucGFzc3dvcmQgPSBwYXNzd29yZDtcclxuICAgIH1cclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX2xvZ291dElmSW52YWxpZGF0ZWQodXNlciwgdXBkYXRlRW1haWxQYXNzd29yZChhdXRoLCByZXF1ZXN0KSk7XHJcbiAgICBhd2FpdCB1c2VyLl91cGRhdGVUb2tlbnNJZk5lY2Vzc2FyeShyZXNwb25zZSwgLyogcmVsb2FkICovIHRydWUpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQYXJzZSB0aGUgYEFkZGl0aW9uYWxVc2VySW5mb2AgZnJvbSB0aGUgSUQgdG9rZW4gcmVzcG9uc2UuXHJcbiAqXHJcbiAqL1xyXG5mdW5jdGlvbiBfZnJvbUlkVG9rZW5SZXNwb25zZShpZFRva2VuUmVzcG9uc2UpIHtcclxuICAgIHZhciBfYSwgX2I7XHJcbiAgICBpZiAoIWlkVG9rZW5SZXNwb25zZSkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgY29uc3QgeyBwcm92aWRlcklkIH0gPSBpZFRva2VuUmVzcG9uc2U7XHJcbiAgICBjb25zdCBwcm9maWxlID0gaWRUb2tlblJlc3BvbnNlLnJhd1VzZXJJbmZvXHJcbiAgICAgICAgPyBKU09OLnBhcnNlKGlkVG9rZW5SZXNwb25zZS5yYXdVc2VySW5mbylcclxuICAgICAgICA6IHt9O1xyXG4gICAgY29uc3QgaXNOZXdVc2VyID0gaWRUb2tlblJlc3BvbnNlLmlzTmV3VXNlciB8fFxyXG4gICAgICAgIGlkVG9rZW5SZXNwb25zZS5raW5kID09PSBcImlkZW50aXR5dG9vbGtpdCNTaWdudXBOZXdVc2VyUmVzcG9uc2VcIiAvKiBJZFRva2VuUmVzcG9uc2VLaW5kLlNpZ251cE5ld1VzZXIgKi87XHJcbiAgICBpZiAoIXByb3ZpZGVySWQgJiYgKGlkVG9rZW5SZXNwb25zZSA9PT0gbnVsbCB8fCBpZFRva2VuUmVzcG9uc2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGlkVG9rZW5SZXNwb25zZS5pZFRva2VuKSkge1xyXG4gICAgICAgIGNvbnN0IHNpZ25JblByb3ZpZGVyID0gKF9iID0gKF9hID0gX3BhcnNlVG9rZW4oaWRUb2tlblJlc3BvbnNlLmlkVG9rZW4pKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZmlyZWJhc2UpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYlsnc2lnbl9pbl9wcm92aWRlciddO1xyXG4gICAgICAgIGlmIChzaWduSW5Qcm92aWRlcikge1xyXG4gICAgICAgICAgICBjb25zdCBmaWx0ZXJlZFByb3ZpZGVySWQgPSBzaWduSW5Qcm92aWRlciAhPT0gXCJhbm9ueW1vdXNcIiAvKiBQcm92aWRlcklkLkFOT05ZTU9VUyAqLyAmJlxyXG4gICAgICAgICAgICAgICAgc2lnbkluUHJvdmlkZXIgIT09IFwiY3VzdG9tXCIgLyogUHJvdmlkZXJJZC5DVVNUT00gKi9cclxuICAgICAgICAgICAgICAgID8gc2lnbkluUHJvdmlkZXJcclxuICAgICAgICAgICAgICAgIDogbnVsbDtcclxuICAgICAgICAgICAgLy8gVXNlcyBnZW5lcmljIGNsYXNzIGluIGFjY29yZGFuY2Ugd2l0aCB0aGUgbGVnYWN5IFNESy5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljQWRkaXRpb25hbFVzZXJJbmZvKGlzTmV3VXNlciwgZmlsdGVyZWRQcm92aWRlcklkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoIXByb3ZpZGVySWQpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIHN3aXRjaCAocHJvdmlkZXJJZCkge1xyXG4gICAgICAgIGNhc2UgXCJmYWNlYm9vay5jb21cIiAvKiBQcm92aWRlcklkLkZBQ0VCT09LICovOlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEZhY2Vib29rQWRkaXRpb25hbFVzZXJJbmZvKGlzTmV3VXNlciwgcHJvZmlsZSk7XHJcbiAgICAgICAgY2FzZSBcImdpdGh1Yi5jb21cIiAvKiBQcm92aWRlcklkLkdJVEhVQiAqLzpcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHaXRodWJBZGRpdGlvbmFsVXNlckluZm8oaXNOZXdVc2VyLCBwcm9maWxlKTtcclxuICAgICAgICBjYXNlIFwiZ29vZ2xlLmNvbVwiIC8qIFByb3ZpZGVySWQuR09PR0xFICovOlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEdvb2dsZUFkZGl0aW9uYWxVc2VySW5mbyhpc05ld1VzZXIsIHByb2ZpbGUpO1xyXG4gICAgICAgIGNhc2UgXCJ0d2l0dGVyLmNvbVwiIC8qIFByb3ZpZGVySWQuVFdJVFRFUiAqLzpcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUd2l0dGVyQWRkaXRpb25hbFVzZXJJbmZvKGlzTmV3VXNlciwgcHJvZmlsZSwgaWRUb2tlblJlc3BvbnNlLnNjcmVlbk5hbWUgfHwgbnVsbCk7XHJcbiAgICAgICAgY2FzZSBcImN1c3RvbVwiIC8qIFByb3ZpZGVySWQuQ1VTVE9NICovOlxyXG4gICAgICAgIGNhc2UgXCJhbm9ueW1vdXNcIiAvKiBQcm92aWRlcklkLkFOT05ZTU9VUyAqLzpcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljQWRkaXRpb25hbFVzZXJJbmZvKGlzTmV3VXNlciwgbnVsbCk7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljQWRkaXRpb25hbFVzZXJJbmZvKGlzTmV3VXNlciwgcHJvdmlkZXJJZCwgcHJvZmlsZSk7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgR2VuZXJpY0FkZGl0aW9uYWxVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcihpc05ld1VzZXIsIHByb3ZpZGVySWQsIHByb2ZpbGUgPSB7fSkge1xyXG4gICAgICAgIHRoaXMuaXNOZXdVc2VyID0gaXNOZXdVc2VyO1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJJZCA9IHByb3ZpZGVySWQ7XHJcbiAgICAgICAgdGhpcy5wcm9maWxlID0gcHJvZmlsZTtcclxuICAgIH1cclxufVxyXG5jbGFzcyBGZWRlcmF0ZWRBZGRpdGlvbmFsVXNlckluZm9XaXRoVXNlcm5hbWUgZXh0ZW5kcyBHZW5lcmljQWRkaXRpb25hbFVzZXJJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKGlzTmV3VXNlciwgcHJvdmlkZXJJZCwgcHJvZmlsZSwgdXNlcm5hbWUpIHtcclxuICAgICAgICBzdXBlcihpc05ld1VzZXIsIHByb3ZpZGVySWQsIHByb2ZpbGUpO1xyXG4gICAgICAgIHRoaXMudXNlcm5hbWUgPSB1c2VybmFtZTtcclxuICAgIH1cclxufVxyXG5jbGFzcyBGYWNlYm9va0FkZGl0aW9uYWxVc2VySW5mbyBleHRlbmRzIEdlbmVyaWNBZGRpdGlvbmFsVXNlckluZm8ge1xyXG4gICAgY29uc3RydWN0b3IoaXNOZXdVc2VyLCBwcm9maWxlKSB7XHJcbiAgICAgICAgc3VwZXIoaXNOZXdVc2VyLCBcImZhY2Vib29rLmNvbVwiIC8qIFByb3ZpZGVySWQuRkFDRUJPT0sgKi8sIHByb2ZpbGUpO1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIEdpdGh1YkFkZGl0aW9uYWxVc2VySW5mbyBleHRlbmRzIEZlZGVyYXRlZEFkZGl0aW9uYWxVc2VySW5mb1dpdGhVc2VybmFtZSB7XHJcbiAgICBjb25zdHJ1Y3Rvcihpc05ld1VzZXIsIHByb2ZpbGUpIHtcclxuICAgICAgICBzdXBlcihpc05ld1VzZXIsIFwiZ2l0aHViLmNvbVwiIC8qIFByb3ZpZGVySWQuR0lUSFVCICovLCBwcm9maWxlLCB0eXBlb2YgKHByb2ZpbGUgPT09IG51bGwgfHwgcHJvZmlsZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcHJvZmlsZS5sb2dpbikgPT09ICdzdHJpbmcnID8gcHJvZmlsZSA9PT0gbnVsbCB8fCBwcm9maWxlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwcm9maWxlLmxvZ2luIDogbnVsbCk7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgR29vZ2xlQWRkaXRpb25hbFVzZXJJbmZvIGV4dGVuZHMgR2VuZXJpY0FkZGl0aW9uYWxVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcihpc05ld1VzZXIsIHByb2ZpbGUpIHtcclxuICAgICAgICBzdXBlcihpc05ld1VzZXIsIFwiZ29vZ2xlLmNvbVwiIC8qIFByb3ZpZGVySWQuR09PR0xFICovLCBwcm9maWxlKTtcclxuICAgIH1cclxufVxyXG5jbGFzcyBUd2l0dGVyQWRkaXRpb25hbFVzZXJJbmZvIGV4dGVuZHMgRmVkZXJhdGVkQWRkaXRpb25hbFVzZXJJbmZvV2l0aFVzZXJuYW1lIHtcclxuICAgIGNvbnN0cnVjdG9yKGlzTmV3VXNlciwgcHJvZmlsZSwgc2NyZWVuTmFtZSkge1xyXG4gICAgICAgIHN1cGVyKGlzTmV3VXNlciwgXCJ0d2l0dGVyLmNvbVwiIC8qIFByb3ZpZGVySWQuVFdJVFRFUiAqLywgcHJvZmlsZSwgc2NyZWVuTmFtZSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEV4dHJhY3RzIHByb3ZpZGVyIHNwZWNpZmljIHtAbGluayBBZGRpdGlvbmFsVXNlckluZm99IGZvciB0aGUgZ2l2ZW4gY3JlZGVudGlhbC5cclxuICpcclxuICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0QWRkaXRpb25hbFVzZXJJbmZvKHVzZXJDcmVkZW50aWFsKSB7XHJcbiAgICBjb25zdCB7IHVzZXIsIF90b2tlblJlc3BvbnNlIH0gPSB1c2VyQ3JlZGVudGlhbDtcclxuICAgIGlmICh1c2VyLmlzQW5vbnltb3VzICYmICFfdG9rZW5SZXNwb25zZSkge1xyXG4gICAgICAgIC8vIEhhbmRsZSB0aGUgc3BlY2lhbCBjYXNlIHdoZXJlIHNpZ25JbkFub255bW91c2x5KCkgZ2V0cyBjYWxsZWQgdHdpY2UuXHJcbiAgICAgICAgLy8gTm8gbmV0d29yayBjYWxsIGlzIG1hZGUgc28gdGhlcmUncyBub3RoaW5nIHRvIGFjdHVhbGx5IGZpbGwgdGhpcyBpblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQ6IG51bGwsXHJcbiAgICAgICAgICAgIGlzTmV3VXNlcjogZmFsc2UsXHJcbiAgICAgICAgICAgIHByb2ZpbGU6IG51bGxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9mcm9tSWRUb2tlblJlc3BvbnNlKF90b2tlblJlc3BvbnNlKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBOb24tb3B0aW9uYWwgYXV0aCBtZXRob2RzLlxyXG4vKipcclxuICogQ2hhbmdlcyB0aGUgdHlwZSBvZiBwZXJzaXN0ZW5jZSBvbiB0aGUge0BsaW5rIEF1dGh9IGluc3RhbmNlIGZvciB0aGUgY3VycmVudGx5IHNhdmVkXHJcbiAqIGBBdXRoYCBzZXNzaW9uIGFuZCBhcHBsaWVzIHRoaXMgdHlwZSBvZiBwZXJzaXN0ZW5jZSBmb3IgZnV0dXJlIHNpZ24taW4gcmVxdWVzdHMsIGluY2x1ZGluZ1xyXG4gKiBzaWduLWluIHdpdGggcmVkaXJlY3QgcmVxdWVzdHMuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRoaXMgbWFrZXMgaXQgZWFzeSBmb3IgYSB1c2VyIHNpZ25pbmcgaW4gdG8gc3BlY2lmeSB3aGV0aGVyIHRoZWlyIHNlc3Npb24gc2hvdWxkIGJlXHJcbiAqIHJlbWVtYmVyZWQgb3Igbm90LiBJdCBhbHNvIG1ha2VzIGl0IGVhc2llciB0byBuZXZlciBwZXJzaXN0IHRoZSBgQXV0aGAgc3RhdGUgZm9yIGFwcGxpY2F0aW9uc1xyXG4gKiB0aGF0IGFyZSBzaGFyZWQgYnkgb3RoZXIgdXNlcnMgb3IgaGF2ZSBzZW5zaXRpdmUgZGF0YS5cclxuICpcclxuICogVGhpcyBtZXRob2QgZG9lcyBub3Qgd29yayBpbiBhIE5vZGUuanMgZW52aXJvbm1lbnQgb3Igd2l0aCB7QGxpbmsgQXV0aH0gaW5zdGFuY2VzIGNyZWF0ZWQgd2l0aCBhXHJcbiAqIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlU2VydmVyQXBwfS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiBzZXRQZXJzaXN0ZW5jZShhdXRoLCBicm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIHBlcnNpc3RlbmNlIC0gVGhlIHtAbGluayBQZXJzaXN0ZW5jZX0gdG8gdXNlLlxyXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IHJlc29sdmVzIG9uY2UgdGhlIHBlcnNpc3RlbmNlIGNoYW5nZSBoYXMgY29tcGxldGVkXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHNldFBlcnNpc3RlbmNlKGF1dGgsIHBlcnNpc3RlbmNlKSB7XHJcbiAgICByZXR1cm4gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLnNldFBlcnNpc3RlbmNlKHBlcnNpc3RlbmNlKTtcclxufVxyXG4vKipcclxuICogTG9hZHMgdGhlIHJlQ0FQVENIQSBjb25maWd1cmF0aW9uIGludG8gdGhlIGBBdXRoYCBpbnN0YW5jZS5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVGhpcyB3aWxsIGxvYWQgdGhlIHJlQ0FQVENIQSBjb25maWcsIHdoaWNoIGluZGljYXRlcyB3aGV0aGVyIHRoZSByZUNBUFRDSEFcclxuICogdmVyaWZpY2F0aW9uIGZsb3cgc2hvdWxkIGJlIHRyaWdnZXJlZCBmb3IgZWFjaCBhdXRoIHByb3ZpZGVyLCBpbnRvIHRoZVxyXG4gKiBjdXJyZW50IEF1dGggc2Vzc2lvbi5cclxuICpcclxuICogSWYgaW5pdGlhbGl6ZVJlY2FwdGNoYUNvbmZpZygpIGlzIG5vdCBpbnZva2VkLCB0aGUgYXV0aCBmbG93IHdpbGwgYWx3YXlzIHN0YXJ0XHJcbiAqIHdpdGhvdXQgcmVDQVBUQ0hBIHZlcmlmaWNhdGlvbi4gSWYgdGhlIHByb3ZpZGVyIGlzIGNvbmZpZ3VyZWQgdG8gcmVxdWlyZSByZUNBUFRDSEFcclxuICogdmVyaWZpY2F0aW9uLCB0aGUgU0RLIHdpbGwgdHJhbnNwYXJlbnRseSBsb2FkIHRoZSByZUNBUFRDSEEgY29uZmlnIGFuZCByZXN0YXJ0IHRoZVxyXG4gKiBhdXRoIGZsb3dzLlxyXG4gKlxyXG4gKiBUaHVzLCBieSBjYWxsaW5nIHRoaXMgb3B0aW9uYWwgbWV0aG9kLCB5b3Ugd2lsbCByZWR1Y2UgdGhlIGxhdGVuY3kgb2YgZnV0dXJlIGF1dGggZmxvd3MuXHJcbiAqIExvYWRpbmcgdGhlIHJlQ0FQVENIQSBjb25maWcgZWFybHkgd2lsbCBhbHNvIGVuaGFuY2UgdGhlIHNpZ25hbCBjb2xsZWN0ZWQgYnkgcmVDQVBUQ0hBLlxyXG4gKlxyXG4gKiBUaGlzIG1ldGhvZCBkb2VzIG5vdCB3b3JrIGluIGEgTm9kZS5qcyBlbnZpcm9ubWVudC5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiBpbml0aWFsaXplUmVjYXB0Y2hhQ29uZmlnKGF1dGgpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBpbml0aWFsaXplUmVjYXB0Y2hhQ29uZmlnKGF1dGgpIHtcclxuICAgIHJldHVybiBfaW5pdGlhbGl6ZVJlY2FwdGNoYUNvbmZpZyhhdXRoKTtcclxufVxyXG4vKipcclxuICogVmFsaWRhdGVzIHRoZSBwYXNzd29yZCBhZ2FpbnN0IHRoZSBwYXNzd29yZCBwb2xpY3kgY29uZmlndXJlZCBmb3IgdGhlIHByb2plY3Qgb3IgdGVuYW50LlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJZiBubyB0ZW5hbnQgSUQgaXMgc2V0IG9uIHRoZSBgQXV0aGAgaW5zdGFuY2UsIHRoZW4gdGhpcyBtZXRob2Qgd2lsbCB1c2UgdGhlIHBhc3N3b3JkXHJcbiAqIHBvbGljeSBjb25maWd1cmVkIGZvciB0aGUgcHJvamVjdC4gT3RoZXJ3aXNlLCB0aGlzIG1ldGhvZCB3aWxsIHVzZSB0aGUgcG9saWN5IGNvbmZpZ3VyZWRcclxuICogZm9yIHRoZSB0ZW5hbnQuIElmIGEgcGFzc3dvcmQgcG9saWN5IGhhcyBub3QgYmVlbiBjb25maWd1cmVkLCB0aGVuIHRoZSBkZWZhdWx0IHBvbGljeVxyXG4gKiBjb25maWd1cmVkIGZvciBhbGwgcHJvamVjdHMgd2lsbCBiZSB1c2VkLlxyXG4gKlxyXG4gKiBJZiBhbiBhdXRoIGZsb3cgZmFpbHMgYmVjYXVzZSBhIHN1Ym1pdHRlZCBwYXNzd29yZCBkb2VzIG5vdCBtZWV0IHRoZSBwYXNzd29yZCBwb2xpY3lcclxuICogcmVxdWlyZW1lbnRzIGFuZCB0aGlzIG1ldGhvZCBoYXMgcHJldmlvdXNseSBiZWVuIGNhbGxlZCwgdGhlbiB0aGlzIG1ldGhvZCB3aWxsIHVzZSB0aGVcclxuICogbW9zdCByZWNlbnQgcG9saWN5IGF2YWlsYWJsZSB3aGVuIGNhbGxlZCBhZ2Fpbi5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiB2YWxpZGF0ZVBhc3N3b3JkKGF1dGgsICdzb21lLXBhc3N3b3JkJyk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gcGFzc3dvcmQgVGhlIHBhc3N3b3JkIHRvIHZhbGlkYXRlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiB2YWxpZGF0ZVBhc3N3b3JkKGF1dGgsIHBhc3N3b3JkKSB7XHJcbiAgICBjb25zdCBhdXRoSW50ZXJuYWwgPSBfY2FzdEF1dGgoYXV0aCk7XHJcbiAgICByZXR1cm4gYXV0aEludGVybmFsLnZhbGlkYXRlUGFzc3dvcmQocGFzc3dvcmQpO1xyXG59XHJcbi8qKlxyXG4gKiBBZGRzIGFuIG9ic2VydmVyIGZvciBjaGFuZ2VzIHRvIHRoZSBzaWduZWQtaW4gdXNlcidzIElEIHRva2VuLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUaGlzIGluY2x1ZGVzIHNpZ24taW4sIHNpZ24tb3V0LCBhbmQgdG9rZW4gcmVmcmVzaCBldmVudHMuXHJcbiAqIFRoaXMgd2lsbCBub3QgYmUgdHJpZ2dlcmVkIGF1dG9tYXRpY2FsbHkgdXBvbiBJRCB0b2tlbiBleHBpcmF0aW9uLiBVc2Uge0BsaW5rIFVzZXIuZ2V0SWRUb2tlbn0gdG8gcmVmcmVzaCB0aGUgSUQgdG9rZW4uXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIG5leHRPck9ic2VydmVyIC0gY2FsbGJhY2sgdHJpZ2dlcmVkIG9uIGNoYW5nZS5cclxuICogQHBhcmFtIGVycm9yIC0gRGVwcmVjYXRlZC4gVGhpcyBjYWxsYmFjayBpcyBuZXZlciB0cmlnZ2VyZWQuIEVycm9yc1xyXG4gKiBvbiBzaWduaW5nIGluL291dCBjYW4gYmUgY2F1Z2h0IGluIHByb21pc2VzIHJldHVybmVkIGZyb21cclxuICogc2lnbi1pbi9zaWduLW91dCBmdW5jdGlvbnMuXHJcbiAqIEBwYXJhbSBjb21wbGV0ZWQgLSBEZXByZWNhdGVkLiBUaGlzIGNhbGxiYWNrIGlzIG5ldmVyIHRyaWdnZXJlZC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gb25JZFRva2VuQ2hhbmdlZChhdXRoLCBuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlZCkge1xyXG4gICAgcmV0dXJuIGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKS5vbklkVG9rZW5DaGFuZ2VkKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKTtcclxufVxyXG4vKipcclxuICogQWRkcyBhIGJsb2NraW5nIGNhbGxiYWNrIHRoYXQgcnVucyBiZWZvcmUgYW4gYXV0aCBzdGF0ZSBjaGFuZ2VcclxuICogc2V0cyBhIG5ldyB1c2VyLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBjYWxsYmFjayAtIGNhbGxiYWNrIHRyaWdnZXJlZCBiZWZvcmUgbmV3IHVzZXIgdmFsdWUgaXMgc2V0LlxyXG4gKiAgIElmIHRoaXMgdGhyb3dzLCBpdCBibG9ja3MgdGhlIHVzZXIgZnJvbSBiZWluZyBzZXQuXHJcbiAqIEBwYXJhbSBvbkFib3J0IC0gY2FsbGJhY2sgdHJpZ2dlcmVkIGlmIGEgbGF0ZXIgYGJlZm9yZUF1dGhTdGF0ZUNoYW5nZWQoKWBcclxuICogICBjYWxsYmFjayB0aHJvd3MsIGFsbG93aW5nIHlvdSB0byB1bmRvIGFueSBzaWRlIGVmZmVjdHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBiZWZvcmVBdXRoU3RhdGVDaGFuZ2VkKGF1dGgsIGNhbGxiYWNrLCBvbkFib3J0KSB7XHJcbiAgICByZXR1cm4gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLmJlZm9yZUF1dGhTdGF0ZUNoYW5nZWQoY2FsbGJhY2ssIG9uQWJvcnQpO1xyXG59XHJcbi8qKlxyXG4gKiBBZGRzIGFuIG9ic2VydmVyIGZvciBjaGFuZ2VzIHRvIHRoZSB1c2VyJ3Mgc2lnbi1pbiBzdGF0ZS5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVG8ga2VlcCB0aGUgb2xkIGJlaGF2aW9yLCBzZWUge0BsaW5rIG9uSWRUb2tlbkNoYW5nZWR9LlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBuZXh0T3JPYnNlcnZlciAtIGNhbGxiYWNrIHRyaWdnZXJlZCBvbiBjaGFuZ2UuXHJcbiAqIEBwYXJhbSBlcnJvciAtIERlcHJlY2F0ZWQuIFRoaXMgY2FsbGJhY2sgaXMgbmV2ZXIgdHJpZ2dlcmVkLiBFcnJvcnNcclxuICogb24gc2lnbmluZyBpbi9vdXQgY2FuIGJlIGNhdWdodCBpbiBwcm9taXNlcyByZXR1cm5lZCBmcm9tXHJcbiAqIHNpZ24taW4vc2lnbi1vdXQgZnVuY3Rpb25zLlxyXG4gKiBAcGFyYW0gY29tcGxldGVkIC0gRGVwcmVjYXRlZC4gVGhpcyBjYWxsYmFjayBpcyBuZXZlciB0cmlnZ2VyZWQuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIG9uQXV0aFN0YXRlQ2hhbmdlZChhdXRoLCBuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlZCkge1xyXG4gICAgcmV0dXJuIGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKS5vbkF1dGhTdGF0ZUNoYW5nZWQobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpO1xyXG59XHJcbi8qKlxyXG4gKiBTZXRzIHRoZSBjdXJyZW50IGxhbmd1YWdlIHRvIHRoZSBkZWZhdWx0IGRldmljZS9icm93c2VyIHByZWZlcmVuY2UuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gdXNlRGV2aWNlTGFuZ3VhZ2UoYXV0aCkge1xyXG4gICAgZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLnVzZURldmljZUxhbmd1YWdlKCk7XHJcbn1cclxuLyoqXHJcbiAqIEFzeW5jaHJvbm91c2x5IHNldHMgdGhlIHByb3ZpZGVkIHVzZXIgYXMge0BsaW5rIEF1dGguY3VycmVudFVzZXJ9IG9uIHRoZVxyXG4gKiB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIEEgbmV3IGluc3RhbmNlIGNvcHkgb2YgdGhlIHVzZXIgcHJvdmlkZWQgd2lsbCBiZSBtYWRlIGFuZCBzZXQgYXMgY3VycmVudFVzZXIuXHJcbiAqXHJcbiAqIFRoaXMgd2lsbCB0cmlnZ2VyIHtAbGluayBvbkF1dGhTdGF0ZUNoYW5nZWR9IGFuZCB7QGxpbmsgb25JZFRva2VuQ2hhbmdlZH0gbGlzdGVuZXJzXHJcbiAqIGxpa2Ugb3RoZXIgc2lnbiBpbiBtZXRob2RzLlxyXG4gKlxyXG4gKiBUaGUgb3BlcmF0aW9uIGZhaWxzIHdpdGggYW4gZXJyb3IgaWYgdGhlIHVzZXIgdG8gYmUgdXBkYXRlZCBiZWxvbmdzIHRvIGEgZGlmZmVyZW50IEZpcmViYXNlXHJcbiAqIHByb2plY3QuXHJcbiAqXHJcbiAqIFRoaXMgbWV0aG9kIGlzIG5vdCBzdXBwb3J0ZWQgYnkge0BsaW5rIEF1dGh9IGluc3RhbmNlcyBjcmVhdGVkIHdpdGggYVxyXG4gKiB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZVNlcnZlckFwcH0uXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIHVzZXIgLSBUaGUgbmV3IHtAbGluayBVc2VyfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlQ3VycmVudFVzZXIoYXV0aCwgdXNlcikge1xyXG4gICAgcmV0dXJuIGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKS51cGRhdGVDdXJyZW50VXNlcih1c2VyKTtcclxufVxyXG4vKipcclxuICogU2lnbnMgb3V0IHRoZSBjdXJyZW50IHVzZXIuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRoaXMgbWV0aG9kIGlzIG5vdCBzdXBwb3J0ZWQgYnkge0BsaW5rIEF1dGh9IGluc3RhbmNlcyBjcmVhdGVkIHdpdGggYVxyXG4gKiB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZVNlcnZlckFwcH0uXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gc2lnbk91dChhdXRoKSB7XHJcbiAgICByZXR1cm4gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLnNpZ25PdXQoKTtcclxufVxyXG4vKipcclxuICogUmV2b2tlcyB0aGUgZ2l2ZW4gYWNjZXNzIHRva2VuLiBDdXJyZW50bHkgb25seSBzdXBwb3J0cyBBcHBsZSBPQXV0aCBhY2Nlc3MgdG9rZW5zLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSB0b2tlbiAtIFRoZSBBcHBsZSBPQXV0aCBhY2Nlc3MgdG9rZW4uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHJldm9rZUFjY2Vzc1Rva2VuKGF1dGgsIHRva2VuKSB7XHJcbiAgICBjb25zdCBhdXRoSW50ZXJuYWwgPSBfY2FzdEF1dGgoYXV0aCk7XHJcbiAgICByZXR1cm4gYXV0aEludGVybmFsLnJldm9rZUFjY2Vzc1Rva2VuKHRva2VuKTtcclxufVxyXG4vKipcclxuICogRGVsZXRlcyBhbmQgc2lnbnMgb3V0IHRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJbXBvcnRhbnQ6IHRoaXMgaXMgYSBzZWN1cml0eS1zZW5zaXRpdmUgb3BlcmF0aW9uIHRoYXQgcmVxdWlyZXMgdGhlIHVzZXIgdG8gaGF2ZSByZWNlbnRseVxyXG4gKiBzaWduZWQgaW4uIElmIHRoaXMgcmVxdWlyZW1lbnQgaXNuJ3QgbWV0LCBhc2sgdGhlIHVzZXIgdG8gYXV0aGVudGljYXRlIGFnYWluIGFuZCB0aGVuIGNhbGxcclxuICoge0BsaW5rIHJlYXV0aGVudGljYXRlV2l0aENyZWRlbnRpYWx9LlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBkZWxldGVVc2VyKHVzZXIpIHtcclxuICAgIHJldHVybiBnZXRNb2R1bGFySW5zdGFuY2UodXNlcikuZGVsZXRlKCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgTXVsdGlGYWN0b3JTZXNzaW9uSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih0eXBlLCBjcmVkZW50aWFsLCB1c2VyKSB7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgICAgICB0aGlzLmNyZWRlbnRpYWwgPSBjcmVkZW50aWFsO1xyXG4gICAgICAgIHRoaXMudXNlciA9IHVzZXI7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgX2Zyb21JZHRva2VuKGlkVG9rZW4sIHVzZXIpIHtcclxuICAgICAgICByZXR1cm4gbmV3IE11bHRpRmFjdG9yU2Vzc2lvbkltcGwoXCJlbnJvbGxcIiAvKiBNdWx0aUZhY3RvclNlc3Npb25UeXBlLkVOUk9MTCAqLywgaWRUb2tlbiwgdXNlcik7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgX2Zyb21NZmFQZW5kaW5nQ3JlZGVudGlhbChtZmFQZW5kaW5nQ3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgTXVsdGlGYWN0b3JTZXNzaW9uSW1wbChcInNpZ25pblwiIC8qIE11bHRpRmFjdG9yU2Vzc2lvblR5cGUuU0lHTl9JTiAqLywgbWZhUGVuZGluZ0NyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIGNvbnN0IGtleSA9IHRoaXMudHlwZSA9PT0gXCJlbnJvbGxcIiAvKiBNdWx0aUZhY3RvclNlc3Npb25UeXBlLkVOUk9MTCAqL1xyXG4gICAgICAgICAgICA/ICdpZFRva2VuJ1xyXG4gICAgICAgICAgICA6ICdwZW5kaW5nQ3JlZGVudGlhbCc7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbXVsdGlGYWN0b3JTZXNzaW9uOiB7XHJcbiAgICAgICAgICAgICAgICBba2V5XTogdGhpcy5jcmVkZW50aWFsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGZyb21KU09OKG9iaikge1xyXG4gICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgaWYgKG9iaiA9PT0gbnVsbCB8fCBvYmogPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iai5tdWx0aUZhY3RvclNlc3Npb24pIHtcclxuICAgICAgICAgICAgaWYgKChfYSA9IG9iai5tdWx0aUZhY3RvclNlc3Npb24pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wZW5kaW5nQ3JlZGVudGlhbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE11bHRpRmFjdG9yU2Vzc2lvbkltcGwuX2Zyb21NZmFQZW5kaW5nQ3JlZGVudGlhbChvYmoubXVsdGlGYWN0b3JTZXNzaW9uLnBlbmRpbmdDcmVkZW50aWFsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICgoX2IgPSBvYmoubXVsdGlGYWN0b3JTZXNzaW9uKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuaWRUb2tlbikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE11bHRpRmFjdG9yU2Vzc2lvbkltcGwuX2Zyb21JZHRva2VuKG9iai5tdWx0aUZhY3RvclNlc3Npb24uaWRUb2tlbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgTXVsdGlGYWN0b3JSZXNvbHZlckltcGwge1xyXG4gICAgY29uc3RydWN0b3Ioc2Vzc2lvbiwgaGludHMsIHNpZ25JblJlc29sdmVyKSB7XHJcbiAgICAgICAgdGhpcy5zZXNzaW9uID0gc2Vzc2lvbjtcclxuICAgICAgICB0aGlzLmhpbnRzID0gaGludHM7XHJcbiAgICAgICAgdGhpcy5zaWduSW5SZXNvbHZlciA9IHNpZ25JblJlc29sdmVyO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgc3RhdGljIF9mcm9tRXJyb3IoYXV0aEV4dGVybiwgZXJyb3IpIHtcclxuICAgICAgICBjb25zdCBhdXRoID0gX2Nhc3RBdXRoKGF1dGhFeHRlcm4pO1xyXG4gICAgICAgIGNvbnN0IHNlcnZlclJlc3BvbnNlID0gZXJyb3IuY3VzdG9tRGF0YS5fc2VydmVyUmVzcG9uc2U7XHJcbiAgICAgICAgY29uc3QgaGludHMgPSAoc2VydmVyUmVzcG9uc2UubWZhSW5mbyB8fCBbXSkubWFwKGVucm9sbG1lbnQgPT4gTXVsdGlGYWN0b3JJbmZvSW1wbC5fZnJvbVNlcnZlclJlc3BvbnNlKGF1dGgsIGVucm9sbG1lbnQpKTtcclxuICAgICAgICBfYXNzZXJ0KHNlcnZlclJlc3BvbnNlLm1mYVBlbmRpbmdDcmVkZW50aWFsLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IE11bHRpRmFjdG9yU2Vzc2lvbkltcGwuX2Zyb21NZmFQZW5kaW5nQ3JlZGVudGlhbChzZXJ2ZXJSZXNwb25zZS5tZmFQZW5kaW5nQ3JlZGVudGlhbCk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBNdWx0aUZhY3RvclJlc29sdmVySW1wbChzZXNzaW9uLCBoaW50cywgYXN5bmMgKGFzc2VydGlvbikgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtZmFSZXNwb25zZSA9IGF3YWl0IGFzc2VydGlvbi5fcHJvY2VzcyhhdXRoLCBzZXNzaW9uKTtcclxuICAgICAgICAgICAgLy8gQ2xlYXIgb3V0IHRoZSB1bm5lZWRlZCBmaWVsZHMgZnJvbSB0aGUgb2xkIGxvZ2luIHJlc3BvbnNlXHJcbiAgICAgICAgICAgIGRlbGV0ZSBzZXJ2ZXJSZXNwb25zZS5tZmFJbmZvO1xyXG4gICAgICAgICAgICBkZWxldGUgc2VydmVyUmVzcG9uc2UubWZhUGVuZGluZ0NyZWRlbnRpYWw7XHJcbiAgICAgICAgICAgIC8vIFVzZSBpbiB0aGUgbmV3IHRva2VuICYgcmVmcmVzaCB0b2tlbiBpbiB0aGUgb2xkIHJlc3BvbnNlXHJcbiAgICAgICAgICAgIGNvbnN0IGlkVG9rZW5SZXNwb25zZSA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgc2VydmVyUmVzcG9uc2UpLCB7IGlkVG9rZW46IG1mYVJlc3BvbnNlLmlkVG9rZW4sIHJlZnJlc2hUb2tlbjogbWZhUmVzcG9uc2UucmVmcmVzaFRva2VuIH0pO1xyXG4gICAgICAgICAgICAvLyBUT0RPOiB3ZSBzaG91bGQgY29sbGFwc2UgdGhpcyBzd2l0Y2ggc3RhdGVtZW50IGludG8gVXNlckNyZWRlbnRpYWxJbXBsLl9mb3JPcGVyYXRpb24gYW5kIGhhdmUgaXQgc3VwcG9ydCB0aGUgU0lHTl9JTiBjYXNlXHJcbiAgICAgICAgICAgIHN3aXRjaCAoZXJyb3Iub3BlcmF0aW9uVHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInNpZ25JblwiIC8qIE9wZXJhdGlvblR5cGUuU0lHTl9JTiAqLzpcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IFVzZXJDcmVkZW50aWFsSW1wbC5fZnJvbUlkVG9rZW5SZXNwb25zZShhdXRoLCBlcnJvci5vcGVyYXRpb25UeXBlLCBpZFRva2VuUmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGF1dGguX3VwZGF0ZUN1cnJlbnRVc2VyKHVzZXJDcmVkZW50aWFsLnVzZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1c2VyQ3JlZGVudGlhbDtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJyZWF1dGhlbnRpY2F0ZVwiIC8qIE9wZXJhdGlvblR5cGUuUkVBVVRIRU5USUNBVEUgKi86XHJcbiAgICAgICAgICAgICAgICAgICAgX2Fzc2VydChlcnJvci51c2VyLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFVzZXJDcmVkZW50aWFsSW1wbC5fZm9yT3BlcmF0aW9uKGVycm9yLnVzZXIsIGVycm9yLm9wZXJhdGlvblR5cGUsIGlkVG9rZW5SZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIF9mYWlsKGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgcmVzb2x2ZVNpZ25Jbihhc3NlcnRpb25FeHRlcm4pIHtcclxuICAgICAgICBjb25zdCBhc3NlcnRpb24gPSBhc3NlcnRpb25FeHRlcm47XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2lnbkluUmVzb2x2ZXIoYXNzZXJ0aW9uKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogUHJvdmlkZXMgYSB7QGxpbmsgTXVsdGlGYWN0b3JSZXNvbHZlcn0gc3VpdGFibGUgZm9yIGNvbXBsZXRpb24gb2YgYVxyXG4gKiBtdWx0aS1mYWN0b3IgZmxvdy5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gZXJyb3IgLSBUaGUge0BsaW5rIE11bHRpRmFjdG9yRXJyb3J9IHJhaXNlZCBkdXJpbmcgYSBzaWduLWluLCBvclxyXG4gKiByZWF1dGhlbnRpY2F0aW9uIG9wZXJhdGlvbi5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0TXVsdGlGYWN0b3JSZXNvbHZlcihhdXRoLCBlcnJvcikge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgY29uc3QgYXV0aE1vZHVsYXIgPSBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCk7XHJcbiAgICBjb25zdCBlcnJvckludGVybmFsID0gZXJyb3I7XHJcbiAgICBfYXNzZXJ0KGVycm9yLmN1c3RvbURhdGEub3BlcmF0aW9uVHlwZSwgYXV0aE1vZHVsYXIsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLkFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgIF9hc3NlcnQoKF9hID0gZXJyb3JJbnRlcm5hbC5jdXN0b21EYXRhLl9zZXJ2ZXJSZXNwb25zZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1mYVBlbmRpbmdDcmVkZW50aWFsLCBhdXRoTW9kdWxhciwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgcmV0dXJuIE11bHRpRmFjdG9yUmVzb2x2ZXJJbXBsLl9mcm9tRXJyb3IoYXV0aE1vZHVsYXIsIGVycm9ySW50ZXJuYWwpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIHN0YXJ0RW5yb2xsUGhvbmVNZmEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBIdHRwTWV0aG9kLlBPU1QgKi8sIFwiL3YyL2FjY291bnRzL21mYUVucm9sbG1lbnQ6c3RhcnRcIiAvKiBFbmRwb2ludC5TVEFSVF9NRkFfRU5ST0xMTUVOVCAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxyXG5mdW5jdGlvbiBmaW5hbGl6ZUVucm9sbFBob25lTWZhKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogSHR0cE1ldGhvZC5QT1NUICovLCBcIi92Mi9hY2NvdW50cy9tZmFFbnJvbGxtZW50OmZpbmFsaXplXCIgLyogRW5kcG9pbnQuRklOQUxJWkVfTUZBX0VOUk9MTE1FTlQgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuZnVuY3Rpb24gc3RhcnRFbnJvbGxUb3RwTWZhKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogSHR0cE1ldGhvZC5QT1NUICovLCBcIi92Mi9hY2NvdW50cy9tZmFFbnJvbGxtZW50OnN0YXJ0XCIgLyogRW5kcG9pbnQuU1RBUlRfTUZBX0VOUk9MTE1FTlQgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuZnVuY3Rpb24gZmluYWxpemVFbnJvbGxUb3RwTWZhKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogSHR0cE1ldGhvZC5QT1NUICovLCBcIi92Mi9hY2NvdW50cy9tZmFFbnJvbGxtZW50OmZpbmFsaXplXCIgLyogRW5kcG9pbnQuRklOQUxJWkVfTUZBX0VOUk9MTE1FTlQgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuZnVuY3Rpb24gd2l0aGRyYXdNZmEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBIdHRwTWV0aG9kLlBPU1QgKi8sIFwiL3YyL2FjY291bnRzL21mYUVucm9sbG1lbnQ6d2l0aGRyYXdcIiAvKiBFbmRwb2ludC5XSVRIRFJBV19NRkEgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cblxuY2xhc3MgTXVsdGlGYWN0b3JVc2VySW1wbCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih1c2VyKSB7XHJcbiAgICAgICAgdGhpcy51c2VyID0gdXNlcjtcclxuICAgICAgICB0aGlzLmVucm9sbGVkRmFjdG9ycyA9IFtdO1xyXG4gICAgICAgIHVzZXIuX29uUmVsb2FkKHVzZXJJbmZvID0+IHtcclxuICAgICAgICAgICAgaWYgKHVzZXJJbmZvLm1mYUluZm8pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZW5yb2xsZWRGYWN0b3JzID0gdXNlckluZm8ubWZhSW5mby5tYXAoZW5yb2xsbWVudCA9PiBNdWx0aUZhY3RvckluZm9JbXBsLl9mcm9tU2VydmVyUmVzcG9uc2UodXNlci5hdXRoLCBlbnJvbGxtZW50KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBfZnJvbVVzZXIodXNlcikge1xyXG4gICAgICAgIHJldHVybiBuZXcgTXVsdGlGYWN0b3JVc2VySW1wbCh1c2VyKTtcclxuICAgIH1cclxuICAgIGFzeW5jIGdldFNlc3Npb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIE11bHRpRmFjdG9yU2Vzc2lvbkltcGwuX2Zyb21JZHRva2VuKGF3YWl0IHRoaXMudXNlci5nZXRJZFRva2VuKCksIHRoaXMudXNlcik7XHJcbiAgICB9XHJcbiAgICBhc3luYyBlbnJvbGwoYXNzZXJ0aW9uRXh0ZXJuLCBkaXNwbGF5TmFtZSkge1xyXG4gICAgICAgIGNvbnN0IGFzc2VydGlvbiA9IGFzc2VydGlvbkV4dGVybjtcclxuICAgICAgICBjb25zdCBzZXNzaW9uID0gKGF3YWl0IHRoaXMuZ2V0U2Vzc2lvbigpKTtcclxuICAgICAgICBjb25zdCBmaW5hbGl6ZU1mYVJlc3BvbnNlID0gYXdhaXQgX2xvZ291dElmSW52YWxpZGF0ZWQodGhpcy51c2VyLCBhc3NlcnRpb24uX3Byb2Nlc3ModGhpcy51c2VyLmF1dGgsIHNlc3Npb24sIGRpc3BsYXlOYW1lKSk7XHJcbiAgICAgICAgLy8gTmV3IHRva2VucyB3aWxsIGJlIGlzc3VlZCBhZnRlciBlbnJvbGxtZW50IG9mIHRoZSBuZXcgc2Vjb25kIGZhY3RvcnMuXHJcbiAgICAgICAgLy8gVGhleSBuZWVkIHRvIGJlIHVwZGF0ZWQgb24gdGhlIHVzZXIuXHJcbiAgICAgICAgYXdhaXQgdGhpcy51c2VyLl91cGRhdGVUb2tlbnNJZk5lY2Vzc2FyeShmaW5hbGl6ZU1mYVJlc3BvbnNlKTtcclxuICAgICAgICAvLyBUaGUgdXNlciBuZWVkcyB0byBiZSByZWxvYWRlZCB0byBnZXQgdGhlIG5ldyBtdWx0aS1mYWN0b3IgaW5mb3JtYXRpb25cclxuICAgICAgICAvLyBmcm9tIHNlcnZlci4gVVNFUl9SRUxPQURFRCBldmVudCB3aWxsIGJlIHRyaWdnZXJlZCBhbmQgYGVucm9sbGVkRmFjdG9yc2BcclxuICAgICAgICAvLyB3aWxsIGJlIHVwZGF0ZWQuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMudXNlci5yZWxvYWQoKTtcclxuICAgIH1cclxuICAgIGFzeW5jIHVuZW5yb2xsKGluZm9PclVpZCkge1xyXG4gICAgICAgIGNvbnN0IG1mYUVucm9sbG1lbnRJZCA9IHR5cGVvZiBpbmZvT3JVaWQgPT09ICdzdHJpbmcnID8gaW5mb09yVWlkIDogaW5mb09yVWlkLnVpZDtcclxuICAgICAgICBjb25zdCBpZFRva2VuID0gYXdhaXQgdGhpcy51c2VyLmdldElkVG9rZW4oKTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBpZFRva2VuUmVzcG9uc2UgPSBhd2FpdCBfbG9nb3V0SWZJbnZhbGlkYXRlZCh0aGlzLnVzZXIsIHdpdGhkcmF3TWZhKHRoaXMudXNlci5hdXRoLCB7XHJcbiAgICAgICAgICAgICAgICBpZFRva2VuLFxyXG4gICAgICAgICAgICAgICAgbWZhRW5yb2xsbWVudElkXHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBzZWNvbmQgZmFjdG9yIGZyb20gdGhlIHVzZXIncyBsaXN0LlxyXG4gICAgICAgICAgICB0aGlzLmVucm9sbGVkRmFjdG9ycyA9IHRoaXMuZW5yb2xsZWRGYWN0b3JzLmZpbHRlcigoeyB1aWQgfSkgPT4gdWlkICE9PSBtZmFFbnJvbGxtZW50SWQpO1xyXG4gICAgICAgICAgICAvLyBEZXBlbmRpbmcgb24gd2hldGhlciB0aGUgYmFja2VuZCBkZWNpZGVkIHRvIHJldm9rZSB0aGUgdXNlcidzIHNlc3Npb24sXHJcbiAgICAgICAgICAgIC8vIHRoZSB0b2tlblJlc3BvbnNlIG1heSBiZSBlbXB0eS4gSWYgdGhlIHRva2VucyB3ZXJlIG5vdCB1cGRhdGVkIChhbmQgdGhleVxyXG4gICAgICAgICAgICAvLyBhcmUgbm93IGludmFsaWQpLCByZWxvYWRpbmcgdGhlIHVzZXIgd2lsbCBkaXNjb3ZlciB0aGlzIGFuZCBpbnZhbGlkYXRlXHJcbiAgICAgICAgICAgIC8vIHRoZSB1c2VyJ3Mgc3RhdGUgYWNjb3JkaW5nbHkuXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudXNlci5fdXBkYXRlVG9rZW5zSWZOZWNlc3NhcnkoaWRUb2tlblJlc3BvbnNlKTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy51c2VyLnJlbG9hZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5jb25zdCBtdWx0aUZhY3RvclVzZXJDYWNoZSA9IG5ldyBXZWFrTWFwKCk7XHJcbi8qKlxyXG4gKiBUaGUge0BsaW5rIE11bHRpRmFjdG9yVXNlcn0gY29ycmVzcG9uZGluZyB0byB0aGUgdXNlci5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVGhpcyBpcyB1c2VkIHRvIGFjY2VzcyBhbGwgbXVsdGktZmFjdG9yIHByb3BlcnRpZXMgYW5kIG9wZXJhdGlvbnMgcmVsYXRlZCB0byB0aGUgdXNlci5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gbXVsdGlGYWN0b3IodXNlcikge1xyXG4gICAgY29uc3QgdXNlck1vZHVsYXIgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBpZiAoIW11bHRpRmFjdG9yVXNlckNhY2hlLmhhcyh1c2VyTW9kdWxhcikpIHtcclxuICAgICAgICBtdWx0aUZhY3RvclVzZXJDYWNoZS5zZXQodXNlck1vZHVsYXIsIE11bHRpRmFjdG9yVXNlckltcGwuX2Zyb21Vc2VyKHVzZXJNb2R1bGFyKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbXVsdGlGYWN0b3JVc2VyQ2FjaGUuZ2V0KHVzZXJNb2R1bGFyKTtcclxufVxuXG5jb25zdCBTVE9SQUdFX0FWQUlMQUJMRV9LRVkgPSAnX19zYWsnO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBUaGVyZSBhcmUgdHdvIGRpZmZlcmVudCBicm93c2VyIHBlcnNpc3RlbmNlIHR5cGVzOiBsb2NhbCBhbmQgc2Vzc2lvbi5cclxuLy8gQm90aCBoYXZlIHRoZSBzYW1lIGltcGxlbWVudGF0aW9uIGJ1dCB1c2UgYSBkaWZmZXJlbnQgdW5kZXJseWluZyBzdG9yYWdlXHJcbi8vIG9iamVjdC5cclxuY2xhc3MgQnJvd3NlclBlcnNpc3RlbmNlQ2xhc3Mge1xyXG4gICAgY29uc3RydWN0b3Ioc3RvcmFnZVJldHJpZXZlciwgdHlwZSkge1xyXG4gICAgICAgIHRoaXMuc3RvcmFnZVJldHJpZXZlciA9IHN0b3JhZ2VSZXRyaWV2ZXI7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgIH1cclxuICAgIF9pc0F2YWlsYWJsZSgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuc3RvcmFnZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zdG9yYWdlLnNldEl0ZW0oU1RPUkFHRV9BVkFJTEFCTEVfS0VZLCAnMScpO1xyXG4gICAgICAgICAgICB0aGlzLnN0b3JhZ2UucmVtb3ZlSXRlbShTVE9SQUdFX0FWQUlMQUJMRV9LRVkpO1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX3NldChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5zdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH1cclxuICAgIF9nZXQoa2V5KSB7XHJcbiAgICAgICAgY29uc3QganNvbiA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKGtleSk7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShqc29uID8gSlNPTi5wYXJzZShqc29uKSA6IG51bGwpO1xyXG4gICAgfVxyXG4gICAgX3JlbW92ZShrZXkpIHtcclxuICAgICAgICB0aGlzLnN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH1cclxuICAgIGdldCBzdG9yYWdlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0b3JhZ2VSZXRyaWV2ZXIoKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBfaWZyYW1lQ2Fubm90U3luY1dlYlN0b3JhZ2UoKSB7XHJcbiAgICBjb25zdCB1YSA9IGdldFVBKCk7XHJcbiAgICByZXR1cm4gX2lzU2FmYXJpKHVhKSB8fCBfaXNJT1ModWEpO1xyXG59XHJcbi8vIFRoZSBwb2xsaW5nIHBlcmlvZCBpbiBjYXNlIGV2ZW50cyBhcmUgbm90IHN1cHBvcnRlZFxyXG5jb25zdCBfUE9MTElOR19JTlRFUlZBTF9NUyQxID0gMTAwMDtcclxuLy8gVGhlIElFIDEwIGxvY2FsU3RvcmFnZSBjcm9zcyB0YWIgc3luY2hyb25pemF0aW9uIGRlbGF5IGluIG1pbGxpc2Vjb25kc1xyXG5jb25zdCBJRTEwX0xPQ0FMX1NUT1JBR0VfU1lOQ19ERUxBWSA9IDEwO1xyXG5jbGFzcyBCcm93c2VyTG9jYWxQZXJzaXN0ZW5jZSBleHRlbmRzIEJyb3dzZXJQZXJzaXN0ZW5jZUNsYXNzIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCgpID0+IHdpbmRvdy5sb2NhbFN0b3JhZ2UsIFwiTE9DQUxcIiAvKiBQZXJzaXN0ZW5jZVR5cGUuTE9DQUwgKi8pO1xyXG4gICAgICAgIHRoaXMuYm91bmRFdmVudEhhbmRsZXIgPSAoZXZlbnQsIHBvbGwpID0+IHRoaXMub25TdG9yYWdlRXZlbnQoZXZlbnQsIHBvbGwpO1xyXG4gICAgICAgIHRoaXMubGlzdGVuZXJzID0ge307XHJcbiAgICAgICAgdGhpcy5sb2NhbENhY2hlID0ge307XHJcbiAgICAgICAgLy8gc2V0VGltZW91dCByZXR1cm4gdmFsdWUgaXMgcGxhdGZvcm0gc3BlY2lmaWNcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgIHRoaXMucG9sbFRpbWVyID0gbnVsbDtcclxuICAgICAgICAvLyBTYWZhcmkgb3IgaU9TIGJyb3dzZXIgYW5kIGVtYmVkZGVkIGluIGFuIGlmcmFtZS5cclxuICAgICAgICB0aGlzLnNhZmFyaUxvY2FsU3RvcmFnZU5vdFN5bmNlZCA9IF9pZnJhbWVDYW5ub3RTeW5jV2ViU3RvcmFnZSgpICYmIF9pc0lmcmFtZSgpO1xyXG4gICAgICAgIC8vIFdoZXRoZXIgdG8gdXNlIHBvbGxpbmcgaW5zdGVhZCBvZiBkZXBlbmRpbmcgb24gd2luZG93IGV2ZW50c1xyXG4gICAgICAgIHRoaXMuZmFsbGJhY2tUb1BvbGxpbmcgPSBfaXNNb2JpbGVCcm93c2VyKCk7XHJcbiAgICAgICAgdGhpcy5fc2hvdWxkQWxsb3dNaWdyYXRpb24gPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgZm9yQWxsQ2hhbmdlZEtleXMoY2IpIHtcclxuICAgICAgICAvLyBDaGVjayBhbGwga2V5cyB3aXRoIGxpc3RlbmVycyBvbiB0aGVtLlxyXG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHRoaXMubGlzdGVuZXJzKSkge1xyXG4gICAgICAgICAgICAvLyBHZXQgdmFsdWUgZnJvbSBsb2NhbFN0b3JhZ2UuXHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0oa2V5KTtcclxuICAgICAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSB0aGlzLmxvY2FsQ2FjaGVba2V5XTtcclxuICAgICAgICAgICAgLy8gSWYgbG9jYWwgbWFwIHZhbHVlIGRvZXMgbm90IG1hdGNoLCB0cmlnZ2VyIGxpc3RlbmVyIHdpdGggc3RvcmFnZSBldmVudC5cclxuICAgICAgICAgICAgLy8gRGlmZmVyZW50aWF0ZSB0aGlzIHNpbXVsYXRlZCBldmVudCBmcm9tIHRoZSByZWFsIHN0b3JhZ2UgZXZlbnQuXHJcbiAgICAgICAgICAgIGlmIChuZXdWYWx1ZSAhPT0gb2xkVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGNiKGtleSwgb2xkVmFsdWUsIG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9uU3RvcmFnZUV2ZW50KGV2ZW50LCBwb2xsID0gZmFsc2UpIHtcclxuICAgICAgICAvLyBLZXkgd291bGQgYmUgbnVsbCBpbiBzb21lIHNpdHVhdGlvbnMsIGxpa2Ugd2hlbiBsb2NhbFN0b3JhZ2UgaXMgY2xlYXJlZFxyXG4gICAgICAgIGlmICghZXZlbnQua2V5KSB7XHJcbiAgICAgICAgICAgIHRoaXMuZm9yQWxsQ2hhbmdlZEtleXMoKGtleSwgX29sZFZhbHVlLCBuZXdWYWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlMaXN0ZW5lcnMoa2V5LCBuZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGtleSA9IGV2ZW50LmtleTtcclxuICAgICAgICAvLyBDaGVjayB0aGUgbWVjaGFuaXNtIGhvdyB0aGlzIGV2ZW50IHdhcyBkZXRlY3RlZC5cclxuICAgICAgICAvLyBUaGUgZmlyc3QgZXZlbnQgd2lsbCBkaWN0YXRlIHRoZSBtZWNoYW5pc20gdG8gYmUgdXNlZC5cclxuICAgICAgICBpZiAocG9sbCkge1xyXG4gICAgICAgICAgICAvLyBFbnZpcm9ubWVudCBkZXRlY3RzIHN0b3JhZ2UgY2hhbmdlcyB2aWEgcG9sbGluZy5cclxuICAgICAgICAgICAgLy8gUmVtb3ZlIHN0b3JhZ2UgZXZlbnQgbGlzdGVuZXIgdG8gcHJldmVudCBwb3NzaWJsZSBldmVudCBkdXBsaWNhdGlvbi5cclxuICAgICAgICAgICAgdGhpcy5kZXRhY2hMaXN0ZW5lcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gRW52aXJvbm1lbnQgZGV0ZWN0cyBzdG9yYWdlIGNoYW5nZXMgdmlhIHN0b3JhZ2UgZXZlbnQgbGlzdGVuZXIuXHJcbiAgICAgICAgICAgIC8vIFJlbW92ZSBwb2xsaW5nIGxpc3RlbmVyIHRvIHByZXZlbnQgcG9zc2libGUgZXZlbnQgZHVwbGljYXRpb24uXHJcbiAgICAgICAgICAgIHRoaXMuc3RvcFBvbGxpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gU2FmYXJpIGVtYmVkZGVkIGlmcmFtZS4gU3RvcmFnZSBldmVudCB3aWxsIHRyaWdnZXIgd2l0aCB0aGUgZGVsdGFcclxuICAgICAgICAvLyBjaGFuZ2VzIGJ1dCBubyBjaGFuZ2VzIHdpbGwgYmUgYXBwbGllZCB0byB0aGUgaWZyYW1lIGxvY2FsU3RvcmFnZS5cclxuICAgICAgICBpZiAodGhpcy5zYWZhcmlMb2NhbFN0b3JhZ2VOb3RTeW5jZWQpIHtcclxuICAgICAgICAgICAgLy8gR2V0IGN1cnJlbnQgaWZyYW1lIHBhZ2UgdmFsdWUuXHJcbiAgICAgICAgICAgIGNvbnN0IHN0b3JlZFZhbHVlID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0oa2V5KTtcclxuICAgICAgICAgICAgLy8gVmFsdWUgbm90IHN5bmNocm9uaXplZCwgc3luY2hyb25pemUgbWFudWFsbHkuXHJcbiAgICAgICAgICAgIGlmIChldmVudC5uZXdWYWx1ZSAhPT0gc3RvcmVkVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChldmVudC5uZXdWYWx1ZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFZhbHVlIGNoYW5nZWQgZnJvbSBjdXJyZW50IHZhbHVlLlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RvcmFnZS5zZXRJdGVtKGtleSwgZXZlbnQubmV3VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQ3VycmVudCB2YWx1ZSBkZWxldGVkLlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5sb2NhbENhY2hlW2tleV0gPT09IGV2ZW50Lm5ld1ZhbHVlICYmICFwb2xsKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBBbHJlYWR5IGRldGVjdGVkIGFuZCBwcm9jZXNzZWQsIGRvIG5vdCB0cmlnZ2VyIGxpc3RlbmVycyBhZ2Fpbi5cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB0cmlnZ2VyTGlzdGVuZXJzID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBLZWVwIGxvY2FsIG1hcCB1cCB0byBkYXRlIGluIGNhc2Ugc3RvcmFnZSBldmVudCBpcyB0cmlnZ2VyZWQgYmVmb3JlXHJcbiAgICAgICAgICAgIC8vIHBvbGwuXHJcbiAgICAgICAgICAgIGNvbnN0IHN0b3JlZFZhbHVlID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0oa2V5KTtcclxuICAgICAgICAgICAgaWYgKCFwb2xsICYmIHRoaXMubG9jYWxDYWNoZVtrZXldID09PSBzdG9yZWRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gUmVhbCBzdG9yYWdlIGV2ZW50IHdoaWNoIGhhcyBhbHJlYWR5IGJlZW4gZGV0ZWN0ZWQsIGRvIG5vdGhpbmcuXHJcbiAgICAgICAgICAgICAgICAvLyBUaGlzIHNlZW1zIHRvIHRyaWdnZXIgaW4gc29tZSBJRSBicm93c2VycyBmb3Igc29tZSByZWFzb24uXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5ub3RpZnlMaXN0ZW5lcnMoa2V5LCBzdG9yZWRWYWx1ZSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCBzdG9yZWRWYWx1ZSA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKGtleSk7XHJcbiAgICAgICAgaWYgKF9pc0lFMTAoKSAmJlxyXG4gICAgICAgICAgICBzdG9yZWRWYWx1ZSAhPT0gZXZlbnQubmV3VmFsdWUgJiZcclxuICAgICAgICAgICAgZXZlbnQubmV3VmFsdWUgIT09IGV2ZW50Lm9sZFZhbHVlKSB7XHJcbiAgICAgICAgICAgIC8vIElFIDEwIGhhcyB0aGlzIHdlaXJkIGJ1ZyB3aGVyZSBhIHN0b3JhZ2UgZXZlbnQgd291bGQgdHJpZ2dlciB3aXRoIHRoZVxyXG4gICAgICAgICAgICAvLyBjb3JyZWN0IGtleSwgb2xkVmFsdWUgYW5kIG5ld1ZhbHVlIGJ1dCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpIGRvZXNcclxuICAgICAgICAgICAgLy8gbm90IHlpZWxkIHRoZSB1cGRhdGVkIHZhbHVlIHVudGlsIGEgZmV3IG1pbGxpc2Vjb25kcy4gVGhpcyBlbnN1cmVzXHJcbiAgICAgICAgICAgIC8vIHRoaXMgcmVjb3ZlcnMgZnJvbSB0aGF0IHNpdHVhdGlvbi5cclxuICAgICAgICAgICAgc2V0VGltZW91dCh0cmlnZ2VyTGlzdGVuZXJzLCBJRTEwX0xPQ0FMX1NUT1JBR0VfU1lOQ19ERUxBWSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0cmlnZ2VyTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgbm90aWZ5TGlzdGVuZXJzKGtleSwgdmFsdWUpIHtcclxuICAgICAgICB0aGlzLmxvY2FsQ2FjaGVba2V5XSA9IHZhbHVlO1xyXG4gICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMubGlzdGVuZXJzW2tleV07XHJcbiAgICAgICAgaWYgKGxpc3RlbmVycykge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIEFycmF5LmZyb20obGlzdGVuZXJzKSkge1xyXG4gICAgICAgICAgICAgICAgbGlzdGVuZXIodmFsdWUgPyBKU09OLnBhcnNlKHZhbHVlKSA6IHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHN0YXJ0UG9sbGluZygpIHtcclxuICAgICAgICB0aGlzLnN0b3BQb2xsaW5nKCk7XHJcbiAgICAgICAgdGhpcy5wb2xsVGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZm9yQWxsQ2hhbmdlZEtleXMoKGtleSwgb2xkVmFsdWUsIG5ld1ZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uU3RvcmFnZUV2ZW50KG5ldyBTdG9yYWdlRXZlbnQoJ3N0b3JhZ2UnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5LFxyXG4gICAgICAgICAgICAgICAgICAgIG9sZFZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlXHJcbiAgICAgICAgICAgICAgICB9KSwgXHJcbiAgICAgICAgICAgICAgICAvKiBwb2xsICovIHRydWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LCBfUE9MTElOR19JTlRFUlZBTF9NUyQxKTtcclxuICAgIH1cclxuICAgIHN0b3BQb2xsaW5nKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnBvbGxUaW1lcikge1xyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMucG9sbFRpbWVyKTtcclxuICAgICAgICAgICAgdGhpcy5wb2xsVGltZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGF0dGFjaExpc3RlbmVyKCkge1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzdG9yYWdlJywgdGhpcy5ib3VuZEV2ZW50SGFuZGxlcik7XHJcbiAgICB9XHJcbiAgICBkZXRhY2hMaXN0ZW5lcigpIHtcclxuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3RvcmFnZScsIHRoaXMuYm91bmRFdmVudEhhbmRsZXIpO1xyXG4gICAgfVxyXG4gICAgX2FkZExpc3RlbmVyKGtleSwgbGlzdGVuZXIpIHtcclxuICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5saXN0ZW5lcnMpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAvLyBXaGV0aGVyIGJyb3dzZXIgY2FuIGRldGVjdCBzdG9yYWdlIGV2ZW50IHdoZW4gaXQgaGFkIGFscmVhZHkgYmVlbiBwdXNoZWQgdG8gdGhlIGJhY2tncm91bmQuXHJcbiAgICAgICAgICAgIC8vIFRoaXMgbWF5IGhhcHBlbiBpbiBzb21lIG1vYmlsZSBicm93c2Vycy4gQSBsb2NhbFN0b3JhZ2UgY2hhbmdlIGluIHRoZSBmb3JlZ3JvdW5kIHdpbmRvd1xyXG4gICAgICAgICAgICAvLyB3aWxsIG5vdCBiZSBkZXRlY3RlZCBpbiB0aGUgYmFja2dyb3VuZCB3aW5kb3cgdmlhIHRoZSBzdG9yYWdlIGV2ZW50LlxyXG4gICAgICAgICAgICAvLyBUaGlzIHdhcyBkZXRlY3RlZCBpbiBpT1MgNy54IG1vYmlsZSBicm93c2Vyc1xyXG4gICAgICAgICAgICBpZiAodGhpcy5mYWxsYmFja1RvUG9sbGluZykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydFBvbGxpbmcoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXR0YWNoTGlzdGVuZXIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMubGlzdGVuZXJzW2tleV0pIHtcclxuICAgICAgICAgICAgdGhpcy5saXN0ZW5lcnNba2V5XSA9IG5ldyBTZXQoKTtcclxuICAgICAgICAgICAgLy8gUG9wdWxhdGUgdGhlIGNhY2hlIHRvIGF2b2lkIHNwdXJpb3VzbHkgdHJpZ2dlcmluZyBvbiBmaXJzdCBwb2xsLlxyXG4gICAgICAgICAgICB0aGlzLmxvY2FsQ2FjaGVba2V5XSA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKGtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubGlzdGVuZXJzW2tleV0uYWRkKGxpc3RlbmVyKTtcclxuICAgIH1cclxuICAgIF9yZW1vdmVMaXN0ZW5lcihrZXksIGxpc3RlbmVyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubGlzdGVuZXJzW2tleV0pIHtcclxuICAgICAgICAgICAgdGhpcy5saXN0ZW5lcnNba2V5XS5kZWxldGUobGlzdGVuZXIpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5saXN0ZW5lcnNba2V5XS5zaXplID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5saXN0ZW5lcnNba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5saXN0ZW5lcnMpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmRldGFjaExpc3RlbmVyKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc3RvcFBvbGxpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBVcGRhdGUgbG9jYWwgY2FjaGUgb24gYmFzZSBvcGVyYXRpb25zOlxyXG4gICAgYXN5bmMgX3NldChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgYXdhaXQgc3VwZXIuX3NldChrZXksIHZhbHVlKTtcclxuICAgICAgICB0aGlzLmxvY2FsQ2FjaGVba2V5XSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9nZXQoa2V5KSB7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBhd2FpdCBzdXBlci5fZ2V0KGtleSk7XHJcbiAgICAgICAgdGhpcy5sb2NhbENhY2hlW2tleV0gPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX3JlbW92ZShrZXkpIHtcclxuICAgICAgICBhd2FpdCBzdXBlci5fcmVtb3ZlKGtleSk7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMubG9jYWxDYWNoZVtrZXldO1xyXG4gICAgfVxyXG59XHJcbkJyb3dzZXJMb2NhbFBlcnNpc3RlbmNlLnR5cGUgPSAnTE9DQUwnO1xyXG4vKipcclxuICogQW4gaW1wbGVtZW50YXRpb24gb2Yge0BsaW5rIFBlcnNpc3RlbmNlfSBvZiB0eXBlIGBMT0NBTGAgdXNpbmcgYGxvY2FsU3RvcmFnZWBcclxuICogZm9yIHRoZSB1bmRlcmx5aW5nIHN0b3JhZ2UuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGJyb3dzZXJMb2NhbFBlcnNpc3RlbmNlID0gQnJvd3NlckxvY2FsUGVyc2lzdGVuY2U7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIEJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2UgZXh0ZW5kcyBCcm93c2VyUGVyc2lzdGVuY2VDbGFzcyB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigoKSA9PiB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UsIFwiU0VTU0lPTlwiIC8qIFBlcnNpc3RlbmNlVHlwZS5TRVNTSU9OICovKTtcclxuICAgIH1cclxuICAgIF9hZGRMaXN0ZW5lcihfa2V5LCBfbGlzdGVuZXIpIHtcclxuICAgICAgICAvLyBMaXN0ZW5lcnMgYXJlIG5vdCBzdXBwb3J0ZWQgZm9yIHNlc3Npb24gc3RvcmFnZSBzaW5jZSBpdCBjYW5ub3QgYmUgc2hhcmVkIGFjcm9zcyB3aW5kb3dzXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgX3JlbW92ZUxpc3RlbmVyKF9rZXksIF9saXN0ZW5lcikge1xyXG4gICAgICAgIC8vIExpc3RlbmVycyBhcmUgbm90IHN1cHBvcnRlZCBmb3Igc2Vzc2lvbiBzdG9yYWdlIHNpbmNlIGl0IGNhbm5vdCBiZSBzaGFyZWQgYWNyb3NzIHdpbmRvd3NcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbn1cclxuQnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZS50eXBlID0gJ1NFU1NJT04nO1xyXG4vKipcclxuICogQW4gaW1wbGVtZW50YXRpb24gb2Yge0BsaW5rIFBlcnNpc3RlbmNlfSBvZiBgU0VTU0lPTmAgdXNpbmcgYHNlc3Npb25TdG9yYWdlYFxyXG4gKiBmb3IgdGhlIHVuZGVybHlpbmcgc3RvcmFnZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgYnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZSA9IEJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2U7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBTaGltIGZvciBQcm9taXNlLmFsbFNldHRsZWQsIG5vdGUgdGhlIHNsaWdodGx5IGRpZmZlcmVudCBmb3JtYXQgb2YgYGZ1bGZpbGxlZGAgdnMgYHN0YXR1c2AuXHJcbiAqXHJcbiAqIEBwYXJhbSBwcm9taXNlcyAtIEFycmF5IG9mIHByb21pc2VzIHRvIHdhaXQgb24uXHJcbiAqL1xyXG5mdW5jdGlvbiBfYWxsU2V0dGxlZChwcm9taXNlcykge1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzLm1hcChhc3luYyAocHJvbWlzZSkgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgcHJvbWlzZTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGZ1bGZpbGxlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHZhbHVlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChyZWFzb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGZ1bGZpbGxlZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICByZWFzb25cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEludGVyZmFjZSBjbGFzcyBmb3IgcmVjZWl2aW5nIG1lc3NhZ2VzLlxyXG4gKlxyXG4gKi9cclxuY2xhc3MgUmVjZWl2ZXIge1xyXG4gICAgY29uc3RydWN0b3IoZXZlbnRUYXJnZXQpIHtcclxuICAgICAgICB0aGlzLmV2ZW50VGFyZ2V0ID0gZXZlbnRUYXJnZXQ7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVyc01hcCA9IHt9O1xyXG4gICAgICAgIHRoaXMuYm91bmRFdmVudEhhbmRsZXIgPSB0aGlzLmhhbmRsZUV2ZW50LmJpbmQodGhpcyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIE9idGFpbiBhbiBpbnN0YW5jZSBvZiBhIFJlY2VpdmVyIGZvciBhIGdpdmVuIGV2ZW50IHRhcmdldCwgaWYgbm9uZSBleGlzdHMgaXQgd2lsbCBiZSBjcmVhdGVkLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBldmVudFRhcmdldCAtIEFuIGV2ZW50IHRhcmdldCAoc3VjaCBhcyB3aW5kb3cgb3Igc2VsZikgdGhyb3VnaCB3aGljaCB0aGUgdW5kZXJseWluZ1xyXG4gICAgICogbWVzc2FnZXMgd2lsbCBiZSByZWNlaXZlZC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIF9nZXRJbnN0YW5jZShldmVudFRhcmdldCkge1xyXG4gICAgICAgIC8vIFRoZSByZXN1bHRzIGFyZSBzdG9yZWQgaW4gYW4gYXJyYXkgc2luY2Ugb2JqZWN0cyBjYW4ndCBiZSBrZXlzIGZvciBvdGhlclxyXG4gICAgICAgIC8vIG9iamVjdHMuIEluIGFkZGl0aW9uLCBzZXR0aW5nIGEgdW5pcXVlIHByb3BlcnR5IG9uIGFuIGV2ZW50IHRhcmdldCBhcyBhXHJcbiAgICAgICAgLy8gaGFzaCBtYXAga2V5IG1heSBub3QgYmUgYWxsb3dlZCBkdWUgdG8gQ09SUyByZXN0cmljdGlvbnMuXHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdJbnN0YW5jZSA9IHRoaXMucmVjZWl2ZXJzLmZpbmQocmVjZWl2ZXIgPT4gcmVjZWl2ZXIuaXNMaXN0ZW5pbmd0byhldmVudFRhcmdldCkpO1xyXG4gICAgICAgIGlmIChleGlzdGluZ0luc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBleGlzdGluZ0luc3RhbmNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBuZXdJbnN0YW5jZSA9IG5ldyBSZWNlaXZlcihldmVudFRhcmdldCk7XHJcbiAgICAgICAgdGhpcy5yZWNlaXZlcnMucHVzaChuZXdJbnN0YW5jZSk7XHJcbiAgICAgICAgcmV0dXJuIG5ld0luc3RhbmNlO1xyXG4gICAgfVxyXG4gICAgaXNMaXN0ZW5pbmd0byhldmVudFRhcmdldCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmV2ZW50VGFyZ2V0ID09PSBldmVudFRhcmdldDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogRmFucyBvdXQgYSBNZXNzYWdlRXZlbnQgdG8gdGhlIGFwcHJvcHJpYXRlIGxpc3RlbmVycy5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICogU2VuZHMgYW4ge0BsaW5rIFN0YXR1cy5BQ0t9IHVwb24gcmVjZWlwdCBhbmQgYSB7QGxpbmsgU3RhdHVzLkRPTkV9IG9uY2UgYWxsIGhhbmRsZXJzIGhhdmVcclxuICAgICAqIGZpbmlzaGVkIHByb2Nlc3NpbmcuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGV2ZW50IC0gVGhlIE1lc3NhZ2VFdmVudC5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGhhbmRsZUV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZUV2ZW50ID0gZXZlbnQ7XHJcbiAgICAgICAgY29uc3QgeyBldmVudElkLCBldmVudFR5cGUsIGRhdGEgfSA9IG1lc3NhZ2VFdmVudC5kYXRhO1xyXG4gICAgICAgIGNvbnN0IGhhbmRsZXJzID0gdGhpcy5oYW5kbGVyc01hcFtldmVudFR5cGVdO1xyXG4gICAgICAgIGlmICghKGhhbmRsZXJzID09PSBudWxsIHx8IGhhbmRsZXJzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBoYW5kbGVycy5zaXplKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1lc3NhZ2VFdmVudC5wb3J0c1swXS5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgIHN0YXR1czogXCJhY2tcIiAvKiBfU3RhdHVzLkFDSyAqLyxcclxuICAgICAgICAgICAgZXZlbnRJZCxcclxuICAgICAgICAgICAgZXZlbnRUeXBlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZXMgPSBBcnJheS5mcm9tKGhhbmRsZXJzKS5tYXAoYXN5bmMgKGhhbmRsZXIpID0+IGhhbmRsZXIobWVzc2FnZUV2ZW50Lm9yaWdpbiwgZGF0YSkpO1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX2FsbFNldHRsZWQocHJvbWlzZXMpO1xyXG4gICAgICAgIG1lc3NhZ2VFdmVudC5wb3J0c1swXS5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgIHN0YXR1czogXCJkb25lXCIgLyogX1N0YXR1cy5ET05FICovLFxyXG4gICAgICAgICAgICBldmVudElkLFxyXG4gICAgICAgICAgICBldmVudFR5cGUsXHJcbiAgICAgICAgICAgIHJlc3BvbnNlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFN1YnNjcmliZSBhbiBldmVudCBoYW5kbGVyIGZvciBhIHBhcnRpY3VsYXIgZXZlbnQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGV2ZW50VHlwZSAtIEV2ZW50IG5hbWUgdG8gc3Vic2NyaWJlIHRvLlxyXG4gICAgICogQHBhcmFtIGV2ZW50SGFuZGxlciAtIFRoZSBldmVudCBoYW5kbGVyIHdoaWNoIHNob3VsZCByZWNlaXZlIHRoZSBldmVudHMuXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBfc3Vic2NyaWJlKGV2ZW50VHlwZSwgZXZlbnRIYW5kbGVyKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMuaGFuZGxlcnNNYXApLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50VGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB0aGlzLmJvdW5kRXZlbnRIYW5kbGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLmhhbmRsZXJzTWFwW2V2ZW50VHlwZV0pIHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVyc01hcFtldmVudFR5cGVdID0gbmV3IFNldCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmhhbmRsZXJzTWFwW2V2ZW50VHlwZV0uYWRkKGV2ZW50SGFuZGxlcik7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVuc3Vic2NyaWJlIGFuIGV2ZW50IGhhbmRsZXIgZnJvbSBhIHBhcnRpY3VsYXIgZXZlbnQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGV2ZW50VHlwZSAtIEV2ZW50IG5hbWUgdG8gdW5zdWJzY3JpYmUgZnJvbS5cclxuICAgICAqIEBwYXJhbSBldmVudEhhbmRsZXIgLSBPcHRpbm9hbCBldmVudCBoYW5kbGVyLCBpZiBub25lIHByb3ZpZGVkLCB1bnN1YnNjcmliZSBhbGwgaGFuZGxlcnMgb24gdGhpcyBldmVudC5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIF91bnN1YnNjcmliZShldmVudFR5cGUsIGV2ZW50SGFuZGxlcikge1xyXG4gICAgICAgIGlmICh0aGlzLmhhbmRsZXJzTWFwW2V2ZW50VHlwZV0gJiYgZXZlbnRIYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlcnNNYXBbZXZlbnRUeXBlXS5kZWxldGUoZXZlbnRIYW5kbGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFldmVudEhhbmRsZXIgfHwgdGhpcy5oYW5kbGVyc01hcFtldmVudFR5cGVdLnNpemUgPT09IDApIHtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMuaGFuZGxlcnNNYXBbZXZlbnRUeXBlXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMuaGFuZGxlcnNNYXApLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50VGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB0aGlzLmJvdW5kRXZlbnRIYW5kbGVyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuUmVjZWl2ZXIucmVjZWl2ZXJzID0gW107XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIF9nZW5lcmF0ZUV2ZW50SWQocHJlZml4ID0gJycsIGRpZ2l0cyA9IDEwKSB7XHJcbiAgICBsZXQgcmFuZG9tID0gJyc7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRpZ2l0czsgaSsrKSB7XHJcbiAgICAgICAgcmFuZG9tICs9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKTtcclxuICAgIH1cclxuICAgIHJldHVybiBwcmVmaXggKyByYW5kb207XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEludGVyZmFjZSBmb3Igc2VuZGluZyBtZXNzYWdlcyBhbmQgd2FpdGluZyBmb3IgYSBjb21wbGV0aW9uIHJlc3BvbnNlLlxyXG4gKlxyXG4gKi9cclxuY2xhc3MgU2VuZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKHRhcmdldCkge1xyXG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xyXG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSBuZXcgU2V0KCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVuc3Vic2NyaWJlIHRoZSBoYW5kbGVyIGFuZCByZW1vdmUgaXQgZnJvbSBvdXIgdHJhY2tpbmcgU2V0LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBoYW5kbGVyIC0gVGhlIGhhbmRsZXIgdG8gdW5zdWJzY3JpYmUuXHJcbiAgICAgKi9cclxuICAgIHJlbW92ZU1lc3NhZ2VIYW5kbGVyKGhhbmRsZXIpIHtcclxuICAgICAgICBpZiAoaGFuZGxlci5tZXNzYWdlQ2hhbm5lbCkge1xyXG4gICAgICAgICAgICBoYW5kbGVyLm1lc3NhZ2VDaGFubmVsLnBvcnQxLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBoYW5kbGVyLm9uTWVzc2FnZSk7XHJcbiAgICAgICAgICAgIGhhbmRsZXIubWVzc2FnZUNoYW5uZWwucG9ydDEuY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5oYW5kbGVycy5kZWxldGUoaGFuZGxlcik7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFNlbmQgYSBtZXNzYWdlIHRvIHRoZSBSZWNlaXZlciBsb2NhdGVkIGF0IHtAbGluayB0YXJnZXR9LlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKiBXZSdsbCBmaXJzdCB3YWl0IGEgYml0IGZvciBhbiBBQ0sgLCBpZiB3ZSBnZXQgb25lIHdlIHdpbGwgd2FpdCBzaWduaWZpY2FudGx5IGxvbmdlciB1bnRpbCB0aGVcclxuICAgICAqIHJlY2VpdmVyIGhhcyBoYWQgYSBjaGFuY2UgdG8gZnVsbHkgcHJvY2VzcyB0aGUgZXZlbnQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGV2ZW50VHlwZSAtIFR5cGUgb2YgZXZlbnQgdG8gc2VuZC5cclxuICAgICAqIEBwYXJhbSBkYXRhIC0gVGhlIHBheWxvYWQgb2YgdGhlIGV2ZW50LlxyXG4gICAgICogQHBhcmFtIHRpbWVvdXQgLSBUaW1lb3V0IGZvciB3YWl0aW5nIG9uIGFuIEFDSyBmcm9tIHRoZSByZWNlaXZlci5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBBbiBhcnJheSBvZiBzZXR0bGVkIHByb21pc2VzIGZyb20gYWxsIHRoZSBoYW5kbGVycyB0aGF0IHdlcmUgbGlzdGVuaW5nIG9uIHRoZSByZWNlaXZlci5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgX3NlbmQoZXZlbnRUeXBlLCBkYXRhLCB0aW1lb3V0ID0gNTAgLyogX1RpbWVvdXREdXJhdGlvbi5BQ0sgKi8pIHtcclxuICAgICAgICBjb25zdCBtZXNzYWdlQ2hhbm5lbCA9IHR5cGVvZiBNZXNzYWdlQ2hhbm5lbCAhPT0gJ3VuZGVmaW5lZCcgPyBuZXcgTWVzc2FnZUNoYW5uZWwoKSA6IG51bGw7XHJcbiAgICAgICAgaWYgKCFtZXNzYWdlQ2hhbm5lbCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjb25uZWN0aW9uX3VuYXZhaWxhYmxlXCIgLyogX01lc3NhZ2VFcnJvci5DT05ORUNUSU9OX1VOQVZBSUxBQkxFICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gTm9kZSB0aW1lcnMgYW5kIGJyb3dzZXIgdGltZXJzIHJldHVybiBmdW5kYW1lbnRhbGx5IGRpZmZlcmVudCB0eXBlcy5cclxuICAgICAgICAvLyBXZSBkb24ndCBhY3R1YWxseSBjYXJlIHdoYXQgdGhlIHZhbHVlIGlzIGJ1dCBUUyB3b24ndCBhY2NlcHQgdW5rbm93biBhbmRcclxuICAgICAgICAvLyB3ZSBjYW4ndCBjYXN0IHByb3Blcmx5IGluIGJvdGggZW52aXJvbm1lbnRzLlxyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgbGV0IGNvbXBsZXRpb25UaW1lcjtcclxuICAgICAgICBsZXQgaGFuZGxlcjtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBldmVudElkID0gX2dlbmVyYXRlRXZlbnRJZCgnJywgMjApO1xyXG4gICAgICAgICAgICBtZXNzYWdlQ2hhbm5lbC5wb3J0MS5zdGFydCgpO1xyXG4gICAgICAgICAgICBjb25zdCBhY2tUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcInVuc3VwcG9ydGVkX2V2ZW50XCIgLyogX01lc3NhZ2VFcnJvci5VTlNVUFBPUlRFRF9FVkVOVCAqLykpO1xyXG4gICAgICAgICAgICB9LCB0aW1lb3V0KTtcclxuICAgICAgICAgICAgaGFuZGxlciA9IHtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VDaGFubmVsLFxyXG4gICAgICAgICAgICAgICAgb25NZXNzYWdlKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZUV2ZW50ID0gZXZlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2VFdmVudC5kYXRhLmV2ZW50SWQgIT09IGV2ZW50SWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1lc3NhZ2VFdmVudC5kYXRhLnN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYWNrXCIgLyogX1N0YXR1cy5BQ0sgKi86XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgcmVjZWl2ZXIgc2hvdWxkIEFDSyBmaXJzdC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChhY2tUaW1lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0aW9uVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKFwidGltZW91dFwiIC8qIF9NZXNzYWdlRXJyb3IuVElNRU9VVCAqLykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMzAwMCAvKiBfVGltZW91dER1cmF0aW9uLkNPTVBMRVRJT04gKi8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJkb25lXCIgLyogX1N0YXR1cy5ET05FICovOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT25jZSB0aGUgcmVjZWl2ZXIncyBoYW5kbGVycyBhcmUgZmluaXNoZWQgd2Ugd2lsbCBnZXQgdGhlIHJlc3VsdHMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoY29tcGxldGlvblRpbWVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUobWVzc2FnZUV2ZW50LmRhdGEucmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoYWNrVGltZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGNvbXBsZXRpb25UaW1lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKFwiaW52YWxpZF9yZXNwb25zZVwiIC8qIF9NZXNzYWdlRXJyb3IuSU5WQUxJRF9SRVNQT05TRSAqLykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZXJzLmFkZChoYW5kbGVyKTtcclxuICAgICAgICAgICAgbWVzc2FnZUNoYW5uZWwucG9ydDEuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGhhbmRsZXIub25NZXNzYWdlKTtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXQucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgICAgICAgZXZlbnRUeXBlLFxyXG4gICAgICAgICAgICAgICAgZXZlbnRJZCxcclxuICAgICAgICAgICAgICAgIGRhdGFcclxuICAgICAgICAgICAgfSwgW21lc3NhZ2VDaGFubmVsLnBvcnQyXSk7XHJcbiAgICAgICAgfSkuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChoYW5kbGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZU1lc3NhZ2VIYW5kbGVyKGhhbmRsZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIExhenkgYWNjZXNzb3IgZm9yIHdpbmRvdywgc2luY2UgdGhlIGNvbXBhdCBsYXllciB3b24ndCB0cmVlIHNoYWtlIHRoaXMgb3V0LFxyXG4gKiB3ZSBuZWVkIHRvIG1ha2Ugc3VyZSBub3QgdG8gbWVzcyB3aXRoIHdpbmRvdyB1bmxlc3Mgd2UgaGF2ZSB0b1xyXG4gKi9cclxuZnVuY3Rpb24gX3dpbmRvdygpIHtcclxuICAgIHJldHVybiB3aW5kb3c7XHJcbn1cclxuZnVuY3Rpb24gX3NldFdpbmRvd0xvY2F0aW9uKHVybCkge1xyXG4gICAgX3dpbmRvdygpLmxvY2F0aW9uLmhyZWYgPSB1cmw7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIF9pc1dvcmtlcigpIHtcclxuICAgIHJldHVybiAodHlwZW9mIF93aW5kb3coKVsnV29ya2VyR2xvYmFsU2NvcGUnXSAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICB0eXBlb2YgX3dpbmRvdygpWydpbXBvcnRTY3JpcHRzJ10gPT09ICdmdW5jdGlvbicpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9nZXRBY3RpdmVTZXJ2aWNlV29ya2VyKCkge1xyXG4gICAgaWYgKCEobmF2aWdhdG9yID09PSBudWxsIHx8IG5hdmlnYXRvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIpKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlZ2lzdHJhdGlvbiA9IGF3YWl0IG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlYWR5O1xyXG4gICAgICAgIHJldHVybiByZWdpc3RyYXRpb24uYWN0aXZlO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gX2dldFNlcnZpY2VXb3JrZXJDb250cm9sbGVyKCkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgcmV0dXJuICgoX2EgPSBuYXZpZ2F0b3IgPT09IG51bGwgfHwgbmF2aWdhdG9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNvbnRyb2xsZXIpIHx8IG51bGw7XHJcbn1cclxuZnVuY3Rpb24gX2dldFdvcmtlckdsb2JhbFNjb3BlKCkge1xyXG4gICAgcmV0dXJuIF9pc1dvcmtlcigpID8gc2VsZiA6IG51bGw7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgREJfTkFNRSA9ICdmaXJlYmFzZUxvY2FsU3RvcmFnZURiJztcclxuY29uc3QgREJfVkVSU0lPTiA9IDE7XHJcbmNvbnN0IERCX09CSkVDVFNUT1JFX05BTUUgPSAnZmlyZWJhc2VMb2NhbFN0b3JhZ2UnO1xyXG5jb25zdCBEQl9EQVRBX0tFWVBBVEggPSAnZmJhc2Vfa2V5JztcclxuLyoqXHJcbiAqIFByb21pc2Ugd3JhcHBlciBmb3IgSURCUmVxdWVzdFxyXG4gKlxyXG4gKiBVbmZvcnR1bmF0ZWx5IHdlIGNhbid0IGNsZWFubHkgZXh0ZW5kIFByb21pc2U8VD4gc2luY2UgcHJvbWlzZXMgYXJlIG5vdCBjYWxsYWJsZSBpbiBFUzZcclxuICpcclxuICovXHJcbmNsYXNzIERCUHJvbWlzZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihyZXF1ZXN0KSB7XHJcbiAgICAgICAgdGhpcy5yZXF1ZXN0ID0gcmVxdWVzdDtcclxuICAgIH1cclxuICAgIHRvUHJvbWlzZSgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignc3VjY2VzcycsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUodGhpcy5yZXF1ZXN0LnJlc3VsdCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QodGhpcy5yZXF1ZXN0LmVycm9yKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZ2V0T2JqZWN0U3RvcmUoZGIsIGlzUmVhZFdyaXRlKSB7XHJcbiAgICByZXR1cm4gZGJcclxuICAgICAgICAudHJhbnNhY3Rpb24oW0RCX09CSkVDVFNUT1JFX05BTUVdLCBpc1JlYWRXcml0ZSA/ICdyZWFkd3JpdGUnIDogJ3JlYWRvbmx5JylcclxuICAgICAgICAub2JqZWN0U3RvcmUoREJfT0JKRUNUU1RPUkVfTkFNRSk7XHJcbn1cclxuZnVuY3Rpb24gX2RlbGV0ZURhdGFiYXNlKCkge1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5kZWxldGVEYXRhYmFzZShEQl9OQU1FKTtcclxuICAgIHJldHVybiBuZXcgREJQcm9taXNlKHJlcXVlc3QpLnRvUHJvbWlzZSgpO1xyXG59XHJcbmZ1bmN0aW9uIF9vcGVuRGF0YWJhc2UoKSB7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLm9wZW4oREJfTkFNRSwgREJfVkVSU0lPTik7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJlamVjdChyZXF1ZXN0LmVycm9yKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3VwZ3JhZGVuZWVkZWQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRiID0gcmVxdWVzdC5yZXN1bHQ7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBkYi5jcmVhdGVPYmplY3RTdG9yZShEQl9PQkpFQ1RTVE9SRV9OQU1FLCB7IGtleVBhdGg6IERCX0RBVEFfS0VZUEFUSCB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdzdWNjZXNzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBkYiA9IHJlcXVlc3QucmVzdWx0O1xyXG4gICAgICAgICAgICAvLyBTdHJhbmdlIGJ1ZyB0aGF0IG9jY3VycyBpbiBGaXJlZm94IHdoZW4gbXVsdGlwbGUgdGFicyBhcmUgb3BlbmVkIGF0IHRoZVxyXG4gICAgICAgICAgICAvLyBzYW1lIHRpbWUuIFRoZSBvbmx5IHdheSB0byByZWNvdmVyIHNlZW1zIHRvIGJlIGRlbGV0aW5nIHRoZSBkYXRhYmFzZVxyXG4gICAgICAgICAgICAvLyBhbmQgcmUtaW5pdGlhbGl6aW5nIGl0LlxyXG4gICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtanMtc2RrL2lzc3Vlcy82MzRcclxuICAgICAgICAgICAgaWYgKCFkYi5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKERCX09CSkVDVFNUT1JFX05BTUUpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBOZWVkIHRvIGNsb3NlIHRoZSBkYXRhYmFzZSBvciBlbHNlIHlvdSBnZXQgYSBgYmxvY2tlZGAgZXZlbnRcclxuICAgICAgICAgICAgICAgIGRiLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBfZGVsZXRlRGF0YWJhc2UoKTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoYXdhaXQgX29wZW5EYXRhYmFzZSgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoZGIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfcHV0T2JqZWN0KGRiLCBrZXksIHZhbHVlKSB7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0gZ2V0T2JqZWN0U3RvcmUoZGIsIHRydWUpLnB1dCh7XHJcbiAgICAgICAgW0RCX0RBVEFfS0VZUEFUSF06IGtleSxcclxuICAgICAgICB2YWx1ZVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gbmV3IERCUHJvbWlzZShyZXF1ZXN0KS50b1Byb21pc2UoKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBnZXRPYmplY3QoZGIsIGtleSkge1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IGdldE9iamVjdFN0b3JlKGRiLCBmYWxzZSkuZ2V0KGtleSk7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgbmV3IERCUHJvbWlzZShyZXF1ZXN0KS50b1Byb21pc2UoKTtcclxuICAgIHJldHVybiBkYXRhID09PSB1bmRlZmluZWQgPyBudWxsIDogZGF0YS52YWx1ZTtcclxufVxyXG5mdW5jdGlvbiBfZGVsZXRlT2JqZWN0KGRiLCBrZXkpIHtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSBnZXRPYmplY3RTdG9yZShkYiwgdHJ1ZSkuZGVsZXRlKGtleSk7XHJcbiAgICByZXR1cm4gbmV3IERCUHJvbWlzZShyZXF1ZXN0KS50b1Byb21pc2UoKTtcclxufVxyXG5jb25zdCBfUE9MTElOR19JTlRFUlZBTF9NUyA9IDgwMDtcclxuY29uc3QgX1RSQU5TQUNUSU9OX1JFVFJZX0NPVU5UID0gMztcclxuY2xhc3MgSW5kZXhlZERCTG9jYWxQZXJzaXN0ZW5jZSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnR5cGUgPSBcIkxPQ0FMXCIgLyogUGVyc2lzdGVuY2VUeXBlLkxPQ0FMICovO1xyXG4gICAgICAgIHRoaXMuX3Nob3VsZEFsbG93TWlncmF0aW9uID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmxpc3RlbmVycyA9IHt9O1xyXG4gICAgICAgIHRoaXMubG9jYWxDYWNoZSA9IHt9O1xyXG4gICAgICAgIC8vIHNldFRpbWVvdXQgcmV0dXJuIHZhbHVlIGlzIHBsYXRmb3JtIHNwZWNpZmljXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICB0aGlzLnBvbGxUaW1lciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nV3JpdGVzID0gMDtcclxuICAgICAgICB0aGlzLnJlY2VpdmVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLnNlbmRlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlV29ya2VyUmVjZWl2ZXJBdmFpbGFibGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmFjdGl2ZVNlcnZpY2VXb3JrZXIgPSBudWxsO1xyXG4gICAgICAgIC8vIEZpcmUgJiBmb3JnZXQgdGhlIHNlcnZpY2Ugd29ya2VyIHJlZ2lzdHJhdGlvbiBhcyBpdCBtYXkgbmV2ZXIgcmVzb2x2ZVxyXG4gICAgICAgIHRoaXMuX3dvcmtlckluaXRpYWxpemF0aW9uUHJvbWlzZSA9XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZVNlcnZpY2VXb3JrZXJNZXNzYWdpbmcoKS50aGVuKCgpID0+IHsgfSwgKCkgPT4geyB9KTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9vcGVuRGIoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZGIgPSBhd2FpdCBfb3BlbkRhdGFiYXNlKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGI7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfd2l0aFJldHJpZXMob3ApIHtcclxuICAgICAgICBsZXQgbnVtQXR0ZW1wdHMgPSAwO1xyXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYiA9IGF3YWl0IHRoaXMuX29wZW5EYigpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IG9wKGRiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG51bUF0dGVtcHRzKysgPiBfVFJBTlNBQ1RJT05fUkVUUllfQ09VTlQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRiLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYiA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IGNvbnNpZGVyIGFkZGluZyBleHBvbmVudGlhbCBiYWNrb2ZmXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEluZGV4ZWREQiBldmVudHMgZG8gbm90IHByb3BhZ2F0ZSBmcm9tIHRoZSBtYWluIHdpbmRvdyB0byB0aGUgd29ya2VyIGNvbnRleHQuICBXZSByZWx5IG9uIGFcclxuICAgICAqIHBvc3RNZXNzYWdlIGludGVyZmFjZSB0byBzZW5kIHRoZXNlIGV2ZW50cyB0byB0aGUgd29ya2VyIG91cnNlbHZlcy5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgaW5pdGlhbGl6ZVNlcnZpY2VXb3JrZXJNZXNzYWdpbmcoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9pc1dvcmtlcigpID8gdGhpcy5pbml0aWFsaXplUmVjZWl2ZXIoKSA6IHRoaXMuaW5pdGlhbGl6ZVNlbmRlcigpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBcyB0aGUgd29ya2VyIHdlIHNob3VsZCBsaXN0ZW4gdG8gZXZlbnRzIGZyb20gdGhlIG1haW4gd2luZG93LlxyXG4gICAgICovXHJcbiAgICBhc3luYyBpbml0aWFsaXplUmVjZWl2ZXIoKSB7XHJcbiAgICAgICAgdGhpcy5yZWNlaXZlciA9IFJlY2VpdmVyLl9nZXRJbnN0YW5jZShfZ2V0V29ya2VyR2xvYmFsU2NvcGUoKSk7XHJcbiAgICAgICAgLy8gUmVmcmVzaCBmcm9tIHBlcnNpc3RlbmNlIGlmIHdlIHJlY2VpdmUgYSBLZXlDaGFuZ2VkIG1lc3NhZ2UuXHJcbiAgICAgICAgdGhpcy5yZWNlaXZlci5fc3Vic2NyaWJlKFwia2V5Q2hhbmdlZFwiIC8qIF9FdmVudFR5cGUuS0VZX0NIQU5HRUQgKi8sIGFzeW5jIChfb3JpZ2luLCBkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGtleXMgPSBhd2FpdCB0aGlzLl9wb2xsKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBrZXlQcm9jZXNzZWQ6IGtleXMuaW5jbHVkZXMoZGF0YS5rZXkpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gTGV0IHRoZSBzZW5kZXIga25vdyB0aGF0IHdlIGFyZSBsaXN0ZW5pbmcgc28gdGhleSBnaXZlIHVzIG1vcmUgdGltZW91dC5cclxuICAgICAgICB0aGlzLnJlY2VpdmVyLl9zdWJzY3JpYmUoXCJwaW5nXCIgLyogX0V2ZW50VHlwZS5QSU5HICovLCBhc3luYyAoX29yaWdpbiwgX2RhdGEpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIFtcImtleUNoYW5nZWRcIiAvKiBfRXZlbnRUeXBlLktFWV9DSEFOR0VEICovXTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQXMgdGhlIG1haW4gd2luZG93LCB3ZSBzaG91bGQgbGV0IHRoZSB3b3JrZXIga25vdyB3aGVuIGtleXMgY2hhbmdlIChzZXQgYW5kIHJlbW92ZSkuXHJcbiAgICAgKlxyXG4gICAgICogQHJlbWFya3NcclxuICAgICAqIHtAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvU2VydmljZVdvcmtlckNvbnRhaW5lci9yZWFkeSB8IFNlcnZpY2VXb3JrZXJDb250YWluZXIucmVhZHl9XHJcbiAgICAgKiBtYXkgbm90IHJlc29sdmUuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGluaXRpYWxpemVTZW5kZXIoKSB7XHJcbiAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICAvLyBDaGVjayB0byBzZWUgaWYgdGhlcmUncyBhbiBhY3RpdmUgc2VydmljZSB3b3JrZXIuXHJcbiAgICAgICAgdGhpcy5hY3RpdmVTZXJ2aWNlV29ya2VyID0gYXdhaXQgX2dldEFjdGl2ZVNlcnZpY2VXb3JrZXIoKTtcclxuICAgICAgICBpZiAoIXRoaXMuYWN0aXZlU2VydmljZVdvcmtlcikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2VuZGVyID0gbmV3IFNlbmRlcih0aGlzLmFjdGl2ZVNlcnZpY2VXb3JrZXIpO1xyXG4gICAgICAgIC8vIFBpbmcgdGhlIHNlcnZpY2Ugd29ya2VyIHRvIGNoZWNrIHdoYXQgZXZlbnRzIHRoZXkgY2FuIGhhbmRsZS5cclxuICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgdGhpcy5zZW5kZXIuX3NlbmQoXCJwaW5nXCIgLyogX0V2ZW50VHlwZS5QSU5HICovLCB7fSwgODAwIC8qIF9UaW1lb3V0RHVyYXRpb24uTE9OR19BQ0sgKi8pO1xyXG4gICAgICAgIGlmICghcmVzdWx0cykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgoKF9hID0gcmVzdWx0c1swXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZ1bGZpbGxlZCkgJiZcclxuICAgICAgICAgICAgKChfYiA9IHJlc3VsdHNbMF0pID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi52YWx1ZS5pbmNsdWRlcyhcImtleUNoYW5nZWRcIiAvKiBfRXZlbnRUeXBlLktFWV9DSEFOR0VEICovKSkpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlV29ya2VyUmVjZWl2ZXJBdmFpbGFibGUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogTGV0IHRoZSB3b3JrZXIga25vdyBhYm91dCBhIGNoYW5nZWQga2V5LCB0aGUgZXhhY3Qga2V5IGRvZXNuJ3QgdGVjaG5pY2FsbHkgbWF0dGVyIHNpbmNlIHRoZVxyXG4gICAgICogd29ya2VyIHdpbGwganVzdCB0cmlnZ2VyIGEgZnVsbCBzeW5jIGFueXdheS5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICogRm9yIG5vdywgd2Ugb25seSBzdXBwb3J0IG9uZSBzZXJ2aWNlIHdvcmtlciBwZXIgcGFnZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ga2V5IC0gU3RvcmFnZSBrZXkgd2hpY2ggY2hhbmdlZC5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgbm90aWZ5U2VydmljZVdvcmtlcihrZXkpIHtcclxuICAgICAgICBpZiAoIXRoaXMuc2VuZGVyIHx8XHJcbiAgICAgICAgICAgICF0aGlzLmFjdGl2ZVNlcnZpY2VXb3JrZXIgfHxcclxuICAgICAgICAgICAgX2dldFNlcnZpY2VXb3JrZXJDb250cm9sbGVyKCkgIT09IHRoaXMuYWN0aXZlU2VydmljZVdvcmtlcikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2VuZGVyLl9zZW5kKFwia2V5Q2hhbmdlZFwiIC8qIF9FdmVudFR5cGUuS0VZX0NIQU5HRUQgKi8sIHsga2V5IH0sIFxyXG4gICAgICAgICAgICAvLyBVc2UgbG9uZyB0aW1lb3V0IGlmIHJlY2VpdmVyIGhhcyBwcmV2aW91c2x5IHJlc3BvbmRlZCB0byBhIHBpbmcgZnJvbSB1cy5cclxuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlV29ya2VyUmVjZWl2ZXJBdmFpbGFibGVcclxuICAgICAgICAgICAgICAgID8gODAwIC8qIF9UaW1lb3V0RHVyYXRpb24uTE9OR19BQ0sgKi9cclxuICAgICAgICAgICAgICAgIDogNTAgLyogX1RpbWVvdXREdXJhdGlvbi5BQ0sgKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgLy8gVGhpcyBpcyBhIGJlc3QgZWZmb3J0IGFwcHJvYWNoLiBJZ25vcmUgZXJyb3JzLlxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGFzeW5jIF9pc0F2YWlsYWJsZSgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAoIWluZGV4ZWREQikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGRiID0gYXdhaXQgX29wZW5EYXRhYmFzZSgpO1xyXG4gICAgICAgICAgICBhd2FpdCBfcHV0T2JqZWN0KGRiLCBTVE9SQUdFX0FWQUlMQUJMRV9LRVksICcxJyk7XHJcbiAgICAgICAgICAgIGF3YWl0IF9kZWxldGVPYmplY3QoZGIsIFNUT1JBR0VfQVZBSUxBQkxFX0tFWSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoX2EpIHsgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGFzeW5jIF93aXRoUGVuZGluZ1dyaXRlKHdyaXRlKSB7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nV3JpdGVzKys7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgd3JpdGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7XHJcbiAgICAgICAgICAgIHRoaXMucGVuZGluZ1dyaXRlcy0tO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGFzeW5jIF9zZXQoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl93aXRoUGVuZGluZ1dyaXRlKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fd2l0aFJldHJpZXMoKGRiKSA9PiBfcHV0T2JqZWN0KGRiLCBrZXksIHZhbHVlKSk7XHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxDYWNoZVtrZXldID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5vdGlmeVNlcnZpY2VXb3JrZXIoa2V5KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9nZXQoa2V5KSB7XHJcbiAgICAgICAgY29uc3Qgb2JqID0gKGF3YWl0IHRoaXMuX3dpdGhSZXRyaWVzKChkYikgPT4gZ2V0T2JqZWN0KGRiLCBrZXkpKSk7XHJcbiAgICAgICAgdGhpcy5sb2NhbENhY2hlW2tleV0gPSBvYmo7XHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuICAgIGFzeW5jIF9yZW1vdmUoa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3dpdGhQZW5kaW5nV3JpdGUoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl93aXRoUmV0cmllcygoZGIpID0+IF9kZWxldGVPYmplY3QoZGIsIGtleSkpO1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5sb2NhbENhY2hlW2tleV07XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5vdGlmeVNlcnZpY2VXb3JrZXIoa2V5KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9wb2xsKCkge1xyXG4gICAgICAgIC8vIFRPRE86IGNoZWNrIGlmIHdlIG5lZWQgdG8gZmFsbGJhY2sgaWYgZ2V0QWxsIGlzIG5vdCBzdXBwb3J0ZWRcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLl93aXRoUmV0cmllcygoZGIpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZ2V0QWxsUmVxdWVzdCA9IGdldE9iamVjdFN0b3JlKGRiLCBmYWxzZSkuZ2V0QWxsKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgREJQcm9taXNlKGdldEFsbFJlcXVlc3QpLnRvUHJvbWlzZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmICghcmVzdWx0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgd2UgaGF2ZSBwZW5kaW5nIHdyaXRlcyBpbiBwcm9ncmVzcyBhYm9ydCwgd2UnbGwgZ2V0IHBpY2tlZCB1cCBvbiB0aGUgbmV4dCBwb2xsXHJcbiAgICAgICAgaWYgKHRoaXMucGVuZGluZ1dyaXRlcyAhPT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGtleXMgPSBbXTtcclxuICAgICAgICBjb25zdCBrZXlzSW5SZXN1bHQgPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGggIT09IDApIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCB7IGZiYXNlX2tleToga2V5LCB2YWx1ZSB9IG9mIHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAga2V5c0luUmVzdWx0LmFkZChrZXkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKEpTT04uc3RyaW5naWZ5KHRoaXMubG9jYWxDYWNoZVtrZXldKSAhPT0gSlNPTi5zdHJpbmdpZnkodmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlMaXN0ZW5lcnMoa2V5LCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5cy5wdXNoKGtleSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChjb25zdCBsb2NhbEtleSBvZiBPYmplY3Qua2V5cyh0aGlzLmxvY2FsQ2FjaGUpKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmxvY2FsQ2FjaGVbbG9jYWxLZXldICYmICFrZXlzSW5SZXN1bHQuaGFzKGxvY2FsS2V5KSkge1xyXG4gICAgICAgICAgICAgICAgLy8gRGVsZXRlZFxyXG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlMaXN0ZW5lcnMobG9jYWxLZXksIG51bGwpO1xyXG4gICAgICAgICAgICAgICAga2V5cy5wdXNoKGxvY2FsS2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ga2V5cztcclxuICAgIH1cclxuICAgIG5vdGlmeUxpc3RlbmVycyhrZXksIG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5sb2NhbENhY2hlW2tleV0gPSBuZXdWYWx1ZTtcclxuICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVyc1trZXldO1xyXG4gICAgICAgIGlmIChsaXN0ZW5lcnMpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiBBcnJheS5mcm9tKGxpc3RlbmVycykpIHtcclxuICAgICAgICAgICAgICAgIGxpc3RlbmVyKG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHN0YXJ0UG9sbGluZygpIHtcclxuICAgICAgICB0aGlzLnN0b3BQb2xsaW5nKCk7XHJcbiAgICAgICAgdGhpcy5wb2xsVGltZXIgPSBzZXRJbnRlcnZhbChhc3luYyAoKSA9PiB0aGlzLl9wb2xsKCksIF9QT0xMSU5HX0lOVEVSVkFMX01TKTtcclxuICAgIH1cclxuICAgIHN0b3BQb2xsaW5nKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnBvbGxUaW1lcikge1xyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMucG9sbFRpbWVyKTtcclxuICAgICAgICAgICAgdGhpcy5wb2xsVGltZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF9hZGRMaXN0ZW5lcihrZXksIGxpc3RlbmVyKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMubGlzdGVuZXJzKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5zdGFydFBvbGxpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLmxpc3RlbmVyc1trZXldKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdGVuZXJzW2tleV0gPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgICAgIC8vIFBvcHVsYXRlIHRoZSBjYWNoZSB0byBhdm9pZCBzcHVyaW91c2x5IHRyaWdnZXJpbmcgb24gZmlyc3QgcG9sbC5cclxuICAgICAgICAgICAgdm9pZCB0aGlzLl9nZXQoa2V5KTsgLy8gVGhpcyBjYW4gaGFwcGVuIGluIHRoZSBiYWNrZ3JvdW5kIGFzeW5jIGFuZCB3ZSBjYW4gcmV0dXJuIGltbWVkaWF0ZWx5LlxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxpc3RlbmVyc1trZXldLmFkZChsaXN0ZW5lcik7XHJcbiAgICB9XHJcbiAgICBfcmVtb3ZlTGlzdGVuZXIoa2V5LCBsaXN0ZW5lcikge1xyXG4gICAgICAgIGlmICh0aGlzLmxpc3RlbmVyc1trZXldKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdGVuZXJzW2tleV0uZGVsZXRlKGxpc3RlbmVyKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMubGlzdGVuZXJzW2tleV0uc2l6ZSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMubGlzdGVuZXJzW2tleV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMubGlzdGVuZXJzKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5zdG9wUG9sbGluZygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5JbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlLnR5cGUgPSAnTE9DQUwnO1xyXG4vKipcclxuICogQW4gaW1wbGVtZW50YXRpb24gb2Yge0BsaW5rIFBlcnNpc3RlbmNlfSBvZiB0eXBlIGBMT0NBTGAgdXNpbmcgYGluZGV4ZWREQmBcclxuICogZm9yIHRoZSB1bmRlcmx5aW5nIHN0b3JhZ2UuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGluZGV4ZWREQkxvY2FsUGVyc2lzdGVuY2UgPSBJbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBzdGFydFNpZ25JblBob25lTWZhKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogSHR0cE1ldGhvZC5QT1NUICovLCBcIi92Mi9hY2NvdW50cy9tZmFTaWduSW46c3RhcnRcIiAvKiBFbmRwb2ludC5TVEFSVF9NRkFfU0lHTl9JTiAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxyXG5mdW5jdGlvbiBmaW5hbGl6ZVNpZ25JblBob25lTWZhKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogSHR0cE1ldGhvZC5QT1NUICovLCBcIi92Mi9hY2NvdW50cy9tZmFTaWduSW46ZmluYWxpemVcIiAvKiBFbmRwb2ludC5GSU5BTElaRV9NRkFfU0lHTl9JTiAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxyXG5mdW5jdGlvbiBmaW5hbGl6ZVNpZ25JblRvdHBNZmEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBIdHRwTWV0aG9kLlBPU1QgKi8sIFwiL3YyL2FjY291bnRzL21mYVNpZ25JbjpmaW5hbGl6ZVwiIC8qIEVuZHBvaW50LkZJTkFMSVpFX01GQV9TSUdOX0lOICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IF9TT0xWRV9USU1FX01TID0gNTAwO1xyXG5jb25zdCBfRVhQSVJBVElPTl9USU1FX01TID0gNjAwMDA7XHJcbmNvbnN0IF9XSURHRVRfSURfU1RBUlQgPSAxMDAwMDAwMDAwMDAwO1xyXG5jbGFzcyBNb2NrUmVDYXB0Y2hhIHtcclxuICAgIGNvbnN0cnVjdG9yKGF1dGgpIHtcclxuICAgICAgICB0aGlzLmF1dGggPSBhdXRoO1xyXG4gICAgICAgIHRoaXMuY291bnRlciA9IF9XSURHRVRfSURfU1RBUlQ7XHJcbiAgICAgICAgdGhpcy5fd2lkZ2V0cyA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuICAgIHJlbmRlcihjb250YWluZXIsIHBhcmFtZXRlcnMpIHtcclxuICAgICAgICBjb25zdCBpZCA9IHRoaXMuY291bnRlcjtcclxuICAgICAgICB0aGlzLl93aWRnZXRzLnNldChpZCwgbmV3IE1vY2tXaWRnZXQoY29udGFpbmVyLCB0aGlzLmF1dGgubmFtZSwgcGFyYW1ldGVycyB8fCB7fSkpO1xyXG4gICAgICAgIHRoaXMuY291bnRlcisrO1xyXG4gICAgICAgIHJldHVybiBpZDtcclxuICAgIH1cclxuICAgIHJlc2V0KG9wdFdpZGdldElkKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IGlkID0gb3B0V2lkZ2V0SWQgfHwgX1dJREdFVF9JRF9TVEFSVDtcclxuICAgICAgICB2b2lkICgoX2EgPSB0aGlzLl93aWRnZXRzLmdldChpZCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5kZWxldGUoKSk7XHJcbiAgICAgICAgdGhpcy5fd2lkZ2V0cy5kZWxldGUoaWQpO1xyXG4gICAgfVxyXG4gICAgZ2V0UmVzcG9uc2Uob3B0V2lkZ2V0SWQpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgY29uc3QgaWQgPSBvcHRXaWRnZXRJZCB8fCBfV0lER0VUX0lEX1NUQVJUO1xyXG4gICAgICAgIHJldHVybiAoKF9hID0gdGhpcy5fd2lkZ2V0cy5nZXQoaWQpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZ2V0UmVzcG9uc2UoKSkgfHwgJyc7XHJcbiAgICB9XHJcbiAgICBhc3luYyBleGVjdXRlKG9wdFdpZGdldElkKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IGlkID0gb3B0V2lkZ2V0SWQgfHwgX1dJREdFVF9JRF9TVEFSVDtcclxuICAgICAgICB2b2lkICgoX2EgPSB0aGlzLl93aWRnZXRzLmdldChpZCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5leGVjdXRlKCkpO1xyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxufVxyXG5jbGFzcyBNb2NrV2lkZ2V0IHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lck9ySWQsIGFwcE5hbWUsIHBhcmFtcykge1xyXG4gICAgICAgIHRoaXMucGFyYW1zID0gcGFyYW1zO1xyXG4gICAgICAgIHRoaXMudGltZXJJZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5kZWxldGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5yZXNwb25zZVRva2VuID0gbnVsbDtcclxuICAgICAgICB0aGlzLmNsaWNrSGFuZGxlciA9ICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5leGVjdXRlKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0eXBlb2YgY29udGFpbmVyT3JJZCA9PT0gJ3N0cmluZydcclxuICAgICAgICAgICAgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb250YWluZXJPcklkKVxyXG4gICAgICAgICAgICA6IGNvbnRhaW5lck9ySWQ7XHJcbiAgICAgICAgX2Fzc2VydChjb250YWluZXIsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLkFSR1VNRU5UX0VSUk9SICovLCB7IGFwcE5hbWUgfSk7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgdGhpcy5pc1Zpc2libGUgPSB0aGlzLnBhcmFtcy5zaXplICE9PSAnaW52aXNpYmxlJztcclxuICAgICAgICBpZiAodGhpcy5pc1Zpc2libGUpIHtcclxuICAgICAgICAgICAgdGhpcy5leGVjdXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXRSZXNwb25zZSgpIHtcclxuICAgICAgICB0aGlzLmNoZWNrSWZEZWxldGVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzcG9uc2VUb2tlbjtcclxuICAgIH1cclxuICAgIGRlbGV0ZSgpIHtcclxuICAgICAgICB0aGlzLmNoZWNrSWZEZWxldGVkKCk7XHJcbiAgICAgICAgdGhpcy5kZWxldGVkID0gdHJ1ZTtcclxuICAgICAgICBpZiAodGhpcy50aW1lcklkKSB7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVySWQpO1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVySWQgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyKTtcclxuICAgIH1cclxuICAgIGV4ZWN1dGUoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0lmRGVsZXRlZCgpO1xyXG4gICAgICAgIGlmICh0aGlzLnRpbWVySWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRpbWVySWQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzcG9uc2VUb2tlbiA9IGdlbmVyYXRlUmFuZG9tQWxwaGFOdW1lcmljU3RyaW5nKDUwKTtcclxuICAgICAgICAgICAgY29uc3QgeyBjYWxsYmFjaywgJ2V4cGlyZWQtY2FsbGJhY2snOiBleHBpcmVkQ2FsbGJhY2sgfSA9IHRoaXMucGFyYW1zO1xyXG4gICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sodGhpcy5yZXNwb25zZVRva2VuKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7IH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnRpbWVySWQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWVySWQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNwb25zZVRva2VuID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGlmIChleHBpcmVkQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcmVkQ2FsbGJhY2soKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNWaXNpYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leGVjdXRlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIF9FWFBJUkFUSU9OX1RJTUVfTVMpO1xyXG4gICAgICAgIH0sIF9TT0xWRV9USU1FX01TKTtcclxuICAgIH1cclxuICAgIGNoZWNrSWZEZWxldGVkKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmRlbGV0ZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdyZUNBUFRDSEEgbW9jayB3YXMgYWxyZWFkeSBkZWxldGVkIScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBnZW5lcmF0ZVJhbmRvbUFscGhhTnVtZXJpY1N0cmluZyhsZW4pIHtcclxuICAgIGNvbnN0IGNoYXJzID0gW107XHJcbiAgICBjb25zdCBhbGxvd2VkQ2hhcnMgPSAnMTIzNDU2Nzg5MGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVonO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgIGNoYXJzLnB1c2goYWxsb3dlZENoYXJzLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBhbGxvd2VkQ2hhcnMubGVuZ3RoKSkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNoYXJzLmpvaW4oJycpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIFJlQ2FwdGNoYSB3aWxsIGxvYWQgdXNpbmcgdGhlIHNhbWUgY2FsbGJhY2ssIHNvIHRoZSBjYWxsYmFjayBmdW5jdGlvbiBuZWVkc1xyXG4vLyB0byBiZSBrZXB0IGFyb3VuZFxyXG5jb25zdCBfSlNMT0FEX0NBTExCQUNLID0gX2dlbmVyYXRlQ2FsbGJhY2tOYW1lKCdyY2InKTtcclxuY29uc3QgTkVUV09SS19USU1FT1VUX0RFTEFZID0gbmV3IERlbGF5KDMwMDAwLCA2MDAwMCk7XHJcbi8qKlxyXG4gKiBMb2FkZXIgZm9yIHRoZSBHUmVDYXB0Y2hhIGxpYnJhcnkuIFRoZXJlIHNob3VsZCBvbmx5IGV2ZXIgYmUgb25lIG9mIHRoaXMuXHJcbiAqL1xyXG5jbGFzcyBSZUNhcHRjaGFMb2FkZXJJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICB0aGlzLmhvc3RMYW5ndWFnZSA9ICcnO1xyXG4gICAgICAgIHRoaXMuY291bnRlciA9IDA7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2hlY2sgZm9yIGByZW5kZXIoKWAgbWV0aG9kLiBgd2luZG93LmdyZWNhcHRjaGFgIHdpbGwgZXhpc3QgaWYgdGhlIEVudGVycHJpc2VcclxuICAgICAgICAgKiB2ZXJzaW9uIG9mIHRoZSBSZUNBUFRDSEEgc2NyaXB0IHdhcyBsb2FkZWQgYnkgc29tZW9uZSBlbHNlIChlLmcuIEFwcCBDaGVjaykgYnV0XHJcbiAgICAgICAgICogYHdpbmRvdy5ncmVjYXB0Y2hhLnJlbmRlcigpYCB3aWxsIG5vdC4gQW5vdGhlciBsb2FkIHdpbGwgYWRkIGl0LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMubGlicmFyeVNlcGFyYXRlbHlMb2FkZWQgPSAhISgoX2EgPSBfd2luZG93KCkuZ3JlY2FwdGNoYSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnJlbmRlcik7XHJcbiAgICB9XHJcbiAgICBsb2FkKGF1dGgsIGhsID0gJycpIHtcclxuICAgICAgICBfYXNzZXJ0KGlzSG9zdExhbmd1YWdlVmFsaWQoaGwpLCBhdXRoLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5BUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgaWYgKHRoaXMuc2hvdWxkUmVzb2x2ZUltbWVkaWF0ZWx5KGhsKSAmJiBpc1YyKF93aW5kb3coKS5ncmVjYXB0Y2hhKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKF93aW5kb3coKS5ncmVjYXB0Y2hhKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbmV0d29ya1RpbWVvdXQgPSBfd2luZG93KCkuc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoX2NyZWF0ZUVycm9yKGF1dGgsIFwibmV0d29yay1yZXF1ZXN0LWZhaWxlZFwiIC8qIEF1dGhFcnJvckNvZGUuTkVUV09SS19SRVFVRVNUX0ZBSUxFRCAqLykpO1xyXG4gICAgICAgICAgICB9LCBORVRXT1JLX1RJTUVPVVRfREVMQVkuZ2V0KCkpO1xyXG4gICAgICAgICAgICBfd2luZG93KClbX0pTTE9BRF9DQUxMQkFDS10gPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBfd2luZG93KCkuY2xlYXJUaW1lb3V0KG5ldHdvcmtUaW1lb3V0KTtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBfd2luZG93KClbX0pTTE9BRF9DQUxMQkFDS107XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZWNhcHRjaGEgPSBfd2luZG93KCkuZ3JlY2FwdGNoYTtcclxuICAgICAgICAgICAgICAgIGlmICghcmVjYXB0Y2hhIHx8ICFpc1YyKHJlY2FwdGNoYSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoX2NyZWF0ZUVycm9yKGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gV3JhcCB0aGUgZ3JlcHRjaGEgcmVuZGVyIGZ1bmN0aW9uIHNvIHRoYXQgd2Uga25vdyBpZiB0aGUgZGV2ZWxvcGVyIGhhc1xyXG4gICAgICAgICAgICAgICAgLy8gY2FsbGVkIGl0IHNlcGFyYXRlbHlcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlbmRlciA9IHJlY2FwdGNoYS5yZW5kZXI7XHJcbiAgICAgICAgICAgICAgICByZWNhcHRjaGEucmVuZGVyID0gKGNvbnRhaW5lciwgcGFyYW1zKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2lkZ2V0SWQgPSByZW5kZXIoY29udGFpbmVyLCBwYXJhbXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY291bnRlcisrO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3aWRnZXRJZDtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhvc3RMYW5ndWFnZSA9IGhsO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyZWNhcHRjaGEpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjb25zdCB1cmwgPSBgJHtfcmVjYXB0Y2hhVjJTY3JpcHRVcmwoKX0/JHtxdWVyeXN0cmluZyh7XHJcbiAgICAgICAgICAgICAgICBvbmxvYWQ6IF9KU0xPQURfQ0FMTEJBQ0ssXHJcbiAgICAgICAgICAgICAgICByZW5kZXI6ICdleHBsaWNpdCcsXHJcbiAgICAgICAgICAgICAgICBobFxyXG4gICAgICAgICAgICB9KX1gO1xyXG4gICAgICAgICAgICBfbG9hZEpTKHVybCkuY2F0Y2goKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KG5ldHdvcmtUaW1lb3V0KTtcclxuICAgICAgICAgICAgICAgIHJlamVjdChfY3JlYXRlRXJyb3IoYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IgKi8pKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjbGVhcmVkT25lSW5zdGFuY2UoKSB7XHJcbiAgICAgICAgdGhpcy5jb3VudGVyLS07XHJcbiAgICB9XHJcbiAgICBzaG91bGRSZXNvbHZlSW1tZWRpYXRlbHkoaGwpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgLy8gV2UgY2FuIHJlc29sdmUgaW1tZWRpYXRlbHkgaWY6XHJcbiAgICAgICAgLy8gICDigKIgZ3JlY2FwdGNoYSBpcyBhbHJlYWR5IGRlZmluZWQgQU5EIChcclxuICAgICAgICAvLyAgICAgMS4gdGhlIHJlcXVlc3RlZCBsYW5ndWFnZSBjb2RlcyBhcmUgdGhlIHNhbWUgT1JcclxuICAgICAgICAvLyAgICAgMi4gdGhlcmUgZXhpc3RzIGFscmVhZHkgYSBSZUNhcHRjaGEgb24gdGhlIHBhZ2VcclxuICAgICAgICAvLyAgICAgMy4gdGhlIGxpYnJhcnkgd2FzIGFscmVhZHkgbG9hZGVkIGJ5IHRoZSBhcHBcclxuICAgICAgICAvLyBJbiBjYXNlcyAoMikgYW5kICgzKSwgd2UgX2Nhbid0XyByZWxvYWQgYXMgaXQgd291bGQgYnJlYWsgdGhlIHJlY2FwdGNoYXNcclxuICAgICAgICAvLyB0aGF0IGFyZSBhbHJlYWR5IGluIHRoZSBwYWdlXHJcbiAgICAgICAgcmV0dXJuICghISgoX2EgPSBfd2luZG93KCkuZ3JlY2FwdGNoYSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnJlbmRlcikgJiZcclxuICAgICAgICAgICAgKGhsID09PSB0aGlzLmhvc3RMYW5ndWFnZSB8fFxyXG4gICAgICAgICAgICAgICAgdGhpcy5jb3VudGVyID4gMCB8fFxyXG4gICAgICAgICAgICAgICAgdGhpcy5saWJyYXJ5U2VwYXJhdGVseUxvYWRlZCkpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGlzSG9zdExhbmd1YWdlVmFsaWQoaGwpIHtcclxuICAgIHJldHVybiBobC5sZW5ndGggPD0gNiAmJiAvXlxccypbYS16QS1aMC05XFwtXSpcXHMqJC8udGVzdChobCk7XHJcbn1cclxuY2xhc3MgTW9ja1JlQ2FwdGNoYUxvYWRlckltcGwge1xyXG4gICAgYXN5bmMgbG9hZChhdXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBNb2NrUmVDYXB0Y2hhKGF1dGgpO1xyXG4gICAgfVxyXG4gICAgY2xlYXJlZE9uZUluc3RhbmNlKCkgeyB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgUkVDQVBUQ0hBX1ZFUklGSUVSX1RZUEUgPSAncmVjYXB0Y2hhJztcclxuY29uc3QgREVGQVVMVF9QQVJBTVMgPSB7XHJcbiAgICB0aGVtZTogJ2xpZ2h0JyxcclxuICAgIHR5cGU6ICdpbWFnZSdcclxufTtcclxuLyoqXHJcbiAqIEFuIHtAbGluayBodHRwczovL3d3dy5nb29nbGUuY29tL3JlY2FwdGNoYS8gfCByZUNBUFRDSEF9LWJhc2VkIGFwcGxpY2F0aW9uIHZlcmlmaWVyLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBgUmVjYXB0Y2hhVmVyaWZpZXJgIGRvZXMgbm90IHdvcmsgaW4gYSBOb2RlLmpzIGVudmlyb25tZW50LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBSZWNhcHRjaGFWZXJpZmllciB7XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBhdXRoRXh0ZXJuIC0gVGhlIGNvcnJlc3BvbmRpbmcgRmlyZWJhc2Uge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjb250YWluZXJPcklkIC0gVGhlIHJlQ0FQVENIQSBjb250YWluZXIgcGFyYW1ldGVyLlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKiBUaGlzIGhhcyBkaWZmZXJlbnQgbWVhbmluZyBkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgcmVDQVBUQ0hBIGlzIGhpZGRlbiBvciB2aXNpYmxlLiBGb3IgYVxyXG4gICAgICogdmlzaWJsZSByZUNBUFRDSEEgdGhlIGNvbnRhaW5lciBtdXN0IGJlIGVtcHR5LiBJZiBhIHN0cmluZyBpcyB1c2VkLCBpdCBoYXMgdG8gY29ycmVzcG9uZCB0b1xyXG4gICAgICogYW4gZWxlbWVudCBJRC4gVGhlIGNvcnJlc3BvbmRpbmcgZWxlbWVudCBtdXN0IGFsc28gbXVzdCBiZSBpbiB0aGUgRE9NIGF0IHRoZSB0aW1lIG9mXHJcbiAgICAgKiBpbml0aWFsaXphdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcGFyYW1ldGVycyAtIFRoZSBvcHRpb25hbCByZUNBUFRDSEEgcGFyYW1ldGVycy5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICogQ2hlY2sgdGhlIHJlQ0FQVENIQSBkb2NzIGZvciBhIGNvbXByZWhlbnNpdmUgbGlzdC4gQWxsIHBhcmFtZXRlcnMgYXJlIGFjY2VwdGVkIGV4Y2VwdCBmb3JcclxuICAgICAqIHRoZSBzaXRla2V5LiBGaXJlYmFzZSBBdXRoIGJhY2tlbmQgcHJvdmlzaW9ucyBhIHJlQ0FQVENIQSBmb3IgZWFjaCBwcm9qZWN0IGFuZCB3aWxsXHJcbiAgICAgKiBjb25maWd1cmUgdGhpcyB1cG9uIHJlbmRlcmluZy4gRm9yIGFuIGludmlzaWJsZSByZUNBUFRDSEEsIGEgc2l6ZSBrZXkgbXVzdCBoYXZlIHRoZSB2YWx1ZVxyXG4gICAgICogJ2ludmlzaWJsZScuXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGF1dGhFeHRlcm4sIGNvbnRhaW5lck9ySWQsIHBhcmFtZXRlcnMgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1BBUkFNUykpIHtcclxuICAgICAgICB0aGlzLnBhcmFtZXRlcnMgPSBwYXJhbWV0ZXJzO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBhcHBsaWNhdGlvbiB2ZXJpZmllciB0eXBlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJlbWFya3NcclxuICAgICAgICAgKiBGb3IgYSByZUNBUFRDSEEgdmVyaWZpZXIsIHRoaXMgaXMgJ3JlY2FwdGNoYScuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy50eXBlID0gUkVDQVBUQ0hBX1ZFUklGSUVSX1RZUEU7XHJcbiAgICAgICAgdGhpcy5kZXN0cm95ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLndpZGdldElkID0gbnVsbDtcclxuICAgICAgICB0aGlzLnRva2VuQ2hhbmdlTGlzdGVuZXJzID0gbmV3IFNldCgpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyUHJvbWlzZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5yZWNhcHRjaGEgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IF9jYXN0QXV0aChhdXRoRXh0ZXJuKTtcclxuICAgICAgICB0aGlzLmlzSW52aXNpYmxlID0gdGhpcy5wYXJhbWV0ZXJzLnNpemUgPT09ICdpbnZpc2libGUnO1xyXG4gICAgICAgIF9hc3NlcnQodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJywgdGhpcy5hdXRoLCBcIm9wZXJhdGlvbi1ub3Qtc3VwcG9ydGVkLWluLXRoaXMtZW52aXJvbm1lbnRcIiAvKiBBdXRoRXJyb3JDb2RlLk9QRVJBVElPTl9OT1RfU1VQUE9SVEVEICovKTtcclxuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0eXBlb2YgY29udGFpbmVyT3JJZCA9PT0gJ3N0cmluZydcclxuICAgICAgICAgICAgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb250YWluZXJPcklkKVxyXG4gICAgICAgICAgICA6IGNvbnRhaW5lck9ySWQ7XHJcbiAgICAgICAgX2Fzc2VydChjb250YWluZXIsIHRoaXMuYXV0aCwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIHRoaXMucGFyYW1ldGVycy5jYWxsYmFjayA9IHRoaXMubWFrZVRva2VuQ2FsbGJhY2sodGhpcy5wYXJhbWV0ZXJzLmNhbGxiYWNrKTtcclxuICAgICAgICB0aGlzLl9yZWNhcHRjaGFMb2FkZXIgPSB0aGlzLmF1dGguc2V0dGluZ3MuYXBwVmVyaWZpY2F0aW9uRGlzYWJsZWRGb3JUZXN0aW5nXHJcbiAgICAgICAgICAgID8gbmV3IE1vY2tSZUNhcHRjaGFMb2FkZXJJbXBsKClcclxuICAgICAgICAgICAgOiBuZXcgUmVDYXB0Y2hhTG9hZGVySW1wbCgpO1xyXG4gICAgICAgIHRoaXMudmFsaWRhdGVTdGFydGluZ1N0YXRlKCk7XHJcbiAgICAgICAgLy8gVE9ETzogRmlndXJlIG91dCBpZiBzZGsgdmVyc2lvbiBpcyBuZWVkZWRcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogV2FpdHMgZm9yIHRoZSB1c2VyIHRvIHNvbHZlIHRoZSByZUNBUFRDSEEgYW5kIHJlc29sdmVzIHdpdGggdGhlIHJlQ0FQVENIQSB0b2tlbi5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgZm9yIHRoZSByZUNBUFRDSEEgdG9rZW4uXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHZlcmlmeSgpIHtcclxuICAgICAgICB0aGlzLmFzc2VydE5vdERlc3Ryb3llZCgpO1xyXG4gICAgICAgIGNvbnN0IGlkID0gYXdhaXQgdGhpcy5yZW5kZXIoKTtcclxuICAgICAgICBjb25zdCByZWNhcHRjaGEgPSB0aGlzLmdldEFzc2VydGVkUmVjYXB0Y2hhKCk7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSByZWNhcHRjaGEuZ2V0UmVzcG9uc2UoaWQpO1xyXG4gICAgICAgIGlmIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdG9rZW5DaGFuZ2UgPSAodG9rZW4pID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghdG9rZW4pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIElnbm9yZSB0b2tlbiBleHBpcmF0aW9ucy5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMudG9rZW5DaGFuZ2VMaXN0ZW5lcnMuZGVsZXRlKHRva2VuQ2hhbmdlKTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUodG9rZW4pO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLnRva2VuQ2hhbmdlTGlzdGVuZXJzLmFkZCh0b2tlbkNoYW5nZSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzSW52aXNpYmxlKSB7XHJcbiAgICAgICAgICAgICAgICByZWNhcHRjaGEuZXhlY3V0ZShpZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmVuZGVycyB0aGUgcmVDQVBUQ0hBIHdpZGdldCBvbiB0aGUgcGFnZS5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSByZUNBUFRDSEEgd2lkZ2V0IElELlxyXG4gICAgICovXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdGhpcy5hc3NlcnROb3REZXN0cm95ZWQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgLy8gVGhpcyBtZXRob2QgcmV0dXJucyBhIHByb21pc2UuIFNpbmNlIGl0J3Mgbm90IGFzeW5jICh3ZSB3YW50IHRvIHJldHVybiB0aGVcclxuICAgICAgICAgICAgLy8gX3NhbWVfIHByb21pc2UgaWYgcmVuZGVyaW5nIGlzIHN0aWxsIG9jY3VycmluZyksIHRoZSBBUEkgc3VyZmFjZSBzaG91bGRcclxuICAgICAgICAgICAgLy8gcmVqZWN0IHdpdGggdGhlIGVycm9yIHJhdGhlciB0aGFuIGp1c3QgdGhyb3dcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5yZW5kZXJQcm9taXNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbmRlclByb21pc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVuZGVyUHJvbWlzZSA9IHRoaXMubWFrZVJlbmRlclByb21pc2UoKS5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJQcm9taXNlID0gbnVsbDtcclxuICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJQcm9taXNlO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX3Jlc2V0KCkge1xyXG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90RGVzdHJveWVkKCk7XHJcbiAgICAgICAgaWYgKHRoaXMud2lkZ2V0SWQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5nZXRBc3NlcnRlZFJlY2FwdGNoYSgpLnJlc2V0KHRoaXMud2lkZ2V0SWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ2xlYXJzIHRoZSByZUNBUFRDSEEgd2lkZ2V0IGZyb20gdGhlIHBhZ2UgYW5kIGRlc3Ryb3lzIHRoZSBpbnN0YW5jZS5cclxuICAgICAqL1xyXG4gICAgY2xlYXIoKSB7XHJcbiAgICAgICAgdGhpcy5hc3NlcnROb3REZXN0cm95ZWQoKTtcclxuICAgICAgICB0aGlzLmRlc3Ryb3llZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fcmVjYXB0Y2hhTG9hZGVyLmNsZWFyZWRPbmVJbnN0YW5jZSgpO1xyXG4gICAgICAgIGlmICghdGhpcy5pc0ludmlzaWJsZSkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5jaGlsZE5vZGVzLmZvckVhY2gobm9kZSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5yZW1vdmVDaGlsZChub2RlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdmFsaWRhdGVTdGFydGluZ1N0YXRlKCkge1xyXG4gICAgICAgIF9hc3NlcnQoIXRoaXMucGFyYW1ldGVycy5zaXRla2V5LCB0aGlzLmF1dGgsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLkFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICBfYXNzZXJ0KHRoaXMuaXNJbnZpc2libGUgfHwgIXRoaXMuY29udGFpbmVyLmhhc0NoaWxkTm9kZXMoKSwgdGhpcy5hdXRoLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5BUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgX2Fzc2VydCh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnLCB0aGlzLmF1dGgsIFwib3BlcmF0aW9uLW5vdC1zdXBwb3J0ZWQtaW4tdGhpcy1lbnZpcm9ubWVudFwiIC8qIEF1dGhFcnJvckNvZGUuT1BFUkFUSU9OX05PVF9TVVBQT1JURUQgKi8pO1xyXG4gICAgfVxyXG4gICAgbWFrZVRva2VuQ2FsbGJhY2soZXhpc3RpbmcpIHtcclxuICAgICAgICByZXR1cm4gdG9rZW4gPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnRva2VuQ2hhbmdlTGlzdGVuZXJzLmZvckVhY2gobGlzdGVuZXIgPT4gbGlzdGVuZXIodG9rZW4pKTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBleGlzdGluZyA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgZXhpc3RpbmcodG9rZW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBleGlzdGluZyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGdsb2JhbEZ1bmMgPSBfd2luZG93KClbZXhpc3RpbmddO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBnbG9iYWxGdW5jID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2xvYmFsRnVuYyh0b2tlbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgYXNzZXJ0Tm90RGVzdHJveWVkKCkge1xyXG4gICAgICAgIF9hc3NlcnQoIXRoaXMuZGVzdHJveWVkLCB0aGlzLmF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIH1cclxuICAgIGFzeW5jIG1ha2VSZW5kZXJQcm9taXNlKCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdCgpO1xyXG4gICAgICAgIGlmICghdGhpcy53aWRnZXRJZCkge1xyXG4gICAgICAgICAgICBsZXQgY29udGFpbmVyID0gdGhpcy5jb250YWluZXI7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0ludmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZ3VhcmFudGVlZEVtcHR5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZ3VhcmFudGVlZEVtcHR5KTtcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lciA9IGd1YXJhbnRlZWRFbXB0eTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLndpZGdldElkID0gdGhpcy5nZXRBc3NlcnRlZFJlY2FwdGNoYSgpLnJlbmRlcihjb250YWluZXIsIHRoaXMucGFyYW1ldGVycyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLndpZGdldElkO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgaW5pdCgpIHtcclxuICAgICAgICBfYXNzZXJ0KF9pc0h0dHBPckh0dHBzKCkgJiYgIV9pc1dvcmtlcigpLCB0aGlzLmF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICBhd2FpdCBkb21SZWFkeSgpO1xyXG4gICAgICAgIHRoaXMucmVjYXB0Y2hhID0gYXdhaXQgdGhpcy5fcmVjYXB0Y2hhTG9hZGVyLmxvYWQodGhpcy5hdXRoLCB0aGlzLmF1dGgubGFuZ3VhZ2VDb2RlIHx8IHVuZGVmaW5lZCk7XHJcbiAgICAgICAgY29uc3Qgc2l0ZUtleSA9IGF3YWl0IGdldFJlY2FwdGNoYVBhcmFtcyh0aGlzLmF1dGgpO1xyXG4gICAgICAgIF9hc3NlcnQoc2l0ZUtleSwgdGhpcy5hdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgdGhpcy5wYXJhbWV0ZXJzLnNpdGVrZXkgPSBzaXRlS2V5O1xyXG4gICAgfVxyXG4gICAgZ2V0QXNzZXJ0ZWRSZWNhcHRjaGEoKSB7XHJcbiAgICAgICAgX2Fzc2VydCh0aGlzLnJlY2FwdGNoYSwgdGhpcy5hdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVjYXB0Y2hhO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGRvbVJlYWR5KCkge1xyXG4gICAgbGV0IHJlc29sdmVyID0gbnVsbDtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJykge1xyXG4gICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRG9jdW1lbnQgbm90IHJlYWR5LCB3YWl0IGZvciBsb2FkIGJlZm9yZSByZXNvbHZpbmcuXHJcbiAgICAgICAgLy8gU2F2ZSByZXNvbHZlciwgc28gd2UgY2FuIHJlbW92ZSBsaXN0ZW5lciBpbiBjYXNlIGl0IHdhcyBleHRlcm5hbGx5XHJcbiAgICAgICAgLy8gY2FuY2VsbGVkLlxyXG4gICAgICAgIHJlc29sdmVyID0gKCkgPT4gcmVzb2x2ZSgpO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgcmVzb2x2ZXIpO1xyXG4gICAgfSkuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgaWYgKHJlc29sdmVyKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdsb2FkJywgcmVzb2x2ZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBlO1xyXG4gICAgfSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgQ29uZmlybWF0aW9uUmVzdWx0SW1wbCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih2ZXJpZmljYXRpb25JZCwgb25Db25maXJtYXRpb24pIHtcclxuICAgICAgICB0aGlzLnZlcmlmaWNhdGlvbklkID0gdmVyaWZpY2F0aW9uSWQ7XHJcbiAgICAgICAgdGhpcy5vbkNvbmZpcm1hdGlvbiA9IG9uQ29uZmlybWF0aW9uO1xyXG4gICAgfVxyXG4gICAgY29uZmlybSh2ZXJpZmljYXRpb25Db2RlKSB7XHJcbiAgICAgICAgY29uc3QgYXV0aENyZWRlbnRpYWwgPSBQaG9uZUF1dGhDcmVkZW50aWFsLl9mcm9tVmVyaWZpY2F0aW9uKHRoaXMudmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9uQ29uZmlybWF0aW9uKGF1dGhDcmVkZW50aWFsKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQXN5bmNocm9ub3VzbHkgc2lnbnMgaW4gdXNpbmcgYSBwaG9uZSBudW1iZXIuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRoaXMgbWV0aG9kIHNlbmRzIGEgY29kZSB2aWEgU01TIHRvIHRoZSBnaXZlblxyXG4gKiBwaG9uZSBudW1iZXIsIGFuZCByZXR1cm5zIGEge0BsaW5rIENvbmZpcm1hdGlvblJlc3VsdH0uIEFmdGVyIHRoZSB1c2VyXHJcbiAqIHByb3ZpZGVzIHRoZSBjb2RlIHNlbnQgdG8gdGhlaXIgcGhvbmUsIGNhbGwge0BsaW5rIENvbmZpcm1hdGlvblJlc3VsdC5jb25maXJtfVxyXG4gKiB3aXRoIHRoZSBjb2RlIHRvIHNpZ24gdGhlIHVzZXIgaW4uXHJcbiAqXHJcbiAqIEZvciBhYnVzZSBwcmV2ZW50aW9uLCB0aGlzIG1ldGhvZCBhbHNvIHJlcXVpcmVzIGEge0BsaW5rIEFwcGxpY2F0aW9uVmVyaWZpZXJ9LlxyXG4gKiBUaGlzIFNESyBpbmNsdWRlcyBhIHJlQ0FQVENIQS1iYXNlZCBpbXBsZW1lbnRhdGlvbiwge0BsaW5rIFJlY2FwdGNoYVZlcmlmaWVyfS5cclxuICogVGhpcyBmdW5jdGlvbiBjYW4gd29yayBvbiBvdGhlciBwbGF0Zm9ybXMgdGhhdCBkbyBub3Qgc3VwcG9ydCB0aGVcclxuICoge0BsaW5rIFJlY2FwdGNoYVZlcmlmaWVyfSAobGlrZSBSZWFjdCBOYXRpdmUpLCBidXQgeW91IG5lZWQgdG8gdXNlIGFcclxuICogdGhpcmQtcGFydHkge0BsaW5rIEFwcGxpY2F0aW9uVmVyaWZpZXJ9IGltcGxlbWVudGF0aW9uLlxyXG4gKlxyXG4gKiBUaGlzIG1ldGhvZCBkb2VzIG5vdCB3b3JrIGluIGEgTm9kZS5qcyBlbnZpcm9ubWVudCBvciB3aXRoIHtAbGluayBBdXRofSBpbnN0YW5jZXMgY3JlYXRlZCB3aXRoIGFcclxuICoge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VTZXJ2ZXJBcHB9LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vICdyZWNhcHRjaGEtY29udGFpbmVyJyBpcyB0aGUgSUQgb2YgYW4gZWxlbWVudCBpbiB0aGUgRE9NLlxyXG4gKiBjb25zdCBhcHBsaWNhdGlvblZlcmlmaWVyID0gbmV3IGZpcmViYXNlLmF1dGguUmVjYXB0Y2hhVmVyaWZpZXIoJ3JlY2FwdGNoYS1jb250YWluZXInKTtcclxuICogY29uc3QgY29uZmlybWF0aW9uUmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aFBob25lTnVtYmVyKGF1dGgsIHBob25lTnVtYmVyLCBhcHBsaWNhdGlvblZlcmlmaWVyKTtcclxuICogLy8gT2J0YWluIGEgdmVyaWZpY2F0aW9uQ29kZSBmcm9tIHRoZSB1c2VyLlxyXG4gKiBjb25zdCBjcmVkZW50aWFsID0gYXdhaXQgY29uZmlybWF0aW9uUmVzdWx0LmNvbmZpcm0odmVyaWZpY2F0aW9uQ29kZSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBwaG9uZU51bWJlciAtIFRoZSB1c2VyJ3MgcGhvbmUgbnVtYmVyIGluIEUuMTY0IGZvcm1hdCAoZS5nLiArMTY1MDU1NTAxMDEpLlxyXG4gKiBAcGFyYW0gYXBwVmVyaWZpZXIgLSBUaGUge0BsaW5rIEFwcGxpY2F0aW9uVmVyaWZpZXJ9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoUGhvbmVOdW1iZXIoYXV0aCwgcGhvbmVOdW1iZXIsIGFwcFZlcmlmaWVyKSB7XHJcbiAgICBpZiAoX2lzRmlyZWJhc2VTZXJ2ZXJBcHAoYXV0aC5hcHApKSB7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KF9zZXJ2ZXJBcHBDdXJyZW50VXNlck9wZXJhdGlvbk5vdFN1cHBvcnRlZEVycm9yKGF1dGgpKTtcclxuICAgIH1cclxuICAgIGNvbnN0IGF1dGhJbnRlcm5hbCA9IF9jYXN0QXV0aChhdXRoKTtcclxuICAgIGNvbnN0IHZlcmlmaWNhdGlvbklkID0gYXdhaXQgX3ZlcmlmeVBob25lTnVtYmVyKGF1dGhJbnRlcm5hbCwgcGhvbmVOdW1iZXIsIGdldE1vZHVsYXJJbnN0YW5jZShhcHBWZXJpZmllcikpO1xyXG4gICAgcmV0dXJuIG5ldyBDb25maXJtYXRpb25SZXN1bHRJbXBsKHZlcmlmaWNhdGlvbklkLCBjcmVkID0+IHNpZ25JbldpdGhDcmVkZW50aWFsKGF1dGhJbnRlcm5hbCwgY3JlZCkpO1xyXG59XHJcbi8qKlxyXG4gKiBMaW5rcyB0aGUgdXNlciBhY2NvdW50IHdpdGggdGhlIGdpdmVuIHBob25lIG51bWJlci5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVGhpcyBtZXRob2QgZG9lcyBub3Qgd29yayBpbiBhIE5vZGUuanMgZW52aXJvbm1lbnQuXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBwaG9uZU51bWJlciAtIFRoZSB1c2VyJ3MgcGhvbmUgbnVtYmVyIGluIEUuMTY0IGZvcm1hdCAoZS5nLiArMTY1MDU1NTAxMDEpLlxyXG4gKiBAcGFyYW0gYXBwVmVyaWZpZXIgLSBUaGUge0BsaW5rIEFwcGxpY2F0aW9uVmVyaWZpZXJ9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBsaW5rV2l0aFBob25lTnVtYmVyKHVzZXIsIHBob25lTnVtYmVyLCBhcHBWZXJpZmllcikge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgYXdhaXQgX2Fzc2VydExpbmtlZFN0YXR1cyhmYWxzZSwgdXNlckludGVybmFsLCBcInBob25lXCIgLyogUHJvdmlkZXJJZC5QSE9ORSAqLyk7XHJcbiAgICBjb25zdCB2ZXJpZmljYXRpb25JZCA9IGF3YWl0IF92ZXJpZnlQaG9uZU51bWJlcih1c2VySW50ZXJuYWwuYXV0aCwgcGhvbmVOdW1iZXIsIGdldE1vZHVsYXJJbnN0YW5jZShhcHBWZXJpZmllcikpO1xyXG4gICAgcmV0dXJuIG5ldyBDb25maXJtYXRpb25SZXN1bHRJbXBsKHZlcmlmaWNhdGlvbklkLCBjcmVkID0+IGxpbmtXaXRoQ3JlZGVudGlhbCh1c2VySW50ZXJuYWwsIGNyZWQpKTtcclxufVxyXG4vKipcclxuICogUmUtYXV0aGVudGljYXRlcyBhIHVzZXIgdXNpbmcgYSBmcmVzaCBwaG9uZSBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBVc2UgYmVmb3JlIG9wZXJhdGlvbnMgc3VjaCBhcyB7QGxpbmsgdXBkYXRlUGFzc3dvcmR9IHRoYXQgcmVxdWlyZSB0b2tlbnMgZnJvbSByZWNlbnQgc2lnbi1pbiBhdHRlbXB0cy5cclxuICpcclxuICogVGhpcyBtZXRob2QgZG9lcyBub3Qgd29yayBpbiBhIE5vZGUuanMgZW52aXJvbm1lbnQgb3Igb24gYW55IHtAbGluayBVc2VyfSBzaWduZWQgaW4gYnlcclxuICoge0BsaW5rIEF1dGh9IGluc3RhbmNlcyBjcmVhdGVkIHdpdGggYSB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZVNlcnZlckFwcH0uXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBwaG9uZU51bWJlciAtIFRoZSB1c2VyJ3MgcGhvbmUgbnVtYmVyIGluIEUuMTY0IGZvcm1hdCAoZS5nLiArMTY1MDU1NTAxMDEpLlxyXG4gKiBAcGFyYW0gYXBwVmVyaWZpZXIgLSBUaGUge0BsaW5rIEFwcGxpY2F0aW9uVmVyaWZpZXJ9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiByZWF1dGhlbnRpY2F0ZVdpdGhQaG9uZU51bWJlcih1c2VyLCBwaG9uZU51bWJlciwgYXBwVmVyaWZpZXIpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGlmIChfaXNGaXJlYmFzZVNlcnZlckFwcCh1c2VySW50ZXJuYWwuYXV0aC5hcHApKSB7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KF9zZXJ2ZXJBcHBDdXJyZW50VXNlck9wZXJhdGlvbk5vdFN1cHBvcnRlZEVycm9yKHVzZXJJbnRlcm5hbC5hdXRoKSk7XHJcbiAgICB9XHJcbiAgICBjb25zdCB2ZXJpZmljYXRpb25JZCA9IGF3YWl0IF92ZXJpZnlQaG9uZU51bWJlcih1c2VySW50ZXJuYWwuYXV0aCwgcGhvbmVOdW1iZXIsIGdldE1vZHVsYXJJbnN0YW5jZShhcHBWZXJpZmllcikpO1xyXG4gICAgcmV0dXJuIG5ldyBDb25maXJtYXRpb25SZXN1bHRJbXBsKHZlcmlmaWNhdGlvbklkLCBjcmVkID0+IHJlYXV0aGVudGljYXRlV2l0aENyZWRlbnRpYWwodXNlckludGVybmFsLCBjcmVkKSk7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgYSB2ZXJpZmljYXRpb24gSUQgdG8gYmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIHRoZSBTTVMgY29kZSB0aGF0IGlzIHNlbnQuXHJcbiAqXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBfdmVyaWZ5UGhvbmVOdW1iZXIoYXV0aCwgb3B0aW9ucywgdmVyaWZpZXIpIHtcclxuICAgIHZhciBfYTtcclxuICAgIGNvbnN0IHJlY2FwdGNoYVRva2VuID0gYXdhaXQgdmVyaWZpZXIudmVyaWZ5KCk7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIF9hc3NlcnQodHlwZW9mIHJlY2FwdGNoYVRva2VuID09PSAnc3RyaW5nJywgYXV0aCwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIF9hc3NlcnQodmVyaWZpZXIudHlwZSA9PT0gUkVDQVBUQ0hBX1ZFUklGSUVSX1RZUEUsIGF1dGgsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLkFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICBsZXQgcGhvbmVJbmZvT3B0aW9ucztcclxuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIHBob25lSW5mb09wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICBwaG9uZU51bWJlcjogb3B0aW9uc1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcGhvbmVJbmZvT3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgnc2Vzc2lvbicgaW4gcGhvbmVJbmZvT3B0aW9ucykge1xyXG4gICAgICAgICAgICBjb25zdCBzZXNzaW9uID0gcGhvbmVJbmZvT3B0aW9ucy5zZXNzaW9uO1xyXG4gICAgICAgICAgICBpZiAoJ3Bob25lTnVtYmVyJyBpbiBwaG9uZUluZm9PcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBfYXNzZXJ0KHNlc3Npb24udHlwZSA9PT0gXCJlbnJvbGxcIiAvKiBNdWx0aUZhY3RvclNlc3Npb25UeXBlLkVOUk9MTCAqLywgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzdGFydEVucm9sbFBob25lTWZhKGF1dGgsIHtcclxuICAgICAgICAgICAgICAgICAgICBpZFRva2VuOiBzZXNzaW9uLmNyZWRlbnRpYWwsXHJcbiAgICAgICAgICAgICAgICAgICAgcGhvbmVFbnJvbGxtZW50SW5mbzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwaG9uZU51bWJlcjogcGhvbmVJbmZvT3B0aW9ucy5waG9uZU51bWJlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjYXB0Y2hhVG9rZW5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5waG9uZVNlc3Npb25JbmZvLnNlc3Npb25JbmZvO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX2Fzc2VydChzZXNzaW9uLnR5cGUgPT09IFwic2lnbmluXCIgLyogTXVsdGlGYWN0b3JTZXNzaW9uVHlwZS5TSUdOX0lOICovLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZmFFbnJvbGxtZW50SWQgPSAoKF9hID0gcGhvbmVJbmZvT3B0aW9ucy5tdWx0aUZhY3RvckhpbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS51aWQpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgcGhvbmVJbmZvT3B0aW9ucy5tdWx0aUZhY3RvclVpZDtcclxuICAgICAgICAgICAgICAgIF9hc3NlcnQobWZhRW5yb2xsbWVudElkLCBhdXRoLCBcIm1pc3NpbmctbXVsdGktZmFjdG9yLWluZm9cIiAvKiBBdXRoRXJyb3JDb2RlLk1JU1NJTkdfTUZBX0lORk8gKi8pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzdGFydFNpZ25JblBob25lTWZhKGF1dGgsIHtcclxuICAgICAgICAgICAgICAgICAgICBtZmFQZW5kaW5nQ3JlZGVudGlhbDogc2Vzc2lvbi5jcmVkZW50aWFsLFxyXG4gICAgICAgICAgICAgICAgICAgIG1mYUVucm9sbG1lbnRJZCxcclxuICAgICAgICAgICAgICAgICAgICBwaG9uZVNpZ25JbkluZm86IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjYXB0Y2hhVG9rZW5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5waG9uZVJlc3BvbnNlSW5mby5zZXNzaW9uSW5mbztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgeyBzZXNzaW9uSW5mbyB9ID0gYXdhaXQgc2VuZFBob25lVmVyaWZpY2F0aW9uQ29kZShhdXRoLCB7XHJcbiAgICAgICAgICAgICAgICBwaG9uZU51bWJlcjogcGhvbmVJbmZvT3B0aW9ucy5waG9uZU51bWJlcixcclxuICAgICAgICAgICAgICAgIHJlY2FwdGNoYVRva2VuXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gc2Vzc2lvbkluZm87XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdmVyaWZpZXIuX3Jlc2V0KCk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFVwZGF0ZXMgdGhlIHVzZXIncyBwaG9uZSBudW1iZXIuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRoaXMgbWV0aG9kIGRvZXMgbm90IHdvcmsgaW4gYSBOb2RlLmpzIGVudmlyb25tZW50IG9yIG9uIGFueSB7QGxpbmsgVXNlcn0gc2lnbmVkIGluIGJ5XHJcbiAqIHtAbGluayBBdXRofSBpbnN0YW5jZXMgY3JlYXRlZCB3aXRoIGEge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VTZXJ2ZXJBcHB9LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBcclxuICogLy8gJ3JlY2FwdGNoYS1jb250YWluZXInIGlzIHRoZSBJRCBvZiBhbiBlbGVtZW50IGluIHRoZSBET00uXHJcbiAqIGNvbnN0IGFwcGxpY2F0aW9uVmVyaWZpZXIgPSBuZXcgUmVjYXB0Y2hhVmVyaWZpZXIoJ3JlY2FwdGNoYS1jb250YWluZXInKTtcclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgUGhvbmVBdXRoUHJvdmlkZXIoYXV0aCk7XHJcbiAqIGNvbnN0IHZlcmlmaWNhdGlvbklkID0gYXdhaXQgcHJvdmlkZXIudmVyaWZ5UGhvbmVOdW1iZXIoJysxNjUwNTU1MDEwMScsIGFwcGxpY2F0aW9uVmVyaWZpZXIpO1xyXG4gKiAvLyBPYnRhaW4gdGhlIHZlcmlmaWNhdGlvbkNvZGUgZnJvbSB0aGUgdXNlci5cclxuICogY29uc3QgcGhvbmVDcmVkZW50aWFsID0gUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbCh2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSk7XHJcbiAqIGF3YWl0IHVwZGF0ZVBob25lTnVtYmVyKHVzZXIsIHBob25lQ3JlZGVudGlhbCk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gY3JlZGVudGlhbCAtIEEgY3JlZGVudGlhbCBhdXRoZW50aWNhdGluZyB0aGUgbmV3IHBob25lIG51bWJlci5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlUGhvbmVOdW1iZXIodXNlciwgY3JlZGVudGlhbCkge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgaWYgKF9pc0ZpcmViYXNlU2VydmVyQXBwKHVzZXJJbnRlcm5hbC5hdXRoLmFwcCkpIHtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoX3NlcnZlckFwcEN1cnJlbnRVc2VyT3BlcmF0aW9uTm90U3VwcG9ydGVkRXJyb3IodXNlckludGVybmFsLmF1dGgpKTtcclxuICAgIH1cclxuICAgIGF3YWl0IF9saW5rJDEodXNlckludGVybmFsLCBjcmVkZW50aWFsKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZXIgZm9yIGdlbmVyYXRpbmcgYW4ge0BsaW5rIFBob25lQXV0aENyZWRlbnRpYWx9LlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBgUGhvbmVBdXRoUHJvdmlkZXJgIGRvZXMgbm90IHdvcmsgaW4gYSBOb2RlLmpzIGVudmlyb25tZW50LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vICdyZWNhcHRjaGEtY29udGFpbmVyJyBpcyB0aGUgSUQgb2YgYW4gZWxlbWVudCBpbiB0aGUgRE9NLlxyXG4gKiBjb25zdCBhcHBsaWNhdGlvblZlcmlmaWVyID0gbmV3IFJlY2FwdGNoYVZlcmlmaWVyKCdyZWNhcHRjaGEtY29udGFpbmVyJyk7XHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IFBob25lQXV0aFByb3ZpZGVyKGF1dGgpO1xyXG4gKiBjb25zdCB2ZXJpZmljYXRpb25JZCA9IGF3YWl0IHByb3ZpZGVyLnZlcmlmeVBob25lTnVtYmVyKCcrMTY1MDU1NTAxMDEnLCBhcHBsaWNhdGlvblZlcmlmaWVyKTtcclxuICogLy8gT2J0YWluIHRoZSB2ZXJpZmljYXRpb25Db2RlIGZyb20gdGhlIHVzZXIuXHJcbiAqIGNvbnN0IHBob25lQ3JlZGVudGlhbCA9IFBob25lQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwodmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUpO1xyXG4gKiBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IHNpZ25JbldpdGhDcmVkZW50aWFsKGF1dGgsIHBob25lQ3JlZGVudGlhbCk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBQaG9uZUF1dGhQcm92aWRlciB7XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBhdXRoIC0gVGhlIEZpcmViYXNlIHtAbGluayBBdXRofSBpbnN0YW5jZSBpbiB3aGljaCBzaWduLWlucyBzaG91bGQgb2NjdXIuXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihhdXRoKSB7XHJcbiAgICAgICAgLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFByb3ZpZGVySWR9LlBIT05FLiAqL1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJJZCA9IFBob25lQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lEO1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IF9jYXN0QXV0aChhdXRoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIFN0YXJ0cyBhIHBob25lIG51bWJlciBhdXRoZW50aWNhdGlvbiBmbG93IGJ5IHNlbmRpbmcgYSB2ZXJpZmljYXRpb24gY29kZSB0byB0aGUgZ2l2ZW4gcGhvbmVcclxuICAgICAqIG51bWJlci5cclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICogY29uc3QgcHJvdmlkZXIgPSBuZXcgUGhvbmVBdXRoUHJvdmlkZXIoYXV0aCk7XHJcbiAgICAgKiBjb25zdCB2ZXJpZmljYXRpb25JZCA9IGF3YWl0IHByb3ZpZGVyLnZlcmlmeVBob25lTnVtYmVyKHBob25lTnVtYmVyLCBhcHBsaWNhdGlvblZlcmlmaWVyKTtcclxuICAgICAqIC8vIE9idGFpbiB2ZXJpZmljYXRpb25Db2RlIGZyb20gdGhlIHVzZXIuXHJcbiAgICAgKiBjb25zdCBhdXRoQ3JlZGVudGlhbCA9IFBob25lQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwodmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUpO1xyXG4gICAgICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBzaWduSW5XaXRoQ3JlZGVudGlhbChhdXRoLCBhdXRoQ3JlZGVudGlhbCk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogQW4gYWx0ZXJuYXRpdmUgZmxvdyBpcyBwcm92aWRlZCB1c2luZyB0aGUgYHNpZ25JbldpdGhQaG9uZU51bWJlcmAgbWV0aG9kLlxyXG4gICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICogY29uc3QgY29uZmlybWF0aW9uUmVzdWx0ID0gc2lnbkluV2l0aFBob25lTnVtYmVyKGF1dGgsIHBob25lTnVtYmVyLCBhcHBsaWNhdGlvblZlcmlmaWVyKTtcclxuICAgICAqIC8vIE9idGFpbiB2ZXJpZmljYXRpb25Db2RlIGZyb20gdGhlIHVzZXIuXHJcbiAgICAgKiBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGNvbmZpcm1hdGlvblJlc3VsdC5jb25maXJtKHZlcmlmaWNhdGlvbkNvZGUpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBob25lSW5mb09wdGlvbnMgLSBUaGUgdXNlcidzIHtAbGluayBQaG9uZUluZm9PcHRpb25zfS4gVGhlIHBob25lIG51bWJlciBzaG91bGQgYmUgaW5cclxuICAgICAqIEUuMTY0IGZvcm1hdCAoZS5nLiArMTY1MDU1NTAxMDEpLlxyXG4gICAgICogQHBhcmFtIGFwcGxpY2F0aW9uVmVyaWZpZXIgLSBGb3IgYWJ1c2UgcHJldmVudGlvbiwgdGhpcyBtZXRob2QgYWxzbyByZXF1aXJlcyBhXHJcbiAgICAgKiB7QGxpbmsgQXBwbGljYXRpb25WZXJpZmllcn0uIFRoaXMgU0RLIGluY2x1ZGVzIGEgcmVDQVBUQ0hBLWJhc2VkIGltcGxlbWVudGF0aW9uLFxyXG4gICAgICoge0BsaW5rIFJlY2FwdGNoYVZlcmlmaWVyfS5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgZm9yIGEgdmVyaWZpY2F0aW9uIElEIHRoYXQgY2FuIGJlIHBhc3NlZCB0b1xyXG4gICAgICoge0BsaW5rIFBob25lQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWx9IHRvIGlkZW50aWZ5IHRoaXMgZmxvdy4uXHJcbiAgICAgKi9cclxuICAgIHZlcmlmeVBob25lTnVtYmVyKHBob25lT3B0aW9ucywgYXBwbGljYXRpb25WZXJpZmllcikge1xyXG4gICAgICAgIHJldHVybiBfdmVyaWZ5UGhvbmVOdW1iZXIodGhpcy5hdXRoLCBwaG9uZU9wdGlvbnMsIGdldE1vZHVsYXJJbnN0YW5jZShhcHBsaWNhdGlvblZlcmlmaWVyKSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBwaG9uZSBhdXRoIGNyZWRlbnRpYWwsIGdpdmVuIHRoZSB2ZXJpZmljYXRpb24gSUQgZnJvbVxyXG4gICAgICoge0BsaW5rIFBob25lQXV0aFByb3ZpZGVyLnZlcmlmeVBob25lTnVtYmVyfSBhbmQgdGhlIGNvZGUgdGhhdCB3YXMgc2VudCB0byB0aGUgdXNlcidzXHJcbiAgICAgKiBtb2JpbGUgZGV2aWNlLlxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBgYGBqYXZhc2NyaXB0XHJcbiAgICAgKiBjb25zdCBwcm92aWRlciA9IG5ldyBQaG9uZUF1dGhQcm92aWRlcihhdXRoKTtcclxuICAgICAqIGNvbnN0IHZlcmlmaWNhdGlvbklkID0gcHJvdmlkZXIudmVyaWZ5UGhvbmVOdW1iZXIocGhvbmVOdW1iZXIsIGFwcGxpY2F0aW9uVmVyaWZpZXIpO1xyXG4gICAgICogLy8gT2J0YWluIHZlcmlmaWNhdGlvbkNvZGUgZnJvbSB0aGUgdXNlci5cclxuICAgICAqIGNvbnN0IGF1dGhDcmVkZW50aWFsID0gUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbCh2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSk7XHJcbiAgICAgKiBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IHNpZ25JbldpdGhDcmVkZW50aWFsKGF1dGgsIGF1dGhDcmVkZW50aWFsKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBBbiBhbHRlcm5hdGl2ZSBmbG93IGlzIHByb3ZpZGVkIHVzaW5nIHRoZSBgc2lnbkluV2l0aFBob25lTnVtYmVyYCBtZXRob2QuXHJcbiAgICAgKiBgYGBqYXZhc2NyaXB0XHJcbiAgICAgKiBjb25zdCBjb25maXJtYXRpb25SZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUGhvbmVOdW1iZXIoYXV0aCwgcGhvbmVOdW1iZXIsIGFwcGxpY2F0aW9uVmVyaWZpZXIpO1xyXG4gICAgICogLy8gT2J0YWluIHZlcmlmaWNhdGlvbkNvZGUgZnJvbSB0aGUgdXNlci5cclxuICAgICAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgY29uZmlybWF0aW9uUmVzdWx0LmNvbmZpcm0odmVyaWZpY2F0aW9uQ29kZSk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdmVyaWZpY2F0aW9uSWQgLSBUaGUgdmVyaWZpY2F0aW9uIElEIHJldHVybmVkIGZyb20ge0BsaW5rIFBob25lQXV0aFByb3ZpZGVyLnZlcmlmeVBob25lTnVtYmVyfS5cclxuICAgICAqIEBwYXJhbSB2ZXJpZmljYXRpb25Db2RlIC0gVGhlIHZlcmlmaWNhdGlvbiBjb2RlIHNlbnQgdG8gdGhlIHVzZXIncyBtb2JpbGUgZGV2aWNlLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIFRoZSBhdXRoIHByb3ZpZGVyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsKHZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlKSB7XHJcbiAgICAgICAgcmV0dXJuIFBob25lQXV0aENyZWRlbnRpYWwuX2Zyb21WZXJpZmljYXRpb24odmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBHZW5lcmF0ZXMgYW4ge0BsaW5rIEF1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIFVzZXJDcmVkZW50aWFsfS5cclxuICAgICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbVJlc3VsdCh1c2VyQ3JlZGVudGlhbCkge1xyXG4gICAgICAgIGNvbnN0IGNyZWRlbnRpYWwgPSB1c2VyQ3JlZGVudGlhbDtcclxuICAgICAgICByZXR1cm4gUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoY3JlZGVudGlhbCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYW4ge0BsaW5rIEF1dGhDcmVkZW50aWFsfSB3aGVuIHBhc3NlZCBhbiBlcnJvci5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICpcclxuICAgICAqIFRoaXMgbWV0aG9kIHdvcmtzIGZvciBlcnJvcnMgbGlrZVxyXG4gICAgICogYGF1dGgvYWNjb3VudC1leGlzdHMtd2l0aC1kaWZmZXJlbnQtY3JlZGVudGlhbHNgLiBUaGlzIGlzIHVzZWZ1bCBmb3JcclxuICAgICAqIHJlY292ZXJpbmcgd2hlbiBhdHRlbXB0aW5nIHRvIHNldCBhIHVzZXIncyBwaG9uZSBudW1iZXIgYnV0IHRoZSBudW1iZXJcclxuICAgICAqIGluIHF1ZXN0aW9uIGlzIGFscmVhZHkgdGllZCB0byBhbm90aGVyIGFjY291bnQuIEZvciBleGFtcGxlLCB0aGUgZm9sbG93aW5nXHJcbiAgICAgKiBjb2RlIHRyaWVzIHRvIHVwZGF0ZSB0aGUgY3VycmVudCB1c2VyJ3MgcGhvbmUgbnVtYmVyLCBhbmQgaWYgdGhhdFxyXG4gICAgICogZmFpbHMsIGxpbmtzIHRoZSB1c2VyIHdpdGggdGhlIGFjY291bnQgYXNzb2NpYXRlZCB3aXRoIHRoYXQgbnVtYmVyOlxyXG4gICAgICpcclxuICAgICAqIGBgYGpzXHJcbiAgICAgKiBjb25zdCBwcm92aWRlciA9IG5ldyBQaG9uZUF1dGhQcm92aWRlcihhdXRoKTtcclxuICAgICAqIGNvbnN0IHZlcmlmaWNhdGlvbklkID0gYXdhaXQgcHJvdmlkZXIudmVyaWZ5UGhvbmVOdW1iZXIobnVtYmVyLCB2ZXJpZmllcik7XHJcbiAgICAgKiB0cnkge1xyXG4gICAgICogICBjb25zdCBjb2RlID0gJyc7IC8vIFByb21wdCB0aGUgdXNlciBmb3IgdGhlIHZlcmlmaWNhdGlvbiBjb2RlXHJcbiAgICAgKiAgIGF3YWl0IHVwZGF0ZVBob25lTnVtYmVyKFxyXG4gICAgICogICAgICAgYXV0aC5jdXJyZW50VXNlcixcclxuICAgICAqICAgICAgIFBob25lQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwodmVyaWZpY2F0aW9uSWQsIGNvZGUpKTtcclxuICAgICAqIH0gY2F0Y2ggKGUpIHtcclxuICAgICAqICAgaWYgKChlIGFzIEZpcmViYXNlRXJyb3IpPy5jb2RlID09PSAnYXV0aC9hY2NvdW50LWV4aXN0cy13aXRoLWRpZmZlcmVudC1jcmVkZW50aWFsJykge1xyXG4gICAgICogICAgIGNvbnN0IGNyZWQgPSBQaG9uZUF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbUVycm9yKGUpO1xyXG4gICAgICogICAgIGF3YWl0IGxpbmtXaXRoQ3JlZGVudGlhbChhdXRoLmN1cnJlbnRVc2VyLCBjcmVkKTtcclxuICAgICAqICAgfVxyXG4gICAgICogfVxyXG4gICAgICpcclxuICAgICAqIC8vIEF0IHRoaXMgcG9pbnQsIGF1dGguY3VycmVudFVzZXIucGhvbmVOdW1iZXIgPT09IG51bWJlci5cclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBlcnJvciAtIFRoZSBlcnJvciB0byBnZW5lcmF0ZSBhIGNyZWRlbnRpYWwgZnJvbS5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tRXJyb3IoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoKGVycm9yLmN1c3RvbURhdGEgfHwge30pKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh7IF90b2tlblJlc3BvbnNlOiB0b2tlblJlc3BvbnNlIH0pIHtcclxuICAgICAgICBpZiAoIXRva2VuUmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgcGhvbmVOdW1iZXIsIHRlbXBvcmFyeVByb29mIH0gPSB0b2tlblJlc3BvbnNlO1xyXG4gICAgICAgIGlmIChwaG9uZU51bWJlciAmJiB0ZW1wb3JhcnlQcm9vZikge1xyXG4gICAgICAgICAgICByZXR1cm4gUGhvbmVBdXRoQ3JlZGVudGlhbC5fZnJvbVRva2VuUmVzcG9uc2UocGhvbmVOdW1iZXIsIHRlbXBvcmFyeVByb29mKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbn1cclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFByb3ZpZGVySWR9LlBIT05FLiAqL1xyXG5QaG9uZUF1dGhQcm92aWRlci5QUk9WSURFUl9JRCA9IFwicGhvbmVcIiAvKiBQcm92aWRlcklkLlBIT05FICovO1xyXG4vKiogQWx3YXlzIHNldCB0byB7QGxpbmsgU2lnbkluTWV0aG9kfS5QSE9ORS4gKi9cclxuUGhvbmVBdXRoUHJvdmlkZXIuUEhPTkVfU0lHTl9JTl9NRVRIT0QgPSBcInBob25lXCIgLyogU2lnbkluTWV0aG9kLlBIT05FICovO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQ2hvb3NlcyBhIHBvcHVwL3JlZGlyZWN0IHJlc29sdmVyIHRvIHVzZS4gVGhpcyBwcmVmZXJzIHRoZSBvdmVycmlkZSAod2hpY2hcclxuICogaXMgZGlyZWN0bHkgcGFzc2VkIGluKSwgYW5kIGZhbGxzIGJhY2sgdG8gdGhlIHByb3BlcnR5IHNldCBvbiB0aGUgYXV0aFxyXG4gKiBvYmplY3QuIElmIG5laXRoZXIgYXJlIGF2YWlsYWJsZSwgdGhpcyBmdW5jdGlvbiBlcnJvcnMgdy8gYW4gYXJndW1lbnQgZXJyb3IuXHJcbiAqL1xyXG5mdW5jdGlvbiBfd2l0aERlZmF1bHRSZXNvbHZlcihhdXRoLCByZXNvbHZlck92ZXJyaWRlKSB7XHJcbiAgICBpZiAocmVzb2x2ZXJPdmVycmlkZSkge1xyXG4gICAgICAgIHJldHVybiBfZ2V0SW5zdGFuY2UocmVzb2x2ZXJPdmVycmlkZSk7XHJcbiAgICB9XHJcbiAgICBfYXNzZXJ0KGF1dGguX3BvcHVwUmVkaXJlY3RSZXNvbHZlciwgYXV0aCwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgcmV0dXJuIGF1dGguX3BvcHVwUmVkaXJlY3RSZXNvbHZlcjtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBJZHBDcmVkZW50aWFsIGV4dGVuZHMgQXV0aENyZWRlbnRpYWwge1xyXG4gICAgY29uc3RydWN0b3IocGFyYW1zKSB7XHJcbiAgICAgICAgc3VwZXIoXCJjdXN0b21cIiAvKiBQcm92aWRlcklkLkNVU1RPTSAqLywgXCJjdXN0b21cIiAvKiBQcm92aWRlcklkLkNVU1RPTSAqLyk7XHJcbiAgICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XHJcbiAgICB9XHJcbiAgICBfZ2V0SWRUb2tlblJlc3BvbnNlKGF1dGgpIHtcclxuICAgICAgICByZXR1cm4gc2lnbkluV2l0aElkcChhdXRoLCB0aGlzLl9idWlsZElkcFJlcXVlc3QoKSk7XHJcbiAgICB9XHJcbiAgICBfbGlua1RvSWRUb2tlbihhdXRoLCBpZFRva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhJZHAoYXV0aCwgdGhpcy5fYnVpbGRJZHBSZXF1ZXN0KGlkVG9rZW4pKTtcclxuICAgIH1cclxuICAgIF9nZXRSZWF1dGhlbnRpY2F0aW9uUmVzb2x2ZXIoYXV0aCkge1xyXG4gICAgICAgIHJldHVybiBzaWduSW5XaXRoSWRwKGF1dGgsIHRoaXMuX2J1aWxkSWRwUmVxdWVzdCgpKTtcclxuICAgIH1cclxuICAgIF9idWlsZElkcFJlcXVlc3QoaWRUb2tlbikge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgICAgIHJlcXVlc3RVcmk6IHRoaXMucGFyYW1zLnJlcXVlc3RVcmksXHJcbiAgICAgICAgICAgIHNlc3Npb25JZDogdGhpcy5wYXJhbXMuc2Vzc2lvbklkLFxyXG4gICAgICAgICAgICBwb3N0Qm9keTogdGhpcy5wYXJhbXMucG9zdEJvZHksXHJcbiAgICAgICAgICAgIHRlbmFudElkOiB0aGlzLnBhcmFtcy50ZW5hbnRJZCxcclxuICAgICAgICAgICAgcGVuZGluZ1Rva2VuOiB0aGlzLnBhcmFtcy5wZW5kaW5nVG9rZW4sXHJcbiAgICAgICAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlLFxyXG4gICAgICAgICAgICByZXR1cm5JZHBDcmVkZW50aWFsOiB0cnVlXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAoaWRUb2tlbikge1xyXG4gICAgICAgICAgICByZXF1ZXN0LmlkVG9rZW4gPSBpZFRva2VuO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVxdWVzdDtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBfc2lnbkluKHBhcmFtcykge1xyXG4gICAgcmV0dXJuIF9zaWduSW5XaXRoQ3JlZGVudGlhbChwYXJhbXMuYXV0aCwgbmV3IElkcENyZWRlbnRpYWwocGFyYW1zKSwgcGFyYW1zLmJ5cGFzc0F1dGhTdGF0ZSk7XHJcbn1cclxuZnVuY3Rpb24gX3JlYXV0aChwYXJhbXMpIHtcclxuICAgIGNvbnN0IHsgYXV0aCwgdXNlciB9ID0gcGFyYW1zO1xyXG4gICAgX2Fzc2VydCh1c2VyLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICByZXR1cm4gX3JlYXV0aGVudGljYXRlKHVzZXIsIG5ldyBJZHBDcmVkZW50aWFsKHBhcmFtcyksIHBhcmFtcy5ieXBhc3NBdXRoU3RhdGUpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9saW5rKHBhcmFtcykge1xyXG4gICAgY29uc3QgeyBhdXRoLCB1c2VyIH0gPSBwYXJhbXM7XHJcbiAgICBfYXNzZXJ0KHVzZXIsIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIHJldHVybiBfbGluayQxKHVzZXIsIG5ldyBJZHBDcmVkZW50aWFsKHBhcmFtcyksIHBhcmFtcy5ieXBhc3NBdXRoU3RhdGUpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQb3B1cCBldmVudCBtYW5hZ2VyLiBIYW5kbGVzIHRoZSBwb3B1cCdzIGVudGlyZSBsaWZlY3ljbGU7IGxpc3RlbnMgdG8gYXV0aFxyXG4gKiBldmVudHNcclxuICovXHJcbmNsYXNzIEFic3RyYWN0UG9wdXBSZWRpcmVjdE9wZXJhdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3RvcihhdXRoLCBmaWx0ZXIsIHJlc29sdmVyLCB1c2VyLCBieXBhc3NBdXRoU3RhdGUgPSBmYWxzZSkge1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IGF1dGg7XHJcbiAgICAgICAgdGhpcy5yZXNvbHZlciA9IHJlc29sdmVyO1xyXG4gICAgICAgIHRoaXMudXNlciA9IHVzZXI7XHJcbiAgICAgICAgdGhpcy5ieXBhc3NBdXRoU3RhdGUgPSBieXBhc3NBdXRoU3RhdGU7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nUHJvbWlzZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5ldmVudE1hbmFnZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZmlsdGVyID0gQXJyYXkuaXNBcnJheShmaWx0ZXIpID8gZmlsdGVyIDogW2ZpbHRlcl07XHJcbiAgICB9XHJcbiAgICBleGVjdXRlKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucGVuZGluZ1Byb21pc2UgPSB7IHJlc29sdmUsIHJlamVjdCB9O1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudE1hbmFnZXIgPSBhd2FpdCB0aGlzLnJlc29sdmVyLl9pbml0aWFsaXplKHRoaXMuYXV0aCk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm9uRXhlY3V0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50TWFuYWdlci5yZWdpc3RlckNvbnN1bWVyKHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlamVjdChlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgb25BdXRoRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBjb25zdCB7IHVybFJlc3BvbnNlLCBzZXNzaW9uSWQsIHBvc3RCb2R5LCB0ZW5hbnRJZCwgZXJyb3IsIHR5cGUgfSA9IGV2ZW50O1xyXG4gICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICB0aGlzLnJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcGFyYW1zID0ge1xyXG4gICAgICAgICAgICBhdXRoOiB0aGlzLmF1dGgsXHJcbiAgICAgICAgICAgIHJlcXVlc3RVcmk6IHVybFJlc3BvbnNlLFxyXG4gICAgICAgICAgICBzZXNzaW9uSWQ6IHNlc3Npb25JZCxcclxuICAgICAgICAgICAgdGVuYW50SWQ6IHRlbmFudElkIHx8IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgcG9zdEJvZHk6IHBvc3RCb2R5IHx8IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgdXNlcjogdGhpcy51c2VyLFxyXG4gICAgICAgICAgICBieXBhc3NBdXRoU3RhdGU6IHRoaXMuYnlwYXNzQXV0aFN0YXRlXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLnJlc29sdmUoYXdhaXQgdGhpcy5nZXRJZHBUYXNrKHR5cGUpKHBhcmFtcykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0aGlzLnJlamVjdChlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBvbkVycm9yKGVycm9yKSB7XHJcbiAgICAgICAgdGhpcy5yZWplY3QoZXJyb3IpO1xyXG4gICAgfVxyXG4gICAgZ2V0SWRwVGFzayh0eXBlKSB7XHJcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJzaWduSW5WaWFQb3B1cFwiIC8qIEF1dGhFdmVudFR5cGUuU0lHTl9JTl9WSUFfUE9QVVAgKi86XHJcbiAgICAgICAgICAgIGNhc2UgXCJzaWduSW5WaWFSZWRpcmVjdFwiIC8qIEF1dGhFdmVudFR5cGUuU0lHTl9JTl9WSUFfUkVESVJFQ1QgKi86XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3NpZ25JbjtcclxuICAgICAgICAgICAgY2FzZSBcImxpbmtWaWFQb3B1cFwiIC8qIEF1dGhFdmVudFR5cGUuTElOS19WSUFfUE9QVVAgKi86XHJcbiAgICAgICAgICAgIGNhc2UgXCJsaW5rVmlhUmVkaXJlY3RcIiAvKiBBdXRoRXZlbnRUeXBlLkxJTktfVklBX1JFRElSRUNUICovOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9saW5rO1xyXG4gICAgICAgICAgICBjYXNlIFwicmVhdXRoVmlhUG9wdXBcIiAvKiBBdXRoRXZlbnRUeXBlLlJFQVVUSF9WSUFfUE9QVVAgKi86XHJcbiAgICAgICAgICAgIGNhc2UgXCJyZWF1dGhWaWFSZWRpcmVjdFwiIC8qIEF1dGhFdmVudFR5cGUuUkVBVVRIX1ZJQV9SRURJUkVDVCAqLzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBfcmVhdXRoO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgX2ZhaWwodGhpcy5hdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmVzb2x2ZShjcmVkKSB7XHJcbiAgICAgICAgZGVidWdBc3NlcnQodGhpcy5wZW5kaW5nUHJvbWlzZSwgJ1BlbmRpbmcgcHJvbWlzZSB3YXMgbmV2ZXIgc2V0Jyk7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nUHJvbWlzZS5yZXNvbHZlKGNyZWQpO1xyXG4gICAgICAgIHRoaXMudW5yZWdpc3RlckFuZENsZWFuVXAoKTtcclxuICAgIH1cclxuICAgIHJlamVjdChlcnJvcikge1xyXG4gICAgICAgIGRlYnVnQXNzZXJ0KHRoaXMucGVuZGluZ1Byb21pc2UsICdQZW5kaW5nIHByb21pc2Ugd2FzIG5ldmVyIHNldCcpO1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1Byb21pc2UucmVqZWN0KGVycm9yKTtcclxuICAgICAgICB0aGlzLnVucmVnaXN0ZXJBbmRDbGVhblVwKCk7XHJcbiAgICB9XHJcbiAgICB1bnJlZ2lzdGVyQW5kQ2xlYW5VcCgpIHtcclxuICAgICAgICBpZiAodGhpcy5ldmVudE1hbmFnZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudE1hbmFnZXIudW5yZWdpc3RlckNvbnN1bWVyKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnBlbmRpbmdQcm9taXNlID0gbnVsbDtcclxuICAgICAgICB0aGlzLmNsZWFuVXAoKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBfUE9MTF9XSU5ET1dfQ0xPU0VfVElNRU9VVCA9IG5ldyBEZWxheSgyMDAwLCAxMDAwMCk7XHJcbi8qKlxyXG4gKiBBdXRoZW50aWNhdGVzIGEgRmlyZWJhc2UgY2xpZW50IHVzaW5nIGEgcG9wdXAtYmFzZWQgT0F1dGggYXV0aGVudGljYXRpb24gZmxvdy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogSWYgc3VjY2VlZHMsIHJldHVybnMgdGhlIHNpZ25lZCBpbiB1c2VyIGFsb25nIHdpdGggdGhlIHByb3ZpZGVyJ3MgY3JlZGVudGlhbC4gSWYgc2lnbiBpbiB3YXNcclxuICogdW5zdWNjZXNzZnVsLCByZXR1cm5zIGFuIGVycm9yIG9iamVjdCBjb250YWluaW5nIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGVycm9yLlxyXG4gKlxyXG4gKiBUaGlzIG1ldGhvZCBkb2VzIG5vdCB3b3JrIGluIGEgTm9kZS5qcyBlbnZpcm9ubWVudCBvciB3aXRoIHtAbGluayBBdXRofSBpbnN0YW5jZXMgY3JlYXRlZCB3aXRoIGFcclxuICoge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VTZXJ2ZXJBcHB9LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSBwb3B1cC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgRmFjZWJvb2tBdXRoUHJvdmlkZXIoKTtcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aFBvcHVwKGF1dGgsIHByb3ZpZGVyKTtcclxuICpcclxuICogLy8gVGhlIHNpZ25lZC1pbiB1c2VyIGluZm8uXHJcbiAqIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogLy8gVGhpcyBnaXZlcyB5b3UgYSBGYWNlYm9vayBBY2Nlc3MgVG9rZW4uXHJcbiAqIGNvbnN0IGNyZWRlbnRpYWwgPSBwcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChhdXRoLCByZXN1bHQpO1xyXG4gKiBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBwcm92aWRlciAtIFRoZSBwcm92aWRlciB0byBhdXRoZW50aWNhdGUuIFRoZSBwcm92aWRlciBoYXMgdG8gYmUgYW4ge0BsaW5rIE9BdXRoUHJvdmlkZXJ9LlxyXG4gKiBOb24tT0F1dGggcHJvdmlkZXJzIGxpa2Uge0BsaW5rIEVtYWlsQXV0aFByb3ZpZGVyfSB3aWxsIHRocm93IGFuIGVycm9yLlxyXG4gKiBAcGFyYW0gcmVzb2x2ZXIgLSBBbiBpbnN0YW5jZSBvZiB7QGxpbmsgUG9wdXBSZWRpcmVjdFJlc29sdmVyfSwgb3B0aW9uYWxcclxuICogaWYgYWxyZWFkeSBzdXBwbGllZCB0byB7QGxpbmsgaW5pdGlhbGl6ZUF1dGh9IG9yIHByb3ZpZGVkIGJ5IHtAbGluayBnZXRBdXRofS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aFBvcHVwKGF1dGgsIHByb3ZpZGVyLCByZXNvbHZlcikge1xyXG4gICAgaWYgKF9pc0ZpcmViYXNlU2VydmVyQXBwKGF1dGguYXBwKSkge1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChfY3JlYXRlRXJyb3IoYXV0aCwgXCJvcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50XCIgLyogQXV0aEVycm9yQ29kZS5PUEVSQVRJT05fTk9UX1NVUFBPUlRFRCAqLykpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYXV0aEludGVybmFsID0gX2Nhc3RBdXRoKGF1dGgpO1xyXG4gICAgX2Fzc2VydEluc3RhbmNlT2YoYXV0aCwgcHJvdmlkZXIsIEZlZGVyYXRlZEF1dGhQcm92aWRlcik7XHJcbiAgICBjb25zdCByZXNvbHZlckludGVybmFsID0gX3dpdGhEZWZhdWx0UmVzb2x2ZXIoYXV0aEludGVybmFsLCByZXNvbHZlcik7XHJcbiAgICBjb25zdCBhY3Rpb24gPSBuZXcgUG9wdXBPcGVyYXRpb24oYXV0aEludGVybmFsLCBcInNpZ25JblZpYVBvcHVwXCIgLyogQXV0aEV2ZW50VHlwZS5TSUdOX0lOX1ZJQV9QT1BVUCAqLywgcHJvdmlkZXIsIHJlc29sdmVySW50ZXJuYWwpO1xyXG4gICAgcmV0dXJuIGFjdGlvbi5leGVjdXRlTm90TnVsbCgpO1xyXG59XHJcbi8qKlxyXG4gKiBSZWF1dGhlbnRpY2F0ZXMgdGhlIGN1cnJlbnQgdXNlciB3aXRoIHRoZSBzcGVjaWZpZWQge0BsaW5rIE9BdXRoUHJvdmlkZXJ9IHVzaW5nIGEgcG9wLXVwIGJhc2VkXHJcbiAqIE9BdXRoIGZsb3cuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIElmIHRoZSByZWF1dGhlbnRpY2F0aW9uIGlzIHN1Y2Nlc3NmdWwsIHRoZSByZXR1cm5lZCByZXN1bHQgd2lsbCBjb250YWluIHRoZSB1c2VyIGFuZCB0aGVcclxuICogcHJvdmlkZXIncyBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKiBUaGlzIG1ldGhvZCBkb2VzIG5vdCB3b3JrIGluIGEgTm9kZS5qcyBlbnZpcm9ubWVudCBvciBvbiBhbnkge0BsaW5rIFVzZXJ9IHNpZ25lZCBpbiBieVxyXG4gKiB7QGxpbmsgQXV0aH0gaW5zdGFuY2VzIGNyZWF0ZWQgd2l0aCBhIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlU2VydmVyQXBwfS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcG9wdXAuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEZhY2Vib29rQXV0aFByb3ZpZGVyKCk7XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhQb3B1cChhdXRoLCBwcm92aWRlcik7XHJcbiAqIC8vIFJlYXV0aGVudGljYXRlIHVzaW5nIGEgcG9wdXAuXHJcbiAqIGF3YWl0IHJlYXV0aGVudGljYXRlV2l0aFBvcHVwKHJlc3VsdC51c2VyLCBwcm92aWRlcik7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gcHJvdmlkZXIgLSBUaGUgcHJvdmlkZXIgdG8gYXV0aGVudGljYXRlLiBUaGUgcHJvdmlkZXIgaGFzIHRvIGJlIGFuIHtAbGluayBPQXV0aFByb3ZpZGVyfS5cclxuICogTm9uLU9BdXRoIHByb3ZpZGVycyBsaWtlIHtAbGluayBFbWFpbEF1dGhQcm92aWRlcn0gd2lsbCB0aHJvdyBhbiBlcnJvci5cclxuICogQHBhcmFtIHJlc29sdmVyIC0gQW4gaW5zdGFuY2Ugb2Yge0BsaW5rIFBvcHVwUmVkaXJlY3RSZXNvbHZlcn0sIG9wdGlvbmFsXHJcbiAqIGlmIGFscmVhZHkgc3VwcGxpZWQgdG8ge0BsaW5rIGluaXRpYWxpemVBdXRofSBvciBwcm92aWRlZCBieSB7QGxpbmsgZ2V0QXV0aH0uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHJlYXV0aGVudGljYXRlV2l0aFBvcHVwKHVzZXIsIHByb3ZpZGVyLCByZXNvbHZlcikge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgaWYgKF9pc0ZpcmViYXNlU2VydmVyQXBwKHVzZXJJbnRlcm5hbC5hdXRoLmFwcCkpIHtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoX2NyZWF0ZUVycm9yKHVzZXJJbnRlcm5hbC5hdXRoLCBcIm9wZXJhdGlvbi1ub3Qtc3VwcG9ydGVkLWluLXRoaXMtZW52aXJvbm1lbnRcIiAvKiBBdXRoRXJyb3JDb2RlLk9QRVJBVElPTl9OT1RfU1VQUE9SVEVEICovKSk7XHJcbiAgICB9XHJcbiAgICBfYXNzZXJ0SW5zdGFuY2VPZih1c2VySW50ZXJuYWwuYXV0aCwgcHJvdmlkZXIsIEZlZGVyYXRlZEF1dGhQcm92aWRlcik7XHJcbiAgICBjb25zdCByZXNvbHZlckludGVybmFsID0gX3dpdGhEZWZhdWx0UmVzb2x2ZXIodXNlckludGVybmFsLmF1dGgsIHJlc29sdmVyKTtcclxuICAgIGNvbnN0IGFjdGlvbiA9IG5ldyBQb3B1cE9wZXJhdGlvbih1c2VySW50ZXJuYWwuYXV0aCwgXCJyZWF1dGhWaWFQb3B1cFwiIC8qIEF1dGhFdmVudFR5cGUuUkVBVVRIX1ZJQV9QT1BVUCAqLywgcHJvdmlkZXIsIHJlc29sdmVySW50ZXJuYWwsIHVzZXJJbnRlcm5hbCk7XHJcbiAgICByZXR1cm4gYWN0aW9uLmV4ZWN1dGVOb3ROdWxsKCk7XHJcbn1cclxuLyoqXHJcbiAqIExpbmtzIHRoZSBhdXRoZW50aWNhdGVkIHByb3ZpZGVyIHRvIHRoZSB1c2VyIGFjY291bnQgdXNpbmcgYSBwb3AtdXAgYmFzZWQgT0F1dGggZmxvdy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogSWYgdGhlIGxpbmtpbmcgaXMgc3VjY2Vzc2Z1bCwgdGhlIHJldHVybmVkIHJlc3VsdCB3aWxsIGNvbnRhaW4gdGhlIHVzZXIgYW5kIHRoZSBwcm92aWRlcidzIGNyZWRlbnRpYWwuXHJcbiAqXHJcbiAqIFRoaXMgbWV0aG9kIGRvZXMgbm90IHdvcmsgaW4gYSBOb2RlLmpzIGVudmlyb25tZW50LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgc29tZSBvdGhlciBwcm92aWRlci5cclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQoYXV0aCwgZW1haWwsIHBhc3N3b3JkKTtcclxuICogLy8gTGluayB1c2luZyBhIHBvcHVwLlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBGYWNlYm9va0F1dGhQcm92aWRlcigpO1xyXG4gKiBhd2FpdCBsaW5rV2l0aFBvcHVwKHJlc3VsdC51c2VyLCBwcm92aWRlcik7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gcHJvdmlkZXIgLSBUaGUgcHJvdmlkZXIgdG8gYXV0aGVudGljYXRlLiBUaGUgcHJvdmlkZXIgaGFzIHRvIGJlIGFuIHtAbGluayBPQXV0aFByb3ZpZGVyfS5cclxuICogTm9uLU9BdXRoIHByb3ZpZGVycyBsaWtlIHtAbGluayBFbWFpbEF1dGhQcm92aWRlcn0gd2lsbCB0aHJvdyBhbiBlcnJvci5cclxuICogQHBhcmFtIHJlc29sdmVyIC0gQW4gaW5zdGFuY2Ugb2Yge0BsaW5rIFBvcHVwUmVkaXJlY3RSZXNvbHZlcn0sIG9wdGlvbmFsXHJcbiAqIGlmIGFscmVhZHkgc3VwcGxpZWQgdG8ge0BsaW5rIGluaXRpYWxpemVBdXRofSBvciBwcm92aWRlZCBieSB7QGxpbmsgZ2V0QXV0aH0uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGxpbmtXaXRoUG9wdXAodXNlciwgcHJvdmlkZXIsIHJlc29sdmVyKSB7XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBfYXNzZXJ0SW5zdGFuY2VPZih1c2VySW50ZXJuYWwuYXV0aCwgcHJvdmlkZXIsIEZlZGVyYXRlZEF1dGhQcm92aWRlcik7XHJcbiAgICBjb25zdCByZXNvbHZlckludGVybmFsID0gX3dpdGhEZWZhdWx0UmVzb2x2ZXIodXNlckludGVybmFsLmF1dGgsIHJlc29sdmVyKTtcclxuICAgIGNvbnN0IGFjdGlvbiA9IG5ldyBQb3B1cE9wZXJhdGlvbih1c2VySW50ZXJuYWwuYXV0aCwgXCJsaW5rVmlhUG9wdXBcIiAvKiBBdXRoRXZlbnRUeXBlLkxJTktfVklBX1BPUFVQICovLCBwcm92aWRlciwgcmVzb2x2ZXJJbnRlcm5hbCwgdXNlckludGVybmFsKTtcclxuICAgIHJldHVybiBhY3Rpb24uZXhlY3V0ZU5vdE51bGwoKTtcclxufVxyXG4vKipcclxuICogUG9wdXAgZXZlbnQgbWFuYWdlci4gSGFuZGxlcyB0aGUgcG9wdXAncyBlbnRpcmUgbGlmZWN5Y2xlOyBsaXN0ZW5zIHRvIGF1dGhcclxuICogZXZlbnRzXHJcbiAqXHJcbiAqL1xyXG5jbGFzcyBQb3B1cE9wZXJhdGlvbiBleHRlbmRzIEFic3RyYWN0UG9wdXBSZWRpcmVjdE9wZXJhdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3RvcihhdXRoLCBmaWx0ZXIsIHByb3ZpZGVyLCByZXNvbHZlciwgdXNlcikge1xyXG4gICAgICAgIHN1cGVyKGF1dGgsIGZpbHRlciwgcmVzb2x2ZXIsIHVzZXIpO1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXIgPSBwcm92aWRlcjtcclxuICAgICAgICB0aGlzLmF1dGhXaW5kb3cgPSBudWxsO1xyXG4gICAgICAgIHRoaXMucG9sbElkID0gbnVsbDtcclxuICAgICAgICBpZiAoUG9wdXBPcGVyYXRpb24uY3VycmVudFBvcHVwQWN0aW9uKSB7XHJcbiAgICAgICAgICAgIFBvcHVwT3BlcmF0aW9uLmN1cnJlbnRQb3B1cEFjdGlvbi5jYW5jZWwoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgUG9wdXBPcGVyYXRpb24uY3VycmVudFBvcHVwQWN0aW9uID0gdGhpcztcclxuICAgIH1cclxuICAgIGFzeW5jIGV4ZWN1dGVOb3ROdWxsKCkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZXhlY3V0ZSgpO1xyXG4gICAgICAgIF9hc3NlcnQocmVzdWx0LCB0aGlzLmF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG4gICAgYXN5bmMgb25FeGVjdXRpb24oKSB7XHJcbiAgICAgICAgZGVidWdBc3NlcnQodGhpcy5maWx0ZXIubGVuZ3RoID09PSAxLCAnUG9wdXAgb3BlcmF0aW9ucyBvbmx5IGhhbmRsZSBvbmUgZXZlbnQnKTtcclxuICAgICAgICBjb25zdCBldmVudElkID0gX2dlbmVyYXRlRXZlbnRJZCgpO1xyXG4gICAgICAgIHRoaXMuYXV0aFdpbmRvdyA9IGF3YWl0IHRoaXMucmVzb2x2ZXIuX29wZW5Qb3B1cCh0aGlzLmF1dGgsIHRoaXMucHJvdmlkZXIsIHRoaXMuZmlsdGVyWzBdLCAvLyBUaGVyZSdzIGFsd2F5cyBvbmUsIHNlZSBjb25zdHJ1Y3RvclxyXG4gICAgICAgIGV2ZW50SWQpO1xyXG4gICAgICAgIHRoaXMuYXV0aFdpbmRvdy5hc3NvY2lhdGVkRXZlbnQgPSBldmVudElkO1xyXG4gICAgICAgIC8vIENoZWNrIGZvciB3ZWIgc3RvcmFnZSBzdXBwb3J0IGFuZCBvcmlnaW4gdmFsaWRhdGlvbiBfYWZ0ZXJfIHRoZSBwb3B1cCBpc1xyXG4gICAgICAgIC8vIGxvYWRlZC4gVGhlc2Ugb3BlcmF0aW9ucyBhcmUgc2xvdyAofjEgc2Vjb25kIG9yIHNvKSBSYXRoZXIgdGhhblxyXG4gICAgICAgIC8vIHdhaXRpbmcgb24gdGhlbSBiZWZvcmUgb3BlbmluZyB0aGUgd2luZG93LCBvcHRpbWlzdGljYWxseSBvcGVuIHRoZSBwb3B1cFxyXG4gICAgICAgIC8vIGFuZCBjaGVjayBmb3Igc3RvcmFnZSBzdXBwb3J0IGF0IHRoZSBzYW1lIHRpbWUuIElmIHN0b3JhZ2Ugc3VwcG9ydCBpc1xyXG4gICAgICAgIC8vIG5vdCBhdmFpbGFibGUsIHRoaXMgd2lsbCBjYXVzZSB0aGUgd2hvbGUgdGhpbmcgdG8gcmVqZWN0IHByb3Blcmx5LiBJdFxyXG4gICAgICAgIC8vIHdpbGwgYWxzbyBjbG9zZSB0aGUgcG9wdXAsIGJ1dCBzaW5jZSB0aGUgcHJvbWlzZSBoYXMgYWxyZWFkeSByZWplY3RlZCxcclxuICAgICAgICAvLyB0aGUgcG9wdXAgY2xvc2VkIGJ5IHVzZXIgcG9sbCB3aWxsIHJlamVjdCBpbnRvIHRoZSB2b2lkLlxyXG4gICAgICAgIHRoaXMucmVzb2x2ZXIuX29yaWdpblZhbGlkYXRpb24odGhpcy5hdXRoKS5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZWplY3QoZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5yZXNvbHZlci5faXNJZnJhbWVXZWJTdG9yYWdlU3VwcG9ydGVkKHRoaXMuYXV0aCwgaXNTdXBwb3J0ZWQgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWlzU3VwcG9ydGVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlamVjdChfY3JlYXRlRXJyb3IodGhpcy5hdXRoLCBcIndlYi1zdG9yYWdlLXVuc3VwcG9ydGVkXCIgLyogQXV0aEVycm9yQ29kZS5XRUJfU1RPUkFHRV9VTlNVUFBPUlRFRCAqLykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gSGFuZGxlIHVzZXIgY2xvc3VyZS4gTm90aWNlIHRoaXMgZG9lcyAqbm90KiB1c2UgYXdhaXRcclxuICAgICAgICB0aGlzLnBvbGxVc2VyQ2FuY2VsbGF0aW9uKCk7XHJcbiAgICB9XHJcbiAgICBnZXQgZXZlbnRJZCgpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgcmV0dXJuICgoX2EgPSB0aGlzLmF1dGhXaW5kb3cpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5hc3NvY2lhdGVkRXZlbnQpIHx8IG51bGw7XHJcbiAgICB9XHJcbiAgICBjYW5jZWwoKSB7XHJcbiAgICAgICAgdGhpcy5yZWplY3QoX2NyZWF0ZUVycm9yKHRoaXMuYXV0aCwgXCJjYW5jZWxsZWQtcG9wdXAtcmVxdWVzdFwiIC8qIEF1dGhFcnJvckNvZGUuRVhQSVJFRF9QT1BVUF9SRVFVRVNUICovKSk7XHJcbiAgICB9XHJcbiAgICBjbGVhblVwKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmF1dGhXaW5kb3cpIHtcclxuICAgICAgICAgICAgdGhpcy5hdXRoV2luZG93LmNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnBvbGxJZCkge1xyXG4gICAgICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMucG9sbElkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hdXRoV2luZG93ID0gbnVsbDtcclxuICAgICAgICB0aGlzLnBvbGxJZCA9IG51bGw7XHJcbiAgICAgICAgUG9wdXBPcGVyYXRpb24uY3VycmVudFBvcHVwQWN0aW9uID0gbnVsbDtcclxuICAgIH1cclxuICAgIHBvbGxVc2VyQ2FuY2VsbGF0aW9uKCkge1xyXG4gICAgICAgIGNvbnN0IHBvbGwgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgICAgIGlmICgoX2IgPSAoX2EgPSB0aGlzLmF1dGhXaW5kb3cpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS53aW5kb3cpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5jbG9zZWQpIHtcclxuICAgICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IHRoZXJlIGlzIHN1ZmZpY2llbnQgdGltZSBmb3Igd2hhdGV2ZXIgYWN0aW9uIHRvXHJcbiAgICAgICAgICAgICAgICAvLyBjb21wbGV0ZS4gVGhlIHdpbmRvdyBjb3VsZCBoYXZlIGNsb3NlZCBidXQgdGhlIHNpZ24gaW4gbmV0d29ya1xyXG4gICAgICAgICAgICAgICAgLy8gY2FsbCBjb3VsZCBzdGlsbCBiZSBpbiBmbGlnaHQuIFRoaXMgaXMgc3BlY2lmaWNhbGx5IHRydWUgZm9yXHJcbiAgICAgICAgICAgICAgICAvLyBGaXJlZm94IG9yIGlmIHRoZSBvcGVuZXIgaXMgaW4gYW4gaWZyYW1lLCBpbiB3aGljaCBjYXNlIHRoZSBvYXV0aFxyXG4gICAgICAgICAgICAgICAgLy8gaGVscGVyIGNsb3NlcyB0aGUgcG9wdXAuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnBvbGxJZCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvbGxJZCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWplY3QoX2NyZWF0ZUVycm9yKHRoaXMuYXV0aCwgXCJwb3B1cC1jbG9zZWQtYnktdXNlclwiIC8qIEF1dGhFcnJvckNvZGUuUE9QVVBfQ0xPU0VEX0JZX1VTRVIgKi8pKTtcclxuICAgICAgICAgICAgICAgIH0sIDgwMDAgLyogX1RpbWVvdXQuQVVUSF9FVkVOVCAqLyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5wb2xsSWQgPSB3aW5kb3cuc2V0VGltZW91dChwb2xsLCBfUE9MTF9XSU5ET1dfQ0xPU0VfVElNRU9VVC5nZXQoKSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBwb2xsKCk7XHJcbiAgICB9XHJcbn1cclxuLy8gT25seSBvbmUgcG9wdXAgaXMgZXZlciBzaG93biBhdCBvbmNlLiBUaGUgbGlmZWN5Y2xlIG9mIHRoZSBjdXJyZW50IHBvcHVwXHJcbi8vIGNhbiBiZSBtYW5hZ2VkIC8gY2FuY2VsbGVkIGJ5IHRoZSBjb25zdHJ1Y3Rvci5cclxuUG9wdXBPcGVyYXRpb24uY3VycmVudFBvcHVwQWN0aW9uID0gbnVsbDtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgUEVORElOR19SRURJUkVDVF9LRVkgPSAncGVuZGluZ1JlZGlyZWN0JztcclxuLy8gV2Ugb25seSBnZXQgb25lIHJlZGlyZWN0IG91dGNvbWUgZm9yIGFueSBvbmUgYXV0aCwgc28ganVzdCBzdG9yZSBpdFxyXG4vLyBpbiBoZXJlLlxyXG5jb25zdCByZWRpcmVjdE91dGNvbWVNYXAgPSBuZXcgTWFwKCk7XHJcbmNsYXNzIFJlZGlyZWN0QWN0aW9uIGV4dGVuZHMgQWJzdHJhY3RQb3B1cFJlZGlyZWN0T3BlcmF0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKGF1dGgsIHJlc29sdmVyLCBieXBhc3NBdXRoU3RhdGUgPSBmYWxzZSkge1xyXG4gICAgICAgIHN1cGVyKGF1dGgsIFtcclxuICAgICAgICAgICAgXCJzaWduSW5WaWFSZWRpcmVjdFwiIC8qIEF1dGhFdmVudFR5cGUuU0lHTl9JTl9WSUFfUkVESVJFQ1QgKi8sXHJcbiAgICAgICAgICAgIFwibGlua1ZpYVJlZGlyZWN0XCIgLyogQXV0aEV2ZW50VHlwZS5MSU5LX1ZJQV9SRURJUkVDVCAqLyxcclxuICAgICAgICAgICAgXCJyZWF1dGhWaWFSZWRpcmVjdFwiIC8qIEF1dGhFdmVudFR5cGUuUkVBVVRIX1ZJQV9SRURJUkVDVCAqLyxcclxuICAgICAgICAgICAgXCJ1bmtub3duXCIgLyogQXV0aEV2ZW50VHlwZS5VTktOT1dOICovXHJcbiAgICAgICAgXSwgcmVzb2x2ZXIsIHVuZGVmaW5lZCwgYnlwYXNzQXV0aFN0YXRlKTtcclxuICAgICAgICB0aGlzLmV2ZW50SWQgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBPdmVycmlkZSB0aGUgZXhlY3V0ZSBmdW5jdGlvbjsgaWYgd2UgYWxyZWFkeSBoYXZlIGEgcmVkaXJlY3QgcmVzdWx0LCB0aGVuXHJcbiAgICAgKiBqdXN0IHJldHVybiBpdC5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgZXhlY3V0ZSgpIHtcclxuICAgICAgICBsZXQgcmVhZHlPdXRjb21lID0gcmVkaXJlY3RPdXRjb21lTWFwLmdldCh0aGlzLmF1dGguX2tleSgpKTtcclxuICAgICAgICBpZiAoIXJlYWR5T3V0Y29tZSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaGFzUGVuZGluZ1JlZGlyZWN0ID0gYXdhaXQgX2dldEFuZENsZWFyUGVuZGluZ1JlZGlyZWN0U3RhdHVzKHRoaXMucmVzb2x2ZXIsIHRoaXMuYXV0aCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBoYXNQZW5kaW5nUmVkaXJlY3QgPyBhd2FpdCBzdXBlci5leGVjdXRlKCkgOiBudWxsO1xyXG4gICAgICAgICAgICAgICAgcmVhZHlPdXRjb21lID0gKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIHJlYWR5T3V0Y29tZSA9ICgpID0+IFByb21pc2UucmVqZWN0KGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlZGlyZWN0T3V0Y29tZU1hcC5zZXQodGhpcy5hdXRoLl9rZXkoKSwgcmVhZHlPdXRjb21lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgd2UncmUgbm90IGJ5cGFzc2luZyBhdXRoIHN0YXRlLCB0aGUgcmVhZHkgb3V0Y29tZSBzaG91bGQgYmUgc2V0IHRvXHJcbiAgICAgICAgLy8gbnVsbC5cclxuICAgICAgICBpZiAoIXRoaXMuYnlwYXNzQXV0aFN0YXRlKSB7XHJcbiAgICAgICAgICAgIHJlZGlyZWN0T3V0Y29tZU1hcC5zZXQodGhpcy5hdXRoLl9rZXkoKSwgKCkgPT4gUHJvbWlzZS5yZXNvbHZlKG51bGwpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlYWR5T3V0Y29tZSgpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgb25BdXRoRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gXCJzaWduSW5WaWFSZWRpcmVjdFwiIC8qIEF1dGhFdmVudFR5cGUuU0lHTl9JTl9WSUFfUkVESVJFQ1QgKi8pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLm9uQXV0aEV2ZW50KGV2ZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZXZlbnQudHlwZSA9PT0gXCJ1bmtub3duXCIgLyogQXV0aEV2ZW50VHlwZS5VTktOT1dOICovKSB7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBzZW50aW5lbCB2YWx1ZSBpbmRpY2F0aW5nIHRoZXJlJ3Mgbm8gcGVuZGluZyByZWRpcmVjdFxyXG4gICAgICAgICAgICB0aGlzLnJlc29sdmUobnVsbCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGV2ZW50LmV2ZW50SWQpIHtcclxuICAgICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHRoaXMuYXV0aC5fcmVkaXJlY3RVc2VyRm9ySWQoZXZlbnQuZXZlbnRJZCk7XHJcbiAgICAgICAgICAgIGlmICh1c2VyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVzZXIgPSB1c2VyO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLm9uQXV0aEV2ZW50KGV2ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzb2x2ZShudWxsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGFzeW5jIG9uRXhlY3V0aW9uKCkgeyB9XHJcbiAgICBjbGVhblVwKCkgeyB9XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX2dldEFuZENsZWFyUGVuZGluZ1JlZGlyZWN0U3RhdHVzKHJlc29sdmVyLCBhdXRoKSB7XHJcbiAgICBjb25zdCBrZXkgPSBwZW5kaW5nUmVkaXJlY3RLZXkoYXV0aCk7XHJcbiAgICBjb25zdCBwZXJzaXN0ZW5jZSA9IHJlc29sdmVyUGVyc2lzdGVuY2UocmVzb2x2ZXIpO1xyXG4gICAgaWYgKCEoYXdhaXQgcGVyc2lzdGVuY2UuX2lzQXZhaWxhYmxlKCkpKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgY29uc3QgaGFzUGVuZGluZ1JlZGlyZWN0ID0gKGF3YWl0IHBlcnNpc3RlbmNlLl9nZXQoa2V5KSkgPT09ICd0cnVlJztcclxuICAgIGF3YWl0IHBlcnNpc3RlbmNlLl9yZW1vdmUoa2V5KTtcclxuICAgIHJldHVybiBoYXNQZW5kaW5nUmVkaXJlY3Q7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX3NldFBlbmRpbmdSZWRpcmVjdFN0YXR1cyhyZXNvbHZlciwgYXV0aCkge1xyXG4gICAgcmV0dXJuIHJlc29sdmVyUGVyc2lzdGVuY2UocmVzb2x2ZXIpLl9zZXQocGVuZGluZ1JlZGlyZWN0S2V5KGF1dGgpLCAndHJ1ZScpO1xyXG59XHJcbmZ1bmN0aW9uIF9jbGVhclJlZGlyZWN0T3V0Y29tZXMoKSB7XHJcbiAgICByZWRpcmVjdE91dGNvbWVNYXAuY2xlYXIoKTtcclxufVxyXG5mdW5jdGlvbiBfb3ZlcnJpZGVSZWRpcmVjdFJlc3VsdChhdXRoLCByZXN1bHQpIHtcclxuICAgIHJlZGlyZWN0T3V0Y29tZU1hcC5zZXQoYXV0aC5fa2V5KCksIHJlc3VsdCk7XHJcbn1cclxuZnVuY3Rpb24gcmVzb2x2ZXJQZXJzaXN0ZW5jZShyZXNvbHZlcikge1xyXG4gICAgcmV0dXJuIF9nZXRJbnN0YW5jZShyZXNvbHZlci5fcmVkaXJlY3RQZXJzaXN0ZW5jZSk7XHJcbn1cclxuZnVuY3Rpb24gcGVuZGluZ1JlZGlyZWN0S2V5KGF1dGgpIHtcclxuICAgIHJldHVybiBfcGVyc2lzdGVuY2VLZXlOYW1lKFBFTkRJTkdfUkVESVJFQ1RfS0VZLCBhdXRoLmNvbmZpZy5hcGlLZXksIGF1dGgubmFtZSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEF1dGhlbnRpY2F0ZXMgYSBGaXJlYmFzZSBjbGllbnQgdXNpbmcgYSBmdWxsLXBhZ2UgcmVkaXJlY3QgZmxvdy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVG8gaGFuZGxlIHRoZSByZXN1bHRzIGFuZCBlcnJvcnMgZm9yIHRoaXMgb3BlcmF0aW9uLCByZWZlciB0byB7QGxpbmsgZ2V0UmVkaXJlY3RSZXN1bHR9LlxyXG4gKiBGb2xsb3cgdGhlIHtAbGluayBodHRwczovL2ZpcmViYXNlLmdvb2dsZS5jb20vZG9jcy9hdXRoL3dlYi9yZWRpcmVjdC1iZXN0LXByYWN0aWNlc1xyXG4gKiB8IGJlc3QgcHJhY3RpY2VzfSB3aGVuIHVzaW5nIHtAbGluayBzaWduSW5XaXRoUmVkaXJlY3R9LlxyXG4gKlxyXG4gKiBUaGlzIG1ldGhvZCBkb2VzIG5vdCB3b3JrIGluIGEgTm9kZS5qcyBlbnZpcm9ubWVudCBvciB3aXRoIHtAbGluayBBdXRofSBpbnN0YW5jZXMgY3JlYXRlZCB3aXRoIGFcclxuICoge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VTZXJ2ZXJBcHB9LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSByZWRpcmVjdC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgRmFjZWJvb2tBdXRoUHJvdmlkZXIoKTtcclxuICogLy8gWW91IGNhbiBhZGQgYWRkaXRpb25hbCBzY29wZXMgdG8gdGhlIHByb3ZpZGVyOlxyXG4gKiBwcm92aWRlci5hZGRTY29wZSgndXNlcl9iaXJ0aGRheScpO1xyXG4gKiAvLyBTdGFydCBhIHNpZ24gaW4gcHJvY2VzcyBmb3IgYW4gdW5hdXRoZW50aWNhdGVkIHVzZXIuXHJcbiAqIGF3YWl0IHNpZ25JbldpdGhSZWRpcmVjdChhdXRoLCBwcm92aWRlcik7XHJcbiAqIC8vIFRoaXMgd2lsbCB0cmlnZ2VyIGEgZnVsbCBwYWdlIHJlZGlyZWN0IGF3YXkgZnJvbSB5b3VyIGFwcFxyXG4gKlxyXG4gKiAvLyBBZnRlciByZXR1cm5pbmcgZnJvbSB0aGUgcmVkaXJlY3Qgd2hlbiB5b3VyIGFwcCBpbml0aWFsaXplcyB5b3UgY2FuIG9idGFpbiB0aGUgcmVzdWx0XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFJlZGlyZWN0UmVzdWx0KGF1dGgpO1xyXG4gKiBpZiAocmVzdWx0KSB7XHJcbiAqICAgLy8gVGhpcyBpcyB0aGUgc2lnbmVkLWluIHVzZXJcclxuICogICBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XHJcbiAqICAgLy8gVGhpcyBnaXZlcyB5b3UgYSBGYWNlYm9vayBBY2Nlc3MgVG9rZW4uXHJcbiAqICAgY29uc3QgY3JlZGVudGlhbCA9IHByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KGF1dGgsIHJlc3VsdCk7XHJcbiAqICAgY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiB9XHJcbiAqIC8vIEFzIHRoaXMgQVBJIGNhbiBiZSB1c2VkIGZvciBzaWduLWluLCBsaW5raW5nIGFuZCByZWF1dGhlbnRpY2F0aW9uLFxyXG4gKiAvLyBjaGVjayB0aGUgb3BlcmF0aW9uVHlwZSB0byBkZXRlcm1pbmUgd2hhdCB0cmlnZ2VyZWQgdGhpcyByZWRpcmVjdFxyXG4gKiAvLyBvcGVyYXRpb24uXHJcbiAqIGNvbnN0IG9wZXJhdGlvblR5cGUgPSByZXN1bHQub3BlcmF0aW9uVHlwZTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIHByb3ZpZGVyIC0gVGhlIHByb3ZpZGVyIHRvIGF1dGhlbnRpY2F0ZS4gVGhlIHByb3ZpZGVyIGhhcyB0byBiZSBhbiB7QGxpbmsgT0F1dGhQcm92aWRlcn0uXHJcbiAqIE5vbi1PQXV0aCBwcm92aWRlcnMgbGlrZSB7QGxpbmsgRW1haWxBdXRoUHJvdmlkZXJ9IHdpbGwgdGhyb3cgYW4gZXJyb3IuXHJcbiAqIEBwYXJhbSByZXNvbHZlciAtIEFuIGluc3RhbmNlIG9mIHtAbGluayBQb3B1cFJlZGlyZWN0UmVzb2x2ZXJ9LCBvcHRpb25hbFxyXG4gKiBpZiBhbHJlYWR5IHN1cHBsaWVkIHRvIHtAbGluayBpbml0aWFsaXplQXV0aH0gb3IgcHJvdmlkZWQgYnkge0BsaW5rIGdldEF1dGh9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBzaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIsIHJlc29sdmVyKSB7XHJcbiAgICByZXR1cm4gX3NpZ25JbldpdGhSZWRpcmVjdChhdXRoLCBwcm92aWRlciwgcmVzb2x2ZXIpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9zaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIsIHJlc29sdmVyKSB7XHJcbiAgICBpZiAoX2lzRmlyZWJhc2VTZXJ2ZXJBcHAoYXV0aC5hcHApKSB7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KF9zZXJ2ZXJBcHBDdXJyZW50VXNlck9wZXJhdGlvbk5vdFN1cHBvcnRlZEVycm9yKGF1dGgpKTtcclxuICAgIH1cclxuICAgIGNvbnN0IGF1dGhJbnRlcm5hbCA9IF9jYXN0QXV0aChhdXRoKTtcclxuICAgIF9hc3NlcnRJbnN0YW5jZU9mKGF1dGgsIHByb3ZpZGVyLCBGZWRlcmF0ZWRBdXRoUHJvdmlkZXIpO1xyXG4gICAgLy8gV2FpdCBmb3IgYXV0aCBpbml0aWFsaXphdGlvbiB0byBjb21wbGV0ZSwgdGhpcyB3aWxsIHByb2Nlc3MgcGVuZGluZyByZWRpcmVjdHMgYW5kIGNsZWFyIHRoZVxyXG4gICAgLy8gUEVORElOR19SRURJUkVDVF9LRVkgaW4gcGVyc2lzdGVuY2UuIFRoaXMgc2hvdWxkIGJlIGNvbXBsZXRlZCBiZWZvcmUgc3RhcnRpbmcgYSBuZXdcclxuICAgIC8vIHJlZGlyZWN0IGFuZCBjcmVhdGluZyBhIFBFTkRJTkdfUkVESVJFQ1RfS0VZIGVudHJ5LlxyXG4gICAgYXdhaXQgYXV0aEludGVybmFsLl9pbml0aWFsaXphdGlvblByb21pc2U7XHJcbiAgICBjb25zdCByZXNvbHZlckludGVybmFsID0gX3dpdGhEZWZhdWx0UmVzb2x2ZXIoYXV0aEludGVybmFsLCByZXNvbHZlcik7XHJcbiAgICBhd2FpdCBfc2V0UGVuZGluZ1JlZGlyZWN0U3RhdHVzKHJlc29sdmVySW50ZXJuYWwsIGF1dGhJbnRlcm5hbCk7XHJcbiAgICByZXR1cm4gcmVzb2x2ZXJJbnRlcm5hbC5fb3BlblJlZGlyZWN0KGF1dGhJbnRlcm5hbCwgcHJvdmlkZXIsIFwic2lnbkluVmlhUmVkaXJlY3RcIiAvKiBBdXRoRXZlbnRUeXBlLlNJR05fSU5fVklBX1JFRElSRUNUICovKTtcclxufVxyXG4vKipcclxuICogUmVhdXRoZW50aWNhdGVzIHRoZSBjdXJyZW50IHVzZXIgd2l0aCB0aGUgc3BlY2lmaWVkIHtAbGluayBPQXV0aFByb3ZpZGVyfSB1c2luZyBhIGZ1bGwtcGFnZSByZWRpcmVjdCBmbG93LlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUbyBoYW5kbGUgdGhlIHJlc3VsdHMgYW5kIGVycm9ycyBmb3IgdGhpcyBvcGVyYXRpb24sIHJlZmVyIHRvIHtAbGluayBnZXRSZWRpcmVjdFJlc3VsdH0uXHJcbiAqIEZvbGxvdyB0aGUge0BsaW5rIGh0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlLmNvbS9kb2NzL2F1dGgvd2ViL3JlZGlyZWN0LWJlc3QtcHJhY3RpY2VzXHJcbiAqIHwgYmVzdCBwcmFjdGljZXN9IHdoZW4gdXNpbmcge0BsaW5rIHJlYXV0aGVudGljYXRlV2l0aFJlZGlyZWN0fS5cclxuICpcclxuICogVGhpcyBtZXRob2QgZG9lcyBub3Qgd29yayBpbiBhIE5vZGUuanMgZW52aXJvbm1lbnQgb3Igd2l0aCB7QGxpbmsgQXV0aH0gaW5zdGFuY2VzXHJcbiAqIGNyZWF0ZWQgd2l0aCBhIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlU2VydmVyQXBwfS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEZhY2Vib29rQXV0aFByb3ZpZGVyKCk7XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhSZWRpcmVjdChhdXRoLCBwcm92aWRlcik7XHJcbiAqIC8vIFRoaXMgd2lsbCB0cmlnZ2VyIGEgZnVsbCBwYWdlIHJlZGlyZWN0IGF3YXkgZnJvbSB5b3VyIGFwcFxyXG4gKlxyXG4gKiAvLyBBZnRlciByZXR1cm5pbmcgZnJvbSB0aGUgcmVkaXJlY3Qgd2hlbiB5b3VyIGFwcCBpbml0aWFsaXplcyB5b3UgY2FuIG9idGFpbiB0aGUgcmVzdWx0XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFJlZGlyZWN0UmVzdWx0KGF1dGgpO1xyXG4gKiAvLyBSZWF1dGhlbnRpY2F0ZSB1c2luZyBhIHJlZGlyZWN0LlxyXG4gKiBhd2FpdCByZWF1dGhlbnRpY2F0ZVdpdGhSZWRpcmVjdChyZXN1bHQudXNlciwgcHJvdmlkZXIpO1xyXG4gKiAvLyBUaGlzIHdpbGwgYWdhaW4gdHJpZ2dlciBhIGZ1bGwgcGFnZSByZWRpcmVjdCBhd2F5IGZyb20geW91ciBhcHBcclxuICpcclxuICogLy8gQWZ0ZXIgcmV0dXJuaW5nIGZyb20gdGhlIHJlZGlyZWN0IHdoZW4geW91ciBhcHAgaW5pdGlhbGl6ZXMgeW91IGNhbiBvYnRhaW4gdGhlIHJlc3VsdFxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRSZWRpcmVjdFJlc3VsdChhdXRoKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBwcm92aWRlciAtIFRoZSBwcm92aWRlciB0byBhdXRoZW50aWNhdGUuIFRoZSBwcm92aWRlciBoYXMgdG8gYmUgYW4ge0BsaW5rIE9BdXRoUHJvdmlkZXJ9LlxyXG4gKiBOb24tT0F1dGggcHJvdmlkZXJzIGxpa2Uge0BsaW5rIEVtYWlsQXV0aFByb3ZpZGVyfSB3aWxsIHRocm93IGFuIGVycm9yLlxyXG4gKiBAcGFyYW0gcmVzb2x2ZXIgLSBBbiBpbnN0YW5jZSBvZiB7QGxpbmsgUG9wdXBSZWRpcmVjdFJlc29sdmVyfSwgb3B0aW9uYWxcclxuICogaWYgYWxyZWFkeSBzdXBwbGllZCB0byB7QGxpbmsgaW5pdGlhbGl6ZUF1dGh9IG9yIHByb3ZpZGVkIGJ5IHtAbGluayBnZXRBdXRofS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gcmVhdXRoZW50aWNhdGVXaXRoUmVkaXJlY3QodXNlciwgcHJvdmlkZXIsIHJlc29sdmVyKSB7XHJcbiAgICByZXR1cm4gX3JlYXV0aGVudGljYXRlV2l0aFJlZGlyZWN0KHVzZXIsIHByb3ZpZGVyLCByZXNvbHZlcik7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX3JlYXV0aGVudGljYXRlV2l0aFJlZGlyZWN0KHVzZXIsIHByb3ZpZGVyLCByZXNvbHZlcikge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgX2Fzc2VydEluc3RhbmNlT2YodXNlckludGVybmFsLmF1dGgsIHByb3ZpZGVyLCBGZWRlcmF0ZWRBdXRoUHJvdmlkZXIpO1xyXG4gICAgaWYgKF9pc0ZpcmViYXNlU2VydmVyQXBwKHVzZXJJbnRlcm5hbC5hdXRoLmFwcCkpIHtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoX3NlcnZlckFwcEN1cnJlbnRVc2VyT3BlcmF0aW9uTm90U3VwcG9ydGVkRXJyb3IodXNlckludGVybmFsLmF1dGgpKTtcclxuICAgIH1cclxuICAgIC8vIFdhaXQgZm9yIGF1dGggaW5pdGlhbGl6YXRpb24gdG8gY29tcGxldGUsIHRoaXMgd2lsbCBwcm9jZXNzIHBlbmRpbmcgcmVkaXJlY3RzIGFuZCBjbGVhciB0aGVcclxuICAgIC8vIFBFTkRJTkdfUkVESVJFQ1RfS0VZIGluIHBlcnNpc3RlbmNlLiBUaGlzIHNob3VsZCBiZSBjb21wbGV0ZWQgYmVmb3JlIHN0YXJ0aW5nIGEgbmV3XHJcbiAgICAvLyByZWRpcmVjdCBhbmQgY3JlYXRpbmcgYSBQRU5ESU5HX1JFRElSRUNUX0tFWSBlbnRyeS5cclxuICAgIGF3YWl0IHVzZXJJbnRlcm5hbC5hdXRoLl9pbml0aWFsaXphdGlvblByb21pc2U7XHJcbiAgICAvLyBBbGxvdyB0aGUgcmVzb2x2ZXIgdG8gZXJyb3IgYmVmb3JlIHBlcnNpc3RpbmcgdGhlIHJlZGlyZWN0IHVzZXJcclxuICAgIGNvbnN0IHJlc29sdmVySW50ZXJuYWwgPSBfd2l0aERlZmF1bHRSZXNvbHZlcih1c2VySW50ZXJuYWwuYXV0aCwgcmVzb2x2ZXIpO1xyXG4gICAgYXdhaXQgX3NldFBlbmRpbmdSZWRpcmVjdFN0YXR1cyhyZXNvbHZlckludGVybmFsLCB1c2VySW50ZXJuYWwuYXV0aCk7XHJcbiAgICBjb25zdCBldmVudElkID0gYXdhaXQgcHJlcGFyZVVzZXJGb3JSZWRpcmVjdCh1c2VySW50ZXJuYWwpO1xyXG4gICAgcmV0dXJuIHJlc29sdmVySW50ZXJuYWwuX29wZW5SZWRpcmVjdCh1c2VySW50ZXJuYWwuYXV0aCwgcHJvdmlkZXIsIFwicmVhdXRoVmlhUmVkaXJlY3RcIiAvKiBBdXRoRXZlbnRUeXBlLlJFQVVUSF9WSUFfUkVESVJFQ1QgKi8sIGV2ZW50SWQpO1xyXG59XHJcbi8qKlxyXG4gKiBMaW5rcyB0aGUge0BsaW5rIE9BdXRoUHJvdmlkZXJ9IHRvIHRoZSB1c2VyIGFjY291bnQgdXNpbmcgYSBmdWxsLXBhZ2UgcmVkaXJlY3QgZmxvdy5cclxuICogQHJlbWFya3NcclxuICogVG8gaGFuZGxlIHRoZSByZXN1bHRzIGFuZCBlcnJvcnMgZm9yIHRoaXMgb3BlcmF0aW9uLCByZWZlciB0byB7QGxpbmsgZ2V0UmVkaXJlY3RSZXN1bHR9LlxyXG4gKiBGb2xsb3cgdGhlIHtAbGluayBodHRwczovL2ZpcmViYXNlLmdvb2dsZS5jb20vZG9jcy9hdXRoL3dlYi9yZWRpcmVjdC1iZXN0LXByYWN0aWNlc1xyXG4gKiB8IGJlc3QgcHJhY3RpY2VzfSB3aGVuIHVzaW5nIHtAbGluayBsaW5rV2l0aFJlZGlyZWN0fS5cclxuICpcclxuICogVGhpcyBtZXRob2QgZG9lcyBub3Qgd29yayBpbiBhIE5vZGUuanMgZW52aXJvbm1lbnQgb3Igd2l0aCB7QGxpbmsgQXV0aH0gaW5zdGFuY2VzXHJcbiAqIGNyZWF0ZWQgd2l0aCBhIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlU2VydmVyQXBwfS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIHNvbWUgb3RoZXIgcHJvdmlkZXIuXHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGVtYWlsLCBwYXNzd29yZCk7XHJcbiAqIC8vIExpbmsgdXNpbmcgYSByZWRpcmVjdC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgRmFjZWJvb2tBdXRoUHJvdmlkZXIoKTtcclxuICogYXdhaXQgbGlua1dpdGhSZWRpcmVjdChyZXN1bHQudXNlciwgcHJvdmlkZXIpO1xyXG4gKiAvLyBUaGlzIHdpbGwgdHJpZ2dlciBhIGZ1bGwgcGFnZSByZWRpcmVjdCBhd2F5IGZyb20geW91ciBhcHBcclxuICpcclxuICogLy8gQWZ0ZXIgcmV0dXJuaW5nIGZyb20gdGhlIHJlZGlyZWN0IHdoZW4geW91ciBhcHAgaW5pdGlhbGl6ZXMgeW91IGNhbiBvYnRhaW4gdGhlIHJlc3VsdFxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRSZWRpcmVjdFJlc3VsdChhdXRoKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBwcm92aWRlciAtIFRoZSBwcm92aWRlciB0byBhdXRoZW50aWNhdGUuIFRoZSBwcm92aWRlciBoYXMgdG8gYmUgYW4ge0BsaW5rIE9BdXRoUHJvdmlkZXJ9LlxyXG4gKiBOb24tT0F1dGggcHJvdmlkZXJzIGxpa2Uge0BsaW5rIEVtYWlsQXV0aFByb3ZpZGVyfSB3aWxsIHRocm93IGFuIGVycm9yLlxyXG4gKiBAcGFyYW0gcmVzb2x2ZXIgLSBBbiBpbnN0YW5jZSBvZiB7QGxpbmsgUG9wdXBSZWRpcmVjdFJlc29sdmVyfSwgb3B0aW9uYWxcclxuICogaWYgYWxyZWFkeSBzdXBwbGllZCB0byB7QGxpbmsgaW5pdGlhbGl6ZUF1dGh9IG9yIHByb3ZpZGVkIGJ5IHtAbGluayBnZXRBdXRofS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gbGlua1dpdGhSZWRpcmVjdCh1c2VyLCBwcm92aWRlciwgcmVzb2x2ZXIpIHtcclxuICAgIHJldHVybiBfbGlua1dpdGhSZWRpcmVjdCh1c2VyLCBwcm92aWRlciwgcmVzb2x2ZXIpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9saW5rV2l0aFJlZGlyZWN0KHVzZXIsIHByb3ZpZGVyLCByZXNvbHZlcikge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgX2Fzc2VydEluc3RhbmNlT2YodXNlckludGVybmFsLmF1dGgsIHByb3ZpZGVyLCBGZWRlcmF0ZWRBdXRoUHJvdmlkZXIpO1xyXG4gICAgLy8gV2FpdCBmb3IgYXV0aCBpbml0aWFsaXphdGlvbiB0byBjb21wbGV0ZSwgdGhpcyB3aWxsIHByb2Nlc3MgcGVuZGluZyByZWRpcmVjdHMgYW5kIGNsZWFyIHRoZVxyXG4gICAgLy8gUEVORElOR19SRURJUkVDVF9LRVkgaW4gcGVyc2lzdGVuY2UuIFRoaXMgc2hvdWxkIGJlIGNvbXBsZXRlZCBiZWZvcmUgc3RhcnRpbmcgYSBuZXdcclxuICAgIC8vIHJlZGlyZWN0IGFuZCBjcmVhdGluZyBhIFBFTkRJTkdfUkVESVJFQ1RfS0VZIGVudHJ5LlxyXG4gICAgYXdhaXQgdXNlckludGVybmFsLmF1dGguX2luaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgIC8vIEFsbG93IHRoZSByZXNvbHZlciB0byBlcnJvciBiZWZvcmUgcGVyc2lzdGluZyB0aGUgcmVkaXJlY3QgdXNlclxyXG4gICAgY29uc3QgcmVzb2x2ZXJJbnRlcm5hbCA9IF93aXRoRGVmYXVsdFJlc29sdmVyKHVzZXJJbnRlcm5hbC5hdXRoLCByZXNvbHZlcik7XHJcbiAgICBhd2FpdCBfYXNzZXJ0TGlua2VkU3RhdHVzKGZhbHNlLCB1c2VySW50ZXJuYWwsIHByb3ZpZGVyLnByb3ZpZGVySWQpO1xyXG4gICAgYXdhaXQgX3NldFBlbmRpbmdSZWRpcmVjdFN0YXR1cyhyZXNvbHZlckludGVybmFsLCB1c2VySW50ZXJuYWwuYXV0aCk7XHJcbiAgICBjb25zdCBldmVudElkID0gYXdhaXQgcHJlcGFyZVVzZXJGb3JSZWRpcmVjdCh1c2VySW50ZXJuYWwpO1xyXG4gICAgcmV0dXJuIHJlc29sdmVySW50ZXJuYWwuX29wZW5SZWRpcmVjdCh1c2VySW50ZXJuYWwuYXV0aCwgcHJvdmlkZXIsIFwibGlua1ZpYVJlZGlyZWN0XCIgLyogQXV0aEV2ZW50VHlwZS5MSU5LX1ZJQV9SRURJUkVDVCAqLywgZXZlbnRJZCk7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgYSB7QGxpbmsgVXNlckNyZWRlbnRpYWx9IGZyb20gdGhlIHJlZGlyZWN0LWJhc2VkIHNpZ24taW4gZmxvdy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogSWYgc2lnbi1pbiBzdWNjZWVkZWQsIHJldHVybnMgdGhlIHNpZ25lZCBpbiB1c2VyLiBJZiBzaWduLWluIHdhcyB1bnN1Y2Nlc3NmdWwsIGZhaWxzIHdpdGggYW5cclxuICogZXJyb3IuIElmIG5vIHJlZGlyZWN0IG9wZXJhdGlvbiB3YXMgY2FsbGVkLCByZXR1cm5zIGBudWxsYC5cclxuICpcclxuICogVGhpcyBtZXRob2QgZG9lcyBub3Qgd29yayBpbiBhIE5vZGUuanMgZW52aXJvbm1lbnQgb3Igd2l0aCB7QGxpbmsgQXV0aH0gaW5zdGFuY2VzIGNyZWF0ZWQgd2l0aCBhXHJcbiAqIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlU2VydmVyQXBwfS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEZhY2Vib29rQXV0aFByb3ZpZGVyKCk7XHJcbiAqIC8vIFlvdSBjYW4gYWRkIGFkZGl0aW9uYWwgc2NvcGVzIHRvIHRoZSBwcm92aWRlcjpcclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ3VzZXJfYmlydGhkYXknKTtcclxuICogLy8gU3RhcnQgYSBzaWduIGluIHByb2Nlc3MgZm9yIGFuIHVuYXV0aGVudGljYXRlZCB1c2VyLlxyXG4gKiBhd2FpdCBzaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKiAvLyBUaGlzIHdpbGwgdHJpZ2dlciBhIGZ1bGwgcGFnZSByZWRpcmVjdCBhd2F5IGZyb20geW91ciBhcHBcclxuICpcclxuICogLy8gQWZ0ZXIgcmV0dXJuaW5nIGZyb20gdGhlIHJlZGlyZWN0IHdoZW4geW91ciBhcHAgaW5pdGlhbGl6ZXMgeW91IGNhbiBvYnRhaW4gdGhlIHJlc3VsdFxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRSZWRpcmVjdFJlc3VsdChhdXRoKTtcclxuICogaWYgKHJlc3VsdCkge1xyXG4gKiAgIC8vIFRoaXMgaXMgdGhlIHNpZ25lZC1pbiB1c2VyXHJcbiAqICAgY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAgIC8vIFRoaXMgZ2l2ZXMgeW91IGEgRmFjZWJvb2sgQWNjZXNzIFRva2VuLlxyXG4gKiAgIGNvbnN0IGNyZWRlbnRpYWwgPSBwcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChhdXRoLCByZXN1bHQpO1xyXG4gKiAgIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcclxuICogfVxyXG4gKiAvLyBBcyB0aGlzIEFQSSBjYW4gYmUgdXNlZCBmb3Igc2lnbi1pbiwgbGlua2luZyBhbmQgcmVhdXRoZW50aWNhdGlvbixcclxuICogLy8gY2hlY2sgdGhlIG9wZXJhdGlvblR5cGUgdG8gZGV0ZXJtaW5lIHdoYXQgdHJpZ2dlcmVkIHRoaXMgcmVkaXJlY3RcclxuICogLy8gb3BlcmF0aW9uLlxyXG4gKiBjb25zdCBvcGVyYXRpb25UeXBlID0gcmVzdWx0Lm9wZXJhdGlvblR5cGU7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSByZXNvbHZlciAtIEFuIGluc3RhbmNlIG9mIHtAbGluayBQb3B1cFJlZGlyZWN0UmVzb2x2ZXJ9LCBvcHRpb25hbFxyXG4gKiBpZiBhbHJlYWR5IHN1cHBsaWVkIHRvIHtAbGluayBpbml0aWFsaXplQXV0aH0gb3IgcHJvdmlkZWQgYnkge0BsaW5rIGdldEF1dGh9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBnZXRSZWRpcmVjdFJlc3VsdChhdXRoLCByZXNvbHZlcikge1xyXG4gICAgYXdhaXQgX2Nhc3RBdXRoKGF1dGgpLl9pbml0aWFsaXphdGlvblByb21pc2U7XHJcbiAgICByZXR1cm4gX2dldFJlZGlyZWN0UmVzdWx0KGF1dGgsIHJlc29sdmVyLCBmYWxzZSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX2dldFJlZGlyZWN0UmVzdWx0KGF1dGgsIHJlc29sdmVyRXh0ZXJuLCBieXBhc3NBdXRoU3RhdGUgPSBmYWxzZSkge1xyXG4gICAgaWYgKF9pc0ZpcmViYXNlU2VydmVyQXBwKGF1dGguYXBwKSkge1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChfc2VydmVyQXBwQ3VycmVudFVzZXJPcGVyYXRpb25Ob3RTdXBwb3J0ZWRFcnJvcihhdXRoKSk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBhdXRoSW50ZXJuYWwgPSBfY2FzdEF1dGgoYXV0aCk7XHJcbiAgICBjb25zdCByZXNvbHZlciA9IF93aXRoRGVmYXVsdFJlc29sdmVyKGF1dGhJbnRlcm5hbCwgcmVzb2x2ZXJFeHRlcm4pO1xyXG4gICAgY29uc3QgYWN0aW9uID0gbmV3IFJlZGlyZWN0QWN0aW9uKGF1dGhJbnRlcm5hbCwgcmVzb2x2ZXIsIGJ5cGFzc0F1dGhTdGF0ZSk7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhY3Rpb24uZXhlY3V0ZSgpO1xyXG4gICAgaWYgKHJlc3VsdCAmJiAhYnlwYXNzQXV0aFN0YXRlKSB7XHJcbiAgICAgICAgZGVsZXRlIHJlc3VsdC51c2VyLl9yZWRpcmVjdEV2ZW50SWQ7XHJcbiAgICAgICAgYXdhaXQgYXV0aEludGVybmFsLl9wZXJzaXN0VXNlcklmQ3VycmVudChyZXN1bHQudXNlcik7XHJcbiAgICAgICAgYXdhaXQgYXV0aEludGVybmFsLl9zZXRSZWRpcmVjdFVzZXIobnVsbCwgcmVzb2x2ZXJFeHRlcm4pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBwcmVwYXJlVXNlckZvclJlZGlyZWN0KHVzZXIpIHtcclxuICAgIGNvbnN0IGV2ZW50SWQgPSBfZ2VuZXJhdGVFdmVudElkKGAke3VzZXIudWlkfTo6OmApO1xyXG4gICAgdXNlci5fcmVkaXJlY3RFdmVudElkID0gZXZlbnRJZDtcclxuICAgIGF3YWl0IHVzZXIuYXV0aC5fc2V0UmVkaXJlY3RVc2VyKHVzZXIpO1xyXG4gICAgYXdhaXQgdXNlci5hdXRoLl9wZXJzaXN0VXNlcklmQ3VycmVudCh1c2VyKTtcclxuICAgIHJldHVybiBldmVudElkO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIFRoZSBhbW91bnQgb2YgdGltZSB0byBzdG9yZSB0aGUgVUlEcyBvZiBzZWVuIGV2ZW50czsgdGhpcyBpc1xyXG4vLyBzZXQgdG8gMTAgbWluIGJ5IGRlZmF1bHRcclxuY29uc3QgRVZFTlRfRFVQTElDQVRJT05fQ0FDSEVfRFVSQVRJT05fTVMgPSAxMCAqIDYwICogMTAwMDtcclxuY2xhc3MgQXV0aEV2ZW50TWFuYWdlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihhdXRoKSB7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gYXV0aDtcclxuICAgICAgICB0aGlzLmNhY2hlZEV2ZW50VWlkcyA9IG5ldyBTZXQoKTtcclxuICAgICAgICB0aGlzLmNvbnN1bWVycyA9IG5ldyBTZXQoKTtcclxuICAgICAgICB0aGlzLnF1ZXVlZFJlZGlyZWN0RXZlbnQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaGFzSGFuZGxlZFBvdGVudGlhbFJlZGlyZWN0ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5sYXN0UHJvY2Vzc2VkRXZlbnRUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgIH1cclxuICAgIHJlZ2lzdGVyQ29uc3VtZXIoYXV0aEV2ZW50Q29uc3VtZXIpIHtcclxuICAgICAgICB0aGlzLmNvbnN1bWVycy5hZGQoYXV0aEV2ZW50Q29uc3VtZXIpO1xyXG4gICAgICAgIGlmICh0aGlzLnF1ZXVlZFJlZGlyZWN0RXZlbnQgJiZcclxuICAgICAgICAgICAgdGhpcy5pc0V2ZW50Rm9yQ29uc3VtZXIodGhpcy5xdWV1ZWRSZWRpcmVjdEV2ZW50LCBhdXRoRXZlbnRDb25zdW1lcikpIHtcclxuICAgICAgICAgICAgdGhpcy5zZW5kVG9Db25zdW1lcih0aGlzLnF1ZXVlZFJlZGlyZWN0RXZlbnQsIGF1dGhFdmVudENvbnN1bWVyKTtcclxuICAgICAgICAgICAgdGhpcy5zYXZlRXZlbnRUb0NhY2hlKHRoaXMucXVldWVkUmVkaXJlY3RFdmVudCk7XHJcbiAgICAgICAgICAgIHRoaXMucXVldWVkUmVkaXJlY3RFdmVudCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdW5yZWdpc3RlckNvbnN1bWVyKGF1dGhFdmVudENvbnN1bWVyKSB7XHJcbiAgICAgICAgdGhpcy5jb25zdW1lcnMuZGVsZXRlKGF1dGhFdmVudENvbnN1bWVyKTtcclxuICAgIH1cclxuICAgIG9uRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgZXZlbnQgaGFzIGFscmVhZHkgYmVlbiBoYW5kbGVkXHJcbiAgICAgICAgaWYgKHRoaXMuaGFzRXZlbnRCZWVuSGFuZGxlZChldmVudCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgaGFuZGxlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuY29uc3VtZXJzLmZvckVhY2goY29uc3VtZXIgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc0V2ZW50Rm9yQ29uc3VtZXIoZXZlbnQsIGNvbnN1bWVyKSkge1xyXG4gICAgICAgICAgICAgICAgaGFuZGxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbmRUb0NvbnN1bWVyKGV2ZW50LCBjb25zdW1lcik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNhdmVFdmVudFRvQ2FjaGUoZXZlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHRoaXMuaGFzSGFuZGxlZFBvdGVudGlhbFJlZGlyZWN0IHx8ICFpc1JlZGlyZWN0RXZlbnQoZXZlbnQpKSB7XHJcbiAgICAgICAgICAgIC8vIElmIHdlJ3ZlIGFscmVhZHkgc2VlbiBhIHJlZGlyZWN0IGJlZm9yZSwgb3IgdGhpcyBpcyBhIHBvcHVwIGV2ZW50LFxyXG4gICAgICAgICAgICAvLyBiYWlsIG5vd1xyXG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5oYXNIYW5kbGVkUG90ZW50aWFsUmVkaXJlY3QgPSB0cnVlO1xyXG4gICAgICAgIC8vIElmIHRoZSByZWRpcmVjdCB3YXNuJ3QgaGFuZGxlZCwgaGFuZyBvbiB0byBpdFxyXG4gICAgICAgIGlmICghaGFuZGxlZCkge1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXVlZFJlZGlyZWN0RXZlbnQgPSBldmVudDtcclxuICAgICAgICAgICAgaGFuZGxlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBoYW5kbGVkO1xyXG4gICAgfVxyXG4gICAgc2VuZFRvQ29uc3VtZXIoZXZlbnQsIGNvbnN1bWVyKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGlmIChldmVudC5lcnJvciAmJiAhaXNOdWxsUmVkaXJlY3RFdmVudChldmVudCkpIHtcclxuICAgICAgICAgICAgY29uc3QgY29kZSA9ICgoX2EgPSBldmVudC5lcnJvci5jb2RlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc3BsaXQoJ2F1dGgvJylbMV0pIHx8XHJcbiAgICAgICAgICAgICAgICBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLztcclxuICAgICAgICAgICAgY29uc3VtZXIub25FcnJvcihfY3JlYXRlRXJyb3IodGhpcy5hdXRoLCBjb2RlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdW1lci5vbkF1dGhFdmVudChldmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaXNFdmVudEZvckNvbnN1bWVyKGV2ZW50LCBjb25zdW1lcikge1xyXG4gICAgICAgIGNvbnN0IGV2ZW50SWRNYXRjaGVzID0gY29uc3VtZXIuZXZlbnRJZCA9PT0gbnVsbCB8fFxyXG4gICAgICAgICAgICAoISFldmVudC5ldmVudElkICYmIGV2ZW50LmV2ZW50SWQgPT09IGNvbnN1bWVyLmV2ZW50SWQpO1xyXG4gICAgICAgIHJldHVybiBjb25zdW1lci5maWx0ZXIuaW5jbHVkZXMoZXZlbnQudHlwZSkgJiYgZXZlbnRJZE1hdGNoZXM7XHJcbiAgICB9XHJcbiAgICBoYXNFdmVudEJlZW5IYW5kbGVkKGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKERhdGUubm93KCkgLSB0aGlzLmxhc3RQcm9jZXNzZWRFdmVudFRpbWUgPj1cclxuICAgICAgICAgICAgRVZFTlRfRFVQTElDQVRJT05fQ0FDSEVfRFVSQVRJT05fTVMpIHtcclxuICAgICAgICAgICAgdGhpcy5jYWNoZWRFdmVudFVpZHMuY2xlYXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGVkRXZlbnRVaWRzLmhhcyhldmVudFVpZChldmVudCkpO1xyXG4gICAgfVxyXG4gICAgc2F2ZUV2ZW50VG9DYWNoZShldmVudCkge1xyXG4gICAgICAgIHRoaXMuY2FjaGVkRXZlbnRVaWRzLmFkZChldmVudFVpZChldmVudCkpO1xyXG4gICAgICAgIHRoaXMubGFzdFByb2Nlc3NlZEV2ZW50VGltZSA9IERhdGUubm93KCk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZXZlbnRVaWQoZSkge1xyXG4gICAgcmV0dXJuIFtlLnR5cGUsIGUuZXZlbnRJZCwgZS5zZXNzaW9uSWQsIGUudGVuYW50SWRdLmZpbHRlcih2ID0+IHYpLmpvaW4oJy0nKTtcclxufVxyXG5mdW5jdGlvbiBpc051bGxSZWRpcmVjdEV2ZW50KHsgdHlwZSwgZXJyb3IgfSkge1xyXG4gICAgcmV0dXJuICh0eXBlID09PSBcInVua25vd25cIiAvKiBBdXRoRXZlbnRUeXBlLlVOS05PV04gKi8gJiZcclxuICAgICAgICAoZXJyb3IgPT09IG51bGwgfHwgZXJyb3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVycm9yLmNvZGUpID09PSBgYXV0aC8ke1wibm8tYXV0aC1ldmVudFwiIC8qIEF1dGhFcnJvckNvZGUuTk9fQVVUSF9FVkVOVCAqL31gKTtcclxufVxyXG5mdW5jdGlvbiBpc1JlZGlyZWN0RXZlbnQoZXZlbnQpIHtcclxuICAgIHN3aXRjaCAoZXZlbnQudHlwZSkge1xyXG4gICAgICAgIGNhc2UgXCJzaWduSW5WaWFSZWRpcmVjdFwiIC8qIEF1dGhFdmVudFR5cGUuU0lHTl9JTl9WSUFfUkVESVJFQ1QgKi86XHJcbiAgICAgICAgY2FzZSBcImxpbmtWaWFSZWRpcmVjdFwiIC8qIEF1dGhFdmVudFR5cGUuTElOS19WSUFfUkVESVJFQ1QgKi86XHJcbiAgICAgICAgY2FzZSBcInJlYXV0aFZpYVJlZGlyZWN0XCIgLyogQXV0aEV2ZW50VHlwZS5SRUFVVEhfVklBX1JFRElSRUNUICovOlxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICBjYXNlIFwidW5rbm93blwiIC8qIEF1dGhFdmVudFR5cGUuVU5LTk9XTiAqLzpcclxuICAgICAgICAgICAgcmV0dXJuIGlzTnVsbFJlZGlyZWN0RXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBfZ2V0UHJvamVjdENvbmZpZyhhdXRoLCByZXF1ZXN0ID0ge30pIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJHRVRcIiAvKiBIdHRwTWV0aG9kLkdFVCAqLywgXCIvdjEvcHJvamVjdHNcIiAvKiBFbmRwb2ludC5HRVRfUFJPSkVDVF9DT05GSUcgKi8sIHJlcXVlc3QpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IElQX0FERFJFU1NfUkVHRVggPSAvXlxcZHsxLDN9XFwuXFxkezEsM31cXC5cXGR7MSwzfVxcLlxcZHsxLDN9JC87XHJcbmNvbnN0IEhUVFBfUkVHRVggPSAvXmh0dHBzPy87XHJcbmFzeW5jIGZ1bmN0aW9uIF92YWxpZGF0ZU9yaWdpbihhdXRoKSB7XHJcbiAgICAvLyBTa2lwIG9yaWdpbiB2YWxpZGF0aW9uIGlmIHdlIGFyZSBpbiBhbiBlbXVsYXRlZCBlbnZpcm9ubWVudFxyXG4gICAgaWYgKGF1dGguY29uZmlnLmVtdWxhdG9yKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgeyBhdXRob3JpemVkRG9tYWlucyB9ID0gYXdhaXQgX2dldFByb2plY3RDb25maWcoYXV0aCk7XHJcbiAgICBmb3IgKGNvbnN0IGRvbWFpbiBvZiBhdXRob3JpemVkRG9tYWlucykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChtYXRjaERvbWFpbihkb21haW4pKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgIC8vIERvIG5vdGhpbmcgaWYgdGhlcmUncyBhIFVSTCBlcnJvcjsganVzdCBjb250aW51ZSBzZWFyY2hpbmdcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBJbiB0aGUgb2xkIFNESywgdGhpcyBlcnJvciBhbHNvIHByb3ZpZGVzIGhlbHBmdWwgbWVzc2FnZXMuXHJcbiAgICBfZmFpbChhdXRoLCBcInVuYXV0aG9yaXplZC1kb21haW5cIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfT1JJR0lOICovKTtcclxufVxyXG5mdW5jdGlvbiBtYXRjaERvbWFpbihleHBlY3RlZCkge1xyXG4gICAgY29uc3QgY3VycmVudFVybCA9IF9nZXRDdXJyZW50VXJsKCk7XHJcbiAgICBjb25zdCB7IHByb3RvY29sLCBob3N0bmFtZSB9ID0gbmV3IFVSTChjdXJyZW50VXJsKTtcclxuICAgIGlmIChleHBlY3RlZC5zdGFydHNXaXRoKCdjaHJvbWUtZXh0ZW5zaW9uOi8vJykpIHtcclxuICAgICAgICBjb25zdCBjZVVybCA9IG5ldyBVUkwoZXhwZWN0ZWQpO1xyXG4gICAgICAgIGlmIChjZVVybC5ob3N0bmFtZSA9PT0gJycgJiYgaG9zdG5hbWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgIC8vIEZvciBzb21lIHJlYXNvbiB3ZSdyZSBub3QgcGFyc2luZyBjaHJvbWUgVVJMcyBwcm9wZXJseVxyXG4gICAgICAgICAgICByZXR1cm4gKHByb3RvY29sID09PSAnY2hyb21lLWV4dGVuc2lvbjonICYmXHJcbiAgICAgICAgICAgICAgICBleHBlY3RlZC5yZXBsYWNlKCdjaHJvbWUtZXh0ZW5zaW9uOi8vJywgJycpID09PVxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRVcmwucmVwbGFjZSgnY2hyb21lLWV4dGVuc2lvbjovLycsICcnKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwcm90b2NvbCA9PT0gJ2Nocm9tZS1leHRlbnNpb246JyAmJiBjZVVybC5ob3N0bmFtZSA9PT0gaG9zdG5hbWU7XHJcbiAgICB9XHJcbiAgICBpZiAoIUhUVFBfUkVHRVgudGVzdChwcm90b2NvbCkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBpZiAoSVBfQUREUkVTU19SRUdFWC50ZXN0KGV4cGVjdGVkKSkge1xyXG4gICAgICAgIC8vIFRoZSBkb21haW4gaGFzIHRvIGJlIGV4YWN0bHkgZXF1YWwgdG8gdGhlIHBhdHRlcm4sIGFzIGFuIElQIGRvbWFpbiB3aWxsXHJcbiAgICAgICAgLy8gb25seSBjb250YWluIHRoZSBJUCwgbm8gZXh0cmEgY2hhcmFjdGVyLlxyXG4gICAgICAgIHJldHVybiBob3N0bmFtZSA9PT0gZXhwZWN0ZWQ7XHJcbiAgICB9XHJcbiAgICAvLyBEb3RzIGluIHBhdHRlcm4gc2hvdWxkIGJlIGVzY2FwZWQuXHJcbiAgICBjb25zdCBlc2NhcGVkRG9tYWluUGF0dGVybiA9IGV4cGVjdGVkLnJlcGxhY2UoL1xcLi9nLCAnXFxcXC4nKTtcclxuICAgIC8vIE5vbiBpcCBhZGRyZXNzIGRvbWFpbnMuXHJcbiAgICAvLyBkb21haW4uY29tID0gKi5kb21haW4uY29tIE9SIGRvbWFpbi5jb21cclxuICAgIGNvbnN0IHJlID0gbmV3IFJlZ0V4cCgnXiguK1xcXFwuJyArIGVzY2FwZWREb21haW5QYXR0ZXJuICsgJ3wnICsgZXNjYXBlZERvbWFpblBhdHRlcm4gKyAnKSQnLCAnaScpO1xyXG4gICAgcmV0dXJuIHJlLnRlc3QoaG9zdG5hbWUpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBORVRXT1JLX1RJTUVPVVQgPSBuZXcgRGVsYXkoMzAwMDAsIDYwMDAwKTtcclxuLyoqXHJcbiAqIFJlc2V0IHVubGFvZGVkIEdBcGkgbW9kdWxlcy4gSWYgZ2FwaS5sb2FkIGZhaWxzIGR1ZSB0byBhIG5ldHdvcmsgZXJyb3IsXHJcbiAqIGl0IHdpbGwgc3RvcCB3b3JraW5nIGFmdGVyIGEgcmV0cmlhbC4gVGhpcyBpcyBhIGhhY2sgdG8gZml4IHRoaXMgaXNzdWUuXHJcbiAqL1xyXG5mdW5jdGlvbiByZXNldFVubG9hZGVkR2FwaU1vZHVsZXMoKSB7XHJcbiAgICAvLyBDbGVhciBsYXN0IGZhaWxlZCBnYXBpLmxvYWQgc3RhdGUgdG8gZm9yY2UgbmV4dCBnYXBpLmxvYWQgdG8gZmlyc3RcclxuICAgIC8vIGxvYWQgdGhlIGZhaWxlZCBnYXBpLmlmcmFtZXMgbW9kdWxlLlxyXG4gICAgLy8gR2V0IGdhcGl4LmJlYWNvbiBjb250ZXh0LlxyXG4gICAgY29uc3QgYmVhY29uID0gX3dpbmRvdygpLl9fX2pzbDtcclxuICAgIC8vIEdldCBjdXJyZW50IGhpbnQuXHJcbiAgICBpZiAoYmVhY29uID09PSBudWxsIHx8IGJlYWNvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogYmVhY29uLkgpIHtcclxuICAgICAgICAvLyBHZXQgZ2FwaSBoaW50LlxyXG4gICAgICAgIGZvciAoY29uc3QgaGludCBvZiBPYmplY3Qua2V5cyhiZWFjb24uSCkpIHtcclxuICAgICAgICAgICAgLy8gUmVxdWVzdGVkIG1vZHVsZXMuXHJcbiAgICAgICAgICAgIGJlYWNvbi5IW2hpbnRdLnIgPSBiZWFjb24uSFtoaW50XS5yIHx8IFtdO1xyXG4gICAgICAgICAgICAvLyBMb2FkZWQgbW9kdWxlcy5cclxuICAgICAgICAgICAgYmVhY29uLkhbaGludF0uTCA9IGJlYWNvbi5IW2hpbnRdLkwgfHwgW107XHJcbiAgICAgICAgICAgIC8vIFNldCByZXF1ZXN0ZWQgbW9kdWxlcyB0byBhIGNvcHkgb2YgdGhlIGxvYWRlZCBtb2R1bGVzLlxyXG4gICAgICAgICAgICBiZWFjb24uSFtoaW50XS5yID0gWy4uLmJlYWNvbi5IW2hpbnRdLkxdO1xyXG4gICAgICAgICAgICAvLyBDbGVhciBwZW5kaW5nIGNhbGxiYWNrcy5cclxuICAgICAgICAgICAgaWYgKGJlYWNvbi5DUCkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiZWFjb24uQ1AubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgYWxsIGZhaWxlZCBwZW5kaW5nIGNhbGxiYWNrcy5cclxuICAgICAgICAgICAgICAgICAgICBiZWFjb24uQ1BbaV0gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGxvYWRHYXBpKGF1dGgpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XHJcbiAgICAgICAgLy8gRnVuY3Rpb24gdG8gcnVuIHdoZW4gZ2FwaS5sb2FkIGlzIHJlYWR5LlxyXG4gICAgICAgIGZ1bmN0aW9uIGxvYWRHYXBpSWZyYW1lKCkge1xyXG4gICAgICAgICAgICAvLyBUaGUgZGV2ZWxvcGVyIG1heSBoYXZlIHRyaWVkIHRvIHByZXZpb3VzbHkgcnVuIGdhcGkubG9hZCBhbmQgZmFpbGVkLlxyXG4gICAgICAgICAgICAvLyBSdW4gdGhpcyB0byBmaXggdGhhdC5cclxuICAgICAgICAgICAgcmVzZXRVbmxvYWRlZEdhcGlNb2R1bGVzKCk7XHJcbiAgICAgICAgICAgIGdhcGkubG9hZCgnZ2FwaS5pZnJhbWVzJywge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGdhcGkuaWZyYW1lcy5nZXRDb250ZXh0KCkpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9udGltZW91dDogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBhYm92ZSByZXNldCBtYXkgYmUgc3VmZmljaWVudCwgYnV0IGhhdmluZyB0aGlzIHJlc2V0IGFmdGVyXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZmFpbHVyZSBlbnN1cmVzIHRoYXQgaWYgdGhlIGRldmVsb3BlciBjYWxscyBnYXBpLmxvYWQgYWZ0ZXIgdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29ubmVjdGlvbiBpcyByZS1lc3RhYmxpc2hlZCBhbmQgYmVmb3JlIGFub3RoZXIgYXR0ZW1wdCB0byBlbWJlZFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBpZnJhbWUsIGl0IHdvdWxkIHdvcmsgYW5kIHdvdWxkIG5vdCBiZSBicm9rZW4gYmVjYXVzZSBvZiBvdXJcclxuICAgICAgICAgICAgICAgICAgICAvLyBmYWlsZWQgYXR0ZW1wdC5cclxuICAgICAgICAgICAgICAgICAgICAvLyBUaW1lb3V0IHdoZW4gZ2FwaS5pZnJhbWVzLklmcmFtZSBub3QgbG9hZGVkLlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc2V0VW5sb2FkZWRHYXBpTW9kdWxlcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChfY3JlYXRlRXJyb3IoYXV0aCwgXCJuZXR3b3JrLXJlcXVlc3QtZmFpbGVkXCIgLyogQXV0aEVycm9yQ29kZS5ORVRXT1JLX1JFUVVFU1RfRkFJTEVEICovKSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdGltZW91dDogTkVUV09SS19USU1FT1VULmdldCgpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoKF9iID0gKF9hID0gX3dpbmRvdygpLmdhcGkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pZnJhbWVzKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuSWZyYW1lKSB7XHJcbiAgICAgICAgICAgIC8vIElmIGdhcGkuaWZyYW1lcy5JZnJhbWUgYXZhaWxhYmxlLCByZXNvbHZlLlxyXG4gICAgICAgICAgICByZXNvbHZlKGdhcGkuaWZyYW1lcy5nZXRDb250ZXh0KCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICghISgoX2MgPSBfd2luZG93KCkuZ2FwaSkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLmxvYWQpKSB7XHJcbiAgICAgICAgICAgIC8vIEdhcGkgbG9hZGVyIHJlYWR5LCBsb2FkIGdhcGkuaWZyYW1lcy5cclxuICAgICAgICAgICAgbG9hZEdhcGlJZnJhbWUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIG5ldyBpZnJhbWUgY2FsbGJhY2sgd2hlbiB0aGlzIGlzIGNhbGxlZCBzbyBhcyBub3QgdG8gb3ZlcndyaXRlXHJcbiAgICAgICAgICAgIC8vIGFueSBwcmV2aW91cyBkZWZpbmVkIGNhbGxiYWNrLiBUaGlzIGhhcHBlbnMgaWYgdGhpcyBtZXRob2QgaXMgY2FsbGVkXHJcbiAgICAgICAgICAgIC8vIG11bHRpcGxlIHRpbWVzIGluIHBhcmFsbGVsIGFuZCBjb3VsZCByZXN1bHQgaW4gdGhlIGxhdGVyIGNhbGxiYWNrXHJcbiAgICAgICAgICAgIC8vIG92ZXJ3cml0aW5nIHRoZSBwcmV2aW91cyBvbmUuIFRoaXMgd291bGQgZW5kIHVwIHdpdGggYSBpZnJhbWVcclxuICAgICAgICAgICAgLy8gdGltZW91dC5cclxuICAgICAgICAgICAgY29uc3QgY2JOYW1lID0gX2dlbmVyYXRlQ2FsbGJhY2tOYW1lKCdpZnJhbWVmY2InKTtcclxuICAgICAgICAgICAgLy8gR0FwaSBsb2FkZXIgbm90IGF2YWlsYWJsZSwgZHluYW1pY2FsbHkgbG9hZCBwbGF0Zm9ybS5qcy5cclxuICAgICAgICAgICAgX3dpbmRvdygpW2NiTmFtZV0gPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBHQXBpIGxvYWRlciBzaG91bGQgYmUgcmVhZHkuXHJcbiAgICAgICAgICAgICAgICBpZiAoISFnYXBpLmxvYWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2FkR2FwaUlmcmFtZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gR2FwaSBsb2FkZXIgZmFpbGVkLCB0aHJvdyBlcnJvci5cclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoX2NyZWF0ZUVycm9yKGF1dGgsIFwibmV0d29yay1yZXF1ZXN0LWZhaWxlZFwiIC8qIEF1dGhFcnJvckNvZGUuTkVUV09SS19SRVFVRVNUX0ZBSUxFRCAqLykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvLyBMb2FkIEdBcGkgbG9hZGVyLlxyXG4gICAgICAgICAgICByZXR1cm4gX2xvYWRKUyhgJHtfZ2FwaVNjcmlwdFVybCgpfT9vbmxvYWQ9JHtjYk5hbWV9YClcclxuICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHJlamVjdChlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgIC8vIFJlc2V0IGNhY2hlZCBwcm9taXNlIHRvIGFsbG93IGZvciByZXRyaWFsLlxyXG4gICAgICAgIGNhY2hlZEdBcGlMb2FkZXIgPSBudWxsO1xyXG4gICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfSk7XHJcbn1cclxubGV0IGNhY2hlZEdBcGlMb2FkZXIgPSBudWxsO1xyXG5mdW5jdGlvbiBfbG9hZEdhcGkoYXV0aCkge1xyXG4gICAgY2FjaGVkR0FwaUxvYWRlciA9IGNhY2hlZEdBcGlMb2FkZXIgfHwgbG9hZEdhcGkoYXV0aCk7XHJcbiAgICByZXR1cm4gY2FjaGVkR0FwaUxvYWRlcjtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgUElOR19USU1FT1VUID0gbmV3IERlbGF5KDUwMDAsIDE1MDAwKTtcclxuY29uc3QgSUZSQU1FX1BBVEggPSAnX18vYXV0aC9pZnJhbWUnO1xyXG5jb25zdCBFTVVMQVRFRF9JRlJBTUVfUEFUSCA9ICdlbXVsYXRvci9hdXRoL2lmcmFtZSc7XHJcbmNvbnN0IElGUkFNRV9BVFRSSUJVVEVTID0ge1xyXG4gICAgc3R5bGU6IHtcclxuICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcclxuICAgICAgICB0b3A6ICctMTAwcHgnLFxyXG4gICAgICAgIHdpZHRoOiAnMXB4JyxcclxuICAgICAgICBoZWlnaHQ6ICcxcHgnXHJcbiAgICB9LFxyXG4gICAgJ2FyaWEtaGlkZGVuJzogJ3RydWUnLFxyXG4gICAgdGFiaW5kZXg6ICctMSdcclxufTtcclxuLy8gTWFwIGZyb20gYXBpSG9zdCB0byBlbmRwb2ludCBJRCBmb3IgcGFzc2luZyBpbnRvIGlmcmFtZS4gSW4gY3VycmVudCBTREssIGFwaUhvc3QgY2FuIGJlIHNldCB0b1xyXG4vLyBhbnl0aGluZyAobm90IGZyb20gYSBsaXN0IG9mIGVuZHBvaW50cyB3aXRoIElEcyBhcyBpbiBsZWdhY3kpLCBzbyB0aGlzIGlzIHRoZSBjbG9zZXN0IHdlIGNhbiBnZXQuXHJcbmNvbnN0IEVJRF9GUk9NX0FQSUhPU1QgPSBuZXcgTWFwKFtcclxuICAgIFtcImlkZW50aXR5dG9vbGtpdC5nb29nbGVhcGlzLmNvbVwiIC8qIERlZmF1bHRDb25maWcuQVBJX0hPU1QgKi8sICdwJ10sXHJcbiAgICBbJ3N0YWdpbmctaWRlbnRpdHl0b29sa2l0LnNhbmRib3guZ29vZ2xlYXBpcy5jb20nLCAncyddLFxyXG4gICAgWyd0ZXN0LWlkZW50aXR5dG9vbGtpdC5zYW5kYm94Lmdvb2dsZWFwaXMuY29tJywgJ3QnXSAvLyB0ZXN0XHJcbl0pO1xyXG5mdW5jdGlvbiBnZXRJZnJhbWVVcmwoYXV0aCkge1xyXG4gICAgY29uc3QgY29uZmlnID0gYXV0aC5jb25maWc7XHJcbiAgICBfYXNzZXJ0KGNvbmZpZy5hdXRoRG9tYWluLCBhdXRoLCBcImF1dGgtZG9tYWluLWNvbmZpZy1yZXF1aXJlZFwiIC8qIEF1dGhFcnJvckNvZGUuTUlTU0lOR19BVVRIX0RPTUFJTiAqLyk7XHJcbiAgICBjb25zdCB1cmwgPSBjb25maWcuZW11bGF0b3JcclxuICAgICAgICA/IF9lbXVsYXRvclVybChjb25maWcsIEVNVUxBVEVEX0lGUkFNRV9QQVRIKVxyXG4gICAgICAgIDogYGh0dHBzOi8vJHthdXRoLmNvbmZpZy5hdXRoRG9tYWlufS8ke0lGUkFNRV9QQVRIfWA7XHJcbiAgICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICAgICAgYXBpS2V5OiBjb25maWcuYXBpS2V5LFxyXG4gICAgICAgIGFwcE5hbWU6IGF1dGgubmFtZSxcclxuICAgICAgICB2OiBTREtfVkVSU0lPTlxyXG4gICAgfTtcclxuICAgIGNvbnN0IGVpZCA9IEVJRF9GUk9NX0FQSUhPU1QuZ2V0KGF1dGguY29uZmlnLmFwaUhvc3QpO1xyXG4gICAgaWYgKGVpZCkge1xyXG4gICAgICAgIHBhcmFtcy5laWQgPSBlaWQ7XHJcbiAgICB9XHJcbiAgICBjb25zdCBmcmFtZXdvcmtzID0gYXV0aC5fZ2V0RnJhbWV3b3JrcygpO1xyXG4gICAgaWYgKGZyYW1ld29ya3MubGVuZ3RoKSB7XHJcbiAgICAgICAgcGFyYW1zLmZ3ID0gZnJhbWV3b3Jrcy5qb2luKCcsJyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYCR7dXJsfT8ke3F1ZXJ5c3RyaW5nKHBhcmFtcykuc2xpY2UoMSl9YDtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfb3BlbklmcmFtZShhdXRoKSB7XHJcbiAgICBjb25zdCBjb250ZXh0ID0gYXdhaXQgX2xvYWRHYXBpKGF1dGgpO1xyXG4gICAgY29uc3QgZ2FwaSA9IF93aW5kb3coKS5nYXBpO1xyXG4gICAgX2Fzc2VydChnYXBpLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICByZXR1cm4gY29udGV4dC5vcGVuKHtcclxuICAgICAgICB3aGVyZTogZG9jdW1lbnQuYm9keSxcclxuICAgICAgICB1cmw6IGdldElmcmFtZVVybChhdXRoKSxcclxuICAgICAgICBtZXNzYWdlSGFuZGxlcnNGaWx0ZXI6IGdhcGkuaWZyYW1lcy5DUk9TU19PUklHSU5fSUZSQU1FU19GSUxURVIsXHJcbiAgICAgICAgYXR0cmlidXRlczogSUZSQU1FX0FUVFJJQlVURVMsXHJcbiAgICAgICAgZG9udGNsZWFyOiB0cnVlXHJcbiAgICB9LCAoaWZyYW1lKSA9PiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgYXdhaXQgaWZyYW1lLnJlc3R5bGUoe1xyXG4gICAgICAgICAgICAvLyBQcmV2ZW50IGlmcmFtZSBmcm9tIGNsb3Npbmcgb24gbW91c2Ugb3V0LlxyXG4gICAgICAgICAgICBzZXRIaWRlT25MZWF2ZTogZmFsc2VcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBuZXR3b3JrRXJyb3IgPSBfY3JlYXRlRXJyb3IoYXV0aCwgXCJuZXR3b3JrLXJlcXVlc3QtZmFpbGVkXCIgLyogQXV0aEVycm9yQ29kZS5ORVRXT1JLX1JFUVVFU1RfRkFJTEVEICovKTtcclxuICAgICAgICAvLyBDb25maXJtIGlmcmFtZSBpcyBjb3JyZWN0bHkgbG9hZGVkLlxyXG4gICAgICAgIC8vIFRvIGZhbGxiYWNrIG9uIGZhaWx1cmUsIHNldCBhIHRpbWVvdXQuXHJcbiAgICAgICAgY29uc3QgbmV0d29ya0Vycm9yVGltZXIgPSBfd2luZG93KCkuc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHJlamVjdChuZXR3b3JrRXJyb3IpO1xyXG4gICAgICAgIH0sIFBJTkdfVElNRU9VVC5nZXQoKSk7XHJcbiAgICAgICAgLy8gQ2xlYXIgdGltZXIgYW5kIHJlc29sdmUgcGVuZGluZyBpZnJhbWUgcmVhZHkgcHJvbWlzZS5cclxuICAgICAgICBmdW5jdGlvbiBjbGVhclRpbWVyQW5kUmVzb2x2ZSgpIHtcclxuICAgICAgICAgICAgX3dpbmRvdygpLmNsZWFyVGltZW91dChuZXR3b3JrRXJyb3JUaW1lcik7XHJcbiAgICAgICAgICAgIHJlc29sdmUoaWZyYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVGhpcyByZXR1cm5zIGFuIElUaGVuYWJsZS4gSG93ZXZlciB0aGUgcmVqZWN0IHBhcnQgZG9lcyBub3QgY2FsbFxyXG4gICAgICAgIC8vIHdoZW4gdGhlIGlmcmFtZSBpcyBub3QgbG9hZGVkLlxyXG4gICAgICAgIGlmcmFtZS5waW5nKGNsZWFyVGltZXJBbmRSZXNvbHZlKS50aGVuKGNsZWFyVGltZXJBbmRSZXNvbHZlLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJlamVjdChuZXR3b3JrRXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBCQVNFX1BPUFVQX09QVElPTlMgPSB7XHJcbiAgICBsb2NhdGlvbjogJ3llcycsXHJcbiAgICByZXNpemFibGU6ICd5ZXMnLFxyXG4gICAgc3RhdHVzYmFyOiAneWVzJyxcclxuICAgIHRvb2xiYXI6ICdubydcclxufTtcclxuY29uc3QgREVGQVVMVF9XSURUSCA9IDUwMDtcclxuY29uc3QgREVGQVVMVF9IRUlHSFQgPSA2MDA7XHJcbmNvbnN0IFRBUkdFVF9CTEFOSyA9ICdfYmxhbmsnO1xyXG5jb25zdCBGSVJFRk9YX0VNUFRZX1VSTCA9ICdodHRwOi8vbG9jYWxob3N0JztcclxuY2xhc3MgQXV0aFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHdpbmRvdykge1xyXG4gICAgICAgIHRoaXMud2luZG93ID0gd2luZG93O1xyXG4gICAgICAgIHRoaXMuYXNzb2NpYXRlZEV2ZW50ID0gbnVsbDtcclxuICAgIH1cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLndpbmRvdykge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy53aW5kb3cuY2xvc2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkgeyB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIF9vcGVuKGF1dGgsIHVybCwgbmFtZSwgd2lkdGggPSBERUZBVUxUX1dJRFRILCBoZWlnaHQgPSBERUZBVUxUX0hFSUdIVCkge1xyXG4gICAgY29uc3QgdG9wID0gTWF0aC5tYXgoKHdpbmRvdy5zY3JlZW4uYXZhaWxIZWlnaHQgLSBoZWlnaHQpIC8gMiwgMCkudG9TdHJpbmcoKTtcclxuICAgIGNvbnN0IGxlZnQgPSBNYXRoLm1heCgod2luZG93LnNjcmVlbi5hdmFpbFdpZHRoIC0gd2lkdGgpIC8gMiwgMCkudG9TdHJpbmcoKTtcclxuICAgIGxldCB0YXJnZXQgPSAnJztcclxuICAgIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIEJBU0VfUE9QVVBfT1BUSU9OUyksIHsgd2lkdGg6IHdpZHRoLnRvU3RyaW5nKCksIGhlaWdodDogaGVpZ2h0LnRvU3RyaW5nKCksIHRvcCxcclxuICAgICAgICBsZWZ0IH0pO1xyXG4gICAgLy8gQ2hyb21lIGlPUyA3IGFuZCA4IGlzIHJldHVybmluZyBhbiB1bmRlZmluZWQgcG9wdXAgd2luIHdoZW4gdGFyZ2V0IGlzXHJcbiAgICAvLyBzcGVjaWZpZWQsIGV2ZW4gdGhvdWdoIHRoZSBwb3B1cCBpcyBub3QgbmVjZXNzYXJpbHkgYmxvY2tlZC5cclxuICAgIGNvbnN0IHVhID0gZ2V0VUEoKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgaWYgKG5hbWUpIHtcclxuICAgICAgICB0YXJnZXQgPSBfaXNDaHJvbWVJT1ModWEpID8gVEFSR0VUX0JMQU5LIDogbmFtZTtcclxuICAgIH1cclxuICAgIGlmIChfaXNGaXJlZm94KHVhKSkge1xyXG4gICAgICAgIC8vIEZpcmVmb3ggY29tcGxhaW5zIHdoZW4gaW52YWxpZCBVUkxzIGFyZSBwb3BwZWQgb3V0LiBIYWNreSB3YXkgdG8gYnlwYXNzLlxyXG4gICAgICAgIHVybCA9IHVybCB8fCBGSVJFRk9YX0VNUFRZX1VSTDtcclxuICAgICAgICAvLyBGaXJlZm94IGRpc2FibGVzIGJ5IGRlZmF1bHQgc2Nyb2xsaW5nIG9uIHBvcHVwIHdpbmRvd3MsIHdoaWNoIGNhbiBjcmVhdGVcclxuICAgICAgICAvLyBpc3N1ZXMgd2hlbiB0aGUgdXNlciBoYXMgbWFueSBHb29nbGUgYWNjb3VudHMsIGZvciBpbnN0YW5jZS5cclxuICAgICAgICBvcHRpb25zLnNjcm9sbGJhcnMgPSAneWVzJztcclxuICAgIH1cclxuICAgIGNvbnN0IG9wdGlvbnNTdHJpbmcgPSBPYmplY3QuZW50cmllcyhvcHRpb25zKS5yZWR1Y2UoKGFjY3VtLCBba2V5LCB2YWx1ZV0pID0+IGAke2FjY3VtfSR7a2V5fT0ke3ZhbHVlfSxgLCAnJyk7XHJcbiAgICBpZiAoX2lzSU9TU3RhbmRhbG9uZSh1YSkgJiYgdGFyZ2V0ICE9PSAnX3NlbGYnKSB7XHJcbiAgICAgICAgb3BlbkFzTmV3V2luZG93SU9TKHVybCB8fCAnJywgdGFyZ2V0KTtcclxuICAgICAgICByZXR1cm4gbmV3IEF1dGhQb3B1cChudWxsKTtcclxuICAgIH1cclxuICAgIC8vIGFib3V0OmJsYW5rIGdldHRpbmcgc2FuaXRpemVkIGNhdXNpbmcgYnJvd3NlcnMgbGlrZSBJRS9FZGdlIHRvIGRpc3BsYXlcclxuICAgIC8vIGJyaWVmIGVycm9yIG1lc3NhZ2UgYmVmb3JlIHJlZGlyZWN0aW5nIHRvIGhhbmRsZXIuXHJcbiAgICBjb25zdCBuZXdXaW4gPSB3aW5kb3cub3Blbih1cmwgfHwgJycsIHRhcmdldCwgb3B0aW9uc1N0cmluZyk7XHJcbiAgICBfYXNzZXJ0KG5ld1dpbiwgYXV0aCwgXCJwb3B1cC1ibG9ja2VkXCIgLyogQXV0aEVycm9yQ29kZS5QT1BVUF9CTE9DS0VEICovKTtcclxuICAgIC8vIEZsYWt5IG9uIElFIGVkZ2UsIGVuY2Fwc3VsYXRlIHdpdGggYSB0cnkgYW5kIGNhdGNoLlxyXG4gICAgdHJ5IHtcclxuICAgICAgICBuZXdXaW4uZm9jdXMoKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7IH1cclxuICAgIHJldHVybiBuZXcgQXV0aFBvcHVwKG5ld1dpbik7XHJcbn1cclxuZnVuY3Rpb24gb3BlbkFzTmV3V2luZG93SU9TKHVybCwgdGFyZ2V0KSB7XHJcbiAgICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgIGVsLmhyZWYgPSB1cmw7XHJcbiAgICBlbC50YXJnZXQgPSB0YXJnZXQ7XHJcbiAgICBjb25zdCBjbGljayA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdNb3VzZUV2ZW50Jyk7XHJcbiAgICBjbGljay5pbml0TW91c2VFdmVudCgnY2xpY2snLCB0cnVlLCB0cnVlLCB3aW5kb3csIDEsIDAsIDAsIDAsIDAsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCAxLCBudWxsKTtcclxuICAgIGVsLmRpc3BhdGNoRXZlbnQoY2xpY2spO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBVUkwgZm9yIEF1dGhlbnRpY2F0aW9uIHdpZGdldCB3aGljaCB3aWxsIGluaXRpYXRlIHRoZSBPQXV0aCBoYW5kc2hha2VcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jb25zdCBXSURHRVRfUEFUSCA9ICdfXy9hdXRoL2hhbmRsZXInO1xyXG4vKipcclxuICogVVJMIGZvciBlbXVsYXRlZCBlbnZpcm9ubWVudFxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmNvbnN0IEVNVUxBVE9SX1dJREdFVF9QQVRIID0gJ2VtdWxhdG9yL2F1dGgvaGFuZGxlcic7XHJcbi8qKlxyXG4gKiBGcmFnbWVudCBuYW1lIGZvciB0aGUgQXBwIENoZWNrIHRva2VuIHRoYXQgZ2V0cyBwYXNzZWQgdG8gdGhlIHdpZGdldFxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmNvbnN0IEZJUkVCQVNFX0FQUF9DSEVDS19GUkFHTUVOVF9JRCA9IGVuY29kZVVSSUNvbXBvbmVudCgnZmFjJyk7XHJcbmFzeW5jIGZ1bmN0aW9uIF9nZXRSZWRpcmVjdFVybChhdXRoLCBwcm92aWRlciwgYXV0aFR5cGUsIHJlZGlyZWN0VXJsLCBldmVudElkLCBhZGRpdGlvbmFsUGFyYW1zKSB7XHJcbiAgICBfYXNzZXJ0KGF1dGguY29uZmlnLmF1dGhEb21haW4sIGF1dGgsIFwiYXV0aC1kb21haW4tY29uZmlnLXJlcXVpcmVkXCIgLyogQXV0aEVycm9yQ29kZS5NSVNTSU5HX0FVVEhfRE9NQUlOICovKTtcclxuICAgIF9hc3NlcnQoYXV0aC5jb25maWcuYXBpS2V5LCBhdXRoLCBcImludmFsaWQtYXBpLWtleVwiIC8qIEF1dGhFcnJvckNvZGUuSU5WQUxJRF9BUElfS0VZICovKTtcclxuICAgIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgICAgICBhcGlLZXk6IGF1dGguY29uZmlnLmFwaUtleSxcclxuICAgICAgICBhcHBOYW1lOiBhdXRoLm5hbWUsXHJcbiAgICAgICAgYXV0aFR5cGUsXHJcbiAgICAgICAgcmVkaXJlY3RVcmwsXHJcbiAgICAgICAgdjogU0RLX1ZFUlNJT04sXHJcbiAgICAgICAgZXZlbnRJZFxyXG4gICAgfTtcclxuICAgIGlmIChwcm92aWRlciBpbnN0YW5jZW9mIEZlZGVyYXRlZEF1dGhQcm92aWRlcikge1xyXG4gICAgICAgIHByb3ZpZGVyLnNldERlZmF1bHRMYW5ndWFnZShhdXRoLmxhbmd1YWdlQ29kZSk7XHJcbiAgICAgICAgcGFyYW1zLnByb3ZpZGVySWQgPSBwcm92aWRlci5wcm92aWRlcklkIHx8ICcnO1xyXG4gICAgICAgIGlmICghaXNFbXB0eShwcm92aWRlci5nZXRDdXN0b21QYXJhbWV0ZXJzKCkpKSB7XHJcbiAgICAgICAgICAgIHBhcmFtcy5jdXN0b21QYXJhbWV0ZXJzID0gSlNPTi5zdHJpbmdpZnkocHJvdmlkZXIuZ2V0Q3VzdG9tUGFyYW1ldGVycygpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVE9ETyBzZXQgYWRkaXRpb25hbFBhcmFtcyBmcm9tIHRoZSBwcm92aWRlciBhcyB3ZWxsP1xyXG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGFkZGl0aW9uYWxQYXJhbXMgfHwge30pKSB7XHJcbiAgICAgICAgICAgIHBhcmFtc1trZXldID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHByb3ZpZGVyIGluc3RhbmNlb2YgQmFzZU9BdXRoUHJvdmlkZXIpIHtcclxuICAgICAgICBjb25zdCBzY29wZXMgPSBwcm92aWRlci5nZXRTY29wZXMoKS5maWx0ZXIoc2NvcGUgPT4gc2NvcGUgIT09ICcnKTtcclxuICAgICAgICBpZiAoc2NvcGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgcGFyYW1zLnNjb3BlcyA9IHNjb3Blcy5qb2luKCcsJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGF1dGgudGVuYW50SWQpIHtcclxuICAgICAgICBwYXJhbXMudGlkID0gYXV0aC50ZW5hbnRJZDtcclxuICAgIH1cclxuICAgIC8vIFRPRE86IG1heWJlIHNldCBlaWQgYXMgZW5kaXBvaW50SWRcclxuICAgIC8vIFRPRE86IG1heWJlIHNldCBmdyBhcyBGcmFtZXdvcmtzLmpvaW4oXCIsXCIpXHJcbiAgICBjb25zdCBwYXJhbXNEaWN0ID0gcGFyYW1zO1xyXG4gICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMocGFyYW1zRGljdCkpIHtcclxuICAgICAgICBpZiAocGFyYW1zRGljdFtrZXldID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgZGVsZXRlIHBhcmFtc0RpY3Rba2V5XTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBTZXRzIHRoZSBBcHAgQ2hlY2sgdG9rZW4gdG8gcGFzcyB0byB0aGUgd2lkZ2V0XHJcbiAgICBjb25zdCBhcHBDaGVja1Rva2VuID0gYXdhaXQgYXV0aC5fZ2V0QXBwQ2hlY2tUb2tlbigpO1xyXG4gICAgY29uc3QgYXBwQ2hlY2tUb2tlbkZyYWdtZW50ID0gYXBwQ2hlY2tUb2tlblxyXG4gICAgICAgID8gYCMke0ZJUkVCQVNFX0FQUF9DSEVDS19GUkFHTUVOVF9JRH09JHtlbmNvZGVVUklDb21wb25lbnQoYXBwQ2hlY2tUb2tlbil9YFxyXG4gICAgICAgIDogJyc7XHJcbiAgICAvLyBTdGFydCBhdCBpbmRleCAxIHRvIHNraXAgdGhlIGxlYWRpbmcgJyYnIGluIHRoZSBxdWVyeSBzdHJpbmdcclxuICAgIHJldHVybiBgJHtnZXRIYW5kbGVyQmFzZShhdXRoKX0/JHtxdWVyeXN0cmluZyhwYXJhbXNEaWN0KS5zbGljZSgxKX0ke2FwcENoZWNrVG9rZW5GcmFnbWVudH1gO1xyXG59XHJcbmZ1bmN0aW9uIGdldEhhbmRsZXJCYXNlKHsgY29uZmlnIH0pIHtcclxuICAgIGlmICghY29uZmlnLmVtdWxhdG9yKSB7XHJcbiAgICAgICAgcmV0dXJuIGBodHRwczovLyR7Y29uZmlnLmF1dGhEb21haW59LyR7V0lER0VUX1BBVEh9YDtcclxuICAgIH1cclxuICAgIHJldHVybiBfZW11bGF0b3JVcmwoY29uZmlnLCBFTVVMQVRPUl9XSURHRVRfUEFUSCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBzcGVjaWFsIHdlYiBzdG9yYWdlIGV2ZW50XHJcbiAqXHJcbiAqL1xyXG5jb25zdCBXRUJfU1RPUkFHRV9TVVBQT1JUX0tFWSA9ICd3ZWJTdG9yYWdlU3VwcG9ydCc7XHJcbmNsYXNzIEJyb3dzZXJQb3B1cFJlZGlyZWN0UmVzb2x2ZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5ldmVudE1hbmFnZXJzID0ge307XHJcbiAgICAgICAgdGhpcy5pZnJhbWVzID0ge307XHJcbiAgICAgICAgdGhpcy5vcmlnaW5WYWxpZGF0aW9uUHJvbWlzZXMgPSB7fTtcclxuICAgICAgICB0aGlzLl9yZWRpcmVjdFBlcnNpc3RlbmNlID0gYnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZTtcclxuICAgICAgICB0aGlzLl9jb21wbGV0ZVJlZGlyZWN0Rm4gPSBfZ2V0UmVkaXJlY3RSZXN1bHQ7XHJcbiAgICAgICAgdGhpcy5fb3ZlcnJpZGVSZWRpcmVjdFJlc3VsdCA9IF9vdmVycmlkZVJlZGlyZWN0UmVzdWx0O1xyXG4gICAgfVxyXG4gICAgLy8gV3JhcHBpbmcgaW4gYXN5bmMgZXZlbiB0aG91Z2ggd2UgZG9uJ3QgYXdhaXQgYW55d2hlcmUgaW4gb3JkZXJcclxuICAgIC8vIHRvIG1ha2Ugc3VyZSBlcnJvcnMgYXJlIHJhaXNlZCBhcyBwcm9taXNlIHJlamVjdGlvbnNcclxuICAgIGFzeW5jIF9vcGVuUG9wdXAoYXV0aCwgcHJvdmlkZXIsIGF1dGhUeXBlLCBldmVudElkKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGRlYnVnQXNzZXJ0KChfYSA9IHRoaXMuZXZlbnRNYW5hZ2Vyc1thdXRoLl9rZXkoKV0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tYW5hZ2VyLCAnX2luaXRpYWxpemUoKSBub3QgY2FsbGVkIGJlZm9yZSBfb3BlblBvcHVwKCknKTtcclxuICAgICAgICBjb25zdCB1cmwgPSBhd2FpdCBfZ2V0UmVkaXJlY3RVcmwoYXV0aCwgcHJvdmlkZXIsIGF1dGhUeXBlLCBfZ2V0Q3VycmVudFVybCgpLCBldmVudElkKTtcclxuICAgICAgICByZXR1cm4gX29wZW4oYXV0aCwgdXJsLCBfZ2VuZXJhdGVFdmVudElkKCkpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX29wZW5SZWRpcmVjdChhdXRoLCBwcm92aWRlciwgYXV0aFR5cGUsIGV2ZW50SWQpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLl9vcmlnaW5WYWxpZGF0aW9uKGF1dGgpO1xyXG4gICAgICAgIGNvbnN0IHVybCA9IGF3YWl0IF9nZXRSZWRpcmVjdFVybChhdXRoLCBwcm92aWRlciwgYXV0aFR5cGUsIF9nZXRDdXJyZW50VXJsKCksIGV2ZW50SWQpO1xyXG4gICAgICAgIF9zZXRXaW5kb3dMb2NhdGlvbih1cmwpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoKSA9PiB7IH0pO1xyXG4gICAgfVxyXG4gICAgX2luaXRpYWxpemUoYXV0aCkge1xyXG4gICAgICAgIGNvbnN0IGtleSA9IGF1dGguX2tleSgpO1xyXG4gICAgICAgIGlmICh0aGlzLmV2ZW50TWFuYWdlcnNba2V5XSkge1xyXG4gICAgICAgICAgICBjb25zdCB7IG1hbmFnZXIsIHByb21pc2UgfSA9IHRoaXMuZXZlbnRNYW5hZ2Vyc1trZXldO1xyXG4gICAgICAgICAgICBpZiAobWFuYWdlcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShtYW5hZ2VyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRlYnVnQXNzZXJ0KHByb21pc2UsICdJZiBtYW5hZ2VyIGlzIG5vdCBzZXQsIHByb21pc2Ugc2hvdWxkIGJlJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5pbml0QW5kR2V0TWFuYWdlcihhdXRoKTtcclxuICAgICAgICB0aGlzLmV2ZW50TWFuYWdlcnNba2V5XSA9IHsgcHJvbWlzZSB9O1xyXG4gICAgICAgIC8vIElmIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkLCB0aGUga2V5IHNob3VsZCBiZSByZW1vdmVkIHNvIHRoYXQgdGhlXHJcbiAgICAgICAgLy8gb3BlcmF0aW9uIGNhbiBiZSByZXRyaWVkIGxhdGVyLlxyXG4gICAgICAgIHByb21pc2UuY2F0Y2goKCkgPT4ge1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5ldmVudE1hbmFnZXJzW2tleV07XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICB9XHJcbiAgICBhc3luYyBpbml0QW5kR2V0TWFuYWdlcihhdXRoKSB7XHJcbiAgICAgICAgY29uc3QgaWZyYW1lID0gYXdhaXQgX29wZW5JZnJhbWUoYXV0aCk7XHJcbiAgICAgICAgY29uc3QgbWFuYWdlciA9IG5ldyBBdXRoRXZlbnRNYW5hZ2VyKGF1dGgpO1xyXG4gICAgICAgIGlmcmFtZS5yZWdpc3RlcignYXV0aEV2ZW50JywgKGlmcmFtZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIF9hc3NlcnQoaWZyYW1lRXZlbnQgPT09IG51bGwgfHwgaWZyYW1lRXZlbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGlmcmFtZUV2ZW50LmF1dGhFdmVudCwgYXV0aCwgXCJpbnZhbGlkLWF1dGgtZXZlbnRcIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfQVVUSF9FVkVOVCAqLyk7XHJcbiAgICAgICAgICAgIC8vIFRPRE86IENvbnNpZGVyIHNwbGl0dGluZyByZWRpcmVjdCBhbmQgcG9wdXAgZXZlbnRzIGVhcmxpZXIgb25cclxuICAgICAgICAgICAgY29uc3QgaGFuZGxlZCA9IG1hbmFnZXIub25FdmVudChpZnJhbWVFdmVudC5hdXRoRXZlbnQpO1xyXG4gICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IGhhbmRsZWQgPyBcIkFDS1wiIC8qIEdhcGlPdXRjb21lLkFDSyAqLyA6IFwiRVJST1JcIiAvKiBHYXBpT3V0Y29tZS5FUlJPUiAqLyB9O1xyXG4gICAgICAgIH0sIGdhcGkuaWZyYW1lcy5DUk9TU19PUklHSU5fSUZSQU1FU19GSUxURVIpO1xyXG4gICAgICAgIHRoaXMuZXZlbnRNYW5hZ2Vyc1thdXRoLl9rZXkoKV0gPSB7IG1hbmFnZXIgfTtcclxuICAgICAgICB0aGlzLmlmcmFtZXNbYXV0aC5fa2V5KCldID0gaWZyYW1lO1xyXG4gICAgICAgIHJldHVybiBtYW5hZ2VyO1xyXG4gICAgfVxyXG4gICAgX2lzSWZyYW1lV2ViU3RvcmFnZVN1cHBvcnRlZChhdXRoLCBjYikge1xyXG4gICAgICAgIGNvbnN0IGlmcmFtZSA9IHRoaXMuaWZyYW1lc1thdXRoLl9rZXkoKV07XHJcbiAgICAgICAgaWZyYW1lLnNlbmQoV0VCX1NUT1JBR0VfU1VQUE9SVF9LRVksIHsgdHlwZTogV0VCX1NUT1JBR0VfU1VQUE9SVF9LRVkgfSwgcmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICBjb25zdCBpc1N1cHBvcnRlZCA9IChfYSA9IHJlc3VsdCA9PT0gbnVsbCB8fCByZXN1bHQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlc3VsdFswXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hW1dFQl9TVE9SQUdFX1NVUFBPUlRfS0VZXTtcclxuICAgICAgICAgICAgaWYgKGlzU3VwcG9ydGVkICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGNiKCEhaXNTdXBwb3J0ZWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF9mYWlsKGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICB9LCBnYXBpLmlmcmFtZXMuQ1JPU1NfT1JJR0lOX0lGUkFNRVNfRklMVEVSKTtcclxuICAgIH1cclxuICAgIF9vcmlnaW5WYWxpZGF0aW9uKGF1dGgpIHtcclxuICAgICAgICBjb25zdCBrZXkgPSBhdXRoLl9rZXkoKTtcclxuICAgICAgICBpZiAoIXRoaXMub3JpZ2luVmFsaWRhdGlvblByb21pc2VzW2tleV0pIHtcclxuICAgICAgICAgICAgdGhpcy5vcmlnaW5WYWxpZGF0aW9uUHJvbWlzZXNba2V5XSA9IF92YWxpZGF0ZU9yaWdpbihhdXRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3JpZ2luVmFsaWRhdGlvblByb21pc2VzW2tleV07XHJcbiAgICB9XHJcbiAgICBnZXQgX3Nob3VsZEluaXRQcm9hY3RpdmVseSgpIHtcclxuICAgICAgICAvLyBNb2JpbGUgYnJvd3NlcnMgYW5kIFNhZmFyaSBuZWVkIHRvIG9wdGltaXN0aWNhbGx5IGluaXRpYWxpemVcclxuICAgICAgICByZXR1cm4gX2lzTW9iaWxlQnJvd3NlcigpIHx8IF9pc1NhZmFyaSgpIHx8IF9pc0lPUygpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiB7QGxpbmsgUG9wdXBSZWRpcmVjdFJlc29sdmVyfSBzdWl0YWJsZSBmb3IgYnJvd3NlclxyXG4gKiBiYXNlZCBhcHBsaWNhdGlvbnMuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRoaXMgbWV0aG9kIGRvZXMgbm90IHdvcmsgaW4gYSBOb2RlLmpzIGVudmlyb25tZW50LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBicm93c2VyUG9wdXBSZWRpcmVjdFJlc29sdmVyID0gQnJvd3NlclBvcHVwUmVkaXJlY3RSZXNvbHZlcjtcblxuY2xhc3MgTXVsdGlGYWN0b3JBc3NlcnRpb25JbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGZhY3RvcklkKSB7XHJcbiAgICAgICAgdGhpcy5mYWN0b3JJZCA9IGZhY3RvcklkO1xyXG4gICAgfVxyXG4gICAgX3Byb2Nlc3MoYXV0aCwgc2Vzc2lvbiwgZGlzcGxheU5hbWUpIHtcclxuICAgICAgICBzd2l0Y2ggKHNlc3Npb24udHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwiZW5yb2xsXCIgLyogTXVsdGlGYWN0b3JTZXNzaW9uVHlwZS5FTlJPTEwgKi86XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZmluYWxpemVFbnJvbGwoYXV0aCwgc2Vzc2lvbi5jcmVkZW50aWFsLCBkaXNwbGF5TmFtZSk7XHJcbiAgICAgICAgICAgIGNhc2UgXCJzaWduaW5cIiAvKiBNdWx0aUZhY3RvclNlc3Npb25UeXBlLlNJR05fSU4gKi86XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZmluYWxpemVTaWduSW4oYXV0aCwgc2Vzc2lvbi5jcmVkZW50aWFsKTtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBkZWJ1Z0ZhaWwoJ3VuZXhwZWN0ZWQgTXVsdGlGYWN0b3JTZXNzaW9uVHlwZScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG4vKipcclxuICoge0Bpbmhlcml0ZG9jIFBob25lTXVsdGlGYWN0b3JBc3NlcnRpb259XHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIFBob25lTXVsdGlGYWN0b3JBc3NlcnRpb25JbXBsIGV4dGVuZHMgTXVsdGlGYWN0b3JBc3NlcnRpb25JbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGNyZWRlbnRpYWwpIHtcclxuICAgICAgICBzdXBlcihcInBob25lXCIgLyogRmFjdG9ySWQuUEhPTkUgKi8pO1xyXG4gICAgICAgIHRoaXMuY3JlZGVudGlhbCA9IGNyZWRlbnRpYWw7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBzdGF0aWMgX2Zyb21DcmVkZW50aWFsKGNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFBob25lTXVsdGlGYWN0b3JBc3NlcnRpb25JbXBsKGNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2ZpbmFsaXplRW5yb2xsKGF1dGgsIGlkVG9rZW4sIGRpc3BsYXlOYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIGZpbmFsaXplRW5yb2xsUGhvbmVNZmEoYXV0aCwge1xyXG4gICAgICAgICAgICBpZFRva2VuLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSxcclxuICAgICAgICAgICAgcGhvbmVWZXJpZmljYXRpb25JbmZvOiB0aGlzLmNyZWRlbnRpYWwuX21ha2VWZXJpZmljYXRpb25SZXF1ZXN0KClcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9maW5hbGl6ZVNpZ25JbihhdXRoLCBtZmFQZW5kaW5nQ3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiBmaW5hbGl6ZVNpZ25JblBob25lTWZhKGF1dGgsIHtcclxuICAgICAgICAgICAgbWZhUGVuZGluZ0NyZWRlbnRpYWwsXHJcbiAgICAgICAgICAgIHBob25lVmVyaWZpY2F0aW9uSW5mbzogdGhpcy5jcmVkZW50aWFsLl9tYWtlVmVyaWZpY2F0aW9uUmVxdWVzdCgpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBnZW5lcmF0aW5nIGEge0BsaW5rIFBob25lTXVsdGlGYWN0b3JBc3NlcnRpb259LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBQaG9uZU11bHRpRmFjdG9yR2VuZXJhdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yKCkgeyB9XHJcbiAgICAvKipcclxuICAgICAqIFByb3ZpZGVzIGEge0BsaW5rIFBob25lTXVsdGlGYWN0b3JBc3NlcnRpb259IHRvIGNvbmZpcm0gb3duZXJzaGlwIG9mIHRoZSBwaG9uZSBzZWNvbmQgZmFjdG9yLlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKiBUaGlzIG1ldGhvZCBkb2VzIG5vdCB3b3JrIGluIGEgTm9kZS5qcyBlbnZpcm9ubWVudC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcGhvbmVBdXRoQ3JlZGVudGlhbCAtIEEgY3JlZGVudGlhbCBwcm92aWRlZCBieSB7QGxpbmsgUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbH0uXHJcbiAgICAgKiBAcmV0dXJucyBBIHtAbGluayBQaG9uZU11bHRpRmFjdG9yQXNzZXJ0aW9ufSB3aGljaCBjYW4gYmUgdXNlZCB3aXRoXHJcbiAgICAgKiB7QGxpbmsgTXVsdGlGYWN0b3JSZXNvbHZlci5yZXNvbHZlU2lnbklufVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYXNzZXJ0aW9uKGNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gUGhvbmVNdWx0aUZhY3RvckFzc2VydGlvbkltcGwuX2Zyb21DcmVkZW50aWFsKGNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBUaGUgaWRlbnRpZmllciBvZiB0aGUgcGhvbmUgc2Vjb25kIGZhY3RvcjogYHBob25lYC5cclxuICovXHJcblBob25lTXVsdGlGYWN0b3JHZW5lcmF0b3IuRkFDVE9SX0lEID0gJ3Bob25lJztcblxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBnZW5lcmF0aW5nIGEge0BsaW5rIFRvdHBNdWx0aUZhY3RvckFzc2VydGlvbn0uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIFRvdHBNdWx0aUZhY3RvckdlbmVyYXRvciB7XHJcbiAgICAvKipcclxuICAgICAqIFByb3ZpZGVzIGEge0BsaW5rIFRvdHBNdWx0aUZhY3RvckFzc2VydGlvbn0gdG8gY29uZmlybSBvd25lcnNoaXAgb2ZcclxuICAgICAqIHRoZSBUT1RQICh0aW1lLWJhc2VkIG9uZS10aW1lIHBhc3N3b3JkKSBzZWNvbmQgZmFjdG9yLlxyXG4gICAgICogVGhpcyBhc3NlcnRpb24gaXMgdXNlZCB0byBjb21wbGV0ZSBlbnJvbGxtZW50IGluIFRPVFAgc2Vjb25kIGZhY3Rvci5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gc2VjcmV0IEEge0BsaW5rIFRvdHBTZWNyZXR9IGNvbnRhaW5pbmcgdGhlIHNoYXJlZCBzZWNyZXQga2V5IGFuZCBvdGhlciBUT1RQIHBhcmFtZXRlcnMuXHJcbiAgICAgKiBAcGFyYW0gb25lVGltZVBhc3N3b3JkIE9uZS10aW1lIHBhc3N3b3JkIGZyb20gVE9UUCBBcHAuXHJcbiAgICAgKiBAcmV0dXJucyBBIHtAbGluayBUb3RwTXVsdGlGYWN0b3JBc3NlcnRpb259IHdoaWNoIGNhbiBiZSB1c2VkIHdpdGhcclxuICAgICAqIHtAbGluayBNdWx0aUZhY3RvclVzZXIuZW5yb2xsfS5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGFzc2VydGlvbkZvckVucm9sbG1lbnQoc2VjcmV0LCBvbmVUaW1lUGFzc3dvcmQpIHtcclxuICAgICAgICByZXR1cm4gVG90cE11bHRpRmFjdG9yQXNzZXJ0aW9uSW1wbC5fZnJvbVNlY3JldChzZWNyZXQsIG9uZVRpbWVQYXNzd29yZCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFByb3ZpZGVzIGEge0BsaW5rIFRvdHBNdWx0aUZhY3RvckFzc2VydGlvbn0gdG8gY29uZmlybSBvd25lcnNoaXAgb2YgdGhlIFRPVFAgc2Vjb25kIGZhY3Rvci5cclxuICAgICAqIFRoaXMgYXNzZXJ0aW9uIGlzIHVzZWQgdG8gY29tcGxldGUgc2lnbkluIHdpdGggVE9UUCBhcyB0aGUgc2Vjb25kIGZhY3Rvci5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZW5yb2xsbWVudElkIGlkZW50aWZpZXMgdGhlIGVucm9sbGVkIFRPVFAgc2Vjb25kIGZhY3Rvci5cclxuICAgICAqIEBwYXJhbSBvbmVUaW1lUGFzc3dvcmQgT25lLXRpbWUgcGFzc3dvcmQgZnJvbSBUT1RQIEFwcC5cclxuICAgICAqIEByZXR1cm5zIEEge0BsaW5rIFRvdHBNdWx0aUZhY3RvckFzc2VydGlvbn0gd2hpY2ggY2FuIGJlIHVzZWQgd2l0aFxyXG4gICAgICoge0BsaW5rIE11bHRpRmFjdG9yUmVzb2x2ZXIucmVzb2x2ZVNpZ25Jbn0uXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhc3NlcnRpb25Gb3JTaWduSW4oZW5yb2xsbWVudElkLCBvbmVUaW1lUGFzc3dvcmQpIHtcclxuICAgICAgICByZXR1cm4gVG90cE11bHRpRmFjdG9yQXNzZXJ0aW9uSW1wbC5fZnJvbUVucm9sbG1lbnRJZChlbnJvbGxtZW50SWQsIG9uZVRpbWVQYXNzd29yZCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBwcm9taXNlIHRvIHtAbGluayBUb3RwU2VjcmV0fSB3aGljaCBjb250YWlucyB0aGUgVE9UUCBzaGFyZWQgc2VjcmV0IGtleSBhbmQgb3RoZXIgcGFyYW1ldGVycy5cclxuICAgICAqIENyZWF0ZXMgYSBUT1RQIHNlY3JldCBhcyBwYXJ0IG9mIGVucm9sbGluZyBhIFRPVFAgc2Vjb25kIGZhY3Rvci5cclxuICAgICAqIFVzZWQgZm9yIGdlbmVyYXRpbmcgYSBRUiBjb2RlIFVSTCBvciBpbnB1dHRpbmcgaW50byBhIFRPVFAgYXBwLlxyXG4gICAgICogVGhpcyBtZXRob2QgdXNlcyB0aGUgYXV0aCBpbnN0YW5jZSBjb3JyZXNwb25kaW5nIHRvIHRoZSB1c2VyIGluIHRoZSBtdWx0aUZhY3RvclNlc3Npb24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHNlc3Npb24gVGhlIHtAbGluayBNdWx0aUZhY3RvclNlc3Npb259IHRoYXQgdGhlIHVzZXIgaXMgcGFydCBvZi5cclxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0byB7QGxpbmsgVG90cFNlY3JldH0uXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhc3luYyBnZW5lcmF0ZVNlY3JldChzZXNzaW9uKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IG1mYVNlc3Npb24gPSBzZXNzaW9uO1xyXG4gICAgICAgIF9hc3NlcnQodHlwZW9mICgoX2EgPSBtZmFTZXNzaW9uLnVzZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5hdXRoKSAhPT0gJ3VuZGVmaW5lZCcsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHN0YXJ0RW5yb2xsVG90cE1mYShtZmFTZXNzaW9uLnVzZXIuYXV0aCwge1xyXG4gICAgICAgICAgICBpZFRva2VuOiBtZmFTZXNzaW9uLmNyZWRlbnRpYWwsXHJcbiAgICAgICAgICAgIHRvdHBFbnJvbGxtZW50SW5mbzoge31cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gVG90cFNlY3JldC5fZnJvbVN0YXJ0VG90cE1mYUVucm9sbG1lbnRSZXNwb25zZShyZXNwb25zZSwgbWZhU2Vzc2lvbi51c2VyLmF1dGgpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBUaGUgaWRlbnRpZmllciBvZiB0aGUgVE9UUCBzZWNvbmQgZmFjdG9yOiBgdG90cGAuXHJcbiAqL1xyXG5Ub3RwTXVsdGlGYWN0b3JHZW5lcmF0b3IuRkFDVE9SX0lEID0gXCJ0b3RwXCIgLyogRmFjdG9ySWQuVE9UUCAqLztcclxuY2xhc3MgVG90cE11bHRpRmFjdG9yQXNzZXJ0aW9uSW1wbCBleHRlbmRzIE11bHRpRmFjdG9yQXNzZXJ0aW9uSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihvdHAsIGVucm9sbG1lbnRJZCwgc2VjcmV0KSB7XHJcbiAgICAgICAgc3VwZXIoXCJ0b3RwXCIgLyogRmFjdG9ySWQuVE9UUCAqLyk7XHJcbiAgICAgICAgdGhpcy5vdHAgPSBvdHA7XHJcbiAgICAgICAgdGhpcy5lbnJvbGxtZW50SWQgPSBlbnJvbGxtZW50SWQ7XHJcbiAgICAgICAgdGhpcy5zZWNyZXQgPSBzZWNyZXQ7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBzdGF0aWMgX2Zyb21TZWNyZXQoc2VjcmV0LCBvdHApIHtcclxuICAgICAgICByZXR1cm4gbmV3IFRvdHBNdWx0aUZhY3RvckFzc2VydGlvbkltcGwob3RwLCB1bmRlZmluZWQsIHNlY3JldCk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBzdGF0aWMgX2Zyb21FbnJvbGxtZW50SWQoZW5yb2xsbWVudElkLCBvdHApIHtcclxuICAgICAgICByZXR1cm4gbmV3IFRvdHBNdWx0aUZhY3RvckFzc2VydGlvbkltcGwob3RwLCBlbnJvbGxtZW50SWQpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgYXN5bmMgX2ZpbmFsaXplRW5yb2xsKGF1dGgsIGlkVG9rZW4sIGRpc3BsYXlOYW1lKSB7XHJcbiAgICAgICAgX2Fzc2VydCh0eXBlb2YgdGhpcy5zZWNyZXQgIT09ICd1bmRlZmluZWQnLCBhdXRoLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5BUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgcmV0dXJuIGZpbmFsaXplRW5yb2xsVG90cE1mYShhdXRoLCB7XHJcbiAgICAgICAgICAgIGlkVG9rZW4sXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lLFxyXG4gICAgICAgICAgICB0b3RwVmVyaWZpY2F0aW9uSW5mbzogdGhpcy5zZWNyZXQuX21ha2VUb3RwVmVyaWZpY2F0aW9uSW5mbyh0aGlzLm90cClcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIGFzeW5jIF9maW5hbGl6ZVNpZ25JbihhdXRoLCBtZmFQZW5kaW5nQ3JlZGVudGlhbCkge1xyXG4gICAgICAgIF9hc3NlcnQodGhpcy5lbnJvbGxtZW50SWQgIT09IHVuZGVmaW5lZCAmJiB0aGlzLm90cCAhPT0gdW5kZWZpbmVkLCBhdXRoLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5BUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgY29uc3QgdG90cFZlcmlmaWNhdGlvbkluZm8gPSB7IHZlcmlmaWNhdGlvbkNvZGU6IHRoaXMub3RwIH07XHJcbiAgICAgICAgcmV0dXJuIGZpbmFsaXplU2lnbkluVG90cE1mYShhdXRoLCB7XHJcbiAgICAgICAgICAgIG1mYVBlbmRpbmdDcmVkZW50aWFsLFxyXG4gICAgICAgICAgICBtZmFFbnJvbGxtZW50SWQ6IHRoaXMuZW5yb2xsbWVudElkLFxyXG4gICAgICAgICAgICB0b3RwVmVyaWZpY2F0aW9uSW5mb1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBQcm92aWRlciBmb3IgZ2VuZXJhdGluZyBhIHtAbGluayBUb3RwTXVsdGlGYWN0b3JBc3NlcnRpb259LlxyXG4gKlxyXG4gKiBTdG9yZXMgdGhlIHNoYXJlZCBzZWNyZXQga2V5IGFuZCBvdGhlciBwYXJhbWV0ZXJzIHRvIGdlbmVyYXRlIHRpbWUtYmFzZWQgT1RQcy5cclxuICogSW1wbGVtZW50cyBtZXRob2RzIHRvIHJldHJpZXZlIHRoZSBzaGFyZWQgc2VjcmV0IGtleSBhbmQgZ2VuZXJhdGUgYSBRUiBjb2RlIFVSTC5cclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgVG90cFNlY3JldCB7XHJcbiAgICAvLyBUaGUgcHVibGljIG1lbWJlcnMgYXJlIGRlY2xhcmVkIG91dHNpZGUgdGhlIGNvbnN0cnVjdG9yIHNvIHRoZSBkb2NzIGNhbiBiZSBnZW5lcmF0ZWQuXHJcbiAgICBjb25zdHJ1Y3RvcihzZWNyZXRLZXksIGhhc2hpbmdBbGdvcml0aG0sIGNvZGVMZW5ndGgsIGNvZGVJbnRlcnZhbFNlY29uZHMsIGVucm9sbG1lbnRDb21wbGV0aW9uRGVhZGxpbmUsIHNlc3Npb25JbmZvLCBhdXRoKSB7XHJcbiAgICAgICAgdGhpcy5zZXNzaW9uSW5mbyA9IHNlc3Npb25JbmZvO1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IGF1dGg7XHJcbiAgICAgICAgdGhpcy5zZWNyZXRLZXkgPSBzZWNyZXRLZXk7XHJcbiAgICAgICAgdGhpcy5oYXNoaW5nQWxnb3JpdGhtID0gaGFzaGluZ0FsZ29yaXRobTtcclxuICAgICAgICB0aGlzLmNvZGVMZW5ndGggPSBjb2RlTGVuZ3RoO1xyXG4gICAgICAgIHRoaXMuY29kZUludGVydmFsU2Vjb25kcyA9IGNvZGVJbnRlcnZhbFNlY29uZHM7XHJcbiAgICAgICAgdGhpcy5lbnJvbGxtZW50Q29tcGxldGlvbkRlYWRsaW5lID0gZW5yb2xsbWVudENvbXBsZXRpb25EZWFkbGluZTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIHN0YXRpYyBfZnJvbVN0YXJ0VG90cE1mYUVucm9sbG1lbnRSZXNwb25zZShyZXNwb25zZSwgYXV0aCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgVG90cFNlY3JldChyZXNwb25zZS50b3RwU2Vzc2lvbkluZm8uc2hhcmVkU2VjcmV0S2V5LCByZXNwb25zZS50b3RwU2Vzc2lvbkluZm8uaGFzaGluZ0FsZ29yaXRobSwgcmVzcG9uc2UudG90cFNlc3Npb25JbmZvLnZlcmlmaWNhdGlvbkNvZGVMZW5ndGgsIHJlc3BvbnNlLnRvdHBTZXNzaW9uSW5mby5wZXJpb2RTZWMsIG5ldyBEYXRlKHJlc3BvbnNlLnRvdHBTZXNzaW9uSW5mby5maW5hbGl6ZUVucm9sbG1lbnRUaW1lKS50b1VUQ1N0cmluZygpLCByZXNwb25zZS50b3RwU2Vzc2lvbkluZm8uc2Vzc2lvbkluZm8sIGF1dGgpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX21ha2VUb3RwVmVyaWZpY2F0aW9uSW5mbyhvdHApIHtcclxuICAgICAgICByZXR1cm4geyBzZXNzaW9uSW5mbzogdGhpcy5zZXNzaW9uSW5mbywgdmVyaWZpY2F0aW9uQ29kZTogb3RwIH07XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBRUiBjb2RlIFVSTCBhcyBkZXNjcmliZWQgaW5cclxuICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvZ29vZ2xlLWF1dGhlbnRpY2F0b3Ivd2lraS9LZXktVXJpLUZvcm1hdFxyXG4gICAgICogVGhpcyBjYW4gYmUgZGlzcGxheWVkIHRvIHRoZSB1c2VyIGFzIGEgUVIgY29kZSB0byBiZSBzY2FubmVkIGludG8gYSBUT1RQIGFwcCBsaWtlIEdvb2dsZSBBdXRoZW50aWNhdG9yLlxyXG4gICAgICogSWYgdGhlIG9wdGlvbmFsIHBhcmFtZXRlcnMgYXJlIHVuc3BlY2lmaWVkLCBhbiBhY2NvdW50TmFtZSBvZiA8dXNlckVtYWlsPiBhbmQgaXNzdWVyIG9mIDxmaXJlYmFzZUFwcE5hbWU+IGFyZSB1c2VkLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBhY2NvdW50TmFtZSB0aGUgbmFtZSBvZiB0aGUgYWNjb3VudC9hcHAgYWxvbmcgd2l0aCBhIHVzZXIgaWRlbnRpZmllci5cclxuICAgICAqIEBwYXJhbSBpc3N1ZXIgaXNzdWVyIG9mIHRoZSBUT1RQIChsaWtlbHkgdGhlIGFwcCBuYW1lKS5cclxuICAgICAqIEByZXR1cm5zIEEgUVIgY29kZSBVUkwgc3RyaW5nLlxyXG4gICAgICovXHJcbiAgICBnZW5lcmF0ZVFyQ29kZVVybChhY2NvdW50TmFtZSwgaXNzdWVyKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGxldCB1c2VEZWZhdWx0cyA9IGZhbHNlO1xyXG4gICAgICAgIGlmIChfaXNFbXB0eVN0cmluZyhhY2NvdW50TmFtZSkgfHwgX2lzRW1wdHlTdHJpbmcoaXNzdWVyKSkge1xyXG4gICAgICAgICAgICB1c2VEZWZhdWx0cyA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh1c2VEZWZhdWx0cykge1xyXG4gICAgICAgICAgICBpZiAoX2lzRW1wdHlTdHJpbmcoYWNjb3VudE5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICBhY2NvdW50TmFtZSA9ICgoX2EgPSB0aGlzLmF1dGguY3VycmVudFVzZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5lbWFpbCkgfHwgJ3Vua25vd251c2VyJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoX2lzRW1wdHlTdHJpbmcoaXNzdWVyKSkge1xyXG4gICAgICAgICAgICAgICAgaXNzdWVyID0gdGhpcy5hdXRoLm5hbWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGBvdHBhdXRoOi8vdG90cC8ke2lzc3Vlcn06JHthY2NvdW50TmFtZX0/c2VjcmV0PSR7dGhpcy5zZWNyZXRLZXl9Jmlzc3Vlcj0ke2lzc3Vlcn0mYWxnb3JpdGhtPSR7dGhpcy5oYXNoaW5nQWxnb3JpdGhtfSZkaWdpdHM9JHt0aGlzLmNvZGVMZW5ndGh9YDtcclxuICAgIH1cclxufVxyXG4vKiogQGludGVybmFsICovXHJcbmZ1bmN0aW9uIF9pc0VtcHR5U3RyaW5nKGlucHV0KSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIGlucHV0ID09PSAndW5kZWZpbmVkJyB8fCAoaW5wdXQgPT09IG51bGwgfHwgaW5wdXQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGlucHV0Lmxlbmd0aCkgPT09IDA7XHJcbn1cblxudmFyIG5hbWUgPSBcIkBmaXJlYmFzZS9hdXRoXCI7XG52YXIgdmVyc2lvbiA9IFwiMS43LjVcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgQXV0aEludGVyb3Age1xyXG4gICAgY29uc3RydWN0b3IoYXV0aCkge1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IGF1dGg7XHJcbiAgICAgICAgdGhpcy5pbnRlcm5hbExpc3RlbmVycyA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuICAgIGdldFVpZCgpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgdGhpcy5hc3NlcnRBdXRoQ29uZmlndXJlZCgpO1xyXG4gICAgICAgIHJldHVybiAoKF9hID0gdGhpcy5hdXRoLmN1cnJlbnRVc2VyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudWlkKSB8fCBudWxsO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZ2V0VG9rZW4oZm9yY2VSZWZyZXNoKSB7XHJcbiAgICAgICAgdGhpcy5hc3NlcnRBdXRoQ29uZmlndXJlZCgpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuYXV0aC5faW5pdGlhbGl6YXRpb25Qcm9taXNlO1xyXG4gICAgICAgIGlmICghdGhpcy5hdXRoLmN1cnJlbnRVc2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IGF3YWl0IHRoaXMuYXV0aC5jdXJyZW50VXNlci5nZXRJZFRva2VuKGZvcmNlUmVmcmVzaCk7XHJcbiAgICAgICAgcmV0dXJuIHsgYWNjZXNzVG9rZW4gfTtcclxuICAgIH1cclxuICAgIGFkZEF1dGhUb2tlbkxpc3RlbmVyKGxpc3RlbmVyKSB7XHJcbiAgICAgICAgdGhpcy5hc3NlcnRBdXRoQ29uZmlndXJlZCgpO1xyXG4gICAgICAgIGlmICh0aGlzLmludGVybmFsTGlzdGVuZXJzLmhhcyhsaXN0ZW5lcikpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB1bnN1YnNjcmliZSA9IHRoaXMuYXV0aC5vbklkVG9rZW5DaGFuZ2VkKHVzZXIgPT4ge1xyXG4gICAgICAgICAgICBsaXN0ZW5lcigodXNlciA9PT0gbnVsbCB8fCB1c2VyID09PSB2b2lkIDAgPyB2b2lkIDAgOiB1c2VyLnN0c1Rva2VuTWFuYWdlci5hY2Nlc3NUb2tlbikgfHwgbnVsbCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5pbnRlcm5hbExpc3RlbmVycy5zZXQobGlzdGVuZXIsIHVuc3Vic2NyaWJlKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZVByb2FjdGl2ZVJlZnJlc2goKTtcclxuICAgIH1cclxuICAgIHJlbW92ZUF1dGhUb2tlbkxpc3RlbmVyKGxpc3RlbmVyKSB7XHJcbiAgICAgICAgdGhpcy5hc3NlcnRBdXRoQ29uZmlndXJlZCgpO1xyXG4gICAgICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gdGhpcy5pbnRlcm5hbExpc3RlbmVycy5nZXQobGlzdGVuZXIpO1xyXG4gICAgICAgIGlmICghdW5zdWJzY3JpYmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmludGVybmFsTGlzdGVuZXJzLmRlbGV0ZShsaXN0ZW5lcik7XHJcbiAgICAgICAgdW5zdWJzY3JpYmUoKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZVByb2FjdGl2ZVJlZnJlc2goKTtcclxuICAgIH1cclxuICAgIGFzc2VydEF1dGhDb25maWd1cmVkKCkge1xyXG4gICAgICAgIF9hc3NlcnQodGhpcy5hdXRoLl9pbml0aWFsaXphdGlvblByb21pc2UsIFwiZGVwZW5kZW50LXNkay1pbml0aWFsaXplZC1iZWZvcmUtYXV0aFwiIC8qIEF1dGhFcnJvckNvZGUuREVQRU5ERU5UX1NES19JTklUX0JFRk9SRV9BVVRIICovKTtcclxuICAgIH1cclxuICAgIHVwZGF0ZVByb2FjdGl2ZVJlZnJlc2goKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaW50ZXJuYWxMaXN0ZW5lcnMuc2l6ZSA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5hdXRoLl9zdGFydFByb2FjdGl2ZVJlZnJlc2goKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0aC5fc3RvcFByb2FjdGl2ZVJlZnJlc2goKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0VmVyc2lvbkZvclBsYXRmb3JtKGNsaWVudFBsYXRmb3JtKSB7XHJcbiAgICBzd2l0Y2ggKGNsaWVudFBsYXRmb3JtKSB7XHJcbiAgICAgICAgY2FzZSBcIk5vZGVcIiAvKiBDbGllbnRQbGF0Zm9ybS5OT0RFICovOlxyXG4gICAgICAgICAgICByZXR1cm4gJ25vZGUnO1xyXG4gICAgICAgIGNhc2UgXCJSZWFjdE5hdGl2ZVwiIC8qIENsaWVudFBsYXRmb3JtLlJFQUNUX05BVElWRSAqLzpcclxuICAgICAgICAgICAgcmV0dXJuICdybic7XHJcbiAgICAgICAgY2FzZSBcIldvcmtlclwiIC8qIENsaWVudFBsYXRmb3JtLldPUktFUiAqLzpcclxuICAgICAgICAgICAgcmV0dXJuICd3ZWJ3b3JrZXInO1xyXG4gICAgICAgIGNhc2UgXCJDb3Jkb3ZhXCIgLyogQ2xpZW50UGxhdGZvcm0uQ09SRE9WQSAqLzpcclxuICAgICAgICAgICAgcmV0dXJuICdjb3Jkb3ZhJztcclxuICAgICAgICBjYXNlIFwiV2ViRXh0ZW5zaW9uXCIgLyogQ2xpZW50UGxhdGZvcm0uV0VCX0VYVEVOU0lPTiAqLzpcclxuICAgICAgICAgICAgcmV0dXJuICd3ZWItZXh0ZW5zaW9uJztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG59XHJcbi8qKiBAaW50ZXJuYWwgKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJBdXRoKGNsaWVudFBsYXRmb3JtKSB7XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChcImF1dGhcIiAvKiBfQ29tcG9uZW50TmFtZS5BVVRIICovLCAoY29udGFpbmVyLCB7IG9wdGlvbnM6IGRlcHMgfSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGFwcCA9IGNvbnRhaW5lci5nZXRQcm92aWRlcignYXBwJykuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgY29uc3QgaGVhcnRiZWF0U2VydmljZVByb3ZpZGVyID0gY29udGFpbmVyLmdldFByb3ZpZGVyKCdoZWFydGJlYXQnKTtcclxuICAgICAgICBjb25zdCBhcHBDaGVja1NlcnZpY2VQcm92aWRlciA9IGNvbnRhaW5lci5nZXRQcm92aWRlcignYXBwLWNoZWNrLWludGVybmFsJyk7XHJcbiAgICAgICAgY29uc3QgeyBhcGlLZXksIGF1dGhEb21haW4gfSA9IGFwcC5vcHRpb25zO1xyXG4gICAgICAgIF9hc3NlcnQoYXBpS2V5ICYmICFhcGlLZXkuaW5jbHVkZXMoJzonKSwgXCJpbnZhbGlkLWFwaS1rZXlcIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfQVBJX0tFWSAqLywgeyBhcHBOYW1lOiBhcHAubmFtZSB9KTtcclxuICAgICAgICBjb25zdCBjb25maWcgPSB7XHJcbiAgICAgICAgICAgIGFwaUtleSxcclxuICAgICAgICAgICAgYXV0aERvbWFpbixcclxuICAgICAgICAgICAgY2xpZW50UGxhdGZvcm0sXHJcbiAgICAgICAgICAgIGFwaUhvc3Q6IFwiaWRlbnRpdHl0b29sa2l0Lmdvb2dsZWFwaXMuY29tXCIgLyogRGVmYXVsdENvbmZpZy5BUElfSE9TVCAqLyxcclxuICAgICAgICAgICAgdG9rZW5BcGlIb3N0OiBcInNlY3VyZXRva2VuLmdvb2dsZWFwaXMuY29tXCIgLyogRGVmYXVsdENvbmZpZy5UT0tFTl9BUElfSE9TVCAqLyxcclxuICAgICAgICAgICAgYXBpU2NoZW1lOiBcImh0dHBzXCIgLyogRGVmYXVsdENvbmZpZy5BUElfU0NIRU1FICovLFxyXG4gICAgICAgICAgICBzZGtDbGllbnRWZXJzaW9uOiBfZ2V0Q2xpZW50VmVyc2lvbihjbGllbnRQbGF0Zm9ybSlcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IGF1dGhJbnN0YW5jZSA9IG5ldyBBdXRoSW1wbChhcHAsIGhlYXJ0YmVhdFNlcnZpY2VQcm92aWRlciwgYXBwQ2hlY2tTZXJ2aWNlUHJvdmlkZXIsIGNvbmZpZyk7XHJcbiAgICAgICAgX2luaXRpYWxpemVBdXRoSW5zdGFuY2UoYXV0aEluc3RhbmNlLCBkZXBzKTtcclxuICAgICAgICByZXR1cm4gYXV0aEluc3RhbmNlO1xyXG4gICAgfSwgXCJQVUJMSUNcIiAvKiBDb21wb25lbnRUeXBlLlBVQkxJQyAqLylcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBdXRoIGNhbiBvbmx5IGJlIGluaXRpYWxpemVkIGJ5IGV4cGxpY2l0bHkgY2FsbGluZyBnZXRBdXRoKCkgb3IgaW5pdGlhbGl6ZUF1dGgoKVxyXG4gICAgICAgICAqIEZvciB3aHkgd2UgZG8gdGhpcywgU2VlIGdvL2ZpcmViYXNlLW5leHQtYXV0aC1pbml0XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgLnNldEluc3RhbnRpYXRpb25Nb2RlKFwiRVhQTElDSVRcIiAvKiBJbnN0YW50aWF0aW9uTW9kZS5FWFBMSUNJVCAqLylcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBCZWNhdXNlIGFsbCBmaXJlYmFzZSBwcm9kdWN0cyB0aGF0IGRlcGVuZCBvbiBhdXRoIGRlcGVuZCBvbiBhdXRoLWludGVybmFsIGRpcmVjdGx5LFxyXG4gICAgICAgICAqIHdlIG5lZWQgdG8gaW5pdGlhbGl6ZSBhdXRoLWludGVybmFsIGFmdGVyIGF1dGggaXMgaW5pdGlhbGl6ZWQgdG8gbWFrZSBpdCBhdmFpbGFibGUgdG8gb3RoZXIgZmlyZWJhc2UgcHJvZHVjdHMuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgLnNldEluc3RhbmNlQ3JlYXRlZENhbGxiYWNrKChjb250YWluZXIsIF9pbnN0YW5jZUlkZW50aWZpZXIsIF9pbnN0YW5jZSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGF1dGhJbnRlcm5hbFByb3ZpZGVyID0gY29udGFpbmVyLmdldFByb3ZpZGVyKFwiYXV0aC1pbnRlcm5hbFwiIC8qIF9Db21wb25lbnROYW1lLkFVVEhfSU5URVJOQUwgKi8pO1xyXG4gICAgICAgIGF1dGhJbnRlcm5hbFByb3ZpZGVyLmluaXRpYWxpemUoKTtcclxuICAgIH0pKTtcclxuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KFwiYXV0aC1pbnRlcm5hbFwiIC8qIF9Db21wb25lbnROYW1lLkFVVEhfSU5URVJOQUwgKi8sIGNvbnRhaW5lciA9PiB7XHJcbiAgICAgICAgY29uc3QgYXV0aCA9IF9jYXN0QXV0aChjb250YWluZXIuZ2V0UHJvdmlkZXIoXCJhdXRoXCIgLyogX0NvbXBvbmVudE5hbWUuQVVUSCAqLykuZ2V0SW1tZWRpYXRlKCkpO1xyXG4gICAgICAgIHJldHVybiAoYXV0aCA9PiBuZXcgQXV0aEludGVyb3AoYXV0aCkpKGF1dGgpO1xyXG4gICAgfSwgXCJQUklWQVRFXCIgLyogQ29tcG9uZW50VHlwZS5QUklWQVRFICovKS5zZXRJbnN0YW50aWF0aW9uTW9kZShcIkVYUExJQ0lUXCIgLyogSW5zdGFudGlhdGlvbk1vZGUuRVhQTElDSVQgKi8pKTtcclxuICAgIHJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uLCBnZXRWZXJzaW9uRm9yUGxhdGZvcm0oY2xpZW50UGxhdGZvcm0pKTtcclxuICAgIC8vIEJVSUxEX1RBUkdFVCB3aWxsIGJlIHJlcGxhY2VkIGJ5IHZhbHVlcyBsaWtlIGVzbTUsIGVzbTIwMTcsIGNqczUsIGV0YyBkdXJpbmcgdGhlIGNvbXBpbGF0aW9uXHJcbiAgICByZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbiwgJ2VzbTIwMTcnKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0lEX1RPS0VOX01BWF9BR0UgPSA1ICogNjA7XHJcbmNvbnN0IGF1dGhJZFRva2VuTWF4QWdlID0gZ2V0RXhwZXJpbWVudGFsU2V0dGluZygnYXV0aElkVG9rZW5NYXhBZ2UnKSB8fCBERUZBVUxUX0lEX1RPS0VOX01BWF9BR0U7XHJcbmxldCBsYXN0UG9zdGVkSWRUb2tlbiA9IG51bGw7XHJcbmNvbnN0IG1pbnRDb29raWVGYWN0b3J5ID0gKHVybCkgPT4gYXN5bmMgKHVzZXIpID0+IHtcclxuICAgIGNvbnN0IGlkVG9rZW5SZXN1bHQgPSB1c2VyICYmIChhd2FpdCB1c2VyLmdldElkVG9rZW5SZXN1bHQoKSk7XHJcbiAgICBjb25zdCBpZFRva2VuQWdlID0gaWRUb2tlblJlc3VsdCAmJlxyXG4gICAgICAgIChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIERhdGUucGFyc2UoaWRUb2tlblJlc3VsdC5pc3N1ZWRBdFRpbWUpKSAvIDEwMDA7XHJcbiAgICBpZiAoaWRUb2tlbkFnZSAmJiBpZFRva2VuQWdlID4gYXV0aElkVG9rZW5NYXhBZ2UpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICAvLyBTcGVjaWZpY2FsbHkgdHJpcCBudWxsID0+IHVuZGVmaW5lZCB3aGVuIGxvZ2dlZCBvdXQsIHRvIGRlbGV0ZSBhbnkgZXhpc3RpbmcgY29va2llXHJcbiAgICBjb25zdCBpZFRva2VuID0gaWRUb2tlblJlc3VsdCA9PT0gbnVsbCB8fCBpZFRva2VuUmVzdWx0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpZFRva2VuUmVzdWx0LnRva2VuO1xyXG4gICAgaWYgKGxhc3RQb3N0ZWRJZFRva2VuID09PSBpZFRva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgbGFzdFBvc3RlZElkVG9rZW4gPSBpZFRva2VuO1xyXG4gICAgYXdhaXQgZmV0Y2godXJsLCB7XHJcbiAgICAgICAgbWV0aG9kOiBpZFRva2VuID8gJ1BPU1QnIDogJ0RFTEVURScsXHJcbiAgICAgICAgaGVhZGVyczogaWRUb2tlblxyXG4gICAgICAgICAgICA/IHtcclxuICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke2lkVG9rZW59YFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIDoge31cclxuICAgIH0pO1xyXG59O1xyXG4vKipcclxuICogUmV0dXJucyB0aGUgQXV0aCBpbnN0YW5jZSBhc3NvY2lhdGVkIHdpdGggdGhlIHByb3ZpZGVkIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfS5cclxuICogSWYgbm8gaW5zdGFuY2UgZXhpc3RzLCBpbml0aWFsaXplcyBhbiBBdXRoIGluc3RhbmNlIHdpdGggcGxhdGZvcm0tc3BlY2lmaWMgZGVmYXVsdCBkZXBlbmRlbmNpZXMuXHJcbiAqXHJcbiAqIEBwYXJhbSBhcHAgLSBUaGUgRmlyZWJhc2UgQXBwLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRBdXRoKGFwcCA9IGdldEFwcCgpKSB7XHJcbiAgICBjb25zdCBwcm92aWRlciA9IF9nZXRQcm92aWRlcihhcHAsICdhdXRoJyk7XHJcbiAgICBpZiAocHJvdmlkZXIuaXNJbml0aWFsaXplZCgpKSB7XHJcbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYXV0aCA9IGluaXRpYWxpemVBdXRoKGFwcCwge1xyXG4gICAgICAgIHBvcHVwUmVkaXJlY3RSZXNvbHZlcjogYnJvd3NlclBvcHVwUmVkaXJlY3RSZXNvbHZlcixcclxuICAgICAgICBwZXJzaXN0ZW5jZTogW1xyXG4gICAgICAgICAgICBpbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlLFxyXG4gICAgICAgICAgICBicm93c2VyTG9jYWxQZXJzaXN0ZW5jZSxcclxuICAgICAgICAgICAgYnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZVxyXG4gICAgICAgIF1cclxuICAgIH0pO1xyXG4gICAgY29uc3QgYXV0aFRva2VuU3luY1BhdGggPSBnZXRFeHBlcmltZW50YWxTZXR0aW5nKCdhdXRoVG9rZW5TeW5jVVJMJyk7XHJcbiAgICAvLyBPbmx5IGRvIHRoZSBDb29raWUgZXhjaGFuZ2UgaW4gYSBzZWN1cmUgY29udGV4dFxyXG4gICAgaWYgKGF1dGhUb2tlblN5bmNQYXRoICYmXHJcbiAgICAgICAgdHlwZW9mIGlzU2VjdXJlQ29udGV4dCA9PT0gJ2Jvb2xlYW4nICYmXHJcbiAgICAgICAgaXNTZWN1cmVDb250ZXh0KSB7XHJcbiAgICAgICAgLy8gRG9uJ3QgYWxsb3cgdXJscyAoWFNTIHBvc3NpYmlsaXR5KSwgb25seSBwYXRocyBvbiB0aGUgc2FtZSBkb21haW5cclxuICAgICAgICBjb25zdCBhdXRoVG9rZW5TeW5jVXJsID0gbmV3IFVSTChhdXRoVG9rZW5TeW5jUGF0aCwgbG9jYXRpb24ub3JpZ2luKTtcclxuICAgICAgICBpZiAobG9jYXRpb24ub3JpZ2luID09PSBhdXRoVG9rZW5TeW5jVXJsLm9yaWdpbikge1xyXG4gICAgICAgICAgICBjb25zdCBtaW50Q29va2llID0gbWludENvb2tpZUZhY3RvcnkoYXV0aFRva2VuU3luY1VybC50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgYmVmb3JlQXV0aFN0YXRlQ2hhbmdlZChhdXRoLCBtaW50Q29va2llLCAoKSA9PiBtaW50Q29va2llKGF1dGguY3VycmVudFVzZXIpKTtcclxuICAgICAgICAgICAgb25JZFRva2VuQ2hhbmdlZChhdXRoLCB1c2VyID0+IG1pbnRDb29raWUodXNlcikpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IGF1dGhFbXVsYXRvckhvc3QgPSBnZXREZWZhdWx0RW11bGF0b3JIb3N0KCdhdXRoJyk7XHJcbiAgICBpZiAoYXV0aEVtdWxhdG9ySG9zdCkge1xyXG4gICAgICAgIGNvbm5lY3RBdXRoRW11bGF0b3IoYXV0aCwgYGh0dHA6Ly8ke2F1dGhFbXVsYXRvckhvc3R9YCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXV0aDtcclxufVxyXG5mdW5jdGlvbiBnZXRTY3JpcHRQYXJlbnRFbGVtZW50KCkge1xyXG4gICAgdmFyIF9hLCBfYjtcclxuICAgIHJldHVybiAoX2IgPSAoX2EgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FbMF0pICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IGRvY3VtZW50O1xyXG59XHJcbl9zZXRFeHRlcm5hbEpTUHJvdmlkZXIoe1xyXG4gICAgbG9hZEpTKHVybCkge1xyXG4gICAgICAgIC8vIFRPRE86IGNvbnNpZGVyIGFkZGluZyB0aW1lb3V0IHN1cHBvcnQgJiBjYW5jZWxsYXRpb25cclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3NyYycsIHVybCk7XHJcbiAgICAgICAgICAgIGVsLm9ubG9hZCA9IHJlc29sdmU7XHJcbiAgICAgICAgICAgIGVsLm9uZXJyb3IgPSBlID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gX2NyZWF0ZUVycm9yKFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICAgICAgICAgIGVycm9yLmN1c3RvbURhdGEgPSBlO1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgZWwudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnO1xyXG4gICAgICAgICAgICBlbC5jaGFyc2V0ID0gJ1VURi04JztcclxuICAgICAgICAgICAgZ2V0U2NyaXB0UGFyZW50RWxlbWVudCgpLmFwcGVuZENoaWxkKGVsKTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBnYXBpU2NyaXB0OiAnaHR0cHM6Ly9hcGlzLmdvb2dsZS5jb20vanMvYXBpLmpzJyxcclxuICAgIHJlY2FwdGNoYVYyU2NyaXB0OiAnaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9yZWNhcHRjaGEvYXBpLmpzJyxcclxuICAgIHJlY2FwdGNoYUVudGVycHJpc2VTY3JpcHQ6ICdodHRwczovL3d3dy5nb29nbGUuY29tL3JlY2FwdGNoYS9lbnRlcnByaXNlLmpzP3JlbmRlcj0nXHJcbn0pO1xyXG5yZWdpc3RlckF1dGgoXCJCcm93c2VyXCIgLyogQ2xpZW50UGxhdGZvcm0uQlJPV1NFUiAqLyk7XG5cbmV4cG9ydCB7IFR3aXR0ZXJBdXRoUHJvdmlkZXIgYXMgJCwgQWN0aW9uQ29kZU9wZXJhdGlvbiBhcyBBLCB1cGRhdGVDdXJyZW50VXNlciBhcyBCLCBzaWduT3V0IGFzIEMsIHJldm9rZUFjY2Vzc1Rva2VuIGFzIEQsIGRlbGV0ZVVzZXIgYXMgRSwgRmFjdG9ySWQgYXMgRiwgZGVidWdFcnJvck1hcCBhcyBHLCBwcm9kRXJyb3JNYXAgYXMgSCwgQVVUSF9FUlJPUl9DT0RFU19NQVBfRE9fTk9UX1VTRV9JTlRFUk5BTExZIGFzIEksIGluaXRpYWxpemVBdXRoIGFzIEosIGNvbm5lY3RBdXRoRW11bGF0b3IgYXMgSywgQXV0aENyZWRlbnRpYWwgYXMgTCwgRW1haWxBdXRoQ3JlZGVudGlhbCBhcyBNLCBPQXV0aENyZWRlbnRpYWwgYXMgTiwgT3BlcmF0aW9uVHlwZSBhcyBPLCBQaG9uZUF1dGhQcm92aWRlciBhcyBQLCBQaG9uZUF1dGhDcmVkZW50aWFsIGFzIFEsIFJlY2FwdGNoYVZlcmlmaWVyIGFzIFIsIFNpZ25Jbk1ldGhvZCBhcyBTLCBUb3RwTXVsdGlGYWN0b3JHZW5lcmF0b3IgYXMgVCwgaW5NZW1vcnlQZXJzaXN0ZW5jZSBhcyBVLCBFbWFpbEF1dGhQcm92aWRlciBhcyBWLCBGYWNlYm9va0F1dGhQcm92aWRlciBhcyBXLCBHb29nbGVBdXRoUHJvdmlkZXIgYXMgWCwgR2l0aHViQXV0aFByb3ZpZGVyIGFzIFksIE9BdXRoUHJvdmlkZXIgYXMgWiwgU0FNTEF1dGhQcm92aWRlciBhcyBfLCBicm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlIGFzIGEsIHNpZ25JbkFub255bW91c2x5IGFzIGEwLCBzaWduSW5XaXRoQ3JlZGVudGlhbCBhcyBhMSwgbGlua1dpdGhDcmVkZW50aWFsIGFzIGEyLCByZWF1dGhlbnRpY2F0ZVdpdGhDcmVkZW50aWFsIGFzIGEzLCBzaWduSW5XaXRoQ3VzdG9tVG9rZW4gYXMgYTQsIHNlbmRQYXNzd29yZFJlc2V0RW1haWwgYXMgYTUsIGNvbmZpcm1QYXNzd29yZFJlc2V0IGFzIGE2LCBhcHBseUFjdGlvbkNvZGUgYXMgYTcsIGNoZWNrQWN0aW9uQ29kZSBhcyBhOCwgdmVyaWZ5UGFzc3dvcmRSZXNldENvZGUgYXMgYTksIF9pc0lPUzdPcjggYXMgYUEsIF9jcmVhdGVFcnJvciBhcyBhQiwgX2Fzc2VydCBhcyBhQywgQXV0aEV2ZW50TWFuYWdlciBhcyBhRCwgX2dldEluc3RhbmNlIGFzIGFFLCBfcGVyc2lzdGVuY2VLZXlOYW1lIGFzIGFGLCBfZ2V0UmVkaXJlY3RSZXN1bHQgYXMgYUcsIF9vdmVycmlkZVJlZGlyZWN0UmVzdWx0IGFzIGFILCBfY2xlYXJSZWRpcmVjdE91dGNvbWVzIGFzIGFJLCBfY2FzdEF1dGggYXMgYUosIFVzZXJJbXBsIGFzIGFLLCBBdXRoSW1wbCBhcyBhTCwgX2dldENsaWVudFZlcnNpb24gYXMgYU0sIF9nZW5lcmF0ZUV2ZW50SWQgYXMgYU4sIEF1dGhQb3B1cCBhcyBhTywgRmV0Y2hQcm92aWRlciBhcyBhUCwgU0FNTEF1dGhDcmVkZW50aWFsIGFzIGFRLCBjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQgYXMgYWEsIHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkIGFzIGFiLCBzZW5kU2lnbkluTGlua1RvRW1haWwgYXMgYWMsIGlzU2lnbkluV2l0aEVtYWlsTGluayBhcyBhZCwgc2lnbkluV2l0aEVtYWlsTGluayBhcyBhZSwgZmV0Y2hTaWduSW5NZXRob2RzRm9yRW1haWwgYXMgYWYsIHNlbmRFbWFpbFZlcmlmaWNhdGlvbiBhcyBhZywgdmVyaWZ5QmVmb3JlVXBkYXRlRW1haWwgYXMgYWgsIEFjdGlvbkNvZGVVUkwgYXMgYWksIHBhcnNlQWN0aW9uQ29kZVVSTCBhcyBhaiwgdXBkYXRlUHJvZmlsZSBhcyBhaywgdXBkYXRlRW1haWwgYXMgYWwsIHVwZGF0ZVBhc3N3b3JkIGFzIGFtLCBnZXRJZFRva2VuIGFzIGFuLCBnZXRJZFRva2VuUmVzdWx0IGFzIGFvLCB1bmxpbmsgYXMgYXAsIGdldEFkZGl0aW9uYWxVc2VySW5mbyBhcyBhcSwgcmVsb2FkIGFzIGFyLCBnZXRNdWx0aUZhY3RvclJlc29sdmVyIGFzIGFzLCBtdWx0aUZhY3RvciBhcyBhdCwgZGVidWdBc3NlcnQgYXMgYXUsIF9pc0lPUyBhcyBhdiwgX2lzQW5kcm9pZCBhcyBhdywgX2ZhaWwgYXMgYXgsIF9nZXRSZWRpcmVjdFVybCBhcyBheSwgX2dldFByb2plY3RDb25maWcgYXMgYXosIGJyb3dzZXJMb2NhbFBlcnNpc3RlbmNlIGFzIGIsIHNpZ25JbldpdGhQb3B1cCBhcyBjLCBsaW5rV2l0aFBvcHVwIGFzIGQsIHJlYXV0aGVudGljYXRlV2l0aFBvcHVwIGFzIGUsIHNpZ25JbldpdGhSZWRpcmVjdCBhcyBmLCBsaW5rV2l0aFJlZGlyZWN0IGFzIGcsIHJlYXV0aGVudGljYXRlV2l0aFJlZGlyZWN0IGFzIGgsIGluZGV4ZWREQkxvY2FsUGVyc2lzdGVuY2UgYXMgaSwgZ2V0UmVkaXJlY3RSZXN1bHQgYXMgaiwgYnJvd3NlclBvcHVwUmVkaXJlY3RSZXNvbHZlciBhcyBrLCBsaW5rV2l0aFBob25lTnVtYmVyIGFzIGwsIFBob25lTXVsdGlGYWN0b3JHZW5lcmF0b3IgYXMgbSwgVG90cFNlY3JldCBhcyBuLCBnZXRBdXRoIGFzIG8sIFByb3ZpZGVySWQgYXMgcCwgc2V0UGVyc2lzdGVuY2UgYXMgcSwgcmVhdXRoZW50aWNhdGVXaXRoUGhvbmVOdW1iZXIgYXMgciwgc2lnbkluV2l0aFBob25lTnVtYmVyIGFzIHMsIGluaXRpYWxpemVSZWNhcHRjaGFDb25maWcgYXMgdCwgdXBkYXRlUGhvbmVOdW1iZXIgYXMgdSwgdmFsaWRhdGVQYXNzd29yZCBhcyB2LCBvbklkVG9rZW5DaGFuZ2VkIGFzIHcsIGJlZm9yZUF1dGhTdGF0ZUNoYW5nZWQgYXMgeCwgb25BdXRoU3RhdGVDaGFuZ2VkIGFzIHksIHVzZURldmljZUxhbmd1YWdlIGFzIHogfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LTU0NzM4MTM2LmpzLm1hcFxuIiwiaW1wb3J0IHsgZm9ybWF0IH0gZnJvbSBcImRhdGUtZm5zXCI7XHJcbmltcG9ydCBcIi4vc3R5bGVzLmNzc1wiO1xyXG5pbXBvcnQgeyBpbml0aWFsaXplQXBwIH0gZnJvbSBcImZpcmViYXNlL2FwcFwiO1xyXG5pbXBvcnQge1xyXG4gIGdldEZpcmVzdG9yZSxcclxuICBjb2xsZWN0aW9uLFxyXG4gIGRvYyxcclxuICBhZGREb2MsXHJcbiAgZGVsZXRlRG9jLFxyXG4gIG9uU25hcHNob3QsXHJcbiAgdXBkYXRlRG9jLFxyXG4gIHNldERvYyxcclxuICBnZXREb2MsXHJcbiAgZ2V0RG9jcyxcclxufSBmcm9tIFwiZmlyZWJhc2UvZmlyZXN0b3JlXCI7XHJcbmltcG9ydCB7XHJcbiAgZ2V0QXV0aCxcclxuICBjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQsXHJcbiAgc2lnbk91dCxcclxuICBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZCxcclxuICBvbkF1dGhTdGF0ZUNoYW5nZWQsXHJcbn0gZnJvbSBcImZpcmViYXNlL2F1dGhcIjtcclxuXHJcbi8vIERPTSBFbGVtZW50c1xyXG5cclxuY29uc3QgdXNlckgxID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi51c2VyLWNvbnRhaW5lciBoMVwiKTtcclxuY29uc3Qgc3RpY2t5Tm90ZXNFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zdGlja3ktbm90ZXMtY29udGFpbmVyXCIpO1xyXG5jb25zdCBhZGROb3RlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtbm90ZS1jb250YWluZXJcIik7XHJcbmNvbnN0IHBpbkZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZFwiKTtcclxuY29uc3Qgc2lnblVwQXV0aCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2lnbi11cFwiKTtcclxuY29uc3Qgc2lnblVwRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2lnbi11cC1mb3JtXCIpO1xyXG5jb25zdCBzaWduVXBMYXRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2lnbi11cC1sYXRlci1idG5cIik7XHJcbmNvbnN0IGxvZ0luRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubG9nLWluLWZvcm1cIik7XHJcbmNvbnN0IGxvZ0luID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5sb2ctaW5cIik7XHJcbmNvbnN0IGxvZ091dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubG9nLW91dFwiKTtcclxuY29uc3QgaW5wdXRGaWVsZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJsYWJlbCBpbnB1dFwiKTtcclxuY29uc3QgdGV4dEZpZWxkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImxhYmVsIHRleHRhcmVhXCIpO1xyXG5jb25zdCBmaWVsZHMgPSBbaW5wdXRGaWVsZCwgdGV4dEZpZWxkXTtcclxuY29uc3QgZGF0ZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRhdGUtZWxlbWVudFwiKTtcclxuY29uc3QgbWF5YmVMYXRlclN1Ym1pdEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWF5YmUtbGF0ZXItYnRuXCIpO1xyXG5cclxuLy8gRklSRUJBU0VcclxuXHJcbmNvbnN0IGZpcmViYXNlQ29uZmlnID0ge1xyXG4gIGFwaUtleTogXCJBSXphU3lBSS1EaGVYOGltZVB4Nk5yMjd5dXRIcXVLNEVJNDJreGdcIixcclxuICBhdXRoRG9tYWluOiBcImZpci10dXRvcmlhbC1mYjlmZi5maXJlYmFzZWFwcC5jb21cIixcclxuICBwcm9qZWN0SWQ6IFwiZmlyLXR1dG9yaWFsLWZiOWZmXCIsXHJcbiAgc3RvcmFnZUJ1Y2tldDogXCJmaXItdHV0b3JpYWwtZmI5ZmYuYXBwc3BvdC5jb21cIixcclxuICBtZXNzYWdpbmdTZW5kZXJJZDogXCIzODYzMDUzMjk2MDdcIixcclxuICBhcHBJZDogXCIxOjM4NjMwNTMyOTYwNzp3ZWI6ZTRjMDYyZjNkODU5NzUyMTgzYjFlMlwiLFxyXG59O1xyXG5cclxuaW5pdGlhbGl6ZUFwcChmaXJlYmFzZUNvbmZpZyk7XHJcblxyXG5jb25zdCBkYiA9IGdldEZpcmVzdG9yZSgpO1xyXG5jb25zdCBhdXRoID0gZ2V0QXV0aCgpO1xyXG5sZXQgY3VycmVudFVzZXI7XHJcblxyXG5zaWduVXBBdXRoLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgaGFuZGxlU2lnblVwRm9ybUNsYXNzKCk7XHJcbn0pO1xyXG5cclxuc2lnblVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGNvbnN0IGVtYWlsID0gc2lnblVwRm9ybS5lbWFpbC52YWx1ZTtcclxuICBjb25zdCBwYXNzd29yZCA9IHNpZ25VcEZvcm0ucGFzc3dvcmQudmFsdWU7XHJcbiAgY29uc3QgdXNlck5hbWUgPSBzaWduVXBGb3JtLnVzZXJuYW1lLnZhbHVlO1xyXG4gIGNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBlbWFpbCwgcGFzc3dvcmQpXHJcbiAgICAudGhlbigoY3JlZCkgPT4ge1xyXG4gICAgICBsZXQgdXNlcklEID0gY3JlZC51c2VyLnVpZDtcclxuICAgICAgY29uc3QgZGF0YSA9IHsgaWQ6IHVzZXJJRCwgZW1haWw6IGVtYWlsLCB1c2VybmFtZTogdXNlck5hbWUgfTtcclxuICAgICAgY29uc3QgZGIgPSBnZXRGaXJlc3RvcmUoKTtcclxuICAgICAgY29uc3QgdXNlclJlZiA9IGRvYyhkYiwgXCJ1c2Vyc1wiLCB1c2VySUQpO1xyXG4gICAgICBzZXREb2ModXNlclJlZiwgZGF0YSlcclxuICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiQ29sbGVjdGlvbiBkb2MgY3JlYXRlZCFcIilcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSkpO1xyXG4gICAgICBzaWduVXBGb3JtLnJlc2V0KCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKSk7XHJcbiAgaGFuZGxlU2lnblVwRm9ybUNsYXNzKCk7XHJcbn0pO1xyXG5cclxuc2lnblVwTGF0ZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGhhbmRsZVNpZ25VcEZvcm1DbGFzcygpO1xyXG59KTtcclxuXHJcbmxvZ0luLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgaGFuZGxlTG9nSW5Gb3JtQ2xhc3MoKTtcclxufSk7XHJcblxyXG4vLyBET00gQ3JlYXRvciBGdW5jdGlvbnNcclxuXHJcbmNvbnN0IGNyZWF0ZVN0aWNreUVsZW1lbnQgPSAoc3RpY2t5T2JqZWN0LCBpZCkgPT4ge1xyXG4gIGNvbnN0IHN0aWNreU5vdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIHN0aWNreU5vdGUuY2xhc3NMaXN0LmFkZChcInN0aWNreS1ub3RlXCIpO1xyXG4gIHN0aWNreU5vdGUuc3R5bGUudHJhbnNmb3JtID0gYHJvdGF0ZSgke2dldFJhbmRvbURlZ3JlZSgpfWRlZylgO1xyXG5cclxuICBjb25zdCBkZWxldGVCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gIGRlbGV0ZUJ0bi5pZCA9IFwiZGVsZXRlLWJ0blwiO1xyXG5cclxuICBjb25zdCBzdGlja3lUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgc3RpY2t5VGl0bGUuY2xhc3NMaXN0LmFkZChcInN0aWNreS10aXRsZVwiKTtcclxuICBzdGlja3lUaXRsZS50ZXh0Q29udGVudCA9IHN0aWNreU9iamVjdC50aXRsZTtcclxuXHJcbiAgY29uc3Qgc3RpY2t5RGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIHN0aWNreURlc2NyaXB0aW9uLmNsYXNzTGlzdC5hZGQoXCJzdGlja3ktZGVzY3JpcHRpb25cIik7XHJcbiAgc3RpY2t5RGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBcIi0gXCIgKyBzdGlja3lPYmplY3QuZGVzY3JpcHRpb247XHJcblxyXG4gIGNvbnN0IHN0aWNreURhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIHN0aWNreURhdGUuY2xhc3NMaXN0LmFkZChcInN0aWNreS1kYXRlXCIpO1xyXG4gIHN0aWNreURhdGUudGV4dENvbnRlbnQgPSBmb3JtYXREYXRlKHN0aWNreU9iamVjdC5kYXRlKTtcclxuXHJcbiAgc3RpY2t5Tm90ZS5hcHBlbmQoZGVsZXRlQnRuLCBzdGlja3lUaXRsZSwgc3RpY2t5RGVzY3JpcHRpb24sIHN0aWNreURhdGUpO1xyXG5cclxuICAvLyBSZWYgZm9yIGZpcmVzdG9yZVxyXG4gIGNvbnN0IHN0aWNreVJlZiA9IGRvYyhkYiwgXCJwaW5zXCIsIGlkKTtcclxuXHJcbiAgLy8gTGlzdGVuZXJzIGZvciBzdGlja3kgbm90ZXNcclxuXHJcbiAgc3RpY2t5VGl0bGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICBlLnRhcmdldC5zZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIiwgXCJ0cnVlXCIpO1xyXG4gIH0pO1xyXG5cclxuICBzdGlja3lUaXRsZS5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSkgPT4ge1xyXG4gICAgaWYgKGUua2V5ID09PSBcIkVudGVyXCIpIHtcclxuICAgICAgdXBkYXRlRG9jKHN0aWNreVJlZiwge1xyXG4gICAgICAgIHRpdGxlOiBlLnRhcmdldC50ZXh0Q29udGVudCxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIHN0aWNreURlc2NyaXB0aW9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gICAgZS50YXJnZXQuc2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIsIFwidHJ1ZVwiKTtcclxuICAgIGNvbnN0IGFyciA9IGUudGFyZ2V0LnRleHRDb250ZW50LnNwbGl0KFwiIFwiKTtcclxuICAgIGFyci5zaGlmdCgpO1xyXG4gICAgZS50YXJnZXQudGV4dENvbnRlbnQgPSBhcnI7XHJcbiAgfSk7XHJcblxyXG4gIHN0aWNreURlc2NyaXB0aW9uLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB7XHJcbiAgICBpZiAoZS5rZXkgPT09IFwiRW50ZXJcIikge1xyXG4gICAgICB1cGRhdGVEb2Moc3RpY2t5UmVmLCB7XHJcbiAgICAgICAgZGVzY3JpcHRpb246IGUudGFyZ2V0LnRleHRDb250ZW50LFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBjb25zdCBkYiA9IGdldEZpcmVzdG9yZSgpO1xyXG4gICAgY29uc3QgZG9jUmVmID0gZG9jKGRiLCBcInVzZXJzXCIsIGN1cnJlbnRVc2VyLCBcInBpbnNcIiwgaWQpO1xyXG4gICAgZGVsZXRlRG9jKGRvY1JlZilcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwiRG9jdW1lbnQgZGVsZXRlZFwiKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKSk7XHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiBzdGlja3lOb3RlO1xyXG59O1xyXG5cclxuLy8gSGFuZGxlcnNcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVBpbkZvcm1DbGFzcygpIHtcclxuICBpZiAocGluRm9ybS5jbGFzc0xpc3QuY29udGFpbnMoXCJpbnZpc2libGVcIikpIHtcclxuICAgIHBpbkZvcm0uY2xhc3NMaXN0LnJlbW92ZShcImludmlzaWJsZVwiKTtcclxuICB9IGVsc2Uge1xyXG4gICAgcGluRm9ybS5jbGFzc0xpc3QuYWRkKFwiaW52aXNpYmxlXCIpO1xyXG4gIH1cclxuICBzaWduVXBGb3JtLmNsYXNzTGlzdC5hZGQoXCJpbnZpc2libGVcIik7XHJcbiAgbG9nSW5Gb3JtLmNsYXNzTGlzdC5hZGQoXCJpbnZpc2libGVcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVNpZ25VcEZvcm1DbGFzcygpIHtcclxuICBpZiAoc2lnblVwRm9ybS5jbGFzc0xpc3QuY29udGFpbnMoXCJpbnZpc2libGVcIikpIHtcclxuICAgIHNpZ25VcEZvcm0uY2xhc3NMaXN0LnJlbW92ZShcImludmlzaWJsZVwiKTtcclxuICB9IGVsc2Uge1xyXG4gICAgc2lnblVwRm9ybS5jbGFzc0xpc3QuYWRkKFwiaW52aXNpYmxlXCIpO1xyXG4gIH1cclxuICBwaW5Gb3JtLmNsYXNzTGlzdC5hZGQoXCJpbnZpc2libGVcIik7XHJcbiAgbG9nSW5Gb3JtLmNsYXNzTGlzdC5hZGQoXCJpbnZpc2libGVcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUxvZ0luRm9ybUNsYXNzKCkge1xyXG4gIGlmIChsb2dJbkZvcm0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiaW52aXNpYmxlXCIpKSB7XHJcbiAgICBsb2dJbkZvcm0uY2xhc3NMaXN0LnJlbW92ZShcImludmlzaWJsZVwiKTtcclxuICB9IGVsc2Uge1xyXG4gICAgbG9nSW5Gb3JtLmNsYXNzTGlzdC5hZGQoXCJpbnZpc2libGVcIik7XHJcbiAgfVxyXG4gIHBpbkZvcm0uY2xhc3NMaXN0LmFkZChcImludmlzaWJsZVwiKTtcclxuICBzaWduVXBGb3JtLmNsYXNzTGlzdC5hZGQoXCJpbnZpc2libGVcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVtcHR5RmllbGRzKCkge1xyXG4gIGZpZWxkcy5mb3JFYWNoKChmaWVsZCkgPT4ge1xyXG4gICAgZmllbGQudmFsdWUgPSBcIlwiO1xyXG4gIH0pO1xyXG59XHJcblxyXG4vLyBMaXN0ZW5lcnNcclxuXHJcbmFkZE5vdGVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBoYW5kbGVQaW5Gb3JtQ2xhc3MoKTtcclxuICBlbXB0eUZpZWxkcygpO1xyXG4gIGZvcm1hdFRvZGF5RGF0ZU9uRm9ybSgpO1xyXG4gIGlucHV0RmllbGQuZm9jdXMoKTtcclxufSk7XHJcblxyXG5waW5Gb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgY29uc3QgY3VycmVudFVzZXIgPSBhdXRoLmN1cnJlbnRVc2VyLnVpZDtcclxuICBjb25zdCBkYiA9IGdldEZpcmVzdG9yZSgpO1xyXG4gIGNvbnN0IHBpblJlZiA9IGNvbGxlY3Rpb24oZGIsIFwidXNlcnNcIiwgY3VycmVudFVzZXIsIFwicGluc1wiKTtcclxuICBhZGREb2MocGluUmVmLCB7XHJcbiAgICB0aXRsZTogcGluRm9ybS50aXRsZS52YWx1ZSxcclxuICAgIGRlc2NyaXB0aW9uOiBwaW5Gb3JtLmRlc2NyaXB0aW9uLnZhbHVlLFxyXG4gICAgZGF0ZTogZm9ybWF0KG5ldyBEYXRlKHBpbkZvcm0uZGF0ZS52YWx1ZSksIFwiTU1NIGRkIHl5eXlcIiksXHJcbiAgfSlcclxuICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgZW1wdHlGaWVsZHMoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpKTtcclxuXHJcbiAgaGFuZGxlUGluRm9ybUNsYXNzKCk7XHJcbn0pO1xyXG5cclxubWF5YmVMYXRlclN1Ym1pdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgaGFuZGxlUGluRm9ybUNsYXNzKCk7XHJcbn0pO1xyXG5cclxubG9nT3V0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgc2lnbk91dChhdXRoKVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICBzdGlja3lOb3Rlc0VsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgICBsb2dJbi5jbGFzc0xpc3QucmVtb3ZlKFwiaW52aXNpYmxlXCIpO1xyXG4gICAgICBsb2dPdXQuY2xhc3NMaXN0LmFkZChcImludmlzaWJsZVwiKTtcclxuICAgICAgdXNlckgxLnRleHRDb250ZW50ID0gXCJVc2VyP1wiO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSkpO1xyXG59KTtcclxuXHJcbmxvZ0luRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGNvbnN0IGVtYWlsID0gbG9nSW5Gb3JtLmVtYWlsLnZhbHVlO1xyXG4gIGNvbnN0IHBhc3N3b3JkID0gbG9nSW5Gb3JtLnBhc3N3b3JkLnZhbHVlO1xyXG4gIHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGVtYWlsLCBwYXNzd29yZClcclxuICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgLy9jb25zb2xlLmxvZyhcIlVzZXIgbG9nZ2VkIGluOlwiLCBjcmVkLnVzZXIpO1xyXG4gICAgICBsb2dPdXQuY2xhc3NMaXN0LnJlbW92ZShcImludmlzaWJsZVwiKTtcclxuICAgICAgbG9nSW4uY2xhc3NMaXN0LmFkZChcImludmlzaWJsZVwiKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpKTtcclxuICBsb2dJbkZvcm0uY2xhc3NMaXN0LmFkZChcImludmlzaWJsZVwiKTtcclxufSk7XHJcblxyXG4vLyBVdGlsc1xyXG5cclxuLy8gdGhpcyBpcyBmb3IgdGhlIHBpbiBpdHNlbGZcclxuY29uc3QgZm9ybWF0RGF0ZSA9IChkYXRlRW50ZXJlZCkgPT4ge1xyXG4gIGlmIChkYXRlRW50ZXJlZCA9PT0gXCJcIikgcmV0dXJuO1xyXG4gIGNvbnN0IGRhdGUgPSBmb3JtYXQobmV3IERhdGUoZGF0ZUVudGVyZWQpLCBcIk1NTSBkZCB5eXl5XCIpO1xyXG4gIHJldHVybiBcIkNvbXBsZXRlIGJ5IFwiICsgZGF0ZTtcclxufTtcclxuXHJcbi8vIHRoaXMgbWFrZXMgZGF0ZSBvbiBwaW4gZGVmYXVsdCB0byBjdXJyZW50IGRhdGVcclxuY29uc3QgZm9ybWF0VG9kYXlEYXRlT25Gb3JtID0gKCkgPT4ge1xyXG4gIGNvbnN0IGRhdGVUb2RheSA9IG5ldyBEYXRlKCkudG9EYXRlU3RyaW5nKCkuc3BsaXQoXCIgXCIpO1xyXG4gIGNvbnN0IGRhdGVUb0VudGVyID0gZGF0ZVRvZGF5LmpvaW4oXCIvXCIpO1xyXG4gIGNvbnN0IGZvbWF0dGVkRGF0ZSA9IGZvcm1hdChkYXRlVG9FbnRlciwgXCJ5eXl5LU1NLWRkXCIpO1xyXG4gIGRhdGVFbGVtZW50LnZhbHVlID0gYCR7Zm9tYXR0ZWREYXRlLnRvU3RyaW5nKCl9YDtcclxufTtcclxuXHJcbi8vVXNpbmcgdGhpcyB0byBwbGFjZSByYW5kb20gdGlsdCBvbiBzdGlja3kgbm90ZXNcclxuY29uc3QgZ2V0UmFuZG9tRGVncmVlID0gKCkgPT4ge1xyXG4gIGNvbnN0IG1pbiA9IE1hdGguY2VpbCgtMTIpO1xyXG4gIGNvbnN0IG1heCA9IE1hdGguZmxvb3IoMTIpO1xyXG5cclxuICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikpICsgbWluO1xyXG59O1xyXG5cclxuLy8gTUFJTiBSRU5ERVJJTkcgRlVOQ1RJT04gdXNpbmcgRmlyZWJhc2VcclxuLypcclxub25TbmFwc2hvdChjb2xSZWYsIChzbmFwc2hvdCkgPT4ge1xyXG4gIHN0aWNreU5vdGVzRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgc25hcHNob3QuZG9jcy5mb3JFYWNoKChkb2MpID0+IHtcclxuICAgIHN0aWNreU5vdGVzRWxlbWVudC5hcHBlbmRDaGlsZChjcmVhdGVTdGlja3lFbGVtZW50KGRvYy5kYXRhKCksIGRvYy5pZCkpO1xyXG4gIH0pO1xyXG59KTsgKi9cclxuXHJcbm9uQXV0aFN0YXRlQ2hhbmdlZChhdXRoLCAodXNlcikgPT4ge1xyXG4gIGlmICghdXNlcikgcmV0dXJuIGxvZ091dC5jbGFzc0xpc3QuYWRkKFwiaW52aXNpYmxlXCIpO1xyXG4gIC8vY29uc29sZS5sb2codXNlci51aWQpO1xyXG4gIGxvZ0luLmNsYXNzTGlzdC5hZGQoXCJpbnZpc2libGVcIik7XHJcbiAgbG9nT3V0LmNsYXNzTGlzdC5yZW1vdmUoXCJpbnZpc2libGVcIik7XHJcbiAgY3VycmVudFVzZXIgPSBhdXRoLmN1cnJlbnRVc2VyLnVpZDtcclxuICBjb25zdCBkb2NSZWYgPSBkb2MoZGIsIFwidXNlcnNcIiwgY3VycmVudFVzZXIpO1xyXG4gIGdldERvYyhkb2NSZWYpLnRoZW4oKHNuYXBzaG90KSA9PiB7XHJcbiAgICBsZXQgdXNlcm5hbWUgPSBzbmFwc2hvdC5kYXRhKCkudXNlcm5hbWU7XHJcbiAgICB1c2VySDEudGV4dENvbnRlbnQgPSB1c2VybmFtZTtcclxuICB9KTtcclxuXHJcbiAgY29uc3QgY29sUmVmID0gY29sbGVjdGlvbihkYiwgXCJ1c2Vyc1wiLCBjdXJyZW50VXNlciwgXCJwaW5zXCIpO1xyXG4gIG9uU25hcHNob3QoY29sUmVmLCAoc25hcHNob3QpID0+IHtcclxuICAgIHN0aWNreU5vdGVzRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBzbmFwc2hvdC5kb2NzLmZvckVhY2goKGRvYykgPT4ge1xyXG4gICAgICBzdGlja3lOb3Rlc0VsZW1lbnQuYXBwZW5kQ2hpbGQoY3JlYXRlU3RpY2t5RWxlbWVudChkb2MuZGF0YSgpLCBkb2MuaWQpKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KTtcclxuIl0sIm5hbWVzIjpbIl9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8wX19fIiwiVVJMIiwiX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzFfX18iLCJfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMl9fXyIsIl9fX0NTU19MT0FERVJfRVhQT1JUX19fIiwiX19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMF9fXyIsIl9fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzFfX18iLCJfX19DU1NfTE9BREVSX1VSTF9SRVBMQUNFTUVOVF8yX19fIiwicHVzaCIsIm1vZHVsZSIsImlkIiwiZXhwb3J0cyIsImNzc1dpdGhNYXBwaW5nVG9TdHJpbmciLCJsaXN0IiwidG9TdHJpbmciLCJ0aGlzIiwibWFwIiwiaXRlbSIsImNvbnRlbnQiLCJuZWVkTGF5ZXIiLCJjb25jYXQiLCJsZW5ndGgiLCJqb2luIiwiaSIsIm1vZHVsZXMiLCJtZWRpYSIsImRlZHVwZSIsInN1cHBvcnRzIiwibGF5ZXIiLCJ1bmRlZmluZWQiLCJhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzIiwiayIsIl9rIiwidXJsIiwib3B0aW9ucyIsIlN0cmluZyIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwidGVzdCIsInNsaWNlIiwiaGFzaCIsIm5lZWRRdW90ZXMiLCJyZXBsYWNlIiwiY3NzTWFwcGluZyIsImJ0b2EiLCJiYXNlNjQiLCJ1bmVzY2FwZSIsImVuY29kZVVSSUNvbXBvbmVudCIsIkpTT04iLCJzdHJpbmdpZnkiLCJkYXRhIiwic291cmNlTWFwcGluZyIsInN0eWxlc0luRE9NIiwiZ2V0SW5kZXhCeUlkZW50aWZpZXIiLCJpZGVudGlmaWVyIiwicmVzdWx0IiwibW9kdWxlc1RvRG9tIiwiaWRDb3VudE1hcCIsImlkZW50aWZpZXJzIiwiYmFzZSIsImNvdW50IiwiaW5kZXhCeUlkZW50aWZpZXIiLCJvYmoiLCJjc3MiLCJzb3VyY2VNYXAiLCJyZWZlcmVuY2VzIiwidXBkYXRlciIsImFkZEVsZW1lbnRTdHlsZSIsImJ5SW5kZXgiLCJzcGxpY2UiLCJhcGkiLCJkb21BUEkiLCJ1cGRhdGUiLCJuZXdPYmoiLCJyZW1vdmUiLCJsYXN0SWRlbnRpZmllcnMiLCJuZXdMaXN0IiwiaW5kZXgiLCJuZXdMYXN0SWRlbnRpZmllcnMiLCJfaSIsIl9pbmRleCIsIm1lbW8iLCJpbnNlcnQiLCJzdHlsZSIsInRhcmdldCIsInN0eWxlVGFyZ2V0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwid2luZG93IiwiSFRNTElGcmFtZUVsZW1lbnQiLCJjb250ZW50RG9jdW1lbnQiLCJoZWFkIiwiZSIsImdldFRhcmdldCIsIkVycm9yIiwiYXBwZW5kQ2hpbGQiLCJlbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZXMiLCJhdHRyaWJ1dGVzIiwic3R5bGVFbGVtZW50Iiwibm9uY2UiLCJzZXRBdHRyaWJ1dGUiLCJpbnNlcnRTdHlsZUVsZW1lbnQiLCJzdHlsZVRhZ1RyYW5zZm9ybSIsImFwcGx5IiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwicmVtb3ZlU3R5bGVFbGVtZW50Iiwic3R5bGVTaGVldCIsImNzc1RleHQiLCJmaXJzdENoaWxkIiwiY3JlYXRlVGV4dE5vZGUiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwibSIsIm4iLCJnZXR0ZXIiLCJkIiwiYSIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiZyIsImdsb2JhbFRoaXMiLCJGdW5jdGlvbiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJzY3JpcHRVcmwiLCJpbXBvcnRTY3JpcHRzIiwibG9jYXRpb24iLCJjdXJyZW50U2NyaXB0Iiwic3JjIiwic2NyaXB0cyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicCIsImIiLCJiYXNlVVJJIiwic2VsZiIsImhyZWYiLCJuYyIsImZvcm1hdERpc3RhbmNlTG9jYWxlIiwibGVzc1RoYW5YU2Vjb25kcyIsIm9uZSIsIm90aGVyIiwieFNlY29uZHMiLCJoYWxmQU1pbnV0ZSIsImxlc3NUaGFuWE1pbnV0ZXMiLCJ4TWludXRlcyIsImFib3V0WEhvdXJzIiwieEhvdXJzIiwieERheXMiLCJhYm91dFhXZWVrcyIsInhXZWVrcyIsImFib3V0WE1vbnRocyIsInhNb250aHMiLCJhYm91dFhZZWFycyIsInhZZWFycyIsIm92ZXJYWWVhcnMiLCJhbG1vc3RYWWVhcnMiLCJidWlsZEZvcm1hdExvbmdGbiIsImFyZ3MiLCJ3aWR0aCIsImRlZmF1bHRXaWR0aCIsImZvcm1hdHMiLCJmb3JtYXRMb25nIiwiZGF0ZSIsImZ1bGwiLCJsb25nIiwibWVkaXVtIiwic2hvcnQiLCJ0aW1lIiwiZGF0ZVRpbWUiLCJmb3JtYXRSZWxhdGl2ZUxvY2FsZSIsImxhc3RXZWVrIiwieWVzdGVyZGF5IiwidG9kYXkiLCJ0b21vcnJvdyIsIm5leHRXZWVrIiwiYnVpbGRMb2NhbGl6ZUZuIiwidmFsdWUiLCJ2YWx1ZXNBcnJheSIsImNvbnRleHQiLCJmb3JtYXR0aW5nVmFsdWVzIiwiZGVmYXVsdEZvcm1hdHRpbmdXaWR0aCIsInZhbHVlcyIsImFyZ3VtZW50Q2FsbGJhY2siLCJsb2NhbGl6ZSIsIm9yZGluYWxOdW1iZXIiLCJkaXJ0eU51bWJlciIsIl9vcHRpb25zIiwibnVtYmVyIiwiTnVtYmVyIiwicmVtMTAwIiwiZXJhIiwibmFycm93IiwiYWJicmV2aWF0ZWQiLCJ3aWRlIiwicXVhcnRlciIsIm1vbnRoIiwiZGF5IiwiZGF5UGVyaW9kIiwiYW0iLCJwbSIsIm1pZG5pZ2h0Iiwibm9vbiIsIm1vcm5pbmciLCJhZnRlcm5vb24iLCJldmVuaW5nIiwibmlnaHQiLCJidWlsZE1hdGNoRm4iLCJzdHJpbmciLCJtYXRjaFBhdHRlcm4iLCJtYXRjaFBhdHRlcm5zIiwiZGVmYXVsdE1hdGNoV2lkdGgiLCJtYXRjaFJlc3VsdCIsIm1hdGNoIiwibWF0Y2hlZFN0cmluZyIsInBhcnNlUGF0dGVybnMiLCJkZWZhdWx0UGFyc2VXaWR0aCIsIkFycmF5IiwiaXNBcnJheSIsImFycmF5IiwiZmluZEluZGV4Iiwib2JqZWN0IiwiZmluZEtleSIsInZhbHVlQ2FsbGJhY2siLCJyZXN0IiwicGFyc2VQYXR0ZXJuIiwicGFyc2VJbnQiLCJwYXJzZVJlc3VsdCIsImFueSIsImVuVVMiLCJjb2RlIiwiZm9ybWF0RGlzdGFuY2UiLCJ0b2tlbiIsInRva2VuVmFsdWUiLCJhZGRTdWZmaXgiLCJjb21wYXJpc29uIiwiZm9ybWF0UmVsYXRpdmUiLCJfZGF0ZSIsIl9iYXNlRGF0ZSIsIndlZWtTdGFydHNPbiIsImZpcnN0V2Vla0NvbnRhaW5zRGF0ZSIsImRlZmF1bHRPcHRpb25zIiwiZ2V0RGVmYXVsdE9wdGlvbnMiLCJNYXRoIiwicG93IiwibWlsbGlzZWNvbmRzSW5XZWVrIiwibWlsbGlzZWNvbmRzSW5EYXkiLCJ0b0RhdGUiLCJhcmd1bWVudCIsImFyZ1N0ciIsIkRhdGUiLCJjb25zdHJ1Y3RvciIsIk5hTiIsInN0YXJ0T2ZEYXkiLCJzZXRIb3VycyIsImdldFRpbWV6b25lT2Zmc2V0SW5NaWxsaXNlY29uZHMiLCJ1dGNEYXRlIiwiVVRDIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERhdGUiLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiLCJnZXRTZWNvbmRzIiwiZ2V0TWlsbGlzZWNvbmRzIiwic2V0VVRDRnVsbFllYXIiLCJjb25zdHJ1Y3RGcm9tIiwiZ2V0RGF5T2ZZZWFyIiwiZGF0ZUxlZnQiLCJkYXRlUmlnaHQiLCJzdGFydE9mRGF5TGVmdCIsInN0YXJ0T2ZEYXlSaWdodCIsInRpbWVzdGFtcExlZnQiLCJ0aW1lc3RhbXBSaWdodCIsInJvdW5kIiwiZGlmZmVyZW5jZUluQ2FsZW5kYXJEYXlzIiwiY2xlYW5EYXRlIiwic2V0RnVsbFllYXIiLCJzdGFydE9mWWVhciIsInN0YXJ0T2ZXZWVrIiwibG9jYWxlIiwiZ2V0RGF5IiwiZGlmZiIsInNldERhdGUiLCJzdGFydE9mSVNPV2VlayIsImdldElTT1dlZWtZZWFyIiwieWVhciIsImZvdXJ0aE9mSmFudWFyeU9mTmV4dFllYXIiLCJzdGFydE9mTmV4dFllYXIiLCJmb3VydGhPZkphbnVhcnlPZlRoaXNZZWFyIiwic3RhcnRPZlRoaXNZZWFyIiwiZ2V0VGltZSIsImdldElTT1dlZWsiLCJmb3VydGhPZkphbnVhcnkiLCJzdGFydE9mSVNPV2Vla1llYXIiLCJnZXRXZWVrWWVhciIsImZpcnN0V2Vla09mTmV4dFllYXIiLCJmaXJzdFdlZWtPZlRoaXNZZWFyIiwiZ2V0V2VlayIsImZpcnN0V2VlayIsInN0YXJ0T2ZXZWVrWWVhciIsImFkZExlYWRpbmdaZXJvcyIsInRhcmdldExlbmd0aCIsImFicyIsInBhZFN0YXJ0IiwibGlnaHRGb3JtYXR0ZXJzIiwieSIsInNpZ25lZFllYXIiLCJNIiwiZGF5UGVyaW9kRW51bVZhbHVlIiwidG9VcHBlckNhc2UiLCJoIiwiSCIsInMiLCJTIiwibnVtYmVyT2ZEaWdpdHMiLCJtaWxsaXNlY29uZHMiLCJ0cnVuYyIsImZvcm1hdHRlcnMiLCJHIiwidW5pdCIsIlkiLCJzaWduZWRXZWVrWWVhciIsIndlZWtZZWFyIiwiUiIsInUiLCJRIiwiY2VpbCIsInEiLCJMIiwidyIsIndlZWsiLCJJIiwiaXNvV2VlayIsIkQiLCJkYXlPZlllYXIiLCJFIiwiZGF5T2ZXZWVrIiwibG9jYWxEYXlPZldlZWsiLCJjIiwiaXNvRGF5T2ZXZWVrIiwidG9Mb3dlckNhc2UiLCJob3VycyIsIkIiLCJLIiwiWCIsIl9sb2NhbGl6ZSIsInRpbWV6b25lT2Zmc2V0IiwiZ2V0VGltZXpvbmVPZmZzZXQiLCJmb3JtYXRUaW1lem9uZVdpdGhPcHRpb25hbE1pbnV0ZXMiLCJmb3JtYXRUaW1lem9uZSIsIngiLCJPIiwiZm9ybWF0VGltZXpvbmVTaG9ydCIsInoiLCJ0IiwiVCIsIm9mZnNldCIsImRlbGltaXRlciIsInNpZ24iLCJhYnNPZmZzZXQiLCJtaW51dGVzIiwiZGF0ZUxvbmdGb3JtYXR0ZXIiLCJwYXR0ZXJuIiwidGltZUxvbmdGb3JtYXR0ZXIiLCJsb25nRm9ybWF0dGVycyIsIlAiLCJkYXRlUGF0dGVybiIsInRpbWVQYXR0ZXJuIiwiZGF0ZVRpbWVGb3JtYXQiLCJkYXlPZlllYXJUb2tlblJFIiwid2Vla1llYXJUb2tlblJFIiwidGhyb3dUb2tlbnMiLCJpc1ZhbGlkIiwiaXNOYU4iLCJmb3JtYXR0aW5nVG9rZW5zUmVnRXhwIiwibG9uZ0Zvcm1hdHRpbmdUb2tlbnNSZWdFeHAiLCJlc2NhcGVkU3RyaW5nUmVnRXhwIiwiZG91YmxlUXVvdGVSZWdFeHAiLCJ1bmVzY2FwZWRMYXRpbkNoYXJhY3RlclJlZ0V4cCIsImZvcm1hdCIsImZvcm1hdFN0ciIsIm9yaWdpbmFsRGF0ZSIsIlJhbmdlRXJyb3IiLCJwYXJ0cyIsInN1YnN0cmluZyIsImZpcnN0Q2hhcmFjdGVyIiwibG9uZ0Zvcm1hdHRlciIsImlzVG9rZW4iLCJjbGVhbkVzY2FwZWRTdHJpbmciLCJwcmVwcm9jZXNzb3IiLCJmb3JtYXR0ZXJPcHRpb25zIiwicGFydCIsInVzZUFkZGl0aW9uYWxXZWVrWWVhclRva2VucyIsImlzUHJvdGVjdGVkV2Vla1llYXJUb2tlbiIsInVzZUFkZGl0aW9uYWxEYXlPZlllYXJUb2tlbnMiLCJpc1Byb3RlY3RlZERheU9mWWVhclRva2VuIiwiaW5wdXQiLCJfbWVzc2FnZSIsInN1YmplY3QiLCJtZXNzYWdlIiwiY29uc29sZSIsIndhcm4iLCJpbmNsdWRlcyIsIndhcm5PclRocm93UHJvdGVjdGVkRXJyb3IiLCJmb3JtYXR0ZXIiLCJtYXRjaGVkIiwibG9jYWxzIiwic3RyaW5nVG9CeXRlQXJyYXkkMSIsInN0ciIsIm91dCIsImNoYXJDb2RlQXQiLCJieXRlVG9DaGFyTWFwXyIsImNoYXJUb0J5dGVNYXBfIiwiYnl0ZVRvQ2hhck1hcFdlYlNhZmVfIiwiY2hhclRvQnl0ZU1hcFdlYlNhZmVfIiwiRU5DT0RFRF9WQUxTX0JBU0UiLCJFTkNPREVEX1ZBTFMiLCJFTkNPREVEX1ZBTFNfV0VCU0FGRSIsIkhBU19OQVRJVkVfU1VQUE9SVCIsImF0b2IiLCJlbmNvZGVCeXRlQXJyYXkiLCJ3ZWJTYWZlIiwiaW5pdF8iLCJieXRlVG9DaGFyTWFwIiwib3V0cHV0IiwiYnl0ZTEiLCJoYXZlQnl0ZTIiLCJieXRlMiIsImhhdmVCeXRlMyIsImJ5dGUzIiwib3V0Qnl0ZTEiLCJvdXRCeXRlMiIsIm91dEJ5dGUzIiwib3V0Qnl0ZTQiLCJlbmNvZGVTdHJpbmciLCJkZWNvZGVTdHJpbmciLCJieXRlcyIsInBvcyIsImMxIiwiZnJvbUNoYXJDb2RlIiwiYzIiLCJjMyIsImJ5dGVBcnJheVRvU3RyaW5nIiwiZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkiLCJjaGFyVG9CeXRlTWFwIiwiY2hhckF0IiwiYnl0ZTQiLCJEZWNvZGVCYXNlNjRTdHJpbmdFcnJvciIsInN1cGVyIiwiYXJndW1lbnRzIiwibmFtZSIsImJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nIiwidXRmOEJ5dGVzIiwiYmFzZTY0RW5jb2RlIiwiYmFzZTY0RGVjb2RlIiwiZXJyb3IiLCJnZXREZWZhdWx0cyIsImdldEdsb2JhbCIsIl9fRklSRUJBU0VfREVGQVVMVFNfXyIsInByb2Nlc3MiLCJlbnYiLCJkZWZhdWx0c0pzb25TdHJpbmciLCJwYXJzZSIsImdldERlZmF1bHRzRnJvbUVudlZhcmlhYmxlIiwiY29va2llIiwiZGVjb2RlZCIsImdldERlZmF1bHRzRnJvbUNvb2tpZSIsImluZm8iLCJnZXREZWZhdWx0RW11bGF0b3JIb3N0IiwicHJvZHVjdE5hbWUiLCJfYSIsIl9iIiwiZW11bGF0b3JIb3N0cyIsImdldERlZmF1bHRBcHBDb25maWciLCJjb25maWciLCJnZXRFeHBlcmltZW50YWxTZXR0aW5nIiwiRGVmZXJyZWQiLCJyZWplY3QiLCJyZXNvbHZlIiwicHJvbWlzZSIsIlByb21pc2UiLCJ3cmFwQ2FsbGJhY2siLCJjYWxsYmFjayIsImNhdGNoIiwibmF2aWdhdG9yIiwiRmlyZWJhc2VFcnJvciIsImN1c3RvbURhdGEiLCJzZXRQcm90b3R5cGVPZiIsImNhcHR1cmVTdGFja1RyYWNlIiwiRXJyb3JGYWN0b3J5IiwiY3JlYXRlIiwic2VydmljZSIsInNlcnZpY2VOYW1lIiwiZXJyb3JzIiwiZnVsbENvZGUiLCJ0ZW1wbGF0ZSIsIlBBVFRFUk4iLCJfIiwicmVwbGFjZVRlbXBsYXRlIiwiZnVsbE1lc3NhZ2UiLCJhS2V5cyIsImtleXMiLCJiS2V5cyIsImFQcm9wIiwiYlByb3AiLCJpc09iamVjdCIsInRoaW5nIiwicXVlcnlzdHJpbmdQYXJhbXMiLCJwYXJhbXMiLCJlbnRyaWVzIiwiZm9yRWFjaCIsImFycmF5VmFsIiwicXVlcnlzdHJpbmdEZWNvZGUiLCJxdWVyeXN0cmluZyIsInNwbGl0IiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiZXh0cmFjdFF1ZXJ5c3RyaW5nIiwicXVlcnlTdGFydCIsImluZGV4T2YiLCJmcmFnbWVudFN0YXJ0IiwiT2JzZXJ2ZXJQcm94eSIsImV4ZWN1dG9yIiwib25Ob09ic2VydmVycyIsIm9ic2VydmVycyIsInVuc3Vic2NyaWJlcyIsIm9ic2VydmVyQ291bnQiLCJ0YXNrIiwiZmluYWxpemVkIiwidGhlbiIsIm5leHQiLCJmb3JFYWNoT2JzZXJ2ZXIiLCJvYnNlcnZlciIsImNsb3NlIiwiY29tcGxldGUiLCJzdWJzY3JpYmUiLCJuZXh0T3JPYnNlcnZlciIsIm1ldGhvZCIsImltcGxlbWVudHNBbnlNZXRob2RzIiwibm9vcCIsInVuc3ViIiwidW5zdWJzY3JpYmVPbmUiLCJiaW5kIiwiZmluYWxFcnJvciIsImZuIiwic2VuZE9uZSIsImVyciIsIl9kZWxlZ2F0ZSIsIkNvbXBvbmVudCIsImluc3RhbmNlRmFjdG9yeSIsInR5cGUiLCJtdWx0aXBsZUluc3RhbmNlcyIsInNlcnZpY2VQcm9wcyIsImluc3RhbnRpYXRpb25Nb2RlIiwib25JbnN0YW5jZUNyZWF0ZWQiLCJzZXRJbnN0YW50aWF0aW9uTW9kZSIsIm1vZGUiLCJzZXRNdWx0aXBsZUluc3RhbmNlcyIsInNldFNlcnZpY2VQcm9wcyIsInByb3BzIiwic2V0SW5zdGFuY2VDcmVhdGVkQ2FsbGJhY2siLCJERUZBVUxUX0VOVFJZX05BTUUiLCJQcm92aWRlciIsImNvbnRhaW5lciIsImNvbXBvbmVudCIsImluc3RhbmNlcyIsIk1hcCIsImluc3RhbmNlc0RlZmVycmVkIiwiaW5zdGFuY2VzT3B0aW9ucyIsIm9uSW5pdENhbGxiYWNrcyIsIm5vcm1hbGl6ZWRJZGVudGlmaWVyIiwibm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyIiwiaGFzIiwiZGVmZXJyZWQiLCJzZXQiLCJpc0luaXRpYWxpemVkIiwic2hvdWxkQXV0b0luaXRpYWxpemUiLCJpbnN0YW5jZSIsImdldE9ySW5pdGlhbGl6ZVNlcnZpY2UiLCJpbnN0YW5jZUlkZW50aWZpZXIiLCJnZXRJbW1lZGlhdGUiLCJvcHRpb25hbCIsImdldENvbXBvbmVudCIsInNldENvbXBvbmVudCIsImlzQ29tcG9uZW50RWFnZXIiLCJpbnN0YW5jZURlZmVycmVkIiwiY2xlYXJJbnN0YW5jZSIsImRlbGV0ZSIsInNlcnZpY2VzIiwiZnJvbSIsImFsbCIsImZpbHRlciIsIklOVEVSTkFMIiwiX2RlbGV0ZSIsImlzQ29tcG9uZW50U2V0IiwiZ2V0T3B0aW9ucyIsImluaXRpYWxpemUiLCJvcHRzIiwib25Jbml0IiwiZXhpc3RpbmdDYWxsYmFja3MiLCJTZXQiLCJhZGQiLCJleGlzdGluZ0luc3RhbmNlIiwiaW52b2tlT25Jbml0Q2FsbGJhY2tzIiwiY2FsbGJhY2tzIiwicHJvdmlkZXJzIiwiYWRkQ29tcG9uZW50IiwicHJvdmlkZXIiLCJnZXRQcm92aWRlciIsImFkZE9yT3ZlcndyaXRlQ29tcG9uZW50IiwiZ2V0UHJvdmlkZXJzIiwiTG9nTGV2ZWwiLCJsZXZlbFN0cmluZ1RvRW51bSIsIkRFQlVHIiwiVkVSQk9TRSIsIklORk8iLCJXQVJOIiwiRVJST1IiLCJTSUxFTlQiLCJkZWZhdWx0TG9nTGV2ZWwiLCJDb25zb2xlTWV0aG9kIiwiZGVmYXVsdExvZ0hhbmRsZXIiLCJsb2dUeXBlIiwibG9nTGV2ZWwiLCJub3ciLCJ0b0lTT1N0cmluZyIsIkxvZ2dlciIsIl9sb2dMZXZlbCIsIl9sb2dIYW5kbGVyIiwiX3VzZXJMb2dIYW5kbGVyIiwidmFsIiwiVHlwZUVycm9yIiwic2V0TG9nTGV2ZWwiLCJsb2dIYW5kbGVyIiwidXNlckxvZ0hhbmRsZXIiLCJkZWJ1ZyIsImxvZyIsImluc3RhbmNlT2ZBbnkiLCJjb25zdHJ1Y3RvcnMiLCJzb21lIiwiaWRiUHJveHlhYmxlVHlwZXMiLCJjdXJzb3JBZHZhbmNlTWV0aG9kcyIsImN1cnNvclJlcXVlc3RNYXAiLCJXZWFrTWFwIiwidHJhbnNhY3Rpb25Eb25lTWFwIiwidHJhbnNhY3Rpb25TdG9yZU5hbWVzTWFwIiwidHJhbnNmb3JtQ2FjaGUiLCJyZXZlcnNlVHJhbnNmb3JtQ2FjaGUiLCJpZGJQcm94eVRyYXBzIiwicmVjZWl2ZXIiLCJJREJUcmFuc2FjdGlvbiIsIm9iamVjdFN0b3JlTmFtZXMiLCJvYmplY3RTdG9yZSIsInRyYW5zZm9ybUNhY2hhYmxlVmFsdWUiLCJmdW5jIiwiSURCRGF0YWJhc2UiLCJ0cmFuc2FjdGlvbiIsIklEQkN1cnNvciIsImFkdmFuY2UiLCJjb250aW51ZSIsImNvbnRpbnVlUHJpbWFyeUtleSIsInVud3JhcCIsInN0b3JlTmFtZXMiLCJ0eCIsInNvcnQiLCJkb25lIiwidW5saXN0ZW4iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiRE9NRXhjZXB0aW9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNhY2hlRG9uZVByb21pc2VGb3JUcmFuc2FjdGlvbiIsIklEQk9iamVjdFN0b3JlIiwiSURCSW5kZXgiLCJQcm94eSIsIklEQlJlcXVlc3QiLCJyZXF1ZXN0Iiwic3VjY2VzcyIsInByb21pc2lmeVJlcXVlc3QiLCJuZXdWYWx1ZSIsInJlYWRNZXRob2RzIiwid3JpdGVNZXRob2RzIiwiY2FjaGVkTWV0aG9kcyIsImdldE1ldGhvZCIsInRhcmdldEZ1bmNOYW1lIiwidXNlSW5kZXgiLCJpc1dyaXRlIiwiYXN5bmMiLCJzdG9yZU5hbWUiLCJzdG9yZSIsInNoaWZ0Iiwib2xkVHJhcHMiLCJQbGF0Zm9ybUxvZ2dlclNlcnZpY2VJbXBsIiwiZ2V0UGxhdGZvcm1JbmZvU3RyaW5nIiwiaXNWZXJzaW9uU2VydmljZVByb3ZpZGVyIiwibGlicmFyeSIsInZlcnNpb24iLCJsb2dTdHJpbmciLCJuYW1lJHAiLCJ2ZXJzaW9uJDEiLCJsb2dnZXIiLCJuYW1lJG8iLCJuYW1lJG4iLCJuYW1lJG0iLCJuYW1lJGwiLCJuYW1lJGsiLCJuYW1lJGoiLCJuYW1lJGkiLCJuYW1lJGgiLCJuYW1lJGciLCJuYW1lJGYiLCJuYW1lJGUiLCJuYW1lJGQiLCJuYW1lJGMiLCJuYW1lJGIiLCJuYW1lJGEiLCJuYW1lJDkiLCJuYW1lJDgiLCJuYW1lJDciLCJuYW1lJDYiLCJuYW1lJDUiLCJuYW1lJDQiLCJuYW1lJDMiLCJuYW1lJDIiLCJuYW1lJDEiLCJQTEFURk9STV9MT0dfU1RSSU5HIiwiX2FwcHMiLCJfc2VydmVyQXBwcyIsIl9jb21wb25lbnRzIiwiX2FkZENvbXBvbmVudCIsImFwcCIsIl9yZWdpc3RlckNvbXBvbmVudCIsImNvbXBvbmVudE5hbWUiLCJzZXJ2ZXJBcHAiLCJoZWFydGJlYXRDb250cm9sbGVyIiwidHJpZ2dlckhlYXJ0YmVhdCIsInNldHRpbmdzIiwiRVJST1JfRkFDVE9SWSIsIkZpcmViYXNlQXBwSW1wbCIsIl9pc0RlbGV0ZWQiLCJhc3NpZ24iLCJfY29uZmlnIiwiX25hbWUiLCJfYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkIiwiYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkIiwiX2NvbnRhaW5lciIsImNoZWNrRGVzdHJveWVkIiwiaXNEZWxldGVkIiwiYXBwTmFtZSIsIlNES19WRVJTSU9OIiwiaW5pdGlhbGl6ZUFwcCIsInJhd0NvbmZpZyIsImV4aXN0aW5nQXBwIiwibmV3QXBwIiwiZ2V0QXBwIiwicmVnaXN0ZXJWZXJzaW9uIiwibGlicmFyeUtleU9yTmFtZSIsInZhcmlhbnQiLCJsaWJyYXJ5TWlzbWF0Y2giLCJ2ZXJzaW9uTWlzbWF0Y2giLCJ3YXJuaW5nIiwiREJfTkFNRSIsIkRCX1ZFUlNJT04iLCJTVE9SRV9OQU1FIiwiZGJQcm9taXNlIiwiZ2V0RGJQcm9taXNlIiwiYmxvY2tlZCIsInVwZ3JhZGUiLCJibG9ja2luZyIsInRlcm1pbmF0ZWQiLCJpbmRleGVkREIiLCJvcGVuIiwib3BlblByb21pc2UiLCJldmVudCIsIm9sZFZlcnNpb24iLCJuZXdWZXJzaW9uIiwiZGIiLCJvcGVuREIiLCJjcmVhdGVPYmplY3RTdG9yZSIsIm9yaWdpbmFsRXJyb3JNZXNzYWdlIiwid3JpdGVIZWFydGJlYXRzVG9JbmRleGVkREIiLCJoZWFydGJlYXRPYmplY3QiLCJwdXQiLCJjb21wdXRlS2V5IiwiaWRiR2V0RXJyb3IiLCJhcHBJZCIsIkhlYXJ0YmVhdFNlcnZpY2VJbXBsIiwiX2hlYXJ0YmVhdHNDYWNoZSIsIl9zdG9yYWdlIiwiSGVhcnRiZWF0U3RvcmFnZUltcGwiLCJfaGVhcnRiZWF0c0NhY2hlUHJvbWlzZSIsInJlYWQiLCJhZ2VudCIsImdldFVUQ0RhdGVTdHJpbmciLCJoZWFydGJlYXRzIiwibGFzdFNlbnRIZWFydGJlYXREYXRlIiwic2luZ2xlRGF0ZUhlYXJ0YmVhdCIsImhiVGltZXN0YW1wIiwidmFsdWVPZiIsIm92ZXJ3cml0ZSIsImdldEhlYXJ0YmVhdHNIZWFkZXIiLCJoZWFydGJlYXRzVG9TZW5kIiwidW5zZW50RW50cmllcyIsImhlYXJ0YmVhdHNDYWNoZSIsIm1heFNpemUiLCJoZWFydGJlYXRFbnRyeSIsImZpbmQiLCJoYiIsImRhdGVzIiwiY291bnRCeXRlcyIsInBvcCIsImV4dHJhY3RIZWFydGJlYXRzRm9ySGVhZGVyIiwiaGVhZGVyU3RyaW5nIiwiX2NhblVzZUluZGV4ZWREQlByb21pc2UiLCJydW5JbmRleGVkREJFbnZpcm9ubWVudENoZWNrIiwiaXNJbmRleGVkREJBdmFpbGFibGUiLCJwcmVFeGlzdCIsIkRCX0NIRUNLX05BTUUiLCJvbnN1Y2Nlc3MiLCJkZWxldGVEYXRhYmFzZSIsIm9udXBncmFkZW5lZWRlZCIsIm9uZXJyb3IiLCJpZGJIZWFydGJlYXRPYmplY3QiLCJyZWFkSGVhcnRiZWF0c0Zyb21JbmRleGVkREIiLCJoZWFydGJlYXRzT2JqZWN0IiwiZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0IiwiSW50ZWdlciIsIk1kNSIsImNvbW1vbmpzR2xvYmFsIiwiZ2xvYmFsIiwiYmxvb21fYmxvYl9lczIwMTgiLCJibG9ja1NpemUiLCJmIiwiQyIsInIiLCJ2IiwiaXNGaW5pdGUiLCJBIiwiRiIsImwiLCJKIiwiaiIsIm1heCIsImZsb29yIiwiTE4yIiwiYW5kIiwib3IiLCJ4b3IiLCJkaWdlc3QiLCJyZXNldCIsIm11bHRpcGx5IiwibW9kdWxvIiwiY29tcGFyZSIsInRvTnVtYmVyIiwiZ2V0Qml0cyIsImZyb21OdW1iZXIiLCJmcm9tU3RyaW5nIiwibWluIiwiWGhySW8iLCJGZXRjaFhtbEh0dHBGYWN0b3J5IiwiV2ViQ2hhbm5lbCIsIkV2ZW50VHlwZSIsIkVycm9yQ29kZSIsIlN0YXQiLCJFdmVudCIsImdldFN0YXRFdmVudFRhcmdldCIsImNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQiLCJ3ZWJjaGFubmVsX2Jsb2JfZXMyMDE4IiwiYWEiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiY2EiLCJiYSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiZGEiLCJTeW1ib2wiLCJpdGVyYXRvciIsImVhIiwiZmEiLCJoYSIsImlhIiwiamEiLCJ1bnNoaWZ0Iiwia2EiLCJRYiIsImxhIiwibWEiLCJ1c2VyQWdlbnQiLCJvYSIsInBhIiwicWEiLCJzYSIsInRhIiwidWEiLCJ2YSIsIndhIiwic2V0VGltZW91dCIsInhhIiwiemEiLCJCYSIsIkNhIiwiRWEiLCJEYSIsImRlZmF1bHRQcmV2ZW50ZWQiLCJOIiwiRmEiLCJyZWxhdGVkVGFyZ2V0IiwiYnV0dG9uIiwic2NyZWVuWSIsInNjcmVlblgiLCJjbGllbnRZIiwiY2xpZW50WCIsIm1ldGFLZXkiLCJzaGlmdEtleSIsImFsdEtleSIsImN0cmxLZXkiLCJzdGF0ZSIsInBvaW50ZXJJZCIsInBvaW50ZXJUeXBlIiwiY2hhbmdlZFRvdWNoZXMiLCJzcmNFbGVtZW50Iiwibm9kZU5hbWUiLCJmcm9tRWxlbWVudCIsInRvRWxlbWVudCIsInBhZ2VYIiwicGFnZVkiLCJHYSIsInByZXZlbnREZWZhdWx0IiwicmV0dXJuVmFsdWUiLCJyYW5kb20iLCJIYSIsIklhIiwibGlzdGVuZXIiLCJwcm94eSIsImNhcHR1cmUiLCJKYSIsIkthIiwiTWEiLCJMYSIsIk5hIiwiT2EiLCJRYSIsIm9uY2UiLCJSYSIsIlNhIiwiVGEiLCJVYSIsIlhhIiwiVmEiLCJhdHRhY2hFdmVudCIsIldhIiwiYWRkTGlzdGVuZXIiLCJyZW1vdmVMaXN0ZW5lciIsIllhIiwiWmEiLCJkZXRhY2hFdmVudCIsIiRhIiwiaGFuZGxlRXZlbnQiLCJhYiIsImJiIiwiY2IiLCJlYiIsImNsZWFyVGltZW91dCIsImZiIiwiZ2IiLCJpYiIsImpiIiwia2IiLCJsYiIsIm1iIiwiT1BFTiIsIndiIiwibmIiLCJvYiIsInBiIiwicWIiLCJyYiIsInNiIiwiU1RBVF9FVkVOVCIsInN0YXQiLCJ0YiIsInNpemUiLCJ1YiIsInZiIiwieWIiLCJDYiIsIkFiIiwiTk9fRVJST1IiLCJUSU1FT1VUIiwieGIiLCJCYiIsIkhiIiwiemIiLCJQYiIsIkRiIiwiVSIsIlciLCJFYiIsIlhNTEh0dHBSZXF1ZXN0IiwiRmIiLCJHYiIsIkliIiwiSmIiLCJLYiIsIkxiIiwiTWIiLCJTYiIsIldiIiwiT2IiLCJVYiIsImFib3J0IiwiUmIiLCJYYiIsIlliIiwiWmIiLCIkYiIsImFjIiwiQWEiLCJ5YSIsImdldFJlc3BvbnNlSGVhZGVyIiwiYmMiLCJjYyIsImRjIiwiZWMiLCJmYyIsImdjIiwiWiIsIk5iIiwiVGV4dERlY29kZXIiLCJkZWNvZGUiLCJzdHJlYW0iLCJUYiIsImdldEFsbFJlc3BvbnNlSGVhZGVycyIsInRyaW0iLCJyYSIsIlZiIiwiY2FuY2VsIiwiaGMiLCJpYyIsIlBlcmZvcm1hbmNlTmF2aWdhdGlvblRpbWluZyIsInBlcmZvcm1hbmNlIiwiZ2V0RW50cmllc0J5VHlwZSIsIm5leHRIb3BQcm90b2NvbCIsImNocm9tZSIsImxvYWRUaW1lcyIsIndhc0ZldGNoZWRWaWFTcGR5IiwiamMiLCJrYyIsIm5hIiwiViIsIm1jIiwibGMiLCJjbGVhciIsIm9jIiwiUmVnRXhwIiwicWMiLCJyYyIsInNjIiwidGMiLCJ1YyIsIkRjIiwiQWMiLCJ2YyIsIkJjIiwiZGVjb2RlVVJJIiwiZW5jb2RlVVJJIiwiQ2MiLCJ3YyIsInhjIiwieWMiLCJ6YyIsInBjIiwiRWMiLCJvbmxvYWQiLCJvbmFib3J0Iiwib250aW1lb3V0IiwiSGMiLCJJYyIsIkpjIiwiS2MiLCJzdGF0dXMiLCJyZWFkeVN0YXRlIiwicmVzcG9uc2VUeXBlIiwicmVzcG9uc2VUZXh0IiwicmVzcG9uc2UiLCJzdGF0dXNUZXh0Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwiSGVhZGVycyIsIk5jIiwiUGEiLCJnYSIsIk1jIiwiTGMiLCJPYyIsIlBjIiwiaGVhZGVycyIsInNlbmQiLCJjcmVkZW50aWFscyIsImNhY2hlIiwiYm9keSIsImZldGNoIiwiUmVxdWVzdCIsImFycmF5QnVmZmVyIiwiUmVhZGFibGVTdHJlYW0iLCJnZXRSZWFkZXIiLCJ0ZXh0IiwiVWludDhBcnJheSIsInNldFJlcXVlc3RIZWFkZXIiLCJhcHBlbmQiLCJRYyIsIlJjIiwiU2MiLCJVYyIsIlZjIiwiV2MiLCJwcm90b2NvbCIsIlRjIiwibW96UmVzcG9uc2VBcnJheUJ1ZmZlciIsIlhjIiwiaW50ZXJuYWxDaGFubmVsUGFyYW1zIiwiWWMiLCJ4bWxIdHRwRmFjdG9yeSIsInVzZUZldGNoU3RyZWFtcyIsInN1cHBvcnRzQ3Jvc3NEb21haW5YaHIiLCJjb25jdXJyZW50UmVxdWVzdExpbWl0IiwiZmFzdEhhbmRzaGFrZSIsImVuY29kZUluaXRNZXNzYWdlSGVhZGVycyIsImZvcmNlTG9uZ1BvbGxpbmciLCJkZXRlY3RCdWZmZXJpbmdQcm94eSIsImxvbmdQb2xsaW5nVGltZW91dCIsIlpjIiwiJGMiLCJzZW5kQmVhY29uIiwiSW1hZ2UiLCJhZCIsImVkIiwiZGQiLCJjZCIsImZkIiwiYmQiLCJpc0FjdGl2ZSIsIkZjIiwiQWJvcnRDb250cm9sbGVyIiwic2lnbmFsIiwib2siLCJHYyIsImhvc3RuYW1lIiwicG9ydCIsImdkIiwiaGQiLCJtZXNzYWdlVXJsUGFyYW1zIiwibWVzc2FnZUhlYWRlcnMiLCJjbGllbnRQcm90b2NvbEhlYWRlclJlcXVpcmVkIiwiaW5pdE1lc3NhZ2VIZWFkZXJzIiwibWVzc2FnZUNvbnRlbnRUeXBlIiwic2VuZFJhd0pzb24iLCJodHRwU2Vzc2lvbklkUGFyYW0iLCJfX2hlYWRlcnNfXyIsInN0YXR1c0NvZGUiLCJfX3N0YXR1c19fIiwiX19zbV9fIiwiamQiLCJnZXRQcm90b3R5cGVPZiIsIkZvcm1EYXRhIiwid2l0aENyZWRlbnRpYWxzIiwiY29ubmVjdCIsIk9TSUQiLCJPQUlEIiwiX19kYXRhX18iLCJjcmVhdGVXZWJDaGFubmVsIiwiUFJPWFkiLCJOT1BST1hZIiwiSFRUUF9FUlJPUiIsIkNPTVBMRVRFIiwiQ0xPU0UiLCJNRVNTQUdFIiwibGlzdGVuIiwibGlzdGVuT25jZSIsImdldExhc3RFcnJvciIsImdldExhc3RFcnJvckNvZGUiLCJnZXRTdGF0dXMiLCJnZXRSZXNwb25zZUpzb24iLCJnZXRSZXNwb25zZVRleHQiLCJzZXRXaXRoQ3JlZGVudGlhbHMiLCJVc2VyIiwidWlkIiwiaXNBdXRoZW50aWNhdGVkIiwidG9LZXkiLCJpc0VxdWFsIiwiVU5BVVRIRU5USUNBVEVEIiwiR09PR0xFX0NSRURFTlRJQUxTIiwiRklSU1RfUEFSVFkiLCJNT0NLX1VTRVIiLCJfX1BSSVZBVEVfZ2V0TG9nTGV2ZWwiLCJfX1BSSVZBVEVfbG9nRGVidWciLCJfX1BSSVZBVEVfYXJnVG9TdHJpbmciLCJfX1BSSVZBVEVfbG9nRXJyb3IiLCJfX1BSSVZBVEVfbG9nV2FybiIsImZhaWwiLCJfX1BSSVZBVEVfaGFyZEFzc2VydCIsIl9fUFJJVkFURV9kZWJ1Z0Nhc3QiLCJPSyIsIkNBTkNFTExFRCIsIlVOS05PV04iLCJJTlZBTElEX0FSR1VNRU5UIiwiREVBRExJTkVfRVhDRUVERUQiLCJOT1RfRk9VTkQiLCJBTFJFQURZX0VYSVNUUyIsIlBFUk1JU1NJT05fREVOSUVEIiwiUkVTT1VSQ0VfRVhIQVVTVEVEIiwiRkFJTEVEX1BSRUNPTkRJVElPTiIsIkFCT1JURUQiLCJPVVRfT0ZfUkFOR0UiLCJVTklNUExFTUVOVEVEIiwiVU5BVkFJTEFCTEUiLCJEQVRBX0xPU1MiLCJGaXJlc3RvcmVFcnJvciIsIl9fUFJJVkFURV9EZWZlcnJlZCIsIl9fUFJJVkFURV9PQXV0aFRva2VuIiwidXNlciIsIl9fUFJJVkFURV9FbXB0eUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyIiwiZ2V0VG9rZW4iLCJpbnZhbGlkYXRlVG9rZW4iLCJzdGFydCIsImVucXVldWVSZXRyeWFibGUiLCJzaHV0ZG93biIsIl9fUFJJVkFURV9FbXVsYXRvckF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyIiwiY2hhbmdlTGlzdGVuZXIiLCJfX1BSSVZBVEVfRmlyZWJhc2VBdXRoQ3JlZGVudGlhbHNQcm92aWRlciIsImN1cnJlbnRVc2VyIiwiZm9yY2VSZWZyZXNoIiwiYXV0aCIsIl9fUFJJVkFURV9ndWFyZGVkQ2hhbmdlTGlzdGVuZXIiLCJfX1BSSVZBVEVfYXdhaXROZXh0VG9rZW4iLCJfX1BSSVZBVEVfcmVnaXN0ZXJBdXRoIiwiYWRkQXV0aFRva2VuTGlzdGVuZXIiLCJhY2Nlc3NUb2tlbiIsInJlbW92ZUF1dGhUb2tlbkxpc3RlbmVyIiwiZ2V0VWlkIiwiX19QUklWQVRFX0ZpcnN0UGFydHlUb2tlbiIsIl9fUFJJVkFURV9GaXJzdFBhcnR5QXV0aENyZWRlbnRpYWxzUHJvdmlkZXIiLCJBcHBDaGVja1Rva2VuIiwiX19QUklWQVRFX0ZpcmViYXNlQXBwQ2hlY2tUb2tlblByb3ZpZGVyIiwiYXBwQ2hlY2siLCJvblRva2VuQ2hhbmdlZCIsIl9fUFJJVkFURV9yZWdpc3RlckFwcENoZWNrIiwiYWRkVG9rZW5MaXN0ZW5lciIsInJlbW92ZVRva2VuTGlzdGVuZXIiLCJfX1BSSVZBVEVfcmFuZG9tQnl0ZXMiLCJjcnlwdG8iLCJtc0NyeXB0byIsImdldFJhbmRvbVZhbHVlcyIsIl9fUFJJVkFURV9BdXRvSWQiLCJuZXdJZCIsIl9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yIiwiX19QUklWQVRFX2FycmF5RXF1YWxzIiwiZXZlcnkiLCJUaW1lc3RhbXAiLCJzZWNvbmRzIiwibmFub3NlY29uZHMiLCJmcm9tTWlsbGlzIiwiZnJvbURhdGUiLCJ0b01pbGxpcyIsIl9jb21wYXJlVG8iLCJ0b0pTT04iLCJTbmFwc2hvdFZlcnNpb24iLCJ0aW1lc3RhbXAiLCJmcm9tVGltZXN0YW1wIiwiY29tcGFyZVRvIiwidG9NaWNyb3NlY29uZHMiLCJ0b1RpbWVzdGFtcCIsIkJhc2VQYXRoIiwic2VnbWVudHMiLCJsZW4iLCJjb21wYXJhdG9yIiwiY2hpbGQiLCJsaW1pdCIsImNvbnN0cnVjdCIsInBvcEZpcnN0IiwicG9wTGFzdCIsImZpcnN0U2VnbWVudCIsImxhc3RTZWdtZW50IiwiaXNFbXB0eSIsImlzUHJlZml4T2YiLCJpc0ltbWVkaWF0ZVBhcmVudE9mIiwidG9BcnJheSIsIlJlc291cmNlUGF0aCIsImNhbm9uaWNhbFN0cmluZyIsInRvVXJpRW5jb2RlZFN0cmluZyIsImVtcHR5UGF0aCIsIkZpZWxkUGF0aCQxIiwiaXNWYWxpZElkZW50aWZpZXIiLCJpc0tleUZpZWxkIiwia2V5RmllbGQiLCJmcm9tU2VydmVyRm9ybWF0IiwiX19QUklWQVRFX2FkZEN1cnJlbnRTZWdtZW50IiwiRG9jdW1lbnRLZXkiLCJwYXRoIiwiZnJvbVBhdGgiLCJmcm9tTmFtZSIsImVtcHR5IiwiY29sbGVjdGlvbkdyb3VwIiwiaGFzQ29sbGVjdGlvbklkIiwiZ2V0Q29sbGVjdGlvbkdyb3VwIiwiZ2V0Q29sbGVjdGlvblBhdGgiLCJpc0RvY3VtZW50S2V5IiwiZnJvbVNlZ21lbnRzIiwiX19QUklWQVRFX25ld0luZGV4T2Zmc2V0RnJvbURvY3VtZW50IiwiSW5kZXhPZmZzZXQiLCJyZWFkVGltZSIsImRvY3VtZW50S2V5IiwibGFyZ2VzdEJhdGNoSWQiLCJfX1BSSVZBVEVfaW5kZXhPZmZzZXRDb21wYXJhdG9yIiwiUGVyc2lzdGVuY2VUcmFuc2FjdGlvbiIsIm9uQ29tbWl0dGVkTGlzdGVuZXJzIiwiYWRkT25Db21taXR0ZWRMaXN0ZW5lciIsInJhaXNlT25Db21taXR0ZWRFdmVudCIsIl9fUFJJVkFURV9pZ25vcmVJZlByaW1hcnlMZWFzZUxvc3MiLCJQZXJzaXN0ZW5jZVByb21pc2UiLCJuZXh0Q2FsbGJhY2siLCJjYXRjaENhbGxiYWNrIiwiaXNEb25lIiwiY2FsbGJhY2tBdHRhY2hlZCIsIndyYXBGYWlsdXJlIiwid3JhcFN1Y2Nlc3MiLCJ0b1Byb21pc2UiLCJ3cmFwVXNlckZ1bmN0aW9uIiwid2FpdEZvciIsIm1hcEFycmF5IiwiZG9XaGlsZSIsIl9fUFJJVkFURV9pc0luZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IiLCJfX1BSSVZBVEVfTGlzdGVuU2VxdWVuY2UiLCJwcmV2aW91c1ZhbHVlIiwic2VxdWVuY2VOdW1iZXJIYW5kbGVyIiwiaWUiLCJzZSIsIndyaXRlU2VxdWVuY2VOdW1iZXIiLCJfX1BSSVZBVEVfaXNOdWxsT3JVbmRlZmluZWQiLCJfX1BSSVZBVEVfaXNOZWdhdGl2ZVplcm8iLCJvZSIsIl9fUFJJVkFURV9vYmplY3RTaXplIiwiU29ydGVkTWFwIiwicm9vdCIsIkxMUkJOb2RlIiwiRU1QVFkiLCJjb3B5IiwiQkxBQ0siLCJsZWZ0IiwicmlnaHQiLCJtaW5LZXkiLCJtYXhLZXkiLCJpbm9yZGVyVHJhdmVyc2FsIiwicmV2ZXJzZVRyYXZlcnNhbCIsImdldEl0ZXJhdG9yIiwiU29ydGVkTWFwSXRlcmF0b3IiLCJnZXRJdGVyYXRvckZyb20iLCJnZXRSZXZlcnNlSXRlcmF0b3IiLCJnZXRSZXZlcnNlSXRlcmF0b3JGcm9tIiwiaXNSZXZlcnNlIiwibm9kZVN0YWNrIiwiZ2V0TmV4dCIsImhhc05leHQiLCJwZWVrIiwiY29sb3IiLCJSRUQiLCJmaXhVcCIsInJlbW92ZU1pbiIsImlzUmVkIiwibW92ZVJlZExlZnQiLCJyb3RhdGVSaWdodCIsIm1vdmVSZWRSaWdodCIsInJvdGF0ZUxlZnQiLCJjb2xvckZsaXAiLCJjaGVja01heERlcHRoIiwiY2hlY2siLCJTb3J0ZWRTZXQiLCJmaXJzdCIsImxhc3QiLCJmb3JFYWNoSW5SYW5nZSIsImZvckVhY2hXaGlsZSIsImZpcnN0QWZ0ZXJPckVxdWFsIiwiU29ydGVkU2V0SXRlcmF0b3IiLCJ1bmlvbldpdGgiLCJpdGVyIiwiRmllbGRNYXNrIiwiZmllbGRzIiwiY292ZXJzIiwiX19QUklWQVRFX0Jhc2U2NERlY29kZUVycm9yIiwiQnl0ZVN0cmluZyIsImJpbmFyeVN0cmluZyIsImZyb21CYXNlNjRTdHJpbmciLCJmcm9tVWludDhBcnJheSIsInRvQmFzZTY0IiwidG9VaW50OEFycmF5IiwiYXBwcm94aW1hdGVCeXRlU2l6ZSIsIkVNUFRZX0JZVEVfU1RSSU5HIiwibmUiLCJfX1BSSVZBVEVfbm9ybWFsaXplVGltZXN0YW1wIiwiZXhlYyIsInN1YnN0ciIsIm5hbm9zIiwiX19QUklWQVRFX25vcm1hbGl6ZU51bWJlciIsIl9fUFJJVkFURV9ub3JtYWxpemVCeXRlU3RyaW5nIiwiX19QUklWQVRFX2lzU2VydmVyVGltZXN0YW1wIiwibWFwVmFsdWUiLCJfX3R5cGVfXyIsInN0cmluZ1ZhbHVlIiwiX19QUklWQVRFX2dldFByZXZpb3VzVmFsdWUiLCJfX3ByZXZpb3VzX3ZhbHVlX18iLCJfX1BSSVZBVEVfZ2V0TG9jYWxXcml0ZVRpbWUiLCJfX2xvY2FsX3dyaXRlX3RpbWVfXyIsInRpbWVzdGFtcFZhbHVlIiwiRGF0YWJhc2VJbmZvIiwiZGF0YWJhc2VJZCIsInBlcnNpc3RlbmNlS2V5IiwiaG9zdCIsInNzbCIsImF1dG9EZXRlY3RMb25nUG9sbGluZyIsImxvbmdQb2xsaW5nT3B0aW9ucyIsIkRhdGFiYXNlSWQiLCJwcm9qZWN0SWQiLCJkYXRhYmFzZSIsImlzRGVmYXVsdERhdGFiYXNlIiwicmUiLCJfX1BSSVZBVEVfdHlwZU9yZGVyIiwiX19QUklWQVRFX2lzTWF4VmFsdWUiLCJfX1BSSVZBVEVfdmFsdWVFcXVhbHMiLCJib29sZWFuVmFsdWUiLCJieXRlc1ZhbHVlIiwicmVmZXJlbmNlVmFsdWUiLCJnZW9Qb2ludFZhbHVlIiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJpbnRlZ2VyVmFsdWUiLCJkb3VibGVWYWx1ZSIsImFycmF5VmFsdWUiLCJfX1BSSVZBVEVfYXJyYXlWYWx1ZUNvbnRhaW5zIiwiX19QUklWQVRFX3ZhbHVlQ29tcGFyZSIsIl9fUFJJVkFURV9jb21wYXJlVGltZXN0YW1wcyIsImNhbm9uaWNhbElkIiwiX19QUklWQVRFX2Nhbm9uaWZ5VmFsdWUiLCJpc0ludGVnZXIiLCJfX1BSSVZBVEVfaXNOdWxsVmFsdWUiLCJfX1BSSVZBVEVfaXNOYW5WYWx1ZSIsIl9fUFJJVkFURV9pc01hcFZhbHVlIiwiX19QUklWQVRFX2RlZXBDbG9uZSIsIk9iamVjdFZhbHVlIiwiZmllbGQiLCJnZXRGaWVsZHNNYXAiLCJzZXRBbGwiLCJhcHBseUNoYW5nZXMiLCJjbG9uZSIsIl9fUFJJVkFURV9leHRyYWN0RmllbGRNYXNrIiwiTXV0YWJsZURvY3VtZW50IiwiZG9jdW1lbnRUeXBlIiwiY3JlYXRlVGltZSIsImRvY3VtZW50U3RhdGUiLCJuZXdJbnZhbGlkRG9jdW1lbnQiLCJuZXdGb3VuZERvY3VtZW50IiwibmV3Tm9Eb2N1bWVudCIsIm5ld1Vua25vd25Eb2N1bWVudCIsImNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQiLCJjb252ZXJ0VG9Ob0RvY3VtZW50IiwiY29udmVydFRvVW5rbm93bkRvY3VtZW50Iiwic2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zIiwic2V0SGFzTG9jYWxNdXRhdGlvbnMiLCJzZXRSZWFkVGltZSIsImhhc0xvY2FsTXV0YXRpb25zIiwiaGFzQ29tbWl0dGVkTXV0YXRpb25zIiwiaGFzUGVuZGluZ1dyaXRlcyIsImlzVmFsaWREb2N1bWVudCIsImlzRm91bmREb2N1bWVudCIsImlzTm9Eb2N1bWVudCIsImlzVW5rbm93bkRvY3VtZW50IiwibXV0YWJsZUNvcHkiLCJCb3VuZCIsInBvc2l0aW9uIiwiaW5jbHVzaXZlIiwiX19QUklWQVRFX2JvdW5kQ29tcGFyZVRvRG9jdW1lbnQiLCJkaXIiLCJfX1BSSVZBVEVfYm91bmRFcXVhbHMiLCJPcmRlckJ5IiwiX19QUklWQVRFX29yZGVyQnlFcXVhbHMiLCJGaWx0ZXIiLCJGaWVsZEZpbHRlciIsIm9wIiwiY3JlYXRlS2V5RmllbGRJbkZpbHRlciIsIl9fUFJJVkFURV9LZXlGaWVsZEZpbHRlciIsIl9fUFJJVkFURV9BcnJheUNvbnRhaW5zRmlsdGVyIiwiX19QUklWQVRFX0luRmlsdGVyIiwiX19QUklWQVRFX05vdEluRmlsdGVyIiwiX19QUklWQVRFX0FycmF5Q29udGFpbnNBbnlGaWx0ZXIiLCJfX1BSSVZBVEVfS2V5RmllbGRJbkZpbHRlciIsIl9fUFJJVkFURV9LZXlGaWVsZE5vdEluRmlsdGVyIiwibWF0Y2hlcyIsIm1hdGNoZXNDb21wYXJpc29uIiwiaXNJbmVxdWFsaXR5IiwiZ2V0RmxhdHRlbmVkRmlsdGVycyIsImdldEZpbHRlcnMiLCJDb21wb3NpdGVGaWx0ZXIiLCJmaWx0ZXJzIiwiYWUiLCJfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVySXNDb25qdW5jdGlvbiIsInJlZHVjZSIsIl9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0ZsYXRDb25qdW5jdGlvbiIsIl9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0ZsYXQiLCJfX1BSSVZBVEVfY2Fub25pZnlGaWx0ZXIiLCJfX1BSSVZBVEVfZmlsdGVyRXF1YWxzIiwiX19QUklWQVRFX3N0cmluZ2lmeUZpbHRlciIsIl9fUFJJVkFURV9leHRyYWN0RG9jdW1lbnRLZXlzRnJvbUFycmF5VmFsdWUiLCJudWxsVmFsdWUiLCJfX1BSSVZBVEVfVGFyZ2V0SW1wbCIsIm9yZGVyQnkiLCJzdGFydEF0IiwiZW5kQXQiLCJ1ZSIsIl9fUFJJVkFURV9uZXdUYXJnZXQiLCJfX1BSSVZBVEVfY2Fub25pZnlUYXJnZXQiLCJfX1BSSVZBVEVfdGFyZ2V0RXF1YWxzIiwiX19QUklWQVRFX3RhcmdldElzRG9jdW1lbnRUYXJnZXQiLCJfX1BSSVZBVEVfUXVlcnlJbXBsIiwiZXhwbGljaXRPcmRlckJ5IiwibGltaXRUeXBlIiwiY2UiLCJsZSIsImhlIiwiX19QUklWQVRFX25ld1F1ZXJ5Rm9yUGF0aCIsIl9fUFJJVkFURV9xdWVyeU1hdGNoZXNBbGxEb2N1bWVudHMiLCJfX1BSSVZBVEVfcXVlcnlOb3JtYWxpemVkT3JkZXJCeSIsIl9fUFJJVkFURV9xdWVyeVRvVGFyZ2V0IiwiX19QUklWQVRFX19xdWVyeVRvVGFyZ2V0IiwiX19QUklWQVRFX3F1ZXJ5V2l0aExpbWl0IiwiX19QUklWQVRFX3F1ZXJ5RXF1YWxzIiwiX19QUklWQVRFX2Nhbm9uaWZ5UXVlcnkiLCJfX1BSSVZBVEVfc3RyaW5naWZ5UXVlcnkiLCJfX1BSSVZBVEVfcXVlcnlNYXRjaGVzIiwiX19QUklWQVRFX25ld1F1ZXJ5Q29tcGFyYXRvciIsIl9fUFJJVkFURV9jb21wYXJlRG9jcyIsIk9iamVjdE1hcCIsIm1hcEtleUZuIiwiZXF1YWxzRm4iLCJpbm5lciIsImlubmVyU2l6ZSIsIl9fUFJJVkFURV9tdXRhYmxlRG9jdW1lbnRNYXAiLCJkb2N1bWVudE1hcCIsIl9fUFJJVkFURV9jb252ZXJ0T3ZlcmxheWVkRG9jdW1lbnRNYXBUb0RvY3VtZW50TWFwIiwib3ZlcmxheWVkRG9jdW1lbnQiLCJfX1BSSVZBVEVfbmV3T3ZlcmxheU1hcCIsIl9fUFJJVkFURV9uZXdEb2N1bWVudEtleU1hcCIsIl9fUFJJVkFURV9uZXdNdXRhdGlvbk1hcCIsIl9lIiwiX19QUklWQVRFX2RvY3VtZW50S2V5U2V0IiwiX19QUklWQVRFX3RvRG91YmxlIiwidXNlUHJvdG8zSnNvbiIsIl9fUFJJVkFURV90b0ludGVnZXIiLCJNQVhfU0FGRV9JTlRFR0VSIiwiTUlOX1NBRkVfSU5URUdFUiIsImlzU2FmZUludGVnZXIiLCJUcmFuc2Zvcm1PcGVyYXRpb24iLCJfX1BSSVZBVEVfYXBwbHlUcmFuc2Zvcm1PcGVyYXRpb25Ub0xvY2FsVmlldyIsIl9fUFJJVkFURV9TZXJ2ZXJUaW1lc3RhbXBUcmFuc2Zvcm0iLCJfX1BSSVZBVEVfQXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbiIsIl9fUFJJVkFURV9hcHBseUFycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24iLCJfX1BSSVZBVEVfQXJyYXlSZW1vdmVUcmFuc2Zvcm1PcGVyYXRpb24iLCJfX1BSSVZBVEVfYXBwbHlBcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbiIsIl9fUFJJVkFURV9jb21wdXRlVHJhbnNmb3JtT3BlcmF0aW9uQmFzZVZhbHVlIiwiYXNOdW1iZXIiLCJQZSIsInNlcmlhbGl6ZXIiLCJfX1BSSVZBVEVfYXBwbHlUcmFuc2Zvcm1PcGVyYXRpb25Ub1JlbW90ZURvY3VtZW50IiwiX19QUklWQVRFX051bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24iLCJlbGVtZW50cyIsIl9fUFJJVkFURV9jb2VyY2VkRmllbGRWYWx1ZXNBcnJheSIsIk11dGF0aW9uUmVzdWx0IiwidHJhbnNmb3JtUmVzdWx0cyIsIlByZWNvbmRpdGlvbiIsInVwZGF0ZVRpbWUiLCJleGlzdHMiLCJub25lIiwiaXNOb25lIiwiX19QUklWQVRFX3ByZWNvbmRpdGlvbklzVmFsaWRGb3JEb2N1bWVudCIsIk11dGF0aW9uIiwiX19QUklWQVRFX2NhbGN1bGF0ZU92ZXJsYXlNdXRhdGlvbiIsIl9fUFJJVkFURV9EZWxldGVNdXRhdGlvbiIsIl9fUFJJVkFURV9TZXRNdXRhdGlvbiIsIl9fUFJJVkFURV9QYXRjaE11dGF0aW9uIiwiX19QUklWQVRFX211dGF0aW9uQXBwbHlUb1JlbW90ZURvY3VtZW50IiwiX19QUklWQVRFX3NlcnZlclRyYW5zZm9ybVJlc3VsdHMiLCJmaWVsZFRyYW5zZm9ybXMiLCJwcmVjb25kaXRpb24iLCJfX1BSSVZBVEVfZ2V0UGF0Y2giLCJfX1BSSVZBVEVfbXV0YXRpb25BcHBseVRvTG9jYWxWaWV3IiwiX19QUklWQVRFX2xvY2FsVHJhbnNmb3JtUmVzdWx0cyIsImZpZWxkTWFzayIsIl9fUFJJVkFURV9tdXRhdGlvbkV4dHJhY3RCYXNlVmFsdWUiLCJ0cmFuc2Zvcm0iLCJfX1BSSVZBVEVfbXV0YXRpb25FcXVhbHMiLCJfX1BSSVZBVEVfZmllbGRUcmFuc2Zvcm1FcXVhbHMiLCJnZXRGaWVsZE1hc2siLCJfX1BSSVZBVEVfVmVyaWZ5TXV0YXRpb24iLCJNdXRhdGlvbkJhdGNoIiwiYmF0Y2hJZCIsImxvY2FsV3JpdGVUaW1lIiwiYmFzZU11dGF0aW9ucyIsIm11dGF0aW9ucyIsImFwcGx5VG9SZW1vdGVEb2N1bWVudCIsIm11dGF0aW9uUmVzdWx0cyIsImFwcGx5VG9Mb2NhbFZpZXciLCJhcHBseVRvTG9jYWxEb2N1bWVudFNldCIsIm11dGF0ZWRGaWVsZHMiLCJNdXRhdGlvbkJhdGNoUmVzdWx0IiwiYmF0Y2giLCJjb21taXRWZXJzaW9uIiwiZG9jVmVyc2lvbnMiLCJPdmVybGF5IiwibXV0YXRpb24iLCJnZXRLZXkiLCJFeGlzdGVuY2VGaWx0ZXIiLCJ1bmNoYW5nZWROYW1lcyIsIl9fUFJJVkFURV9tYXBDb2RlRnJvbVJwY0NvZGUiLCJfX1BSSVZBVEVfZ2V0TWQ1SGFzaFZhbHVlIiwiVGV4dEVuY29kZXIiLCJlbmNvZGUiLCJfX1BSSVZBVEVfZ2V0NjRCaXRVaW50cyIsIkRhdGFWaWV3IiwiYnVmZmVyIiwiZ2V0VWludDMyIiwiQmxvb21GaWx0ZXIiLCJiaXRtYXAiLCJwYWRkaW5nIiwiaGFzaENvdW50IiwiX19QUklWQVRFX0Jsb29tRmlsdGVyRXJyb3IiLCJJZSIsIlRlIiwiRWUiLCJkZSIsIm1pZ2h0Q29udGFpbiIsIkFlIiwiUmVtb3RlRXZlbnQiLCJzbmFwc2hvdFZlcnNpb24iLCJ0YXJnZXRDaGFuZ2VzIiwidGFyZ2V0TWlzbWF0Y2hlcyIsImRvY3VtZW50VXBkYXRlcyIsInJlc29sdmVkTGltYm9Eb2N1bWVudHMiLCJjcmVhdGVTeW50aGVzaXplZFJlbW90ZUV2ZW50Rm9yQ3VycmVudENoYW5nZSIsIlRhcmdldENoYW5nZSIsImNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZSIsInJlc3VtZVRva2VuIiwiY3VycmVudCIsImFkZGVkRG9jdW1lbnRzIiwibW9kaWZpZWREb2N1bWVudHMiLCJyZW1vdmVkRG9jdW1lbnRzIiwiX19QUklWQVRFX0RvY3VtZW50V2F0Y2hDaGFuZ2UiLCJSZSIsInJlbW92ZWRUYXJnZXRJZHMiLCJWZSIsIl9fUFJJVkFURV9FeGlzdGVuY2VGaWx0ZXJDaGFuZ2UiLCJ0YXJnZXRJZCIsIm1lIiwiX19QUklWQVRFX1dhdGNoVGFyZ2V0Q2hhbmdlIiwidGFyZ2V0SWRzIiwiY2F1c2UiLCJfX1BSSVZBVEVfVGFyZ2V0U3RhdGUiLCJmZSIsImdlIiwiX19QUklWQVRFX3NuYXBzaG90Q2hhbmdlc01hcCIsInBlIiwieWUiLCJ3ZSIsIlNlIiwiYmUiLCJEZSIsIkNlIiwidmUiLCJGZSIsIk1lIiwieGUiLCJPZSIsIk5lIiwiX19QUklWQVRFX1dhdGNoQ2hhbmdlQWdncmVnYXRvciIsIkxlIiwiQmUiLCJrZSIsInFlIiwiX19QUklWQVRFX2RvY3VtZW50VGFyZ2V0TWFwIiwiUWUiLCJLZSIsIiRlIiwiVWUiLCJXZSIsImZvckVhY2hUYXJnZXQiLCJHZSIsInplIiwicmVtb3ZlVGFyZ2V0IiwiamUiLCJIZSIsIkplIiwiWWUiLCJaZSIsIlhlIiwiYml0cyIsIm50IiwiZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCIsInR0IiwicnQiLCJpdCIsInB1cnBvc2UiLCJzdCIsIm90IiwiYXNjIiwiZGVzYyIsImluIiwiSnNvblByb3RvU2VyaWFsaXplciIsIl9fUFJJVkFURV90b0ludDMyUHJvdG8iLCJfX1BSSVZBVEVfdG9CeXRlcyIsIl9fUFJJVkFURV90b1ZlcnNpb24iLCJfX1BSSVZBVEVfZnJvbVZlcnNpb24iLCJfX1BSSVZBVEVfdG9SZXNvdXJjZU5hbWUiLCJfX1BSSVZBVEVfdG9SZXNvdXJjZVBhdGgiLCJfX1BSSVZBVEVfZnJvbVJlc291cmNlTmFtZSIsIl9fUFJJVkFURV9pc1ZhbGlkUmVzb3VyY2VOYW1lIiwiX19QUklWQVRFX3RvTmFtZSIsIl9fUFJJVkFURV9leHRyYWN0TG9jYWxQYXRoRnJvbVJlc291cmNlTmFtZSIsIl9fUFJJVkFURV90b1F1ZXJ5UGF0aCIsIl9fUFJJVkFURV9nZXRFbmNvZGVkRGF0YWJhc2VJZCIsIl9fUFJJVkFURV90b011dGF0aW9uRG9jdW1lbnQiLCJfX1BSSVZBVEVfdG9Eb2N1bWVudHNUYXJnZXQiLCJkb2N1bWVudHMiLCJfX1BSSVZBVEVfdG9RdWVyeVRhcmdldCIsInN0cnVjdHVyZWRRdWVyeSIsImNvbGxlY3Rpb25JZCIsImFsbERlc2NlbmRhbnRzIiwicGFyZW50IiwiX19QUklWQVRFX3RvRmlsdGVyIiwid2hlcmUiLCJfX1BSSVZBVEVfdG9GaWVsZFBhdGhSZWZlcmVuY2UiLCJkaXJlY3Rpb24iLCJfX1BSSVZBVEVfdG9EaXJlY3Rpb24iLCJiZWZvcmUiLCJfdCIsIl9fUFJJVkFURV9jb252ZXJ0UXVlcnlUYXJnZXRUb1F1ZXJ5IiwiX19QUklWQVRFX2Zyb21RdWVyeVBhdGgiLCJfX1BSSVZBVEVfZnJvbUZpbHRlciIsIl9fUFJJVkFURV9mcm9tRmllbGRQYXRoUmVmZXJlbmNlIiwiX19QUklWQVRFX25ld1F1ZXJ5IiwidW5hcnlGaWx0ZXIiLCJmaWVsZEZpbHRlciIsImNvbXBvc2l0ZUZpbHRlciIsIl9fUFJJVkFURV90b09wZXJhdG9yTmFtZSIsIl9fUFJJVkFURV90b0NvbXBvc2l0ZU9wZXJhdG9yTmFtZSIsImZpZWxkUGF0aCIsIl9fUFJJVkFURV90b0RvY3VtZW50TWFzayIsImZpZWxkUGF0aHMiLCJUYXJnZXREYXRhIiwic2VxdWVuY2VOdW1iZXIiLCJsYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uIiwiZXhwZWN0ZWRDb3VudCIsIndpdGhTZXF1ZW5jZU51bWJlciIsIndpdGhSZXN1bWVUb2tlbiIsIndpdGhFeHBlY3RlZENvdW50Iiwid2l0aExhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24iLCJfX1BSSVZBVEVfTG9jYWxTZXJpYWxpemVyIiwiY3QiLCJfX1BSSVZBVEVfZnJvbUJ1bmRsZWRRdWVyeSIsIl9fUFJJVkFURV9GaXJlc3RvcmVJbmRleFZhbHVlV3JpdGVyIiwiUHQiLCJJdCIsIlR0IiwiRXQiLCJkdCIsIkF0IiwiUnQiLCJWdCIsImZ0IiwiZ3QiLCJ5dCIsInd0IiwiU3QiLCJidCIsIl9fUFJJVkFURV9NZW1vcnlJbmRleE1hbmFnZXIiLCJfbiIsIl9fUFJJVkFURV9NZW1vcnlDb2xsZWN0aW9uUGFyZW50SW5kZXgiLCJhZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCIsImdldENvbGxlY3Rpb25QYXJlbnRzIiwiZ2V0RW50cmllcyIsImFkZEZpZWxkSW5kZXgiLCJkZWxldGVGaWVsZEluZGV4IiwiZGVsZXRlQWxsRmllbGRJbmRleGVzIiwiY3JlYXRlVGFyZ2V0SW5kZXhlcyIsImdldERvY3VtZW50c01hdGNoaW5nVGFyZ2V0IiwiZ2V0SW5kZXhUeXBlIiwiZ2V0RmllbGRJbmRleGVzIiwiZ2V0TmV4dENvbGxlY3Rpb25Hcm91cFRvVXBkYXRlIiwiZ2V0TWluT2Zmc2V0IiwiZ2V0TWluT2Zmc2V0RnJvbUNvbGxlY3Rpb25Hcm91cCIsInVwZGF0ZUNvbGxlY3Rpb25Hcm91cCIsInVwZGF0ZUluZGV4RW50cmllcyIsIkxydVBhcmFtcyIsImNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQiLCJwZXJjZW50aWxlVG9Db2xsZWN0IiwibWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCIsIndpdGhDYWNoZVNpemUiLCJERUZBVUxUX0NPTExFQ1RJT05fUEVSQ0VOVElMRSIsIkRFRkFVTFRfTUFYX1NFUVVFTkNFX05VTUJFUlNfVE9fQ09MTEVDVCIsIkRFRkFVTFQiLCJESVNBQkxFRCIsIl9fUFJJVkFURV9UYXJnZXRJZEdlbmVyYXRvciIsIk9uIiwiTm4iLCJMbiIsIlJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyIiwiY2hhbmdlcyIsImNoYW5nZXNBcHBsaWVkIiwiYWRkRW50cnkiLCJhc3NlcnROb3RBcHBsaWVkIiwicmVtb3ZlRW50cnkiLCJnZXRFbnRyeSIsImdldEZyb21DYWNoZSIsImdldEFsbEZyb21DYWNoZSIsIk92ZXJsYXllZERvY3VtZW50IiwiTG9jYWxEb2N1bWVudHNWaWV3IiwicmVtb3RlRG9jdW1lbnRDYWNoZSIsIm11dGF0aW9uUXVldWUiLCJkb2N1bWVudE92ZXJsYXlDYWNoZSIsImluZGV4TWFuYWdlciIsImdldERvY3VtZW50IiwiZ2V0T3ZlcmxheSIsImdldERvY3VtZW50cyIsImdldExvY2FsVmlld09mRG9jdW1lbnRzIiwicG9wdWxhdGVPdmVybGF5cyIsImNvbXB1dGVWaWV3cyIsImdldE92ZXJsYXllZERvY3VtZW50cyIsImdldE92ZXJsYXlzIiwicmVjYWxjdWxhdGVBbmRTYXZlT3ZlcmxheXMiLCJnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleXMiLCJzYXZlT3ZlcmxheXMiLCJyZWNhbGN1bGF0ZUFuZFNhdmVPdmVybGF5c0ZvckRvY3VtZW50S2V5cyIsImdldERvY3VtZW50c01hdGNoaW5nUXVlcnkiLCJnZXREb2N1bWVudHNNYXRjaGluZ0RvY3VtZW50UXVlcnkiLCJfX1BSSVZBVEVfaXNDb2xsZWN0aW9uR3JvdXBRdWVyeSIsImdldERvY3VtZW50c01hdGNoaW5nQ29sbGVjdGlvbkdyb3VwUXVlcnkiLCJnZXREb2N1bWVudHNNYXRjaGluZ0NvbGxlY3Rpb25RdWVyeSIsImdldE5leHREb2N1bWVudHMiLCJnZXRBbGxGcm9tQ29sbGVjdGlvbkdyb3VwIiwiZ2V0T3ZlcmxheXNGb3JDb2xsZWN0aW9uR3JvdXAiLCJnZXRPdmVybGF5c0ZvckNvbGxlY3Rpb24iLCJfX1BSSVZBVEVfTWVtb3J5QnVuZGxlQ2FjaGUiLCJjciIsImxyIiwiZ2V0QnVuZGxlTWV0YWRhdGEiLCJzYXZlQnVuZGxlTWV0YWRhdGEiLCJnZXROYW1lZFF1ZXJ5Iiwic2F2ZU5hbWVkUXVlcnkiLCJxdWVyeSIsImJ1bmRsZWRRdWVyeSIsIl9fUFJJVkFURV9NZW1vcnlEb2N1bWVudE92ZXJsYXlDYWNoZSIsIm92ZXJsYXlzIiwiaHIiLCJodCIsInJlbW92ZU92ZXJsYXlzRm9yQmF0Y2hJZCIsIl9fUFJJVkFURV9SZWZlcmVuY2VTZXQiLCJQciIsIl9fUFJJVkFURV9Eb2NSZWZlcmVuY2UiLCJJciIsIlRyIiwiRXIiLCJhZGRSZWZlcmVuY2UiLCJkciIsInJlbW92ZVJlZmVyZW5jZSIsIkFyIiwiUnIiLCJWciIsIm1yIiwiZ3IiLCJjb250YWluc0tleSIsInByIiwiX19QUklWQVRFX01lbW9yeU11dGF0aW9uUXVldWUiLCJyZWZlcmVuY2VEZWxlZ2F0ZSIsInlyIiwid3IiLCJjaGVja0VtcHR5IiwiYWRkTXV0YXRpb25CYXRjaCIsImxvb2t1cE11dGF0aW9uQmF0Y2giLCJTciIsImdldE5leHRNdXRhdGlvbkJhdGNoQWZ0ZXJCYXRjaElkIiwiYnIiLCJnZXRIaWdoZXN0VW5hY2tub3dsZWRnZWRCYXRjaElkIiwiZ2V0QWxsTXV0YXRpb25CYXRjaGVzIiwiZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXkiLCJQT1NJVElWRV9JTkZJTklUWSIsIkRyIiwiZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nUXVlcnkiLCJyZW1vdmVNdXRhdGlvbkJhdGNoIiwiQ3IiLCJtYXJrUG90ZW50aWFsbHlPcnBoYW5lZCIsIk1uIiwicGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2siLCJfX1BSSVZBVEVfTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZUltcGwiLCJ2ciIsImRvY3MiLCJzZXRJbmRleE1hbmFnZXIiLCJGciIsIm5ld0NoYW5nZUJ1ZmZlciIsIl9fUFJJVkFURV9NZW1vcnlSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlciIsImdldFNpemUiLCJhciIsIl9fUFJJVkFURV9NZW1vcnlUYXJnZXRDYWNoZSIsInBlcnNpc3RlbmNlIiwiTXIiLCJsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uIiwiaGlnaGVzdFRhcmdldElkIiwiT3IiLCJOciIsInRhcmdldENvdW50IiwiTHIiLCJnZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uIiwiZ2V0SGlnaGVzdFNlcXVlbmNlTnVtYmVyIiwiYWxsb2NhdGVUYXJnZXRJZCIsInNldFRhcmdldHNNZXRhZGF0YSIsInFuIiwiYWRkVGFyZ2V0RGF0YSIsInVwZGF0ZVRhcmdldERhdGEiLCJyZW1vdmVUYXJnZXREYXRhIiwicmVtb3ZlVGFyZ2V0cyIsInJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkIiwiZ2V0VGFyZ2V0Q291bnQiLCJnZXRUYXJnZXREYXRhIiwiYWRkTWF0Y2hpbmdLZXlzIiwicmVtb3ZlTWF0Y2hpbmdLZXlzIiwiZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQiLCJfX1BSSVZBVEVfTWVtb3J5UGVyc2lzdGVuY2UiLCJCciIsImtyIiwicXIiLCJRciIsIktyIiwiJHIiLCJzdGFydGVkIiwic2V0RGF0YWJhc2VEZWxldGVkTGlzdGVuZXIiLCJzZXROZXR3b3JrRW5hYmxlZCIsImdldEluZGV4TWFuYWdlciIsImdldERvY3VtZW50T3ZlcmxheUNhY2hlIiwiZ2V0TXV0YXRpb25RdWV1ZSIsImdldFRhcmdldENhY2hlIiwiZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSIsImdldEJ1bmRsZUNhY2hlIiwicnVuVHJhbnNhY3Rpb24iLCJfX1BSSVZBVEVfTWVtb3J5VHJhbnNhY3Rpb24iLCJVciIsIldyIiwiR3IiLCJjdXJyZW50U2VxdWVuY2VOdW1iZXIiLCJfX1BSSVZBVEVfTWVtb3J5RWFnZXJEZWxlZ2F0ZSIsInpyIiwianIiLCJIciIsIkpyIiwiWXIiLCJ1cGRhdGVMaW1ib0RvY3VtZW50IiwiX19QUklWQVRFX0xvY2FsVmlld0NoYW5nZXMiLCJmcm9tQ2FjaGUiLCJxaSIsIlFpIiwiS2kiLCJkb2NDaGFuZ2VzIiwiZG9jIiwiUXVlcnlDb250ZXh0IiwiX2RvY3VtZW50UmVhZENvdW50IiwiZG9jdW1lbnRSZWFkQ291bnQiLCJpbmNyZW1lbnREb2N1bWVudFJlYWRDb3VudCIsIl9fUFJJVkFURV9RdWVyeUVuZ2luZSIsIiRpIiwiVWkiLCJXaSIsIkdpIiwiZm9yY2VFbnZpcm9ubWVudCIsImlzTm9kZSIsIl9fUFJJVkFURV9nZXRBbmRyb2lkVmVyc2lvbiIsInppIiwiamkiLCJIaSIsIkppIiwiWWkiLCJaaSIsIlhpIiwiZXMiLCJfX1BSSVZBVEVfbmV3SW5kZXhPZmZzZXRTdWNjZXNzb3JGcm9tUmVhZFRpbWUiLCJfX1BSSVZBVEVfTG9jYWxTdG9yZUltcGwiLCJ0cyIsIm5zIiwicnMiLCJzcyIsIm9zIiwiX3MiLCJsb2NhbERvY3VtZW50cyIsImNvbGxlY3RHYXJiYWdlIiwiY29sbGVjdCIsIl9fUFJJVkFURV9sb2NhbFN0b3JlSGFuZGxlVXNlckNoYW5nZSIsInVzIiwicmVtb3ZlZEJhdGNoSWRzIiwiYWRkZWRCYXRjaElkcyIsIl9fUFJJVkFURV9sb2NhbFN0b3JlR2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiIsIl9fUFJJVkFURV9sb2NhbFN0b3JlR2V0TmV4dE11dGF0aW9uQmF0Y2giLCJfX1BSSVZBVEVfbG9jYWxTdG9yZVJlbGVhc2VUYXJnZXQiLCJfX1BSSVZBVEVfbG9jYWxTdG9yZUV4ZWN1dGVRdWVyeSIsIl9fUFJJVkFURV9zZXRNYXhSZWFkVGltZSIsIl9fUFJJVkFURV9xdWVyeUNvbGxlY3Rpb25Hcm91cCIsImhzIiwiX19QUklWQVRFX0xvY2FsQ2xpZW50U3RhdGUiLCJhY3RpdmVUYXJnZXRJZHMiLCJBcyIsIlJzIiwiZHMiLCJ1cGRhdGVUaW1lTXMiLCJfX1BSSVZBVEVfTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGUiLCJubyIsInJvIiwib25saW5lU3RhdGVIYW5kbGVyIiwiYWRkUGVuZGluZ011dGF0aW9uIiwidXBkYXRlTXV0YXRpb25TdGF0ZSIsImFkZExvY2FsUXVlcnlUYXJnZXQiLCJ1cGRhdGVRdWVyeVN0YXRlIiwicmVtb3ZlTG9jYWxRdWVyeVRhcmdldCIsImlzTG9jYWxRdWVyeVRhcmdldCIsImNsZWFyUXVlcnlTdGF0ZSIsImdldEFsbEFjdGl2ZVF1ZXJ5VGFyZ2V0cyIsImlzQWN0aXZlUXVlcnlUYXJnZXQiLCJoYW5kbGVVc2VyQ2hhbmdlIiwic2V0T25saW5lU3RhdGUiLCJub3RpZnlCdW5kbGVMb2FkZWQiLCJfX1BSSVZBVEVfTm9vcENvbm5lY3Rpdml0eU1vbml0b3IiLCJpbyIsIl9fUFJJVkFURV9Ccm93c2VyQ29ubmVjdGl2aXR5TW9uaXRvciIsInNvIiwib28iLCJfbyIsImFvIiwidW8iLCJjbyIsIl9fUFJJVkFURV9nZW5lcmF0ZVVuaXF1ZURlYnVnSWQiLCJCYXRjaEdldERvY3VtZW50cyIsIkNvbW1pdCIsIlJ1blF1ZXJ5IiwiUnVuQWdncmVnYXRpb25RdWVyeSIsIl9fUFJJVkFURV9TdHJlYW1CcmlkZ2UiLCJsbyIsImhvIiwiUG8iLCJJbyIsIlRvIiwiRW8iLCJBbyIsIlJvIiwib25NZXNzYWdlIiwiVm8iLCJtbyIsImZvIiwicG8iLCJ5byIsIl9fUFJJVkFURV9XZWJDaGFubmVsQ29ubmVjdGlvbiIsImRhdGFiYXNlSW5mbyIsIndvIiwiU28iLCJibyIsIkRvIiwiQ28iLCJ2byIsIkZvIiwiTW8iLCJ4byIsInRlcm1pbmF0ZSIsIk9vIiwiZm9yd2FyZENoYW5uZWxSZXF1ZXN0VGltZW91dE1zIiwidGltZW91dFNlY29uZHMiLCJfX1BSSVZBVEVfdW5ndWFyZGVkRXZlbnRMaXN0ZW4iLCJfX1BSSVZBVEVfbmV3U2VyaWFsaXplciIsIl9fUFJJVkFURV9FeHBvbmVudGlhbEJhY2tvZmYiLCJvaSIsInRpbWVySWQiLCJObyIsIkxvIiwiQm8iLCJrbyIsInFvIiwiUW8iLCJLbyIsIiRvIiwiVW8iLCJlbnF1ZXVlQWZ0ZXJEZWxheSIsIldvIiwic2tpcERlbGF5IiwiX19QUklWQVRFX1BlcnNpc3RlbnRTdHJlYW0iLCJHbyIsInpvIiwiY29ubmVjdGlvbiIsImF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyIiwiYXBwQ2hlY2tDcmVkZW50aWFsc1Byb3ZpZGVyIiwiam8iLCJIbyIsIkpvIiwiWW8iLCJabyIsIlhvIiwiZV8iLCJzdG9wIiwidF8iLCJuXyIsInJfIiwiaV8iLCJzXyIsIm9fIiwiX18iLCJhXyIsInVfIiwiY18iLCJsXyIsImVucXVldWVBbmRGb3JnZXQiLCJfX1BSSVZBVEVfUGVyc2lzdGVudExpc3RlblN0cmVhbSIsInRhcmdldENoYW5nZSIsInRhcmdldENoYW5nZVR5cGUiLCJCdWZmZXIiLCJkb2N1bWVudENoYW5nZSIsImRvY3VtZW50RGVsZXRlIiwiZG9jdW1lbnRSZW1vdmUiLCJfX1BSSVZBVEVfZnJvbVdhdGNoQ2hhbmdlIiwiaF8iLCJQXyIsImFkZFRhcmdldCIsIl9fUFJJVkFURV90b0xpc3RlblJlcXVlc3RMYWJlbHMiLCJsYWJlbHMiLCJJXyIsIl9fUFJJVkFURV9QZXJzaXN0ZW50V3JpdGVTdHJlYW0iLCJUXyIsIkVfIiwibGFzdFN0cmVhbVRva2VuIiwiZF8iLCJzdHJlYW1Ub2tlbiIsIl9fUFJJVkFURV9mcm9tV3JpdGVSZXN1bHRzIiwid3JpdGVSZXN1bHRzIiwiY29tbWl0VGltZSIsIkFfIiwiUl8iLCJWXyIsIndyaXRlcyIsInVwZGF0ZU1hc2siLCJ2ZXJpZnkiLCJ1cGRhdGVUcmFuc2Zvcm1zIiwic2V0VG9TZXJ2ZXJWYWx1ZSIsImFwcGVuZE1pc3NpbmdFbGVtZW50cyIsInJlbW92ZUFsbEZyb21BcnJheSIsImluY3JlbWVudCIsImN1cnJlbnREb2N1bWVudCIsInRvTXV0YXRpb24iLCJfX1BSSVZBVEVfRGF0YXN0b3JlSW1wbCIsImF1dGhDcmVkZW50aWFscyIsImFwcENoZWNrQ3JlZGVudGlhbHMiLCJtXyIsImZfIiwiX19QUklWQVRFX09ubGluZVN0YXRlVHJhY2tlciIsImFzeW5jUXVldWUiLCJnXyIsInBfIiwieV8iLCJ3XyIsIlNfIiwiYl8iLCJEXyIsIkNfIiwiX19QUklWQVRFX1JlbW90ZVN0b3JlSW1wbCIsImxvY2FsU3RvcmUiLCJkYXRhc3RvcmUiLCJyZW1vdGVTeW5jZXIiLCJ2XyIsIkZfIiwiTV8iLCJ4XyIsIk9fIiwiX19QUklWQVRFX2NhblVzZU5ldHdvcmsiLCJfX1BSSVZBVEVfZGlzYWJsZU5ldHdvcmtJbnRlcm5hbCIsIk5fIiwiX19QUklWQVRFX2VuYWJsZU5ldHdvcmtJbnRlcm5hbCIsIl9fUFJJVkFURV9yZW1vdGVTdG9yZUxpc3RlbiIsIl9fUFJJVkFURV9zaG91bGRTdGFydFdhdGNoU3RyZWFtIiwiX19QUklWQVRFX3N0YXJ0V2F0Y2hTdHJlYW0iLCJfX1BSSVZBVEVfZW5zdXJlV2F0Y2hTdHJlYW0iLCJfX1BSSVZBVEVfc2VuZFdhdGNoUmVxdWVzdCIsIl9fUFJJVkFURV9yZW1vdGVTdG9yZVVubGlzdGVuIiwiX19QUklWQVRFX3NlbmRVbndhdGNoUmVxdWVzdCIsIkxfIiwiX19QUklWQVRFX2NsZWFuVXBXYXRjaFN0cmVhbVN0YXRlIiwiX19QUklWQVRFX29uV2F0Y2hTdHJlYW1Db25uZWN0ZWQiLCJfX1BSSVZBVEVfb25XYXRjaFN0cmVhbU9wZW4iLCJfX1BSSVZBVEVfb25XYXRjaFN0cmVhbUNsb3NlIiwiX19QUklWQVRFX29uV2F0Y2hTdHJlYW1DaGFuZ2UiLCJyZWplY3RMaXN0ZW4iLCJfX1BSSVZBVEVfZGlzYWJsZU5ldHdvcmtVbnRpbFJlY292ZXJ5IiwiYXBwbHlSZW1vdGVFdmVudCIsIl9fUFJJVkFURV9leGVjdXRlV2l0aFJlY292ZXJ5IiwiX19QUklWQVRFX2ZpbGxXcml0ZVBpcGVsaW5lIiwiX19QUklWQVRFX2Vuc3VyZVdyaXRlU3RyZWFtIiwiX19QUklWQVRFX2NhbkFkZFRvV3JpdGVQaXBlbGluZSIsIl9fUFJJVkFURV9hZGRUb1dyaXRlUGlwZWxpbmUiLCJfX1BSSVZBVEVfc2hvdWxkU3RhcnRXcml0ZVN0cmVhbSIsIl9fUFJJVkFURV9zdGFydFdyaXRlU3RyZWFtIiwiX19QUklWQVRFX29uV3JpdGVTdHJlYW1PcGVuIiwiX19QUklWQVRFX29uV3JpdGVIYW5kc2hha2VDb21wbGV0ZSIsIl9fUFJJVkFURV9vbk11dGF0aW9uUmVzdWx0IiwiYXBwbHlTdWNjZXNzZnVsV3JpdGUiLCJfX1BSSVZBVEVfb25Xcml0ZVN0cmVhbUNsb3NlIiwiX19QUklWQVRFX2lzUGVybWFuZW50RXJyb3IiLCJyZWplY3RGYWlsZWRXcml0ZSIsIl9fUFJJVkFURV9yZW1vdGVTdG9yZUhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UiLCJ2ZXJpZnlPcGVyYXRpb25JblByb2dyZXNzIiwiaGFuZGxlQ3JlZGVudGlhbENoYW5nZSIsIkJfIiwia18iLCJEZWxheWVkT3BlcmF0aW9uIiwidGFyZ2V0VGltZU1zIiwicmVtb3ZhbENhbGxiYWNrIiwiY3JlYXRlQW5kU2NoZWR1bGUiLCJ0aW1lckhhbmRsZSIsImhhbmRsZURlbGF5RWxhcHNlZCIsIl9fUFJJVkFURV93cmFwSW5Vc2VyRXJyb3JJZlJlY292ZXJhYmxlIiwiRG9jdW1lbnRTZXQiLCJrZXllZE1hcCIsInNvcnRlZFNldCIsImVtcHR5U2V0IiwiX19QUklWQVRFX0RvY3VtZW50Q2hhbmdlU2V0IiwicV8iLCJ0cmFjayIsIlFfIiwiVmlld1NuYXBzaG90Iiwib2xkRG9jcyIsIm11dGF0ZWRLZXlzIiwic3luY1N0YXRlQ2hhbmdlZCIsImV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzIiwiaGFzQ2FjaGVkUmVzdWx0cyIsImZyb21Jbml0aWFsRG9jdW1lbnRzIiwiX19QUklWQVRFX1F1ZXJ5TGlzdGVuZXJzSW5mbyIsIktfIiwiVV8iLCJXXyIsIkdfIiwiX19QUklWQVRFX0V2ZW50TWFuYWdlckltcGwiLCJxdWVyaWVzIiwib25saW5lU3RhdGUiLCJ6XyIsIl9fUFJJVkFURV9ldmVudE1hbmFnZXJMaXN0ZW4iLCJvbkxpc3RlbiIsIm9uRmlyc3RSZW1vdGVTdG9yZUxpc3RlbiIsIm9uRXJyb3IiLCJqXyIsIkhfIiwiX19QUklWQVRFX3JhaXNlU25hcHNob3RzSW5TeW5jRXZlbnQiLCJfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyT25XYXRjaENoYW5nZSIsIl9fUFJJVkFURV9ldmVudE1hbmFnZXJPbldhdGNoRXJyb3IiLCJKXyIsIkNhY2hlIiwiX19QUklWQVRFX1F1ZXJ5TGlzdGVuZXIiLCJZXyIsIlpfIiwiWF8iLCJpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzIiwic291cmNlIiwiX19QUklWQVRFX0FkZGVkTGltYm9Eb2N1bWVudCIsIl9fUFJJVkFURV9SZW1vdmVkTGltYm9Eb2N1bWVudCIsIl9fUFJJVkFURV9WaWV3Iiwib3JkZXIiLCJzbmFwc2hvdCIsIl9fUFJJVkFURV9RdWVyeVZpZXciLCJ2aWV3IiwiTGltYm9SZXNvbHV0aW9uIiwiX19QUklWQVRFX1N5bmNFbmdpbmVJbXBsIiwicmVtb3RlU3RvcmUiLCJldmVudE1hbmFnZXIiLCJzaGFyZWRDbGllbnRTdGF0ZSIsIm1heENvbmN1cnJlbnRMaW1ib1Jlc29sdXRpb25zIiwiaXNQcmltYXJ5Q2xpZW50IiwiX19QUklWQVRFX3N5bmNFbmdpbmVMaXN0ZW4iLCJfX1BSSVZBVEVfZW5zdXJlV2F0Y2hDYWxsYmFja3MiLCJfX1BSSVZBVEVfYWxsb2NhdGVUYXJnZXRBbmRNYXliZUxpc3RlbiIsIl9fUFJJVkFURV90cmlnZ2VyUmVtb3RlU3RvcmVMaXN0ZW4iLCJfX1BSSVZBVEVfbG9jYWxTdG9yZUFsbG9jYXRlVGFyZ2V0IiwiX19QUklWQVRFX3VwZGF0ZVRyYWNrZWRMaW1ib3MiLCJfX1BSSVZBVEVfaW5pdGlhbGl6ZVZpZXdBbmRDb21wdXRlU25hcHNob3QiLCJfX1BSSVZBVEVfc3luY0VuZ2luZVVubGlzdGVuIiwiX19QUklWQVRFX3JlbW92ZUFuZENsZWFudXBUYXJnZXQiLCJfX1BSSVZBVEVfdHJpZ2dlclJlbW90ZVN0b3JlVW5saXN0ZW4iLCJfX1BSSVZBVEVfc3luY0VuZ2luZUFwcGx5UmVtb3RlRXZlbnQiLCJ0cmFja1JlbW92YWxzIiwiY3MiLCJscyIsIl9fUFJJVkFURV9wb3B1bGF0ZURvY3VtZW50Q2hhbmdlQnVmZmVyIiwiX19QUklWQVRFX2xvY2FsU3RvcmVBcHBseVJlbW90ZUV2ZW50VG9Mb2NhbENhY2hlIiwiX19QUklWQVRFX3N5bmNFbmdpbmVFbWl0TmV3U25hcHNBbmROb3RpZnlMb2NhbFN0b3JlIiwiX19QUklWQVRFX3N5bmNFbmdpbmVBcHBseU9ubGluZVN0YXRlQ2hhbmdlIiwiX19QUklWQVRFX3N5bmNFbmdpbmVSZWplY3RMaXN0ZW4iLCJfX1BSSVZBVEVfcHVtcEVucXVldWVkTGltYm9SZXNvbHV0aW9ucyIsIl9fUFJJVkFURV9zeW5jRW5naW5lQXBwbHlTdWNjZXNzZnVsV3JpdGUiLCJfX1BSSVZBVEVfbG9jYWxTdG9yZUFja25vd2xlZGdlQmF0Y2giLCJfX1BSSVZBVEVfcHJvY2Vzc1VzZXJDYWxsYmFjayIsIl9fUFJJVkFURV90cmlnZ2VyUGVuZGluZ1dyaXRlc0NhbGxiYWNrcyIsIl9fUFJJVkFURV9zeW5jRW5naW5lUmVqZWN0RmFpbGVkV3JpdGUiLCJfX1BSSVZBVEVfcmVtb3ZlTGltYm9UYXJnZXQiLCJfX1BSSVZBVEVfdHJhY2tMaW1ib0NoYW5nZSIsIl9fUFJJVkFURV9zeW5jRW5naW5lSGFuZGxlQ3JlZGVudGlhbENoYW5nZSIsIl9fUFJJVkFURV9zeW5jRW5naW5lR2V0UmVtb3RlS2V5c0ZvclRhcmdldCIsIl9fUFJJVkFURV9zeW5jRW5naW5lRW5zdXJlV3JpdGVDYWxsYmFja3MiLCJNZW1vcnlPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIiLCJzeW5jaHJvbml6ZVRhYnMiLCJjcmVhdGVTaGFyZWRDbGllbnRTdGF0ZSIsImNyZWF0ZVBlcnNpc3RlbmNlIiwiY3JlYXRlTG9jYWxTdG9yZSIsImdjU2NoZWR1bGVyIiwiY3JlYXRlR2FyYmFnZUNvbGxlY3Rpb25TY2hlZHVsZXIiLCJpbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIiLCJjcmVhdGVJbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIiLCJfX1BSSVZBVEVfbmV3TG9jYWxTdG9yZSIsImluaXRpYWxVc2VyIiwiT25saW5lQ29tcG9uZW50UHJvdmlkZXIiLCJjcmVhdGVEYXRhc3RvcmUiLCJjcmVhdGVSZW1vdGVTdG9yZSIsImNyZWF0ZUV2ZW50TWFuYWdlciIsInN5bmNFbmdpbmUiLCJjcmVhdGVTeW5jRW5naW5lIiwiX19QUklWQVRFX3JlbW90ZVN0b3JlQXBwbHlQcmltYXJ5U3RhdGUiLCJfX1BSSVZBVEVfQXN5bmNPYnNlcnZlciIsIm11dGVkIiwiRmlyZXN0b3JlQ2xpZW50IiwiY2xpZW50SWQiLCJhdXRoQ3JlZGVudGlhbExpc3RlbmVyIiwiYXBwQ2hlY2tDcmVkZW50aWFsTGlzdGVuZXIiLCJjb25maWd1cmF0aW9uIiwic2V0Q3JlZGVudGlhbENoYW5nZUxpc3RlbmVyIiwic2V0QXBwQ2hlY2tUb2tlbkNoYW5nZUxpc3RlbmVyIiwidmVyaWZ5Tm90VGVybWluYXRlZCIsImlzU2h1dHRpbmdEb3duIiwiZW50ZXJSZXN0cmljdGVkTW9kZSIsImVucXVldWVBbmRGb3JnZXRFdmVuV2hpbGVSZXN0cmljdGVkIiwiX29ubGluZUNvbXBvbmVudHMiLCJfb2ZmbGluZUNvbXBvbmVudHMiLCJfX1BSSVZBVEVfc2V0T2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyIiwiX19QUklWQVRFX3NldE9ubGluZUNvbXBvbmVudFByb3ZpZGVyIiwiX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIiLCJfb2ZmbGluZSIsIl9fUFJJVkFURV9jYW5GYWxsYmFja0Zyb21JbmRleGVkRGJFcnJvciIsIl9fUFJJVkFURV9lbnN1cmVPZmZsaW5lQ29tcG9uZW50cyIsIl9fUFJJVkFURV9lbnN1cmVPbmxpbmVDb21wb25lbnRzIiwiX29ubGluZSIsIl9fUFJJVkFURV9nZXRFdmVudE1hbmFnZXIiLCJvblVubGlzdGVuIiwib25MYXN0UmVtb3RlU3RvcmVVbmxpc3RlbiIsIl9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRHZXREb2N1bWVudFZpYVNuYXBzaG90TGlzdGVuZXIiLCJfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyVW5saXN0ZW4iLCJfX1BSSVZBVEVfY2xvbmVMb25nUG9sbGluZ09wdGlvbnMiLCJfX1BSSVZBVEVfdmFsaWRhdGVOb25FbXB0eUFyZ3VtZW50IiwiX19QUklWQVRFX3ZhbGlkYXRlRG9jdW1lbnRQYXRoIiwiX19QUklWQVRFX3ZhbGlkYXRlQ29sbGVjdGlvblBhdGgiLCJfX1BSSVZBVEVfdmFsdWVEZXNjcmlwdGlvbiIsIl9fUFJJVkFURV9jYXN0IiwiRmlyZXN0b3JlU2V0dGluZ3NJbXBsIiwiaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyIsImxvY2FsQ2FjaGUiLCJjYWNoZVNpemVCeXRlcyIsIl9fUFJJVkFURV92YWxpZGF0ZUlzTm90VXNlZFRvZ2V0aGVyIiwiZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyIsImV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyIsImV4cGVyaW1lbnRhbExvbmdQb2xsaW5nT3B0aW9ucyIsIkZpcmVzdG9yZSQxIiwiX2F1dGhDcmVkZW50aWFscyIsIl9hcHBDaGVja0NyZWRlbnRpYWxzIiwiX2RhdGFiYXNlSWQiLCJfYXBwIiwiX3BlcnNpc3RlbmNlS2V5IiwiX3NldHRpbmdzIiwiX3NldHRpbmdzRnJvemVuIiwiX2luaXRpYWxpemVkIiwiX3Rlcm1pbmF0ZWQiLCJfdGVybWluYXRlVGFzayIsIl9zZXRTZXR0aW5ncyIsInNlc3Npb25JbmRleCIsImlhbVRva2VuIiwiYXV0aFRva2VuRmFjdG9yeSIsImNsaWVudCIsIl9nZXRTZXR0aW5ncyIsIl9mcmVlemVTZXR0aW5ncyIsIl90ZXJtaW5hdGUiLCJRdWVyeSIsImNvbnZlcnRlciIsIl9xdWVyeSIsImZpcmVzdG9yZSIsIndpdGhDb252ZXJ0ZXIiLCJEb2N1bWVudFJlZmVyZW5jZSIsIl9rZXkiLCJfcGF0aCIsIkNvbGxlY3Rpb25SZWZlcmVuY2UiLCJjb2xsZWN0aW9uIiwiX19QUklWQVRFX0FzeW5jUXVldWVJbXBsIiwiaXUiLCJzdSIsIm91IiwiX3UiLCJhdSIsInV1IiwiY3UiLCJsdSIsImh1IiwidmlzaWJpbGl0eVN0YXRlIiwiZW5xdWV1ZSIsIlB1IiwiSXUiLCJUdSIsInN0YWNrIiwiRXUiLCJkdSIsIkF1IiwiUnUiLCJWdSIsIl9fUFJJVkFURV9pc1BhcnRpYWxPYnNlcnZlciIsIkZpcmVzdG9yZSIsIl9xdWV1ZSIsIl9maXJlc3RvcmVDbGllbnQiLCJfX1BSSVZBVEVfY29uZmlndXJlRmlyZXN0b3JlIiwiZ2V0RmlyZXN0b3JlIiwic2VwYXJhdG9ySW5kZXgiLCJsYXN0SW5kZXhPZiIsImdldERlZmF1bHRFbXVsYXRvckhvc3RuYW1lQW5kUG9ydCIsIm1vY2tVc2VyVG9rZW4iLCJwcm9qZWN0IiwiaWF0Iiwic3ViIiwidXNlcl9pZCIsInBheWxvYWQiLCJpc3MiLCJhdWQiLCJleHAiLCJhdXRoX3RpbWUiLCJmaXJlYmFzZSIsInNpZ25faW5fcHJvdmlkZXIiLCJpZGVudGl0aWVzIiwiYWxnIiwiY3JlYXRlTW9ja1VzZXJUb2tlbiIsImNvbm5lY3RGaXJlc3RvcmVFbXVsYXRvciIsImVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQiLCJfb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyIiwiX29ubGluZUNvbXBvbmVudFByb3ZpZGVyIiwiX29mZmxpbmVLaW5kIiwia2luZCIsIkJ5dGVzIiwiX2J5dGVTdHJpbmciLCJGaWVsZFBhdGgiLCJfaW50ZXJuYWxQYXRoIiwiRmllbGRWYWx1ZSIsIl9tZXRob2ROYW1lIiwiR2VvUG9pbnQiLCJfbGF0IiwiX2xvbmciLCJQYXJzZWRTZXREYXRhIiwiUGFyc2VkVXBkYXRlRGF0YSIsIl9fUFJJVkFURV9pc1dyaXRlIiwiX19QUklWQVRFX1BhcnNlQ29udGV4dEltcGwiLCJtdSIsImZ1IiwiZ3UiLCJwdSIsInl1Iiwid3UiLCJTdSIsImJ1IiwiRHUiLCJfX1BSSVZBVEVfY3JlYXRlRXJyb3IiLCJtZXRob2ROYW1lIiwiQ3UiLCJ2dSIsImNvbnRhaW5zIiwiX19QUklWQVRFX1VzZXJEYXRhUmVhZGVyIiwiRnUiLCJfX1BSSVZBVEVfbmV3VXNlckRhdGFSZWFkZXIiLCJfX1BSSVZBVEVfcGFyc2VTZXREYXRhIiwibWVyZ2UiLCJtZXJnZUZpZWxkcyIsIl9fUFJJVkFURV92YWxpZGF0ZVBsYWluT2JqZWN0IiwiX19QUklWQVRFX3BhcnNlT2JqZWN0IiwiX19QUklWQVRFX2ZpZWxkUGF0aEZyb21Bcmd1bWVudCQxIiwiX19QUklWQVRFX2ZpZWxkTWFza0NvbnRhaW5zIiwiX19QUklWQVRFX0RlbGV0ZUZpZWxkVmFsdWVJbXBsIiwiX3RvRmllbGRUcmFuc2Zvcm0iLCJfX1BSSVZBVEVfcGFyc2VEYXRhIiwiX19QUklWQVRFX2xvb2tzTGlrZUpzb25PYmplY3QiLCJfX1BSSVZBVEVfZmllbGRQYXRoRnJvbURvdFNlcGFyYXRlZFN0cmluZyIsInNlYXJjaCIsIkRvY3VtZW50U25hcHNob3QkMSIsIl9maXJlc3RvcmUiLCJfdXNlckRhdGFXcml0ZXIiLCJfZG9jdW1lbnQiLCJfY29udmVydGVyIiwicmVmIiwiUXVlcnlEb2N1bWVudFNuYXBzaG90JDEiLCJmcm9tRmlyZXN0b3JlIiwiY29udmVydFZhbHVlIiwiX19QUklWQVRFX2ZpZWxkUGF0aEZyb21Bcmd1bWVudCIsIkFic3RyYWN0VXNlckRhdGFXcml0ZXIiLCJjb252ZXJ0VGltZXN0YW1wIiwiY29udmVydFNlcnZlclRpbWVzdGFtcCIsImNvbnZlcnRCeXRlcyIsImNvbnZlcnRSZWZlcmVuY2UiLCJjb252ZXJ0R2VvUG9pbnQiLCJjb252ZXJ0QXJyYXkiLCJjb252ZXJ0T2JqZWN0IiwiY29udmVydE9iamVjdE1hcCIsImNvbnZlcnREb2N1bWVudEtleSIsIl9fUFJJVkFURV9hcHBseUZpcmVzdG9yZURhdGFDb252ZXJ0ZXIiLCJ0b0ZpcmVzdG9yZSIsIlNuYXBzaG90TWV0YWRhdGEiLCJEb2N1bWVudFNuYXBzaG90IiwiX2ZpcmVzdG9yZUltcGwiLCJtZXRhZGF0YSIsIlF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCIsInNlcnZlclRpbWVzdGFtcHMiLCJRdWVyeVNuYXBzaG90IiwiX3NuYXBzaG90IiwiX2NhY2hlZENoYW5nZXMiLCJfY2FjaGVkQ2hhbmdlc0luY2x1ZGVNZXRhZGF0YUNoYW5nZXMiLCJvbGRJbmRleCIsIm5ld0luZGV4IiwiX19QUklWQVRFX3Jlc3VsdENoYW5nZVR5cGUiLCJfX1BSSVZBVEVfRXhwVXNlckRhdGFXcml0ZXIiLCJ1cGRhdGVEb2MiLCJfX1BSSVZBVEVfcGFyc2VVcGRhdGVWYXJhcmdzIiwiX19QUklWQVRFX3BhcnNlVXBkYXRlRGF0YSIsImV4ZWN1dGVXcml0ZSIsIl9fUFJJVkFURV9zeW5jRW5naW5lV3JpdGUiLCJfX1BSSVZBVEVfZ2V0U3luY0VuZ2luZSIsIl9fUFJJVkFURV9jb252ZXJ0VG9Eb2NTbmFwc2hvdCIsIl9fcmVzdCIsImdldE93blByb3BlcnR5U3ltYm9scyIsInByb3BlcnR5SXNFbnVtZXJhYmxlIiwiU3VwcHJlc3NlZEVycm9yIiwicHJvZEVycm9yTWFwIiwiX0RFRkFVTFRfQVVUSF9FUlJPUl9GQUNUT1JZIiwibG9nQ2xpZW50IiwiX2xvZ0Vycm9yIiwibXNnIiwiX2ZhaWwiLCJhdXRoT3JDb2RlIiwiY3JlYXRlRXJyb3JJbnRlcm5hbCIsIl9jcmVhdGVFcnJvciIsIl9lcnJvcldpdGhDdXN0b21NZXNzYWdlIiwiZXJyb3JNYXAiLCJfc2VydmVyQXBwQ3VycmVudFVzZXJPcGVyYXRpb25Ob3RTdXBwb3J0ZWRFcnJvciIsImZ1bGxQYXJhbXMiLCJfZXJyb3JGYWN0b3J5IiwiX2Fzc2VydCIsImFzc2VydGlvbiIsImRlYnVnRmFpbCIsImZhaWx1cmUiLCJkZWJ1Z0Fzc2VydCIsIl9nZXRDdXJyZW50VXJsIiwiX2dldEN1cnJlbnRTY2hlbWUiLCJfaXNPbmxpbmUiLCJvbkxpbmUiLCJydW50aW1lIiwiYnJvd3NlciIsImlzQnJvd3NlckV4dGVuc2lvbiIsIkRlbGF5Iiwic2hvcnREZWxheSIsImxvbmdEZWxheSIsImlzTW9iaWxlIiwiX2VtdWxhdG9yVXJsIiwiZW11bGF0b3IiLCJzdGFydHNXaXRoIiwiRmV0Y2hQcm92aWRlciIsImZldGNoSW1wbCIsImhlYWRlcnNJbXBsIiwicmVzcG9uc2VJbXBsIiwiUmVzcG9uc2UiLCJTRVJWRVJfRVJST1JfTUFQIiwiREVGQVVMVF9BUElfVElNRU9VVF9NUyIsIl9hZGRUaWRJZk5lY2Vzc2FyeSIsInRlbmFudElkIiwiX3BlcmZvcm1BcGlSZXF1ZXN0IiwiY3VzdG9tRXJyb3JNYXAiLCJfcGVyZm9ybUZldGNoV2l0aEVycm9ySGFuZGxpbmciLCJhcGlLZXkiLCJfZ2V0QWRkaXRpb25hbEhlYWRlcnMiLCJsYW5ndWFnZUNvZGUiLCJfZ2V0RmluYWxUYXJnZXQiLCJhcGlIb3N0IiwicmVmZXJyZXJQb2xpY3kiLCJmZXRjaEZuIiwiX2NhbkluaXRFbXVsYXRvciIsIm5ldHdvcmtUaW1lb3V0IiwiTmV0d29ya1RpbWVvdXQiLCJyYWNlIiwiY2xlYXJOZXR3b3JrVGltZW91dCIsImpzb24iLCJfbWFrZVRhZ2dlZEVycm9yIiwiZXJyb3JNZXNzYWdlIiwic2VydmVyRXJyb3JDb2RlIiwic2VydmVyRXJyb3JNZXNzYWdlIiwiYXV0aEVycm9yIiwiX3BlcmZvcm1TaWduSW5SZXF1ZXN0Iiwic2VydmVyUmVzcG9uc2UiLCJfc2VydmVyUmVzcG9uc2UiLCJhcGlTY2hlbWUiLCJfcGFyc2VFbmZvcmNlbWVudFN0YXRlIiwiZW5mb3JjZW1lbnRTdGF0ZVN0ciIsInRpbWVyIiwiZXJyb3JQYXJhbXMiLCJlbWFpbCIsInBob25lTnVtYmVyIiwiX3Rva2VuUmVzcG9uc2UiLCJpc0VudGVycHJpc2UiLCJncmVjYXB0Y2hhIiwiZW50ZXJwcmlzZSIsIlJlY2FwdGNoYUNvbmZpZyIsInNpdGVLZXkiLCJyZWNhcHRjaGFFbmZvcmNlbWVudFN0YXRlIiwicmVjYXB0Y2hhS2V5IiwiZ2V0UHJvdmlkZXJFbmZvcmNlbWVudFN0YXRlIiwicHJvdmlkZXJTdHIiLCJlbmZvcmNlbWVudFN0YXRlIiwiaXNQcm92aWRlckVuYWJsZWQiLCJnZXRBY2NvdW50SW5mbyIsInV0Y1RpbWVzdGFtcFRvRGF0ZVN0cmluZyIsInV0Y1RpbWVzdGFtcCIsInRvVVRDU3RyaW5nIiwic2Vjb25kc1N0cmluZ1RvTWlsbGlzZWNvbmRzIiwiX3BhcnNlVG9rZW4iLCJhbGdvcml0aG0iLCJzaWduYXR1cmUiLCJfdG9rZW5FeHBpcmVzSW4iLCJwYXJzZWRUb2tlbiIsIl9sb2dvdXRJZkludmFsaWRhdGVkIiwiYnlwYXNzQXV0aFN0YXRlIiwiaXNVc2VySW52YWxpZGF0ZWQiLCJzaWduT3V0IiwiUHJvYWN0aXZlUmVmcmVzaCIsImlzUnVubmluZyIsImVycm9yQmFja29mZiIsIl9zdGFydCIsInNjaGVkdWxlIiwiX3N0b3AiLCJnZXRJbnRlcnZhbCIsIndhc0Vycm9yIiwiaW50ZXJ2YWwiLCJzdHNUb2tlbk1hbmFnZXIiLCJleHBpcmF0aW9uVGltZSIsIml0ZXJhdGlvbiIsImdldElkVG9rZW4iLCJVc2VyTWV0YWRhdGEiLCJjcmVhdGVkQXQiLCJsYXN0TG9naW5BdCIsIl9pbml0aWFsaXplVGltZSIsImxhc3RTaWduSW5UaW1lIiwiY3JlYXRpb25UaW1lIiwiX2NvcHkiLCJfcmVsb2FkV2l0aG91dFNhdmluZyIsImlkVG9rZW4iLCJ1c2VycyIsImNvcmVBY2NvdW50IiwiX25vdGlmeVJlbG9hZExpc3RlbmVyIiwibmV3UHJvdmlkZXJEYXRhIiwicHJvdmlkZXJVc2VySW5mbyIsImV4dHJhY3RQcm92aWRlckRhdGEiLCJwcm92aWRlckRhdGEiLCJvcmlnaW5hbCIsIm5ld0RhdGEiLCJwcm92aWRlcklkIiwib2xkSXNBbm9ueW1vdXMiLCJpc0Fub255bW91cyIsIm5ld0lzQW5vbnltb3VzIiwicGFzc3dvcmRIYXNoIiwidXBkYXRlcyIsImxvY2FsSWQiLCJkaXNwbGF5TmFtZSIsInBob3RvVVJMIiwicGhvdG9VcmwiLCJlbWFpbFZlcmlmaWVkIiwicmF3SWQiLCJTdHNUb2tlbk1hbmFnZXIiLCJyZWZyZXNoVG9rZW4iLCJpc0V4cGlyZWQiLCJ1cGRhdGVGcm9tU2VydmVyUmVzcG9uc2UiLCJleHBpcmVzSW4iLCJ1cGRhdGVUb2tlbnNBbmRFeHBpcmF0aW9uIiwidXBkYXRlRnJvbUlkVG9rZW4iLCJyZWZyZXNoIiwiY2xlYXJSZWZyZXNoVG9rZW4iLCJvbGRUb2tlbiIsInRva2VuQXBpSG9zdCIsImFjY2Vzc190b2tlbiIsImV4cGlyZXNfaW4iLCJyZWZyZXNoX3Rva2VuIiwicmVxdWVzdFN0c1Rva2VuIiwiZXhwaXJlc0luU2VjIiwiZnJvbUpTT04iLCJtYW5hZ2VyIiwiX2Fzc2lnbiIsIl9jbG9uZSIsIl9wZXJmb3JtUmVmcmVzaCIsImFzc2VydFN0cmluZ09yVW5kZWZpbmVkIiwiVXNlckltcGwiLCJvcHQiLCJwcm9hY3RpdmVSZWZyZXNoIiwicmVsb2FkVXNlckluZm8iLCJyZWxvYWRMaXN0ZW5lciIsIl9wZXJzaXN0VXNlcklmQ3VycmVudCIsIl9ub3RpZnlMaXN0ZW5lcnNJZkN1cnJlbnQiLCJnZXRJZFRva2VuUmVzdWx0IiwidXNlckludGVybmFsIiwiY2xhaW1zIiwic2lnbkluUHJvdmlkZXIiLCJhdXRoVGltZSIsImlzc3VlZEF0VGltZSIsInNpZ25JblNlY29uZEZhY3RvciIsInJlbG9hZCIsInVzZXJJbmZvIiwibmV3VXNlciIsIl9vblJlbG9hZCIsIl9zdGFydFByb2FjdGl2ZVJlZnJlc2giLCJfc3RvcFByb2FjdGl2ZVJlZnJlc2giLCJfdXBkYXRlVG9rZW5zSWZOZWNlc3NhcnkiLCJ0b2tlbnNSZWZyZXNoZWQiLCJkZWxldGVBY2NvdW50IiwiX3JlZGlyZWN0RXZlbnRJZCIsIl9mcm9tSlNPTiIsIl9jIiwiX2QiLCJfZiIsIl9nIiwiX2giLCJwbGFpbk9iamVjdFRva2VuTWFuYWdlciIsIl9mcm9tSWRUb2tlblJlc3BvbnNlIiwiaWRUb2tlblJlc3BvbnNlIiwiX2Zyb21HZXRBY2NvdW50SW5mb1Jlc3BvbnNlIiwiaW5zdGFuY2VDYWNoZSIsIl9nZXRJbnN0YW5jZSIsImNscyIsIkluTWVtb3J5UGVyc2lzdGVuY2UiLCJzdG9yYWdlIiwiX2lzQXZhaWxhYmxlIiwiX3NldCIsIl9nZXQiLCJfcmVtb3ZlIiwiX2FkZExpc3RlbmVyIiwiX2xpc3RlbmVyIiwiX3JlbW92ZUxpc3RlbmVyIiwiaW5NZW1vcnlQZXJzaXN0ZW5jZSIsIl9wZXJzaXN0ZW5jZUtleU5hbWUiLCJQZXJzaXN0ZW5jZVVzZXJNYW5hZ2VyIiwidXNlcktleSIsImZ1bGxVc2VyS2V5IiwiZnVsbFBlcnNpc3RlbmNlS2V5IiwiYm91bmRFdmVudEhhbmRsZXIiLCJfb25TdG9yYWdlRXZlbnQiLCJzZXRDdXJyZW50VXNlciIsImdldEN1cnJlbnRVc2VyIiwiYmxvYiIsInJlbW92ZUN1cnJlbnRVc2VyIiwic2F2ZVBlcnNpc3RlbmNlRm9yUmVkaXJlY3QiLCJzZXRQZXJzaXN0ZW5jZSIsIm5ld1BlcnNpc3RlbmNlIiwicGVyc2lzdGVuY2VIaWVyYXJjaHkiLCJhdmFpbGFibGVQZXJzaXN0ZW5jZXMiLCJzZWxlY3RlZFBlcnNpc3RlbmNlIiwidXNlclRvTWlncmF0ZSIsIm1pZ3JhdGlvbkhpZXJhcmNoeSIsIl9zaG91bGRBbGxvd01pZ3JhdGlvbiIsIl9nZXRCcm93c2VyTmFtZSIsIl9pc0lFTW9iaWxlIiwiX2lzRmlyZWZveCIsIl9pc0JsYWNrQmVycnkiLCJfaXNXZWJPUyIsIl9pc1NhZmFyaSIsIl9pc0Nocm9tZUlPUyIsIl9pc0FuZHJvaWQiLCJfaXNJT1MiLCJfaXNNb2JpbGVCcm93c2VyIiwiX2dldENsaWVudFZlcnNpb24iLCJjbGllbnRQbGF0Zm9ybSIsImZyYW1ld29ya3MiLCJyZXBvcnRlZFBsYXRmb3JtIiwicmVwb3J0ZWRGcmFtZXdvcmtzIiwiQXV0aE1pZGRsZXdhcmVRdWV1ZSIsInF1ZXVlIiwicHVzaENhbGxiYWNrIiwib25BYm9ydCIsIndyYXBwZWRDYWxsYmFjayIsInJ1bk1pZGRsZXdhcmUiLCJuZXh0VXNlciIsIm9uQWJvcnRTdGFjayIsImJlZm9yZVN0YXRlQ2FsbGJhY2siLCJyZXZlcnNlIiwib3JpZ2luYWxNZXNzYWdlIiwiUGFzc3dvcmRQb2xpY3lJbXBsIiwicmVzcG9uc2VPcHRpb25zIiwiY3VzdG9tU3RyZW5ndGhPcHRpb25zIiwibWluUGFzc3dvcmRMZW5ndGgiLCJtYXhQYXNzd29yZExlbmd0aCIsImNvbnRhaW5zTG93ZXJjYXNlQ2hhcmFjdGVyIiwiY29udGFpbnNMb3dlcmNhc2VMZXR0ZXIiLCJjb250YWluc1VwcGVyY2FzZUNoYXJhY3RlciIsImNvbnRhaW5zVXBwZXJjYXNlTGV0dGVyIiwiY29udGFpbnNOdW1lcmljQ2hhcmFjdGVyIiwiY29udGFpbnNOb25BbHBoYW51bWVyaWNDaGFyYWN0ZXIiLCJhbGxvd2VkTm9uQWxwaGFudW1lcmljQ2hhcmFjdGVycyIsImZvcmNlVXBncmFkZU9uU2lnbmluIiwic2NoZW1hVmVyc2lvbiIsInZhbGlkYXRlUGFzc3dvcmQiLCJwYXNzd29yZCIsInBhc3N3b3JkUG9saWN5IiwidmFsaWRhdGVQYXNzd29yZExlbmd0aE9wdGlvbnMiLCJ2YWxpZGF0ZVBhc3N3b3JkQ2hhcmFjdGVyT3B0aW9ucyIsIm1lZXRzTWluUGFzc3dvcmRMZW5ndGgiLCJtZWV0c01heFBhc3N3b3JkTGVuZ3RoIiwicGFzc3dvcmRDaGFyIiwidXBkYXRlUGFzc3dvcmRDaGFyYWN0ZXJPcHRpb25zU3RhdHVzZXMiLCJBdXRoSW1wbCIsImhlYXJ0YmVhdFNlcnZpY2VQcm92aWRlciIsImFwcENoZWNrU2VydmljZVByb3ZpZGVyIiwiZW11bGF0b3JDb25maWciLCJvcGVyYXRpb25zIiwiYXV0aFN0YXRlU3Vic2NyaXB0aW9uIiwiU3Vic2NyaXB0aW9uIiwiaWRUb2tlblN1YnNjcmlwdGlvbiIsImJlZm9yZVN0YXRlUXVldWUiLCJyZWRpcmVjdFVzZXIiLCJpc1Byb2FjdGl2ZVJlZnJlc2hFbmFibGVkIiwiRVhQRUNURURfUEFTU1dPUkRfUE9MSUNZX1NDSEVNQV9WRVJTSU9OIiwiX2lzSW5pdGlhbGl6ZWQiLCJfZGVsZXRlZCIsIl9pbml0aWFsaXphdGlvblByb21pc2UiLCJfcG9wdXBSZWRpcmVjdFJlc29sdmVyIiwiX2FnZW50UmVjYXB0Y2hhQ29uZmlnIiwiX3RlbmFudFJlY2FwdGNoYUNvbmZpZ3MiLCJfcHJvamVjdFBhc3N3b3JkUG9saWN5IiwiX3RlbmFudFBhc3N3b3JkUG9saWNpZXMiLCJsYXN0Tm90aWZpZWRVaWQiLCJhcHBWZXJpZmljYXRpb25EaXNhYmxlZEZvclRlc3RpbmciLCJjbGllbnRWZXJzaW9uIiwic2RrQ2xpZW50VmVyc2lvbiIsIl9pbml0aWFsaXplV2l0aFBlcnNpc3RlbmNlIiwicG9wdXBSZWRpcmVjdFJlc29sdmVyIiwicGVyc2lzdGVuY2VNYW5hZ2VyIiwiX3Nob3VsZEluaXRQcm9hY3RpdmVseSIsIl9pbml0aWFsaXplIiwiaW5pdGlhbGl6ZUN1cnJlbnRVc2VyIiwiYXNzZXJ0ZWRQZXJzaXN0ZW5jZSIsIl9jdXJyZW50VXNlciIsIl91cGRhdGVDdXJyZW50VXNlciIsImluaXRpYWxpemVDdXJyZW50VXNlckZyb21JZFRva2VuIiwiZGlyZWN0bHlTZXRDdXJyZW50VXNlciIsImF1dGhJZFRva2VuIiwicHJldmlvdXNseVN0b3JlZFVzZXIiLCJmdXR1cmVDdXJyZW50VXNlciIsIm5lZWRzVG9jaGVja01pZGRsZXdhcmUiLCJhdXRoRG9tYWluIiwiZ2V0T3JJbml0UmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIiLCJyZWRpcmVjdFVzZXJFdmVudElkIiwic3RvcmVkVXNlckV2ZW50SWQiLCJ0cnlSZWRpcmVjdFNpZ25JbiIsIl9vdmVycmlkZVJlZGlyZWN0UmVzdWx0IiwicmVsb2FkQW5kU2V0Q3VycmVudFVzZXJPckNsZWFyIiwicmVkaXJlY3RSZXNvbHZlciIsIl9jb21wbGV0ZVJlZGlyZWN0Rm4iLCJfc2V0UmVkaXJlY3RVc2VyIiwidXNlRGV2aWNlTGFuZ3VhZ2UiLCJuYXZpZ2F0b3JMYW5ndWFnZSIsImxhbmd1YWdlcyIsImxhbmd1YWdlIiwiX2dldFVzZXJMYW5ndWFnZSIsInVwZGF0ZUN1cnJlbnRVc2VyIiwidXNlckV4dGVybiIsInNraXBCZWZvcmVTdGF0ZUNhbGxiYWNrcyIsIm5vdGlmeUF1dGhMaXN0ZW5lcnMiLCJyZWRpcmVjdFBlcnNpc3RlbmNlTWFuYWdlciIsIl9nZXRSZWNhcHRjaGFDb25maWciLCJfZ2V0UGFzc3dvcmRQb2xpY3lJbnRlcm5hbCIsIl91cGRhdGVQYXNzd29yZFBvbGljeSIsIl9nZXRQYXNzd29yZFBvbGljeSIsIl9nZXRQZXJzaXN0ZW5jZSIsIl91cGRhdGVFcnJvck1hcCIsIm9uQXV0aFN0YXRlQ2hhbmdlZCIsImNvbXBsZXRlZCIsInJlZ2lzdGVyU3RhdGVMaXN0ZW5lciIsImJlZm9yZUF1dGhTdGF0ZUNoYW5nZWQiLCJvbklkVG9rZW5DaGFuZ2VkIiwiYXV0aFN0YXRlUmVhZHkiLCJ1bnN1YnNjcmliZSIsInJldm9rZUFjY2Vzc1Rva2VuIiwidG9rZW5UeXBlIiwicmV2b2tlVG9rZW4iLCJyZWRpcmVjdE1hbmFnZXIiLCJyZXNvbHZlciIsIl9yZWRpcmVjdFBlcnNpc3RlbmNlIiwiX3JlZGlyZWN0VXNlckZvcklkIiwiY3VycmVudFVpZCIsInN1YnNjcmlwdGlvbiIsImlzVW5zdWJzY3JpYmVkIiwiYWRkT2JzZXJ2ZXIiLCJhY3Rpb24iLCJfbG9nRnJhbWV3b3JrIiwiZnJhbWV3b3JrIiwiX2dldEZyYW1ld29ya3MiLCJoZWFydGJlYXRzSGVhZGVyIiwiYXBwQ2hlY2tUb2tlbiIsIl9nZXRBcHBDaGVja1Rva2VuIiwiYXBwQ2hlY2tUb2tlblJlc3VsdCIsIl9sb2dXYXJuIiwiX2Nhc3RBdXRoIiwiY3JlYXRlU3Vic2NyaWJlIiwiZXh0ZXJuYWxKU1Byb3ZpZGVyIiwibG9hZEpTIiwicmVjYXB0Y2hhVjJTY3JpcHQiLCJyZWNhcHRjaGFFbnRlcnByaXNlU2NyaXB0IiwiZ2FwaVNjcmlwdCIsIl9sb2FkSlMiLCJfZ2VuZXJhdGVDYWxsYmFja05hbWUiLCJwcmVmaXgiLCJSZWNhcHRjaGFFbnRlcnByaXNlVmVyaWZpZXIiLCJhdXRoRXh0ZXJuIiwicmV0cmlldmVSZWNhcHRjaGFUb2tlbiIsInJlYWR5IiwiZXhlY3V0ZSIsImdldFJlY2FwdGNoYUNvbmZpZyIsImNsaWVudFR5cGUiLCJyZXRyaWV2ZVNpdGVLZXkiLCJpbmplY3RSZWNhcHRjaGFGaWVsZHMiLCJjYXB0Y2hhUmVzcCIsInZlcmlmaWVyIiwiY2FwdGNoYVJlc3BvbnNlIiwibmV3UmVxdWVzdCIsImhhbmRsZVJlY2FwdGNoYUZsb3ciLCJhdXRoSW5zdGFuY2UiLCJhY3Rpb25OYW1lIiwiYWN0aW9uTWV0aG9kIiwicmVxdWVzdFdpdGhSZWNhcHRjaGEiLCJleHRyYWN0UHJvdG9jb2wiLCJwcm90b2NvbEVuZCIsInBhcnNlUG9ydCIsInBvcnRTdHIiLCJBdXRoQ3JlZGVudGlhbCIsInNpZ25Jbk1ldGhvZCIsIl9nZXRJZFRva2VuUmVzcG9uc2UiLCJfYXV0aCIsIl9saW5rVG9JZFRva2VuIiwiX2lkVG9rZW4iLCJfZ2V0UmVhdXRoZW50aWNhdGlvblJlc29sdmVyIiwibGlua0VtYWlsUGFzc3dvcmQiLCJzaWduSW5XaXRoUGFzc3dvcmQiLCJFbWFpbEF1dGhDcmVkZW50aWFsIiwiX2VtYWlsIiwiX3Bhc3N3b3JkIiwiX3RlbmFudElkIiwiX2Zyb21FbWFpbEFuZFBhc3N3b3JkIiwiX2Zyb21FbWFpbEFuZENvZGUiLCJvb2JDb2RlIiwicmV0dXJuU2VjdXJlVG9rZW4iLCJzaWduSW5XaXRoRW1haWxMaW5rJDEiLCJzaWduSW5XaXRoRW1haWxMaW5rRm9yTGlua2luZyIsInNpZ25JbldpdGhJZHAiLCJPQXV0aENyZWRlbnRpYWwiLCJwZW5kaW5nVG9rZW4iLCJfZnJvbVBhcmFtcyIsImNyZWQiLCJvYXV0aFRva2VuIiwib2F1dGhUb2tlblNlY3JldCIsInNlY3JldCIsImJ1aWxkUmVxdWVzdCIsImF1dG9DcmVhdGUiLCJyZXF1ZXN0VXJpIiwicG9zdEJvZHkiLCJWRVJJRllfUEhPTkVfTlVNQkVSX0ZPUl9FWElTVElOR19FUlJPUl9NQVBfIiwiUGhvbmVBdXRoQ3JlZGVudGlhbCIsIl9mcm9tVmVyaWZpY2F0aW9uIiwidmVyaWZpY2F0aW9uSWQiLCJ2ZXJpZmljYXRpb25Db2RlIiwiX2Zyb21Ub2tlblJlc3BvbnNlIiwidGVtcG9yYXJ5UHJvb2YiLCJzaWduSW5XaXRoUGhvbmVOdW1iZXIkMSIsIl9tYWtlVmVyaWZpY2F0aW9uUmVxdWVzdCIsImxpbmtXaXRoUGhvbmVOdW1iZXIkMSIsIm9wZXJhdGlvbiIsInZlcmlmeVBob25lTnVtYmVyRm9yRXhpc3RpbmciLCJzZXNzaW9uSW5mbyIsIkFjdGlvbkNvZGVVUkwiLCJhY3Rpb25MaW5rIiwic2VhcmNoUGFyYW1zIiwicGFyc2VNb2RlIiwiY29udGludWVVcmwiLCJwYXJzZUxpbmsiLCJsaW5rIiwiZG91YmxlRGVlcExpbmsiLCJpT1NEZWVwTGluayIsInBhcnNlRGVlcExpbmsiLCJFbWFpbEF1dGhQcm92aWRlciIsIlBST1ZJREVSX0lEIiwiY3JlZGVudGlhbCIsImNyZWRlbnRpYWxXaXRoTGluayIsImVtYWlsTGluayIsImFjdGlvbkNvZGVVcmwiLCJFTUFJTF9QQVNTV09SRF9TSUdOX0lOX01FVEhPRCIsIkVNQUlMX0xJTktfU0lHTl9JTl9NRVRIT0QiLCJGZWRlcmF0ZWRBdXRoUHJvdmlkZXIiLCJkZWZhdWx0TGFuZ3VhZ2VDb2RlIiwiY3VzdG9tUGFyYW1ldGVycyIsInNldERlZmF1bHRMYW5ndWFnZSIsInNldEN1c3RvbVBhcmFtZXRlcnMiLCJjdXN0b21PQXV0aFBhcmFtZXRlcnMiLCJnZXRDdXN0b21QYXJhbWV0ZXJzIiwiQmFzZU9BdXRoUHJvdmlkZXIiLCJzY29wZXMiLCJhZGRTY29wZSIsInNjb3BlIiwiZ2V0U2NvcGVzIiwiRmFjZWJvb2tBdXRoUHJvdmlkZXIiLCJGQUNFQk9PS19TSUdOX0lOX01FVEhPRCIsImNyZWRlbnRpYWxGcm9tUmVzdWx0IiwidXNlckNyZWRlbnRpYWwiLCJjcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCIsImNyZWRlbnRpYWxGcm9tRXJyb3IiLCJ0b2tlblJlc3BvbnNlIiwib2F1dGhBY2Nlc3NUb2tlbiIsIkdvb2dsZUF1dGhQcm92aWRlciIsIkdPT0dMRV9TSUdOX0lOX01FVEhPRCIsIm9hdXRoSWRUb2tlbiIsIkdpdGh1YkF1dGhQcm92aWRlciIsIkdJVEhVQl9TSUdOX0lOX01FVEhPRCIsIlR3aXR0ZXJBdXRoUHJvdmlkZXIiLCJUV0lUVEVSX1NJR05fSU5fTUVUSE9EIiwic2lnblVwIiwiVXNlckNyZWRlbnRpYWxJbXBsIiwib3BlcmF0aW9uVHlwZSIsInByb3ZpZGVySWRGb3JSZXNwb25zZSIsIl9mb3JPcGVyYXRpb24iLCJNdWx0aUZhY3RvckVycm9yIiwiX2Zyb21FcnJvckFuZE9wZXJhdGlvbiIsIl9wcm9jZXNzQ3JlZGVudGlhbFNhdmluZ01mYUNvbnRleHRJZk5lY2Vzc2FyeSIsIl9zaWduSW5XaXRoQ3JlZGVudGlhbCIsInJlY2FjaGVQYXNzd29yZFBvbGljeSIsImF1dGhJbnRlcm5hbCIsIlNUT1JBR0VfQVZBSUxBQkxFX0tFWSIsIkJyb3dzZXJQZXJzaXN0ZW5jZUNsYXNzIiwic3RvcmFnZVJldHJpZXZlciIsInNldEl0ZW0iLCJyZW1vdmVJdGVtIiwiZ2V0SXRlbSIsIkJyb3dzZXJMb2NhbFBlcnNpc3RlbmNlIiwibG9jYWxTdG9yYWdlIiwicG9sbCIsIm9uU3RvcmFnZUV2ZW50IiwibGlzdGVuZXJzIiwicG9sbFRpbWVyIiwic2FmYXJpTG9jYWxTdG9yYWdlTm90U3luY2VkIiwiX2lmcmFtZUNhbm5vdFN5bmNXZWJTdG9yYWdlIiwidG9wIiwiX2lzSWZyYW1lIiwiZmFsbGJhY2tUb1BvbGxpbmciLCJmb3JBbGxDaGFuZ2VkS2V5cyIsIm9sZFZhbHVlIiwiX29sZFZhbHVlIiwibm90aWZ5TGlzdGVuZXJzIiwiZGV0YWNoTGlzdGVuZXIiLCJzdG9wUG9sbGluZyIsInN0b3JlZFZhbHVlIiwidHJpZ2dlckxpc3RlbmVycyIsImlzSUUiLCJkb2N1bWVudE1vZGUiLCJzdGFydFBvbGxpbmciLCJzZXRJbnRlcnZhbCIsIlN0b3JhZ2VFdmVudCIsImNsZWFySW50ZXJ2YWwiLCJhdHRhY2hMaXN0ZW5lciIsImJyb3dzZXJMb2NhbFBlcnNpc3RlbmNlIiwiQnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZSIsInNlc3Npb25TdG9yYWdlIiwiYnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZSIsIlJlY2VpdmVyIiwiZXZlbnRUYXJnZXQiLCJoYW5kbGVyc01hcCIsInJlY2VpdmVycyIsImlzTGlzdGVuaW5ndG8iLCJuZXdJbnN0YW5jZSIsIm1lc3NhZ2VFdmVudCIsImV2ZW50SWQiLCJldmVudFR5cGUiLCJoYW5kbGVycyIsInBvcnRzIiwicG9zdE1lc3NhZ2UiLCJwcm9taXNlcyIsImhhbmRsZXIiLCJvcmlnaW4iLCJmdWxmaWxsZWQiLCJyZWFzb24iLCJfYWxsU2V0dGxlZCIsIl9zdWJzY3JpYmUiLCJldmVudEhhbmRsZXIiLCJfdW5zdWJzY3JpYmUiLCJfZ2VuZXJhdGVFdmVudElkIiwiZGlnaXRzIiwiU2VuZGVyIiwicmVtb3ZlTWVzc2FnZUhhbmRsZXIiLCJtZXNzYWdlQ2hhbm5lbCIsInBvcnQxIiwiX3NlbmQiLCJ0aW1lb3V0IiwiTWVzc2FnZUNoYW5uZWwiLCJjb21wbGV0aW9uVGltZXIiLCJhY2tUaW1lciIsInBvcnQyIiwiZmluYWxseSIsIl93aW5kb3ciLCJfaXNXb3JrZXIiLCJEQl9PQkpFQ1RTVE9SRV9OQU1FIiwiREJfREFUQV9LRVlQQVRIIiwiREJQcm9taXNlIiwiZ2V0T2JqZWN0U3RvcmUiLCJpc1JlYWRXcml0ZSIsIl9vcGVuRGF0YWJhc2UiLCJrZXlQYXRoIiwiX2RlbGV0ZURhdGFiYXNlIiwiX3B1dE9iamVjdCIsIl9kZWxldGVPYmplY3QiLCJJbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlIiwicGVuZGluZ1dyaXRlcyIsInNlbmRlciIsInNlcnZpY2VXb3JrZXJSZWNlaXZlckF2YWlsYWJsZSIsImFjdGl2ZVNlcnZpY2VXb3JrZXIiLCJfd29ya2VySW5pdGlhbGl6YXRpb25Qcm9taXNlIiwiaW5pdGlhbGl6ZVNlcnZpY2VXb3JrZXJNZXNzYWdpbmciLCJfb3BlbkRiIiwiX3dpdGhSZXRyaWVzIiwibnVtQXR0ZW1wdHMiLCJpbml0aWFsaXplUmVjZWl2ZXIiLCJpbml0aWFsaXplU2VuZGVyIiwiX29yaWdpbiIsImtleVByb2Nlc3NlZCIsIl9wb2xsIiwiX2RhdGEiLCJzZXJ2aWNlV29ya2VyIiwiYWN0aXZlIiwiX2dldEFjdGl2ZVNlcnZpY2VXb3JrZXIiLCJyZXN1bHRzIiwibm90aWZ5U2VydmljZVdvcmtlciIsImNvbnRyb2xsZXIiLCJfd2l0aFBlbmRpbmdXcml0ZSIsIndyaXRlIiwiZ2V0T2JqZWN0IiwiZ2V0QWxsUmVxdWVzdCIsImdldEFsbCIsImtleXNJblJlc3VsdCIsImZiYXNlX2tleSIsImxvY2FsS2V5IiwiaW5kZXhlZERCTG9jYWxQZXJzaXN0ZW5jZSIsIlBob25lQXV0aFByb3ZpZGVyIiwidmVyaWZ5UGhvbmVOdW1iZXIiLCJwaG9uZU9wdGlvbnMiLCJhcHBsaWNhdGlvblZlcmlmaWVyIiwicmVjYXB0Y2hhVG9rZW4iLCJwaG9uZUluZm9PcHRpb25zIiwic2Vzc2lvbiIsInN0YXJ0RW5yb2xsUGhvbmVNZmEiLCJwaG9uZUVucm9sbG1lbnRJbmZvIiwicGhvbmVTZXNzaW9uSW5mbyIsIm1mYUVucm9sbG1lbnRJZCIsIm11bHRpRmFjdG9ySGludCIsIm11bHRpRmFjdG9yVWlkIiwic3RhcnRTaWduSW5QaG9uZU1mYSIsIm1mYVBlbmRpbmdDcmVkZW50aWFsIiwicGhvbmVTaWduSW5JbmZvIiwicGhvbmVSZXNwb25zZUluZm8iLCJzZW5kUGhvbmVWZXJpZmljYXRpb25Db2RlIiwiX3Jlc2V0IiwiX3ZlcmlmeVBob25lTnVtYmVyIiwiUEhPTkVfU0lHTl9JTl9NRVRIT0QiLCJJZHBDcmVkZW50aWFsIiwiX2J1aWxkSWRwUmVxdWVzdCIsInNlc3Npb25JZCIsInJldHVybklkcENyZWRlbnRpYWwiLCJfc2lnbkluIiwiX3JlYXV0aCIsInBhcnNlZCIsIl9yZWF1dGhlbnRpY2F0ZSIsIl9saW5rIiwiX2xpbmskMSIsIkFic3RyYWN0UG9wdXBSZWRpcmVjdE9wZXJhdGlvbiIsInBlbmRpbmdQcm9taXNlIiwib25FeGVjdXRpb24iLCJyZWdpc3RlckNvbnN1bWVyIiwib25BdXRoRXZlbnQiLCJ1cmxSZXNwb25zZSIsImdldElkcFRhc2siLCJ1bnJlZ2lzdGVyQW5kQ2xlYW5VcCIsInVucmVnaXN0ZXJDb25zdW1lciIsImNsZWFuVXAiLCJfUE9MTF9XSU5ET1dfQ0xPU0VfVElNRU9VVCIsIlBvcHVwT3BlcmF0aW9uIiwiYXV0aFdpbmRvdyIsInBvbGxJZCIsImN1cnJlbnRQb3B1cEFjdGlvbiIsImV4ZWN1dGVOb3ROdWxsIiwiX29wZW5Qb3B1cCIsImFzc29jaWF0ZWRFdmVudCIsIl9vcmlnaW5WYWxpZGF0aW9uIiwiX2lzSWZyYW1lV2ViU3RvcmFnZVN1cHBvcnRlZCIsImlzU3VwcG9ydGVkIiwicG9sbFVzZXJDYW5jZWxsYXRpb24iLCJjbG9zZWQiLCJQRU5ESU5HX1JFRElSRUNUX0tFWSIsInJlZGlyZWN0T3V0Y29tZU1hcCIsIlJlZGlyZWN0QWN0aW9uIiwicmVhZHlPdXRjb21lIiwiaGFzUGVuZGluZ1JlZGlyZWN0IiwicGVuZGluZ1JlZGlyZWN0S2V5IiwicmVzb2x2ZXJQZXJzaXN0ZW5jZSIsIl9nZXRBbmRDbGVhclBlbmRpbmdSZWRpcmVjdFN0YXR1cyIsIl9nZXRSZWRpcmVjdFJlc3VsdCIsInJlc29sdmVyRXh0ZXJuIiwicmVzb2x2ZXJPdmVycmlkZSIsIl93aXRoRGVmYXVsdFJlc29sdmVyIiwiQXV0aEV2ZW50TWFuYWdlciIsImNhY2hlZEV2ZW50VWlkcyIsImNvbnN1bWVycyIsInF1ZXVlZFJlZGlyZWN0RXZlbnQiLCJoYXNIYW5kbGVkUG90ZW50aWFsUmVkaXJlY3QiLCJsYXN0UHJvY2Vzc2VkRXZlbnRUaW1lIiwiYXV0aEV2ZW50Q29uc3VtZXIiLCJpc0V2ZW50Rm9yQ29uc3VtZXIiLCJzZW5kVG9Db25zdW1lciIsInNhdmVFdmVudFRvQ2FjaGUiLCJvbkV2ZW50IiwiaGFzRXZlbnRCZWVuSGFuZGxlZCIsImhhbmRsZWQiLCJjb25zdW1lciIsImlzTnVsbFJlZGlyZWN0RXZlbnQiLCJpc1JlZGlyZWN0RXZlbnQiLCJldmVudElkTWF0Y2hlcyIsImV2ZW50VWlkIiwiSVBfQUREUkVTU19SRUdFWCIsIkhUVFBfUkVHRVgiLCJtYXRjaERvbWFpbiIsImV4cGVjdGVkIiwiY3VycmVudFVybCIsImNlVXJsIiwiZXNjYXBlZERvbWFpblBhdHRlcm4iLCJORVRXT1JLX1RJTUVPVVQiLCJyZXNldFVubG9hZGVkR2FwaU1vZHVsZXMiLCJiZWFjb24iLCJfX19qc2wiLCJoaW50IiwiQ1AiLCJsb2FkR2FwaSIsImxvYWRHYXBpSWZyYW1lIiwiZ2FwaSIsImxvYWQiLCJpZnJhbWVzIiwiZ2V0Q29udGV4dCIsIklmcmFtZSIsImNiTmFtZSIsImNhY2hlZEdBcGlMb2FkZXIiLCJQSU5HX1RJTUVPVVQiLCJJRlJBTUVfUEFUSCIsIkVNVUxBVEVEX0lGUkFNRV9QQVRIIiwiSUZSQU1FX0FUVFJJQlVURVMiLCJoZWlnaHQiLCJ0YWJpbmRleCIsIkVJRF9GUk9NX0FQSUhPU1QiLCJnZXRJZnJhbWVVcmwiLCJlaWQiLCJmdyIsIkJBU0VfUE9QVVBfT1BUSU9OUyIsInJlc2l6YWJsZSIsInN0YXR1c2JhciIsInRvb2xiYXIiLCJBdXRoUG9wdXAiLCJGSVJFQkFTRV9BUFBfQ0hFQ0tfRlJBR01FTlRfSUQiLCJfZ2V0UmVkaXJlY3RVcmwiLCJhdXRoVHlwZSIsInJlZGlyZWN0VXJsIiwiYWRkaXRpb25hbFBhcmFtcyIsInRpZCIsInBhcmFtc0RpY3QiLCJhcHBDaGVja1Rva2VuRnJhZ21lbnQiLCJnZXRIYW5kbGVyQmFzZSIsIldFQl9TVE9SQUdFX1NVUFBPUlRfS0VZIiwiYnJvd3NlclBvcHVwUmVkaXJlY3RSZXNvbHZlciIsImV2ZW50TWFuYWdlcnMiLCJvcmlnaW5WYWxpZGF0aW9uUHJvbWlzZXMiLCJzY3JlZW4iLCJhdmFpbEhlaWdodCIsImF2YWlsV2lkdGgiLCJzY3JvbGxiYXJzIiwib3B0aW9uc1N0cmluZyIsImFjY3VtIiwic3RhbmRhbG9uZSIsIl9pc0lPU1N0YW5kYWxvbmUiLCJlbCIsImNsaWNrIiwiY3JlYXRlRXZlbnQiLCJpbml0TW91c2VFdmVudCIsImRpc3BhdGNoRXZlbnQiLCJvcGVuQXNOZXdXaW5kb3dJT1MiLCJuZXdXaW4iLCJmb2N1cyIsIl9vcGVuIiwiX29wZW5SZWRpcmVjdCIsImluaXRBbmRHZXRNYW5hZ2VyIiwiaWZyYW1lIiwiX2xvYWRHYXBpIiwibWVzc2FnZUhhbmRsZXJzRmlsdGVyIiwiQ1JPU1NfT1JJR0lOX0lGUkFNRVNfRklMVEVSIiwiZG9udGNsZWFyIiwicmVzdHlsZSIsInNldEhpZGVPbkxlYXZlIiwibmV0d29ya0Vycm9yIiwibmV0d29ya0Vycm9yVGltZXIiLCJjbGVhclRpbWVyQW5kUmVzb2x2ZSIsInBpbmciLCJfb3BlbklmcmFtZSIsInJlZ2lzdGVyIiwiaWZyYW1lRXZlbnQiLCJhdXRoRXZlbnQiLCJhdXRob3JpemVkRG9tYWlucyIsIl9nZXRQcm9qZWN0Q29uZmlnIiwiZG9tYWluIiwiX3ZhbGlkYXRlT3JpZ2luIiwiQXV0aEludGVyb3AiLCJpbnRlcm5hbExpc3RlbmVycyIsImFzc2VydEF1dGhDb25maWd1cmVkIiwidXBkYXRlUHJvYWN0aXZlUmVmcmVzaCIsImF1dGhJZFRva2VuTWF4QWdlIiwibGFzdFBvc3RlZElkVG9rZW4iLCJjaGFyc2V0IiwiZGVwcyIsImhpZXJhcmNoeSIsIl9pbml0aWFsaXplQXV0aEluc3RhbmNlIiwiX2luc3RhbmNlSWRlbnRpZmllciIsIl9pbnN0YW5jZSIsImdldFZlcnNpb25Gb3JQbGF0Zm9ybSIsInVzZXJIMSIsInN0aWNreU5vdGVzRWxlbWVudCIsImFkZE5vdGVCdG4iLCJwaW5Gb3JtIiwic2lnblVwQXV0aCIsInNpZ25VcEZvcm0iLCJzaWduVXBMYXRlciIsImxvZ0luRm9ybSIsImxvZ0luIiwibG9nT3V0IiwiaW5wdXRGaWVsZCIsInRleHRGaWVsZCIsImRhdGVFbGVtZW50IiwibWF5YmVMYXRlclN1Ym1pdEJ0biIsImdldEVsZW1lbnRCeUlkIiwic3RvcmFnZUJ1Y2tldCIsIm1lc3NhZ2luZ1NlbmRlcklkIiwiaW5pdGlhbGl6ZUF1dGgiLCJhdXRoVG9rZW5TeW5jUGF0aCIsImlzU2VjdXJlQ29udGV4dCIsImF1dGhUb2tlblN5bmNVcmwiLCJtaW50Q29va2llIiwiaWRUb2tlblJlc3VsdCIsImlkVG9rZW5BZ2UiLCJhdXRoRW11bGF0b3JIb3N0IiwiZGlzYWJsZVdhcm5pbmdzIiwiYXV0aG9yaXR5IiwiaG9zdEFuZFBvcnQiLCJicmFja2V0ZWRJUHY2IiwiZXh0cmFjdEhvc3RBbmRQb3J0IiwiZnJlZXplIiwiYXR0YWNoQmFubmVyIiwic3R5IiwiaW5uZXJUZXh0IiwiYmFja2dyb3VuZENvbG9yIiwiYm9yZGVyIiwiYm90dG9tIiwibWFyZ2luIiwiekluZGV4IiwidGV4dEFsaWduIiwiY2xhc3NMaXN0IiwiZW1pdEVtdWxhdG9yV2FybmluZyIsImNvbm5lY3RBdXRoRW11bGF0b3IiLCJnZXRBdXRoIiwiaGFuZGxlU2lnblVwRm9ybUNsYXNzIiwidXNlck5hbWUiLCJ1c2VybmFtZSIsInNpZ25VcFJlc3BvbnNlIiwiY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkIiwidXNlcklEIiwic2V0RG9jIiwiY3JlYXRlU3RpY2t5RWxlbWVudCIsInN0aWNreU9iamVjdCIsInN0aWNreU5vdGUiLCJnZXRSYW5kb21EZWdyZWUiLCJkZWxldGVCdG4iLCJzdGlja3lUaXRsZSIsInRleHRDb250ZW50IiwidGl0bGUiLCJzdGlja3lEZXNjcmlwdGlvbiIsImRlc2NyaXB0aW9uIiwic3RpY2t5RGF0ZSIsImZvcm1hdERhdGUiLCJzdGlja3lSZWYiLCJhcnIiLCJoYW5kbGVQaW5Gb3JtQ2xhc3MiLCJlbXB0eUZpZWxkcyIsImZvcm1hdFRvZGF5RGF0ZU9uRm9ybSIsImFkZERvYyIsInNpZ25JbldpdGhDcmVkZW50aWFsIiwic2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQiLCJkYXRlRW50ZXJlZCIsImZvbWF0dGVkRGF0ZSIsInRvRGF0ZVN0cmluZyIsImdldERvYyIsIl9fUFJJVkFURV92YWxpZGF0ZUhhc0V4cGxpY2l0T3JkZXJCeUZvckxpbWl0VG9MYXN0Iiwib25TbmFwc2hvdCJdLCJzb3VyY2VSb290IjoiIn0=